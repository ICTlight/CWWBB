/**
* worktile v4.1.33 by @YCTech
* Copyright 2015-10-23 wow@worktile.com
*/
function Sanitize(){var a,b;for(b=arguments[0]||{},this.config={},this.config.elements=b.elements?b.elements:[],this.config.attributes=b.attributes?b.attributes:{},this.config.attributes[Sanitize.ALL]=this.config.attributes[Sanitize.ALL]?this.config.attributes[Sanitize.ALL]:[],this.config.allow_comments=b.allow_comments?b.allow_comments:!1,this.allowed_elements={},this.config.protocols=b.protocols?b.protocols:{},this.config.add_attributes=b.add_attributes?b.add_attributes:{},this.dom=b.dom?b.dom:document,a=0;a<this.config.elements.length;a++)this.allowed_elements[this.config.elements[a]]=!0;if(this.config.remove_element_contents={},this.config.remove_all_contents=!1,b.remove_contents)if(b.remove_contents instanceof Array)for(a=0;a<b.remove_contents.length;a++)this.config.remove_element_contents[b.remove_contents[a]]=!0;else this.config.remove_all_contents=!0;this.transformers=b.transformers?b.transformers:[]}function b64_sha1(a){return binb2b64(core_sha1(str2binb(a),8*a.length))}function str_sha1(a){return binb2str(core_sha1(str2binb(a),8*a.length))}function b64_hmac_sha1(a,b){return binb2b64(core_hmac_sha1(a,b))}function str_hmac_sha1(a,b){return binb2str(core_hmac_sha1(a,b))}function core_sha1(a,b){a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;var c,d,e,f,g,h,i,j,k=new Array(80),l=1732584193,m=-271733879,n=-1732584194,o=271733878,p=-1009589776;for(c=0;c<a.length;c+=16){for(f=l,g=m,h=n,i=o,j=p,d=0;80>d;d++)16>d?k[d]=a[c+d]:k[d]=rol(k[d-3]^k[d-8]^k[d-14]^k[d-16],1),e=safe_add(safe_add(rol(l,5),sha1_ft(d,m,n,o)),safe_add(safe_add(p,k[d]),sha1_kt(d))),p=o,o=n,n=rol(m,30),m=l,l=e;l=safe_add(l,f),m=safe_add(m,g),n=safe_add(n,h),o=safe_add(o,i),p=safe_add(p,j)}return[l,m,n,o,p]}function sha1_ft(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d}function sha1_kt(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function core_hmac_sha1(a,b){var c=str2binb(a);c.length>16&&(c=core_sha1(c,8*a.length));for(var d=new Array(16),e=new Array(16),f=0;16>f;f++)d[f]=909522486^c[f],e[f]=1549556828^c[f];var g=core_sha1(d.concat(str2binb(b)),512+8*b.length);return core_sha1(e.concat(g),672)}function safe_add(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function rol(a,b){return a<<b|a>>>32-b}function str2binb(a){for(var b=[],c=255,d=0;d<8*a.length;d+=8)b[d>>5]|=(a.charCodeAt(d/8)&c)<<24-d%32;return b}function binb2str(a){for(var b="",c=255,d=0;d<32*a.length;d+=8)b+=String.fromCharCode(a[d>>5]>>>24-d%32&c);return b}function binb2b64(a){for(var b,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="",f=0;f<4*a.length;f+=3)for(b=(a[f>>2]>>8*(3-f%4)&255)<<16|(a[f+1>>2]>>8*(3-(f+1)%4)&255)<<8|a[f+2>>2]>>8*(3-(f+2)%4)&255,c=0;4>c;c++)e+=8*f+6*c>32*a.length?"=":d.charAt(b>>6*(3-c)&63);return e}if(function(){function a(a,b){if(a!==b){var c=null===a,d=a===w,e=a===a,f=null===b,g=b===w,h=b===b;if(a>b&&!f||!e||c&&!g&&h||d&&h)return 1;if(b>a&&!c||!h||f&&!d&&e||g&&e)return-1}return 0}function b(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function c(a,b,c){if(b!==b)return n(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function d(a){return"function"==typeof a||!1}function e(a){return null==a?"":a+""}function f(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function g(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function h(b,c){return a(b.criteria,c.criteria)||b.index-c.index}function i(b,c,d){for(var e=-1,f=b.criteria,g=c.criteria,h=f.length,i=d.length;++e<h;){var j=a(f[e],g[e]);if(j){if(e>=i)return j;var k=d[e];return j*("asc"===k||k===!0?1:-1)}}return b.index-c.index}function j(a){return Pa[a]}function k(a){return Qa[a]}function l(a,b,c){return b?a=Ta[a]:c&&(a=Ua[a]),"\\"+a}function m(a){return"\\"+Ua[a]}function n(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function o(a){return!!a&&"object"==typeof a}function p(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function q(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=P,f[++e]=c);return f}function r(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function s(a){for(var b=-1,c=a.length;++b<c&&p(a.charCodeAt(b)););return b}function t(a){for(var b=a.length;b--&&p(a.charCodeAt(b)););return b}function u(a){return Ra[a]}function v(p){function W(a){if(o(a)&&!Ch(a)&&!(a instanceof Pa)){if(a instanceof aa)return a;if(ag.call(a,"__chain__")&&ag.call(a,"__wrapped__"))return md(a)}return new aa(a)}function $(){}function aa(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Pa(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bg,this.__views__=[]}function Qa(){var a=new Pa(this.__wrapped__);return a.__actions__=cb(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=cb(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=cb(this.__views__),a}function Ra(){if(this.__filtered__){var a=new Pa(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Sa(){var a=this.__wrapped__.value(),b=this.__dir__,c=Ch(a),d=0>b,e=c?a.length:0,f=Tc(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=wg(i,this.__takeCount__);if(!c||L>e||e==i&&n==i)return cc(a,this.__actions__);var o=[];a:for(;i--&&n>m;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==N)q=u;else if(!u){if(t==M)continue a;break a}}o[m++]=q}return o}function Ta(){this.__data__={}}function Ua(a){return this.has(a)&&delete this.__data__[a]}function Va(a){return"__proto__"==a?w:this.__data__[a]}function Wa(a){return"__proto__"!=a&&ag.call(this.__data__,a)}function Xa(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Ya(a){var b=a?a.length:0;for(this.data={hash:qg(null),set:new kg};b--;)this.push(a[b])}function Za(a,b){var c=a.data,d="string"==typeof b||He(b)?c.set.has(b):c.hash[b];return d?0:-1}function $a(a){var b=this.data;"string"==typeof a||He(a)?b.set.add(a):b.hash[a]=!0}function bb(a,b){for(var c=-1,d=a.length,e=-1,f=b.length,g=Of(d+f);++c<d;)g[c]=a[c];for(;++e<f;)g[c++]=b[e];return g}function cb(a,b){var c=-1,d=a.length;for(b||(b=Of(d));++c<d;)b[c]=a[c];return b}function db(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function eb(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function fb(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function gb(a,b,c,d){for(var e=-1,f=a.length,g=d,h=g;++e<f;){var i=a[e],j=+b(i);c(j,g)&&(g=j,h=i)}return h}function hb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function ib(a,b){for(var c=-1,d=a.length,e=Of(d);++c<d;)e[c]=b(a[c],c,a);return e}function jb(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function kb(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function lb(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function mb(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function nb(a,b){for(var c=a.length,d=0;c--;)d+=+b(a[c])||0;return d}function ob(a,b){return a===w?b:a}function pb(a,b,c,d){return a!==w&&ag.call(d,c)?a:b}function qb(a,b,c){for(var d=-1,e=Nh(b),f=e.length;++d<f;){var g=e[d],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==w||g in a)||(a[g]=i)}return a}function rb(a,b){return null==b?a:tb(b,Nh(b),a)}function sb(a,b){for(var c=-1,d=null==a,e=!d&&Yc(a),f=e?a.length:0,g=b.length,h=Of(g);++c<g;){var i=b[c];e?h[c]=Zc(i,f)?a[i]:w:h[c]=d?w:a[i]}return h}function tb(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function ub(a,b,c){var d=typeof a;return"function"==d?b===w?a:fc(a,b,c):null==a?Bf:"object"==d?Nb(a):b===w?Hf(a):Ob(a,b)}function vb(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),h!==w)return h;if(!He(a))return a;var i=Ch(a);if(i){if(h=Uc(a),!b)return cb(a,h)}else{var j=cg.call(a),k=j==V;if(j!=Y&&j!=Q&&(!k||e))return Oa[j]?Wc(a,j,b):e?a:{};if(h=Vc(k?{}:a),!b)return rb(h,a)}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?db:Fb)(a,function(d,e){h[e]=vb(d,b,c,e,a,f,g)}),h}function wb(a,b,c){if("function"!=typeof a)throw new Xf(O);return lg(function(){a.apply(w,c)},b)}function xb(a,b){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,g=Qc(),h=g===c,i=h&&b.length>=L?oc(b):null,j=b.length;i&&(g=Za,h=!1,b=i);a:for(;++f<d;){var k=a[f];if(h&&k===k){for(var l=j;l--;)if(b[l]===k)continue a;e.push(k)}else g(b,k,0)<0&&e.push(k)}return e}function yb(a,b){var c=!0;return Jg(a,function(a,d,e){return c=!!b(a,d,e)}),c}function zb(a,b,c,d){var e=d,f=e;return Jg(a,function(a,g,h){var i=+b(a,g,h);(c(i,e)||i===d&&i===f)&&(e=i,f=a)}),f}function Ab(a,b,c,d){var e=a.length;for(c=null==c?0:+c||0,0>c&&(c=-c>e?0:e+c),d=d===w||d>e?e:+d||0,0>d&&(d+=e),e=c>d?0:d>>>0,c>>>=0;e>c;)a[c++]=b;return a}function Bb(a,b){var c=[];return Jg(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Cb(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function Db(a,b,c,d){d||(d=[]);for(var e=-1,f=a.length;++e<f;){var g=a[e];o(g)&&Yc(g)&&(c||Ch(g)||ye(g))?b?Db(g,b,c,d):jb(d,g):c||(d[d.length]=g)}return d}function Eb(a,b){return Lg(a,b,_e)}function Fb(a,b){return Lg(a,b,Nh)}function Gb(a,b){return Mg(a,b,Nh)}function Hb(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];Ge(a[g])&&(f[++e]=g)}return f}function Ib(a,b,c){if(null!=a){c!==w&&c in kd(a)&&(b=[c]);for(var d=0,e=b.length;null!=a&&e>d;)a=a[b[d++]];return d&&d==e?a:w}}function Jb(a,b,c,d,e,f){return a===b?!0:null==a||null==b||!He(a)&&!o(b)?a!==a&&b!==b:Kb(a,b,Jb,c,d,e,f)}function Kb(a,b,c,d,e,f,g){var h=Ch(a),i=Ch(b),j=R,k=R;h||(j=cg.call(a),j==Q?j=Y:j!=Y&&(h=Qe(a))),i||(k=cg.call(b),k==Q?k=Y:k!=Y&&(i=Qe(b)));var l=j==Y,m=k==Y,n=j==k;if(n&&!h&&!l)return Mc(a,b,j);if(!e){var o=l&&ag.call(a,"__wrapped__"),p=m&&ag.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?Lc:Nc)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Lb(a,b,c){var d=b.length,e=d,f=!c;if(null==a)return!e;for(a=kd(a);d--;){var g=b[d];if(f&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++d<e;){g=b[d];var h=g[0],i=a[h],j=g[1];if(f&&g[2]){if(i===w&&!(h in a))return!1}else{var k=c?c(i,j,h):w;if(!(k===w?Jb(j,i,c,!0):k))return!1}}return!0}function Mb(a,b){var c=-1,d=Yc(a)?Of(a.length):[];return Jg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Nb(a){var b=Rc(a);if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null==a?!1:a[c]===d&&(d!==w||c in kd(a))}}return function(a){return Lb(a,b)}}function Ob(a,b){var c=Ch(a),d=_c(a)&&cd(b),e=a+"";return a=ld(a),function(f){if(null==f)return!1;var g=e;if(f=kd(f),(c||!d)&&!(g in f)){if(f=1==a.length?f:Ib(f,Wb(a,0,-1)),null==f)return!1;g=zd(a),f=kd(f)}return f[g]===b?b!==w||g in f:Jb(b,f[g],w,!0)}}function Pb(a,b,c,d,e){if(!He(a))return a;var f=Yc(b)&&(Ch(b)||Qe(b)),g=f?w:Nh(b);return db(g||b,function(h,i){if(g&&(i=h,h=b[i]),o(h))d||(d=[]),e||(e=[]),Qb(a,b,i,Pb,c,d,e);else{var j=a[i],k=c?c(j,h,i,a,b):w,l=k===w;l&&(k=h),k===w&&(!f||i in a)||!l&&(k===k?k===j:j!==j)||(a[i]=k)}}),a}function Qb(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):w,l=k===w;l&&(k=i,Yc(i)&&(Ch(i)||Qe(i))?k=Ch(j)?j:Yc(j)?cb(j):[]:Ne(i)||ye(i)?k=ye(j)?Ve(j):Ne(j)?j:{}:l=!1),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Rb(a){return function(b){return null==b?w:b[a]}}function Sb(a){var b=a+"";return a=ld(a),function(c){return Ib(c,a,b)}}function Tb(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&Zc(d)){var e=d;mg.call(a,d,1)}}return a}function Ub(a,b){return a+rg(zg()*(b-a+1))}function Vb(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Wb(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=c===w||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Of(e);++d<e;)f[d]=a[d+b];return f}function Xb(a,b){var c;return Jg(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Yb(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function Zb(a,b,c){var d=Oc(),e=-1;b=ib(b,function(a){return d(a)});var f=Mb(a,function(a){var c=ib(b,function(b){return b(a)});return{criteria:c,index:++e,value:a}});return Yb(f,function(a,b){return i(a,b,c)})}function $b(a,b){var c=0;return Jg(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function _b(a,b){var d=-1,e=Qc(),f=a.length,g=e===c,h=g&&f>=L,i=h?oc():null,j=[];i?(e=Za,g=!1):(h=!1,i=b?[]:j);a:for(;++d<f;){var k=a[d],l=b?b(k,d,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else e(i,l,0)<0&&((b||h)&&i.push(l),j.push(k))}return j}function ac(a,b){for(var c=-1,d=b.length,e=Of(d);++c<d;)e[c]=a[b[c]];return e}function bc(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Wb(a,d?0:f,d?f+1:e):Wb(a,d?f+1:0,d?e:f)}function cc(a,b){var c=a;c instanceof Pa&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=b[d];c=f.func.apply(f.thisArg,jb([c],f.args))}return c}function dc(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&Eg>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)&&null!==g?d=f+1:e=f}return e}return ec(a,b,Bf,c)}function ec(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=b===w;f>e;){var j=rg((e+f)/2),k=c(a[j]),l=k!==w,m=k===k;if(g)var n=m||d;else n=h?m&&l&&(d||null!=k):i?m&&(d||l):null==k?!1:d?b>=k:b>k;n?e=j+1:f=j}return wg(f,Dg)}function fc(a,b,c){if("function"!=typeof a)return Bf;if(b===w)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function gc(a){var b=new fg(a.byteLength),c=new ng(b);return c.set(new ng(a)),b}function hc(a,b,c){for(var d=c.length,e=-1,f=vg(a.length-d,0),g=-1,h=b.length,i=Of(h+f);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function ic(a,b,c){for(var d=-1,e=c.length,f=-1,g=vg(a.length-e,0),h=-1,i=b.length,j=Of(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function jc(a,b){return function(c,d,e){var f=b?b():{};if(d=Oc(d,e,3),Ch(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else Jg(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function kc(a){return qe(function(b,c){var d=-1,e=null==b?0:c.length,f=e>2?c[e-2]:w,g=e>2?c[2]:w,h=e>1?c[e-1]:w;for("function"==typeof f?(f=fc(f,h,5),e-=2):(f="function"==typeof h?h:w,e-=f?1:0),g&&$c(c[0],c[1],g)&&(f=3>e?w:f,e=1);++d<e;){var i=c[d];i&&a(b,i,f)}return b})}function lc(a,b){return function(c,d){var e=c?Pg(c):0;if(!bd(e))return a(c,d);for(var f=b?e:-1,g=kd(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function mc(a){return function(b,c,d){for(var e=kd(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function nc(a,b){function c(){var e=this&&this!==_a&&this instanceof c?d:a;return e.apply(b,arguments)}var d=qc(a);return c}function oc(a){return qg&&kg?new Ya(a):null}function pc(a){return function(b){for(var c=-1,d=yf(kf(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function qc(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Ig(a.prototype),d=a.apply(c,b);return He(d)?d:c}}function rc(a){function b(c,d,e){e&&$c(c,d,e)&&(d=w);var f=Kc(c,a,w,w,w,w,w,d);return f.placeholder=b.placeholder,f}return b}function sc(a,b){return qe(function(c){var d=c[0];return null==d?d:(c.push(b),a.apply(w,c))})}function tc(a,b){return function(c,d,e){if(e&&$c(c,d,e)&&(d=w),d=Oc(d,e,3),1==d.length){c=Ch(c)?c:jd(c);var f=gb(c,d,a,b);if(!c.length||f!==b)return f}return zb(c,d,a,b)}}function uc(a,c){return function(d,e,f){if(e=Oc(e,f,3),Ch(d)){var g=b(d,e,c);return g>-1?d[g]:w}return Cb(d,e,a)}}function vc(a){return function(c,d,e){return c&&c.length?(d=Oc(d,e,3),b(c,d,a)):-1}}function wc(a){return function(b,c,d){return c=Oc(c,d,3),Cb(b,c,a,!0)}}function xc(a){return function(){for(var b,c=arguments.length,d=a?c:-1,e=0,f=Of(c);a?d--:++d<c;){var g=f[e++]=arguments[d];if("function"!=typeof g)throw new Xf(O);!b&&aa.prototype.thru&&"wrapper"==Pc(g)&&(b=new aa([],!0))}for(d=b?-1:c;++d<c;){g=f[d];var h=Pc(g),i="wrapper"==h?Og(g):w;b=i&&ad(i[0])&&i[1]==(F|B|D|G)&&!i[4].length&&1==i[9]?b[Pc(i[0])].apply(b,i[3]):1==g.length&&ad(g)?b[h]():b.thru(g)}return function(){var a=arguments,d=a[0];if(b&&1==a.length&&Ch(d)&&d.length>=L)return b.plant(d).value();for(var e=0,g=c?f[e].apply(this,a):d;++e<c;)g=f[e].call(this,g);return g}}}function yc(a,b){return function(c,d,e){return"function"==typeof d&&e===w&&Ch(c)?a(c,d):b(c,fc(d,e,3))}}function zc(a){return function(b,c,d){return("function"!=typeof c||d!==w)&&(c=fc(c,d,3)),a(b,c,_e)}}function Ac(a){return function(b,c,d){return("function"!=typeof c||d!==w)&&(c=fc(c,d,3)),a(b,c)}}function Bc(a){return function(b,c,d){var e={};return c=Oc(c,d,3),Fb(b,function(b,d,f){var g=c(b,d,f);d=a?g:d,b=a?b:g,e[d]=b}),e}}function Cc(a){return function(b,c,d){return b=e(b),(a?b:"")+Gc(b,c,d)+(a?"":b)}}function Dc(a){var b=qe(function(c,d){var e=q(d,b.placeholder);return Kc(c,a,w,d,e)});return b}function Ec(a,b){return function(c,d,e,f){var g=arguments.length<3;return"function"==typeof d&&f===w&&Ch(c)?a(c,d,e,g):Vb(c,Oc(d,f,4),e,g,b)}}function Fc(a,b,c,d,e,f,g,h,i,j){function k(){for(var t=arguments.length,u=t,v=Of(t);u--;)v[u]=arguments[u];if(d&&(v=hc(v,d,e)),f&&(v=ic(v,f,g)),o||r){var x=k.placeholder,A=q(v,x);if(t-=A.length,j>t){var B=h?cb(h):w,C=vg(j-t,0),F=o?A:w,G=o?w:A,H=o?v:w,I=o?w:v;b|=o?D:E,b&=~(o?E:D),p||(b&=~(y|z));var J=[a,b,c,H,F,I,G,B,i,C],K=Fc.apply(w,J);return ad(a)&&Qg(K,J),K.placeholder=x,K}}var L=m?c:this,M=n?L[a]:a;return h&&(v=hd(v,h)),l&&i<v.length&&(v.length=i),this&&this!==_a&&this instanceof k&&(M=s||qc(a)),M.apply(L,v)}var l=b&F,m=b&y,n=b&z,o=b&B,p=b&A,r=b&C,s=n?w:qc(a);return k}function Gc(a,b,c){var d=a.length;if(b=+b,d>=b||!tg(b))return"";var e=b-d;return c=null==c?" ":c+"",qf(c,pg(e/c.length)).slice(0,e)}function Hc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Of(j+h);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];var l=this&&this!==_a&&this instanceof e?g:a;return l.apply(f?c:this,k)}var f=b&y,g=qc(a);return e}function Ic(a){var b=Sf[a];return function(a,c){return c=c===w?0:+c||0,c?(c=ig(10,c),b(a*c)/c):b(a)}}function Jc(a){return function(b,c,d,e){var f=Oc(d);return null==d&&f===ub?dc(b,c,a):ec(b,c,f(d,e,1),a)}}function Kc(a,b,c,d,e,f,g,h){var i=b&z;if(!i&&"function"!=typeof a)throw new Xf(O);var j=d?d.length:0;if(j||(b&=~(D|E),d=e=w),j-=e?e.length:0,b&E){var k=d,l=e;d=e=w}var m=i?w:Og(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&(dd(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:vg(h-j,0)||0,b==y)var o=nc(n[0],n[2]);else o=b!=D&&b!=(y|D)||n[4].length?Fc.apply(w,n):Hc.apply(w,n);var p=m?Ng:Qg;return p(o,n)}function Lc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length;if(i!=j&&!(e&&j>i))return!1;for(;++h<i;){var k=a[h],l=b[h],m=d?d(e?l:k,e?k:l,h):w;if(m!==w){if(m)continue;return!1}if(e){if(!mb(b,function(a){return k===a||c(k,a,d,e,f,g)}))return!1}else if(k!==l&&!c(k,l,d,e,f,g))return!1}return!0}function Mc(a,b,c){switch(c){case S:case T:return+a==+b;case U:return a.name==b.name&&a.message==b.message;case X:return a!=+a?b!=+b:a==+b;case Z:case _:return a==b+""}return!1}function Nc(a,b,c,d,e,f,g){var h=Nh(a),i=h.length,j=Nh(b),k=j.length;if(i!=k&&!e)return!1;for(var l=i;l--;){var m=h[l];if(!(e?m in b:ag.call(b,m)))return!1}for(var n=e;++l<i;){m=h[l];var o=a[m],p=b[m],q=d?d(e?p:o,e?o:p,m):w;if(!(q===w?c(o,p,d,e,f,g):q))return!1;n||(n="constructor"==m)}if(!n){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function Oc(a,b,c){var d=W.callback||zf;return d=d===zf?ub:d,c?d(a,b,c):d}function Pc(a){for(var b=a.name+"",c=Hg[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Qc(a,b,d){var e=W.indexOf||xd;return e=e===xd?c:e,a?e(a,b,d):e}function Rc(a){for(var b=af(a),c=b.length;c--;)b[c][2]=cd(b[c][1]);return b}function Sc(a,b){var c=null==a?w:a[b];return Ke(c)?c:w}function Tc(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=wg(b,a+g);break;case"takeRight":a=vg(a,b-g)}}return{start:a,end:b}}function Uc(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&ag.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Vc(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Uf),new b}function Wc(a,b,c){var d=a.constructor;switch(b){case ba:return gc(a);case S:case T:return new d(+a);case ca:case da:case ea:case fa:case ga:case ha:case ia:case ja:case ka:var e=a.buffer;return new d(c?gc(e):e,a.byteOffset,a.length);case X:case _:return new d(a);case Z:var f=new d(a.source,Da.exec(a));f.lastIndex=a.lastIndex}return f}function Xc(a,b,c){null==a||_c(b,a)||(b=ld(b),a=1==b.length?a:Ib(a,Wb(b,0,-1)),b=zd(b));var d=null==a?a:a[b];return null==d?w:d.apply(a,c)}function Yc(a){return null!=a&&bd(Pg(a))}function Zc(a,b){return a="number"==typeof a||Ga.test(a)?+a:-1,b=null==b?Fg:b,a>-1&&a%1==0&&b>a}function $c(a,b,c){if(!He(c))return!1;var d=typeof b;if("number"==d?Yc(c)&&Zc(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function _c(a,b){var c=typeof a;if("string"==c&&wa.test(a)||"number"==c)return!0;if(Ch(a))return!1;var d=!va.test(a);return d||null!=b&&a in kd(b)}function ad(a){var b=Pc(a),c=W[b];if("function"!=typeof c||!(b in Pa.prototype))return!1;if(a===c)return!0;var d=Og(c);return!!d&&a===d[0]}function bd(a){return"number"==typeof a&&a>-1&&a%1==0&&Fg>=a}function cd(a){return a===a&&!He(a)}function dd(a,b){var c=a[1],d=b[1],e=c|d,f=F>e,g=d==F&&c==B||d==F&&c==G&&a[7].length<=b[8]||d==(F|G)&&c==B;if(!f&&!g)return a;d&y&&(a[2]=b[2],e|=c&y?0:A);var h=b[3];if(h){var i=a[3];a[3]=i?hc(i,h,b[4]):cb(h),a[4]=i?q(a[3],P):cb(b[4])}return h=b[5],h&&(i=a[5],a[5]=i?ic(i,h,b[6]):cb(h),a[6]=i?q(a[5],P):cb(b[6])),h=b[7],h&&(a[7]=cb(h)),d&F&&(a[8]=null==a[8]?b[8]:wg(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function ed(a,b){return a===w?b:Dh(a,b,ed)}function fd(a,b){a=kd(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function gd(a,b){var c={};return Eb(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function hd(a,b){for(var c=a.length,d=wg(b.length,c),e=cb(a);d--;){var f=b[d];a[d]=Zc(f,c)?e[f]:w}return a}function id(a){for(var b=_e(a),c=b.length,d=c&&a.length,e=!!d&&bd(d)&&(Ch(a)||ye(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&Zc(h,d)||ag.call(a,h))&&g.push(h)}return g}function jd(a){return null==a?[]:Yc(a)?He(a)?a:Uf(a):ef(a)}function kd(a){return He(a)?a:Uf(a)}function ld(a){if(Ch(a))return a;var b=[];return e(a).replace(xa,function(a,c,d,e){b.push(d?e.replace(Ba,"$1"):c||a)}),b}function md(a){return a instanceof Pa?a.clone():new aa(a.__wrapped__,a.__chain__,cb(a.__actions__))}function nd(a,b,c){b=(c?$c(a,b,c):null==b)?1:vg(rg(b)||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Of(pg(e/b));e>d;)g[++f]=Wb(a,d,d+=b);return g}function od(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function pd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&&(b=1),Wb(a,0>b?0:b)):[]}function qd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&&(b=1),b=d-(+b||0),Wb(a,0,0>b?0:b)):[]}function rd(a,b,c){return a&&a.length?bc(a,Oc(b,c,3),!0,!0):[]}function sd(a,b,c){return a&&a.length?bc(a,Oc(b,c,3),!0):[]}function td(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&$c(a,b,c)&&(c=0,d=e),Ab(a,b,c,d)):[]}function ud(a){return a?a[0]:w}function vd(a,b,c){var d=a?a.length:0;return c&&$c(a,b,c)&&(b=!1),d?Db(a,b):[]}function wd(a){var b=a?a.length:0;return b?Db(a,!0):[]}function xd(a,b,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?vg(e+d,0):d;else if(d){var f=dc(a,b);return e>f&&(b===b?b===a[f]:a[f]!==a[f])?f:-1}return c(a,b,d||0)}function yd(a){return qd(a,1)}function zd(a){var b=a?a.length:0;return b?a[b-1]:w}function Ad(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?vg(d+c,0):wg(c||0,d-1))+1;else if(c){e=dc(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return n(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Bd(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Qc(),e=a.length;++c<e;)for(var f=0,g=a[c];(f=d(b,g,f))>-1;)mg.call(b,f,1);return b}function Cd(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=Oc(b,c,3);++e<g;){var h=a[e];b(h,e,a)&&(d.push(h),f.push(e))}return Tb(a,f),d}function Dd(a){return pd(a,1)}function Ed(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&$c(a,b,c)&&(b=0,c=d),Wb(a,b,c)):[]}function Fd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&&(b=1),Wb(a,0,0>b?0:b)):[]}function Gd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&&(b=1),b=d-(+b||0),Wb(a,0>b?0:b)):[]}function Hd(a,b,c){return a&&a.length?bc(a,Oc(b,c,3),!1,!0):[]}function Id(a,b,c){return a&&a.length?bc(a,Oc(b,c,3)):[]}function Jd(a,b,d,e){var f=a?a.length:0;if(!f)return[];null!=b&&"boolean"!=typeof b&&(e=d,d=$c(a,b,e)?w:b,b=!1);var g=Oc();return(null!=d||g!==ub)&&(d=g(d,e,3)),b&&Qc()===c?r(a,d):_b(a,d)}function Kd(a){if(!a||!a.length)return[];var b=-1,c=0;a=hb(a,function(a){return Yc(a)?(c=vg(a.length,c),!0):void 0});for(var d=Of(c);++b<c;)d[b]=ib(a,Rb(b));return d}function Ld(a,b,c){var d=a?a.length:0;if(!d)return[];var e=Kd(a);return null==b?e:(b=fc(b,c,4),ib(e,function(a){return kb(a,b,w,!0)}))}function Md(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Yc(c))var d=d?jb(xb(d,c),xb(c,d)):c}return d?_b(d):[]}function Nd(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Ch(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Od(a){var b=W(a);return b.__chain__=!0,b}function Pd(a,b,c){return b.call(c,a),a}function Qd(a,b,c){return b.call(c,a)}function Rd(){return Od(this)}function Sd(){return new aa(this.value(),this.__chain__)}function Td(a){for(var b,c=this;c instanceof $;){var d=md(c);b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function Ud(){var a=this.__wrapped__,b=function(a){return a.reverse()};if(a instanceof Pa){var c=a;return this.__actions__.length&&(c=new Pa(this)),c=c.reverse(),c.__actions__.push({func:Qd,args:[b],thisArg:w}),new aa(c,this.__chain__)}return this.thru(b)}function Vd(){return this.value()+""}function Wd(){return cc(this.__wrapped__,this.__actions__)}function Xd(a,b,c){var d=Ch(a)?fb:yb;return c&&$c(a,b,c)&&(b=w),("function"!=typeof b||c!==w)&&(b=Oc(b,c,3)),d(a,b)}function Yd(a,b,c){var d=Ch(a)?hb:Bb;return b=Oc(b,c,3),d(a,b)}function Zd(a,b){return dh(a,Nb(b))}function $d(a,b,c,d){var e=a?Pg(a):0;return bd(e)||(a=ef(a),e=a.length),c="number"!=typeof c||d&&$c(b,c,d)?0:0>c?vg(e+c,0):c||0,"string"==typeof a||!Ch(a)&&Pe(a)?e>=c&&a.indexOf(b,c)>-1:!!e&&Qc(a,b,c)>-1}function _d(a,b,c){var d=Ch(a)?ib:Mb;return b=Oc(b,c,3),d(a,b)}function ae(a,b){return _d(a,Hf(b))}function be(a,b,c){var d=Ch(a)?hb:Bb;return b=Oc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function ce(a,b,c){if(c?$c(a,b,c):null==b){a=jd(a);var d=a.length;return d>0?a[Ub(0,d-1)]:w}var e=-1,f=Ue(a),d=f.length,g=d-1;for(b=wg(0>b?0:+b||0,d);++e<b;){var h=Ub(e,g),i=f[h];f[h]=f[e],f[e]=i}return f.length=b,f}function de(a){return ce(a,Bg)}function ee(a){var b=a?Pg(a):0;return bd(b)?b:Nh(a).length}function fe(a,b,c){var d=Ch(a)?mb:Xb;return c&&$c(a,b,c)&&(b=w),("function"!=typeof b||c!==w)&&(b=Oc(b,c,3)),d(a,b)}function ge(a,b,c){if(null==a)return[];c&&$c(a,b,c)&&(b=w);var d=-1;b=Oc(b,c,3);var e=Mb(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}});return Yb(e,h)}function he(a,b,c,d){return null==a?[]:(d&&$c(b,c,d)&&(c=w),Ch(b)||(b=null==b?[]:[b]),Ch(c)||(c=null==c?[]:[c]),Zb(a,b,c))}function ie(a,b){return Yd(a,Nb(b))}function je(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Xf(O);var c=a;a=b,b=c}return a=tg(a=+a)?a:0,function(){return--a<1?b.apply(this,arguments):void 0}}function ke(a,b,c){return c&&$c(a,b,c)&&(b=w),b=a&&null==b?a.length:vg(+b||0,0),Kc(a,F,w,w,w,w,b)}function le(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Xf(O);var d=a;a=b,b=d}return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=w),c}}function me(a,b,c){function d(){n&&gg(n),j&&gg(j),p=0,j=n=o=w}function e(b,c){c&&gg(c),j=n=o=w,b&&(p=oh(),k=a.apply(m,i),n||j||(i=m=w))}function f(){var a=b-(oh()-l);0>=a||a>b?e(o,j):n=lg(f,a)}function g(){e(r,n)}function h(){if(i=arguments,l=oh(),m=this,o=r&&(n||!s),q===!1)var c=s&&!n;else{j||s||(p=l);var d=q-(l-p),e=0>=d||d>q;e?(j&&(j=gg(j)),p=l,k=a.apply(m,i)):j||(j=lg(g,d))}return e&&n?n=gg(n):n||b===q||(n=lg(f,b)),c&&(e=!0,k=a.apply(m,i)),!e||n||j||(i=m=w),k}var i,j,k,l,m,n,o,p=0,q=!1,r=!0;if("function"!=typeof a)throw new Xf(O);if(b=0>b?0:+b||0,c===!0){var s=!0;r=!1}else He(c)&&(s=!!c.leading,q="maxWait"in c&&vg(+c.maxWait||0,b),r="trailing"in c?!!c.trailing:r);return h.cancel=d,h}function ne(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Xf(O);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new ne.Cache,c}function oe(a){if("function"!=typeof a)throw new Xf(O);return function(){return!a.apply(this,arguments)}}function pe(a){return le(2,a)}function qe(a,b){if("function"!=typeof a)throw new Xf(O);return b=vg(b===w?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=vg(c.length-b,0),f=Of(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}var g=Of(b+1);for(d=-1;++d<b;)g[d]=c[d];return g[b]=f,a.apply(this,g)}}function re(a){if("function"!=typeof a)throw new Xf(O);return function(b){return a.apply(this,b)}}function se(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Xf(O);return c===!1?d=!1:He(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),me(a,b,{leading:d,maxWait:+b,trailing:e})}function te(a,b){return b=null==b?Bf:b,Kc(b,D,w,[a],[])}function ue(a,b,c,d){return b&&"boolean"!=typeof b&&$c(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),"function"==typeof c?vb(a,b,fc(c,d,3)):vb(a,b)}function ve(a,b,c){return"function"==typeof b?vb(a,!0,fc(b,c,3)):vb(a,!0)}function we(a,b){return a>b}function xe(a,b){return a>=b}function ye(a){return o(a)&&Yc(a)&&ag.call(a,"callee")&&!jg.call(a,"callee")}function ze(a){return a===!0||a===!1||o(a)&&cg.call(a)==S}function Ae(a){return o(a)&&cg.call(a)==T}function Be(a){return!!a&&1===a.nodeType&&o(a)&&!Ne(a)}function Ce(a){return null==a?!0:Yc(a)&&(Ch(a)||Pe(a)||ye(a)||o(a)&&Ge(a.splice))?!a.length:!Nh(a).length}function De(a,b,c,d){c="function"==typeof c?fc(c,d,3):w;var e=c?c(a,b):w;return e===w?Jb(a,b,c):!!e}function Ee(a){return o(a)&&"string"==typeof a.message&&cg.call(a)==U}function Fe(a){return"number"==typeof a&&tg(a)}function Ge(a){return He(a)&&cg.call(a)==V}function He(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Ie(a,b,c,d){return c="function"==typeof c?fc(c,d,3):w,Lb(a,Rc(b),c);
}function Je(a){return Me(a)&&a!=+a}function Ke(a){return null==a?!1:Ge(a)?eg.test(_f.call(a)):o(a)&&Fa.test(a)}function Le(a){return null===a}function Me(a){return"number"==typeof a||o(a)&&cg.call(a)==X}function Ne(a){var b;if(!o(a)||cg.call(a)!=Y||ye(a)||!ag.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return Eb(a,function(a,b){c=b}),c===w||ag.call(a,c)}function Oe(a){return He(a)&&cg.call(a)==Z}function Pe(a){return"string"==typeof a||o(a)&&cg.call(a)==_}function Qe(a){return o(a)&&bd(a.length)&&!!Na[cg.call(a)]}function Re(a){return a===w}function Se(a,b){return b>a}function Te(a,b){return b>=a}function Ue(a){var b=a?Pg(a):0;return bd(b)?b?cb(a):[]:ef(a)}function Ve(a){return tb(a,_e(a))}function We(a,b,c){var d=Ig(a);return c&&$c(a,b,c)&&(b=w),b?rb(d,b):d}function Xe(a){return Hb(a,_e(a))}function Ye(a,b,c){var d=null==a?w:Ib(a,ld(b),b+"");return d===w?c:d}function Ze(a,b){if(null==a)return!1;var c=ag.call(a,b);if(!c&&!_c(b)){if(b=ld(b),a=1==b.length?a:Ib(a,Wb(b,0,-1)),null==a)return!1;b=zd(b),c=ag.call(a,b)}return c||bd(a.length)&&Zc(b,a.length)&&(Ch(a)||ye(a))}function $e(a,b,c){c&&$c(a,b,c)&&(b=w);for(var d=-1,e=Nh(a),f=e.length,g={};++d<f;){var h=e[d],i=a[h];b?ag.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function _e(a){if(null==a)return[];He(a)||(a=Uf(a));var b=a.length;b=b&&bd(b)&&(Ch(a)||ye(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Of(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&Zc(h,b)||"constructor"==h&&(e||!ag.call(a,h))||f.push(h);return f}function af(a){a=kd(a);for(var b=-1,c=Nh(a),d=c.length,e=Of(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function bf(a,b,c){var d=null==a?w:a[b];return d===w&&(null==a||_c(b,a)||(b=ld(b),a=1==b.length?a:Ib(a,Wb(b,0,-1)),d=null==a?w:a[zd(b)]),d=d===w?c:d),Ge(d)?d.call(a):d}function cf(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||_c(b,a)?[d]:ld(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=b[e];He(h)&&(e==g?h[i]=c:null==h[i]&&(h[i]=Zc(b[e+1])?[]:{})),h=h[i]}return a}function df(a,b,c,d){var e=Ch(a)||Qe(a);if(b=Oc(b,d,4),null==c)if(e||He(a)){var f=a.constructor;c=e?Ch(a)?new f:[]:Ig(Ge(f)?f.prototype:w)}else c={};return(e?db:Fb)(a,function(a,d,e){return b(c,a,d,e)}),c}function ef(a){return ac(a,Nh(a))}function ff(a){return ac(a,_e(a))}function gf(a,b,c){return b=+b||0,c===w?(c=b,b=0):c=+c||0,a>=wg(b,c)&&a<vg(b,c)}function hf(a,b,c){c&&$c(a,b,c)&&(b=c=w);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=zg();return wg(a+f*(b-a+hg("1e-"+((f+"").length-1))),b)}return Ub(a,b)}function jf(a){return a=e(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function kf(a){return a=e(a),a&&a.replace(Ha,j).replace(Aa,"")}function lf(a,b,c){a=e(a),b+="";var d=a.length;return c=c===w?d:wg(0>c?0:+c||0,d),c-=b.length,c>=0&&a.indexOf(b,c)==c}function mf(a){return a=e(a),a&&ra.test(a)?a.replace(pa,k):a}function nf(a){return a=e(a),a&&za.test(a)?a.replace(ya,l):a||"(?:)"}function of(a,b,c){a=e(a),b=+b;var d=a.length;if(d>=b||!tg(b))return a;var f=(b-d)/2,g=rg(f),h=pg(f);return c=Gc("",h,c),c.slice(0,g)+a+c}function pf(a,b,c){return(c?$c(a,b,c):null==b)?b=0:b&&(b=+b),a=tf(a),yg(a,b||(Ea.test(a)?16:10))}function qf(a,b){var c="";if(a=e(a),b=+b,1>b||!a||!tg(b))return c;do b%2&&(c+=a),b=rg(b/2),a+=a;while(b);return c}function rf(a,b,c){return a=e(a),c=null==c?0:wg(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function sf(a,b,c){var d=W.templateSettings;c&&$c(a,b,c)&&(b=c=w),a=e(a),b=qb(rb({},c||b),d,pb);var f,g,h=qb(rb({},b.imports),d.imports,pb),i=Nh(h),j=ac(h,i),k=0,l=b.interpolate||Ia,n="__p += '",o=Vf((b.escape||Ia).source+"|"+l.source+"|"+(l===ua?Ca:Ia).source+"|"+(b.evaluate||Ia).source+"|$","g"),p="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++Ma+"]")+"\n";a.replace(o,function(b,c,d,e,h,i){return d||(d=e),n+=a.slice(k,i).replace(Ja,m),c&&(f=!0,n+="' +\n__e("+c+") +\n'"),h&&(g=!0,n+="';\n"+h+";\n__p += '"),d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=i+b.length,b}),n+="';\n";var q=b.variable;q||(n="with (obj) {\n"+n+"\n}\n"),n=(g?n.replace(la,""):n).replace(ma,"$1").replace(na,"$1;"),n="function("+(q||"obj")+") {\n"+(q?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var r=Yh(function(){return Rf(i,p+"return "+n).apply(w,j)});if(r.source=n,Ee(r))throw r;return r}function tf(a,b,c){var d=a;return(a=e(a))?(c?$c(d,b,c):null==b)?a.slice(s(a),t(a)+1):(b+="",a.slice(f(a,b),g(a,b)+1)):a}function uf(a,b,c){var d=a;return a=e(a),a?(c?$c(d,b,c):null==b)?a.slice(s(a)):a.slice(f(a,b+"")):a}function vf(a,b,c){var d=a;return a=e(a),a?(c?$c(d,b,c):null==b)?a.slice(0,t(a)+1):a.slice(0,g(a,b+"")+1):a}function wf(a,b,c){c&&$c(a,b,c)&&(b=w);var d=H,f=I;if(null!=b)if(He(b)){var g="separator"in b?b.separator:g;d="length"in b?+b.length||0:d,f="omission"in b?e(b.omission):f}else d=+b||0;if(a=e(a),d>=a.length)return a;var h=d-f.length;if(1>h)return f;var i=a.slice(0,h);if(null==g)return i+f;if(Oe(g)){if(a.slice(h).search(g)){var j,k,l=a.slice(0,h);for(g.global||(g=Vf(g.source,(Da.exec(g)||"")+"g")),g.lastIndex=0;j=g.exec(l);)k=j.index;i=i.slice(0,null==k?h:k)}}else if(a.indexOf(g,h)!=h){var m=i.lastIndexOf(g);m>-1&&(i=i.slice(0,m))}return i+f}function xf(a){return a=e(a),a&&qa.test(a)?a.replace(oa,u):a}function yf(a,b,c){return c&&$c(a,b,c)&&(b=w),a=e(a),a.match(b||Ka)||[]}function zf(a,b,c){return c&&$c(a,b,c)&&(b=w),o(a)?Cf(a):ub(a,b)}function Af(a){return function(){return a}}function Bf(a){return a}function Cf(a){return Nb(vb(a,!0))}function Df(a,b){return Ob(a,vb(b,!0))}function Ef(a,b,c){if(null==c){var d=He(b),e=d?Nh(b):w,f=e&&e.length?Hb(b,e):w;(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Hb(b,Nh(b)));var g=!0,h=-1,i=Ge(a),j=f.length;c===!1?g=!1:He(c)&&"chain"in c&&(g=c.chain);for(;++h<j;){var k=f[h],l=b[k];a[k]=l,i&&(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__),e=d.__actions__=cb(this.__actions__);return e.push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}return b.apply(a,jb([this.value()],arguments))}}(l))}return a}function Ff(){return _a._=dg,this}function Gf(){}function Hf(a){return _c(a)?Rb(a):Sb(a)}function If(a){return function(b){return Ib(a,ld(b),b+"")}}function Jf(a,b,c){c&&$c(a,b,c)&&(b=c=w),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=vg(pg((b-a)/(c||1)),0),f=Of(e);++d<e;)f[d]=a,a+=c;return f}function Kf(a,b,c){if(a=rg(a),1>a||!tg(a))return[];var d=-1,e=Of(wg(a,Cg));for(b=fc(b,c,1);++d<a;)Cg>d?e[d]=b(d):b(d);return e}function Lf(a){var b=++bg;return e(a)+b}function Mf(a,b){return(+a||0)+(+b||0)}function Nf(a,b,c){return c&&$c(a,b,c)&&(b=w),b=Oc(b,c,3),1==b.length?nb(Ch(a)?a:jd(a),b):$b(a,b)}p=p?ab.defaults(_a.Object(),p,ab.pick(_a,La)):_a;var Of=p.Array,Pf=p.Date,Qf=p.Error,Rf=p.Function,Sf=p.Math,Tf=p.Number,Uf=p.Object,Vf=p.RegExp,Wf=p.String,Xf=p.TypeError,Yf=Of.prototype,Zf=Uf.prototype,$f=Wf.prototype,_f=Rf.prototype.toString,ag=Zf.hasOwnProperty,bg=0,cg=Zf.toString,dg=_a._,eg=Vf("^"+_f.call(ag).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fg=p.ArrayBuffer,gg=p.clearTimeout,hg=p.parseFloat,ig=Sf.pow,jg=Zf.propertyIsEnumerable,kg=Sc(p,"Set"),lg=p.setTimeout,mg=Yf.splice,ng=p.Uint8Array,og=Sc(p,"WeakMap"),pg=Sf.ceil,qg=Sc(Uf,"create"),rg=Sf.floor,sg=Sc(Of,"isArray"),tg=p.isFinite,ug=Sc(Uf,"keys"),vg=Sf.max,wg=Sf.min,xg=Sc(Pf,"now"),yg=p.parseInt,zg=Sf.random,Ag=Tf.NEGATIVE_INFINITY,Bg=Tf.POSITIVE_INFINITY,Cg=4294967295,Dg=Cg-1,Eg=Cg>>>1,Fg=9007199254740991,Gg=og&&new og,Hg={};W.support={};W.templateSettings={escape:sa,evaluate:ta,interpolate:ua,variable:"",imports:{_:W}};var Ig=function(){function a(){}return function(b){if(He(b)){a.prototype=b;var c=new a;a.prototype=w}return c||{}}}(),Jg=lc(Fb),Kg=lc(Gb,!0),Lg=mc(),Mg=mc(!0),Ng=Gg?function(a,b){return Gg.set(a,b),a}:Bf,Og=Gg?function(a){return Gg.get(a)}:Gf,Pg=Rb("length"),Qg=function(){var a=0,b=0;return function(c,d){var e=oh(),f=K-(e-b);if(b=e,f>0){if(++a>=J)return c}else a=0;return Ng(c,d)}}(),Rg=qe(function(a,b){return o(a)&&Yc(a)?xb(a,Db(b,!1,!0)):[]}),Sg=vc(),Tg=vc(!0),Ug=qe(function(a){for(var b=a.length,d=b,e=Of(l),f=Qc(),g=f===c,h=[];d--;){var i=a[d]=Yc(i=a[d])?i:[];e[d]=g&&i.length>=120?oc(d&&i):null}var j=a[0],k=-1,l=j?j.length:0,m=e[0];a:for(;++k<l;)if(i=j[k],(m?Za(m,i):f(h,i,0))<0){for(var d=b;--d;){var n=e[d];if((n?Za(n,i):f(a[d],i,0))<0)continue a}m&&m.push(i),h.push(i)}return h}),Vg=qe(function(b,c){c=Db(c);var d=sb(b,c);return Tb(b,c.sort(a)),d}),Wg=Jc(),Xg=Jc(!0),Yg=qe(function(a){return _b(Db(a,!1,!0))}),Zg=qe(function(a,b){return Yc(a)?xb(a,b):[]}),$g=qe(Kd),_g=qe(function(a){var b=a.length,c=b>2?a[b-2]:w,d=b>1?a[b-1]:w;return b>2&&"function"==typeof c?b-=2:(c=b>1&&"function"==typeof d?(--b,d):w,d=w),a.length=b,Ld(a,c,d)}),ah=qe(function(a){return a=Db(a),this.thru(function(b){return bb(Ch(b)?b:[kd(b)],a)})}),bh=qe(function(a,b){return sb(a,Db(b))}),ch=jc(function(a,b,c){ag.call(a,c)?++a[c]:a[c]=1}),dh=uc(Jg),eh=uc(Kg,!0),fh=yc(db,Jg),gh=yc(eb,Kg),hh=jc(function(a,b,c){ag.call(a,c)?a[c].push(b):a[c]=[b]}),ih=jc(function(a,b,c){a[c]=b}),jh=qe(function(a,b,c){var d=-1,e="function"==typeof b,f=_c(b),g=Yc(a)?Of(a.length):[];return Jg(a,function(a){var h=e?b:f&&null!=a?a[b]:w;g[++d]=h?h.apply(a,c):Xc(a,b,c)}),g}),kh=jc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),lh=Ec(kb,Jg),mh=Ec(lb,Kg),nh=qe(function(a,b){if(null==a)return[];var c=b[2];return c&&$c(b[0],b[1],c)&&(b.length=1),Zb(a,Db(b),[])}),oh=xg||function(){return(new Pf).getTime()},ph=qe(function(a,b,c){var d=y;if(c.length){var e=q(c,ph.placeholder);d|=D}return Kc(a,d,b,c,e)}),qh=qe(function(a,b){b=b.length?Db(b):Xe(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Kc(a[e],y,a)}return a}),rh=qe(function(a,b,c){var d=y|z;if(c.length){var e=q(c,rh.placeholder);d|=D}return Kc(b,d,a,c,e)}),sh=rc(B),th=rc(C),uh=qe(function(a,b){return wb(a,1,b)}),vh=qe(function(a,b,c){return wb(a,b,c)}),wh=xc(),xh=xc(!0),yh=qe(function(a,b){if(b=Db(b),"function"!=typeof a||!fb(b,d))throw new Xf(O);var c=b.length;return qe(function(d){for(var e=wg(d.length,c);e--;)d[e]=b[e](d[e]);return a.apply(this,d)})}),zh=Dc(D),Ah=Dc(E),Bh=qe(function(a,b){return Kc(a,G,w,w,w,Db(b))}),Ch=sg||function(a){return o(a)&&bd(a.length)&&cg.call(a)==R},Dh=kc(Pb),Eh=kc(function(a,b,c){return c?qb(a,b,c):rb(a,b)}),Fh=sc(Eh,ob),Gh=sc(Dh,ed),Hh=wc(Fb),Ih=wc(Gb),Jh=zc(Lg),Kh=zc(Mg),Lh=Ac(Fb),Mh=Ac(Gb),Nh=ug?function(a){var b=null==a?w:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&Yc(a)?id(a):He(a)?ug(a):[]}:id,Oh=Bc(!0),Ph=Bc(),Qh=qe(function(a,b){if(null==a)return{};if("function"!=typeof b[0]){var b=ib(Db(b),Wf);return fd(a,xb(_e(a),b))}var c=fc(b[0],b[1],3);return gd(a,function(a,b,d){return!c(a,b,d)})}),Rh=qe(function(a,b){return null==a?{}:"function"==typeof b[0]?gd(a,fc(b[0],b[1],3)):fd(a,Db(b))}),Sh=pc(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Th=pc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Uh=Cc(),Vh=Cc(!0),Wh=pc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Xh=pc(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Yh=qe(function(a,b){try{return a.apply(w,b)}catch(c){return Ee(c)?c:new Qf(c)}}),Zh=qe(function(a,b){return function(c){return Xc(c,a,b)}}),$h=qe(function(a,b){return function(c){return Xc(a,c,b)}}),_h=Ic("ceil"),ai=Ic("floor"),bi=tc(we,Ag),ci=tc(Se,Bg),di=Ic("round");return W.prototype=$.prototype,aa.prototype=Ig($.prototype),aa.prototype.constructor=aa,Pa.prototype=Ig($.prototype),Pa.prototype.constructor=Pa,Ta.prototype["delete"]=Ua,Ta.prototype.get=Va,Ta.prototype.has=Wa,Ta.prototype.set=Xa,Ya.prototype.push=$a,ne.Cache=Ta,W.after=je,W.ary=ke,W.assign=Eh,W.at=bh,W.before=le,W.bind=ph,W.bindAll=qh,W.bindKey=rh,W.callback=zf,W.chain=Od,W.chunk=nd,W.compact=od,W.constant=Af,W.countBy=ch,W.create=We,W.curry=sh,W.curryRight=th,W.debounce=me,W.defaults=Fh,W.defaultsDeep=Gh,W.defer=uh,W.delay=vh,W.difference=Rg,W.drop=pd,W.dropRight=qd,W.dropRightWhile=rd,W.dropWhile=sd,W.fill=td,W.filter=Yd,W.flatten=vd,W.flattenDeep=wd,W.flow=wh,W.flowRight=xh,W.forEach=fh,W.forEachRight=gh,W.forIn=Jh,W.forInRight=Kh,W.forOwn=Lh,W.forOwnRight=Mh,W.functions=Xe,W.groupBy=hh,W.indexBy=ih,W.initial=yd,W.intersection=Ug,W.invert=$e,W.invoke=jh,W.keys=Nh,W.keysIn=_e,W.map=_d,W.mapKeys=Oh,W.mapValues=Ph,W.matches=Cf,W.matchesProperty=Df,W.memoize=ne,W.merge=Dh,W.method=Zh,W.methodOf=$h,W.mixin=Ef,W.modArgs=yh,W.negate=oe,W.omit=Qh,W.once=pe,W.pairs=af,W.partial=zh,W.partialRight=Ah,W.partition=kh,W.pick=Rh,W.pluck=ae,W.property=Hf,W.propertyOf=If,W.pull=Bd,W.pullAt=Vg,W.range=Jf,W.rearg=Bh,W.reject=be,W.remove=Cd,W.rest=Dd,W.restParam=qe,W.set=cf,W.shuffle=de,W.slice=Ed,W.sortBy=ge,W.sortByAll=nh,W.sortByOrder=he,W.spread=re,W.take=Fd,W.takeRight=Gd,W.takeRightWhile=Hd,W.takeWhile=Id,W.tap=Pd,W.throttle=se,W.thru=Qd,W.times=Kf,W.toArray=Ue,W.toPlainObject=Ve,W.transform=df,W.union=Yg,W.uniq=Jd,W.unzip=Kd,W.unzipWith=Ld,W.values=ef,W.valuesIn=ff,W.where=ie,W.without=Zg,W.wrap=te,W.xor=Md,W.zip=$g,W.zipObject=Nd,W.zipWith=_g,W.backflow=xh,W.collect=_d,W.compose=xh,W.each=fh,W.eachRight=gh,W.extend=Eh,W.iteratee=zf,W.methods=Xe,W.object=Nd,W.select=Yd,W.tail=Dd,W.unique=Jd,Ef(W,W),W.add=Mf,W.attempt=Yh,W.camelCase=Sh,W.capitalize=jf,W.ceil=_h,W.clone=ue,W.cloneDeep=ve,W.deburr=kf,W.endsWith=lf,W.escape=mf,W.escapeRegExp=nf,W.every=Xd,W.find=dh,W.findIndex=Sg,W.findKey=Hh,W.findLast=eh,W.findLastIndex=Tg,W.findLastKey=Ih,W.findWhere=Zd,W.first=ud,W.floor=ai,W.get=Ye,W.gt=we,W.gte=xe,W.has=Ze,W.identity=Bf,W.includes=$d,W.indexOf=xd,W.inRange=gf,W.isArguments=ye,W.isArray=Ch,W.isBoolean=ze,W.isDate=Ae,W.isElement=Be,W.isEmpty=Ce,W.isEqual=De,W.isError=Ee,W.isFinite=Fe,W.isFunction=Ge,W.isMatch=Ie,W.isNaN=Je,W.isNative=Ke,W.isNull=Le,W.isNumber=Me,W.isObject=He,W.isPlainObject=Ne,W.isRegExp=Oe,W.isString=Pe,W.isTypedArray=Qe,W.isUndefined=Re,W.kebabCase=Th,W.last=zd,W.lastIndexOf=Ad,W.lt=Se,W.lte=Te,W.max=bi,W.min=ci,W.noConflict=Ff,W.noop=Gf,W.now=oh,W.pad=of,W.padLeft=Uh,W.padRight=Vh,W.parseInt=pf,W.random=hf,W.reduce=lh,W.reduceRight=mh,W.repeat=qf,W.result=bf,W.round=di,W.runInContext=v,W.size=ee,W.snakeCase=Wh,W.some=fe,W.sortedIndex=Wg,W.sortedLastIndex=Xg,W.startCase=Xh,W.startsWith=rf,W.sum=Nf,W.template=sf,W.trim=tf,W.trimLeft=uf,W.trimRight=vf,W.trunc=wf,W.unescape=xf,W.uniqueId=Lf,W.words=yf,W.all=Xd,W.any=fe,W.contains=$d,W.eq=De,W.detect=dh,W.foldl=lh,W.foldr=mh,W.head=ud,W.include=$d,W.inject=lh,Ef(W,function(){var a={};return Fb(W,function(b,c){W.prototype[c]||(a[c]=b)}),a}(),!1),W.sample=ce,W.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return ce(b,a)}):ce(this.value())},W.VERSION=x,db(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){W[a].placeholder=W}),db(["drop","take"],function(a,b){Pa.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Pa(this);c=null==c?1:vg(rg(c)||0,0);var e=this.clone();return d?e.__takeCount__=wg(e.__takeCount__,c):e.__views__.push({size:c,type:a+(e.__dir__<0?"Right":"")}),e},Pa.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),db(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c!=N;Pa.prototype[a]=function(a,b){var e=this.clone();return e.__iteratees__.push({iteratee:Oc(a,b,1),type:c}),e.__filtered__=e.__filtered__||d,e}}),db(["first","last"],function(a,b){var c="take"+(b?"Right":"");Pa.prototype[a]=function(){return this[c](1).value()[0]}}),db(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Pa.prototype[a]=function(){return this.__filtered__?new Pa(this):this[c](1)}}),db(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?Nb:Hf;Pa.prototype[a]=function(a){return this[c](d(a))}}),Pa.prototype.compact=function(){return this.filter(Bf)},Pa.prototype.reject=function(a,b){return a=Oc(a,b,1),this.filter(function(b){return!a(b)})},Pa.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;return c.__filtered__&&(a>0||0>b)?new Pa(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==w&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c)},Pa.prototype.takeRightWhile=function(a,b){return this.reverse().takeWhile(a,b).reverse()},Pa.prototype.toArray=function(){return this.take(Bg)},Fb(Pa.prototype,function(a,b){var c=/^(?:filter|map|reject)|While$/.test(b),d=/^(?:first|last)$/.test(b),e=W[d?"take"+("last"==b?"Right":""):b];e&&(W.prototype[b]=function(){var b=d?[1]:arguments,f=this.__chain__,g=this.__wrapped__,h=!!this.__actions__.length,i=g instanceof Pa,j=b[0],k=i||Ch(g);k&&c&&"function"==typeof j&&1!=j.length&&(i=k=!1);var l=function(a){return d&&f?e(a,1)[0]:e.apply(w,jb([a],b))},m={func:Qd,args:[l],thisArg:w},n=i&&!h;if(d&&!f)return n?(g=g.clone(),g.__actions__.push(m),a.call(g)):e.call(w,this.value())[0];if(!d&&k){g=n?g:new Pa(this);var o=a.apply(g,b);return o.__actions__.push(m),new aa(o,f)}return this.thru(l)})}),db(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(a){var b=(/^(?:replace|split)$/.test(a)?$f:Yf)[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|replace|shift)$/.test(a);W.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}}),Fb(Pa.prototype,function(a,b){var c=W[b];if(c){var d=c.name+"",e=Hg[d]||(Hg[d]=[]);e.push({name:b,func:c})}}),Hg[Fc(w,z).name]=[{name:"wrapper",func:w}],Pa.prototype.clone=Qa,Pa.prototype.reverse=Ra,Pa.prototype.value=Sa,W.prototype.chain=Rd,W.prototype.commit=Sd,W.prototype.concat=ah,W.prototype.plant=Td,W.prototype.reverse=Ud,W.prototype.toString=Vd,W.prototype.run=W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=Wd,W.prototype.collect=W.prototype.map,W.prototype.head=W.prototype.first,W.prototype.select=W.prototype.filter,W.prototype.tail=W.prototype.rest,W}var w,x="3.10.1",y=1,z=2,A=4,B=8,C=16,D=32,E=64,F=128,G=256,H=30,I="...",J=150,K=16,L=200,M=1,N=2,O="Expected a function",P="__lodash_placeholder__",Q="[object Arguments]",R="[object Array]",S="[object Boolean]",T="[object Date]",U="[object Error]",V="[object Function]",W="[object Map]",X="[object Number]",Y="[object Object]",Z="[object RegExp]",$="[object Set]",_="[object String]",aa="[object WeakMap]",ba="[object ArrayBuffer]",ca="[object Float32Array]",da="[object Float64Array]",ea="[object Int8Array]",fa="[object Int16Array]",ga="[object Int32Array]",ha="[object Uint8Array]",ia="[object Uint8ClampedArray]",ja="[object Uint16Array]",ka="[object Uint32Array]",la=/\b__p \+= '';/g,ma=/\b(__p \+=) '' \+/g,na=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oa=/&(?:amp|lt|gt|quot|#39|#96);/g,pa=/[&<>"'`]/g,qa=RegExp(oa.source),ra=RegExp(pa.source),sa=/<%-([\s\S]+?)%>/g,ta=/<%([\s\S]+?)%>/g,ua=/<%=([\s\S]+?)%>/g,va=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,wa=/^\w*$/,xa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ya=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,za=RegExp(ya.source),Aa=/[\u0300-\u036f\ufe20-\ufe23]/g,Ba=/\\(\\)?/g,Ca=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Da=/\w*$/,Ea=/^0[xX]/,Fa=/^\[object .+?Constructor\]$/,Ga=/^\d+$/,Ha=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ia=/($^)/,Ja=/['\n\r\u2028\u2029\\]/g,Ka=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"+(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),La=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ma=-1,Na={};Na[ca]=Na[da]=Na[ea]=Na[fa]=Na[ga]=Na[ha]=Na[ia]=Na[ja]=Na[ka]=!0,Na[Q]=Na[R]=Na[ba]=Na[S]=Na[T]=Na[U]=Na[V]=Na[W]=Na[X]=Na[Y]=Na[Z]=Na[$]=Na[_]=Na[aa]=!1;var Oa={};Oa[Q]=Oa[R]=Oa[ba]=Oa[S]=Oa[T]=Oa[ca]=Oa[da]=Oa[ea]=Oa[fa]=Oa[ga]=Oa[X]=Oa[Y]=Oa[Z]=Oa[_]=Oa[ha]=Oa[ia]=Oa[ja]=Oa[ka]=!0,Oa[U]=Oa[V]=Oa[W]=Oa[$]=Oa[aa]=!1;var Pa={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Qa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ra={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Sa={"function":!0,object:!0},Ta={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ua={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Va=Sa[typeof exports]&&exports&&!exports.nodeType&&exports,Wa=Sa[typeof module]&&module&&!module.nodeType&&module,Xa=Va&&Wa&&"object"==typeof global&&global&&global.Object&&global,Ya=Sa[typeof self]&&self&&self.Object&&self,Za=Sa[typeof window]&&window&&window.Object&&window,$a=Wa&&Wa.exports===Va&&Va,_a=Xa||Za!==(this&&this.window)&&Za||Ya||this,ab=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(_a._=ab,define(function(){return ab})):Va&&Wa?$a?(Wa.exports=ab)._=ab:Va._=ab:_a._=ab}.call(this),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=ea.type(a);return"function"===c||ea.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(ea.isFunction(b))return ea.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ea.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ma.test(b))return ea.filter(b,a,c);b=ea.filter(b,a)}return ea.grep(a,function(a){return ea.inArray(a,b)>=0!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(a){var b=ua[a]={};return ea.each(a.match(ta)||[],function(a,c){b[c]=!0}),b}function g(){oa.addEventListener?(oa.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1)):(oa.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(oa.addEventListener||"load"===event.type||"complete"===oa.readyState)&&(g(),ea.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(za,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ya.test(c)?ea.parseJSON(c):c}catch(e){}ea.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!ea.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(ea.acceptData(a)){var e,f,g=ea.expando,h=a.nodeType,i=h?ea.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=W.pop()||ea.guid++:g),i[j]||(i[j]=h?{}:{toJSON:ea.noop}),("object"==typeof b||"function"==typeof b)&&(d?i[j]=ea.extend(i[j],b):i[j].data=ea.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[ea.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[ea.camelCase(b)])):e=f,e}}function l(a,b,c){if(ea.acceptData(a)){var d,e,f=a.nodeType,g=f?ea.cache:a,h=f?a[ea.expando]:ea.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){ea.isArray(b)?b=b.concat(ea.map(b,ea.camelCase)):b in d?b=[b]:(b=ea.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!ea.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?ea.cleanData([a],!0):ca.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function m(){return!0}function n(){return!1}function o(){try{return oa.activeElement}catch(a){}}function p(a){var b=Ka.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function q(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==xa?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xa?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||ea.nodeName(d,b)?f.push(d):ea.merge(f,q(d,b));return void 0===b||b&&ea.nodeName(a,b)?ea.merge([a],f):f}function r(a){Ea.test(a.type)&&(a.defaultChecked=a.checked)}function s(a,b){return ea.nodeName(a,"table")&&ea.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==ea.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Va.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function v(a,b){for(var c,d=0;null!=(c=a[d]);d++)ea._data(c,"globalEval",!b||ea._data(b[d],"globalEval"))}function w(a,b){if(1===b.nodeType&&ea.hasData(a)){var c,d,e,f=ea._data(a),g=ea._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ea.event.add(b,c,h[c][d])}g.data&&(g.data=ea.extend({},g.data))}}function x(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ca.noCloneEvent&&b[ea.expando]){e=ea._data(b);for(d in e.events)ea.removeEvent(b,d,e.handle);b.removeAttribute(ea.expando)}"script"===c&&b.text!==a.text?(t(b).text=a.text,u(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ca.html5Clone&&a.innerHTML&&!ea.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Ea.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function y(b,c){var d,e=ea(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:ea.css(e[0],"display");return e.detach(),f}function z(a){var b=oa,c=_a[a];return c||(c=y(a,b),"none"!==c&&c||($a=($a||ea("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=($a[0].contentWindow||$a[0].contentDocument).document,b.write(),b.close(),c=y(a,b),$a.detach()),_a[a]=c),c}function A(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function B(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=mb.length;e--;)if(b=mb[e]+c,b in a)return b;return d}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ea._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ca(d)&&(f[g]=ea._data(d,"olddisplay",z(d.nodeName)))):(e=Ca(d),(c&&"none"!==c||!e)&&ea._data(d,"olddisplay",e?c:ea.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c){var d=ib.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ea.css(a,c+Ba[f],!0,e)),d?("content"===c&&(g-=ea.css(a,"padding"+Ba[f],!0,e)),"margin"!==c&&(g-=ea.css(a,"border"+Ba[f]+"Width",!0,e))):(g+=ea.css(a,"padding"+Ba[f],!0,e),"padding"!==c&&(g+=ea.css(a,"border"+Ba[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ab(a),g=ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=bb(a,b,f),(0>e||null==e)&&(e=a.style[b]),db.test(e))return e;d=g&&(ca.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)}function H(){return setTimeout(function(){nb=void 0}),nb=ea.now()}function I(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Ba[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function J(a,b,c){for(var d,e=(tb[b]||[]).concat(tb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Ca(a),p=ea._data(a,"fxshow");c.queue||(h=ea._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,ea.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=ea.css(a,"display"),k="none"===j?ea._data(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===ea.css(a,"float")&&(ca.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ca.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],pb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||ea.style(a,d)}else j=void 0;if(ea.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ea._data(a,"fxshow",{}),f&&(p.hidden=!o),o?ea(a).show():l.done(function(){ea(a).hide()}),l.done(function(){var b;ea._removeData(a,"fxshow");for(b in m)ea.style(a,b,m[b])});for(d in m)g=J(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function L(a,b){var c,d,e,f,g;for(c in a)if(d=ea.camelCase(c),e=b[d],f=a[c],ea.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ea.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,c){var d,e,f=0,g=sb.length,h=ea.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nb||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ea.extend({},b),opts:ea.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:nb||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ea.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);g>f;f++)if(d=sb[f].call(j,a,k,j.opts))return d;return ea.map(k,J,j),ea.isFunction(j.opts.start)&&j.opts.start.call(a,j),ea.fx.timer(ea.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function N(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ta)||[];if(ea.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function O(a,b,c,d){function e(h){var i;return f[h]=!0,ea.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function P(a,b){var c,d,e=ea.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&ea.extend(!0,a,c),a}function Q(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));
if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function R(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function S(a,b,c,d){var e;if(ea.isArray(b))ea.each(b,function(b,e){c||Vb.test(a)?d(a,e):S(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ea.type(b))d(a,b);else for(e in b)S(a+"["+e+"]",b[e],c,d)}function T(){try{return new a.XMLHttpRequest}catch(b){}}function U(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function V(a){return ea.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var W=[],X=W.slice,Y=W.concat,Z=W.push,$=W.indexOf,_={},aa=_.toString,ba=_.hasOwnProperty,ca={},da="1.11.3",ea=function(a,b){return new ea.fn.init(a,b)},fa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ga=/^-ms-/,ha=/-([\da-z])/gi,ia=function(a,b){return b.toUpperCase()};ea.fn=ea.prototype={jquery:da,constructor:ea,selector:"",length:0,toArray:function(){return X.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:X.call(this)},pushStack:function(a){var b=ea.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ea.each(this,a,b)},map:function(a){return this.pushStack(ea.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:W.sort,splice:W.splice},ea.extend=ea.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ea.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(ea.isPlainObject(c)||(b=ea.isArray(c)))?(b?(b=!1,f=a&&ea.isArray(a)?a:[]):f=a&&ea.isPlainObject(a)?a:{},g[d]=ea.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},ea.extend({expando:"jQuery"+(da+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ea.type(a)},isArray:Array.isArray||function(a){return"array"===ea.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!ea.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==ea.type(a)||a.nodeType||ea.isWindow(a))return!1;try{if(a.constructor&&!ba.call(a,"constructor")&&!ba.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(ca.ownLast)for(b in a)return ba.call(a,b);for(b in a);return void 0===b||ba.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?_[aa.call(a)]||"object":typeof a},globalEval:function(b){b&&ea.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ga,"ms-").replace(ha,ia)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(fa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ea.merge(d,"string"==typeof a?[a]:a):Z.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if($)return $.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Y.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),ea.isFunction(a)?(c=X.call(arguments,2),d=function(){return a.apply(b||this,c.concat(X.call(arguments)))},d.guid=a.guid=a.guid||ea.guid++,d):void 0},now:function(){return+new Date},support:ca}),ea.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){_["[object "+b+"]"]=b.toLowerCase()});var ja=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ea.find=ja,ea.expr=ja.selectors,ea.expr[":"]=ea.expr.pseudos,ea.unique=ja.uniqueSort,ea.text=ja.getText,ea.isXMLDoc=ja.isXML,ea.contains=ja.contains;var ka=ea.expr.match.needsContext,la=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ma=/^.[^:#\[\.,]*$/;ea.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ea.find.matchesSelector(d,a)?[d]:[]:ea.find.matches(a,ea.grep(b,function(a){return 1===a.nodeType}))},ea.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ea(a).filter(function(){for(b=0;e>b;b++)if(ea.contains(d[b],this))return!0}));for(b=0;e>b;b++)ea.find(a,d[b],c);return c=this.pushStack(e>1?ea.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&ka.test(a)?ea(a):a||[],!1).length}});var na,oa=a.document,pa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qa=ea.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pa.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||na).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof ea?b[0]:b,ea.merge(this,ea.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:oa,!0)),la.test(c[1])&&ea.isPlainObject(b))for(c in b)ea.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=oa.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return na.find(a);this.length=1,this[0]=d}return this.context=oa,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ea.isFunction(a)?"undefined"!=typeof na.ready?na.ready(a):a(ea):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ea.makeArray(a,this))};qa.prototype=ea.fn,na=ea(oa);var ra=/^(?:parents|prev(?:Until|All))/,sa={children:!0,contents:!0,next:!0,prev:!0};ea.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!ea(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ea.fn.extend({has:function(a){var b,c=ea(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ea.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=ka.test(a)||"string"!=typeof a?ea(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ea.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ea.unique(f):f)},index:function(a){return a?"string"==typeof a?ea.inArray(this[0],ea(a)):ea.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ea.unique(ea.merge(this.get(),ea(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ea.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ea.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ea.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return ea.dir(a,"nextSibling")},prevAll:function(a){return ea.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ea.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ea.dir(a,"previousSibling",c)},siblings:function(a){return ea.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ea.sibling(a.firstChild)},contents:function(a){return ea.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ea.merge([],a.childNodes)}},function(a,b){ea.fn[a]=function(c,d){var e=ea.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ea.filter(d,e)),this.length>1&&(sa[a]||(e=ea.unique(e)),ra.test(a)&&(e=e.reverse())),this.pushStack(e)}});var ta=/\S+/g,ua={};ea.Callbacks=function(a){a="string"==typeof a?ua[a]||f(a):ea.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(c=a.memory&&f,d=!0,g=h||0,h=0,e=i.length,b=!0;i&&e>g;g++)if(i[g].apply(f[0],f[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function f(b){ea.each(b,function(b,c){var d=ea.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&ea.each(arguments,function(a,c){for(var d;(d=ea.inArray(c,i,d))>-1;)i.splice(d,1),b&&(e>=d&&e--,g>=d&&g--)}),this},has:function(a){return a?ea.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},ea.extend({Deferred:function(a){var b=[["resolve","done",ea.Callbacks("once memory"),"resolved"],["reject","fail",ea.Callbacks("once memory"),"rejected"],["notify","progress",ea.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ea.Deferred(function(c){ea.each(b,function(b,f){var g=ea.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ea.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ea.extend(a,d):d}},e={};return d.pipe=d.then,ea.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=X.call(arguments),g=f.length,h=1!==g||a&&ea.isFunction(a.promise)?g:0,i=1===h?a:ea.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?X.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ea.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var va;ea.fn.ready=function(a){return ea.ready.promise().done(a),this},ea.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ea.readyWait++:ea.ready(!0)},ready:function(a){if(a===!0?!--ea.readyWait:!ea.isReady){if(!oa.body)return setTimeout(ea.ready);ea.isReady=!0,a!==!0&&--ea.readyWait>0||(va.resolveWith(oa,[ea]),ea.fn.triggerHandler&&(ea(oa).triggerHandler("ready"),ea(oa).off("ready")))}}}),ea.ready.promise=function(b){if(!va)if(va=ea.Deferred(),"complete"===oa.readyState)setTimeout(ea.ready);else if(oa.addEventListener)oa.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1);else{oa.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&oa.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ea.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}g(),ea.ready()}}()}return va.promise(b)};var wa,xa="undefined";for(wa in ea(ca))break;ca.ownLast="0"!==wa,ca.inlineBlockNeedsLayout=!1,ea(function(){var a,b,c,d;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ca.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=oa.createElement("div");if(null==ca.deleteExpando){ca.deleteExpando=!0;try{delete a.test}catch(b){ca.deleteExpando=!1}}a=null}(),ea.acceptData=function(a){var b=ea.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var ya=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,za=/([A-Z])/g;ea.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
},hasData:function(a){return a=a.nodeType?ea.cache[a[ea.expando]]:a[ea.expando],!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),ea.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=ea.data(f),1===f.nodeType&&!ea._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ea.camelCase(d.slice(5)),i(f,d,e[d])));ea._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ea.data(this,a)}):arguments.length>1?this.each(function(){ea.data(this,a,b)}):f?i(f,a,ea.data(f,a)):void 0},removeData:function(a){return this.each(function(){ea.removeData(this,a)})}}),ea.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ea._data(a,b),c&&(!d||ea.isArray(c)?d=ea._data(a,b,ea.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ea.queue(a,b),d=c.length,e=c.shift(),f=ea._queueHooks(a,b),g=function(){ea.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ea._data(a,c)||ea._data(a,c,{empty:ea.Callbacks("once memory").add(function(){ea._removeData(a,b+"queue"),ea._removeData(a,c)})})}}),ea.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ea.queue(this[0],a):void 0===b?this:this.each(function(){var c=ea.queue(this,a,b);ea._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ea.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ea.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ea.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ea._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ba=["Top","Right","Bottom","Left"],Ca=function(a,b){return a=b||a,"none"===ea.css(a,"display")||!ea.contains(a.ownerDocument,a)},Da=ea.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ea.type(c)){e=!0;for(h in c)ea.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ea.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ea(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ea=/^(?:checkbox|radio)$/i;!function(){var a=oa.createElement("input"),b=oa.createElement("div"),c=oa.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ca.leadingWhitespace=3===b.firstChild.nodeType,ca.tbody=!b.getElementsByTagName("tbody").length,ca.htmlSerialize=!!b.getElementsByTagName("link").length,ca.html5Clone="<:nav></:nav>"!==oa.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),ca.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",ca.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",ca.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,ca.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){ca.noCloneEvent=!1}),b.cloneNode(!0).click()),null==ca.deleteExpando){ca.deleteExpando=!0;try{delete b.test}catch(d){ca.deleteExpando=!1}}}(),function(){var b,c,d=oa.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(ca[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),ca[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Fa=/^(?:input|select|textarea)$/i,Ga=/^key/,Ha=/^(?:mouse|pointer|contextmenu)|click/,Ia=/^(?:focusinfocus|focusoutblur)$/,Ja=/^([^.]*)(?:\.(.+)|)$/;ea.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=ea.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof ea===xa||a&&ea.event.triggered===a.type?void 0:ea.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(ta)||[""],h=b.length;h--;)f=Ja.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=ea.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=ea.event.special[n]||{},l=ea.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ea.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),ea.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea.hasData(a)&&ea._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ta)||[""],j=b.length;j--;)if(h=Ja.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ea.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ea.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ea.event.remove(a,n+b[j],c,d,!0);ea.isEmptyObject(k)&&(delete q.handle,ea._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||oa],n=ba.call(b,"type")?b.type:b,o=ba.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||oa,3!==d.nodeType&&8!==d.nodeType&&!Ia.test(n+ea.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[ea.expando]?b:new ea.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ea.makeArray(c,[b]),j=ea.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!ea.isWindow(d)){for(i=j.delegateType||n,Ia.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||oa)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(ea._data(h,"events")||{})[b.type]&&ea._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&ea.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&ea.acceptData(d)&&g&&d[n]&&!ea.isWindow(d)){k=d[g],k&&(d[g]=null),ea.event.triggered=n;try{d[n]()}catch(p){}ea.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=ea.event.fix(a);var b,c,d,e,f,g=[],h=X.call(arguments),i=(ea._data(this,"events")||{})[a.type]||[],j=ea.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ea.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(d.namespace))&&(a.handleObj=d,a.data=d.data,c=((ea.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?ea(c,this).index(i)>=0:ea.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[ea.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ha.test(e)?this.mouseHooks:Ga.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ea.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||oa),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||oa,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==o()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===o()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ea.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return ea.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ea.extend(new ea.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ea.event.trigger(e,null,b):ea.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ea.removeEvent=oa.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===xa&&(a[d]=null),a.detachEvent(d,c))},ea.Event=function(a,b){return this instanceof ea.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?m:n):this.type=a,b&&ea.extend(this,b),this.timeStamp=a&&a.timeStamp||ea.now(),void(this[ea.expando]=!0)):new ea.Event(a,b)},ea.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},ea.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ea.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ea.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ca.submitBubbles||(ea.event.special.submit={setup:function(){return ea.nodeName(this,"form")?!1:void ea.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=ea.nodeName(b,"input")||ea.nodeName(b,"button")?b.form:void 0;c&&!ea._data(c,"submitBubbles")&&(ea.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),ea._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ea.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ea.nodeName(this,"form")?!1:void ea.event.remove(this,"._submit")}}),ca.changeBubbles||(ea.event.special.change={setup:function(){return Fa.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ea.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ea.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ea.event.simulate("change",this,a,!0)})),!1):void ea.event.add(this,"beforeactivate._change",function(a){var b=a.target;Fa.test(b.nodeName)&&!ea._data(b,"changeBubbles")&&(ea.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ea.event.simulate("change",this.parentNode,a,!0)}),ea._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ea.event.remove(this,"._change"),!Fa.test(this.nodeName)}}),ca.focusinBubbles||ea.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ea.event.simulate(b,a.target,ea.event.fix(a),!0)};ea.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ea._data(d,b);e||d.addEventListener(a,c,!0),ea._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ea._data(d,b)-1;e?ea._data(d,b,e):(d.removeEventListener(a,c,!0),ea._removeData(d,b))}}}),ea.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=n;else if(!d)return this;return 1===e&&(g=d,d=function(a){return ea().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=ea.guid++)),this.each(function(){ea.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ea(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=n),this.each(function(){ea.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ea.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ea.event.trigger(a,b,c,!0):void 0}});var Ka="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",La=/ jQuery\d+="(?:null|\d+)"/g,Ma=new RegExp("<(?:"+Ka+")[\\s/>]","i"),Na=/^\s+/,Oa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pa=/<([\w:]+)/,Qa=/<tbody/i,Ra=/<|&#?\w+;/,Sa=/<(?:script|style|link)/i,Ta=/checked\s*(?:[^=]|=\s*.checked.)/i,Ua=/^$|\/(?:java|ecma)script/i,Va=/^true\/(.*)/,Wa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ca.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ya=p(oa),Za=Ya.appendChild(oa.createElement("div"));Xa.optgroup=Xa.option,Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead,Xa.th=Xa.td,ea.extend({clone:function(a,b,c){var d,e,f,g,h,i=ea.contains(a.ownerDocument,a);if(ca.html5Clone||ea.isXMLDoc(a)||!Ma.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Za.innerHTML=a.outerHTML,Za.removeChild(f=Za.firstChild)),!(ca.noCloneEvent&&ca.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ea.isXMLDoc(a)))for(d=q(f),h=q(a),g=0;null!=(e=h[g]);++g)d[g]&&x(e,d[g]);if(b)if(c)for(h=h||q(a),d=d||q(f),g=0;null!=(e=h[g]);g++)w(e,d[g]);else w(a,f);return d=q(f,"script"),d.length>0&&v(d,!i&&q(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=p(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===ea.type(f))ea.merge(n,f.nodeType?[f]:f);else if(Ra.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Pa.exec(f)||["",""])[1].toLowerCase(),k=Xa[i]||Xa._default,h.innerHTML=k[1]+f.replace(Oa,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ca.leadingWhitespace&&Na.test(f)&&n.push(b.createTextNode(Na.exec(f)[0])),!ca.tbody)for(f="table"!==i||Qa.test(f)?"<table>"!==k[1]||Qa.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ea.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ea.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),ca.appendChecked||ea.grep(q(n,"input"),r),o=0;f=n[o++];)if((!d||-1===ea.inArray(f,d))&&(g=ea.contains(f.ownerDocument,f),h=q(m.appendChild(f),"script"),g&&v(h),c))for(e=0;f=h[e++];)Ua.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ea.expando,i=ea.cache,j=ca.deleteExpando,k=ea.event.special;null!=(c=a[g]);g++)if((b||ea.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ea.event.remove(c,d):ea.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==xa?c.removeAttribute(h):c[h]=null,W.push(e))}}}),ea.fn.extend({text:function(a){return Da(this,function(a){return void 0===a?ea.text(this):this.empty().append((this[0]&&this[0].ownerDocument||oa).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ea.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ea.cleanData(q(c)),c.parentNode&&(b&&ea.contains(c.ownerDocument,c)&&v(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ea.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ea.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ea.clone(this,a,b)})},html:function(a){return Da(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(La,""):void 0;if("string"==typeof a&&!Sa.test(a)&&(ca.htmlSerialize||!Ma.test(a))&&(ca.leadingWhitespace||!Na.test(a))&&!Xa[(Pa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Oa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(ea.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ea.cleanData(q(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Y.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=ea.isFunction(m);if(n||j>1&&"string"==typeof m&&!ca.checkClone&&Ta.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=ea.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=ea.map(q(h,"script"),t),e=f.length;j>i;i++)d=h,i!==l&&(d=ea.clone(d,!0,!0),e&&ea.merge(f,q(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,ea.map(f,u),i=0;e>i;i++)d=f[i],Ua.test(d.type||"")&&!ea._data(d,"globalEval")&&ea.contains(g,d)&&(d.src?ea._evalUrl&&ea._evalUrl(d.src):ea.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wa,"")));h=c=null}return this}}),ea.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ea.fn[a]=function(a){for(var c,d=0,e=[],f=ea(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ea(f[d])[b](c),Z.apply(e,c.get());return this.pushStack(e)}});var $a,_a={};!function(){var a;ca.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=oa.getElementsByTagName("body")[0],c&&c.style?(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(oa.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var ab,bb,cb=/^margin/,db=new RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),eb=/^(top|right|bottom|left)$/;a.getComputedStyle?(ab=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||ea.contains(a.ownerDocument,a)||(g=ea.style(a,b)),db.test(g)&&cb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):oa.documentElement.currentStyle&&(ab=function(a){return a.currentStyle},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),db.test(g)&&!eb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d,e;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(oa.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(e)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=oa.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],d=e&&e.style,d&&(d.cssText="float:left;opacity:.5",ca.opacity="0.5"===d.opacity,ca.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ca.clearCloneStyle="content-box"===c.style.backgroundClip,ca.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,ea.extend(ca,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),ea.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var fb=/alpha\([^)]*\)/i,gb=/opacity\s*=\s*([^)]*)/,hb=/^(none|table(?!-c[ea]).+)/,ib=new RegExp("^("+Aa+")(.*)$","i"),jb=new RegExp("^([+-])=("+Aa+")","i"),kb={position:"absolute",visibility:"hidden",display:"block"},lb={letterSpacing:"0",fontWeight:"400"},mb=["Webkit","O","Moz","ms"];ea.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ca.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ea.camelCase(b),i=a.style;if(b=ea.cssProps[h]||(ea.cssProps[h]=B(i,h)),g=ea.cssHooks[b]||ea.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=jb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ea.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||ea.cssNumber[h]||(c+="px"),ca.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=ea.camelCase(b);return b=ea.cssProps[h]||(ea.cssProps[h]=B(a.style,h)),g=ea.cssHooks[b]||ea.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=bb(a,b,d)),"normal"===f&&b in lb&&(f=lb[b]),""===c||c?(e=parseFloat(f),c===!0||ea.isNumeric(e)?e||0:f):f}}),ea.each(["height","width"],function(a,b){ea.cssHooks[b]={get:function(a,c,d){return c?hb.test(ea.css(a,"display"))&&0===a.offsetWidth?ea.swap(a,kb,function(){return F(a,b,d)}):F(a,b,d):void 0},set:function(a,c,d){var e=d&&ab(a);return D(a,c,d?E(a,b,d,ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,e),e):0)}}}),ca.opacity||(ea.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ea.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ea.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),ea.cssHooks.marginRight=A(ca.reliableMarginRight,function(a,b){return b?ea.swap(a,{display:"inline-block"},bb,[a,"marginRight"]):void 0}),ea.each({margin:"",padding:"",border:"Width"},function(a,b){ea.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Ba[d]+b]=f[d]||f[d-2]||f[0];return e}},cb.test(a)||(ea.cssHooks[a+b].set=D)}),ea.fn.extend({css:function(a,b){return Da(this,function(a,b,c){var d,e,f={},g=0;if(ea.isArray(b)){for(d=ab(a),e=b.length;e>g;g++)f[b[g]]=ea.css(a,b[g],!1,d);return f}return void 0!==c?ea.style(a,b,c):ea.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ca(this)?ea(this).show():ea(this).hide()})}}),ea.Tween=G,G.prototype={constructor:G,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ea.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];return this.options.duration?this.pos=b=ea.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ea.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ea.fx.step[a.prop]?ea.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ea.cssProps[a.prop]]||ea.cssHooks[a.prop])?ea.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ea.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ea.fx=G.prototype.init,ea.fx.step={};var nb,ob,pb=/^(?:toggle|show|hide)$/,qb=new RegExp("^(?:([+-])=|)("+Aa+")([a-z%]*)$","i"),rb=/queueHooks$/,sb=[K],tb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=qb.exec(b),f=e&&e[3]||(ea.cssNumber[a]?"":"px"),g=(ea.cssNumber[a]||"px"!==f&&+d)&&qb.exec(ea.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ea.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ea.Animation=ea.extend(M,{tweener:function(a,b){ea.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],tb[c]=tb[c]||[],tb[c].unshift(b)},prefilter:function(a,b){b?sb.unshift(a):sb.push(a)}}),ea.speed=function(a,b,c){var d=a&&"object"==typeof a?ea.extend({},a):{complete:c||!c&&b||ea.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ea.isFunction(b)&&b};return d.duration=ea.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ea.fx.speeds?ea.fx.speeds[d.duration]:ea.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ea.isFunction(d.old)&&d.old.call(this),d.queue&&ea.dequeue(this,d.queue)},d},ea.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ea.isEmptyObject(a),f=ea.speed(b,c,d),g=function(){var b=M(this,ea.extend({},a),f);(e||ea._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ea.timers,g=ea._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&ea.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ea._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ea.timers,g=d?d.length:0;for(c.finish=!0,ea.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ea.each(["toggle","show","hide"],function(a,b){var c=ea.fn[b];ea.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(I(b,!0),a,d,e)}}),ea.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ea.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ea.timers=[],ea.fx.tick=function(){var a,b=ea.timers,c=0;for(nb=ea.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||ea.fx.stop(),nb=void 0},ea.fx.timer=function(a){ea.timers.push(a),a()?ea.fx.start():ea.timers.pop()},ea.fx.interval=13,ea.fx.start=function(){ob||(ob=setInterval(ea.fx.tick,ea.fx.interval))},ea.fx.stop=function(){clearInterval(ob),ob=null},ea.fx.speeds={slow:600,fast:200,_default:400},ea.fn.delay=function(a,b){return a=ea.fx?ea.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);
c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=oa.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=oa.createElement("select"),e=c.appendChild(oa.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",ca.getSetAttribute="t"!==b.className,ca.style=/top/.test(d.getAttribute("style")),ca.hrefNormalized="/a"===d.getAttribute("href"),ca.checkOn=!!a.value,ca.optSelected=e.selected,ca.enctype=!!oa.createElement("form").enctype,c.disabled=!0,ca.optDisabled=!e.disabled,a=oa.createElement("input"),a.setAttribute("value",""),ca.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),ca.radioValue="t"===a.value}();var ub=/\r/g;ea.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ea.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ea(this).val()):a,null==e?e="":"number"==typeof e?e+="":ea.isArray(e)&&(e=ea.map(e,function(a){return null==a?"":a+""})),b=ea.valHooks[this.type]||ea.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ea.valHooks[e.type]||ea.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ea.extend({valHooks:{option:{get:function(a){var b=ea.find.attr(a,"value");return null!=b?b:ea.trim(ea.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(ca.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ea.nodeName(c.parentNode,"optgroup"))){if(b=ea(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ea.makeArray(b),g=e.length;g--;)if(d=e[g],ea.inArray(ea.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),ea.each(["radio","checkbox"],function(){ea.valHooks[this]={set:function(a,b){return ea.isArray(b)?a.checked=ea.inArray(ea(a).val(),b)>=0:void 0}},ca.checkOn||(ea.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vb,wb,xb=ea.expr.attrHandle,yb=/^(?:checked|selected)$/i,zb=ca.getSetAttribute,Ab=ca.input;ea.fn.extend({attr:function(a,b){return Da(this,ea.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ea.removeAttr(this,a)})}}),ea.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===xa?ea.prop(a,b,c):(1===f&&ea.isXMLDoc(a)||(b=b.toLowerCase(),d=ea.attrHooks[b]||(ea.expr.match.bool.test(b)?wb:vb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ea.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ea.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ta);if(f&&1===a.nodeType)for(;c=f[e++];)d=ea.propFix[c]||c,ea.expr.match.bool.test(c)?Ab&&zb||!yb.test(c)?a[d]=!1:a[ea.camelCase("default-"+c)]=a[d]=!1:ea.attr(a,c,""),a.removeAttribute(zb?c:d)},attrHooks:{type:{set:function(a,b){if(!ca.radioValue&&"radio"===b&&ea.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),wb={set:function(a,b,c){return b===!1?ea.removeAttr(a,c):Ab&&zb||!yb.test(c)?a.setAttribute(!zb&&ea.propFix[c]||c,c):a[ea.camelCase("default-"+c)]=a[c]=!0,c}},ea.each(ea.expr.match.bool.source.match(/\w+/g),function(a,b){var c=xb[b]||ea.find.attr;xb[b]=Ab&&zb||!yb.test(b)?function(a,b,d){var e,f;return d||(f=xb[b],xb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,xb[b]=f),e}:function(a,b,c){return c?void 0:a[ea.camelCase("default-"+b)]?b.toLowerCase():null}}),Ab&&zb||(ea.attrHooks.value={set:function(a,b,c){return ea.nodeName(a,"input")?void(a.defaultValue=b):vb&&vb.set(a,b,c)}}),zb||(vb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},xb.id=xb.name=xb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},ea.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:vb.set},ea.attrHooks.contenteditable={set:function(a,b,c){vb.set(a,""===b?!1:b,c)}},ea.each(["width","height"],function(a,b){ea.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),ca.style||(ea.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Bb=/^(?:input|select|textarea|button|object)$/i,Cb=/^(?:a|area)$/i;ea.fn.extend({prop:function(a,b){return Da(this,ea.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ea.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),ea.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!ea.isXMLDoc(a),f&&(b=ea.propFix[b]||b,e=ea.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ea.find.attr(a,"tabindex");return b?parseInt(b,10):Bb.test(a.nodeName)||Cb.test(a.nodeName)&&a.href?0:-1}}}}),ca.hrefNormalized||ea.each(["href","src"],function(a,b){ea.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ca.optSelected||(ea.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ea.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ea.propFix[this.toLowerCase()]=this}),ca.enctype||(ea.propFix.enctype="encoding");var Db=/[\t\r\n\f]/g;ea.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ea.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ea.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ea.isFunction(a)?this.each(function(c){ea(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ea(this),f=a.match(ta)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===xa||"boolean"===c)&&(this.className&&ea._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ea._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Db," ").indexOf(b)>=0)return!0;return!1}}),ea.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ea.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ea.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb=ea.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ea.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=ea.trim(b+"");return e&&!ea.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():ea.error("Invalid JSON: "+b)},ea.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||ea.error("Invalid XML: "+b),c};var Hb,Ib,Jb=/#.*$/,Kb=/([?&])_=[^&]*/,Lb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nb=/^(?:GET|HEAD)$/,Ob=/^\/\//,Pb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qb={},Rb={},Sb="*/".concat("*");try{Ib=location.href}catch(Tb){Ib=oa.createElement("a"),Ib.href="",Ib=Ib.href}Hb=Pb.exec(Ib.toLowerCase())||[],ea.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ib,type:"GET",isLocal:Mb.test(Hb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ea.parseJSON,"text xml":ea.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,ea.ajaxSettings),b):P(ea.ajaxSettings,a)},ajaxPrefilter:N(Qb),ajaxTransport:N(Rb),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&300>a||304===a,c&&(s=Q(l,v,c)),s=R(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ea.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(ea.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--ea.active||ea.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=ea.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ea(m):ea.event,o=ea.Deferred(),p=ea.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Lb.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Ib)+"").replace(Jb,"").replace(Ob,Hb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ea.trim(l.dataType||"*").toLowerCase().match(ta)||[""],null==l.crossDomain&&(d=Pb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Hb[1]&&d[2]===Hb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Hb[3]||("http:"===Hb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ea.param(l.data,l.traditional)),O(Qb,l,b,v),2===t)return v;i=ea.event&&l.global,i&&0===ea.active++&&ea.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Nb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Kb.test(f)?f.replace(Kb,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(ea.lastModified[f]&&v.setRequestHeader("If-Modified-Since",ea.lastModified[f]),ea.etag[f]&&v.setRequestHeader("If-None-Match",ea.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Sb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=O(Rb,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return ea.get(a,b,c,"json")},getScript:function(a,b){return ea.get(a,void 0,b,"script")}}),ea.each(["get","post"],function(a,b){ea[b]=function(a,c,d,e){return ea.isFunction(c)&&(e=e||d,d=c,c=void 0),ea.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ea._evalUrl=function(a){return ea.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ea.fn.extend({wrapAll:function(a){if(ea.isFunction(a))return this.each(function(b){ea(this).wrapAll(a.call(this,b))});if(this[0]){var b=ea(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ea.isFunction(a)?this.each(function(b){ea(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ea(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ea.isFunction(a);return this.each(function(c){ea(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ea.nodeName(this,"body")||ea(this).replaceWith(this.childNodes)}).end()}}),ea.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ca.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||ea.css(a,"display"))},ea.expr.filters.visible=function(a){return!ea.expr.filters.hidden(a)};var Ub=/%20/g,Vb=/\[\]$/,Wb=/\r?\n/g,Xb=/^(?:submit|button|image|reset|file)$/i,Yb=/^(?:input|select|textarea|keygen)/i;ea.param=function(a,b){var c,d=[],e=function(a,b){b=ea.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ea.ajaxSettings&&ea.ajaxSettings.traditional),ea.isArray(a)||a.jquery&&!ea.isPlainObject(a))ea.each(a,function(){e(this.name,this.value)});else for(c in a)S(c,a[c],b,e);return d.join("&").replace(Ub,"+")},ea.fn.extend({serialize:function(){return ea.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ea.prop(this,"elements");return a?ea.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ea(this).is(":disabled")&&Yb.test(this.nodeName)&&!Xb.test(a)&&(this.checked||!Ea.test(a))}).map(function(a,b){var c=ea(this).val();return null==c?null:ea.isArray(c)?ea.map(c,function(a){return{name:b.name,value:a.replace(Wb,"\r\n")}}):{name:b.name,value:c.replace(Wb,"\r\n")}}).get()}}),ea.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&T()||U()}:T;var Zb=0,$b={},_b=ea.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in $b)$b[a](void 0,!0)}),ca.cors=!!_b&&"withCredentials"in _b,_b=ca.ajax=!!_b,_b&&ea.ajaxTransport(function(a){if(!a.crossDomain||ca.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Zb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete $b[g],b=void 0,f.onreadystatechange=ea.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=$b[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),ea.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ea.globalEval(a),a}}}),ea.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ea.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=oa.head||ea("head")[0]||oa.documentElement;return{send:function(d,e){b=oa.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ac=[],bc=/(=)\?(?=&|$)|\?\?/;ea.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ac.pop()||ea.expando+"_"+Eb++;return this[a]=!0,a}}),ea.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=ea.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ea.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ac.push(e)),g&&ea.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ea.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||oa;var d=la.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ea.buildFragment([a],b,e),e&&e.length&&ea(e).remove(),ea.merge([],d.childNodes))};var cc=ea.fn.load;ea.fn.load=function(a,b,c){if("string"!=typeof a&&cc)return cc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=ea.trim(a.slice(h,a.length)),a=a.slice(0,h)),ea.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&ea.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?ea("<div>").append(ea.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},ea.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ea.fn[b]=function(a){return this.on(b,a)}}),ea.expr.filters.animated=function(a){return ea.grep(ea.timers,function(b){return a===b.elem}).length};var dc=a.document.documentElement;ea.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ea.css(a,"position"),l=ea(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ea.css(a,"top"),i=ea.css(a,"left"),j=("absolute"===k||"fixed"===k)&&ea.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ea.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ea.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ea.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,ea.contains(b,e)?(typeof e.getBoundingClientRect!==xa&&(d=e.getBoundingClientRect()),c=V(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ea.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ea.nodeName(a[0],"html")||(c=a.offset()),c.top+=ea.css(a[0],"borderTopWidth",!0),c.left+=ea.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ea.css(d,"marginTop",!0),left:b.left-c.left-ea.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dc;a&&!ea.nodeName(a,"html")&&"static"===ea.css(a,"position");)a=a.offsetParent;return a||dc})}}),ea.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);ea.fn[a]=function(d){return Da(this,function(a,d,e){var f=V(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?ea(f).scrollLeft():e,c?e:ea(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),ea.each(["top","left"],function(a,b){ea.cssHooks[b]=A(ca.pixelPosition,function(a,c){return c?(c=bb(a,b),db.test(c)?ea(a).position()[b]+"px":c):void 0})}),ea.each({Height:"height",Width:"width"},function(a,b){ea.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ea.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Da(this,function(b,c,d){var e;return ea.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?ea.css(b,c,g):ea.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),ea.fn.size=function(){return this.length},ea.fn.andSelf=ea.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ea});var ec=a.jQuery,fc=a.$;return ea.noConflict=function(b){return a.$===ea&&(a.$=fc),b&&a.jQuery===ea&&(a.jQuery=ec),ea},typeof b===xa&&(a.jQuery=a.$=ea),ea}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=0,c=Array.prototype.slice;return a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var d,e,f=c.call(arguments,1),g=0,h=f.length;h>g;g++)for(d in f[g])e=f[g][d],f[g].hasOwnProperty(d)&&void 0!==e&&(a.isPlainObject(e)?b[d]=a.isPlainObject(b[d])?a.widget.extend({},b[d],e):a.widget.extend({},e):b[d]=e);return b},a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=c.call(arguments,1),i=this;return g?this.each(function(){var c,d=a.data(this,e);return"instance"===f?(i=d,!1):d?a.isFunction(d[f])&&"_"!==f.charAt(0)?(c=d[f].apply(d,h),c!==d&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=b++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus");
},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget}),function(a){"function"==typeof define&&define.amd?define(["jquery","./widget"],a):a(jQuery)}(function(a){var b=!1;return a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(c){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),b=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],a):a(jQuery)}(function(a){return a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this._blurActiveElement(b),this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=this.document[0];if(this.handleElement.is(b.target))try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(d){}},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._normalizeRightBottom(),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}}),a.ui.draggable}),function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./mouse","./draggable"],a):a(jQuery)}(function(a){return a.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return j<f+b.helperProportions.width/2&&h-b.helperProportions.width/2<l&&k<g+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}(),a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;d<f.length;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;e<h.length;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance,c),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e}),f.length&&(d=a(f[0]).droppable("instance"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}},a.ui.droppable}),function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],a):a(jQuery)}(function(a){return a.widget("ui.sortable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),
this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-this.document.scrollTop()<g.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-g.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<g.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+g.scrollSpeed)),b.pageX-this.document.scrollLeft()<g.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-g.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<g.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return d?this.floating?f&&"right"===f||"down"===e?2:1:e&&("down"===e?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d],this.document[0]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c],this.document[0]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===d?b._createTrPlaceholder(b.currentItem,e):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"clientX":"clientY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),Math.abs(b[l]-i)<e&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return void(this.currentContainer.containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}),function(a){"function"==typeof define&&define.amd?define(["jquery","./core"],a):a(jQuery)}(function(a){function b(a){for(var b,c;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(c=parseInt(a.css("zIndex"),10),!isNaN(c)&&0!==c))return c;a=a.parent()}return 0}function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.regional.en=a.extend(!0,{},this.regional[""]),this.regional["en-US"]=a.extend(!0,{},this.regional.en),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",e)}function e(){a.datepicker._isDisabledDatepicker(g.inline?g.dpDiv.parent()[0]:g.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function f(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.11.4"}});var g;return a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return f(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,e,g){var h,i,j,k,l,m=this._dialogInst;return m||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},a.data(this._dialogInput[0],"datepicker",m)),f(m.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(m,c):c,this._dialogInput.val(c),this._pos=g?g.length?g:[g.pageX,g.pageY]:null,this._pos||(i=document.documentElement.clientWidth,j=document.documentElement.clientHeight,k=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[i/2-100+k,j/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],"datepicker",m),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty(),g===e&&(g=null))},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,"datepicker");e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,c,d){var e,g,h,i,j=this._getInst(b);return 2===arguments.length&&"string"==typeof c?"defaults"===c?a.extend({},a.datepicker._defaults):j?"all"===c?a.extend({},j.settings):this._get(j,c):null:(e=c||{},"string"==typeof c&&(e={},e[c]=d),void(j&&(this._curInst===j&&this._hideDatepicker(),g=this._getDateDatepicker(b,!0),h=this._getMinMaxDate(j,"min"),i=this._getMinMaxDate(j,"max"),f(j.settings,e),null!==h&&void 0!==e.dateFormat&&void 0===e.minDate&&(j.settings.minDate=this._formatDate(j,h)),null!==i&&void 0!==e.dateFormat&&void 0===e.maxDate&&(j.settings.maxDate=this._formatDate(j,i)),"disabled"in e&&(e.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),j),this._autoSize(j),this._setDate(j,g),this._updateAlternate(j),this._updateDatepicker(j))))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),
!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(c){if(c=c.target||c,"input"!==c.nodeName.toLowerCase()&&(c=a("input",c.parentNode)[0]),!a.datepicker._isDisabledDatepicker(c)&&a.datepicker._lastInput!==c){var d,e,g,h,i,j,k;d=a.datepicker._getInst(c),a.datepicker._curInst&&a.datepicker._curInst!==d&&(a.datepicker._curInst.dpDiv.stop(!0,!0),d&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),e=a.datepicker._get(d,"beforeShow"),g=e?e.apply(c,[c,d]):{},g!==!1&&(f(d.settings,g),d.lastVal=null,a.datepicker._lastInput=c,a.datepicker._setDateFromField(d),a.datepicker._inDialog&&(c.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(c),a.datepicker._pos[1]+=c.offsetHeight),h=!1,a(c).parents().each(function(){return h|="fixed"===a(this).css("position"),!h}),i={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,d.dpDiv.empty(),d.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(d),i=a.datepicker._checkOffset(d,i,h),d.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":h?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),d.inline||(j=a.datepicker._get(d,"showAnim"),k=a.datepicker._get(d,"duration"),d.dpDiv.css("z-index",b(a(c))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[j]?d.dpDiv.show(j,a.datepicker._get(d,"showOptions"),k):d.dpDiv[j||"show"](j?k:null),a.datepicker._shouldFocusInput(d)&&d.input.focus(),a.datepicker._curInst=d))}},_updateDatepicker:function(b){this.maxRows=4,g=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var c,d=this._getNumberOfMonths(b),f=d[1],h=17,i=b.dpDiv.find("."+this._dayOverClass+" a");i.length>0&&e.apply(i.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&b.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",h*f+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),d=this._get(g,"duration"),e=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),d,e):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(g,"onClose"),f&&f.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?c.toString():c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e="y"===a?d:1,f=new RegExp("^\\d{"+e+","+d+"}"),g=c.substring(i).match(f);if(!g)throw"Missing number at position "+i;return i+=g[0].length,parseInt(g[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():100>p&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=p?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),f>=r)break;q++,r-=f}if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<U[0];w++){for(x="",this.maxRows=4,y=0;y<U[1];y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th scope='col'"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.11.4",a.datepicker}),function(a){"function"==typeof define&&define.amd?define(["../datepicker"],a):a(jQuery.datepicker)}(function(a){return a.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},a.setDefaults(a.regional["zh-CN"]),a.regional["zh-CN"]}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.5",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.5",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),
this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.5",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.5",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.5",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.5",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.5",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(a){var b=function(b,d){if(this.$element=a(b),this.$note=a('<div class="alert"></div>'),this.options=a.extend(!0,{},a.fn.notify.defaults,d),this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message?this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text&&this.$note.text(this.options.message.text):this.$note.html(this.options.message):this.$note.html(this.$element.data("message")),this.options.closable){var e=a('<a class="close pull-right" href="#">&times;</a>');a(e).on("click",a.proxy(c,this)),this.$note.prepend(e)}return this},c=function(){return this.options.onClose(),a(this.$note).remove(),this.options.onClosed(),!1};b.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(c,this)),this.$element.append(this.$note),this.$note.alert()},b.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",a.proxy(c,this)):c.call(this);
},a.fn.notify=function(a){return new b(this,a)},a.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery),function(){function a(){}function b(a){return f.retinaImageSuffix+a}function c(a,c){if(this.path=a||"","undefined"!=typeof c&&null!==c)this.at_2x_path=c,this.perform_check=!1;else{if(void 0!==document.createElement){var d=document.createElement("a");d.href=this.path,d.pathname=d.pathname.replace(g,b),this.at_2x_path=d.href}else{var e=this.path.split("?");e[0]=e[0].replace(g,b),this.at_2x_path=e.join("?")}this.perform_check=!0}}function d(a){this.el=a,this.path=new c(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var b=this;this.path.check_2x_variant(function(a){a&&b.swap()})}var e="undefined"==typeof exports?window:exports,f={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};e.Retina=a,a.configure=function(a){null===a&&(a={});for(var b in a)a.hasOwnProperty(b)&&(f[b]=a[b])},a.init=function(a){null===a&&(a=e);var b=a.onload||function(){};a.onload=function(){var a,c,e=document.getElementsByTagName("img"),f=[];for(a=0;a<e.length;a+=1)c=e[a],c.getAttributeNode("data-no-retina")||f.push(new d(c));b()}},a.isRetina=function(){var a="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return e.devicePixelRatio>1?!0:e.matchMedia&&e.matchMedia(a).matches?!0:!1};var g=/\.\w+$/;e.RetinaImagePath=c,c.confirmed_paths=[],c.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},c.prototype.check_2x_variant=function(a){var b,d=this;return this.is_external()?a(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in c.confirmed_paths?a(!0):(b=new XMLHttpRequest,b.open("HEAD",this.at_2x_path),b.onreadystatechange=function(){if(4!==b.readyState)return a(!1);if(b.status>=200&&b.status<=399){if(f.check_mime_type){var e=b.getResponseHeader("Content-Type");if(null===e||!e.match(/^image/i))return a(!1)}return c.confirmed_paths.push(d.at_2x_path),a(!0)}return a(!1)},b.send(),void 0):a(!0)},e.RetinaImage=d,d.prototype.swap=function(a){function b(){c.el.complete?(f.force_original_dimensions&&(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight)),c.el.setAttribute("src",a)):setTimeout(b,5)}"undefined"==typeof a&&(a=this.path.at_2x_path);var c=this;b()},a.isRetina()&&a.init(e)}(),function(a){var b={debugOn:!1,markupCreated:!1,markup:"",attachEvents:function(c){a("#gollum-dialog-action-ok").click(function(a){b.eventOK(a,c)}),a("#gollum-dialog-action-cancel").click(b.eventCancel),a('#gollum-dialog-dialog input[type="text"]').keydown(function(a){13==a.keyCode&&b.eventOK(a,c)})},detachEvents:function(){a("#gollum-dialog-action-ok").unbind("click"),a("#gollum-dialog-action-cancel").unbind("click")},createFieldMarkup:function(a){for(var c="<fieldset>",d=0;d<a.length;d++)if("object"==typeof a[d]){switch(c+='<div class="field">',a[d].type){case"text":c+=b.createFieldText(a[d])}c+="</div>"}return c+="</fieldset>"},createFieldText:function(a){var b="";return a.name&&(b+="<label",a.id&&(b+=' for="'+a.name+'"'),b+=">"+a.name+"</label>"),b+='<input type="text"',a.id&&(b+=' name="'+a.id+'"',"code"==a.type&&(b+=' class="code"'),b+=' id="gollum-dialog-dialog-generated-field-'+a.id+'">'),b},createMarkup:function(c,d){return b.markupCreated=!0,a.facebox?'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-title"><h4>'+c+'</h4></div><div id="gollum-dialog-dialog-body">'+d+'</div><div id="gollum-dialog-dialog-buttons"><a href="#" title="Cancel" id="gollum-dialog-action-cancel" class="gollum-minibutton">Cancel</a><a href="#" title="OK" id="gollum-dialog-action-ok" class="gollum-minibutton">OK</a></div></div>':'<div id="gollum-dialog-dialog"><div id="gollum-dialog-dialog-inner"><div id="gollum-dialog-dialog-bg"><div id="gollum-dialog-dialog-title"><h4>'+c+'</h4></div><div id="gollum-dialog-dialog-body">'+d+'</div><div id="gollum-dialog-dialog-buttons"><a href="#" title="Cancel" id="gollum-dialog-action-cancel" class="minibutton">Cancel</a><a href="#" title="OK" id="gollum-dialog-action-ok" class="minibutton">OK</a></div></div></div></div>'},eventCancel:function(a){a.preventDefault(),c("Cancelled dialog."),b.hide()},eventOK:function(c,d){c.preventDefault();var e=[];a("#gollum-dialog-dialog-body input").each(function(){e[a(this).attr("name")]=a(this).val()}),d&&"function"==typeof d&&d(e),b.hide()},hide:function(){a.facebox?(b.markupCreated=!1,a(document).trigger("close.facebox"),b.detachEvents()):a.browser.msie?(a("#gollum-dialog-dialog").hide().removeClass("active"),a("select").css("visibility","visible")):a("#gollum-dialog-dialog").animate({opacity:0},{duration:200,complete:function(){a("#gollum-dialog-dialog").removeClass("active")}})},init:function(d){var e="",f="";return d&&"object"==typeof d?(d.body&&"string"==typeof d.body&&(f="<p>"+d.body+"</p>"),d.fields&&"object"==typeof d.fields&&(f+=b.createFieldMarkup(d.fields)),d.title&&"string"==typeof d.title&&(e=d.title),b.markupCreated&&(a.facebox?a(document).trigger("close.facebox"):a("#gollum-dialog-dialog").remove()),b.markup=b.createMarkup(e,f),a.facebox?a(document).bind("reveal.facebox",function(){d.OK&&"function"==typeof d.OK&&(b.attachEvents(d.OK),a(a('#facebox input[type="text"]').get(0)).focus())}):(a("body").append(b.markup),d.OK&&"function"==typeof d.OK&&b.attachEvents(d.OK)),void b.show()):void c("Editor Dialog: Cannot init; invalid init object")},show:function(){b.markupCreated?(c("Showing dialog"),a.facebox?a.facebox(b.markup):a.browser.msie?(a("#gollum-dialog.dialog").addClass("active"),b.position(),a("select").css("visibility","hidden")):(a("#gollum-dialog.dialog").css("display","none"),a("#gollum-dialog-dialog").animate({opacity:0},{duration:0,complete:function(){a("#gollum-dialog-dialog").css("display","block"),b.position(),a("#gollum-dialog-dialog").animate({opacity:1},{duration:500})}}))):c("Dialog: No markup to show. Please use init first.")},position:function(){var b=a("#gollum-dialog-dialog-inner").height();a("#gollum-dialog-dialog-inner").css("height",b+"px").css("margin-top",-1*parseInt(b/2))}};a.facebox&&a(document).bind("reveal.facebox",function(){a("#facebox img.close_image").remove()});var c=function(a){b.debugOn&&"undefined"!=typeof console&&console.log(a)};a.GollumDialog=b}(jQuery),function(a){var b,c={MarkupType:"markdown",EditorMode:"code",NewFile:!1,HasFunctionBar:!0,Debug:!1,NoDefinitionsFor:[],AfterClickFunBar:null},d={};a.fn.GollumEditor=function(h){if(b=this,d=a.extend(c,h),e("GollumEditor loading"),b.data("AfterClickFunBar",d.AfterClickFunBar),g.baseEditorMarkup()){if(g.titleDisplayed()&&b.find(".gollum-editor-title-field").addClass("active"),g.editSummaryMarkup()&&(a.GollumEditor.Placeholder.add(a(".gollum-editor-edit-summary input")),a('.gollum-editor form[name="gollum-editor"]').submit(function(b){b.preventDefault(),a.GollumEditor.Placeholder.clearAll(),e("submitting"),a(this).unbind("submit"),a(this).submit()})),g.collapsibleInputs()&&a(".gollum-editor .collapsed a.button, .gollum-editor .expanded a.button").click(function(b){b.preventDefault(),a(this).parent().toggleClass("expanded"),a(this).parent().toggleClass("collapsed")}),g.previewButton()){b.find(".gollum-editor .gollum-editor-preview").click(function(){var b=a(".gollum-editor form").attr("action"),c=a(a(".gollum-editor form").get(0));return c.attr("action",this.href||"/preview"),c.attr("target","_blank"),c.submit(),c.attr("action",b),c.removeAttr("target"),!1})}if(g.functionBar()){var j=b.find(".gollum-editor-body").attr("data-markup-lang");j&&(d.MarkupType=j),f.setActiveLanguage(d.MarkupType),g.formatSelector()&&i.init(a(".gollum-editor-format-selector select")),g.help()&&(a(".gollum-editor-help").hide(),a(".gollum-editor-help").removeClass("jaws"))}}},a.GollumEditor=function(){},a.GollumEditor.defineLanguage=function(a,b){"object"==typeof b?f.define(a,b):e("GollumEditor.defineLanguage: definition for "+a+" is not an object")};var e=function(a){d.Debug&&"undefined"!=typeof console&&console.log(a)},f={_ACTIVE_LANG:"",_LOADED_LANGS:[],_LANG:{},define:function(b,c){if(f._ACTIVE_LANG=b,f._LOADED_LANGS.push(b),"object"==typeof a.GollumEditor.WikiLanguage){var d={};a.extend(d,a.GollumEditor.WikiLanguage,c),f._LANG[b]=d}else f._LANG[b]=c},getActiveLanguage:function(){return f._ACTIVE_LANG},setActiveLanguage:function(a){f.isLoadedFor(a)?(f._ACTIVE_LANG=a,h.refresh(b)):(f._ACTIVE_LANG=null,f.loadFor(a,function(b,c){"success"!=c&&(e("Failed to load language definition for "+a),f.define(a,{})),g.functionBar()&&h.refresh(),f.isValid()&&g.formatSelector()&&i.updateSelected()}))},getDefinitionFor:function(a,b){return b||(b=f._ACTIVE_LANG),f.isLoadedFor(b)&&f._LANG[b][a]&&"object"==typeof f._LANG[b][a]?f._LANG[b][a]:null},loadFor:function(b,c){if(d.NoDefinitionsFor.length)for(var e=0;e<d.NoDefinitionsFor.length;e++)if(b==d.NoDefinitionsFor[e]&&"function"==typeof c)return void c(null,"error");var f="/assets/langs/"+b+".js";a.ajax({url:f,dataType:"script",complete:function(a,b){"function"==typeof c&&c(a,b)}})},isLoadedFor:function(a){if(0===f._LOADED_LANGS.length)return!1;for(var b=0;b<f._LOADED_LANGS.length;b++)if(f._LOADED_LANGS[b]==a)return!0;return!1},isValid:function(){return f._ACTIVE_LANG&&"object"==typeof f._LANG[f._ACTIVE_LANG]}},g={baseEditorMarkup:function(){return b.find(".gollum-editor").length&&b.find(".gollum-editor-body").length},collapsibleInputs:function(){return b.find(".gollum-editor .collapsed, .gollum-editor .expanded").length},formatSelector:function(){return b.find(".gollum-editor-format-selector select").length},functionBar:function(){return d.HasFunctionBar&&b.find(".gollum-editor-function-bar").length},ff4Environment:function(){var a=new RegExp(/Firefox\/4.0b/);return a.test(navigator.userAgent)},editSummaryMarkup:function(){return b.find("input.gollum-editor-message-field").length>0},help:function(){return b.find(".gollum-editor .gollum-editor-help").length&&b.find(".gollum-editor .function-help").length},previewButton:function(){return b.find(".gollum-editor .gollum-editor-preview").length},titleDisplayed:function(){return d.NewFile}},h={isActive:!1,activate:function(){e("Activating function bar"),b.find(".gollum-editor-function-bar a.function-button").each(function(){var b=a(this).attr("class").split(" ")[a(this).attr("class").split(" ").length-1];f.getDefinitionFor(b)?(a(this).click(h.evtFunctionButtonClick),a(this).removeClass("disabled")):"function-help"!=a(this).attr("id")&&a(this).addClass("disabled")}),b.find(".gollum-editor-function-bar").addClass("active"),h.isActive=!0},deactivate:function(){b.find(".gollum-editor-function-bar a.function-button").unbind("click"),b.find(".gollum-editor-function-bar").removeClass("active"),h.isActive=!1},evtFunctionButtonClick:function(b){b.preventDefault();var c=a(this).attr("class").split(" ")[a(this).attr("class").split(" ").length-1],d=f.getDefinitionFor(c);"object"==typeof d&&h.executeAction(d,b)},executeAction:function(b,c){var d=c||window.event,f=a(d.target).parents(".gollum-editor").find(".gollum-editor-body").val(),g=(h.getFieldSelectionPosition(a(d.target).parents(".gollum-editor").find(".gollum-editor-body")),h.getFieldSelection(a(d.target).parents(".gollum-editor").find(".gollum-editor-body"))),i=g,j=!0,k=null;if(null==b&&(b={}),b.exec&&"function"==typeof b.exec)return void b.exec(f,g,a(d.target).parents(".gollum-editor").find(".gollum-editor-body"));var l=/([^\n]+)/gi;if(b.search&&"object"==typeof b.search&&(e("Replacing search Regex"),l=null,l=new RegExp(b.search),e(l)),e('repText is "'+i+'"'),b.replace&&"string"==typeof b.replace){e("Running replacement - using "+b.replace);var m=b.replace;i=i.replace(l,m),i=i.replace(/\$[\d]/g,""),""===i&&(e("Search string is empty"),k=m.indexOf("$1"),i=m.replace(/\$[\d]/g,""),-1==k&&(k=Math.floor(m.length/2)))}b.append&&"string"==typeof b.append&&(i==g&&(j=!1),i+=b.append),i&&h.replaceFieldSelection(a(d.target).parents(".gollum-editor").find(".gollum-editor-body"),i,j,k);var n=a(d.target).parents(".gollum-editor-wrap").data("AfterClickFunBar");a.isFunction(n)&&n(a(d.target).parents(".gollum-editor").find(".gollum-editor-body").val())},getFieldSelectionPosition:function(a){if(a.length){var b=0,c=0,d=a.get(0);if("number"==typeof d.selectionStart&&"number"==typeof d.selectionEnd)b=d.selectionStart,c=d.selectionEnd;else{var f=document.selection.createRange(),g=f.duplicate();g.moveToElementText(d),g.setEndPoint("EndToEnd",f),b=g.text.length-f.text.length,c=b+f.text.length;var h,i=b,j=0;for(e("IE: start position is currently "+i),h=0;i>h;h++)d.value.charAt(h).match(/\r/)&&++j;j&&(e("IE start: compensating for "+j+" line breaks"),b-=j,j=0);var k=c;for(h=0;k>h;h++)d.value.charAt(h).match(/\r/)&&++j;j&&(e("IE end: compensating for "+j+" line breaks"),c-=j)}return{start:b,end:c}}},getFieldSelection:function(a){var b,c="";return a.length?(b=h.getFieldSelectionPosition(a),c=a.val().substring(b.start,b.end),e("Selected: "+c+" ("+b.start+", "+b.end+")"),c):!1},isShown:function(){return b.find(".gollum-editor-function-bar").is(":visible")},refresh:function(){g.functionBar()&&(e("Refreshing function bar"),f.isValid()?(b.find(".gollum-editor-function-bar a.function-button").unbind("click"),h.activate(),j&&j.setActiveHelp(f.getActiveLanguage())):(e("Language definition is invalid."),h.isShown()&&h.deactivate(),j.isShown()&&j.hide()))},replaceFieldSelection:function(a,b,c,d){var e=h.getFieldSelectionPosition(a),f=a.val(),g=!0;c===!1&&(g=!1);var i=null;if(a[0].scrollTop&&(i=a[0].scrollTop),a.val(f.substring(0,e.start)+b+f.substring(e.end)),a[0].focus(),g)if(a[0].setSelectionRange)d?a[0].setSelectionRange(e.start+d,e.start+d):a[0].setSelectionRange(e.start,e.start+b.length);else if(a[0].createTextRange){var j=a[0].createTextRange();j.collapse(!0),d?(j.moveEnd(e.start+d),j.moveStart(e.start+d)):(j.moveEnd("character",e.start+b.length),j.moveStart("character",e.start)),j.select()}i&&(a[0].scrollTop=i)}},i={$_SELECTOR:null,evtChangeFormat:function(b){var c=a(this).val();f.setActiveLanguage(c)},init:function(a){e("Initializing format selector"),i.$_SELECTOR&&"object"==typeof i.$_SELECTOR&&i.$_SELECTOR.unbind("change"),i.$_SELECTOR=a,i.updateSelected(),i.$_SELECTOR.change(i.evtChangeFormat)},updateSelected:function(){var a=f.getActiveLanguage();i.$_SELECTOR.val(a)}},j={_ACTIVE_HELP:"",_LOADED_HELP_LANGS:[],_HELP:{},define:function(b,c){j.isValidHelpFormat(c)?(e("help is a valid format"),j._ACTIVE_HELP_LANG=b,j._LOADED_HELP_LANGS.push(b),j._HELP[b]=c,a(".function-help").length&&(a(".function-help").hasClass("disabled")&&a(".function-help").removeClass("disabled"),a(".function-help").unbind("click"),a(".function-help").click(j.evtHelpButtonClick),j.generateHelpMenuFor(b),a(".gollum-editor-help").length&&"undefined"!=typeof a(".gollum-editor-help").attr("data-autodisplay")&&"true"===a(".gollum-editor-help").attr("data-autodisplay")&&j.show())):a(".function-help").length&&a(".function-help").addClass("disabled")},generateHelpMenuFor:function(c){if(!j._HELP[c])return e("Help is not defined for "+c.toString()),!1;var d=j._HELP[c];b.find(".gollum-editor-help-parent").html(""),b.find(".gollum-editor-help-list").html(""),b.find(".gollum-editor-help-content").html("");for(var f=0;f<d.length&&"object"==typeof d[f];f++){var g=a('<li><a href="#" rel="'+f+'">'+d[f].menuName+"</a></li>");a(".gollum-editor-help-parent").append(g),0===f&&g.children("a").addClass("selected"),g.children("a").click(j.evtParentMenuClick)}j.generateSubMenu(d[0],0)},generateSubMenu:function(c,d){b.find(".gollum-editor-help-list").html(""),b.find(".gollum-editor-help-content").html("");for(var e=0;e<c.content.length&&"object"==typeof c.content[e];e++){var f=a('<li><a href="#" rel="'+d+":"+e+'">'+c.content[e].menuName+"</a></li>");b.find(".gollum-editor-help-list").append(f),f.children("a").click(j.evtSubMenuClick)}},hide:function(){kzi.util.isIE()?b.find(".gollum-editor-help").css("display","none"):b.find(".gollum-editor-help").animate({opacity:0},200,function(){b.find(".gollum-editor-help").animate({height:"hide"},200)})},show:function(){kzi.util.isIE()?b.find(".gollum-editor-help").css("display","block"):b.find(".gollum-editor-help").animate({height:"show"},200,function(){b.find(".gollum-editor-help").animate({opacity:1},300)})},showHelpFor:function(a,c){var d=j._HELP[j._ACTIVE_HELP_LANG][a].content[c].data;b.find(".gollum-editor-help-content").html(d)},isLoadedFor:function(a){for(var b=0;b<j._LOADED_HELP_LANGS.length;b++)if(a==j._LOADED_HELP_LANGS[b])return!0;return!1},isShown:function(){return b.find(".gollum-editor-help").is(":visible")},isValidHelpFormat:function(a){return"object"==typeof a&&a.length&&"string"==typeof a[0].menuName&&"object"==typeof a[0].content&&a[0].content.length},setActiveHelp:function(a){j.isLoadedFor(a)?(j._ACTIVE_HELP_LANG=a,b.find(".function-help").length&&(b.find(".function-help").hasClass("disabled")&&b.find(".function-help").removeClass("disabled"),b.find(".function-help").unbind("click"),b.find(".function-help").click(j.evtHelpButtonClick),j.generateHelpMenuFor(a))):(b.find(".function-help").length&&b.find(".function-help").addClass("disabled"),j.isShown()&&j.hide())},evtHelpButtonClick:function(b){b.preventDefault();var c=a(b.target).parents(".gollum-editor");j.isShown()?(c.find(".gollum-editor-help").length&&"undefined"!==c.find(".gollum-editor-help").attr("data-autodisplay")&&"true"===c.find(".gollum-editor-help").attr("data-autodisplay")&&c.find(".gollum-editor-help").attr("data-autodisplay",""),j.hide()):j.show()},evtParentMenuClick:function(c){if(c.preventDefault(),!a(this).hasClass("selected")){var d=a(this).attr("rel"),e=j._HELP[j._ACTIVE_HELP_LANG][d];a(".gollum-editor-help-parent li a").removeClass("selected"),a(this).addClass("selected"),j.generateSubMenu(e,d),a(b.find(".gollum-editor-help-list li a").get(0)).click()}},evtSubMenuClick:function(c){if(c.preventDefault(),!a(this).hasClass("selected")){var d=a(this).attr("rel").split(":");b.find(".gollum-editor-help-list li a").removeClass("selected"),a(this).addClass("selected"),j.showHelpFor(d[0],d[1])}}};a.GollumEditor.defineHelp=j.define,a.GollumEditor.Dialog=a.GollumDialog,a.GollumEditor.replaceSelection=function(b){h.replaceFieldSelection(a(event.target).parents(".gollum-editor").find(".gollum-editor-body"),b)},a.GollumEditor.FunctionBar=h,a.GollumEditor.Placeholder=a.GollumPlaceholder}(jQuery),function(a){var b={_PLACEHOLDERS:[],_p:function(b){this.fieldObject=b,this.placeholderText=b.val();var c=b.val();b.addClass("ph"),b.blur(function(){""==a(this).val()&&(a(this).val(c),a(this).addClass("ph"))}),b.focus(function(){a(this).removeClass("ph"),a(this).val()==c?a(this).val(""):a(this)[0].select()})},add:function(a){b._PLACEHOLDERS.push(new b._p(a))},clearAll:function(){for(var a=0;a<b._PLACEHOLDERS.length;a++)b._PLACEHOLDERS[a].fieldObject.val()==b._PLACEHOLDERS[a].placeholderText&&b._PLACEHOLDERS[a].fieldObject.val("")},exists:function(){return _PLACEHOLDERS.length}};a.GollumPlaceholder=b}(jQuery),function(a){function b(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:d[a.trim(b).toLowerCase()]}function c(c,d){var e;do{if(e=a.curCSS(c,d),""!=e&&"transparent"!=e||a.nodeName(c,"body"))break;d="backgroundColor"}while(c=c.parentNode);return b(e)}a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(d,e){a.fx.step[e]=function(a){0==a.state&&(a.start=c(a.elem,e),a.end=b(a.end)),a.elem.style[e]="rgb("+[Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0]),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1]),255),0),Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2]),255),0)].join(",")+")"}});var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(a){var b={"function-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"**$1**$2"},"function-italic":{search:/([^\n]+)([\n\s]*)/g,replace:"_$1_$2"},"function-code":{search:/(^[\n]+)([\n\s]*)/g,replace:"\n```\n$1\n```$2"},"function-hr":{append:"\n***\n"},"function-ul":{search:/(.+)([\n]?)/g,replace:"\n* $1$2"},"function-ol":{search:/(.+)([\n]?)/g,replace:"\n1. $1$2"},"function-blockquote":{search:/(.+)([\n]?)/g,replace:"\n> $1$2"},"function-h1":{search:/(.+)([\n]?)/g,replace:"\n# $1$2\n"},"function-h2":{search:/(.+)([\n]?)/g,replace:"\n## $1$2\n"},"function-h3":{search:/(.+)([\n]?)/g,replace:"\n### $1$2\n"},"function-link":{exec:function(a,b,c){return}},"function-image":{exec:function(a,b,c){return}},"function-emoji":{},"function-preview":{}},c=[{menuName:"Block Elements",content:[{menuName:"Paragraphs &amp; Breaks",data:"<p>To create a paragraph, simply create a block of text that is not separated by one or more blank lines. Blocks of text separated by one or more blank lines will be parsed as paragraphs.</p><p>If you want to create a line break, end a line with two or more spaces, then hit Return/Enter.</p>"},{menuName:"Headers",data:"<p>Markdown supports two header formats. The wiki editor uses the &ldquo;atx&rsquo;-style headers. Simply prefix your header text with the number of <code>#</code> characters to specify heading depth. For example: <code># Header 1</code>, <code>## Header 2</code> and <code>### Header 3</code> will be progressively smaller headers. You may end your headers with any number of hashes.</p>"},{menuName:"Blockquotes",data:"<p>Markdown creates blockquotes email-style by prefixing each line with the <code>&gt;</code>. This looks best if you decide to hard-wrap text and prefix each line with a <code>&gt;</code> character, but Markdown supports just putting <code>&gt;</code> before your paragraph.</p>"},{menuName:"Lists",data:"<p>Markdown supports both ordered and unordered lists. To create an ordered list, simply prefix each line with a number (any number will do &mdash; this is why the editor only uses one number.) To create an unordered list, you can prefix each line with <code>*</code>, <code>+</code> or <code>-</code>.</p> List items can contain multiple paragraphs, however each paragraph must be indented by at least 4 spaces or a tab."},{menuName:"Code Blocks",data:"<p>Markdown wraps code blocks in pre-formatted tags to preserve indentation in your code blocks. To create a code block, indent the entire block by at least 4 spaces or one tab. Markdown will strip the extra indentation you&rsquo;ve added to the code block.</p>"},{menuName:"Horizontal Rules",data:"Horizontal rules are created by placing three or more hyphens, asterisks or underscores on a line by themselves. Spaces are allowed between the hyphens, asterisks or underscores."}]},{menuName:"Span Elements",content:[{menuName:"Links",data:"<p>Markdown has two types of links: <strong>inline</strong> and <strong>reference</strong>. For both types of links, the text you want to display to the user is placed in square brackets. For example, if you want your link to display the text &ldquo;GitHub&rdquo;, you write <code>[GitHub]</code>.</p><p>To create an inline link, create a set of parentheses immediately after the brackets and write your URL within the parentheses. (e.g., <code>[GitHub](http://github.com/)</code>). Relative paths are allowed in inline links.</p><p>To create a reference link, use two sets of square brackets. <code>[my internal link][internal-ref]</code> will link to the internal reference <code>internal-ref</code>.</p>"},{menuName:"Emphasis",data:"<p>Asterisks (<code>*</code>) and underscores (<code>_</code>) are treated as emphasis and are wrapped with an <code>&lt;em&gt;</code> tag, which usually displays as italics in most browsers. Double asterisks (<code>**</code>) or double underscores (<code>__</code>) are treated as bold using the <code>&lt;strong&gt;</code> tag. To create italic or bold text, simply wrap your words in single/double asterisks/underscores. For example, <code>**My double emphasis text**</code> becomes <strong>My double emphasis text</strong>, and <code>*My single emphasis text*</code> becomes <em>My single emphasis text</em>.</p>"},{menuName:"Code",data:"<p>To create inline spans of code, simply wrap the code in backticks (<code>`</code>). Markdown will turn <code>`myFunction`</code> into <code>myFunction</code>.</p>"},{menuName:"Images",data:"<p>Markdown image syntax looks a lot like the syntax for links; it is essentially the same syntax preceded by an exclamation point (<code>!</code>). For example, if you want to link to an image at <code>http://github.com/unicorn.png</code> with the alternate text <code>My Unicorn</code>, you would write <code>![My Unicorn](http://github.com/unicorn.png)</code>.</p>"}]},{menuName:"Miscellaneous",content:[{menuName:"Automatic Links",data:'<p>If you want to create a link that displays the actual URL, markdown allows you to quickly wrap the URL in <code>&lt;</code> and <code>&gt;</code> to do so. For example, the link <a href="javascript:void(0);">http://github.com/</a> is easily produced by writing <code>&lt;http://github.com/&gt;</code>.</p>'},{menuName:"Escaping",data:"<p>If you want to use a special Markdown character in your document (such as displaying literal asterisks), you can escape the character with the backslash (<code>\\</code>). Markdown will ignore the character directly after a backslash."}]}];a.GollumEditor.defineLanguage("markdown",b),a.GollumEditor.defineHelp("markdown",c)}(jQuery),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)Qc[d[b]]?d[b]=Qc[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");
}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/1e3,e=me(this._days),f=me(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(require("../moment")):"function"==typeof define&&define.amd?define(["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b,c){var d=100*a+b;return 600>d?"凌晨":900>d?"早上":1130>d?"上午":1230>d?"中午":1800>d?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()-b.unix()>=604800?"[下]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},lastWeek:function(){var b,c;return b=a().startOf("week"),c=this.unix()<b.unix()?"[上]":"[本]",0===this.minutes()?c+"dddAh点整":c+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}});return b}),function(a){
"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){function c(a){return Q(a,Oa)}function d(b){var c,d={views:b.views||{}};return a.each(b,function(b,e){"views"!=b&&(a.isPlainObject(e)&&!/(time|duration|interval)$/i.test(b)&&-1==a.inArray(b,Oa)?(c=null,a.each(e,function(a,e){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(a)?(d.views[a]||(d.views[a]={}),d.views[a][b]=e):(c||(c={}),c[a]=e)}),c&&(d[b]=c)):d[b]=e)}),d}function e(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function f(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function g(){a("body").addClass("fc-not-allowed")}function h(){a("body").removeClass("fc-not-allowed")}function i(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],k=0;j(b),b.each(function(c,d){var j=c===b.length-1?f:e,l=a(d).outerHeight(!0);j>l?(g.push(d),h.push(l),i.push(a(d).height())):k+=l}),d&&(c-=k,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);d>j&&a(c).height(l)})}function j(a){a.height("")}function k(b){var c=0;return b.find("> *").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function l(a,b){return a.height(b).addClass("fc-scroller"),a[0].scrollHeight-1>a[0].clientHeight?!0:(m(a),!1)}function m(a){a.height("").removeClass("fc-scroller")}function n(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function o(a){var b=a.offset();return{left:b.left,right:b.left+a.outerWidth(),top:b.top,bottom:b.top+a.outerHeight()}}function p(a){var b=a.offset(),c=r(a),d=b.left+u(a,"border-left-width")+c.left,e=b.top+u(a,"border-top-width")+c.top;return{left:d,right:d+a[0].clientWidth,top:e,bottom:e+a[0].clientHeight}}function q(a){var b=a.offset(),c=b.left+u(a,"border-left-width")+u(a,"padding-left"),d=b.top+u(a,"border-top-width")+u(a,"padding-top");return{left:c,right:c+a.width(),top:d,bottom:d+a.height()}}function r(a){var b=a.innerWidth()-a[0].clientWidth,c={left:0,right:0,top:0,bottom:a.innerHeight()-a[0].clientHeight};return s()&&"rtl"==a.css("direction")?c.left=b:c.right=b,c}function s(){return null===Pa&&(Pa=t()),Pa}function t(){var b=a("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),c=b.children(),d=c.offset().left>b.offset().left;return b.remove(),d}function u(a,b){return parseFloat(a.css(b))||0}function v(a){return 1==a.which&&!a.ctrlKey}function w(a,b){var c={left:Math.max(a.left,b.left),right:Math.min(a.right,b.right),top:Math.max(a.top,b.top),bottom:Math.min(a.bottom,b.bottom)};return c.left<c.right&&c.top<c.bottom?c:!1}function x(a,b){return{left:Math.min(Math.max(a.left,b.left),b.right),top:Math.min(Math.max(a.top,b.top),b.bottom)}}function y(a){return{left:(a.left+a.right)/2,top:(a.top+a.bottom)/2}}function z(a,b){return{left:a.left-b.left,top:a.top-b.top}}function A(b){var c,d,e=[],f=[];for("string"==typeof b?f=b.split(/\s*,\s*/):"function"==typeof b?f=[b]:a.isArray(b)&&(f=b),c=0;c<f.length;c++)d=f[c],"string"==typeof d?e.push("-"==d.charAt(0)?{field:d.substring(1),order:-1}:{field:d,order:1}):"function"==typeof d&&e.push({func:d});return e}function B(a,b,c){var d,e;for(d=0;d<c.length;d++)if(e=C(a,b,c[d]))return e;return 0}function C(a,b,c){return c.func?c.func(a,b):D(a[c.field],b[c.field])*(c.order||1)}function D(b,c){return b||c?null==c?-1:null==b?1:"string"===a.type(b)||"string"===a.type(c)?String(b).localeCompare(String(c)):b-c:0}function E(a,b){var c,d,e,f,g=a.start,h=a.end,i=b.start,j=b.end;return h>i&&j>g?(g>=i?(c=g.clone(),e=!0):(c=i.clone(),e=!1),j>=h?(d=h.clone(),f=!0):(d=j.clone(),f=!1),{start:c,end:d,isStart:e,isEnd:f}):void 0}function F(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function G(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days")})}function H(a,c,d){return b.duration(Math.round(a.diff(c,d,!0)),d)}function I(a,b){var c,d,e;for(c=0;c<Ra.length&&(d=Ra[c],e=J(d,a,b),!(e>=1&&ba(e)));c++);return d}function J(a,c,d){return null!=d?d.diff(c,a,!0):b.isDuration(c)?c.as(a):c.end.diff(c.start,a,!0)}function K(a,b,c){var d;return N(c)?(b-a)/c:(d=c.asMonths(),Math.abs(d)>=1&&ba(d)?b.diff(a,"months",!0)/d:b.diff(a,"days",!0)/c.asDays())}function L(a,b){var c,d;return N(a)||N(b)?a/b:(c=a.asMonths(),d=b.asMonths(),Math.abs(c)>=1&&ba(c)&&Math.abs(d)>=1&&ba(d)?c/d:a.asDays()/b.asDays())}function M(a,c){var d;return N(a)?b.duration(a*c):(d=a.asMonths(),Math.abs(d)>=1&&ba(d)?b.duration({months:d*c}):b.duration({days:a.asDays()*c}))}function N(a){return Boolean(a.hours()||a.minutes()||a.seconds()||a.milliseconds())}function O(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function P(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function Q(a,b){var c,d,e,f,g,h,i={};if(b)for(c=0;c<b.length;c++){for(d=b[c],e=[],f=a.length-1;f>=0;f--)if(g=a[f][d],"object"==typeof g)e.unshift(g);else if(void 0!==g){i[d]=g;break}e.length&&(i[d]=Q(e))}for(c=a.length-1;c>=0;c--){h=a[c];for(d in h)d in i||(i[d]=h[d])}return i}function R(a){var b=function(){};return b.prototype=a,new b}function S(a,b){for(var c in a)U(a,c)&&(b[c]=a[c])}function T(a,b){var c,d,e=["constructor","toString","valueOf"];for(c=0;c<e.length;c++)d=e[c],a[d]!==Object.prototype[d]&&(b[d]=a[d])}function U(a,b){return Va.call(a,b)}function V(b){return/undefined|null|boolean|number|string/.test(a.type(b))}function W(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function X(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function Y(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Z(a){return a.replace(/&.*?;/g,"")}function $(b){var c=[];return a.each(b,function(a,b){null!=b&&c.push(a+":"+b)}),c.join(";")}function _(a){return a.charAt(0).toUpperCase()+a.slice(1)}function aa(a,b){return a-b}function ba(a){return a%1===0}function ca(a,b){var c=a[b];return function(){return c.apply(a,arguments)}}function da(a,b){var c,d,e,f,g=function(){var h=+new Date-f;b>h&&h>0?c=setTimeout(g,b-h):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this,d=arguments,f=+new Date,c||(c=setTimeout(g,b))}}function ea(c,d,e){var f,g,h,i,j=c[0],k=1==c.length&&"string"==typeof j;return b.isMoment(j)?(i=b.apply(null,c),ga(j,i)):O(j)||void 0===j?i=b.apply(null,c):(f=!1,g=!1,k?Wa.test(j)?(j+="-01",c=[j],f=!0,g=!0):(h=Xa.exec(j))&&(f=!h[5],g=!0):a.isArray(j)&&(g=!0),i=d||f?b.utc.apply(b,c):b.apply(null,c),f?(i._ambigTime=!0,i._ambigZone=!0):e&&(g?i._ambigZone=!0:k&&(i.utcOffset?i.utcOffset(j):i.zone(j)))),i._fullCalendar=!0,i}function fa(a,c){var d,e,f=!1,g=!1,h=a.length,i=[];for(d=0;h>d;d++)e=a[d],b.isMoment(e)||(e=Ma.moment.parseZone(e)),f=f||e._ambigTime,g=g||e._ambigZone,i.push(e);for(d=0;h>d;d++)e=i[d],c||!f||e._ambigTime?g&&!e._ambigZone&&(i[d]=e.clone().stripZone()):i[d]=e.clone().stripTime();return i}function ga(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1),a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function ha(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function ia(a,b){return Za.format.call(a,b)}function ja(a,b){return ka(a,pa(b))}function ka(a,b){var c,d="";for(c=0;c<b.length;c++)d+=la(a,b[c]);return d}function la(a,b){var c,d;return"string"==typeof b?b:(c=b.token)?$a[c]?$a[c](a):ia(a,c):b.maybe&&(d=ka(a,b.maybe),d.match(/[1-9]/))?d:""}function ma(a,b,c,d,e){var f;return a=Ma.moment.parseZone(a),b=Ma.moment.parseZone(b),f=(a.localeData||a.lang).call(a),c=f.longDateFormat(c)||c,d=d||" - ",na(a,b,pa(c),d,e)}function na(a,b,c,d,e){var f,g,h,i,j="",k="",l="",m="",n="";for(g=0;g<c.length&&(f=oa(a,b,c[g]),f!==!1);g++)j+=f;for(h=c.length-1;h>g&&(f=oa(a,b,c[h]),f!==!1);h--)k=f+k;for(i=g;h>=i;i++)l+=la(a,c[i]),m+=la(b,c[i]);return(l||m)&&(n=e?m+d+l:l+d+m),j+n+k}function oa(a,b,c){var d,e;return"string"==typeof c?c:(d=c.token)&&(e=_a[d.charAt(0)],e&&a.isSame(b,e))?ia(a,d):!1}function pa(a){return a in ab?ab[a]:ab[a]=qa(a)}function qa(a){for(var b,c=[],d=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;b=d.exec(a);)b[1]?c.push(b[1]):b[2]?c.push({maybe:qa(b[2])}):b[3]?c.push({token:b[3]}):b[5]&&c.push(b[5]);return c}function ra(){}function sa(a,b){return a||b?a&&b?a.grid===b.grid&&a.row===b.row&&a.col===b.col:!1:!0}function ta(a){var b=va(a);return"background"===b||"inverse-background"===b}function ua(a){return"inverse-background"===va(a)}function va(a){return X((a.source||{}).rendering,a.rendering)}function wa(a){var b,c,d={};for(b=0;b<a.length;b++)c=a[b],(d[c._id]||(d[c._id]=[])).push(c);return d}function xa(a,b){return a.eventStartMS-b.eventStartMS}function ya(c){var d,e,f,g,h=Ma.dataAttrPrefix;return h&&(h+="-"),d=c.data(h+"event")||null,d&&(d="object"==typeof d?a.extend({},d):{},e=d.start,null==e&&(e=d.time),f=d.duration,g=d.stick,delete d.start,delete d.time,delete d.duration,delete d.stick),null==e&&(e=c.data(h+"start")),null==e&&(e=c.data(h+"time")),null==f&&(f=c.data(h+"duration")),null==g&&(g=c.data(h+"stick")),e=null!=e?b.duration(e):null,f=null!=f?b.duration(f):null,g=Boolean(g),{eventProps:d,startTime:e,duration:f,stick:g}}function za(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function Aa(a,b){return a.leftCol-b.leftCol}function Ba(a){var b,c,d,e=[];for(b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&Ea(c,e[d]).length;d++);c.level=d,(e[d]||(e[d]=[])).push(c)}return e}function Ca(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)Ea(e,a[f],e.forwardSegs)}function Da(a){var b,c,d=a.forwardSegs,e=0;if(void 0===a.forwardPressure){for(b=0;b<d.length;b++)c=d[b],Da(c),e=Math.max(e,1+c.forwardPressure);a.forwardPressure=e}}function Ea(a,b,c){c=c||[];for(var d=0;d<b.length;d++)Fa(a,b[d])&&c.push(b[d]);return c}function Fa(a,b){return a.bottom>b.top&&a.top<b.bottom}function Ga(c,d){function e(){U?h()&&(k(),i()):f()}function f(){V=O.theme?"ui":"fc",c.addClass("fc"),O.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr"),O.theme?c.addClass("ui-widget"):c.addClass("fc-unthemed"),U=a("<div class='fc-view-container'/>").prependTo(c),S=N.header=new Ja(N,O),T=S.render(),T&&c.prepend(T),i(O.defaultView),O.handleWindowResize&&(Y=da(m,O.windowResizeDelay),a(window).resize(Y))}function g(){W&&W.removeElement(),S.removeElement(),U.remove(),c.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),Y&&a(window).unbind("resize",Y)}function h(){return c.is(":visible")}function i(b){ca++,W&&b&&W.type!==b&&(S.deactivateButton(W.type),H(),W.removeElement(),W=N.view=null),!W&&b&&(W=N.view=ba[b]||(ba[b]=N.instantiateView(b)),W.setElement(a("<div class='fc-view fc-"+b+"-view' />").appendTo(U)),S.activateButton(b)),W&&(Z=W.massageCurrentDate(Z),W.displaying&&Z.isWithin(W.intervalStart,W.intervalEnd)||h()&&(H(),W.display(Z),I(),u(),v(),q())),I(),ca--}function j(a){return h()?(a&&l(),ca++,W.updateSize(!0),ca--,!0):void 0}function k(){h()&&l()}function l(){X="number"==typeof O.contentHeight?O.contentHeight:"number"==typeof O.height?O.height-(T?T.outerHeight(!0):0):Math.round(U.width()/Math.max(O.aspectRatio,.5))}function m(a){!ca&&a.target===window&&W.start&&j(!0)&&W.trigger("windowResize",aa)}function n(){p(),r()}function o(){h()&&(H(),W.displayEvents(ea),I())}function p(){H(),W.clearEvents(),I()}function q(){!O.lazyFetching||$(W.start,W.end)?r():o()}function r(){_(W.start,W.end)}function s(a){ea=a,o()}function t(){o()}function u(){S.updateTitle(W.title)}function v(){var a=N.getNow();a.isWithin(W.intervalStart,W.intervalEnd)?S.disableButton("today"):S.enableButton("today")}function w(a,b){W.select(N.buildSelectRange.apply(N,arguments))}function x(){W&&W.unselect()}function y(){Z=W.computePrevDate(Z),i()}function z(){Z=W.computeNextDate(Z),i()}function A(){Z.add(-1,"years"),i()}function B(){Z.add(1,"years"),i()}function C(){Z=N.getNow(),i()}function D(a){Z=N.moment(a),i()}function E(a){Z.add(b.duration(a)),i()}function F(a,b){var c;b=b||"day",c=N.getViewSpec(b)||N.getUnitViewSpec(b),Z=a,i(c?c.type:null)}function G(){return Z.clone()}function H(){U.css({width:"100%",height:U.height(),overflow:"hidden"})}function I(){U.css({width:"",height:"",overflow:""})}function J(){return N}function K(){return W}function L(a,b){return void 0===b?O[a]:void(("height"==a||"contentHeight"==a||"aspectRatio"==a)&&(O[a]=b,j(!0)))}function M(a,b){var c=Array.prototype.slice.call(arguments,2);return b=b||aa,this.triggerWith(a,b,c),O[a]?O[a].apply(b,c):void 0}var N=this;N.initOptions(d||{});var O=this.options;N.render=e,N.destroy=g,N.refetchEvents=n,N.reportEvents=s,N.reportEventChange=t,N.rerenderEvents=o,N.changeView=i,N.select=w,N.unselect=x,N.prev=y,N.next=z,N.prevYear=A,N.nextYear=B,N.today=C,N.gotoDate=D,N.incrementDate=E,N.zoomTo=F,N.getDate=G,N.getCalendar=J,N.getView=K,N.option=L,N.trigger=M;var P=R(Ia(O.lang));if(O.monthNames&&(P._months=O.monthNames),O.monthNamesShort&&(P._monthsShort=O.monthNamesShort),O.dayNames&&(P._weekdays=O.dayNames),O.dayNamesShort&&(P._weekdaysShort=O.dayNamesShort),null!=O.firstDay){var Q=R(P._week);Q.dow=O.firstDay,P._week=Q}P._fullCalendar_weekCalc=function(a){return"function"==typeof a?a:"local"===a?a:"iso"===a||"ISO"===a?"ISO":void 0}(O.weekNumberCalculation),N.defaultAllDayEventDuration=b.duration(O.defaultAllDayEventDuration),N.defaultTimedEventDuration=b.duration(O.defaultTimedEventDuration),N.moment=function(){var a;return"local"===O.timezone?(a=Ma.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===O.timezone?Ma.moment.utc.apply(null,arguments):Ma.moment.parseZone.apply(null,arguments),"_locale"in a?a._locale=P:a._lang=P,a},N.getIsAmbigTimezone=function(){return"local"!==O.timezone&&"UTC"!==O.timezone},N.rezoneDate=function(a){return N.moment(a.toArray())},N.getNow=function(){var a=O.now;return"function"==typeof a&&(a=a()),N.moment(a)},N.getEventEnd=function(a){return a.end?a.end.clone():N.getDefaultEventEnd(a.allDay,a.start)},N.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(N.defaultAllDayEventDuration):c.add(N.defaultTimedEventDuration),N.getIsAmbigTimezone()&&c.stripZone(),c},N.humanizeDuration=function(a){return(a.locale||a.lang).call(a,O.lang).humanize()},Ka.call(N,O);var S,T,U,V,W,X,Y,Z,$=N.isFetchNeeded,_=N.fetchEvents,aa=c[0],ba={},ca=0,ea=[];Z=null!=O.defaultDate?N.moment(O.defaultDate):N.getNow(),N.getSuggestedViewHeight=function(){return void 0===X&&k(),X},N.isHeightAuto=function(){return"auto"===O.contentHeight||"auto"===O.height},N.initialize()}function Ha(b){a.each(rb,function(a,c){null==b[a]&&(b[a]=c(b))})}function Ia(a){var c=b.localeData||b.langData;return c.call(b,a)||c.call(b,"en")}function Ja(b,c){function d(){var b=c.header;return n=c.theme?"ui":"fc",b?o=a("<div class='fc-toolbar'/>").append(f("left")).append(f("right")).append(f("center")).append('<div class="fc-clear"/>'):void 0}function e(){o.remove(),o=a()}function f(d){var e=a('<div class="fc-'+d+'"/>'),f=c.header[d];return f&&a.each(f.split(" "),function(d){var f,g=a(),h=!0;a.each(this.split(","),function(d,e){var f,i,j,k,l,m,o,q,r,s;"title"==e?(g=g.add(a("<h2>&nbsp;</h2>")),h=!1):((f=(b.options.customButtons||{})[e])?(j=function(a){f.click&&f.click.call(s[0],a)},k="",l=f.text):(i=b.getViewSpec(e))?(j=function(){b.changeView(e)},p.push(e),k=i.buttonTextOverride,l=i.buttonTextDefault):b[e]&&(j=function(){b[e]()},k=(b.overrides.buttonText||{})[e],l=c.buttonText[e]),j&&(m=f?f.themeIcon:c.themeButtonIcons[e],o=f?f.icon:c.buttonIcons[e],q=k?Y(k):m&&c.theme?"<span class='ui-icon ui-icon-"+m+"'></span>":o&&!c.theme?"<span class='fc-icon fc-icon-"+o+"'></span>":Y(l),r=["fc-"+e+"-button",n+"-button",n+"-state-default"],s=a('<button type="button" class="'+r.join(" ")+'">'+q+"</button>").click(function(a){s.hasClass(n+"-state-disabled")||(j(a),(s.hasClass(n+"-state-active")||s.hasClass(n+"-state-disabled"))&&s.removeClass(n+"-state-hover"))}).mousedown(function(){s.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-down")}).mouseup(function(){s.removeClass(n+"-state-down")}).hover(function(){s.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-hover")},function(){s.removeClass(n+"-state-hover").removeClass(n+"-state-down")}),g=g.add(s)))}),h&&g.first().addClass(n+"-corner-left").end().last().addClass(n+"-corner-right").end(),g.length>1?(f=a("<div/>"),h&&f.addClass("fc-button-group"),f.append(g),e.append(f)):e.append(g)}),e}function g(a){o.find("h2").text(a)}function h(a){o.find(".fc-"+a+"-button").addClass(n+"-state-active")}function i(a){o.find(".fc-"+a+"-button").removeClass(n+"-state-active")}function j(a){o.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(n+"-state-disabled")}function k(a){o.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(n+"-state-disabled")}function l(){return p}var m=this;m.render=d,m.removeElement=e,m.updateTitle=g,m.activateButton=h,m.deactivateButton=i,m.disableButton=j,m.enableButton=k,m.getViewsWithButtons=l;var n,o=a(),p=[]}function Ka(c){function d(a,b){return!M||a.clone().stripZone()<M.clone().stripZone()||b.clone().stripZone()>N.clone().stripZone()}function e(a,b){M=a,N=b,U=[];var c=++S,d=R.length;T=d;for(var e=0;d>e;e++)f(R[e],c)}function f(b,c){g(b,function(d){var e,f,g,h=a.isArray(b.events);if(c==S){if(d)for(e=0;e<d.length;e++)f=d[e],g=h?f:s(f,b),g&&U.push.apply(U,x(g));T--,T||O(U)}})}function g(b,d){var e,f,h=Ma.sourceFetchers;for(e=0;e<h.length;e++){if(f=h[e].call(L,b,M.clone(),N.clone(),c.timezone,d),f===!0)return;if("object"==typeof f)return void g(f,d)}var i=b.events;if(i)a.isFunction(i)?(L.pushLoading(),i.call(L,M.clone(),N.clone(),c.timezone,function(a){d(a),L.popLoading()})):a.isArray(i)?d(i):d();else{var j=b.url;if(j){var k,l=b.success,m=b.error,n=b.complete;k=a.isFunction(b.data)?b.data():b.data;var o=a.extend({},k||{}),p=X(b.startParam,c.startParam),q=X(b.endParam,c.endParam),r=X(b.timezoneParam,c.timezoneParam);p&&(o[p]=M.format()),q&&(o[q]=N.format()),c.timezone&&"local"!=c.timezone&&(o[r]=c.timezone),L.pushLoading(),a.ajax(a.extend({},sb,b,{data:o,success:function(b){b=b||[];var c=W(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){W(m,this,arguments),d()},complete:function(){W(n,this,arguments),L.popLoading()}}))}else d()}}function h(a){var b=i(a);b&&(R.push(b),T++,f(b,S))}function i(b){var c,d,e=Ma.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?c={events:b}:"string"==typeof b?c={url:b}:"object"==typeof b&&(c=a.extend({},b)),c){for(c.className?"string"==typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[],a.isArray(c.events)&&(c.origArray=c.events,c.events=a.map(c.events,function(a){return s(a,c)})),d=0;d<e.length;d++)e[d].call(L,c);return c}}function j(b){R=a.grep(R,function(a){return!k(a,b)}),U=a.grep(U,function(a){return!k(a.source,b)}),O(U)}function k(a,b){return a&&b&&l(a)==l(b)}function l(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function m(a){a.start=L.moment(a.start),a.end?a.end=L.moment(a.end):a.end=null,y(a,n(a)),O(U)}function n(b){var c={};return a.each(b,function(a,b){o(a)&&void 0!==b&&V(b)&&(c[a]=b)}),c}function o(a){return!/^_|^(id|allDay|start|end)$/.test(a)}function p(a,b){var c,d,e,f=s(a);if(f){for(c=x(f),d=0;d<c.length;d++)e=c[d],e.source||(b&&(Q.events.push(e),e.source=Q),U.push(e));return O(U),c}return[]}function q(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),U=a.grep(U,b,!0),d=0;d<R.length;d++)a.isArray(R[d].events)&&(R[d].events=a.grep(R[d].events,b,!0));O(U)}function r(b){return a.isFunction(b)?a.grep(U,b):null!=b?(b+="",a.grep(U,function(a){return a._id==b})):U}function s(d,e){var f,g,h,i={};if(c.eventDataTransform&&(d=c.eventDataTransform(d)),e&&e.eventDataTransform&&(d=e.eventDataTransform(d)),a.extend(i,d),e&&(i.source=e),i._id=d._id||(void 0===d.id?"_fc"+tb++:d.id+""),d.className?"string"==typeof d.className?i.className=d.className.split(/\s+/):i.className=d.className:i.className=[],f=d.start||d.date,g=d.end,P(f)&&(f=b.duration(f)),P(g)&&(g=b.duration(g)),d.dow||b.isDuration(f)||b.isDuration(g))i.start=f?b.duration(f):null,i.end=g?b.duration(g):null,i._recurring=!0;else{if(f&&(f=L.moment(f),!f.isValid()))return!1;g&&(g=L.moment(g),g.isValid()||(g=null)),h=d.allDay,void 0===h&&(h=X(e?e.allDayDefault:void 0,c.allDayDefault)),t(f,g,h,i)}return i}function t(a,b,c,d){d.start=a,d.end=b,d.allDay=c,u(d),La(d)}function u(a){v(a),a.end&&!a.end.isAfter(a.start)&&(a.end=null),a.end||(c.forceEventDuration?a.end=L.getDefaultEventEnd(a.allDay,a.start):a.end=null)}function v(a){null==a.allDay&&(a.allDay=!(a.start.hasTime()||a.end&&a.end.hasTime())),a.allDay?(a.start.stripTime(),a.end&&a.end.stripTime()):(a.start.hasTime()||(a.start=L.rezoneDate(a.start)),a.end&&!a.end.hasTime()&&(a.end=L.rezoneDate(a.end)))}function w(b){var c;return b.end||(c=b.allDay,null==c&&(c=!b.start.hasTime()),b=a.extend({},b),b.end=L.getDefaultEventEnd(c,b.start)),b}function x(b,c,d){var e,f,g,h,i,j,k,l,m,n=[];if(c=c||M,d=d||N,b)if(b._recurring){if(f=b.dow)for(e={},g=0;g<f.length;g++)e[f[g]]=!0;for(h=c.clone().stripTime();h.isBefore(d);)(!e||e[h.day()])&&(i=b.start,j=b.end,k=h.clone(),l=null,i&&(k=k.time(i)),j&&(l=h.clone().time(j)),m=a.extend({},b),t(k,l,!i&&!j,m),n.push(m)),h.add(1,"days")}else n.push(b);return n}function y(b,c,d){function e(a,b){return d?H(a,b,d):c.allDay?G(a,b):F(a,b)}var f,g,h,i,j,k,l={};return c=c||{},c.start||(c.start=b.start.clone()),void 0===c.end&&(c.end=b.end?b.end.clone():null),null==c.allDay&&(c.allDay=b.allDay),u(c),f={start:b._start.clone(),end:b._end?b._end.clone():L.getDefaultEventEnd(b._allDay,b._start),allDay:c.allDay},u(f),g=null!==b._end&&null===c.end,h=e(c.start,f.start),c.end?(i=e(c.end,f.end),j=i.subtract(h)):j=null,a.each(c,function(a,b){o(a)&&void 0!==b&&(l[a]=b)}),k=z(r(b._id),g,c.allDay,h,j,l),{dateDelta:h,durationDelta:j,undo:k}}function z(b,c,d,e,f,g){var h=L.getIsAmbigTimezone(),i=[];return e&&!e.valueOf()&&(e=null),f&&!f.valueOf()&&(f=null),a.each(b,function(b,j){var k,l;k={start:j.start.clone(),end:j.end?j.end.clone():null,allDay:j.allDay},a.each(g,function(a){k[a]=j[a]}),l={start:j._start,end:j._end,allDay:d},u(l),c?l.end=null:f&&!l.end&&(l.end=L.getDefaultEventEnd(l.allDay,l.start)),e&&(l.start.add(e),l.end&&l.end.add(e)),f&&l.end.add(f),h&&!l.allDay&&(e||f)&&(l.start.stripZone(),l.end&&l.end.stripZone()),a.extend(j,g,l),La(j),i.push(function(){a.extend(j,k),La(j)})}),function(){for(var a=0;a<i.length;a++)i[a]()}}function A(b){var d,e=c.businessHours,f={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},g=L.getView();return e&&(d=a.extend({},f,"object"==typeof e?e:{})),d?(b&&(d.start=null,d.end=null),x(s(d),g.start,g.end)):[]}function B(a,b){var d=b.source||{},e=X(b.constraint,d.constraint,c.eventConstraint),f=X(b.overlap,d.overlap,c.eventOverlap);return a=w(a),E(a,e,f,b)}function C(a){return E(a,c.selectConstraint,c.selectOverlap)}function D(b,c){var d,e;return c&&(d=a.extend({},c,b),e=x(s(d))[0]),e?B(b,e):(b=w(b),C(b))}function E(b,c,d,e){var f,g,h,i,j,k;if(b=a.extend({},b),b.start=b.start.clone().stripZone(),b.end=b.end.clone().stripZone(),null!=c){for(f=I(c),g=!1,i=0;i<f.length;i++)if(J(f[i],b)){g=!0;break}if(!g)return!1}for(h=L.getPeerEvents(e,b),i=0;i<h.length;i++)if(j=h[i],K(j,b)){if(d===!1)return!1;if("function"==typeof d&&!d(j,e))return!1;if(e){if(k=X(j.overlap,(j.source||{}).overlap),k===!1)return!1;if("function"==typeof k&&!k(e,j))return!1}}return!0}function I(a){return"businessHours"===a?A():"object"==typeof a?x(s(a)):r(a)}function J(a,b){var c=a.start.clone().stripZone(),d=L.getEventEnd(a).stripZone();return b.start>=c&&b.end<=d}function K(a,b){var c=a.start.clone().stripZone(),d=L.getEventEnd(a).stripZone();return b.start<d&&b.end>c}var L=this;L.isFetchNeeded=d,L.fetchEvents=e,L.addEventSource=h,L.removeEventSource=j,L.updateEvent=m,L.renderEvent=p,L.removeEvents=q,L.clientEvents=r,L.mutateEvent=y,L.normalizeEventRange=u,L.normalizeEventRangeTimes=v,L.ensureVisibleEventRange=w;var M,N,O=L.reportEvents,Q={events:[]},R=[Q],S=0,T=0,U=[];a.each((c.events?[c.events]:[]).concat(c.eventSources||[]),function(a,b){var c=i(b);c&&R.push(c)}),L.getBusinessHoursEvents=A,L.isEventRangeAllowed=B,L.isSelectionRangeAllowed=C,L.isExternalDropRangeAllowed=D,L.getEventCache=function(){return U}}function La(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}var Ma=a.fullCalendar={version:"2.4.0"},Na=Ma.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var g,h=a(f),i=h.data("fullCalendar");"string"==typeof b?i&&a.isFunction(i[b])&&(g=i[b].apply(i,c),e||(d=g),"destroy"===b&&h.removeData("fullCalendar")):i||(i=new nb(h,b),h.data("fullCalendar",i),i.render())}),d};var Oa=["header","buttonText","buttonIcons","themeButtonIcons"];Ma.intersectionToSeg=E,Ma.applyAll=W,Ma.debounce=da,Ma.isInt=ba,Ma.htmlEscape=Y,Ma.cssToStr=$,Ma.proxy=ca,Ma.capitaliseFirstLetter=_,Ma.getClientRect=p,Ma.getContentRect=q,Ma.getScrollbarWidths=r;var Pa=null;Ma.intersectRects=w,Ma.parseFieldSpecs=A,Ma.compareByFieldSpecs=B,Ma.compareByFieldSpec=C,Ma.flexibleCompare=D,Ma.computeIntervalUnit=I,Ma.divideRangeByDuration=K,Ma.divideDurationByDuration=L,Ma.multiplyDuration=M,Ma.durationHasTime=N;var Qa=["sun","mon","tue","wed","thu","fri","sat"],Ra=["year","month","week","day","hour","minute","second","millisecond"];Ma.log=function(){var a=window.console;return a&&a.log?a.log.apply(a,arguments):void 0},Ma.warn=function(){var a=window.console;return a&&a.warn?a.warn.apply(a,arguments):Ma.log.apply(Ma,arguments)};var Sa,Ta,Ua,Va={}.hasOwnProperty,Wa=/^\s*\d{4}-\d\d$/,Xa=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Ya=b.fn,Za=a.extend({},Ya);Ma.moment=function(){return ea(arguments)},Ma.moment.utc=function(){var a=ea(arguments,!0);return a.hasTime()&&a.utc(),a},Ma.moment.parseZone=function(){return ea(arguments,!0,!0)},Ya.clone=function(){var a=Za.clone.apply(this,arguments);return ga(this,a),this._fullCalendar&&(a._fullCalendar=!0),a},Ya.week=Ya.weeks=function(a){var b=(this._locale||this._lang)._fullCalendar_weekCalc;return null==a&&"function"==typeof b?b(this):"ISO"===b?Za.isoWeek.apply(this,arguments):Za.week.apply(this,arguments)},Ya.time=function(a){if(!this._fullCalendar)return Za.time.apply(this,arguments);if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},Ya.stripTime=function(){var a;return this._ambigTime||(a=this.toArray(),this.utc(),Ta(this,a.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Ya.hasTime=function(){return!this._ambigTime},Ya.stripZone=function(){var a,b;return this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),Ta(this,a),this._ambigTime=b||!1,this._ambigZone=!0),this},Ya.hasZone=function(){return!this._ambigZone},Ya.local=function(){var a=this.toArray(),b=this._ambigZone;return Za.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,b&&Ua(this,a),this},Ya.utc=function(){return Za.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},a.each(["zone","utcOffset"],function(a,b){Za[b]&&(Ya[b]=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),Za[b].apply(this,arguments)})}),Ya.format=function(){return this._fullCalendar&&arguments[0]?ja(this,arguments[0]):this._ambigTime?ia(this,"YYYY-MM-DD"):this._ambigZone?ia(this,"YYYY-MM-DD[T]HH:mm:ss"):Za.format.apply(this,arguments)},Ya.toISOString=function(){return this._ambigTime?ia(this,"YYYY-MM-DD"):this._ambigZone?ia(this,"YYYY-MM-DD[T]HH:mm:ss"):Za.toISOString.apply(this,arguments)},Ya.isWithin=function(a,b){var c=fa([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},Ya.isSame=function(a,b){var c;return this._fullCalendar?b?(c=fa([this,a],!0),Za.isSame.call(c[0],c[1],b)):(a=Ma.moment.parseZone(a),Za.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)):Za.isSame.apply(this,arguments)},a.each(["isBefore","isAfter"],function(a,b){Ya[b]=function(a,c){var d;return this._fullCalendar?(d=fa([this,a]),Za[b].call(d[0],d[1],c)):Za[b].apply(this,arguments)}}),Sa="_d"in b()&&"updateOffset"in b,Ta=Sa?function(a,c){a._d.setTime(Date.UTC.apply(Date,c)),b.updateOffset(a,!1)}:ha,Ua=Sa?function(a,c){a._d.setTime(+new Date(c[0]||0,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0)),b.updateOffset(a,!1)}:ha;var $a={t:function(a){return ia(a,"a").charAt(0)},T:function(a){return ia(a,"A").charAt(0)}};Ma.formatRange=ma;var _a={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ab={};Ma.Class=ra,ra.extend=function(a){var b,c=this;return a=a||{},U(a,"constructor")&&(b=a.constructor),"function"!=typeof b&&(b=a.constructor=function(){c.apply(this,arguments)}),b.prototype=R(c.prototype),S(a,b.prototype),T(a,b.prototype),S(c,b),b},ra.mixin=function(a){S(a.prototype||a,this.prototype)};var bb=Ma.Emitter=ra.extend({callbackHash:null,on:function(a,b){return this.getCallbacks(a).add(b),this},off:function(a,b){return this.getCallbacks(a).remove(b),this},trigger:function(a){var b=Array.prototype.slice.call(arguments,1);return this.triggerWith(a,this,b),this},triggerWith:function(a,b,c){var d=this.getCallbacks(a);return d.fireWith(b,c),this},getCallbacks:function(b){var c;return this.callbackHash||(this.callbackHash={}),c=this.callbackHash[b],c||(c=this.callbackHash[b]=a.Callbacks()),c}}),cb=ra.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&a(document).on("mousedown",this.documentMousedownProxy=ca(this,"documentMousedown"))},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),a(document).off("mousedown",this.documentMousedownProxy)},position:function(){var b,c,d,e,f,g=this.options,h=this.el.offsetParent().offset(),i=this.el.outerWidth(),j=this.el.outerHeight(),k=a(window),l=n(this.el);e=g.top||0,f=void 0!==g.left?g.left:void 0!==g.right?g.right-i:0,l.is(window)||l.is(document)?(l=k,b=0,c=0):(d=l.offset(),b=d.top,c=d.left),b+=k.scrollTop(),c+=k.scrollLeft(),g.viewportConstrain!==!1&&(e=Math.min(e,b+l.outerHeight()-j-this.margin),e=Math.max(e,b+this.margin),f=Math.min(f,c+l.outerWidth()-i-this.margin),f=Math.max(f,c+this.margin)),this.el.css({top:e-h.top,left:f-h.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),db=ra.extend({
grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(a){this.grid=a},build:function(){this.grid.build(),this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.grid.clear(),this.rowCoords=null,this.colCoords=null},getCell:function(b,c){var d,e,f,g=this.rowCoords,h=g.length,i=this.colCoords,j=i.length,k=null,l=null;if(this.inBounds(b,c)){for(d=0;h>d;d++)if(e=g[d],c>=e.top&&c<e.bottom){k=d;break}for(d=0;j>d;d++)if(e=i[d],b>=e.left&&b<e.right){l=d;break}if(null!==k&&null!==l)return f=this.grid.getCell(k,l),f.grid=this.grid,a.extend(f,g[k],i[l]),f}return null},computeBounds:function(){this.bounds=this.containerEl?p(this.containerEl):null},inBounds:function(a,b){var c=this.bounds;return c?a>=c.left&&a<c.right&&b>=c.top&&b<c.bottom:!0}}),eb=ra.extend({coordMaps:null,constructor:function(a){this.coordMaps=a},build:function(){var a,b=this.coordMaps;for(a=0;a<b.length;a++)b[a].build()},getCell:function(a,b){var c,d=this.coordMaps,e=null;for(c=0;c<d.length&&!e;c++)e=d[c].getCell(a,b);return e},clear:function(){var a,b=this.coordMaps;for(a=0;a<b.length;a++)b[a].clear()}}),fb=Ma.DragListener=ra.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a){a=a||{},this.options=a,this.subjectEl=a.subjectEl},mousedown:function(a){v(a)&&(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(b){var c;this.isListening||(b&&this.options.scroll&&(c=n(a(b.target)),c.is(window)||c.is(document)||(this.scrollEl=c,this.scrollHandlerProxy=da(ca(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),a(document).on("mousemove",this.mousemoveProxy=ca(this,"mousemove")).on("mouseup",this.mouseupProxy=ca(this,"mouseup")).on("selectstart",this.preventDefault),b?(this.originX=b.pageX,this.originY=b.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(b))},listenStart:function(a){this.trigger("listenStart",a)},mousemove:function(a){var b,c,d=a.pageX-this.originX,e=a.pageY-this.originY;this.isDragging||(b=this.options.distance||1,c=d*d+e*e,c>=b*b&&this.startDrag(a)),this.isDragging&&this.drag(d,e,a)},startDrag:function(a){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(a))},dragStart:function(a){var b=this.subjectEl;this.trigger("dragStart",a),(this.subjectHref=b?b.attr("href"):null)&&b.removeAttr("href")},drag:function(a,b,c){this.trigger("drag",a,b,c),this.updateScroll(c)},mouseup:function(a){this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.dragStop(a),this.isDragging=!1)},dragStop:function(a){var b=this;this.trigger("dragStop",a),setTimeout(function(){b.subjectHref&&b.subjectEl.attr("href",b.subjectHref)},0)},stopListening:function(b){this.stopDrag(b),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),a(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(b))},listenStop:function(a){this.trigger("listenStop",a)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a=this.scrollEl;this.scrollBounds=a?o(a):null},updateScroll:function(a){var b,c,d,e,f=this.scrollSensitivity,g=this.scrollBounds,h=0,i=0;g&&(b=(f-(a.pageY-g.top))/f,c=(f-(g.bottom-a.pageY))/f,d=(f-(a.pageX-g.left))/f,e=(f-(g.right-a.pageX))/f,b>=0&&1>=b?h=b*this.scrollSpeed*-1:c>=0&&1>=c&&(h=c*this.scrollSpeed),d>=0&&1>=d?i=d*this.scrollSpeed*-1:e>=0&&1>=e&&(i=e*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(a,b){this.scrollTopVel=a,this.scrollLeftVel=b,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(ca(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;this.scrollTopVel<0?a.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?a.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),gb=fb.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(a,b){fb.prototype.constructor.call(this,b),this.coordMap=a},listenStart:function(a){var b,c,d,e=this.subjectEl;fb.prototype.listenStart.apply(this,arguments),this.computeCoords(),a?(c={left:a.pageX,top:a.pageY},d=c,e&&(b=o(e),d=x(d,b)),this.origCell=this.getCell(d.left,d.top),e&&this.options.subjectCenter&&(this.origCell&&(b=w(this.origCell,b)||b),d=y(b)),this.coordAdjust=z(d,c)):(this.origCell=null,this.coordAdjust=null)},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},dragStart:function(a){var b;fb.prototype.dragStart.apply(this,arguments),b=this.getCell(a.pageX,a.pageY),b&&this.cellOver(b)},drag:function(a,b,c){var d;fb.prototype.drag.apply(this,arguments),d=this.getCell(c.pageX,c.pageY),sa(d,this.cell)||(this.cell&&this.cellOut(),d&&this.cellOver(d))},dragStop:function(){this.cellDone(),fb.prototype.dragStop.apply(this,arguments)},cellOver:function(a){this.cell=a,this.trigger("cellOver",a,sa(a,this.origCell),this.origCell)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cellDone(),this.cell=null)},cellDone:function(){this.cell&&this.trigger("cellDone",this.cell)},listenStop:function(){fb.prototype.listenStop.apply(this,arguments),this.origCell=this.cell=null,this.coordMap.clear()},scrollStop:function(){fb.prototype.scrollStop.apply(this,arguments),this.computeCoords()},getCell:function(a,b){return this.coordAdjust&&(a+=this.coordAdjust.left,b+=this.coordAdjust.top),this.coordMap.getCell(a,b)}}),hb=ra.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()},start:function(b){this.isFollowing||(this.isFollowing=!0,this.mouseY0=b.pageY,this.mouseX0=b.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),a(document).on("mousemove",this.mousemoveProxy=ca(this,"mousemove")))},stop:function(b,c){function d(){this.isAnimating=!1,e.removeElement(),this.top0=this.left0=null,c&&c()}var e=this,f=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,a(document).off("mousemove",this.mousemoveProxy),b&&f&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:f,complete:d})):d())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),a},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0,this.leftDelta=a.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),ib=ra.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(a){this.view=a,this.isRTL=a.opt("isRTL")},rowHtml:function(a,b){var c,d,e=this.getHtmlRenderer("cell",a),f="";for(b=b||0,c=0;c<this.colCnt;c++)d=this.getCell(b,c),f+=e(d);return f=this.bookendCells(f,a,b),"<tr>"+f+"</tr>"},bookendCells:function(a,b,c){var d=this.getHtmlRenderer("intro",b)(c||0),e=this.getHtmlRenderer("outro",b)(c||0),f=this.isRTL?e:d,g=this.isRTL?d:e;return"string"==typeof a?f+a+g:a.prepend(f).append(g)},getHtmlRenderer:function(a,b){var c,d,e,f,g=this.view;return c=a+"Html",b&&(d=b+_(a)+"Html"),d&&(f=g[d])?e=g:d&&(f=this[d])?e=this:(f=g[c])?e=g:(f=this[c])&&(e=this),"function"==typeof f?function(){return f.apply(e,arguments)||""}:function(){return f||""}}}),jb=Ma.Grid=ib.extend({start:null,end:null,rowCnt:0,colCnt:0,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){ib.apply(this,arguments),this.coordMap=new db(this),this.elsByFill={},this.externalDragStartProxy=ca(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(a){this.start=a.start.clone(),this.end=a.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var a,b,c=this.view;this.colHeadFormat=c.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=c.opt("eventTimeFormat")||c.opt("timeFormat")||this.computeEventTimeFormat(),a=c.opt("displayEventTime"),null==a&&(a=this.computeDisplayEventTime()),b=c.opt("displayEventEnd"),null==b&&(b=this.computeDisplayEventEnd()),this.displayEventTime=a,this.displayEventEnd=b},build:function(){},clear:function(){},rangeToSegs:function(a){},diffDates:function(a,b){return this.largeUnit?H(a,b,this.largeUnit):F(a,b)},getCell:function(b,c){var d;return null==c&&("number"==typeof b?(c=b%this.colCnt,b=Math.floor(b/this.colCnt)):(c=b.col,b=b.row)),d={row:b,col:c},a.extend(d,this.getRowData(b),this.getColData(c)),a.extend(d,this.computeCellRange(d)),d},computeCellRange:function(a){var b=this.computeCellDate(a);return{start:b,end:b.clone().add(this.cellDuration)}},computeCellDate:function(a){},getRowData:function(a){return{}},getColData:function(a){return{}},getRowEl:function(a){},getColEl:function(a){},getCellDayEl:function(a){return this.getColEl(a.col)||this.getRowEl(a.row)},computeRowCoords:function(){var a,b,c,d=[];for(a=0;a<this.rowCnt;a++)b=this.getRowEl(a),c=b.offset().top,d.push({top:c,bottom:c+b.outerHeight()});return d},computeColCoords:function(){var a,b,c,d=[];for(a=0;a<this.colCnt;a++)b=this.getColEl(a),c=b.offset().left,d.push({left:c,right:c+b.outerWidth()});return d},setElement:function(b){var c=this;this.el=b,b.on("mousedown",function(b){a(b.target).is(".fc-event-container *, .fc-more")||a(b.target).closest(".fc-popover").length||c.dayMousedown(b)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){a(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){a(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(a){var b,c,d=this,e=this.view,f=e.opt("selectable"),i=new gb(this.coordMap,{scroll:e.opt("dragScroll"),dragStart:function(){e.unselect()},cellOver:function(a,e,h){h&&(b=e?a:null,f&&(c=d.computeSelection(h,a),c?d.renderSelection(c):g()))},cellOut:function(a){b=null,c=null,d.unrenderSelection(),h()},listenStop:function(a){b&&e.triggerDayClick(b,d.getCellDayEl(b),a),c&&e.reportSelection(c,a),h()}});i.mousedown(a)},renderRangeHelper:function(a,b){var c=this.fabricateHelperEvent(a,b);this.renderHelper(c,b)},fabricateHelperEvent:function(a,b){var c=b?R(b.event):{};return c.start=a.start.clone(),c.end=a.end?a.end.clone():null,c.allDay=null,this.view.calendar.normalizeEventRange(c),c.className=(c.className||[]).concat("fc-helper"),b||(c.editable=!1),c},renderHelper:function(a,b){},unrenderHelper:function(){},renderSelection:function(a){this.renderHighlight(this.selectionRangeToSegs(a))},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(a,b){var c,d=[a.start,a.end,b.start,b.end];return d.sort(aa),c={start:d[0].clone(),end:d[3].clone()},this.view.calendar.isSelectionRangeAllowed(c)?c:null},selectionRangeToSegs:function(a){return this.rangeToSegs(a)},renderHighlight:function(a){this.renderFill("highlight",a)},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a,b){},unrenderFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(b,c){var d,e=this,f=this[b+"SegEl"],g="",h=[];if(c.length){for(d=0;d<c.length;d++)g+=this.fillSegHtml(b,c[d]);a(g).each(function(b,d){var g=c[b],i=a(d);f&&(i=f.call(e,g,i)),i&&(i=a(i),i.is(e.fillSegTag)&&(g.el=i,h.push(g)))})}return h},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegCss"],e=c?c.call(this,b):[],f=$(d?d.call(this,b):{});return"<"+this.fillSegTag+(e.length?' class="'+e.join(" ")+'"':"")+(f?' style="'+f+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a){var b=this.view,c=a.start;return'<th class="fc-day-header '+b.widgetHeaderClass+" fc-"+Qa[c.day()]+'">'+Y(c.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(a){var b=this.view,c=a.start,d=this.getDayClasses(c);return d.unshift("fc-day",b.widgetContentClass),'<td class="'+d.join(" ")+'" data-date="'+c.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),d=["fc-"+Qa[a.day()]];return 1==b.intervalDuration.as("months")&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month"),a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):c>a?d.push("fc-past"):d.push("fc-future"),d}});jb.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(a){var b,c,d=this.eventsToSegs(a),e=[],f=[];for(b=0;b<d.length;b++)c=d[b],ta(c.event)?e.push(c):f.push(c);e=this.renderBgSegs(e)||e,f=this.renderFgSegs(f)||f,this.segs=e.concat(f)},unrenderEvents:function(){this.triggerSegMouseout(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},unrenderFgSegs:function(){},renderFgSegEls:function(b,c){var d,e=this.view,f="",g=[];if(b.length){for(d=0;d<b.length;d++)f+=this.fgSegHtml(b[d],c);a(f).each(function(c,d){var f=b[c],h=e.resolveEventEl(f.event,a(d));h&&(h.data("fc-seg",f),f.el=h,g.push(f))})}return g},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegCss:function(a){var b=this.view,c=a.event,d=c.source||{};return{"background-color":c.backgroundColor||c.color||d.backgroundColor||d.color||b.opt("eventBackgroundColor")||b.opt("eventColor")}},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var b=this,c=this.view;a.each({mouseenter:function(a,c){b.triggerSegMouseover(a,c)},mouseleave:function(a,c){b.triggerSegMouseout(a,c)},click:function(a,b){return c.trigger("eventClick",this,a.event,b)},mousedown:function(d,e){a(e.target).is(".fc-resizer")&&c.isEventResizable(d.event)?b.segResizeMousedown(d,e,a(e.target).is(".fc-start-resizer")):c.isEventDraggable(d.event)&&b.segDragMousedown(d,e)}},function(c,d){b.el.on(c,".fc-event-container > *",function(c){var e=a(this).data("fc-seg");return!e||b.isDraggingSeg||b.isResizingSeg?void 0:d.call(this,e,c)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(a,b){var c,d=this,e=this.view,f=e.calendar,i=a.el,j=a.event,k=new hb(a.el,{parentEl:e.el,opacity:e.opt("dragOpacity"),revertDuration:e.opt("dragRevertDuration"),zIndex:2}),l=new gb(e.coordMap,{distance:5,scroll:e.opt("dragScroll"),subjectEl:i,subjectCenter:!0,listenStart:function(a){k.hide(),k.start(a)},dragStart:function(b){d.triggerSegMouseout(a,b),d.segDragStart(a,b),e.hideEvent(j)},cellOver:function(b,h,i){a.cell&&(i=a.cell),c=d.computeEventDrop(i,b,j),c&&!f.isEventRangeAllowed(c,j)&&(g(),c=null),c&&e.renderDrag(c,a)?k.hide():k.show(),h&&(c=null)},cellOut:function(){e.unrenderDrag(),k.show(),c=null},cellDone:function(){h()},dragStop:function(b){k.stop(!c,function(){e.unrenderDrag(),e.showEvent(j),d.segDragStop(a,b),c&&e.reportEventDrop(j,c,this.largeUnit,i,b)})},listenStop:function(){k.stop()}});l.mousedown(b)},segDragStart:function(a,b){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",a.el[0],a.event,b,{})},segDragStop:function(a,b){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",a.el[0],a.event,b,{})},computeEventDrop:function(a,b,c){var d,e,f=this.view.calendar,g=a.start,h=b.start;return g.hasTime()===h.hasTime()?(d=this.diffDates(h,g),c.allDay&&N(d)?(e={start:c.start.clone(),end:f.getEventEnd(c),allDay:!1},f.normalizeEventRangeTimes(e)):e={start:c.start.clone(),end:c.end?c.end.clone():null,allDay:c.allDay},e.start.add(d),e.end&&e.end.add(d)):e={start:h.clone(),end:null,allDay:!h.hasTime()},e},applyDragOpacity:function(a){var b=this.view.opt("dragOpacity");null!=b&&a.each(function(a,c){c.style.opacity=b})},externalDragStart:function(b,c){var d,e,f=this.view;f.opt("droppable")&&(d=a((c?c.item:null)||b.target),e=f.opt("dropAccept"),(a.isFunction(e)?e.call(d[0],d):d.is(e))&&(this.isDraggingExternal||this.listenToExternalDrag(d,b,c)))},listenToExternalDrag:function(a,b,c){var d,e,f=this,i=ya(a);d=new gb(this.coordMap,{listenStart:function(){f.isDraggingExternal=!0},cellOver:function(a){e=f.computeExternalDrop(a,i),e?f.renderDrag(e):g()},cellOut:function(){e=null,f.unrenderDrag(),h()},dragStop:function(){f.unrenderDrag(),h(),e&&f.view.reportExternalDrop(i,e,a,b,c)},listenStop:function(){f.isDraggingExternal=!1}}),d.startDrag(b)},computeExternalDrop:function(a,b){var c={start:a.start.clone(),end:null};return b.startTime&&!c.start.hasTime()&&c.start.time(b.startTime),b.duration&&(c.end=c.start.clone().add(b.duration)),this.view.calendar.isExternalDropRangeAllowed(c,b.eventProps)?c:null},renderDrag:function(a,b){},unrenderDrag:function(){},segResizeMousedown:function(a,b,c){var d,e,f=this,i=this.view,j=i.calendar,k=a.el,l=a.event,m=j.getEventEnd(l);d=new gb(this.coordMap,{distance:5,scroll:i.opt("dragScroll"),subjectEl:k,dragStart:function(b){f.triggerSegMouseout(a,b),f.segResizeStart(a,b)},cellOver:function(b,d,h){e=c?f.computeEventStartResize(h,b,l):f.computeEventEndResize(h,b,l),e&&(j.isEventRangeAllowed(e,l)?e.start.isSame(l.start)&&e.end.isSame(m)&&(e=null):(g(),e=null)),e&&(i.hideEvent(l),f.renderEventResize(e,a))},cellOut:function(){e=null},cellDone:function(){f.unrenderEventResize(),i.showEvent(l),h()},dragStop:function(b){f.segResizeStop(a,b),e&&i.reportEventResize(l,e,this.largeUnit,k,b)}}),d.mousedown(b)},segResizeStart:function(a,b){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",a.el[0],a.event,b,{})},segResizeStop:function(a,b){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",a.el[0],a.event,b,{})},computeEventStartResize:function(a,b,c){return this.computeEventResize("start",a,b,c)},computeEventEndResize:function(a,b,c){return this.computeEventResize("end",a,b,c)},computeEventResize:function(a,b,c,d){var e,f,g=this.view.calendar,h=this.diffDates(c[a],b[a]);return e={start:d.start.clone(),end:g.getEventEnd(d),allDay:d.allDay},e.allDay&&N(h)&&(e.allDay=!1,g.normalizeEventRangeTimes(e)),e[a].add(h),e.start.isBefore(e.end)||(f=d.allDay?g.defaultAllDayEventDuration:g.defaultTimedEventDuration,this.cellDuration&&this.cellDuration<f&&(f=this.cellDuration),"start"==a?e.start=e.end.clone().subtract(f):e.end=e.start.clone().add(f)),e},renderEventResize:function(a,b){},unrenderEventResize:function(){},getEventTimeText:function(a,b,c){return null==b&&(b=this.eventTimeFormat),null==c&&(c=this.displayEventEnd),this.displayEventTime&&a.start.hasTime()?c&&a.end?this.view.formatRange(a,b):a.start.format(b):""},getSegClasses:function(a,b,c){var d=a.event,e=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);return b&&e.push("fc-draggable"),c&&e.push("fc-resizable"),e},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor");return{"background-color":a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f,"border-color":a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f,color:a.textColor||c.textColor||b.opt("eventTextColor")}},eventsToSegs:function(a,b){var c,d=this.eventsToRanges(a),e=[];for(c=0;c<d.length;c++)e.push.apply(e,this.eventRangeToSegs(d[c],b));return e},eventsToRanges:function(b){var c=this,d=wa(b),e=[];return a.each(d,function(a,b){b.length&&e.push.apply(e,ua(b[0])?c.eventsToInverseRanges(b):c.eventsToNormalRanges(b))}),e},eventsToNormalRanges:function(a){var b,c,d,e,f=this.view.calendar,g=[];for(b=0;b<a.length;b++)c=a[b],d=c.start.clone().stripZone(),e=f.getEventEnd(c).stripZone(),g.push({event:c,start:d,end:e,eventStartMS:+d,eventDurationMS:e-d});return g},eventsToInverseRanges:function(a){var b,c,d=this.view,e=d.start.clone().stripZone(),f=d.end.clone().stripZone(),g=this.eventsToNormalRanges(a),h=[],i=a[0],j=e;for(g.sort(xa),b=0;b<g.length;b++)c=g[b],c.start>j&&h.push({event:i,start:j,end:c.start}),j=c.end;return f>j&&h.push({event:i,start:j,end:f}),h},eventRangeToSegs:function(a,b){var c,d,e;for(a=this.view.calendar.ensureVisibleEventRange(a),c=b?b(a):this.rangeToSegs(a),d=0;d<c.length;d++)e=c[d],e.event=a.event,e.eventStartMS=a.eventStartMS,e.eventDurationMS=a.eventDurationMS;return c},sortSegs:function(a){a.sort(ca(this,"compareSegs"))},compareSegs:function(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||B(a.event,b.event,this.view.eventOrderSpecs)}}),Ma.dataAttrPrefix="";var kb=jb.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){jb.apply(this,arguments),this.cellDuration=b.duration(1,"day")},renderDates:function(a){var b,c,d,e=this.view,f=this.rowCnt,g=this.colCnt,h=f*g,i="";for(b=0;f>b;b++)i+=this.dayRowHtml(b,a);for(this.el.html(i),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),c=0;h>c;c++)d=this.getCell(c),e.trigger("dayRender",null,d.start,this.dayEls.eq(c))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents(!0),b=this.eventsToSegs(a);this.renderFill("businessHours",b,"bgevent")},dayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a){return this.bgCellHtml(a)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){var a,b,c,d;if(this.updateCellDates(),a=this.cellDates,this.breakOnWeeks){for(b=a[0].day(),d=1;d<a.length&&a[d].day()!=b;d++);c=Math.ceil(a.length/d)}else c=1,d=a.length;this.rowCnt=c,this.colCnt=d},updateCellDates:function(){for(var a=this.view,b=this.start.clone(),c=[],d=-1,e=[];b.isBefore(this.end);)a.isHiddenDay(b)?e.push(d+.5):(d++,e.push(d),c.push(b.clone())),b.add(1,"days");this.cellDates=c,this.dayToCellOffsets=e},computeCellDate:function(a){var b=this.colCnt,c=a.row*b+(this.isRTL?b-a.col-1:a.col);return this.cellDates[c].clone()},getRowEl:function(a){return this.rowEls.eq(a)},getColEl:function(a){return this.dayEls.eq(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.colCnt+a.col)},computeRowCoords:function(){var a=jb.prototype.computeRowCoords.call(this);return a[a.length-1].bottom+=this.bottomCoordPadding,a},rangeToSegs:function(a){var b,c,d,e,f,g,h,i,j,k,l=this.isRTL,m=this.rowCnt,n=this.colCnt,o=[];for(a=this.view.computeDayRange(a),b=this.dateToCellOffset(a.start),c=this.dateToCellOffset(a.end.subtract(1,"days")),d=0;m>d;d++)e=d*n,f=e+n-1,i=Math.max(e,b),j=Math.min(f,c),i=Math.ceil(i),j=Math.floor(j),j>=i&&(g=i===b,h=j===c,i-=e,j-=e,k={row:d,isStart:g,isEnd:h},l?(k.leftCol=n-j-1,k.rightCol=n-i-1):(k.leftCol=i,k.rightCol=j),o.push(k));return o},dateToCellOffset:function(a){var b=this.dayToCellOffsets,c=a.diff(this.start,"days");return 0>c?b[0]-1:c>=b.length?b[b.length-1]+1:b[c]},renderDrag:function(a,b){return this.renderHighlight(this.eventRangeToSegs(a)),b&&!b.el.closest(this.el).length?(this.renderRangeHelper(a,b),this.applyDragOpacity(this.helperEls),!0):void 0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(a,b){this.renderHighlight(this.eventRangeToSegs(a)),this.renderRangeHelper(a,b)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(b,c){var d,e=[],f=this.eventsToSegs([b]);f=this.renderFgSegEls(f),d=this.renderSegRows(f),this.rowEls.each(function(b,f){var g,h=a(f),i=a('<div class="fc-helper-skeleton"><table/></div>');g=c&&c.row===b?c.el.position().top:h.find(".fc-content-skeleton tbody").position().top,i.css("top",g).find("table").append(d[b].tbodyEl),h.append(i),e.push(i[0])}),this.helperEls=a(e)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(b,c,d){var e,f,g,h=[];for(c=this.renderFillSegEls(b,c),e=0;e<c.length;e++)f=c[e],g=this.renderFillRow(b,f,d),this.rowEls.eq(f.row).append(g),h.push(g[0]);return this.elsByFill[b]=a(h),c},renderFillRow:function(b,c,d){var e,f,g=this.colCnt,h=c.leftCol,i=c.rightCol+1;return d=d||b.toLowerCase(),e=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),f=e.find("tr"),h>0&&f.append('<td colspan="'+h+'"/>'),f.append(c.el.attr("colspan",i-h)),g>i&&f.append('<td colspan="'+(g-i)+'"/>'),this.bookendCells(f,b),e}});kb.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),jb.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return jb.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var c=a.grep(b,function(a){return a.event.allDay});return jb.prototype.renderBgSegs.call(this,c)},renderFgSegs:function(b){var c;return b=this.renderFgSegEls(b),c=this.rowStructs=this.renderSegRows(b),this.rowEls.each(function(b,d){a(d).find(".fc-content-skeleton > table").append(c[b].tbodyEl)}),b},unrenderFgSegs:function(){for(var a,b=this.rowStructs||[];a=b.pop();)a.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b,c,d=[];for(b=this.groupSegRows(a),c=0;c<b.length;c++)d.push(this.renderSegRow(c,b[c]));return d},fgSegHtml:function(a,b){var c,d,e=this.view,f=a.event,g=e.isEventDraggable(f),h=!b&&f.allDay&&a.isStart&&e.isEventResizableFromStart(f),i=!b&&a.isEnd&&e.isEventResizableFromEnd(f),j=this.getSegClasses(a,g,h||i),k=$(this.getEventSkinCss(f)),l="";return j.unshift("fc-day-grid-event","fc-h-event"),a.isStart&&(c=this.getEventTimeText(f),c&&(l='<span class="fc-time">'+Y(c)+"</span>")),d='<span class="fc-title">'+(Y(f.title||"")||"&nbsp;")+"</span>",'<a class="'+j.join(" ")+'"'+(f.url?' href="'+Y(f.url)+'"':"")+(k?' style="'+k+'"':"")+'><div class="fc-content">'+(this.isRTL?d+" "+l:l+" "+d)+"</div>"+(h?'<div class="fc-resizer fc-start-resizer" />':"")+(i?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(b,c){function d(b){for(;b>g;)k=(r[e-1]||[])[g],k?k.attr("rowspan",parseInt(k.attr("rowspan")||1,10)+1):(k=a("<td/>"),h.append(k)),q[e][g]=k,r[e][g]=k,g++}var e,f,g,h,i,j,k,l=this.colCnt,m=this.buildSegLevels(c),n=Math.max(1,m.length),o=a("<tbody/>"),p=[],q=[],r=[];for(e=0;n>e;e++){if(f=m[e],g=0,h=a("<tr/>"),p.push([]),q.push([]),r.push([]),f)for(i=0;i<f.length;i++){for(j=f[i],d(j.leftCol),k=a('<td class="fc-event-container"/>').append(j.el),j.leftCol!=j.rightCol?k.attr("colspan",j.rightCol-j.leftCol+1):r[e][g]=k;g<=j.rightCol;)q[e][g]=k,p[e][g]=j,g++;h.append(k)}d(l),this.bookendCells(h,"eventSkeleton"),o.append(h)}return{row:b,tbodyEl:o,cellMatrix:q,segMatrix:p,segLevels:m,segs:c}},buildSegLevels:function(a){var b,c,d,e=[];for(this.sortSegs(a),b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&za(c,e[d]);d++);c.level=d,(e[d]||(e[d]=[])).push(c)}for(d=0;d<e.length;d++)e[d].sort(Aa);return e},groupSegRows:function(a){var b,c=[];for(b=0;b<this.rowCnt;b++)c.push([]);for(b=0;b<a.length;b++)c[a[b].row].push(a[b]);return c}}),kb.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b,c,d=this.rowStructs||[];for(b=0;b<d.length;b++)this.unlimitRow(b),c=a?"number"==typeof a?a:this.computeRowLevelLimit(b):!1,c!==!1&&this.limitRow(b,c)},computeRowLevelLimit:function(b){function c(b,c){f=Math.max(f,a(c).outerHeight())}var d,e,f,g=this.rowEls.eq(b),h=g.height(),i=this.rowStructs[b].tbodyEl.children();for(d=0;d<i.length;d++)if(e=i.eq(d).removeClass("fc-limited"),f=0,e.find("> td > :first-child").each(c),e.position().top+f>h)return d;return!1},limitRow:function(b,c){function d(d){for(;d>x;)e=u.getCell(b,x),k=u.getCellSegs(e,c),k.length&&(n=g[c-1][x],t=u.renderMoreLink(e,k),s=a("<div/>").append(t),n.append(s),w.push(s[0])),x++}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this,v=this.rowStructs[b],w=[],x=0;if(c&&c<v.segLevels.length){for(f=v.segLevels[c-1],g=v.cellMatrix,h=v.tbodyEl.children().slice(c).addClass("fc-limited").get(),i=0;i<f.length;i++){for(j=f[i],d(j.leftCol),m=[],l=0;x<=j.rightCol;)e=this.getCell(b,x),k=this.getCellSegs(e,c),m.push(k),l+=k.length,x++;if(l){for(n=g[c-1][j.leftCol],o=n.attr("rowspan")||1,p=[],q=0;q<m.length;q++)r=a('<td class="fc-more-cell"/>').attr("rowspan",o),k=m[q],e=this.getCell(b,j.leftCol+q),t=this.renderMoreLink(e,[j].concat(k)),s=a("<div/>").append(t),r.append(s),p.push(r[0]),w.push(r[0]);n.addClass("fc-limited").after(a(p)),h.push(n[0])}}d(this.colCnt),v.moreEls=a(w),v.limitedEls=a(h)}},unlimitRow:function(a){var b=this.rowStructs[a];
b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c){var d=this,e=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(c.length)).on("click",function(f){var g=e.opt("eventLimitClick"),h=b.start,i=a(this),j=d.getCellDayEl(b),k=d.getCellSegs(b),l=d.resliceDaySegs(k,h),m=d.resliceDaySegs(c,h);"function"==typeof g&&(g=e.trigger("eventLimitClick",null,{date:h,dayEl:j,moreEl:i,segs:l,hiddenSegs:m},f)),"popover"===g?d.showSegPopover(b,i,l):"string"==typeof g&&e.calendar.zoomTo(h,g)})},showSegPopover:function(a,b,c){var d,e,f=this,g=this.view,h=b.parent();d=1==this.rowCnt?g.el:this.rowEls.eq(a.row),e={className:"fc-more-popover",content:this.renderSegPopoverContent(a,c),parentEl:this.el,top:d.offset().top,autoHide:!0,viewportConstrain:g.opt("popoverViewportConstrain"),hide:function(){f.segPopover.removeElement(),f.segPopover=null,f.popoverSegs=null}},this.isRTL?e.right=h.offset().left+h.outerWidth()+1:e.left=h.offset().left-1,this.segPopover=new cb(e),this.segPopover.show()},renderSegPopoverContent:function(b,c){var d,e=this.view,f=e.opt("theme"),g=b.start.format(e.opt("dayPopoverFormat")),h=a('<div class="fc-header '+e.widgetHeaderClass+'"><span class="fc-close '+(f?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+Y(g)+'</span><div class="fc-clear"/></div><div class="fc-body '+e.widgetContentClass+'"><div class="fc-event-container"></div></div>'),i=h.find(".fc-event-container");for(c=this.renderFgSegEls(c,!0),this.popoverSegs=c,d=0;d<c.length;d++)c[d].cell=b,i.append(c[d].el);return h},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone().stripTime(),f=e.clone().add(1,"days"),g={start:e,end:f};return b=this.eventsToSegs(d,function(a){var b=E(a,g);return b?[b]:[]}),this.sortSegs(b),b},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"==typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b){for(var c,d=this.rowStructs[a.row].segMatrix,e=b||0,f=[];e<d.length;)c=d[e][a.col],c&&f.push(c),e++;return f}});var lb=jb.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,colDates:null,labelFormat:null,labelInterval:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){jb.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a){return this.bgCellHtml(a)},slatRowHtml:function(){for(var a,c,d,e=this.view,f=this.isRTL,g="",h=b.duration(+this.minTime);h<this.maxTime;)a=this.start.clone().time(h),c=ba(L(h,this.labelInterval)),d='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(c?"<span>"+Y(a.format(this.labelFormat))+"</span>":"")+"</td>",g+="<tr "+(c?"":'class="fc-minor"')+">"+(f?"":d)+'<td class="'+e.widgetContentClass+'"/>'+(f?d:"")+"</tr>",h.add(this.slotDuration);return g},processOptions:function(){var c,d=this.view,e=d.opt("slotDuration"),f=d.opt("snapDuration");e=b.duration(e),f=f?b.duration(f):e,this.slotDuration=e,this.snapDuration=f,this.cellDuration=f,this.minTime=b.duration(d.opt("minTime")),this.maxTime=b.duration(d.opt("maxTime")),c=d.opt("slotLabelFormat"),a.isArray(c)&&(c=c[c.length-1]),this.labelFormat=c||d.opt("axisFormat")||d.opt("smallTimeFormat"),c=d.opt("slotLabelInterval"),this.labelInterval=c?b.duration(c):this.computeLabelInterval(e)},computeLabelInterval:function(a){var c,d,e;for(c=yb.length-1;c>=0;c--)if(d=b.duration(yb[c]),e=L(d,a),ba(e)&&e>1)return d;return b.duration(a)},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},rangeUpdated:function(){var a,b=this.view,c=[];for(a=this.start.clone();a.isBefore(this.end);)c.push(a.clone()),a.add(1,"day"),a=b.skipHiddenDays(a);this.isRTL&&c.reverse(),this.colDates=c,this.colCnt=c.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(a){var b=this.colDates[a.col],c=this.computeSnapTime(a.row);return b=this.view.calendar.rezoneDate(b),b.time(c),b},getColEl:function(a){return this.dayEls.eq(a)},computeSnapTime:function(a){return b.duration(this.minTime+this.snapDuration*a)},rangeToSegs:function(a){var b,c,d,e,f=this.colCnt,g=[];for(a={start:a.start.clone().stripZone(),end:a.end.clone().stripZone()},c=0;f>c;c++)d=this.colDates[c],e={start:d.clone().time(this.minTime),end:d.clone().time(this.maxTime)},b=E(a,e),b&&(b.col=c,g.push(b));return g},updateSize:function(a){this.computeSlatTops(),a&&this.updateSegVerticals()},computeRowCoords:function(){var a,b,c=this.el.offset().top,d=[];for(a=0;a<this.rowCnt;a++)b={top:c+this.computeTimeTop(this.computeSnapTime(a))},a>0&&(d[a-1].bottom=b.top),d.push(b);return b.bottom=b.top+this.computeTimeTop(this.computeSnapTime(a)),d},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a.clone().stripZone()-c.clone().stripTime()))},computeTimeTop:function(a){var b,c,d,e,f=(a-this.minTime)/this.slotDuration;return f=Math.max(0,f),f=Math.min(this.slatEls.length,f),b=Math.floor(f),c=f-b,d=this.slatTops[b],c?(e=this.slatTops[b+1],d+(e-d)*c):d},computeSlatTops:function(){var b,c=[];this.slatEls.each(function(d,e){b=a(e).position().top,c.push(b)}),c.push(b+this.slatEls.last().outerHeight()),this.slatTops=c},renderDrag:function(a,b){return b?(this.renderRangeHelper(a,b),this.applyDragOpacity(this.helperEl),!0):void this.renderHighlight(this.eventRangeToSegs(a))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(a,b){this.renderRangeHelper(a,b)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(b,c){var d,e,f,g,h=this.eventsToSegs([b]);for(h=this.renderFgSegEls(h),d=this.renderSegTable(h),e=0;e<h.length;e++)f=h[e],c&&c.col===f.col&&(g=c.el,f.el.css({left:g.css("left"),right:g.css("right"),"margin-left":g.css("margin-left"),"margin-right":g.css("margin-right")}));this.helperEl=a('<div class="fc-helper-skeleton"/>').append(d).appendTo(this.el)},unrenderHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderRangeHelper(a):this.renderHighlight(this.selectionRangeToSegs(a))},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderFill:function(b,c,d){var e,f,g,h,i,j,k,l,m,n;if(c.length){for(c=this.renderFillSegEls(b,c),e=this.groupSegCols(c),d=d||b.toLowerCase(),f=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),g=f.find("tr"),h=0;h<e.length;h++)if(i=e[h],j=a("<td/>").appendTo(g),i.length)for(k=a('<div class="fc-'+d+'-container"/>').appendTo(j),l=this.colDates[h],m=0;m<i.length;m++)n=i[m],k.append(n.el.css({top:this.computeDateTop(n.start,l),bottom:-this.computeDateTop(n.end,l)}));this.bookendCells(g,b),this.el.append(f),this.elsByFill[b]=f}return c}});lb.mixin({eventSkeletonEl:null,renderFgSegs:function(b){return b=this.renderFgSegEls(b),this.el.append(this.eventSkeletonEl=a('<div class="fc-content-skeleton"/>').append(this.renderSegTable(b))),b},unrenderFgSegs:function(a){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(b){var c,d,e,f,g,h,i=a("<table><tr/></table>"),j=i.find("tr");for(c=this.groupSegCols(b),this.computeSegVerticals(b),f=0;f<c.length;f++){for(g=c[f],this.placeSlotSegs(g),h=a('<div class="fc-event-container"/>'),d=0;d<g.length;d++)e=g[d],e.el.css(this.generateSegPositionCss(e)),e.bottom-e.top<30&&e.el.addClass("fc-short"),h.append(e.el);j.append(a("<td/>").append(h))}return this.bookendCells(j,"eventSkeleton"),i},placeSlotSegs:function(a){var b,c,d;if(this.sortSegs(a),b=Ba(a),Ca(b),c=b[0]){for(d=0;d<c.length;d++)Da(c[d]);for(d=0;d<c.length;d++)this.computeSlotSegCoords(c[d],0,0)}},computeSlotSegCoords:function(a,b,c){var d,e=a.forwardSegs;if(void 0===a.forwardCoord)for(e.length?(this.sortForwardSlotSegs(e),this.computeSlotSegCoords(e[0],b+1,c),a.forwardCoord=e[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),d=0;d<e.length;d++)this.computeSlotSegCoords(e[d],0,a.forwardCoord)},updateSegVerticals:function(){var a,b=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(b),a=0;a<b.length;a++)b[a].el.css(this.generateSegVerticalCss(b[a]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},fgSegHtml:function(a,b){var c,d,e,f=this.view,g=a.event,h=f.isEventDraggable(g),i=!b&&a.isStart&&f.isEventResizableFromStart(g),j=!b&&a.isEnd&&f.isEventResizableFromEnd(g),k=this.getSegClasses(a,h,i||j),l=$(this.getEventSkinCss(g));return k.unshift("fc-time-grid-event","fc-v-event"),f.isMultiDayEvent(g)?(a.isStart||a.isEnd)&&(c=this.getEventTimeText(a),d=this.getEventTimeText(a,"LT"),e=this.getEventTimeText(a,null,!1)):(c=this.getEventTimeText(g),d=this.getEventTimeText(g,"LT"),e=this.getEventTimeText(g,null,!1)),'<a class="'+k.join(" ")+'"'+(g.url?' href="'+Y(g.url)+'"':"")+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(c?'<div class="fc-time" data-start="'+Y(e)+'" data-full="'+Y(d)+'"><span>'+Y(c)+"</span></div>":"")+(g.title?'<div class="fc-title">'+Y(g.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(j?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(a){var b,c,d=this.view.opt("slotEventOverlap"),e=a.backwardCoord,f=a.forwardCoord,g=this.generateSegVerticalCss(a);return d&&(f=Math.min(1,e+2*(f-e))),this.isRTL?(b=1-f,c=e):(b=e,c=1-f),g.zIndex=a.level+1,g.left=100*b+"%",g.right=100*c+"%",d&&a.forwardPressure&&(g[this.isRTL?"marginLeft":"marginRight"]=20),g},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var b,c=[];for(b=0;b<this.colCnt;b++)c.push([]);for(b=0;b<a.length;b++)c[a[b].col].push(a[b]);return c},sortForwardSlotSegs:function(a){a.sort(ca(this,"compareForwardSlotSegs"))},compareForwardSlotSegs:function(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||this.compareSegs(a,b)}});var mb=Ma.View=ra.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(a,c,d,e){this.calendar=a,this.type=this.name=c,this.options=d,this.intervalDuration=e||b.duration(1,"day"),this.nextDayThreshold=b.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=A(this.opt("eventOrder")),this.documentMousedownProxy=ca(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(a){return this.options[a]},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(b){a.extend(this,b),this.updateTitle()},computeRange:function(a){var b,c,d=I(this.intervalDuration),e=a.clone().startOf(d),f=e.clone().add(this.intervalDuration);return/year|month|week|day/.test(d)?(e.stripTime(),f.stripTime()):(e.hasTime()||(e=this.calendar.rezoneDate(e)),f.hasTime()||(f=this.calendar.rezoneDate(f))),b=e.clone(),b=this.skipHiddenDays(b),c=f.clone(),c=this.skipHiddenDays(c,-1,!0),{intervalUnit:d,intervalStart:e,intervalEnd:f,start:b,end:c}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,b){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day")),a},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;return d.hasTime()||(d=d.clone().subtract(1)),ma(a.start,d,b,c,this.opt("isRTL"))},setElement:function(a){this.el=a,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(b){var c=this,d=null;return this.displaying&&(d=this.queryScroll()),this.clear().then(function(){return c.displaying=a.when(c.displayView(b)).then(function(){c.forceScroll(c.computeInitialScroll(d)),c.triggerRender()})})},clear:function(){var b=this,c=this.displaying;return c?c.then(function(){return b.displaying=null,b.clearEvents(),b.clearView()}):a.when()},displayView:function(a){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),this.setDate(a),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours()},clearView:function(){this.unselect(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},renderBusinessHours:function(){},unrenderBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){a(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){a(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header",this.widgetContentClass=a+"-widget-content",this.highlightStateClass=a+"-state-highlight"},updateSize:function(a){var b;a&&(b=this.queryScroll()),this.updateHeight(a),this.updateWidth(a),a&&this.setScroll(b)},updateWidth:function(a){},updateHeight:function(a){var b=this.calendar;this.setHeight(b.getSuggestedViewHeight(),b.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(a){var b,c,d=this.scrollerEl;return b=this.el.add(d),b.css({position:"relative",left:-1}),c=this.el.outerHeight()-d.height(),b.css({position:"",left:""}),a-c},computeInitialScroll:function(a){return 0},queryScroll:function(){return this.scrollerEl?this.scrollerEl.scrollTop():void 0},setScroll:function(a){return this.scrollerEl?this.scrollerEl.scrollTop(a):void 0},forceScroll:function(a){var b=this;this.setScroll(a),setTimeout(function(){b.setScroll(a)},0)},displayEvents:function(a){var b=this.queryScroll();this.clearEvents(),this.renderEvents(a),this.isEventsRendered=!0,this.setScroll(b),this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.isEventsRendered=!1)},renderEvents:function(a){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var d=this.trigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","hidden")},a)},renderedEventSegEach:function(a,b){var c,d=this.getEventSegs();for(c=0;c<d.length;c++)b&&d[c].event._id!==b._id||d[c].el&&a.call(this,d[c])},getEventSegs:function(){return[]},isEventDraggable:function(a){var b=a.source||{};return X(a.startEditable,b.startEditable,this.opt("eventStartEditable"),a.editable,b.editable,this.opt("editable"))},reportEventDrop:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventDrop(a,g.dateDelta,h,d,e),f.reportEventChange()},triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(b,c,d,e,f){var g,h,i=b.eventProps;i&&(g=a.extend({},i,c),h=this.calendar.renderEvent(g,b.stick)[0]),this.triggerExternalDrop(h,c,d,e,f)},triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e),a&&this.trigger("eventReceive",null,a)},renderDrag:function(a,b){},unrenderDrag:function(){},isEventResizableFromStart:function(a){return this.opt("eventResizableFromStart")&&this.isEventResizable(a)},isEventResizableFromEnd:function(a){return this.isEventResizable(a)},isEventResizable:function(a){var b=a.source||{};return X(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d,e){var f=this.calendar,g=f.mutateEvent(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventResize(a,g.durationDelta,h,d,e),f.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b),this.renderSelection(a),this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,b){this.isSelected=!0,this.triggerSelect(a,b)},triggerSelect:function(a,b){this.trigger("select",null,a.start,a.end,b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,a))},unrenderSelection:function(){},documentMousedown:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&v(b)&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))},triggerDayClick:function(a,b,c){this.trigger("dayClick",b,a.start,c)},initHiddenDays:function(){var b,c=this.opt("hiddenDays")||[],d=[],e=0;for(this.opt("weekends")===!1&&c.push(0,6),b=0;7>b;b++)(d[b]=-1!==a.inArray(b,c))||e++;if(!e)throw"invalid hiddenDays";this.isHiddenDayHash=d},isHiddenDay:function(a){return b.isMoment(a)&&(a=a.day()),this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){var d=a.clone();for(b=b||1;this.isHiddenDayHash[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d},computeDayRange:function(a){var b,c=a.start.clone().stripTime(),d=a.end,e=null;return d&&(e=d.clone().stripTime(),b=+d.time(),b&&b>=this.nextDayThreshold&&e.add(1,"days")),(!d||c>=e)&&(e=c.clone().add(1,"days")),{start:c,end:e}},isMultiDayEvent:function(a){var b=this.computeDayRange(a);return b.end.diff(b.start,"days")>1}}),nb=Ma.Calendar=ra.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:Ga,initialize:function(){},initOptions:function(a){var b,e,f,g;a=d(a),b=a.lang,e=ob[b],e||(b=nb.defaults.lang,e=ob[b]||{}),f=X(a.isRTL,e.isRTL,nb.defaults.isRTL),g=f?nb.rtlDefaults:{},this.dirDefaults=g,this.langDefaults=e,this.overrides=a,this.options=c([nb.defaults,g,e,a]),Ha(this.options),this.viewSpecCache={}},getViewSpec:function(a){var b=this.viewSpecCache;return b[a]||(b[a]=this.buildViewSpec(a))},getUnitViewSpec:function(b){var c,d,e;if(-1!=a.inArray(b,Ra))for(c=this.header.getViewsWithButtons(),a.each(Ma.views,function(a){c.push(a)}),d=0;d<c.length;d++)if(e=this.getViewSpec(c[d]),e&&e.singleUnit==b)return e},buildViewSpec:function(a){for(var d,e,f,g,h=this.overrides.views||{},i=[],j=[],k=[],l=a;l;)d=Na[l],e=h[l],l=null,"function"==typeof d&&(d={"class":d}),d&&(i.unshift(d),j.unshift(d.defaults||{}),f=f||d.duration,l=l||d.type),e&&(k.unshift(e),f=f||e.duration,l=l||e.type);return d=Q(i),d.type=a,d["class"]?(f&&(f=b.duration(f),f.valueOf()&&(d.duration=f,g=I(f),1===f.as(g)&&(d.singleUnit=g,k.unshift(h[g]||{})))),d.defaults=c(j),d.overrides=c(k),this.buildViewSpecOptions(d),this.buildViewSpecButtonText(d,a),d):!1},buildViewSpecOptions:function(a){a.options=c([nb.defaults,a.defaults,this.dirDefaults,this.langDefaults,this.overrides,a.overrides]),Ha(a.options)},buildViewSpecButtonText:function(a,b){function c(c){var d=c.buttonText||{};return d[b]||(a.singleUnit?d[a.singleUnit]:null)}a.buttonTextOverride=c(this.overrides)||a.overrides.buttonText,a.buttonTextDefault=c(this.langDefaults)||c(this.dirDefaults)||a.defaults.buttonText||c(nb.defaults)||(a.duration?this.humanizeDuration(a.duration):null)||b},instantiateView:function(a){var b=this.getViewSpec(a);return new b["class"](this,a,b.options,b.duration)},isValidViewType:function(a){return Boolean(this.getViewSpec(a))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectRange:function(a,b){return a=this.moment(a),b=b?this.moment(b):a.hasTime()?a.clone().add(this.defaultTimedEventDuration):a.clone().add(this.defaultAllDayEventDuration),{start:a,end:b}}});nb.mixin(bb),nb.defaults={titleRangeSeparator:" — ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},nb.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},nb.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var ob=Ma.langs={};Ma.datepickerLang=function(b,c,d){var e=ob[b]||(ob[b]={});e.isRTL=d.isRTL,e.weekNumberTitle=d.weekHeader,a.each(pb,function(a,b){e[a]=b(d)}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},Ma.lang=function(b,d){var e,f;e=ob[b]||(ob[b]={}),d&&(e=ob[b]=c([e,d])),f=Ia(b),a.each(qb,function(a,b){null==e[a]&&(e[a]=b(f,e))}),nb.defaults.lang=b};var pb={buttonText:function(a){return{prev:Z(a.prevText),next:Z(a.nextText),today:Z(a.currentText)}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},qb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),b.isRTL?c+=" ddd":c="ddd "+c,c},mediumTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(a){return a.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}},rb={smallDayDateFormat:function(a){return a.isRTL?"D dd":"dd D"},weekFormat:function(a){return a.isRTL?"w[ "+a.weekNumberTitle+"]":"["+a.weekNumberTitle+" ]w"},smallWeekFormat:function(a){return a.isRTL?"w["+a.weekNumberTitle+"]":"["+a.weekNumberTitle+"]w"}};Ma.lang("en",nb.englishDefaults),Ma.sourceNormalizers=[],Ma.sourceFetchers=[];var sb={dataType:"json",cache:!1},tb=1;nb.prototype.getPeerEvents=function(a,b){var c,d,e=this.getEventCache(),f=[];for(c=0;c<e.length;c++)d=e[c],a&&a._id===d._id||f.push(d);return f};var ub=mb.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new kb(this),this.coordMap=this.dayGrid.coordMap},setRange:function(a){mb.prototype.setRange.call(this,a),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(a)},computeRange:function(a){var b=mb.prototype.computeRange.call(this,a);return/year|month/.test(b.intervalUnit)&&(b.start.startOf("week"),b.start=this.skipHiddenDays(b.start),b.end.weekday()&&(b.end.add(1,"week").startOf("week"),b.end=this.skipHiddenDays(b.end,-1,!0))),b},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+Y(this.opt("weekNumberTitle"))+"</span></th>":void 0},numberIntroHtml:function(a){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.dayGrid.getCell(a,0).start.format("w")+"</span></td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(a){var b,c=a.start;return this.dayNumbersVisible?(b=this.dayGrid.getDayClasses(c),b.unshift("fc-day-number"),'<td class="'+b.join(" ")+'" data-date="'+c.format()+'">'+c.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=k(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c,d=this.opt("eventLimit");m(this.scrollerEl),f(this.headRowEl),this.dayGrid.removeSegPopover(),d&&"number"==typeof d&&this.dayGrid.limitRows(d),c=this.computeScrollerHeight(a),this.setGridHeight(c,b),d&&"number"!=typeof d&&this.dayGrid.limitRows(d),!b&&l(this.scrollerEl,c)&&(e(this.headRowEl,r(this.scrollerEl)),c=this.computeScrollerHeight(a),this.scrollerEl.height(c))},setGridHeight:function(a,b){b?j(this.dayGrid.rowEls):i(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),vb=ub.extend({computeRange:function(a){var b,c=ub.prototype.computeRange.call(this,a);return this.isFixedWeeks()&&(b=Math.ceil(c.end.diff(c.start,"weeks",!0)),c.end.add(6-b,"weeks")),c},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),i(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}});Na.basic={"class":ub},Na.basicDay={type:"basic",duration:{days:1}},Na.basicWeek={type:"basic",duration:{weeks:1}},Na.month={"class":vb,duration:{months:1},defaults:{fixedWeekCount:!0}};var wb=mb.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new lb(this),this.opt("allDaySlot")?(this.dayGrid=new kb(this),this.coordMap=new eb([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(a){mb.prototype.setRange.call(this,a),this.timeGrid.setRange(a),this.dayGrid&&this.dayGrid.setRange(a)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=a('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a,b;return this.opt("weekNumbers")?(a=this.timeGrid.getCell(0).start,b=a.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+Y(b)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||Y(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>";
},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){this.timeGrid.updateSize(a),mb.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=k(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),m(this.scrollerEl),f(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=xb),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),l(this.scrollerEl,d)?(e(this.noScrollRowEls,r(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d)):(this.scrollerEl.height(d).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var a=b.duration(this.opt("scrollTime")),c=this.timeGrid.computeTimeTop(a);return c=Math.ceil(c),c&&c++,c},renderEvents:function(a){var b,c,d=[],e=[],f=[];for(c=0;c<a.length;c++)a[c].allDay?d.push(a[c]):e.push(a[c]);b=this.timeGrid.renderEvents(e),this.dayGrid&&(f=this.dayGrid.renderEvents(d)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return a.start.hasTime()?this.timeGrid.renderDrag(a,b):this.dayGrid?this.dayGrid.renderDrag(a,b):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),xb=5,yb=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return Na.agenda={"class":wb,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},Na.agendaDay={type:"agenda",duration:{days:1}},Na.agendaWeek={type:"agenda",duration:{weeks:1}},Ma}),function(a,b,c){"use strict";function d(a){return function(){var b,c,d=arguments[0],e="["+(a?a+":":"")+d+"] ",f=arguments[1],g=arguments,h=function(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a};for(b=e+f.replace(/\{\d+\}/g,function(a){var b,c=+a.slice(1,-1);return c+2<g.length?(b=g[c+2],"function"==typeof b?b.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof b?"undefined":"string"!=typeof b?Q(b):b):a}),b=b+"\nhttp://errors.angularjs.org/1.2.28/"+(a?a+"/":"")+d,c=2;c<arguments.length;c++)b=b+(2==c?"?":"&")+"p"+(c-2)+"="+encodeURIComponent(h(arguments[c]));return new Error(b)}}function e(a){if(null==a||z(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:u(a)||Ec(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d);else if(Ec(a)||e(a))for(d=0;d<a.length;d++)b.call(c,a[d],d);else if(a.forEach&&a.forEach!==f)a.forEach(b,c);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d);return a}function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){for(var a,b=Dc.length;b;){if(b--,a=Dc[b].charCodeAt(0),57==a)return Dc[b]="A",Dc.join("");if(90!=a)return Dc[b]=String.fromCharCode(a+1),Dc.join("");Dc[b]="0"}return Dc.unshift("0"),Dc.join("")}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){var b=a.$$hashKey;return f(arguments,function(b){b!==a&&f(b,function(b,c){a[c]=b})}),k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!=a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===Ac.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===Ac.call(a)}function z(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===Ac.call(a)}function C(a){return"[object Blob]"===Ac.call(a)}function D(a){return a&&x(a.then)}function E(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function F(a,b,c){var d=[];return f(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d}function G(a,b){return-1!=H(a,b)}function H(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function I(a,b){var c=H(a,b);return c>=0&&a.splice(c,1),b}function J(a,b,c,d){if(z(a)||A(a))throw Bc("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw Bc("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=H(c,a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(Ec(a)){b.length=0;for(var h=0;h<a.length;h++)g=J(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;Ec(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)g=J(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g;k(b,i)}}else b=a,a&&(Ec(a)?b=J(a,[],c,d):w(a)?b=new Date(a.getTime()):y(a)?(b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex):t(a)&&(b=J(a,{},c,d)));return b}function K(a,b){if(Ec(a)){b=b||[];for(var c=0;c<a.length;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var d in a)!pc.call(a,d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(b[d]=a[d])}return b||a}function L(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!Ec(a)){if(w(a))return w(b)?isNaN(a.getTime())&&isNaN(b.getTime())||a.getTime()===b.getTime():!1;if(y(a)&&y(b))return a.toString()==b.toString();if(A(a)||A(b)||z(a)||z(b)||Ec(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!L(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!Ec(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!L(a[e],b[e]))return!1;return!0}}return!1}function M(a,b,c){return a.concat(yc.call(b,c))}function N(a,b){return yc.call(a,b||0)}function O(a,b){var c=arguments.length>2?N(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(yc.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function P(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function Q(a,b){return"undefined"==typeof a?c:JSON.stringify(a,P,b?"  ":null)}function R(a){return u(a)?JSON.parse(a):a}function S(a){if("function"==typeof a)a=!0;else if(a&&0!==a.length){var b=oc(""+a);a=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)}else a=!1;return a}function T(a){a=uc(a).clone();try{a.empty()}catch(b){}var c=3,d=uc("<div>").append(a).html();try{return a[0].nodeType===c?oc(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+oc(b)})}catch(b){return oc(d)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;pc.call(d,c)?Ec(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){Ec(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function Z(a,c){function d(a){a&&h.push(a)}var e,g,h=[a],i=["ng:app","ng-app","x-ng-app","data-ng-app"],j=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;f(i,function(c){i[c]=!0,d(b.getElementById(c)),c=c.replace(":","\\:"),a.querySelectorAll&&(f(a.querySelectorAll("."+c),d),f(a.querySelectorAll("."+c+"\\:"),d),f(a.querySelectorAll("["+c+"]"),d))}),f(h,function(a){if(!e){var b=" "+a.className+" ",c=j.exec(b);c?(e=a,g=(c[2]||"").replace(/\s+/g,",")):f(a.attributes,function(b){!e&&i[b.name]&&(e=a,g=b.value)})}}),e&&c(e,g?[g]:[])}function $(c,d){var e=function(){if(c=uc(c),c.injector()){var a=c[0]===b?"document":T(c);throw Bc("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),d.unshift("ng");var e=Ha(d);return e.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),e},g=/^NG_DEFER_BOOTSTRAP!/;return a&&!g.test(a.name)?e():(a.name=a.name.replace(g,""),void(Cc.resumeBootstrap=function(a){f(a,function(a){d.push(a)}),e()}))}function _(a,b){return b=b||"_",a.replace(Hc,function(a,c){return(c?b:"")+a.toLowerCase()})}function aa(){vc=a.jQuery,vc&&vc.fn.on?(uc=vc,l(vc.fn,{scope:Vc.scope,isolateScope:Vc.isolateScope,controller:Vc.controller,injector:Vc.injector,inheritedData:Vc.inheritedData}),ka("remove",!0,!0,!1),ka("empty",!1,!1,!1),ka("html",!1,!1,!0)):uc=oa,Cc.element=uc}function ba(a,b,c){if(!a)throw Bc("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function ca(a,b,c){return c&&Ec(a)&&(a=a[a.length-1]),ba(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function da(a,b){if("hasOwnProperty"===a)throw Bc("badname","hasOwnProperty is not a valid {0} name",b)}function ea(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?O(f,a):a}function fa(a){var b=a[0],c=a[a.length-1];if(b===c)return uc(b);var d=b,e=[d];do{if(d=d.nextSibling,!d)break;e.push(d)}while(d!==c);return uc(e)}function ga(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d){return function(){return b[d||"push"]([a,c,arguments]),i}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=a("$injector","invoke"),i={_invokeQueue:b,_runBlocks:e,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:h,run:function(a){return e.push(a),this}};return g&&h(g),i})}})}function ha(b){l(b,{bootstrap:$,copy:J,extend:l,equals:L,element:uc,forEach:f,injector:Ha,noop:o,bind:O,toJson:Q,fromJson:R,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:E,isArray:Ec,version:Ic,isDate:w,lowercase:oc,uppercase:qc,callbacks:{counter:0},$$minErr:d,$$csp:Gc}),wc=ga(a);try{wc("ngLocale")}catch(c){wc("ngLocale",[]).provider("$locale",cb)}wc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Eb}),a.provider("$compile",Oa).directive({a:Fd,input:Qd,textarea:Qd,form:Jd,script:ye,select:Be,style:De,option:Ce,ngBind:ae,ngBindHtml:ce,ngBindTemplate:be,ngClass:de,ngClassEven:fe,ngClassOdd:ee,ngCloak:ge,ngController:he,ngForm:Kd,ngHide:se,ngIf:ke,ngInclude:le,ngInit:ne,ngNonBindable:oe,ngPluralize:pe,ngRepeat:qe,ngShow:re,ngStyle:te,ngSwitch:ue,ngSwitchWhen:ve,ngSwitchDefault:we,ngOptions:Ae,ngTransclude:xe,ngModel:Wd,ngList:Zd,ngChange:Xd,required:Yd,ngRequired:Yd,ngValue:_d}).directive({ngInclude:me}).directive(Gd).directive(ie),a.provider({$anchorScroll:Ia,$animate:cd,$browser:La,$cacheFactory:Ma,$controller:Ra,$document:Sa,$exceptionHandler:Ta,$filter:Pb,$interpolate:ab,$interval:bb,$http:Ya,$httpBackend:$a,$location:pb,$log:qb,$parse:zb,$rootScope:Db,$q:Ab,$sce:Jb,$sceDelegate:Ib,$sniffer:Kb,$templateCache:Na,$timeout:Lb,$window:Ob,$$rAF:Cb,$$asyncCallback:Ja})}])}function ia(){return++Kc}function ja(a){return a.replace(Nc,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Oc,"Moz$1")}function ka(a,b,c,d){function e(a){var e,g,h,i,j,k,l,m=c&&a?[this.filter(a)]:[this],n=b;if(!d||null!=a)for(;m.length;)for(e=m.shift(),g=0,h=e.length;h>g;g++)for(i=uc(e[g]),n?i.triggerHandler("$destroy"):n=!n,j=0,k=(l=i.children()).length;k>j;j++)m.push(vc(l[j]));return f.apply(this,arguments)}var f=vc.fn[a];f=f.$original||f,e.$original=f,vc.fn[a]=e}function la(a){return!Rc.test(a)}function ma(a,b){var c,d,e,f,g,h,i=b.createDocumentFragment(),j=[];if(la(a))j.push(b.createTextNode(a));else{for(c=i.appendChild(b.createElement("div")),d=(Sc.exec(a)||["",""])[1].toLowerCase(),e=Uc[d]||Uc._default,c.innerHTML="<div>&#160;</div>"+e[1]+a.replace(Tc,"<$1></$2>")+e[2],c.removeChild(c.firstChild),f=e[0];f--;)c=c.lastChild;for(g=0,h=c.childNodes.length;h>g;++g)j.push(c.childNodes[g]);c=i.firstChild,c.textContent=""}return i.textContent="",i.innerHTML="",j}function na(a,c){c=c||b;var d;return(d=Qc.exec(a))?[c.createElement(d[1])]:ma(a,c)}function oa(a){if(a instanceof oa)return a;if(u(a)&&(a=Fc(a)),!(this instanceof oa)){if(u(a)&&"<"!=a.charAt(0))throw Pc("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new oa(a)}if(u(a)){ya(this,na(a));var c=uc(b.createDocumentFragment());c.append(this)}else ya(this,a)}function pa(a){return a.cloneNode(!0)}function qa(a){sa(a);for(var b=0,c=a.childNodes||[];b<c.length;b++)qa(c[b])}function ra(a,b,c,d){if(s(d))throw Pc("offargs","jqLite#off() does not support the `selector` argument");var e=ta(a,"events"),g=ta(a,"handle");g&&(r(b)?f(e,function(b,c){Mc(a,c,b),delete e[c]}):f(b.split(" "),function(b){r(c)?(Mc(a,b,e[b]),delete e[b]):I(e[b]||[],c)}))}function sa(a,b){var d=a.ng339,e=Jc[d];if(e){if(b)return void delete Jc[d].data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),ra(a)),delete Jc[d],a.ng339=c}}function ta(a,b,c){var d=a.ng339,e=Jc[d||-1];return s(c)?(e||(a.ng339=d=ia(),e=Jc[d]={}),void(e[b]=c)):e&&e[b]}function ua(a,b,c){var d=ta(a,"data"),e=s(c),f=!e&&s(b),g=f&&!t(b);if(d||g||ta(a,"data",d={}),e)d[b]=c;else{if(!f)return d;if(g)return d&&d[b];l(d,b)}}function va(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function wa(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",Fc((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Fc(b)+" "," ")))})}function xa(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=Fc(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",Fc(c))}}function ya(a,b){if(b){b=b.nodeName||!s(b.length)||z(b)?[b]:b;for(var c=0;c<b.length;c++)a.push(b[c])}}function za(a,b){return Aa(a,"$"+(b||"ngController")+"Controller")}function Aa(a,b,d){9==a.nodeType&&(a=a.documentElement);for(var e=Ec(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=uc.data(a,e[f]))!==c)return d;a=a.parentNode||11===a.nodeType&&a.host}}function Ba(a){for(var b=0,c=a.childNodes;b<c.length;b++)qa(c[b]);for(;a.firstChild;)a.removeChild(a.firstChild)}function Ca(a,b){var c=Wc[b.toLowerCase()];return c&&Xc[a.nodeName]&&c}function Da(a,c){var d=function(d,e){if(d.preventDefault||(d.preventDefault=function(){d.returnValue=!1}),d.stopPropagation||(d.stopPropagation=function(){d.cancelBubble=!0}),d.target||(d.target=d.srcElement||b),r(d.defaultPrevented)){var g=d.preventDefault;d.preventDefault=function(){d.defaultPrevented=!0,g.call(d)},d.defaultPrevented=!1}d.isDefaultPrevented=function(){return d.defaultPrevented||d.returnValue===!1};var h=K(c[e||d.type]||[]);f(h,function(b){b.call(a,d)}),8>=tc?(d.preventDefault=null,d.stopPropagation=null,d.isDefaultPrevented=null):(delete d.preventDefault,delete d.stopPropagation,delete d.isDefaultPrevented)};return d.elem=a,d}function Ea(a,b){var d,e=typeof a;return"function"==e||"object"==e&&null!==a?"function"==typeof(d=a.$$hashKey)?d=a.$$hashKey():d===c&&(d=a.$$hashKey=(b||j)()):d=a,e+":"+d}function Fa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Ga(a){var b,c,d,e;return"function"==typeof a?(b=a.$inject)||(b=[],a.length&&(c=a.toString().replace(_c,""),d=c.match(Yc),f(d[1].split(Zc),function(a){a.replace($c,function(a,c,d){b.push(d)})})),a.$inject=b):Ec(a)?(e=a.length-1,ca(a[e],"fn"),b=a.slice(0,e)):ca(a,"fn",!0),b}function Ha(a){function b(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function c(a,b){if(da(a,"service"),(x(b)||Ec(b))&&(b=v.instantiate(b)),!b.$get)throw ad("pget","Provider '{0}' must define $get factory method.",a);return s[a+n]=b}function d(a,b){return c(a,{$get:b})}function e(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}function g(a,b){return d(a,q(b))}function h(a,b){da(a,"constant"),s[a]=b,w[a]=b}function j(a,b){var c=v.get(a+n),d=c.$get;c.$get=function(){var a=y.invoke(d,c);return y.invoke(b,null,{$delegate:a})}}function k(a){var b,c,d,e,g=[];return f(a,function(a){if(!r.get(a)){r.put(a,!0);try{if(u(a))for(b=wc(a),g=g.concat(k(b.requires)).concat(b._runBlocks),c=b._invokeQueue,d=0,e=c.length;e>d;d++){var f=c[d],h=v.get(f[0]);h[f[1]].apply(h,f[2])}else x(a)?g.push(v.invoke(a)):Ec(a)?g.push(v.invoke(a)):ca(a,"module")}catch(i){throw Ec(a)&&(a=a[a.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),ad("modulerr","Failed to instantiate module {0} due to:\n{1}",a,i.stack||i.message||i)}}}),g}function l(a,b){function c(c){if(a.hasOwnProperty(c)){if(a[c]===m)throw ad("cdep","Circular dependency found: {0}",c+" <- "+p.join(" <- "));return a[c]}try{return p.unshift(c),a[c]=m,a[c]=b(c)}catch(d){throw a[c]===m&&delete a[c],d}finally{p.shift()}}function d(a,b,d){var e,f,g,h=[],i=Ga(a);for(f=0,e=i.length;e>f;f++){if(g=i[f],"string"!=typeof g)throw ad("itkn","Incorrect injection token! Expected service name as string, got {0}",g);h.push(d&&d.hasOwnProperty(g)?d[g]:c(g))}return Ec(a)&&(a=a[e]),a.apply(b,h)}function e(a,b){var c,e,f=function(){};return f.prototype=(Ec(a)?a[a.length-1]:a).prototype,c=new f,e=d(a,c,b),t(e)||x(e)?e:c}return{invoke:d,instantiate:e,get:c,annotate:Ga,has:function(b){return s.hasOwnProperty(b+n)||a.hasOwnProperty(b)}}}var m={},n="Provider",p=[],r=new Fa([],!0),s={$provide:{provider:b(c),factory:b(d),service:b(e),value:b(g),constant:b(h),decorator:j}},v=s.$injector=l(s,function(){throw ad("unpr","Unknown provider: {0}",p.join(" <- "))}),w={},y=w.$injector=l(w,function(a){var b=v.get(a+n);return y.invoke(b.$get,b)});return f(k(a),function(a){y.invoke(a||o)}),y}function Ia(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return f(a,function(a){b||"a"!==oc(a.nodeName)||(b=a)}),b}function g(){var a,d=c.hash();d?(a=h.getElementById(d))?a.scrollIntoView():(a=e(h.getElementsByName(d)))?a.scrollIntoView():"top"===d&&b.scrollTo(0,0):b.scrollTo(0,0)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)}),g}]}function Ja(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Ka(a,b,d,e){function g(a){try{a.apply(null,N(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){d.error(b)}}}function h(a,b){!function c(){f(w,function(a){a()}),v=b(c,a)}()}function i(){x!=j.url()&&(x=j.url(),f(A,function(a){a(j.url())}))}var j=this,k=b[0],l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,q={};j.isMock=!1;var s=0,t=[];j.$$completeOutstandingRequest=g,j.$$incOutstandingRequestCount=function(){s++},j.notifyWhenNoOutstandingRequests=function(a){f(w,function(a){a()}),0===s?a():t.push(a)};var v,w=[];j.addPollFn=function(a){return r(v)&&h(100,n),w.push(a),a};var x=l.href,y=b.find("base"),z=null;j.url=function(b,c){if(l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){if(x==b)return;var d=x&&hb(x)===hb(b);return x=b,!d&&e.history?c?m.replaceState(null,"",b):(m.pushState(null,"",b),y.attr("href",y.attr("href"))):(d||(z=b),c?l.replace(b):l.href=b),j}return z||l.href.replace(/%27/g,"'")};var A=[],B=!1;j.onUrlChange=function(b){return B||(e.history&&uc(a).on("popstate",i),e.hashchange?uc(a).on("hashchange",i):j.addPollFn(i),B=!0),A.push(b),b},j.$$checkUrlChange=i,j.baseHref=function(){var a=y.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var C={},D="",E=j.baseHref();j.cookies=function(a,b){var e,f,g,h,i;if(!a){if(k.cookie!==D)for(D=k.cookie,f=D.split("; "),C={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=unescape(g.substring(0,i)),C[a]===c&&(C[a]=unescape(g.substring(i+1))));return C}b===c?k.cookie=escape(a)+"=;path="+E+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(k.cookie=escape(a)+"="+escape(b)+";path="+E).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},j.defer=function(a,b){var c;return s++,c=n(function(){delete q[c],g(a)},b||0),q[c]=!0,c},j.defer.cancel=function(a){return q[a]?(delete q[a],p(a),g(o),!0):!1}}function La(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Ka(a,d,b,c)}]}function Ma(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Na(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Oa(a,d){var e={},g="Directive",h=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,j=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,k=/^(on[a-z]+|formaction)$/;this.directive=function m(b,c){return da(b,"directive"),u(b)?(ba(c,"directiveFactory"),e.hasOwnProperty(b)||(e[b]=[],a.factory(b+g,["$injector","$exceptionHandler",function(a,c){var d=[];return f(e[b],function(e,f){try{var g=a.invoke(e);x(g)?g={compile:q(g)}:!g.compile&&g.link&&(g.compile=q(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||b,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"A",d.push(g)}catch(h){c(h)}}),d}])),e[b].push(c)):f(b,i(m)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,i,m,o,q,r,s,v,w,y,z){function A(a,b,c,d,e){a instanceof uc||(a=uc(a)),f(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=b=uc(b).wrap("<span></span>").parent()[0])});var g=C(a,b,a,c,d,e);return B(a,"ng-scope"),function(b,c,d,e){ba(b,"scope");var h=c?Vc.clone.call(a):a;f(d,function(a,b){h.data("$"+b+"Controller",a)});for(var i=0,j=h.length;j>i;i++){var k=h[i],l=k.nodeType;(1===l||9===l)&&h.eq(i).data("$scope",b)}return c&&c(h,b),g&&g(b,h,h,e),h}}function B(a,b){try{a.addClass(b)}catch(c){}}function C(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,p=d.length,q=new Array(p);for(k=0;p>k;k++)q[k]=d[k];for(k=0,m=0,l=o.length;l>k;m++)i=q[m],g=o[k++],h=o[k++],g?(g.scope?(j=a.$new(),uc.data(i,"$scope",j)):j=a,n=g.transcludeOnThisElement?D(a,g.transclude,f):!g.templateOnThisElement&&f?f:!f&&b?D(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o=[],p=0;p<a.length;p++)i=new X,j=E(a[p],[],i,0===p?e:c,f),k=j.length?H(j,a[p],i,b,d,null,[],[],g):null,k&&k.scope&&B(i.$$element,"ng-scope"),m=k&&k.terminal||!(l=a[p].childNodes)||!l.length?null:C(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),o.push(k,m),n=n||k||m,g=null;return n?h:null}function D(a,b,c){var d=function(d,e,f){var g=!1;d||(d=a.$new(),d.$$transcluded=!0,g=!0);var h=b(d,e,f,c);return g&&h.on("$destroy",function(){d.$destroy()}),h};return d}function E(a,b,c,d,e){var f,g,i=a.nodeType,k=c.$attr;switch(i){case 1:J(b,Pa(xc(a).toLowerCase()),"E",d,e);for(var l,m,n,o,p,q,r=a.attributes,s=0,t=r&&r.length;t>s;s++){var v=!1,w=!1;if(l=r[s],!tc||tc>=8||l.specified){m=l.name,p=Fc(l.value),o=Pa(m),(q=aa.test(o))&&(m=_(o.substr(6),"-"));var x=o.replace(/(Start|End)$/,"");o===x+"Start"&&(v=m,w=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),n=Pa(m.toLowerCase()),k[n]=m,(q||!c.hasOwnProperty(n))&&(c[n]=p,Ca(a,n)&&(c[n]=!0)),U(a,b,p,n),J(b,n,"A",d,e,v,w)}}if(g=a.className,u(g)&&""!==g)for(;f=j.exec(g);)n=Pa(f[2]),J(b,n,"C",d,e)&&(c[n]=Fc(f[3])),g=g.substr(f.index+f[0].length);break;case 3:R(b,a.nodeValue);break;case 8:try{f=h.exec(a.nodeValue),f&&(n=Pa(f[1]),J(b,n,"M",d,e)&&(c[n]=Fc(f[2])))}catch(y){}}return b.sort(P),b}function F(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw dd("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return uc(d)}function G(a,b,c){return function(d,e,f,g,h){return e=F(e[0],b,c),a(d,e,f,g,h)}}function H(a,e,g,h,j,k,l,m,n){function o(a,b,c,d){a&&(c&&(a=G(a,c,d)),a.require=w.require,a.directiveName=y,(P===w||w.$$isolateScope)&&(a=W(a,{isolateScope:!0})),l.push(a)),b&&(c&&(b=G(b,c,d)),b.require=w.require,b.directiveName=y,(P===w||w.$$isolateScope)&&(b=W(b,{isolateScope:!0})),m.push(b))}function p(a,b,c,d){var e,g="data",h=!1;if(u(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(g="inheritedData"),h=h||"?"==e;if(e=null,d&&"data"===g&&(e=d[b]),e=e||c[g]("$"+b+"Controller"),!e&&!h)throw dd("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e}return Ec(b)&&(e=[],f(b,function(b){e.push(p(a,b,c,d))})),e}function s(a,b,h,j,k){function n(a,b){var d;return arguments.length<2&&(b=a,a=c),Z&&(d=z),k(a,b,d)}var o,s,t,u,v,w,x,y,z={};if(o=e===h?g:K(g,new X(uc(h),g.$attr)),s=o.$$element,P){var A=/^\s*([@=&])(\??)\s*(\w*)\s*$/;x=b.$new(!0),!R||R!==P&&R!==P.$$originalDirective?s.data("$isolateScopeNoTemplate",x):s.data("$isolateScope",x),B(s,"ng-isolate-scope"),f(P.scope,function(a,c){var e,f,g,h,i=a.match(A)||[],j=i[3]||c,k="?"==i[2],l=i[1];switch(x.$$isolateBindings[c]=l+j,l){case"@":o.$observe(j,function(a){x[c]=a}),o.$$observers[j].$$scope=b,o[j]&&(x[c]=d(o[j])(b));break;case"=":if(k&&!o[j])return;f=q(o[j]),h=f.literal?L:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=x[c]=f(b),dd("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",o[j],P.name)},e=x[c]=f(b),x.$watch(function(){var a=f(b);return h(a,x[c])||(h(a,e)?g(b,a=x[c]):x[c]=a),e=a},null,f.literal);break;case"&":f=q(o[j]),x[c]=function(a){return f(b,a)};break;default:throw dd("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",P.name,c,a)}})}for(y=k&&n,J&&f(J,function(a){var c,d={$scope:a===P||a.$$isolateScope?x:b,$element:s,$attrs:o,$transclude:y};w=a.controller,"@"==w&&(w=o[a.name]),c=r(w,d),z[a.name]=c,Z||s.data("$"+a.name+"Controller",c),a.controllerAs&&(d.$scope[a.controllerAs]=c)}),t=0,u=l.length;u>t;t++)try{v=l[t],v(v.isolateScope?x:b,s,o,v.require&&p(v.directiveName,v.require,s,z),y)}catch(C){i(C,T(s))}var D=b;for(P&&(P.template||null===P.templateUrl)&&(D=x),a&&a(D,h.childNodes,c,k),t=m.length-1;t>=0;t--)try{v=m[t],v(v.isolateScope?x:b,s,o,v.require&&p(v.directiveName,v.require,s,z),y)}catch(C){i(C,T(s))}}n=n||{};for(var v,w,y,z,C,D,H=-Number.MAX_VALUE,J=n.controllerDirectives,P=n.newIsolateScopeDirective,R=n.templateDirective,S=n.nonTlbTranscludeDirective,U=!1,Y=!1,Z=n.hasElementTranscludeDirective,_=g.$$element=uc(e),aa=k,ba=h,ca=0,da=a.length;da>ca;ca++){w=a[ca];var ea=w.$$start,fa=w.$$end;if(ea&&(_=F(e,ea,fa)),z=c,H>w.priority)break;if((D=w.scope)&&(v=v||w,w.templateUrl||(Q("new/isolated scope",P,w,_),t(D)&&(P=w))),y=w.name,!w.templateUrl&&w.controller&&(D=w.controller,J=J||{},Q("'"+y+"' controller",J[y],w,_),J[y]=w),(D=w.transclude)&&(U=!0,w.$$tlb||(Q("transclusion",S,w,_),S=w),"element"==D?(Z=!0,H=w.priority,z=_,_=g.$$element=uc(b.createComment(" "+y+": "+g[y]+" ")),e=_[0],V(j,N(z),e),ba=A(z,h,H,aa&&aa.name,{nonTlbTranscludeDirective:S})):(z=uc(pa(e)).contents(),_.empty(),ba=A(z,h))),w.template)if(Y=!0,Q("template",R,w,_),R=w,D=x(w.template)?w.template(_,g):w.template,D=$(D),w.replace){if(aa=w,z=la(D)?[]:uc(Fc(D)),e=z[0],1!=z.length||1!==e.nodeType)throw dd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");V(j,_,e);var ga={$attr:{}},ha=E(e,[],ga),ia=a.splice(ca+1,a.length-(ca+1));P&&I(ha),a=a.concat(ha).concat(ia),M(g,ga),da=a.length}else _.html(D);if(w.templateUrl)Y=!0,Q("template",R,w,_),R=w,w.replace&&(aa=w),s=O(a.splice(ca,a.length-ca),_,g,j,U&&ba,l,m,{controllerDirectives:J,newIsolateScopeDirective:P,templateDirective:R,nonTlbTranscludeDirective:S}),da=a.length;else if(w.compile)try{C=w.compile(_,g,ba),x(C)?o(null,C,ea,fa):C&&o(C.pre,C.post,ea,fa)}catch(ja){i(ja,T(_))}w.terminal&&(s.terminal=!0,H=Math.max(H,w.priority))}return s.scope=v&&v.scope===!0,s.transcludeOnThisElement=U,s.templateOnThisElement=Y,s.transclude=ba,n.hasElementTranscludeDirective=Z,s}function I(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function J(b,d,f,h,j,k,l){if(d===j)return null;var m=null;if(e.hasOwnProperty(d))for(var o,p=a.get(d+g),q=0,r=p.length;r>q;q++)try{o=p[q],(h===c||h>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){i(s)}return m}function M(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(B(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function O(a,b,c,d,e,g,h,i){var j,k,n=[],p=b[0],q=a.shift(),r=l({},q,{templateUrl:null,transclude:null,replace:null,$$originalDirective:q}),s=x(q.templateUrl)?q.templateUrl(b,c):q.templateUrl;return b.empty(),m.get(w.getTrustedResourceUrl(s),{cache:o}).success(function(l){
var m,o,u,v;if(l=$(l),q.replace){if(u=la(l)?[]:uc(Fc(l)),m=u[0],1!=u.length||1!==m.nodeType)throw dd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",q.name,s);o={$attr:{}},V(d,b,m);var w=E(m,[],o);t(q.scope)&&I(w),a=w.concat(a),M(c,o)}else m=p,b.html(l);for(a.unshift(r),j=H(a,m,c,e,b,q,g,h,i),f(d,function(a,c){a==m&&(d[c]=b[0])}),k=C(b[0].childNodes,e);n.length;){var x=n.shift(),y=n.shift(),z=n.shift(),A=n.shift(),F=b[0];if(y!==p){var G=y.className;i.hasElementTranscludeDirective&&q.replace||(F=pa(m)),V(z,uc(y),F),B(uc(F),G)}v=j.transcludeOnThisElement?D(x,j.transclude,A):A,j(k,x,F,d,v)}n=null}).error(function(a,b,c,d){throw dd("tpload","Failed to load template: {0}",d.url)}),function(a,b,c,d,e){var f=e;n?(n.push(b),n.push(c),n.push(d),n.push(f)):(j.transcludeOnThisElement&&(f=D(b,j.transclude,e)),j(k,b,c,d,f))}}function P(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Q(a,b,c,d){if(b)throw dd("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function R(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=b.length;return d&&B(a.parent(),"ng-binding"),function(a,b){var e=b.parent(),f=e.data("$binding")||[];f.push(c),e.data("$binding",f),d||B(e,"ng-binding"),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function S(a,b){if("srcdoc"==b)return w.HTML;var c=xc(a);return"xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b)?w.RESOURCE_URL:void 0}function U(a,b,c,e){var f=d(c,!0);if(f){if("multiple"===e&&"SELECT"===xc(a))throw dd("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(b,c,g){var h=g.$$observers||(g.$$observers={});if(k.test(e))throw dd("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");f=d(g[e],!0,S(a,e)),f&&(g[e]=f(b),(h[e]||(h[e]=[])).$$inter=!0,(g.$$observers&&g.$$observers[e].$$scope||b).$watch(f,function(a,b){"class"===e&&a!=b?g.$updateClass(a,b):g.$set(e,a)}))}}}})}}function V(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1;break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),d[uc.expando]=g[uc.expando];for(var n=1,o=c.length;o>n;n++){var p=c[n];uc(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function W(a,b){return l(function(){return a.apply(null,arguments)},a,b)}var X=function(a,b){this.$$element=a,this.$attr=b||{}};X.prototype={$normalize:Pa,$addClass:function(a){a&&a.length>0&&y.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&y.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Qa(a,b),d=Qa(b,a);0===c.length?y.removeClass(this.$$element,d):0===d.length?y.addClass(this.$$element,c):y.setClass(this.$$element,c,d)},$set:function(a,b,d,e){var g,h=Ca(this.$$element[0],a);h&&(this.$$element.prop(a,b),e=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a],e||(this.$attr[a]=e=_(a,"-"))),g=xc(this.$$element),("A"===g&&"href"===a||"IMG"===g&&"src"===a)&&(this[a]=b=z(b,"src"===a)),d!==!1&&(null===b||b===c?this.$$element.removeAttr(e):this.$$element.attr(e,b));var j=this.$$observers;j&&f(j[a],function(a){try{a(b)}catch(c){i(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),s.$evalAsync(function(){e.$$inter||b(c[a])}),b}};var Y=d.startSymbol(),Z=d.endSymbol(),$="{{"==Y||"}}"==Z?p:function(a){return a.replace(/\{\{/g,Y).replace(/}}/g,Z)},aa=/^ngAttr[A-Z]/;return A}]}function Pa(a){return ja(a.replace(ed,""))}function Qa(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function Ra(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){da(b,"controller"),t(b)?l(a,b):a[b]=c},this.$get=["$injector","$window",function(c,e){return function(f,g){var h,i,j,k;if(u(f)&&(i=f.match(b),j=i[1],k=i[3],f=a.hasOwnProperty(j)?a[j]:ea(g.$scope,j,!0)||ea(e,j,!0),ca(f,j,!0)),h=c.instantiate(f,g),k){if(!g||"object"!=typeof g.$scope)throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",j||f.name,k);g.$scope[k]=h}return h}}]}function Sa(){this.$get=["$window",function(a){return uc(a.document)}]}function Ta(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function Ua(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=oc(Fc(a.substr(0,d))),c=Fc(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function Va(a){var b=t(a)?a:c;return function(c){return b||(b=Ua(a)),c?b[oc(c)]||null:b}}function Wa(a,b,c){return x(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function Xa(a){return a>=200&&300>a}function Ya(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,d=/^\)\]\}',?\n/,e={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(c){return u(c)&&(c=c.replace(d,""),a.test(c)&&b.test(c)&&(c=R(c))),c}],transformRequest:[function(a){return!t(a)||B(a)||C(a)?a:Q(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:K(e),put:K(e),patch:K(e)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],j=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,d,e,k,m){function n(a){function b(a){var b=l({},a,{data:Wa(a.data,a.headers,e.transformResponse)});return Xa(a.status)?b:k.reject(b)}function d(a){function b(a){var b;f(a,function(c,d){x(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})}var c,d,e,h=g.headers,i=l({},a.headers);h=l({},h.common,h[oc(a.method)]);a:for(c in h){d=oc(c);for(e in i)if(oc(e)===d)continue a;i[c]=h[c]}return b(i),i}var e={method:"get",transformRequest:g.transformRequest,transformResponse:g.transformResponse},h=d(a);l(e,a),e.headers=h,e.method=qc(e.method);var i=function(a){h=a.headers;var c=Wa(a.data,Va(h),a.transformRequest);return r(c)&&f(h,function(a,b){"content-type"===oc(b)&&delete h[b]}),r(a.withCredentials)&&!r(g.withCredentials)&&(a.withCredentials=g.withCredentials),q(a,c,h).then(b,b)},j=[i,c],m=k.when(e);for(f(z,function(a){(a.request||a.requestError)&&j.unshift(a.request,a.requestError),(a.response||a.responseError)&&j.push(a.response,a.responseError)});j.length;){var n=j.shift(),o=j.shift();m=m.then(n,o)}return m.success=function(a){return m.then(function(b){a(b.data,b.status,b.headers,e)}),m},m.error=function(a){return m.then(null,function(b){a(b.data,b.status,b.headers,e)}),m},m}function o(a){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}function p(a){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))}})}function q(d,f,h){function i(a,b,c,d){m&&(Xa(a)?m.put(u,[a,b,Ua(c),d]):m.remove(u)),j(b,a,c,d),e.$$phase||e.$apply()}function j(a,b,c,e){b=Math.max(b,0),(Xa(b)?p.resolve:p.reject)({data:a,status:b,headers:Va(c),config:d,statusText:e})}function l(){var a=H(n.pendingRequests,d);-1!==a&&n.pendingRequests.splice(a,1)}var m,o,p=k.defer(),q=p.promise,u=v(d.url,d.params);if(n.pendingRequests.push(d),q.then(l,l),!d.cache&&!g.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(m=t(d.cache)?d.cache:t(g.cache)?g.cache:y),m)if(o=m.get(u),s(o)){if(D(o))return o.then(l,l),o;Ec(o)?j(o[1],o[0],K(o[2]),o[3]):j(o,200,{},"OK")}else m.put(u,q);if(r(o)){var w=Nb(d.url)?b.cookies()[d.xsrfCookieName||g.xsrfCookieName]:c;w&&(h[d.xsrfHeaderName||g.xsrfHeaderName]=w),a(d.method,u,f,i,h,d.timeout,d.withCredentials,d.responseType)}return q}function v(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(Ec(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():Q(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var y=d("$http"),z=[];return f(i,function(a){z.unshift(u(a)?m.get(a):m.invoke(a))}),f(j,function(a,b){var c=u(a)?m.get(a):m.invoke(a);z.splice(b,0,{response:function(a){return c(k.when(a))},responseError:function(a){return c(k.reject(a))}})}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=g,n}]}function Za(b){if(8>=tc&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!a.XMLHttpRequest))return new a.ActiveXObject("Microsoft.XMLHTTP");if(a.XMLHttpRequest)return new a.XMLHttpRequest;throw d("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")}function $a(){this.$get=["$browser","$window","$document",function(a,b,c){return _a(a,Za,a.defer,b.angular.callbacks,c[0])}]}function _a(a,b,c,d,e){function g(a,b,c){var f=e.createElement("script"),g=null;return f.type="text/javascript",f.src=a,f.async=!0,g=function(a){Mc(f,"load",g),Mc(f,"error",g),e.body.removeChild(f),f=null;var h=-1,i="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},Lc(f,"load",g),Lc(f,"error",g),8>=tc&&(f.onreadystatechange=function(){u(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))}),e.body.appendChild(f),g}var h=-1;return function(e,i,j,k,l,m,n,p){function q(){t=h,v&&v(),w&&w.abort()}function r(b,d,e,f,g){y&&c.cancel(y),v=w=null,0===d&&(d=e?200:"file"==Mb(i).protocol?404:0),d=1223===d?204:d,g=g||"",b(d,e,f,g),a.$$completeOutstandingRequest(o)}var t;if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==oc(e)){var u="_"+(d.counter++).toString(36);d[u]=function(a){d[u].data=a,d[u].called=!0};var v=g(i.replace("JSON_CALLBACK","angular.callbacks."+u),u,function(a,b){r(k,a,d[u].data,"",b),d[u]=o})}else{var w=b(e);if(w.open(e,i,!0),f(l,function(a,b){s(a)&&w.setRequestHeader(b,a)}),w.onreadystatechange=function(){if(w&&4==w.readyState){var a=null,b=null,c="";t!==h&&(a=w.getAllResponseHeaders(),b="response"in w?w.response:w.responseText),t===h&&10>tc||(c=w.statusText),r(k,t||w.status,b,a,c)}},n&&(w.withCredentials=!0),p)try{w.responseType=p}catch(x){if("json"!==p)throw x}w.send(j||null)}if(m>0)var y=c(q,m);else D(m)&&m.then(q)}}function ab(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,i,j){for(var k,l,m,n,o=0,p=[],q=f.length,r=!1,s=[];q>o;)-1!=(k=f.indexOf(a,o))&&-1!=(l=f.indexOf(b,k+g))?(o!=k&&p.push(f.substring(o,k)),p.push(m=c(n=f.substring(k+g,l))),m.exp=n,o=l+h,r=!0):(o!=q&&p.push(f.substring(o)),o=q);if((q=p.length)||(p.push(""),q=1),j&&p.length>1)throw fd("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);return!i||r?(s.length=q,m=function(a){try{for(var b,c=0,g=q;g>c;c++){if("function"==typeof(b=p[c]))if(b=b(a),b=j?e.getTrusted(j,b):e.valueOf(b),null==b)b="";else switch(typeof b){case"string":break;case"number":b=""+b;break;default:b=Q(b)}s[c]=b}return s.join("")}catch(h){var i=fd("interr","Can't interpolate: {0}\n{1}",f,h.toString());d(i)}},m.exp=f,m.parts=p,m):void 0}var g=a.length,h=b.length;return f.startSymbol=function(){return a},f.endSymbol=function(){return b},f}]}function bb(){this.$get=["$rootScope","$window","$q",function(a,b,c){function d(d,f,g,h){var i=b.setInterval,j=b.clearInterval,k=c.defer(),l=k.promise,m=0,n=s(h)&&!h;return g=s(g)?g:0,l.then(null,null,d),l.$$intervalId=i(function(){k.notify(m++),g>0&&m>=g&&(k.resolve(m),j(l.$$intervalId),delete e[l.$$intervalId]),n||a.$apply()},f),e[l.$$intervalId]=k,l}var e={};return d.cancel=function(a){return a&&a.$$intervalId in e?(e[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete e[a.$$intervalId],!0):!1},d}]}function cb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function db(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function eb(a,b,c){var d=Mb(a,c);b.$$protocol=d.protocol,b.$$host=d.hostname,b.$$port=m(d.port)||hd[d.protocol]||null}function fb(a,b,c){var d="/"!==a.charAt(0);d&&(a="/"+a);var e=Mb(a,c);b.$$path=decodeURIComponent(d&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname),b.$$search=V(e.search),b.$$hash=decodeURIComponent(e.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function gb(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function hb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function ib(a){return a.substr(0,hb(a).lastIndexOf("/")+1)}function jb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function kb(a,b){this.$$html5=!0,b=b||"";var d=ib(a);eb(a,this,a),this.$$parse=function(b){var c=gb(d,b);if(!u(c))throw id("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',b,d);fb(c,this,a),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=db(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){var g,h,i;return(g=gb(a,e))!==c?(h=g,i=(g=gb(b,g))!==c?d+(gb("/",g)||g):a+h):(g=gb(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function lb(a,b){var c=ib(a);eb(a,this,a),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f=gb(a,d)||gb(c,d),g="#"==f.charAt(0)?gb(b,f):this.$$html5?f:"";if(!u(g))throw id("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',d,b);fb(g,this,a),this.$$path=e(this.$$path,g,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=db(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return hb(a)==hb(b)?(this.$$parse(b),!0):!1}}function mb(a,b){this.$$html5=!0,lb.apply(this,arguments);var c=ib(a);this.$$parseLinkUrl=function(d,e){var f,g;return a==hb(d)?f=d:(g=gb(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=db(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function nb(a){return function(){return this[a]}}function ob(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function pb(){var b="",c=!1;this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return s(a)?(c=a,this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a){d.$broadcast("$locationChangeSuccess",i.absUrl(),a)}var i,j,k,l=e.baseHref(),m=e.url();c?(k=jb(m)+(l||"/"),j=f.history?kb:mb):(k=hb(m),j=lb),i=new j(k,"#"+b),i.$$parseLinkUrl(m,m);var n=/^\s*(javascript|mailto):/i;g.on("click",function(b){if(!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var c=uc(b.target);"a"!==oc(c[0].nodeName);)if(c[0]===g[0]||!(c=c.parent())[0])return;var f=c.prop("href"),h=c.attr("href")||c.attr("xlink:href");t(f)&&"[object SVGAnimatedString]"===f.toString()&&(f=Mb(f.animVal).href),n.test(f)||!f||c.attr("target")||b.isDefaultPrevented()||i.$$parseLinkUrl(f,h)&&(b.preventDefault(),i.absUrl()!=e.url()&&(d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),i.absUrl()!=m&&e.url(i.absUrl(),!0),e.onUrlChange(function(a){i.absUrl()!=a&&(d.$evalAsync(function(){var b=i.absUrl();i.$$parse(a),d.$broadcast("$locationChangeStart",a,b).defaultPrevented?(i.$$parse(b),e.url(b)):h(b)}),d.$$phase||d.$digest())});var o=0;return d.$watch(function(){var a=e.url(),b=i.$$replace;return o&&a==i.absUrl()||(o++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",i.absUrl(),a).defaultPrevented?i.$$parse(a):(e.url(i.absUrl(),b),h(a))})),i.$$replace=!1,o}),i}]}function qb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function rb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw kd("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function sb(a,b){if(a){if(a.constructor===a)throw kd("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.document&&a.location&&a.alert&&a.setInterval)throw kd("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw kd("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw kd("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function tb(a,b){if(a){if(a.constructor===a)throw kd("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===md||a===nd||od&&a===od)throw kd("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function ub(a,b,d,e,f){sb(a,e),f=f||{};for(var g,h=b.split("."),i=0;h.length>1;i++){g=rb(h.shift(),e);var j=sb(a[g],e);j||(j={},a[g]=j),a=j,a.then&&f.unwrapPromises&&(jd(e),"$$v"in a||!function(a){a.then(function(b){a.$$v=b})}(a),a.$$v===c&&(a.$$v={}),a=a.$$v)}return g=rb(h.shift(),e),sb(a[g],e),a[g]=d,d}function vb(a){return"constructor"==a}function wb(a,b,d,e,f,g,h){rb(a,g),rb(b,g),rb(d,g),rb(e,g),rb(f,g);var i=function(a){return sb(a,g)},j=h.expensiveChecks,k=j||vb(a)?i:p,l=j||vb(b)?i:p,m=j||vb(d)?i:p,n=j||vb(e)?i:p,o=j||vb(f)?i:p;return h.unwrapPromises?function(h,i){var j,p=i&&i.hasOwnProperty(a)?i:h;return null==p?p:(p=k(p[a]),p&&p.then&&(jd(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=k(a)})),p=k(p.$$v)),b?null==p?c:(p=l(p[b]),p&&p.then&&(jd(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=l(a)})),p=l(p.$$v)),d?null==p?c:(p=m(p[d]),p&&p.then&&(jd(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=m(a)})),p=m(p.$$v)),e?null==p?c:(p=n(p[e]),p&&p.then&&(jd(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=n(a)})),p=n(p.$$v)),f?null==p?c:(p=o(p[f]),p&&p.then&&(jd(g),"$$v"in p||(j=p,j.$$v=c,j.then(function(a){j.$$v=o(a)})),p=o(p.$$v)),p):p):p):p):p)}:function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=k(i[a]),b?null==i?c:(i=l(i[b]),d?null==i?c:(i=m(i[d]),e?null==i?c:(i=n(i[e]),f?null==i?c:i=o(i[f]):i):i):i):i)}}function xb(a,b){return function(c,d){return a(c,d,jd,sb,b)}}function yb(a,b,d){var e=b.expensiveChecks,g=e?ud:td;if(g.hasOwnProperty(a))return g[a];var h,i=a.split("."),j=i.length;if(b.csp)h=6>j?wb(i[0],i[1],i[2],i[3],i[4],d,b):function(a,e){var f,g=0;do f=wb(i[g++],i[g++],i[g++],i[g++],i[g++],d,b)(a,e),e=c,a=f;while(j>g);return f};else{var k="var p;\n";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,c){rb(a,d);var f=(c?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+'["'+a+'"]',g=e||vb(a);g&&(f="eso("+f+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+f+";\n",b.unwrapPromises&&(k+='if (s && s.then) {\n pw("'+d.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v='+(g?"eso(v)":"v")+";});\n}\n s="+(g?"eso(s.$$v)":"s.$$v")+"\n}\n")}),k+="return s;";var m=new Function("s","l","pw","eso","fe",k);m.toString=q(k),(l||b.unwrapPromises)&&(m=xb(m,d)),h=m}return"hasOwnProperty"!==a&&(g[a]=h),h}function zb(){var a={},b={},c={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0,expensiveChecks:!1};this.unwrapPromises=function(a){return s(a)?(c.unwrapPromises=!!a,this):c.unwrapPromises},this.logPromiseWarnings=function(a){return s(a)?(c.logPromiseWarnings=a,this):c.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(d,e,f){c.csp=e.csp;var g={csp:c.csp,unwrapPromises:c.unwrapPromises,logPromiseWarnings:c.logPromiseWarnings,expensiveChecks:!0};return jd=function(a){c.logPromiseWarnings&&!ld.hasOwnProperty(a)&&(ld[a]=!0,f.warn("[$parse] Promise found in the expression `"+a+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))},function(e,f){var h;switch(typeof e){case"string":var i=f?b:a;if(i.hasOwnProperty(e))return i[e];var j=f?g:c,k=new rd(j),l=new sd(k,d,j);return h=l.parse(e),"hasOwnProperty"!==e&&(i[e]=h),h;case"function":return e;default:return o}}}]}function Ab(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Bb(function(b){a.$evalAsync(b)},b)}]}function Bb(a,b){function d(a){return a}function e(a){return j(a)}function g(a){var b=h(),c=0,d=Ec(a)?[]:{};return f(a,function(a,e){c++,i(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var h=function(){var f,g,j=[];return g={resolve:function(b){if(j){var d=j;j=c,f=i(b),d.length&&a(function(){for(var a,b=0,c=d.length;c>b;b++)a=d[b],f.then(a[0],a[1],a[2])})}},reject:function(a){g.resolve(k(a))},notify:function(b){if(j){var c=j;j.length&&a(function(){for(var a,d=0,e=c.length;e>d;d++)a=c[d],a[2](b)})}},promise:{then:function(a,c,g){var i=h(),k=function(c){try{i.resolve((x(a)?a:d)(c))}catch(e){i.reject(e),b(e)}},l=function(a){try{i.resolve((x(c)?c:e)(a))}catch(d){i.reject(d),b(d)}},m=function(a){try{i.notify((x(g)?g:d)(a))}catch(c){b(c)}};return j?j.push([k,l,m]):f.then(k,l,m),i.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,b){var c=h();return b?c.resolve(a):c.reject(a),c.promise}function c(c,e){var f=null;try{f=(a||d)()}catch(g){return b(g,!1)}return D(f)?f.then(function(){return b(c,e)},function(a){return b(a,!1)}):b(c,e)}return this.then(function(a){return c(a,!0)},function(a){return c(a,!1)})}}}},i=function(b){return D(b)?b:{then:function(c){var d=h();return a(function(){d.resolve(c(b))}),d.promise}}},j=function(a){var b=h();return b.reject(a),b.promise},k=function(c){return{then:function(d,f){var g=h();return a(function(){try{g.resolve((x(f)?f:e)(c))}catch(a){g.reject(a),b(a)}}),g.promise}}},l=function(c,f,g,k){var l,m=h(),n=function(a){try{return(x(f)?f:d)(a)}catch(c){return b(c),j(c)}},o=function(a){try{return(x(g)?g:e)(a)}catch(c){return b(c),j(c)}},p=function(a){try{return(x(k)?k:d)(a)}catch(c){b(c)}};return a(function(){i(c).then(function(a){l||(l=!0,m.resolve(i(a).then(n,o,p)))},function(a){l||(l=!0,m.resolve(o(a)))},function(a){l||m.notify(p(a))})}),m.promise};return{defer:h,reject:j,when:l,all:g}}function Cb(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Db(){var a=10,b=d("$rootScope"),c=null;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,g,h,i){function k(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings={}}function l(a){if(r.$$phase)throw b("inprog","{0} already in progress",r.$$phase);r.$$phase=a}function m(){r.$$phase=null}function n(a,b){var c=h(a);return ca(c,b),c}function p(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function q(){}k.prototype={constructor:k,$new:function(a){var b;return a?(b=new k,b.$root=this.$root,b.$$asyncQueue=this.$$asyncQueue,b.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),b=new this.$$childScopeClass),b["this"]=b,b.$parent=this,b.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=b,this.$$childTail=b):this.$$childHead=this.$$childTail=b,b},$watch:function(a,b,d){var e=this,f=n(a,"watch"),g=e.$$watchers,h={fn:b,last:q,get:f,exp:a,eq:!!d};if(c=null,!x(b)){var i=n(b||o,"listener");h.fn=function(a,b,c){i(c)}}if("string"==typeof a&&f.constant){var j=h.fn;h.fn=function(a,b,c){j.call(this,a,b,c),I(g,h)}}return g||(g=e.$$watchers=[]),g.unshift(h),function(){I(g,h),c=null}},$watchCollection:function(a,b){function c(){f=m(j);var a,b,c;if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),a=f.length,q!==a&&(l++,g.length=q=a);for(var d=0;a>d;d++)c=g[d]!==g[d]&&f[d]!==f[d],c||g[d]===f[d]||(l++,g[d]=f[d])}else{g!==o&&(g=o={},q=0,l++),a=0;for(b in f)f.hasOwnProperty(b)&&(a++,g.hasOwnProperty(b)?(c=g[b]!==g[b]&&f[b]!==f[b],c||g[b]===f[b]||(l++,g[b]=f[b])):(q++,g[b]=f[b],l++));if(q>a){l++;for(b in g)g.hasOwnProperty(b)&&!f.hasOwnProperty(b)&&(q--,delete g[b])}}else g!==f&&(g=f,l++);return l}function d(){if(p?(p=!1,b(f,f,j)):b(f,i,j),k)if(t(f))if(e(f)){i=new Array(f.length);for(var a=0;a<f.length;a++)i[a]=f[a]}else{i={};for(var c in f)pc.call(f,c)&&(i[c]=f[c])}else i=f}var f,g,i,j=this,k=b.length>1,l=0,m=h(a),n=[],o={},p=!0,q=0;return this.$watch(c,d)},$digest:function(){var d,e,f,h,j,k,n,o,p,r,s,t=this.$$asyncQueue,u=this.$$postDigestQueue,v=a,w=this,y=[];l("$digest"),i.$$checkUrlChange(),c=null;do{for(k=!1,o=w;t.length;){try{s=t.shift(),s.scope.$eval(s.expression)}catch(z){m(),g(z)}c=null}a:do{if(h=o.$$watchers)for(j=h.length;j--;)try{if(d=h[j])if((e=d.get(o))===(f=d.last)||(d.eq?L(e,f):"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))){if(d===c){k=!1;break a}}else k=!0,c=d,d.last=d.eq?J(e,null):e,d.fn(e,f===q?e:f,o),5>v&&(p=4-v,y[p]||(y[p]=[]),r=x(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,r+="; newVal: "+Q(e)+"; oldVal: "+Q(f),y[p].push(r))}catch(z){m(),g(z)}if(!(n=o.$$childHead||o!==w&&o.$$nextSibling))for(;o!==w&&!(n=o.$$nextSibling);)o=o.$parent}while(o=n);if((k||t.length)&&!v--)throw m(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",a,Q(y))}while(k||t.length);for(m();u.length;)try{u.shift()()}catch(z){g(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this!==r&&(f(this.$$listenerCount,O(null,p,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=o,this.$on=this.$watch=function(){return o})}},$eval:function(a,b){return h(a)(this,b)},$evalAsync:function(a){r.$$phase||r.$$asyncQueue.length||i.defer(function(){r.$$asyncQueue.length&&r.$digest()}),this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return l("$apply"),this.$eval(a)}catch(b){g(b)}finally{m();try{r.$digest()}catch(b){throw g(b),b}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=H(c,b);-1!==d&&(c[d]=null,p(e,1,a))}},$emit:function(a,b){var c,d,e,f=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=M([j],arguments,1);do{for(c=h.$$listeners[a]||f,j.currentScope=h,d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){g(l)}else c.splice(d,1),d--,e--;if(i)return j;h=h.$parent}while(h);return j},$broadcast:function(a,b){for(var c,d,e,f=this,h=f,i=f,j={name:a,targetScope:f,preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=M([j],arguments,1);h=i;){for(j.currentScope=h,c=h.$$listeners[a]||[],d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){g(l)}else c.splice(d,1),d--,e--;if(!(i=h.$$listenerCount[a]&&h.$$childHead||h!==f&&h.$$nextSibling))for(;h!==f&&!(i=h.$$nextSibling);)h=h.$parent}return j}};var r=new k;return r}]}function Eb(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return tc&&!(tc>=8)||(e=Mb(c).href,""===e||e.match(f))?c:"unsafe:"+e}}}function Fb(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Gb(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw vd("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Fb(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw vd("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Hb(a){var b=[];return s(a)&&f(a,function(a){b.push(Gb(a))}),b}function Ib(){this.SCE_CONTEXTS=wd;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Hb(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Hb(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?Nb(b):!!a.exec(b.href)}function f(c){var d,f,g=Mb(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw vd("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw vd("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;
var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===wd.RESOURCE_URL){if(f(b))return b;throw vd("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===wd.HTML)return k(b);throw vd("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(a){throw vd("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[wd.HTML]=g(l),m[wd.CSS]=g(l),m[wd.URL]=g(l),m[wd.JS]=g(l),m[wd.RESOURCE_URL]=g(m[wd.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function Jb(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sniffer","$sceDelegate",function(b,c,d){if(a&&c.msie&&c.msieDocumentMode<8)throw vd("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=K(wd);e.isEnabled=function(){return a},e.trustAs=d.trustAs,e.getTrusted=d.getTrusted,e.valueOf=d.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=p),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:function(b,c){return e.getTrusted(a,d(b,c))}};var g=e.parseAs,h=e.getTrusted,i=e.trustAs;return f(wd,function(a,b){var c=oc(b);e[ja("parse_as_"+c)]=function(b){return g(a,b)},e[ja("get_trusted_"+c)]=function(b){return h(a,b)},e[ja("trust_as_"+c)]=function(b){return i(a,b)}}),e}]}function Kb(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(oc((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=h.documentMode,j=/^(Moz|webkit|O|ms)(?=[A-Z])/,k=h.body&&h.body.style,l=!1,n=!1;if(k){for(var o in k)if(d=j.exec(o)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in k&&"webkit"),l=!!("transition"in k||c+"Transition"in k),n=!!("animation"in k||c+"Animation"in k),!f||l&&n||(l=u(h.body.style.webkitTransition),n=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hashchange:"onhashchange"in a&&(!i||i>7),hasEvent:function(a){if("input"==a&&9==tc)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:Gc(),vendorPrefix:c,transitions:l,animations:n,android:f,msie:tc,msieDocumentMode:i}}]}function Lb(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function e(e,g,h){var i,j=c.defer(),k=j.promise,l=s(h)&&!h;return i=b.defer(function(){try{j.resolve(e())}catch(b){j.reject(b),d(b)}finally{delete f[k.$$timeoutId]}l||a.$apply()},g),k.$$timeoutId=i,f[i]=j,k}var f={};return e.cancel=function(a){return a&&a.$$timeoutId in f?(f[a.$$timeoutId].reject("canceled"),delete f[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},e}]}function Mb(a,b){var c=a;return tc&&(xd.setAttribute("href",c),c=xd.href),xd.setAttribute("href",c),{href:xd.href,protocol:xd.protocol?xd.protocol.replace(/:$/,""):"",host:xd.host,search:xd.search?xd.search.replace(/^\?/,""):"",hash:xd.hash?xd.hash.replace(/^#/,""):"",hostname:xd.hostname,port:xd.port,pathname:"/"===xd.pathname.charAt(0)?xd.pathname:"/"+xd.pathname}}function Nb(a){var b=u(a)?Mb(a):a;return b.protocol===yd.protocol&&b.host===yd.host}function Ob(){this.$get=q(a)}function Pb(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Rb),b("date",Zb),b("filter",Qb),b("json",$b),b("limitTo",_b),b("lowercase",Dd),b("number",Sb),b("orderBy",ac),b("uppercase",Ed)}function Qb(){return function(a,b,c){if(!Ec(a))return a;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0},"function"!==d&&(c="boolean"===d&&c?function(a,b){return Cc.equals(a,b)}:function(a,b){if(a&&b&&"object"==typeof a&&"object"==typeof b){for(var d in a)if("$"!==d.charAt(0)&&pc.call(a,d)&&c(a[d],b[d]))return!0;return!1}return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case"array":for(var e=0;e<a.length;e++)if(f(a[e],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var g in b)!function(a){"undefined"!=typeof b[a]&&e.push(function(c){return f("$"==a?c:c&&c[a],b[a])})}(g);break;case"function":e.push(b);break;default:return a}for(var h=[],i=0;i<a.length;i++){var j=a[i];e.check(j)&&h.push(j)}return h}}function Rb(a){var b=a.NUMBER_FORMATS;return function(a,c){return r(c)&&(c=b.CURRENCY_SYM),Tb(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function Sb(a){var b=a.NUMBER_FORMATS;return function(a,c){return Tb(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Tb(a,b,c,d,e){if(null==a||!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?(g="0",a=0):(h=g,j=!0)}if(j)e>0&&a>-1&&1>a&&(h=a.toFixed(e));else{var l=(g.split(zd)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e),0===a&&(f=!1);var m=(""+a).split(zd),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function Ub(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Vb(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Ub(f,b,d)}}function Wb(a,b){return function(c,d){var e=c["get"+a](),f=qc(b?"SHORT"+a:a);return d[f][e]}}function Xb(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=Ub(Math[b>0?"floor":"ceil"](b/60),2)+Ub(Math.abs(b%60),2)}function Yb(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function Zb(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d){var e,g,h="",i=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Cd.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)g=Bd.exec(d),g?(i=M(i,g,1),d=i.pop()):(i.push(d),d=null);return f(i,function(b){e=Ad[b],h+=e?e(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function $b(){return function(a){return Q(a,!0)}}function _b(){return function(a,b){if(!Ec(a)&&!u(a))return a;if(b=Math.abs(Number(b))===1/0?Number(b):m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d,e=[];for(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0?(c=0,d=b):(c=a.length+b,d=a.length);d>c;c++)e.push(a[c]);return e}}function ac(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return S(b)?function(b,c){return a(c,b)}:a}function h(a,b){var c=typeof a,d=typeof b;return c==d?(w(a)&&w(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=Ec(c)?c:[c],0===c.length&&(c=["+"]),c=F(c,function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(function(a,b){return h(a,b)},c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return h(a[e],b[e])},c)}}return g(function(a,b){return h(d(a),d(b))},c)}),yc.call(b).sort(g(f,d))):b}}function bc(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function cc(a,b,c,d){function e(b,c){c=c?"-"+_(c,"-"):"",d.setClass(a,(b?Rd:Sd)+c,(b?Sd:Rd)+c)}var g=this,h=a.parent().controller("form")||Hd,i=0,j=g.$error={},k=[];g.$name=b.name||b.ngForm,g.$dirty=!1,g.$pristine=!0,g.$valid=!0,g.$invalid=!1,h.$addControl(g),a.addClass(Td),e(!0),g.$addControl=function(a){da(a.$name,"input"),k.push(a),a.$name&&(g[a.$name]=a)},g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name],f(j,function(b,c){g.$setValidity(c,!0,a)}),I(k,a)},g.$setValidity=function(a,b,c){var d=j[a];if(b)d&&(I(d,c),d.length||(i--,i||(e(b),g.$valid=!0,g.$invalid=!1),j[a]=!1,e(!0,a),h.$setValidity(a,!0,g)));else{if(i||e(b),d){if(G(d,c))return}else j[a]=d=[],i++,e(!1,a),h.$setValidity(a,!1,g);d.push(c),g.$valid=!1,g.$invalid=!0}},g.$setDirty=function(){d.removeClass(a,Td),d.addClass(a,Ud),g.$dirty=!0,g.$pristine=!1,h.$setDirty()},g.$setPristine=function(){d.removeClass(a,Ud),d.addClass(a,Td),g.$dirty=!1,g.$pristine=!0,f(k,function(a){a.$setPristine()})}}function dc(a,b,d,e){return a.$setValidity(b,d),d?e:c}function ec(a,b){var c,d;if(b)for(c=0;c<b.length;++c)if(d=b[c],a[d])return!0;return!1}function fc(a,b,c,d,e){if(t(e)){a.$$hasNativeValidators=!0;var f=function(f){return a.$error[b]||ec(e,d)||!ec(e,c)?f:void a.$setValidity(b,!1)};a.$parsers.push(f)}}function gc(a,b,c,e,f,g){var h=b.prop(nc),i=b[0].placeholder,j={},k=oc(b[0].type);if(e.$$validityState=h,!f.android){var l=!1;b.on("compositionstart",function(a){l=!0}),b.on("compositionend",function(){l=!1,n()})}var n=function(d){if(!l){var f=b.val();if(tc&&"input"===(d||j).type&&b[0].placeholder!==i)return void(i=b[0].placeholder);"password"!==k&&S(c.ngTrim||"T")&&(f=Fc(f));var g=h&&e.$$hasNativeValidators;(e.$viewValue!==f||""===f&&g)&&(a.$root.$$phase?e.$setViewValue(f):a.$apply(function(){e.$setViewValue(f)}))}};if(f.hasEvent("input"))b.on("input",n);else{var o,p=function(){o||(o=g.defer(function(){n(),o=null}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||p()}),f.hasEvent("paste")&&b.on("paste cut",p)}b.on("change",n),e.$render=function(){b.val(e.$isEmpty(e.$viewValue)?"":e.$viewValue)};var q,r,s=c.ngPattern;if(s){var t=function(a,b){return dc(e,"pattern",e.$isEmpty(b)||a.test(b),b)};r=s.match(/^\/(.*)\/([gim]*)$/),r?(s=new RegExp(r[1],r[2]),q=function(a){return t(s,a)}):q=function(c){var e=a.$eval(s);if(!e||!e.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,T(b));return t(e,c)},e.$formatters.push(q),e.$parsers.push(q)}if(c.ngMinlength){var u=m(c.ngMinlength),v=function(a){return dc(e,"minlength",e.$isEmpty(a)||a.length>=u,a)};e.$parsers.push(v),e.$formatters.push(v)}if(c.ngMaxlength){var w=m(c.ngMaxlength),x=function(a){return dc(e,"maxlength",e.$isEmpty(a)||a.length<=w,a)};e.$parsers.push(x),e.$formatters.push(x)}}function hc(a,b,d,e,f,g){if(gc(a,b,d,e,f,g),e.$parsers.push(function(a){var b=e.$isEmpty(a);return b||Nd.test(a)?(e.$setValidity("number",!0),""===a?null:b?a:parseFloat(a)):(e.$setValidity("number",!1),c)}),fc(e,"number",Pd,null,e.$$validityState),e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a}),d.min){var h=function(a){var b=parseFloat(d.min);return dc(e,"min",e.$isEmpty(a)||a>=b,a)};e.$parsers.push(h),e.$formatters.push(h)}if(d.max){var i=function(a){var b=parseFloat(d.max);return dc(e,"max",e.$isEmpty(a)||b>=a,a)};e.$parsers.push(i),e.$formatters.push(i)}e.$formatters.push(function(a){return dc(e,"number",e.$isEmpty(a)||v(a),a)})}function ic(a,b,c,d,e,f){gc(a,b,c,d,e,f);var g=function(a){return dc(d,"url",d.$isEmpty(a)||Ld.test(a),a)};d.$formatters.push(g),d.$parsers.push(g)}function jc(a,b,c,d,e,f){gc(a,b,c,d,e,f);var g=function(a){return dc(d,"email",d.$isEmpty(a)||Md.test(a),a)};d.$formatters.push(g),d.$parsers.push(g)}function kc(a,b,c,d){r(c.name)&&b.attr("name",j()),b.on("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})}),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function lc(a,b,c,d){var e=c.ngTrueValue,f=c.ngFalseValue;u(e)||(e=!0),u(f)||(f=!1),b.on("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})}),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a!==e},d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f})}function mc(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(Ec(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);f=l(f,-1),e=l(e,1),0===e.length?c.removeClass(h,f):0===f.length?c.addClass(h,e):c.setClass(h,e,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!L(a,o)){var d=e(o);m(d,c)}}else j(c)}o=K(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}var nc="validity",oc=function(a){return u(a)?a.toLowerCase():a},pc=Object.prototype.hasOwnProperty,qc=function(a){return u(a)?a.toUpperCase():a},rc=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},sc=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(oc=rc,qc=sc);var tc,uc,vc,wc,xc,yc=[].slice,zc=[].push,Ac=Object.prototype.toString,Bc=d("ng"),Cc=a.angular||(a.angular={}),Dc=["0","0","0"];tc=m((/msie (\d+)/.exec(oc(navigator.userAgent))||[])[1]),isNaN(tc)&&(tc=m((/trident\/.*; rv:(\d+)/.exec(oc(navigator.userAgent))||[])[1])),o.$inject=[],p.$inject=[];var Ec=function(){return x(Array.isArray)?Array.isArray:function(a){return"[object Array]"===Ac.call(a)}}(),Fc=function(){return String.prototype.trim?function(a){return u(a)?a.trim():a}:function(a){return u(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();xc=9>tc?function(a){return a=a.nodeName?a:a[0],a.scopeName&&"HTML"!=a.scopeName?qc(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var Gc=function(){if(s(Gc.isActive_))return Gc.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return Gc.isActive_=a},Hc=/[A-Z]/g,Ic={full:"1.2.28",major:1,minor:2,dot:28,codeName:"finnish-disembarkation"};oa.expando="ng339";var Jc=oa.cache={},Kc=1,Lc=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},Mc=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},Nc=(oa._data=function(a){return this.cache[a[this.expando]]||{}},/([\:\-\_]+(.))/g),Oc=/^moz([A-Z])/,Pc=d("jqLite"),Qc=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Rc=/<|&#?\w+;/,Sc=/<([\w:]+)/,Tc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Uc={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Uc.optgroup=Uc.option,Uc.tbody=Uc.tfoot=Uc.colgroup=Uc.caption=Uc.thead,Uc.th=Uc.td;var Vc=oa.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),oa(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return uc(a>=0?this[a]:this[this.length+a])},length:0,push:zc,sort:[].sort,splice:[].splice},Wc={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Wc[oc(a)]=a});var Xc={};f("input,select,option,textarea,button,form,details".split(","),function(a){Xc[qc(a)]=!0}),f({data:ua,removeData:sa},function(a,b){oa[b]=a}),f({data:ua,inheritedData:Aa,scope:function(a){return uc.data(a,"$scope")||Aa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return uc.data(a,"$isolateScope")||uc.data(a,"$isolateScopeNoTemplate")},controller:za,injector:function(a){return Aa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:va,css:function(a,b,d){if(b=ja(b),!s(d)){var e;return 8>=tc&&(e=a.currentStyle&&a.currentStyle[b],""===e&&(e="auto")),e=e||a.style[b],8>=tc&&(e=""===e?c:e),e}a.style[b]=d},attr:function(a,b,d){var e=oc(b);if(Wc[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,c){var d=b[a.nodeType];return r(c)?d?a[d]:"":void(a[d]=c)}var b=[];return 9>tc?(b[1]="innerText",b[3]="nodeValue"):b[1]=b[3]="textContent",a.$dv="",a}(),val:function(a,b){if(r(b)){if("SELECT"===xc(a)&&a.multiple){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){if(r(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)qa(d[c]);a.innerHTML=b},empty:Ba},function(a,b){oa.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Ba&&(2==a.length&&a!==va&&a!==za?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===ua)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:sa,dealoc:qa,on:function Ee(a,c,d,e){if(s(e))throw Pc("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var g=ta(a,"events"),h=ta(a,"handle");g||ta(a,"events",g={}),h||ta(a,"handle",h=Da(a,g)),f(c.split(" "),function(c){var e=g[c];if(!e){if("mouseenter"==c||"mouseleave"==c){var f=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};g[c]=[];var i={mouseleave:"mouseout",mouseenter:"mouseover"};Ee(a,i[c],function(a){var b=this,d=a.relatedTarget;(!d||d!==b&&!f(b,d))&&h(a,c)})}else Lc(a,c,h),g[c]=[];e=g[c]}e.push(d)})},off:ra,one:function(a,b,c){a=uc(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;qa(a),f(new oa(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){f(new oa(b),function(b){(1===a.nodeType||11===a.nodeType)&&a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;f(new oa(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=uc(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:function(a){qa(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=a,d=a.parentNode;f(new oa(b),function(a){d.insertBefore(a,c.nextSibling),c=a})},addClass:xa,removeClass:wa,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!va(a,b)),(d?xa:wa)(a,b)})},parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;null!=b&&1!==b.nodeType;)b=b.nextSibling;return b},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:pa,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=(ta(a,"events")||{})[h];i&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=K(i),g=c?[d].concat(c):[d],f(e,function(b){b.apply(a,g)}))}},function(a,b){oa.prototype[b]=function(b,c,d){for(var e,f=0;f<this.length;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=uc(e))):ya(e,a(this[f],b,c,d));return s(e)?e:this},oa.prototype.bind=oa.prototype.on,oa.prototype.unbind=oa.prototype.off}),Fa.prototype={put:function(a,b){this[Ea(a,this.nextUid)]=b},get:function(a){return this[Ea(a,this.nextUid)]},remove:function(a){var b=this[a=Ea(a,this.nextUid)];return delete this[a],b}};var Yc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Zc=/,/,$c=/^\s*(_?)(\S+?)\1\s*$/,_c=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ad=d("$injector"),bd=d("$animate"),cd=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw bd("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$timeout","$$asyncCallback",function(a,b){function c(a){a&&b(a)}return{enter:function(a,b,d,e){d?d.after(a):(b&&b[0]||(b=d.parent()),b.append(a)),c(e)},leave:function(a,b){a.remove(),c(b)},move:function(a,b,c,d){this.enter(a,b,c,d)},addClass:function(a,b,d){b=u(b)?b:Ec(b)?b.join(" "):"",f(a,function(a){xa(a,b)}),c(d)},removeClass:function(a,b,d){b=u(b)?b:Ec(b)?b.join(" "):"",f(a,function(a){wa(a,b)}),c(d)},setClass:function(a,b,d,e){f(a,function(a){xa(a,b),wa(a,d)}),c(e)},enabled:o}}]}],dd=d("$compile");Oa.$inject=["$provide","$$sanitizeUriProvider"];var ed=/^(x[\:\-_]|data[\:\-_])/i,fd=d("$interpolate"),gd=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,hd={http:80,https:443,ftp:21},id=d("$location");mb.prototype=lb.prototype=kb.prototype={$$html5:!1,$$replace:!1,absUrl:nb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=gd.exec(a);return b[1]&&this.path(decodeURIComponent(b[1])),(b[2]||b[1])&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:nb("$$protocol"),host:nb("$$host"),port:nb("$$port"),path:ob("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw id("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:ob("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};var jd,kd=d("$parse"),ld={},md=Function.prototype.call,nd=Function.prototype.apply,od=Function.prototype.bind,pd={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:o,"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":o,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},qd={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},rd=function(a){this.options=a};rd.prototype={constructor:rd,lex:function(a){for(this.text=a,this.index=0,this.ch=c,this.lastCh=":",this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var b=this.ch+this.peek(),d=b+this.peek(2),e=pd[this.ch],f=pd[b],g=pd[d];g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=3):f?(this.tokens.push({index:this.index,text:b,fn:f}),this.index+=2):e?(this.tokens.push({index:this.index,text:this.ch,fn:e}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw kd("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=oc(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a,b,c,d,e=this,f="",g=this.index;this.index<this.text.length&&(d=this.text.charAt(this.index),"."===d||this.isIdent(d)||this.isNumber(d));)"."===d&&(a=this.index),f+=d,this.index++;if(a)for(b=this.index;b<this.text.length;){if(d=this.text.charAt(b),"("===d){c=f.substr(a-g+1),f=f.substr(0,a-g),this.index=b;break}if(!this.isWhitespace(d))break;b++}var h={index:g,text:f};if(pd.hasOwnProperty(f))h.fn=pd[f],h.literal=!0,h.constant=!0;else{var i=yb(f,this.options,this.text);h.fn=l(function(a,b){return i(a,b)},{assign:function(a,b){return ub(a,f,b,e.text,e.options)}})}this.tokens.push(h),c&&(this.tokens.push({index:a,text:"."}),this.tokens.push({index:a+1,text:c}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=qd[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,literal:!0,constant:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var sd=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};sd.ZERO=l(function(){return 0},{constant:!0}),sd.prototype={constructor:sd,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),a.literal=!!b.literal,a.constant=!!b.constant}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw kd("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw kd("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return l(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},filterChain:function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},ternary:function(){var a,b,c=this.logicalOR();return(b=this.expect("?"))?(a=this.assignment(),(b=this.expect(":"))?this.ternaryFn(c,a,this.assignment()):void this.throwError("expected :",b)):c},logicalOR:function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(sd.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary();
},fieldAccess:function(a){var b=this,c=this.expect().text,d=yb(c,this.options,this.text);return l(function(b,c,e){return d(e||a(b,c))},{assign:function(d,e,f){var g=a(d,f);return g||a.assign(d,g={}),ub(g,c,e,b.text,b.options)}})},objectIndex:function(a){var b=this,d=this.expression();return this.consume("]"),l(function(e,f){var g,h,i=a(e,f),j=d(e,f);return rb(j,b.text),i?(g=sb(i[j],b.text),g&&g.then&&b.options.unwrapPromises&&(h=g,"$$v"in g||(h.$$v=c,h.then(function(a){h.$$v=a})),g=g.$$v),g):c},{assign:function(c,e,f){var g=rb(d(c,f),b.text),h=sb(a(c,f),b.text);return h||a.assign(c,h={}),h[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],h=b?b(e,f):e,i=0;i<c.length;i++)g.push(sb(c[i](e,f),d.text));var j=a(e,f,h)||o;sb(h,d.text),tb(j,d.text);var k=j.apply?j.apply(h,g):j(g[0],g[1],g[2],g[3],g[4]);return sb(k,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect(),d=c.string||c.text;this.consume(":");var e=this.expression();a.push({key:d,value:e}),e.constant||(b=!1)}while(this.expect(","));return this.consume("}"),l(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}};var td={},ud={},vd=d("$sce"),wd={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},xd=b.createElement("a"),yd=Mb(a.location.href,!0);Pb.$inject=["$provide"],Rb.$inject=["$locale"],Sb.$inject=["$locale"];var zd=".",Ad={yyyy:Vb("FullYear",4),yy:Vb("FullYear",2,0,!0),y:Vb("FullYear",1),MMMM:Wb("Month"),MMM:Wb("Month",!0),MM:Vb("Month",2,1),M:Vb("Month",1,1),dd:Vb("Date",2),d:Vb("Date",1),HH:Vb("Hours",2),H:Vb("Hours",1),hh:Vb("Hours",2,-12),h:Vb("Hours",1,-12),mm:Vb("Minutes",2),m:Vb("Minutes",1),ss:Vb("Seconds",2),s:Vb("Seconds",1),sss:Vb("Milliseconds",3),EEEE:Wb("Day"),EEE:Wb("Day",!0),a:Yb,Z:Xb},Bd=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Cd=/^\-?\d+$/;Zb.$inject=["$locale"];var Dd=q(oc),Ed=q(qc);ac.$inject=["$parse"];var Fd=q({restrict:"E",compile:function(a,c){return 8>=tc&&(c.href||c.name||c.$set("href",""),a.append(b.createComment("IE fix"))),c.href||c.xlinkHref||c.name?void 0:function(a,b){var c="[object SVGAnimatedString]"===Ac.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}),Gd={};f(Wc,function(a,b){if("multiple"!=a){var c=Pa("ng-"+b);Gd[c]=function(){return{priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(["src","srcset","href"],function(a){var b=Pa("ng-"+a);Gd[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Ac.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(tc&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Hd={$addControl:o,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o};cc.$inject=["$element","$attrs","$scope","$animate"];var Id=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:cc,compile:function(){return{pre:function(a,d,e,f){if(!e.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};Lc(d[0],"submit",g),d.on("$destroy",function(){b(function(){Mc(d[0],"submit",g)},0,!1)})}var h=d.parent().controller("form"),i=e.name||e.ngForm;i&&ub(a,i,f,i),h&&d.on("$destroy",function(){h.$removeControl(f),i&&ub(a,i,c,i),l(f,Hd)})}}}};return d}]},Jd=Id(),Kd=Id(!0),Ld=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Md=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Nd=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Od={text:gc,number:hc,url:ic,email:jc,radio:kc,checkbox:lc,hidden:o,button:o,submit:o,reset:o,file:o},Pd=["badInput"],Qd=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){f&&(Od[oc(e.type)]||Od.text)(c,d,e,f,b,a)}}}],Rd="ng-valid",Sd="ng-invalid",Td="ng-pristine",Ud="ng-dirty",Vd=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,b,c,e,g,h){function i(a,b){b=b?"-"+_(b,"-"):"",h.removeClass(e,(a?Sd:Rd)+b),h.addClass(e,(a?Rd:Sd)+b)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=c.name;var j=g(c.ngModel),k=j.assign;if(!k)throw d("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,T(e));this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||Hd,m=0,n=this.$error={};e.addClass(Td),i(!0),this.$setValidity=function(a,b){n[a]!==!b&&(b?(n[a]&&m--,m||(i(!0),this.$valid=!0,this.$invalid=!1)):(i(!1),this.$invalid=!0,this.$valid=!1,m++),n[a]=!b,i(b,a),l.$setValidity(a,b,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,h.removeClass(e,Ud),h.addClass(e,Td)},this.$setViewValue=function(c){this.$viewValue=c,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,h.removeClass(e,Td),h.addClass(e,Ud),l.$setDirty()),f(this.$parsers,function(a){c=a(c)}),this.$modelValue!==c&&(this.$modelValue=c,k(a,c),f(this.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}}))};var p=this;a.$watch(function(){var b=j(a);if(p.$modelValue!==b){var c=p.$formatters,d=c.length;for(p.$modelValue=b;d--;)b=c[d](b);p.$viewValue!==b&&(p.$viewValue=b,p.$render())}return b})}],Wd=function(){return{require:["ngModel","^?form"],controller:Vd,link:function(a,b,c,d){var e=d[0],f=d[1]||Hd;f.$addControl(e),a.$on("$destroy",function(){f.$removeControl(e)})}}},Xd=q({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Yd=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var e=function(a){return c.required&&d.$isEmpty(a)?void d.$setValidity("required",!1):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e),c.$observe("required",function(){e(d.$viewValue)})}}}},Zd=function(){return{require:"ngModel",link:function(a,b,d,e){var g=/\/(.*)\//.exec(d.ngList),h=g&&new RegExp(g[1])||d.ngList||",",i=function(a){if(!r(a)){var b=[];return a&&f(a.split(h),function(a){a&&b.push(Fc(a))}),b}};e.$parsers.push(i),e.$formatters.push(function(a){return Ec(a)?a.join(", "):c}),e.$isEmpty=function(a){return!a||!a.length}}}},$d=/^(true|false|\d+)$/,_d=function(){return{priority:100,compile:function(a,b){return $d.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},ae=bc({compile:function(a){return a.addClass("ng-binding"),function(a,b,d){b.data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){b.text(a==c?"":a)})}}}),be=["$interpolate",function(a){return function(b,c,d){var e=a(c.attr(d.$attr.ngBindTemplate));c.addClass("ng-binding").data("$binding",e),d.$observe("ngBindTemplate",function(a){c.text(a)})}}],ce=["$sce","$parse",function(a,b){return{compile:function(c){return c.addClass("ng-binding"),function(c,d,e){function f(){return(g(c)||"").toString()}d.data("$binding",e.ngBindHtml);var g=b(e.ngBindHtml);c.$watch(f,function(b){d.html(a.getTrustedHtml(g(c))||"")})}}}}],de=mc("",!0),ee=mc("Odd",0),fe=mc("Even",1),ge=bc({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),he=[function(){return{scope:!0,controller:"@",priority:500}}],ie={},je={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Pa("ng-"+a);ie[b]=["$parse","$rootScope",function(c,d){return{compile:function(e,f){var g=c(f[b],!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};je[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var ke=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(f){S(f)?i||(i=c.$new(),g(i,function(c){c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)})):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=fa(h.clone),a.leave(j,function(){j=null}),h=null))})}}}],le=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,b,c,d,e){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Cc.noop,compile:function(f,g){var h=g.ngInclude||g.src,i=g.onload||"",j=g.autoscroll;return function(f,g,k,l,m){var n,o,p,q=0,r=function(){o&&(o.remove(),o=null),n&&(n.$destroy(),n=null),p&&(d.leave(p,function(){o=null}),o=p,p=null)};f.$watch(e.parseAsResourceUrl(h),function(e){var h=function(){!s(j)||j&&!f.$eval(j)||c()},k=++q;e?(a.get(e,{cache:b}).success(function(a){if(k===q){var b=f.$new();l.template=a;var c=m(b,function(a){r(),d.enter(a,null,g,h)});n=b,p=c,n.$emit("$includeContentLoaded"),f.$eval(i)}}).error(function(){k===q&&r()}),f.$emit("$includeContentRequested")):(r(),l.template=null)})}}}}],me=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,c,d,e){c.html(e.template),a(c.contents())(b)}}}],ne=bc({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),oe=bc({terminal:!0,priority:1e3}),pe=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=g.$attr.when&&e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i)||{},l={},m=b.startSymbol(),n=b.endSymbol(),o=/^when(Minus)?(.+)$/;f(g,function(a,b){o.test(b)&&(k[oc(b.replace("when","").replace("Minus","-"))]=e.attr(g.$attr[b]))}),f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d,e,!0))},function(a){e.text(a)})}}}],qe=["$parse","$animate",function(a,c){function g(a){return a.clone[0]}function h(a){return a.clone[a.clone.length-1]}var i="$$NG_REMOVED",j=d("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(d,k,l,m,n){var o,p,q,r,s,t,u,v,w,x=l.ngRepeat,y=x.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),z={$id:Ea};if(!y)throw j("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",x);if(t=y[1],u=y[2],o=y[3],o?(p=a(o),q=function(a,b,c){return w&&(z[w]=a),z[v]=b,z.$index=c,p(d,z)}):(r=function(a,b){return Ea(b)},s=function(a){return a}),y=t.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!y)throw j("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",t);v=y[3]||y[1],w=y[2];var A={};d.$watchCollection(u,function(a){var l,m,o,p,t,u,y,z,B,C,D,E,F=k[0],G={},H=[];if(e(a))C=a,B=q||r;else{B=q||s,C=[];for(u in a)a.hasOwnProperty(u)&&"$"!=u.charAt(0)&&C.push(u);C.sort()}for(p=C.length,m=H.length=C.length,l=0;m>l;l++)if(u=a===C?l:C[l],y=a[u],z=B(u,y,l),da(z,"`track by` id"),A.hasOwnProperty(z))D=A[z],delete A[z],G[z]=D,H[l]=D;else{if(G.hasOwnProperty(z))throw f(H,function(a){a&&a.scope&&(A[a.id]=a)}),j("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",x,z,Q(y));H[l]={id:z},G[z]=!1}for(u in A)A.hasOwnProperty(u)&&(D=A[u],E=fa(D.clone),c.leave(E),f(E,function(a){a[i]=!0}),D.scope.$destroy());for(l=0,m=C.length;m>l;l++){if(u=a===C?l:C[l],y=a[u],D=H[l],H[l-1]&&(F=h(H[l-1])),D.scope){t=D.scope,o=F;do o=o.nextSibling;while(o&&o[i]);g(D)!=o&&c.move(fa(D.clone),null,uc(F)),F=h(D)}else t=d.$new();t[v]=y,w&&(t[w]=u),t.$index=l,t.$first=0===l,t.$last=l===p-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&l)),D.scope||n(t,function(a){a[a.length++]=b.createComment(" end ngRepeat: "+x+" "),c.enter(a,null,uc(F)),F=a,D.scope=t,D.clone=a,G[D.id]=D})}A=G})}}}],re=["$animate",function(a){return function(b,c,d){b.$watch(d.ngShow,function(b){a[S(b)?"removeClass":"addClass"](c,"ng-hide")})}}],se=["$animate",function(a){return function(b,c,d){b.$watch(d.ngHide,function(b){a[S(b)?"addClass":"removeClass"](c,"ng-hide")})}}],te=bc(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),ue=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,d,e){var g=d.ngSwitch||d.on,h=[],i=[],j=[],k=[];b.$watch(g,function(c){var g,l;for(g=0,l=j.length;l>g;++g)j[g].remove();for(j.length=0,g=0,l=k.length;l>g;++g){var m=i[g];k[g].$destroy(),j[g]=m,a.leave(m,function(){j.splice(g,1)})}i.length=0,k.length=0,(h=e.cases["!"+c]||e.cases["?"])&&(b.$eval(d.change),f(h,function(c){var d=b.$new();k.push(d),c.transclude(d,function(b){var d=c.element;i.push(b),a.enter(b,d.parent(),d)})}))})}}}],ve=bc({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),we=bc({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),xe=bc({link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),ye=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],ze=d("ngOptions"),Ae=q({terminal:!0}),Be=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b){da(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove())},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue==a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Ea(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(y.parent()&&y.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){y.parent()&&y.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Fa(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){L(d,c.$viewValue)||(d=K(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,f,h){function i(){var a=!1;if(t){var c=h.$modelValue;if(z&&Ec(c)){a=new Fa([]);for(var d={},e=0;e<c.length;e++)d[m]=c[e],a.put(z(b,d),c[e])}else a=new Fa(c)}return a}function j(){var a,c,d,e,j,k,u,y,B,C,D,E,F,G,H,I={"":[]},J=[""],K=h.$modelValue,L=r(b)||[],M=n?g(L):L,N={},O=i();for(D=0;B=M.length,B>D;D++){if(u=D,n){if(u=M[D],"$"===u.charAt(0))continue;N[n]=u}if(N[m]=L[u],a=o(b,N)||"",(c=I[a])||(c=I[a]=[],J.push(a)),t)E=s(O.remove(z?z(b,N):q(b,N)));else{if(z){var P={};P[m]=K,E=z(b,P)===z(b,N)}else E=K===q(b,N);O=O||E}H=l(b,N),H=s(H)?H:"",c.push({id:z?z(b,N):n?M[D]:D,label:H,selected:E})}for(t||(v||null===K?I[""].unshift({id:"",label:"",selected:!O}):O||I[""].unshift({id:"?",label:"",selected:!0})),C=0,y=J.length;y>C;C++){for(a=J[C],c=I[a],A.length<=C?(e={element:x.clone().attr("label",a),label:c.label},j=[e],A.push(j),f.append(e.element)):(j=A[C],e=j[0],e.label!=a&&e.element.attr("label",e.label=a)),F=null,D=0,B=c.length;B>D;D++)d=c[D],(k=j[D+1])?(F=k.element,k.label!==d.label&&(F.text(k.label=d.label),F.prop("label",k.label)),k.id!==d.id&&F.val(k.id=d.id),F[0].selected!==d.selected&&(F.prop("selected",k.selected=d.selected),tc&&F.prop("selected",k.selected))):(""===d.id&&v?G=v:(G=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),j.push(k={element:G,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,G),F?F.after(G):e.element.append(G),F=G);for(D++;j.length>D;)d=j.pop(),p.removeOption(d.label),d.element.remove()}for(;A.length>C;)A.pop()[0].element.remove()}var k;if(!(k=u.match(e)))throw ze("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",u,T(f));var l=d(k[2]||k[1]),m=k[4]||k[6],n=k[5],o=d(k[3]||""),q=d(k[2]?k[1]:m),r=d(k[7]),y=k[8],z=y?d(k[8]):null,A=[[{element:f,label:""}]];v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),f.empty(),f.on("change",function(){b.$apply(function(){var a,d,e,g,i,k,l,o,p,s=r(b)||[],u={};if(t){for(e=[],k=0,o=A.length;o>k;k++)for(a=A[k],i=1,l=a.length;l>i;i++)if((g=a[i].element)[0].selected){if(d=g.val(),n&&(u[n]=d),z)for(p=0;p<s.length&&(u[m]=s[p],z(b,u)!=d);p++);else u[m]=s[d];e.push(q(b,u))}}else if(d=f.val(),"?"==d)e=c;else if(""===d)e=null;else if(z){for(p=0;p<s.length;p++)if(u[m]=s[p],z(b,u)==d){e=q(b,u);break}}else u[m]=s[d],n&&(u[n]=d),e=q(b,u);h.$setViewValue(e),j()})}),h.$render=j,b.$watchCollection(r,j),b.$watchCollection(function(){var a={},c=r(b);if(c){for(var d=new Array(c.length),e=0,f=c.length;f>e;e++)a[m]=c[e],d[e]=l(b,a);return d}},j),t&&b.$watchCollection(function(){return h.$modelValue},j)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=uc(b.createElement("option")),x=uc(b.createElement("optgroup")),y=w.clone(),z=0,A=i.children(),B=A.length;B>z;z++)if(""===A[z].value){o=v=A.eq(z);break}p.init(q,v,y),t&&(q.$isEmpty=function(a){return!a||0===a.length}),u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Ce=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound?c.prop("selected",!1):h=b,e?a.$watch(e,function(a,b){d.$set("value",a),a!==b&&h.removeOption(b),h.addOption(a)}):h.addOption(d.value),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],De=q({restrict:"E",terminal:!0});return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(aa(),ha(Cc),void uc(b).ready(function(){Z(b,$)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>'),function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return g(b,j(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=j(c,b.noop);return d.chars(a),c.join("")}function f(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),z[d])for(;t.last()&&A[t.last()];)e("",t.last());y[d]&&t.last()==d&&e("",d),g=v[d]||!!g,g||t.push(d);var i={};f.replace(n,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,t=[],u=a;for(t.last=function(){return t[t.length-1]};a;){if(j="",g=!0,t.last()&&B[t.last()]?(a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(q,"$1").replace(s,"$1"),c.chars&&c.chars(h(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1)):r.test(a)?(i=a.match(r),i&&(a=a.replace(i[0],""),g=!1)):p.test(a)?(i=a.match(m),i&&(a=a.substring(i[0].length),i[0].replace(m,e),g=!1)):o.test(a)&&(i=a.match(l),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(l,d)),g=!1):(j+="<",a=a.substring(1))),g&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(h(j)))),a==u)throw k("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function h(a){if(!a)return"";var b=G.exec(a),c=b[1],d=b[3],e=b[2];return e&&(F.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in F?F.textContent:F.innerText),c+e+d}function i(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&B[a]&&(d=a),d||C[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),h="img"===a&&"src"===g||"background"===g;E[g]!==!0||D[g]===!0&&!c(d,h)||(e(" "),e(f),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||C[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var k=b.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,m=/^<\/\s*([\w:-]+)[^>]*>/,n=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,o=/^</,p=/^<\//,q=/<!--(.*?)-->/g,r=/<!DOCTYPE([^>]*?)>/i,s=/<!\[CDATA\[(.*?)]]>/g,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~| |!])/g,v=f("area,br,col,hr,img,wbr"),w=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=f("rp,rt"),y=b.extend({},x,w),z=b.extend({},w,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),A=b.extend({},x,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=f("script,style"),C=b.extend({},v,z,A,y),D=f("background,cite,href,longdesc,src,usemap"),E=b.extend({},D,f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),F=document.createElement("pre"),G=/^(\s*)([\s\S]*?)(\s*)$/;b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,d=/^mailto:/;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="',a.replace('"',"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==m)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j=b.noop,k=b.forEach,l=e.$$selectors,m=1,n="$$ngAnimateState",o="$$ngAnimateChildren",p="ng-animate",q={running:!0};d.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(a,c,d,m,r,s,t){function u(a){var b=a.data(n)||{};b.running=!0,a.data(n,b)}function v(a){if(a){var b=[],e={},f=a.substr(1).split(".");(d.transitions||d.animations)&&b.push(c.get(l[""]));for(var g=0;g<f.length;g++){var h=f[g],i=l[h];i&&!e[h]&&(b.push(c.get(i)),e[h]=!0)}return b}}function w(a,c,d){function e(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),u.push({event:b,fn:c}),r.push({event:b,fn:d}),!0):void 0}function f(b,c,e){function f(a){if(c){if((c[a]||j)(),++l<g.length)return;c=null}e()}var g=[];k(b,function(a){a.fn&&g.push(a)});var l=0;k(g,function(b,e){var g=function(){f(e)};switch(b.event){case"setClass":c.push(b.fn(a,h,i,g));break;case"addClass":c.push(b.fn(a,h||d,g));break;case"removeClass":c.push(b.fn(a,i||d,g));break;default:c.push(b.fn(a,g))}}),c&&0===c.length&&e()}var g=a[0];if(g){var h,i,l="setClass"==c,m=l||"addClass"==c||"removeClass"==c;b.isArray(d)&&(h=d[0],i=d[1],d=h+" "+i);var n=a.attr("class"),o=n+" "+d;if(D(o)){var p=j,q=[],r=[],s=j,t=[],u=[],w=(" "+o).replace(/\s+/g,".");return k(v(w),function(a){var b=e(a,c);!b&&l&&(e(a,"addClass"),e(a,"removeClass"))}),{node:g,event:c,className:d,isClassBased:m,isSetClassOperation:l,before:function(a){p=a,f(r,q,function(){p=j,a()})},after:function(a){s=a,f(u,t,function(){s=j,a()})},cancel:function(){q&&(k(q,function(a){(a||j)(!0)}),p(!0)),t&&(k(t,function(a){(a||j)(!0)}),s(!0))}}}}}function x(a,c,d,e,f,g,h){function i(b){var e="$animate:"+b;t&&t[e]&&t[e].length>0&&r(function(){d.triggerHandler(e,{event:a,className:c})})}function j(){i("before")}function l(){i("after")}function m(){i("close"),h&&r(function(){h()})}function o(){o.hasBeenRun||(o.hasBeenRun=!0,g())}function q(){if(!q.hasBeenRun){q.hasBeenRun=!0;var b=d.data(n);b&&(s&&s.isClassBased?z(d,c):(r(function(){var b=d.data(n)||{};H==b.index&&z(d,c,a)}),d.data(n,b))),m()}}var s=w(d,a,c);if(!s)return o(),j(),l(),void q();c=s.className;var t=b.element._data(s.node);t=t&&t.events,e||(e=f?f.parent():d.parent());var u,v=d.data(n)||{},x=v.active||{},y=v.totalActive||0,C=v.last;if(s.isClassBased&&(u=v.running||v.disabled||C&&!C.isClassBased),u||A(d,e))return o(),j(),l(),void q();var D=!1;if(y>0){var E=[];if(s.isClassBased){if("setClass"==C.event)E.push(C),z(d,c);else if(x[c]){var F=x[c];F.event==a?D=!0:(E.push(F),z(d,c))}}else if("leave"==a&&x["ng-leave"])D=!0;else{for(var G in x)E.push(x[G]),z(d,G);x={},y=0}E.length>0&&k(E,function(a){a.cancel()})}if(!s.isClassBased||s.isSetClassOperation||D||(D="addClass"==a==d.hasClass(c)),D)return o(),j(),l(),void m();"leave"==a&&d.one("$destroy",function(a){var c=b.element(this),d=c.data(n);if(d){var e=d.active["ng-leave"];e&&(e.cancel(),z(c,"ng-leave"))}}),d.addClass(p);var H=B++;y++,x[c]=s,d.data(n,{last:s,active:x,index:H,totalActive:y}),j(),s.before(function(b){var e=d.data(n);b=b||!e||!e.active[c]||s.isClassBased&&e.active[c].event!=a,o(),b===!0?q():(l(),s.after(q))})}function y(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(p):c.querySelectorAll("."+p);k(d,function(a){a=b.element(a);var c=a.data(n);c&&c.active&&k(c.active,function(a){a.cancel()})})}}function z(a,b){if(i(a,m))q.disabled||(q.running=!1,q.structural=!1);else if(b){var c=a.data(n)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(a.removeClass(p),a.removeData(n))}}function A(a,c){if(q.disabled)return!0;if(i(a,m))return q.running;var d,e,f;do{if(0===c.length)break;var g=i(c,m),h=g?q:c.data(n)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(o);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}var B=0;m.data(n,q),s.$$postDigest(function(){s.$$postDigest(function(){q.running=!1})});var C=e.classNameFilter(),D=C?function(a){return C.test(a)}:function(){return!0};return{enter:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),u(c),a.enter(c,d,e),s.$$postDigest(function(){c=h(c),x("enter","ng-enter",c,d,e,j,f)})},leave:function(c,d){c=b.element(c),y(c),u(c),s.$$postDigest(function(){x("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d)})},move:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),y(c),u(c),a.move(c,d,e),s.$$postDigest(function(){c=h(c),x("move","ng-move",c,d,e,j,f)})},addClass:function(c,d,e){c=b.element(c),c=h(c),x("addClass",d,c,null,null,function(){a.addClass(c,d)},e)},removeClass:function(c,d,e){c=b.element(c),c=h(c),x("removeClass",d,c,null,null,function(){a.removeClass(c,d)},e)},setClass:function(c,d,e,f){c=b.element(c),c=h(c),x("setClass",[d,e],c,null,null,function(){a.setClass(c,d,e)},f)},enabled:function(a,b){switch(arguments.length){case 2:if(a)z(b);else{var c=b.data(n)||{};c.disabled=!0,b.data(n,c)}break;case 1:q.disabled=!a;break;default:a=!q.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){K||(K=h(function(){X=[],K=null,V={}}))}function l(a,b){K&&K(),X.push(b),K=h(function(){k(X,function(a){a()}),X=[],K=null,V={}})}function n(a,c){var d=f(a);a=b.element(d),$.push(a);var e=Date.now()+c;Z>=e||(g.cancel(Y),Z=e,Y=g(function(){o($),$=[]},c,!1))}function o(a){k(a,function(a){var b=a.data(Q);b&&(b.closeAnimationFn||j)()})}function p(a,b){var c=b?V[b]:null;if(!c){var e,f,g,h,i=0,j=0,l=0,n=0;k(a,function(a){if(a.nodeType==m){var b=d.getComputedStyle(a)||{};g=b[F+L],i=Math.max(q(g),i),h=b[F+M],e=b[F+N],j=Math.max(q(e),j),f=b[H+N],n=Math.max(q(f),n);var c=q(b[H+L]);c>0&&(c*=parseInt(b[H+O],10)||1),l=Math.max(c,l)}}),c={total:0,transitionPropertyStyle:h,transitionDurationStyle:g,transitionDelayStyle:e,transitionDelay:j,transitionDuration:i,animationDelayStyle:f,animationDelay:n,animationDuration:l},b&&(V[b]=c)}return c}function q(a){var c=0,d=b.isString(a)?a.split(/\s*,\s*/):[];return k(d,function(a){c=Math.max(parseFloat(a)||0,c)}),c}function r(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++W),c=W),c+"-"+f(a).getAttribute("class")}function s(a,b,c,d){var e=r(b),f=e+" "+c,g=V[f]?++V[f].total:0,h={};if(g>0){var i=c+"-stagger",k=e+" "+i,l=!V[k];l&&b.addClass(i),h=p(b,k),l&&b.removeClass(i)}d=d||function(a){return a()},b.addClass(c);var m=b.data(Q)||{},n=d(function(){return p(b,f)}),o=n.transitionDuration,q=n.animationDuration;if(0===o&&0===q)return b.removeClass(c),!1;b.data(Q,{running:m.running||0,itemIndex:g,stagger:h,timings:n,closeAnimationFn:j});var s=m.running>0||"setClass"==a;return o>0&&u(b,c,s),q>0&&h.animationDelay>0&&0===h.animationDuration&&v(b),!0}function t(a){return"ng-enter"==a||"ng-move"==a||"ng-leave"==a}function u(a,b,c){t(b)||!c?f(a).style[F+M]="none":a.addClass(R)}function v(a){f(a).style[H]="none 0s"}function w(a,b){var c=F+M,d=f(a);d.style[c]&&d.style[c].length>0&&(d.style[c]=""),a.removeClass(R)}function x(a){var b=H,c=f(a);c.style[b]&&c.style[b].length>0&&(c.style[b]="")}function y(a,b,c,d){function e(a){b.off(t,g),b.removeClass(j),
D(b,c);var d=f(b);for(var e in v)d.style.removeProperty(v[e])}function g(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(S));Math.max(c-s,0)>=r&&e>=p&&d()}var h=f(b),i=b.data(Q);if(-1==h.getAttribute("class").indexOf(c)||!i)return void d();var j="";k(c.split(" "),function(a,b){j+=(b>0?" ":"")+a+"-active"});var l=i.stagger,m=i.timings,o=i.itemIndex,p=Math.max(m.transitionDuration,m.animationDuration),q=Math.max(m.transitionDelay,m.animationDelay),r=q*U,s=Date.now(),t=I+" "+G,u="",v=[];if(m.transitionDuration>0){var w=m.transitionPropertyStyle;-1==w.indexOf("all")&&(u+=J+"transition-property: "+w+";",u+=J+"transition-duration: "+m.transitionDurationStyle+";",v.push(J+"transition-property"),v.push(J+"transition-duration"))}if(o>0){if(l.transitionDelay>0&&0===l.transitionDuration){var x=m.transitionDelayStyle;u+=J+"transition-delay: "+z(x,l.transitionDelay,o)+"; ",v.push(J+"transition-delay")}l.animationDelay>0&&0===l.animationDuration&&(u+=J+"animation-delay: "+z(m.animationDelayStyle,l.animationDelay,o)+"; ",v.push(J+"animation-delay"))}if(v.length>0){var y=h.getAttribute("style")||"";h.setAttribute("style",y+"; "+u)}b.on(t,g),b.addClass(j),i.closeAnimationFn=function(){e(),d()};var A=o*(Math.max(l.animationDelay,l.transitionDelay)||0),B=(q+p)*T,C=(A+B)*U;return i.running++,n(b,C),e}function z(a,b,c){var d="";return k(a.split(","),function(a,e){d+=(e>0?",":"")+(c*b+parseInt(a,10))+"s"}),d}function A(a,b,c,d){return s(a,b,c,d)?function(a){a&&D(b,c)}:void 0}function B(a,b,c,d){return b.data(Q)?y(a,b,c,d):(D(b,c),void d())}function C(a,b,c,d){var e=A(a,b,c);if(!e)return i(),void d();var f=e;return l(b,function(){w(b,c),x(b),f=B(a,b,c,d)}),function(a){(f||j)(a)}}function D(a,b){a.removeClass(b);var c=a.data(Q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(Q))}function E(a,c){var d="";return a=b.isArray(a)?a:a.split(/\s+/),k(a,function(a,b){a&&a.length>0&&(d+=(b>0?" ":"")+a+c)}),d}var F,G,H,I,J="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(J="-webkit-",F="WebkitTransition",G="webkitTransitionEnd transitionend"):(F="transition",G="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(J="-webkit-",H="WebkitAnimation",I="webkitAnimationEnd animationend"):(H="animation",I="animationend");var K,L="Duration",M="Property",N="Delay",O="IterationCount",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R="ng-animate-block-transitions",S=3,T=1.5,U=1e3,V={},W=0,X=[],Y=null,Z=0,$=[];return{enter:function(a,b){return C("enter",a,"ng-enter",b)},leave:function(a,b){return C("leave",a,"ng-leave",b)},move:function(a,b){return C("move",a,"ng-move",b)},beforeSetClass:function(a,b,c,d){var e=E(c,"-remove")+" "+E(b,"-add"),f=A("setClass",a,e,function(d){var e=a.attr("class");a.removeClass(c),a.addClass(b);var f=d();return a.attr("class",e),f});return f?(l(a,function(){w(a,e),x(a),d()}),f):(i(),void d())},beforeAddClass:function(a,b,c){var d=A("addClass",a,E(b,"-add"),function(c){a.addClass(b);var d=c();return a.removeClass(b),d});return d?(l(a,function(){w(a,b),x(a),c()}),d):(i(),void c())},setClass:function(a,b,c,d){c=E(c,"-remove"),b=E(b,"-add");var e=c+" "+b;return B("setClass",a,e,d)},addClass:function(a,b,c){return B("addClass",a,E(b,"-add"),c)},beforeRemoveClass:function(a,b,c){var d=A("removeClass",a,E(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);var e=c();return a.attr("class",d),e});return d?(l(a,function(){w(a,b),x(a),c()}),d):void c()},removeClass:function(a,b,c){return B("removeClass",a,E(b,"-remove"),c)}}}])}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return H(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(J(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){o&&d.url()===o;o=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return J(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?H(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){
function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});c[0].offsetWidth;c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(a,b,c,d){function e(){f();var b=+a.interval;!isNaN(b)&&b>0&&(h=c(g,b))}function f(){h&&(c.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(c,f){function g(){if(!m){if(j.currentSlide&&angular.isString(f)&&!a.noTransition&&c.$element){c.$element.addClass(f);c.$element[0].offsetWidth;angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(c,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=d(c.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(c,j.currentSlide)}else h(c,j.currentSlide);j.currentSlide=c,l=i,e()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var i=k.indexOf(c);void 0===f&&(f=i>l?"next":"prev"),c&&c!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){m=!0}),j.indexOfSlide=function(a){return k.indexOf(a)},a.next=function(){var b=(l+1)%k.length;return a.$currentTransition?void 0:j.select(k[b],"next")},a.prev=function(){var b=0>l-1?k.length-1:l-1;return a.$currentTransition?void 0:j.select(k[b],"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?b>=k.length?j.select(k[b-1]):j.select(k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a,b){var c=e.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(d,1),c=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(c)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a,b){var c=e.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);e.activeDate.setMonth(c)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a,b){var c=d.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*d.step.years:"home"===a?c=e(d.activeDate.getFullYear()):"end"===a&&(c=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(c)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a,b){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b,c){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k)}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);n.top().value.modalDomEl=o,f.append(o),f.addClass(m)},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){
d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l,d=c[b]||b;return{show:b,hide:d}}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(a,b){var c=f(r);return function(a,b,d){function f(){D.isOpen?l():j()}function j(){(!C||a.$eval(d[k+"Enable"]))&&(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a()})):o()())}function l(){a.$apply(function(){p()})}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),D.$digest(),E(),D.isOpen=!0,D.$digest(),E):angular.noop}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r()}function q(){w&&r(),x=D.$new(),w=c(x,function(a){A?h.find("body").append(a):b.after(a)})}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null)}function s(){t(),u()}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?b.bind(B.show,f):(b.bind(B.show,j),b.bind(B.hide,l))}var w,x,y,z,A=angular.isDefined(n.appendToBody)?n.appendToBody:!1,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=a.$new(!0),E=function(){var a=i.positionElements(b,w,D.placement,A);a.top+="px",a.left+="px",w.css(a)};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p()}),d.$observe(k+"Title",function(a){D.title=a});var F=function(){b.unbind(B.show,j),b.unbind(B.hide,l)};v();var G=a.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=a.$eval(d[k+"AppendToBody"]);A=angular.isDefined(H)?H:A,A&&a.$on("$locationChangeSuccess",function(){D.isOpen&&p()}),a.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(a){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){
a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),function(){"use strict";angular.module("ui.event",[]).directive("uiEvent",["$parse",function(a){return function(b,c,d){var e=b.$eval(d.uiEvent);angular.forEach(e,function(d,e){var f=a(d);c.bind(e,function(a){var c=Array.prototype.slice.call(arguments);c=c.splice(1),f(b,{$event:a,$params:c}),b.$$phase||b.$apply()})})}}])}(),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(a){"use strict";var b={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return function(d,e,f,g){var h,i=[];h=e.$eval(g["ui"+c(d)]),angular.forEach(h,function(b,c){var d,e;e=a(b),angular.forEach(c.split(" "),function(a){d={expression:e,keys:{}},angular.forEach(a.split("-"),function(a){d.keys[a]=!0}),i.push(d)})}),f.bind(d,function(a){var c=!(!a.metaKey||a.ctrlKey),f=!!a.altKey,g=!!a.ctrlKey,h=!!a.shiftKey,j=a.keyCode;"keypress"===d&&!h&&j>=97&&122>=j&&(j-=32),angular.forEach(i,function(d){var i=d.keys[b[j]]||d.keys[j.toString()],k=!!d.keys.meta,l=!!d.keys.alt,m=!!d.keys.ctrl,n=!!d.keys.shift;i&&k===c&&l===f&&m===g&&n===h&&e.$apply(function(){d.expression(e,{$event:a})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(a){"use strict";return{link:function(b,c,d){a("keydown",b,c,d)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(a){"use strict";return{link:function(b,c,d){a("keypress",b,c,d)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(a){"use strict";return{link:function(b,c,d){a("keyup",b,c,d)}}}]),function(a,b,c){"use strict";b.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(a,d,e){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(f,g,h,i){function j(a,b){return b&&"function"==typeof b?function(){a.apply(this,arguments),b.apply(this,arguments)}:a}function k(a){var b=a.data("ui-sortable");return b&&"object"==typeof b&&"ui-sortable"===b.widgetFullName?b:null}function l(a,b){var c=a.sortable("option","helper");return"clone"===c||"function"==typeof c&&b.item.sortable.isCustomHelperUsed()}function m(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}function n(a,b){for(var c=null,d=0;d<a.length;d++){var e=a[d];if(e.element[0]===b[0]){c=e.scope;break}}return c}function o(a,b){b.item.sortable._destroy()}var p,q={},r={"ui-floating":c},s={receive:null,remove:null,start:null,stop:null,update:null},t={helper:null};return b.extend(q,r,a,f.uiSortable),b.element.fn&&b.element.fn.jquery?(i?(f.$watch("ngModel.length",function(){d(function(){k(g)&&g.sortable("refresh")},0,!1)}),s.start=function(a,d){if("auto"===q["ui-floating"]){var e=d.item.siblings(),f=k(b.element(a.target));f.floating=m(e)}d.item.sortable={model:i.$modelValue[d.item.index()],index:d.item.index(),source:d.item.parent(),sourceModel:i.$modelValue,cancel:function(){d.item.sortable._isCanceled=!0},isCanceled:function(){return d.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!d.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:d.item.sortable._isCustomHelperUsed,_destroy:function(){b.forEach(d.item.sortable,function(a,b){d.item.sortable[b]=c})}}},s.activate=function(a,c){p=g.contents();var d=g.sortable("option","placeholder");if(d&&d.element&&"function"==typeof d.element){var e=d.element();e=b.element(e);var h=g.find('[class="'+e.attr("class")+'"]:not([ng-repeat], [data-ng-repeat])');p=p.not(h)}var i=c.item.sortable._connectedSortables||[];i.push({element:g,scope:f}),c.item.sortable._connectedSortables=i},s.update=function(a,b){if(!b.item.sortable.received){b.item.sortable.dropindex=b.item.index();var c=b.item.parent();b.item.sortable.droptarget=c;var d=n(b.item.sortable._connectedSortables,c);b.item.sortable.droptargetModel=d.ngModel,g.sortable("cancel")}l(g,b)&&!b.item.sortable.received&&"parent"===g.sortable("option","appendTo")&&(p=p.not(p.last())),p.appendTo(g),b.item.sortable.received&&(p=null),b.item.sortable.received&&!b.item.sortable.isCanceled()&&f.$apply(function(){i.$modelValue.splice(b.item.sortable.dropindex,0,b.item.sortable.moved)})},s.stop=function(a,b){!b.item.sortable.received&&"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()?f.$apply(function(){i.$modelValue.splice(b.item.sortable.dropindex,0,i.$modelValue.splice(b.item.sortable.index,1)[0])}):"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()||l(g,b)||p.appendTo(g),p=null},s.receive=function(a,b){b.item.sortable.received=!0},s.remove=function(a,b){"dropindex"in b.item.sortable||(g.sortable("cancel"),b.item.sortable.cancel()),b.item.sortable.isCanceled()||f.$apply(function(){b.item.sortable.moved=i.$modelValue.splice(b.item.sortable.index,1)[0]})},t.helper=function(a){return a&&"function"==typeof a?function(b,c){var d=a.apply(this,arguments);return c.sortable._isCustomHelperUsed=c!==d,d}:a},f.$watch("uiSortable",function(a){var c=k(g);c&&b.forEach(a,function(a,b){return b in r?("ui-floating"!==b||a!==!1&&a!==!0||(c.floating=a),void(q[b]=a)):(s[b]?("stop"===b&&(a=j(a,function(){f.$apply()}),a=j(a,o)),a=j(s[b],a)):t[b]&&(a=t[b](a)),q[b]=a,void g.sortable("option",b,a))})},!0),b.forEach(s,function(a,b){q[b]=j(a,q[b]),"stop"===b&&(q[b]=j(q[b],o))})):e.info("ui.sortable: ngModel not provided!",g),void g.sortable(q)):void e.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular),function(){"use strict";angular.module("sf.treeRepeat",[])}(),function(){"use strict";function a(a){var b=a.match(/^\s*([\$\w]+)\s+in\s+([\S\s]*)\s+of\s+([\S\s]*)$/);if(!b)throw new Error("Expected sfTreepeat in form of '_item_ in _collection_ of _root_' but got '"+a+"'.");return{value:b[1],collection:b[2],root:b[3]}}var b=angular.module("sf.treeRepeat");b.directive("sfTreepeat",["$log",function(b){return{restrict:"A",scope:!0,controller:["$scope","$attrs",function(c,d){var e=this.ident=a(d.sfTreepeat);b.info("Parsed '%s' as %s",d.sfTreepeat,JSON.stringify(this.ident)),c.$watch(this.ident.root,function(a){c[e.value]=a})}],compile:function(a){var b=a.html();return{pre:function(a,c,d,e){e.template=b}}}}}]),b.directive("sfTreecurse",["$compile",function(a){return{require:"^sfTreepeat",link:function(b,c,d,e){var f=["<",c.context.tagName,' ng-repeat="',e.ident.value," in ",e.ident.value,".",e.ident.collection,'">',e.template,"</",c.context.tagName,">"],g=angular.element(f.join(""));c.replaceWith(g),a(g)(b)}}}])}(),function(){"use strict";var a=angular.module("pasvaz.bindonce",[]);a.directive("bindonce",function(){var a=function(a){if(a&&0!==a.length){var b=angular.lowercase(""+a);a=!("f"===b||"0"===b||"false"===b||"no"===b||"n"===b||"[]"===b)}else a=!1;return a},b=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(b)&&(b=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var c={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(c,d,e,f){var g=function(b,c,d){var e="show"===c?"":"none",f="hide"===c?"":"none";b.css("display",a(d)?e:f)},h=function(a,b){if(angular.isObject(b)&&!angular.isArray(b)){var c=[];angular.forEach(b,function(a,b){a&&c.push(b)}),b=c}b&&a.addClass(angular.isArray(b)?b.join(" "):b)},i=function(a,b){a.transclude(b,function(b){var c=a.element.parent(),d=a.element&&a.element[a.element.length-1],e=c&&c[0]||d&&d.parentNode,f=d&&d.nextSibling||null;angular.forEach(b,function(a){e.insertBefore(a,f)})})},j={watcherRemover:void 0,binders:[],group:e.boName,element:d,ran:!1,addBinder:function(a){this.binders.push(a),this.ran&&this.runBinders()},setupWatcher:function(a){var b=this;this.watcherRemover=c.$watch(a,function(a){void 0!==a&&(b.removeWatcher(),b.checkBindonce(a))},!0)},checkBindonce:function(a){var b=this,c=a.$promise?a.$promise.then:a.then;"function"==typeof c?c(function(){b.runBinders()}):b.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var c=this.binders.shift();if(!this.group||this.group==c.group){var d=c.scope.$eval(c.interpolate?f(c.value):c.value);switch(c.attr){case"boIf":a(d)&&i(c,c.scope.$new());break;case"boSwitch":var e,j=c.controller[0];(e=j.cases["!"+d]||j.cases["?"])&&(c.scope.$eval(c.attrs.change),angular.forEach(e,function(a){i(a,c.scope.$new())}));break;case"boSwitchWhen":var k=c.controller[0];k.cases["!"+c.attrs.boSwitchWhen]=k.cases["!"+c.attrs.boSwitchWhen]||[],k.cases["!"+c.attrs.boSwitchWhen].push({transclude:c.transclude,element:c.element});break;case"boSwitchDefault":var k=c.controller[0];k.cases["?"]=k.cases["?"]||[],k.cases["?"].push({transclude:c.transclude,element:c.element});break;case"hide":case"show":g(c.element,c.attr,d);break;case"class":h(c.element,d);break;case"text":c.element.text(d);break;case"html":c.element.html(d);break;case"style":c.element.css(d);break;case"disabled":c.element.prop("disabled",d);break;case"src":c.element.attr(c.attr,d),b&&c.element.prop("src",d);break;case"attr":angular.forEach(c.attrs,function(a,b){var d,e;b.match(/^boAttr./)&&c.attrs[b]&&(d=b.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=c.scope.$eval(c.attrs[b]),c.element.attr(d,e))});break;case"href":case"alt":case"title":case"id":case"value":c.element.attr(c.attr,d)}}}this.ran=!0}};angular.extend(this,j)}],link:function(a,b,c,d){var e=c.bindonce&&a.$eval(c.bindonce);void 0!==e?d.checkBindonce(e):(d.setupWatcher(c.bindonce),b.bind("$destroy",d.removeWatcher))}};return c}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(b){var c=200;return a.directive(b.directiveName,function(){var a={priority:b.priority||c,transclude:b.transclude||!1,terminal:b.terminal||!1,require:["^bindonce"].concat(b.require||[]),controller:b.controller,compile:function(a,c,d){return function(a,c,e,f){var g=f[0],h=e.boParent;if(h&&g.group!==h){var i=g.element.parent();g=void 0;for(var j;9!==i[0].nodeType&&i.length;){if((j=i.data("$bindonceController"))&&j.group===h){g=j;break}i=i.parent()}if(!g)throw new Error("No bindonce controller: "+h)}g.addBinder({element:c,attr:b.attribute||b.directiveName,attrs:e,value:e[b.directiveName],interpolate:b.interpolate,group:h,transclude:d,controller:f.slice(1),scope:a})}}};return a})})}(),angular.module("w5c.validator",["ng"]).provider("w5cValidator",[function(){var a={required:"该选项不能为空",maxlength:"该选项输入值长度不能大于{maxlength}",minlength:"该选项输入值长度不能小于{minlength}",email:"输入邮件的格式不正确",repeat:"两次输入不一致",pattern:"该选项输入格式不正确",number:"必须输入数字",w5cuniquecheck:"该输入值已经存在，请重新输入",url:"输入URL格式不正确",max:"该选项输入值不能大于{max}",min:"该选项输入值不能小于{min}"},b=["text","password","email","number","url",["textarea"],["select"],["select-multiple"],["select-one"]],c=function(a){return"FORM"===a[0].tagName||11==a[0].nodeType?null:a&&a.hasClass("form-group")?a:c(a.parent())},d=function(){this.elemTypes=b,this.rules=[],this.isEmpty=function(a){return a?a instanceof Array&&0===a.length?!0:!1:!0},this.defaultShowError=function(a,b){var d=angular.element(a),e=c(d);this.isEmpty(e)||e.hasClass("has-error")||e.addClass("has-error"),d.next(".w5c-error").length<=0&&d.after('<span class="w5c-error">'+b[0]+"</span>")},this.defaultRemoveError=function(a){var b=angular.element(a),d=c(b);!this.isEmpty(d)&&d.hasClass("has-error")&&d.removeClass("has-error"),b.next(".w5c-error").length>0&&b.next(".w5c-error").remove()},this.options={blurTrig:!1,showError:!0,removeError:!0}};d.prototype={constructor:d,config:function(a){this.options=angular.extend(this.options,a)},setRules:function(a){this.rules=a},getErrorMessage:function(b,c){var d=null;switch(this.isEmpty(this.rules[c.name])||this.isEmpty(this.rules[c.name][b])||(d=this.rules[c.name][b]),b){case"maxlength":return null!==d?d.replace("{maxlength}",c.getAttribute("ng-maxlength")):a.maxlength.replace("{maxlength}",c.getAttribute("ng-maxlength"));case"minlength":return null!==d?d.replace("{minlength}",c.getAttribute("ng-minlength")):a.minlength.replace("{minlength}",c.getAttribute("ng-minlength"));case"max":return null!==d?d.replace("{max}",c.getAttribute("max")):a.max.replace("{max}",c.getAttribute("max"));case"min":return null!==d?d.replace("{min}",c.getAttribute("min")):a.min.replace("{min}",c.getAttribute("min"));default:if(null!==d)return d;if(null===a[b])throw new Error("该验证规则("+b+")默认错误信息没有设置！");return a[b]}},getErrorMessages:function(a,b){var c=[];for(var d in b)if(b[d]){var e=this.getErrorMessage(d,a);c.push(e)}return c},showError:function(a,b,c){var d=angular.extend({},this.options,c);return angular.element(a).removeClass("valid").addClass("error"),d.showError!==!1?angular.isFunction(d.showError)?d.showError(a,b):d.showError===!0?this.defaultShowError(a,b):void 0:void 0},removeError:function(a,b){var c=angular.extend({},this.options,b);return angular.element(a).removeClass("error").addClass("valid"),c.removeError!==!1?angular.isFunction(c.removeError)?c.removeError(a):c.removeError===!0?this.defaultRemoveError(a):void 0:void 0}};var e=new d;this.config=function(a){e.config(a)},this.setRules=function(a){e.setRules(a)},this.setDefaultRules=function(b){a=angular.extend(a,b)},this.$get=function(){return e}}]),angular.module("w5c.validator").directive("w5cFormValidate",["$parse","w5cValidator","$timeout",function(a,b,c){return{require:["w5cFormValidate","^?form"],controller:["$scope",function(a){this.needBindKeydown=!1,this.form=null,this.formElement=null,this.submitSuccessFn=null,this.doValidate=function(b){angular.isFunction(this.form.doValidate)&&this.form.doValidate(),this.form.$valid&&angular.isFunction(b)&&a.$apply(function(){b(a)})}}],link:function(d,e,f,g){var h=g[0],i=g[1],j=e[0],k=e.attr("name"),l=a(f.w5cSubmit),m=d.$eval(f.w5cFormValidate);if(!k)throw Error("form must has name when use w5cFormValidate");h.form=i,h.formElement=e,f.w5cFormValidate&&d.$watch(f.w5cFormValidate,function(a){a&&(h.options=m=angular.extend({},b.options,a))},!0),h.options=m=angular.extend({},b.options,m);for(var n=0;n<j.length;n++){var o=j[n],p=angular.element(o);b.elemTypes.toString().indexOf(o.type)>-1&&!b.isEmpty(o.name)&&(!function(a,c){var e=k+"."+a.name+".$viewValue";d.$watch(e,function(){i.$errors=[],b.removeError(c,m)},!0)}(o,p),m.blurTrig&&p.bind("blur",function(){if(m.blurTrig){var a=this,d=angular.element(this);c(function(){if(i[a.name].$valid)b.removeError(d,m);else{var c=b.getErrorMessages(a,i[a.name].$error);b.showError(d,c,m)}},50)}}))}var q=function(){for(var a=[],c=0;c<j.length;c++){var e=j[c];if(b.elemTypes.toString().indexOf(e.type)>-1&&!b.isEmpty(e.name)){if(i[e.name].$valid){angular.element(e).removeClass("error").addClass("valid");continue}var f=b.getErrorMessages(e,i[e.name].$error);a.push(f[0]),b.removeError(e,m),b.showError(e,f,m)}}!b.isEmpty(a)&&a.length>0?i.$errors=a:i.$errors=[],d.$$phase||d.$apply(i.$errors)};i&&(i.doValidate=q,i.reset=function(){c(function(){i.$setPristine();for(var a=0;a<j.length;a++){var c=j[a],d=angular.element(c);b.removeError(d,m)}})}),f.w5cSubmit&&angular.isFunction(l)&&(e.bind("submit",function(){q(),i.$valid&&angular.isFunction(l)&&d.$apply(function(){l(d)})}),h.needBindKeydown=!0),h.needBindKeydown&&e.bind("keydown keypress",function(a){if(13===a.which){var b=document.activeElement;if("textarea"!==b.type){var c=e.find("button");c&&c[0]&&c[0].focus(),b.focus(),q(),a.preventDefault(),i.$valid&&angular.isFunction(h.submitSuccessFn)&&d.$apply(function(){h.submitSuccessFn(d)})}}})}}}]).directive("w5cFormSubmit",["$parse",function(a){return{require:"^w5cFormValidate",link:function(b,c,d,e){var f=a(d.w5cFormSubmit);c.bind("click",function(){e.doValidate(f)}),e.needBindKeydown=!0,e.submitSuccessFn=f}}}]).directive("w5cRepeat",[function(){"use strict";return{require:"ngModel",link:function(a,b,c,d){var e=b.inheritedData("$formController")[c.w5cRepeat];d.$parsers.push(function(a){return a===e.$viewValue?(d.$setValidity("repeat",!0),a):void d.$setValidity("repeat",!1)}),e.$parsers.push(function(a){return d.$setValidity("repeat",a===d.$viewValue),a})}}}]).directive("w5cUniqueCheck",["$timeout","$http","w5cValidator",function(a,b,c){return{require:["ngModel","?^w5cFormValidate","?^form"],link:function(a,d,e,f){var g=f[0],h=f[1],i=f[2],j=function(){var f=a.$eval(e.w5cUniqueCheck),j=f.url,k=f.isExists;b.get(j).success(function(a){var b=k===!1?"true"==a||1==a:!("true"==a||1==a);if(g.$setValidity("w5cuniquecheck",b),!b){var e=c.getErrorMessage("w5cuniquecheck",d[0]);c.showError(d[0],[e],h.options),i.$errors?i.$errors.unshift(e):i.$errors=[e]}})};g.$viewChangeListeners.push(function(){i.$errors=[],g.$setValidity("w5cuniquecheck",!0),(!g.$invalid||g.$error.w5cuniquecheck)&&g.$dirty&&j()});var k=a.$eval(e.ngModel);if(k){if(g.$invalid&&!g.$error.w5cuniquecheck)return;j()}}}}]),function(a,b){"function"==typeof define&&define.amd?define(function(){return b(a,a.document)}):"undefined"!=typeof module&&module.exports?module.exports=b(a,a.document):a.Notify=b(a,a.document)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a){return"function"==typeof a}function d(a,b){if("string"!=typeof a)throw new Error("Notify(): first arg (title) must be a string.");if(this.title=a,this.options={icon:"",body:"",tag:"",notifyShow:null,notifyClose:null,notifyClick:null,notifyError:null,timeout:null},this.permission=null,d.isSupported&&"object"==typeof b){for(var e in b)b.hasOwnProperty(e)&&(this.options[e]=b[e]);c(this.options.notifyShow)&&(this.onShowCallback=this.options.notifyShow),c(this.options.notifyClose)&&(this.onCloseCallback=this.options.notifyClose),c(this.options.notifyClick)&&(this.onClickCallback=this.options.notifyClick),c(this.options.notifyError)&&(this.onErrorCallback=this.options.notifyError)}}return d.isSupported="Notification"in a,d.needsPermission=!(d.isSupported&&"granted"===Notification.permission),d.permissionLevel=d.isSupported?Notification.permission:null,d.requestPermission=function(b,e){d.isSupported&&a.Notification.requestPermission(function(a){switch(a){case"granted":d.needsPermission=!1,c(b)&&b();break;case"denied":c(e)&&e()}})},d.prototype.show=function(){d.isSupported&&(this.myNotify=new Notification(this.title,{body:this.options.body,tag:this.options.tag,icon:this.options.icon}),this.options.timeout&&!isNaN(this.options.timeout)&&setTimeout(this.close.bind(this),1e3*this.options.timeout),this.myNotify.addEventListener("show",this,!1),this.myNotify.addEventListener("error",this,!1),this.myNotify.addEventListener("close",this,!1),this.myNotify.addEventListener("click",this,!1))},d.prototype.onShowNotification=function(a){this.onShowCallback&&this.onShowCallback(a)},d.prototype.onCloseNotification=function(a){this.onCloseCallback&&this.onCloseCallback(a),this.destroy()},d.prototype.onClickNotification=function(a){this.onClickCallback&&this.onClickCallback(a)},d.prototype.onErrorNotification=function(a){this.onErrorCallback&&this.onErrorCallback(a),this.destroy()},d.prototype.destroy=function(){this.myNotify.removeEventListener("show",this,!1),this.myNotify.removeEventListener("error",this,!1),this.myNotify.removeEventListener("close",this,!1),this.myNotify.removeEventListener("click",this,!1)},d.prototype.close=function(){this.myNotify.close()},d.prototype.handleEvent=function(a){switch(a.type){case"show":this.onShowNotification(a);break;case"close":this.onCloseNotification(a);break;case"click":this.onClickNotification(a);break;case"error":this.onErrorNotification(a)}},d}),angular.module("wt.genius",[]),function(){"use strict";angular.module("wt.genius").provider("$wtNotify",[function(){var a={title:"Hey, 我在这里!",body:"",icon:"",tag:"",lang:"en",timeout:2,notifyShow:function(){},notifyClose:function(){},notifyClick:function(){},notifyError:function(){}},b={};this.config=function(a){b=a},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$injector","$position","$timeout",function(c,d,e,f,g,h,i,j,k,l){function m(c){var d=this.options=angular.extend({},a,b,c),e=new Notify(d.title,d);Notify.needsPermission?Notify.requestPermission(function(){e.show()}):e.show()}var n;return n={notify:function(a){return new m(a)},notSetPermission:"default"==Notify.permissionLevel,checkPermission:function(a,b,c){var a=a||function(){},b=b||function(){},c=c||function(){};Notify.needsPermission?Notify.requestPermission(function(){n.permissionLevel="granted",n.needsPermission=!1,a()},function(){n.permissionLevel="denied",n.needsPermission=!0,b()}):(n.permissionLevel="granted",a()),n.notSetPermission=!1,c()},needsPermission:Notify.needsPermission,requestPermission:Notify.requestPermission,isSupported:Notify.isSupported,permissionLevel:Notify.permissionLevel}}]}])}(),function(){"use strict";angular.module("wt.genius").provider("$wtRetina",[function(){var a={};this.config=function(b){a=b},this.$get=[function(){var a="(min--moz-device-pixel-ratio: 1.5),                                        (-o-min-device-pixel-ratio: 3/2),                                        (-webkit-min-device-pixel-ratio: 1.5),                                        (min-device-pixel-ratio: 1.5),                                        (min-resolution: 144dpi),                                        (min-resolution: 1.5dppx)",b=window.matchMedia(a);return{isRetina:b.matches,media:b.media}}]}])}(),function(){var a={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["class","src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:["class"],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","colspan","align","valign"],tfoot:["align","valign"],th:["width","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}};angular.module("ycConstantXSSWhiteList",[]).constant("ycConstantXSSWhiteList",a)}(),angular.module("wt.directive.tpls",[]),angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig","uiDateConverter",function(a,b){"use strict";var c;return c={},angular.extend(c,a),{require:"?ngModel",link:function(c,d,e,f){var g=function(){return angular.extend({},a,c.$eval(e.uiDate))},h=function(){function a(){var a=["Hours","Minutes","Seconds","Milliseconds"],b=angular.isDate(f.$modelValue),c={};b&&angular.forEach(a,function(a){c[a]=f.$modelValue["get"+a]()}),f.$setViewValue(d.datepicker("getDate")),b&&angular.forEach(a,function(a){f.$viewValue["set"+a](c[a])})}var h=!1,i=g();if(f){var j=i.onSelect||angular.noop;i.onSelect=function(b,e){c.$apply(function(){h=!0,a(),j(b,e),d.blur()})};var k=i.beforeShow||angular.noop;i.beforeShow=function(a,b){h=!0,k(a,b)};var l=i.onClose||angular.noop;i.onClose=function(a,b){h=!1,l(a,b)},d.off("blur.datepicker").on("blur.datepicker",function(){h||c.$apply(function(){d.datepicker("setDate",d.datepicker("getDate")),a()})}),f.$render=function(){var a=f.$modelValue;if(angular.isDefined(a)&&null!==a&&!angular.isDate(a)){if(!angular.isString(f.$modelValue))throw new Error("ng-Model value must be a Date, or a String object with a date formatter - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");a=b.stringToDate(e.uiDateFormat,f.$modelValue)}d.datepicker("setDate",a)}}d.data("datepicker")?(d.datepicker("option",i),d.datepicker("refresh")):(d.datepicker(i),d.on("$destroy",function(){d.datepicker("destroy")})),f&&f.$render()};c.$watch(g,h,!0)}}}]).factory("uiDateConverter",["uiDateFormatConfig",function(a){function b(b,c){if(b=b||a,c){if(b)return jQuery.datepicker.formatDate(b,c);if(c.toISOString)return c.toISOString()}return null}function c(b,c){if(b=b||a,angular.isString(c)){if(b)return jQuery.datepicker.parseDate(b,c);var d=new Date(c);return isNaN(d.getTime())?null:d}return null}return{stringToDate:c,dateToString:b}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateConverter",function(a){var b={require:"ngModel",link:function(b,c,d,e){var f=d.uiDateFormat;e.$formatters.unshift(function(b){return a.stringToDate(f,b)}),e.$parsers.push(function(b){return a.dateToString(f,b)})}};return b}]),angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$locale",function(a,b){var c=a.eventSources,d=a.calendarWatchEvent?a.calendarWatchEvent:angular.noop,e=function(b){return function(){if(a.$root.$$phase)return b.apply(this,arguments);var c=arguments,d=this;return a.$root.$apply(function(){return b.apply(d,c)})}},f=1;this.eventFingerprint=function(a){return a._id||(a._id=f++),""+a._id+(a.id||"")+(a.title||"")+(a.url||"")+(+a.start||"")+(+a.end||"")+(a.allDay||"")+(a.className||"")+d({event:a})||""};var g=1,h=1;this.sourceFingerprint=function(a){var b=""+(a.__id||(a.__id=g++)),c=angular.isObject(a)&&a.events;return c&&(b=b+"-"+(c.__id||(c.__id=h++))),b},this.allEvents=function(){for(var a=[],b=0,d=c.length;d>b;b++){var e=c[b];if(angular.isArray(e))a.push(e);else if(angular.isObject(e)&&angular.isArray(e.events)){var f={};for(var g in e)"_id"!==g&&"events"!==g&&(f[g]=e[g]);for(var h=0;h<e.events.length;h++)angular.extend(e.events[h],f);a.push(e.events)}}return Array.prototype.concat.apply([],a)},this.changeWatcher=function(a,b){var c,d=function(){for(var c,d,e=angular.isFunction(a)?a():a,g=[],h=0,i=e.length;i>h;h++)d=e[h],c=b(d),f[c]=d,g.push(c);return g},e=function(a,b){var c,d,e=[],f={};for(c=0,d=b.length;d>c;c++)f[b[c]]=!0;for(c=0,d=a.length;d>c;c++)f[a[c]]||e.push(a[c]);return e},f={},g=function(a,d){var g,h,i,j,k={},l=e(d,a);for(g=0,h=l.length;h>g;g++){var m=l[g];i=f[m],delete f[m];var n=b(i);n===m?c.onRemoved(i):(k[n]=m,c.onChanged(i))}var o=e(a,d);for(g=0,h=o.length;h>g;g++)j=o[g],i=f[j],k[j]||c.onAdded(i)};return c={subscribe:function(a,b){a.$watch(d,function(a,c){var d=!(b&&b(a,c)===!1);d&&g(a,c)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(a,b){var c={};return angular.extend(c,b),angular.extend(c,a),angular.forEach(c,function(a,b){"function"==typeof a&&(c[b]=e(c[b]))}),c},this.getLocaleConfig=function(a){if(!a.lang||a.useNgLocale){var c=function(a){var b,c;b=[];for(c in a)b[c]=a[c];return b},d=b.DATETIME_FORMATS;return{monthNames:c(d.MONTH),monthNamesShort:c(d.SHORTMONTH),dayNames:c(d.DAY),dayNamesShort:c(d.SHORTDAY)}}return{}}}]).directive("uiCalendar",["uiCalendarConfig",function(a){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(b,c,d,e){function f(){var c,f=d.uiCalendar?b.$parent.$eval(d.uiCalendar):{};c=e.getFullCalendarConfig(f,a);var g=e.getLocaleConfig(c);angular.extend(g,c),l={eventSources:h},angular.extend(l,g),l.calendars=null;var i={};for(var j in l)"eventSources"!==j&&(i[j]=l[j]);return JSON.stringify(i)}var g,h=b.eventSources,i=!1,j=e.changeWatcher(h,e.sourceFingerprint),k=e.changeWatcher(e.allEvents,e.eventFingerprint),l=null;b.destroy=function(){g&&g.fullCalendar&&g.fullCalendar("destroy"),g=d.calendar?a.calendars[d.calendar]=$(c).html(""):$(c).html("")},b.init=function(){g.fullCalendar(l),d.calendar&&(a.calendars[d.calendar]=g)},j.onAdded=function(a){g.fullCalendar("addEventSource",a),i=!0},j.onRemoved=function(a){g.fullCalendar("removeEventSource",a),i=!0},j.onChanged=function(a){g.fullCalendar("refetchEvents"),i=!0},k.onAdded=function(a){g.fullCalendar("renderEvent",a,a.stick?!0:!1)},k.onRemoved=function(a){g.fullCalendar("removeEvents",a._id)},k.onChanged=function(a){for(var b=g.fullCalendar("clientEvents",a._id),c=0;c<b.length;c++){
var d=b[c];d=angular.extend(d,a),g.fullCalendar("updateEvent",d)}},j.subscribe(b),k.subscribe(b,function(){return i===!0?(i=!1,!1):void 0}),b.$watch(f,function(a,c){b.destroy(),b.init()})}}}]),function(a){a.Jcrop=function(b,c){function d(a){return Math.round(a)+"px"}function e(a){return J.baseClass+"-"+a}function f(){return a.fx.step.hasOwnProperty("backgroundColor")}function g(b){var c=a(b).offset();return[c.left,c.top]}function h(a){return[a.pageX-I[0],a.pageY-I[1]]}function i(b){"object"!=typeof b&&(b={}),J=a.extend(J,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!=typeof J[b]&&(J[b]=function(){})})}function j(a,b,c){if(I=g(R),oa.setCursor("move"===a?a:a+"-resize"),"move"===a)return oa.activateHandlers(l(b),q,c);var d=la.getFixed(),e=m(a),f=la.getCorner(m(e));la.setPressed(la.getCorner(e)),la.setCurrent(f),oa.activateHandlers(k(a,d),q,c)}function k(a,b){return function(c){if(J.aspectRatio)switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}else switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}la.setCurrent(c),na.update()}}function l(a){var b=a;return pa.watchKeys(),function(a){la.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,na.update()}}function m(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function n(a){return function(b){return J.disabled?!1:"move"!==a||J.allowMove?(I=g(R),da=!0,j(a,h(b)),b.stopPropagation(),b.preventDefault(),!1):!1}}function o(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),ba=a.width()/d,ca=a.height()/e,a.width(d).height(e)}function p(a){return{x:a.x*ba,y:a.y*ca,x2:a.x2*ba,y2:a.y2*ca,w:a.w*ba,h:a.h*ca}}function q(a){var b=la.getFixed();b.w>J.minSelect[0]&&b.h>J.minSelect[1]?(na.enableHandles(),na.done()):na.release(),oa.setCursor(J.allowSelect?"crosshair":"default")}function r(a){if(J.disabled)return!1;if(!J.allowSelect)return!1;da=!0,I=g(R),na.disableHandles(),oa.setCursor("crosshair");var b=h(a);return la.setPressed(b),na.update(),oa.activateHandlers(s,q,"touch"===a.type.substring(0,5)),pa.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function s(a){la.setCurrent(a),na.update()}function t(){var b=a("<div></div>").addClass(e("tracker"));return L&&b.css({opacity:0,backgroundColor:"white"}),b}function u(a){U.removeClass().addClass(e("holder")).addClass(a)}function v(a,b){function c(){window.setTimeout(s,l)}var d=a[0]/ba,e=a[1]/ca,f=a[2]/ba,g=a[3]/ca;if(!ea){var h=la.flipCoords(d,e,f,g),i=la.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=J.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=J.swingSpeed;d=k[0],e=k[1],f=k[2],g=k[3],na.animMode(!0);var s=function(){return function(){q+=(100-q)/r,k[0]=Math.round(d+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),100>q?(x(k),c()):(na.done(),na.animMode(!1),"function"==typeof b&&b.call(qa))}}();c()}}function w(a){x([a[0]/ba,a[1]/ca,a[2]/ba,a[3]/ca]),J.onSelect.call(qa,p(la.getFixed())),na.enableHandles()}function x(a){la.setPressed([a[0],a[1]]),la.setCurrent([a[2],a[3]]),na.update()}function y(){return p(la.getFixed())}function z(){return la.getFixed()}function A(a){i(a),H()}function B(){J.disabled=!0,na.disableHandles(),na.setCursor("default"),oa.setCursor("default")}function C(){J.disabled=!1,H()}function D(){na.done(),oa.activateHandlers(null,null)}function E(){U.remove(),O.show(),O.css("visibility","visible"),a(b).removeData("Jcrop")}function F(a,b){na.release(),B();var c=new Image;c.onload=function(){var d=c.width,e=c.height,f=J.boxWidth,g=J.boxHeight;R.width(d).height(e),R.attr("src",a),V.attr("src",a),o(R,f,g),S=R.width(),T=R.height(),V.width(S).height(T),ha.width(S+2*ga).height(T+2*ga),U.width(S).height(T),ma.resize(S,T),C(),"function"==typeof b&&b.call(qa)},c.src=a}function G(a,b,c){var d=b||J.bgColor;J.bgFade&&f()&&J.fadeTime&&!c?a.animate({backgroundColor:d},{queue:!1,duration:J.fadeTime}):a.css("backgroundColor",d)}function H(a){J.allowResize?a?na.enableOnly():na.enableHandles():na.disableHandles(),oa.setCursor(J.allowSelect?"crosshair":"default"),na.setCursor(J.allowMove?"move":"default"),J.hasOwnProperty("trueSize")&&(ba=J.trueSize[0]/S,ca=J.trueSize[1]/T),J.hasOwnProperty("setSelect")&&(w(J.setSelect),na.done(),delete J.setSelect),ma.refresh(),J.bgColor!=ia&&(G(J.shade?ma.getShades():U,J.shade?J.shadeColor||J.bgColor:J.bgColor),ia=J.bgColor),ja!=J.bgOpacity&&(ja=J.bgOpacity,J.shade?ma.refresh():na.setBgOpacity(ja)),Z=J.maxSize[0]||0,$=J.maxSize[1]||0,_=J.minSize[0]||0,aa=J.minSize[1]||0,J.hasOwnProperty("outerImage")&&(R.attr("src",J.outerImage),delete J.outerImage),na.refresh()}var I,J=a.extend({},a.Jcrop.defaults),K=navigator.userAgent.toLowerCase(),L=/msie/.test(K),M=/msie [1-6]\./.test(K);"object"!=typeof b&&(b=a(b)[0]),"object"!=typeof c&&(c={}),i(c);var N={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},O=a(b),P=!0;if("IMG"==b.tagName){if(0!=O[0].width&&0!=O[0].height)O.width(O[0].width),O.height(O[0].height);else{var Q=new Image;Q.src=O[0].src,O.width(Q.width),O.height(Q.height)}var R=O.clone().removeAttr("id").css(N).show();R.width(O.width()),R.height(O.height()),O.after(R).hide()}else R=O.css(N).show(),P=!1,null===J.shade&&(J.shade=!0);o(R,J.boxWidth,J.boxHeight);var S=R.width(),T=R.height(),U=a("<div />").width(S).height(T).addClass(e("holder")).css({position:"relative",backgroundColor:J.bgColor}).insertAfter(O).append(R);J.addClass&&U.addClass(J.addClass);var V=a("<div />"),W=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=a("<div />").width("100%").height("100%").css("zIndex",320),Y=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=la.getFixed();J.onDblClick.call(qa,a)}).insertBefore(R).append(W,X);P&&(V=a("<img />").attr("src",R.attr("src")).css(N).width(S).height(T),W.append(V)),M&&Y.css({overflowY:"hidden"});var Z,$,_,aa,ba,ca,da,ea,fa,ga=J.boundary,ha=t().width(S+2*ga).height(T+2*ga).css({position:"absolute",top:d(-ga),left:d(-ga),zIndex:290}).mousedown(r),ia=J.bgColor,ja=J.bgOpacity;I=g(R);var ka=function(){function a(){var a,b={},c=["touchstart","touchmove","touchend"],d=document.createElement("div");try{for(a=0;a<c.length;a++){var e=c[a];e="on"+e;var f=e in d;f||(d.setAttribute(e,"return;"),f="function"==typeof d[e]),b[c[a]]=f}return b.touchstart&&b.touchend&&b.touchmove}catch(g){return!1}}function b(){return J.touchSupport===!0||J.touchSupport===!1?J.touchSupport:a()}return{createDragger:function(a){return function(b){return J.disabled?!1:"move"!==a||J.allowMove?(I=g(R),da=!0,j(a,h(ka.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1):!1}},newSelection:function(a){return r(ka.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),la=function(){function a(a){a=g(a),o=m=a[0],p=n=a[1]}function b(a){a=g(a),k=a[0]-o,l=a[1]-p,o=a[0],p=a[1]}function c(){return[k,l]}function d(a){var b=a[0],c=a[1];0>m+b&&(b-=b+m),0>n+c&&(c-=c+n),p+c>T&&(c+=T-(p+c)),o+b>S&&(b+=S-(o+b)),m+=b,o+=b,n+=c,p+=c}function e(a){var b=f();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function f(){if(!J.aspectRatio)return i();var a,b,c,d,e=J.aspectRatio,f=J.minSize[0]/ba,g=J.maxSize[0]/ba,k=J.maxSize[1]/ca,l=o-m,q=p-n,r=Math.abs(l),s=Math.abs(q),t=r/s;return 0===g&&(g=10*S),0===k&&(k=10*T),e>t?(b=p,c=s*e,a=0>l?m-c:c+m,0>a?(a=0,d=Math.abs((a-m)/e),b=0>q?n-d:d+n):a>S&&(a=S,d=Math.abs((a-m)/e),b=0>q?n-d:d+n)):(a=o,d=r/e,b=0>q?n-d:n+d,0>b?(b=0,c=Math.abs((b-n)*e),a=0>l?m-c:c+m):b>T&&(b=T,c=Math.abs(b-n)*e,a=0>l?m-c:c+m)),a>m?(f>a-m?a=m+f:a-m>g&&(a=m+g),b=b>n?n+(a-m)/e:n-(a-m)/e):m>a&&(f>m-a?a=m-f:m-a>g&&(a=m-g),b=b>n?n+(m-a)/e:n-(m-a)/e),0>a?(m-=a,a=0):a>S&&(m-=a-S,a=S),0>b?(n-=b,b=0):b>T&&(n-=b-T,b=T),j(h(m,n,a,b))}function g(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>S&&(a[0]=S),a[1]>T&&(a[1]=T),[Math.round(a[0]),Math.round(a[1])]}function h(a,b,c,d){var e=a,f=c,g=b,h=d;return a>c&&(e=c,f=a),b>d&&(g=d,h=b),[e,g,f,h]}function i(){var a,b=o-m,c=p-n;return Z&&Math.abs(b)>Z&&(o=b>0?m+Z:m-Z),$&&Math.abs(c)>$&&(p=c>0?n+$:n-$),aa/ca&&Math.abs(c)<aa/ca&&(p=c>0?n+aa/ca:n-aa/ca),_/ba&&Math.abs(b)<_/ba&&(o=b>0?m+_/ba:m-_/ba),0>m&&(o-=m,m-=m),0>n&&(p-=n,n-=n),0>o&&(m-=o,o-=o),0>p&&(n-=p,p-=p),o>S&&(a=o-S,m-=a,o-=a),p>T&&(a=p-T,n-=a,p-=a),m>S&&(a=m-T,p-=a,n-=a),n>T&&(a=n-T,p-=a,n-=a),j(h(m,n,o,p))}function j(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var k,l,m=0,n=0,o=0,p=0;return{flipCoords:h,setPressed:a,setCurrent:b,getOffset:c,moveOffset:d,getCorner:e,getFixed:f}}(),ma=function(){function b(a,b){o.left.css({height:d(b)}),o.right.css({height:d(b)})}function c(){return e(la.getFixed())}function e(a){o.top.css({left:d(a.x),width:d(a.w),height:d(a.y)}),o.bottom.css({top:d(a.y2),left:d(a.x),width:d(a.w),height:d(T-a.y2)}),o.right.css({left:d(a.x2),width:d(S-a.x2)}),o.left.css({width:d(a.x)})}function f(){return a("<div />").css({position:"absolute",backgroundColor:J.shadeColor||J.bgColor}).appendTo(n)}function g(){m||(m=!0,n.insertBefore(R),c(),na.setBgOpacity(1,0,1),V.hide(),h(J.shadeColor||J.bgColor,1),na.isAwake()?j(J.bgOpacity,1):j(1,1))}function h(a,b){G(l(),a,b)}function i(){m&&(n.remove(),V.show(),m=!1,na.isAwake()?na.setBgOpacity(J.bgOpacity,1,1):(na.setBgOpacity(1,1,1),na.disableHandles()),G(U,0,1))}function j(a,b){m&&(J.bgFade&&!b?n.animate({opacity:1-a},{queue:!1,duration:J.fadeTime}):n.css({opacity:1-a}))}function k(){J.shade?g():i(),na.isAwake()&&j(J.bgOpacity)}function l(){return n.children()}var m=!1,n=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),o={top:f(),left:f().height(T),right:f().height(T),bottom:f()};return{update:c,updateRaw:e,getShades:l,setBgColor:h,enable:g,disable:i,resize:b,refresh:k,opacity:j}}(),na=function(){function b(b){var c=a("<div />").css({position:"absolute",opacity:J.borderOpacity}).addClass(e(b));return W.append(c),c}function c(b,c){var d=a("<div />").mousedown(n(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return ka.support&&d.bind("touchstart.jcrop",ka.createDragger(b)),X.append(d),d}function f(a){var b=J.handleSize,d=c(a,B++).css({opacity:J.handleOpacity}).addClass(e("handle"));return b&&d.width(b).height(b),d}function g(a){return c(a,B++).addClass("jcrop-dragbar")}function h(a){var b;for(b=0;b<a.length;b++)E[a[b]]=g(a[b])}function i(a){var c,d;for(d=0;d<a.length;d++){switch(a[d]){case"n":c="hline";break;case"s":c="hline bottom";break;case"e":c="vline right";break;case"w":c="vline"}C[a[d]]=b(c)}}function j(a){var b;for(b=0;b<a.length;b++)D[a[b]]=f(a[b])}function k(a,b){J.shade||V.css({top:d(-b),left:d(-a)}),Y.css({top:d(b),left:d(a)})}function l(a,b){Y.width(Math.round(a)).height(Math.round(b))}function m(){var a=la.getFixed();la.setPressed([a.x,a.y]),la.setCurrent([a.x2,a.y2]),o()}function o(a){return A?q(a):void 0}function q(a){var b=la.getFixed();l(b.w,b.h),k(b.x,b.y),J.shade&&ma.updateRaw(b),A||s(),a?J.onSelect.call(qa,p(b)):J.onChange.call(qa,p(b))}function r(a,b,c){(A||b)&&(J.bgFade&&!c?R.animate({opacity:a},{queue:!1,duration:J.fadeTime}):R.css("opacity",a))}function s(){Y.show(),J.shade?ma.opacity(ja):r(ja,!0),A=!0}function u(){x(),Y.hide(),J.shade?ma.opacity(1):r(1),A=!1,J.onRelease.call(qa)}function v(){F&&X.show()}function w(){return F=!0,J.allowResize?(X.show(),!0):void 0}function x(){F=!1,X.hide()}function y(a){a?(ea=!0,x()):(ea=!1,w())}function z(){y(!1),m()}var A,B=370,C={},D={},E={},F=!1;J.dragEdges&&a.isArray(J.createDragbars)&&h(J.createDragbars),a.isArray(J.createHandles)&&j(J.createHandles),J.drawBorders&&a.isArray(J.createBorders)&&i(J.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var G=t().mousedown(n("move")).css({cursor:"move",position:"absolute",zIndex:360});return ka.support&&G.bind("touchstart.jcrop",ka.createDragger("move")),W.append(G),x(),{updateVisible:o,update:q,release:u,refresh:m,isAwake:function(){return A},setCursor:function(a){G.css("cursor",a)},enableHandles:w,enableOnly:function(){F=!0},showHandles:v,disableHandles:x,animMode:y,setBgOpacity:r,done:z}}(),oa=function(){function b(b){ha.css({zIndex:450}),b?a(document).bind("touchmove.jcrop",g).bind("touchend.jcrop",i):m&&a(document).bind("mousemove.jcrop",d).bind("mouseup.jcrop",e)}function c(){ha.css({zIndex:290}),a(document).unbind(".jcrop")}function d(a){return k(h(a)),!1}function e(a){return a.preventDefault(),a.stopPropagation(),da&&(da=!1,l(h(a)),na.isAwake()&&J.onSelect.call(qa,p(la.getFixed())),c(),k=function(){},l=function(){}),!1}function f(a,c,d){return da=!0,k=a,l=c,b(d),!1}function g(a){return k(h(ka.cfilter(a))),!1}function i(a){return e(ka.cfilter(a))}function j(a){ha.css("cursor",a)}var k=function(){},l=function(){},m=J.trackDocument;return m||ha.mousemove(d).mouseup(e).mouseout(e),R.before(ha),{activateHandlers:f,setCursor:j}}(),pa=function(){function b(){J.keySupport&&(f.show(),f.focus())}function c(a){f.hide()}function d(a,b,c){J.allowMove&&(la.moveOffset([b,c]),na.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function e(a){if(a.ctrlKey||a.metaKey)return!0;fa=a.shiftKey?!0:!1;var b=fa?10:1;switch(a.keyCode){case 37:d(a,-b,0);break;case 39:d(a,b,0);break;case 38:d(a,0,-b);break;case 40:d(a,0,b);break;case 27:J.allowSelect&&na.release();break;case 9:return!0}return!1}var f=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),g=a("<div />").css({position:"absolute",overflow:"hidden"}).append(f);return J.keySupport&&(f.keydown(e).blur(c),M||!J.fixedSupport?(f.css({position:"absolute",left:"-20px"}),g.append(f).insertBefore(R)):f.insertBefore(R)),{watchKeys:b}}();ka.support&&ha.bind("touchstart.jcrop",ka.newSelection),X.hide(),H(!0);var qa={setImage:F,animateTo:v,setSelect:w,setOptions:A,tellSelect:y,tellScaled:z,setClass:u,disable:B,enable:C,cancel:D,release:na.release,destroy:E,focus:pa.watchKeys,getBounds:function(){return[S*ba,T*ca]},getWidgetSize:function(){return[S,T]},getScaleFactor:function(){return[ba,ca]},getOptions:function(){return J},ui:{holder:U,selection:Y}};return L&&U.bind("selectstart",function(){return!1}),O.data("Jcrop",qa),qa},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if("api"===b)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else"IMG"==this.tagName?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function e(){g.complete?(f.unbind(".jcloader"),a.isFunction(c)&&c.call(g)):window.setTimeout(e,50)}var f=a(b),g=f[0];f.bind("load.jcloader",e).bind("error.jcloader",function(b){f.unbind(".jcloader"),a.isFunction(d)&&d.call(g)}),g.complete&&a.isFunction(c)&&(f.unbind(".jcloader"),c.call(g))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(a){"use strict";a.module("ngJcrop",[]).constant("ngJcroptDefaultConfig",{widthLimit:1e3,heightLimit:1e3,previewImgStyle:{width:"100px",height:"100px",overflow:"hidden","margin-left":"5px"},jcrop:{aspectRatio:1,maxWidth:300,maxHeight:300}}).constant("ngJcropTemplate",'<div class="ng-jcrop">    <div class="ng-jcrop-image-wrapper">        <img class="ng-jcrop-image" />   </div>   <div class="ng-jcrop-thumbnail-wrapper" ng-style="previewImgStyle">       <img class="ng-jcrop-thumbnail" />   </div></div>').provider("ngJcropConfig",["ngJcroptDefaultConfig","ngJcropTemplate",function(b,c){function d(d){return"object"==typeof d&&(d="default"),d in e||(e[d]=a.copy(b),e[d].template=c),e[d]}var e={};return d("default"),{setConfig:function(b,c){var e=d(b);a.extend(e,"object"==typeof b?b:c)},setJcropConfig:function(b,c){var e=d(b);a.extend(e.jcrop,"object"==typeof b?b:c)},setPreviewStyle:function(b,c){var e=d(b);a.extend(e.previewImgStyle,"object"==typeof b?b:c)},$get:function(){return e}}}]).run(["$window",function(a){if(!a.jQuery)throw new Error("jQuery isn't included");if(!a.jQuery.Jcrop)throw new Error("Jcrop isn't included")}]).directive("ngJcrop",["ngJcropConfig",function(a){return a=a["default"],{restrict:"A",scope:{ngJcrop:"=",thumbnail:"=",selection:"=",ngJcropConfigName:"@"},template:a.template,controller:"JcropController"}}]).directive("ngJcropInput",function(){return{restrict:"A",controller:"JcropInputController"}}).controller("JcropInputController",["$rootScope","$element","$scope",function(a,b,c){if("file"!==b[0].type)throw new Error('ngJcropInput directive must be placed with an input[type="file"]');c.setImage=function(c){var d=new FileReader;d.onload=function(c){a.$broadcast("JcropChangeSrc",c.target.result),b[0].value=""},d.readAsDataURL(c)},b.on("change",function(a){var b=a.currentTarget.files[0];c.setImage(b)})}]).controller("JcropController",["$scope","$element","ngJcropConfig",function(b,c,d){if(b.ngJcropConfigName||(b.ngJcropConfigName="default"),d=d[b.ngJcropConfigName],!d)throw new Error('Unknown "{name}" config name'.replace("{name}",b.ngJcropConfigName));if(a.isUndefined(b.selection))throw new Error("ngJcrop: attribute `selection` is mandatory");if(!a.isArray(b.selection)&&null!==b.selection)throw new Error("ngJcrop: attribute `selection` must be an array");b.mainImg=null,b.imgStyle={width:d.jcrop.maxWidth,height:d.jcrop.maxHeight},b.previewImg=null,b.previewImgStyle=d.previewImgStyle,b.jcrop=null,b.coords=b.selection,b.updateCurrentSizes=function(a){var c=a.width/d.jcrop.maxWidth,e=a.height/d.jcrop.maxHeight,f=a.width>d.jcrop.maxWidth&&c>e,g=a.height>d.jcrop.maxHeight&&e>c;f?(b.imgStyle.width=d.jcrop.maxWidth,b.imgStyle.height=a.height/c):g?(b.imgStyle.height=d.jcrop.maxHeight,b.imgStyle.width=a.width/e):(b.imgStyle.height=a.height,b.imgStyle.width=a.width)},b.getShrinkRatio=function(){var a=$("<img>").attr("src",b.mainImg[0].src)[0];if(d.jcrop.maxWidth>a.width&&d.jcrop.maxHeight>a.height)return 1;var c=a.width/d.jcrop.maxWidth,e=a.height/d.jcrop.maxHeight,f=a.width>d.jcrop.maxWidth&&c>e;return f?c:e},b.setSelection=function(c){a.isArray(b.coords)||(b.coords=[]),a.isArray(b.selection)||(b.selection=[]),b.coords[0]=c.x,b.coords[1]=c.y,b.coords[2]=c.x2,b.coords[3]=c.y2,b.coords[4]=c.w,b.coords[5]=c.h;var d=b.getShrinkRatio();b.selection[0]=Math.round(c.x*d),b.selection[1]=Math.round(c.y*d),b.selection[2]=Math.round(c.x2*d),b.selection[3]=Math.round(c.y2*d),b.selection[4]=Math.round(c.w*d),b.selection[5]=Math.round(c.h*d)},b.showPreview=function(a){if(b.selectionWatcher||b.$apply(function(){b.setSelection(a)}),b.thumbnail){var c=parseInt(b.previewImgStyle.width)/a.w,d=parseInt(b.previewImgStyle.height)/a.h;b.previewImg.css({width:Math.round(c*b.imgStyle.width)+"px",maxWidth:Math.round(c*b.imgStyle.width)+"px",height:Math.round(d*b.imgStyle.height)+"px",maxHeight:Math.round(d*b.imgStyle.height)+"px",marginLeft:"-"+Math.round(c*a.x)+"px",marginTop:"-"+Math.round(d*a.y)+"px"})}},b.onMainImageLoad=function(){b.mainImg.off("load",b.onMainImageLoad),b.updateCurrentSizes($("<img>").attr("src",b.mainImg[0].src)[0]);var c=a.extend({onChange:b.showPreview,onSelect:b.showPreview},d.jcrop);b.selection&&6===b.selection.length&&(c.setSelect=b.selection),b.jcrop=jQuery.Jcrop(b.mainImg,c)},b.destroy=function(){b.jcrop&&(b.mainImg&&b.mainImg.off("load"),b.jcrop.destroy(),b.jcrop=null)},b.initMainImage=function(a){b.mainImg=$("<img>").addClass("ng-jcrop-image"),b.mainImg.on("load",b.onMainImageLoad),b.mainImg.css({maxWidth:d.jcrop.maxWidth,maxHeight:d.jcrop.maxHeight}),b.mainImg.attr("src",a)},b.init=function(a){b.destroy(),b.initMainImage(a),b.imageWrapper=c.find(".ng-jcrop-image-wrapper"),b.imageWrapper.empty().append(b.mainImg),b.previewImg=c.find(".ng-jcrop-thumbnail"),b.previewImg.attr("src",a)},b.$on("$destroy",b.destroy),b.$on("JcropChangeSrc",function(a,c){b.$apply(function(){b.setSelection({x:0,y:0,x2:d.widthLimit,y2:d.heightLimit,w:d.widthLimit,h:d.heightLimit}),b.ngJcrop=c})}),b.$watch("ngJcrop",function(a,b,c){c.init(a)}),b.$watch("thumbnail",function(a,b,c){c.thumbnail?c.previewImg.show():c.previewImg.hide()})}])}(angular),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="7.0.14",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progressFunc=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(a){function b(c,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))c.append(e,d);else if("form"===a.sendFieldsAs)if(angular.isObject(d))for(var f in d)d.hasOwnProperty(f)&&b(c,d[f],e+"["+f+"]");else c.append(e,d);else d=angular.isString(d)?d:angular.toJson(d),"json-blob"===a.sendFieldsAs?c.append(e,new Blob([d],{type:"application/json"})):c.append(e,d)}return a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(c){var d,e=new FormData,f={};for(d in a.fields)a.fields.hasOwnProperty(d)&&(f[d]=a.fields[d]);c&&(f.data=c);for(d in f)if(f.hasOwnProperty(d)){var g=f[d];a.formDataAppender?a.formDataAppender(e,d,g):b(e,g,d)}if(null!=a.file){var h=a.fileFormDataName||"file";if(angular.isArray(a.file))for(var i=angular.isString(h),j=0;j<a.file.length;j++)e.append(i?h:h[j],a.file[j],a.fileName&&a.fileName[j]||a.file[j].name);else e.append(h,a.file,a.fileName||a.file.name)}return e}),d(a)},this.http=function(b){return b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},d(b)},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),function(){ngFileUpload.service("Upload",["$parse","$timeout","$compile","UploadValidate",function(a,b,c,d){var e=d;return e.getAttrWithDefaults=function(a,b){return null!=a[b]?a[b]:null==e.defaults[b]?e.defaults[b]:e.defaults[b].toString()},e.attrGetter=function(b,c,d,e){if(!d)return this.getAttrWithDefaults(c,b);try{return e?a(this.getAttrWithDefaults(c,b))(d,e):a(this.getAttrWithDefaults(c,b))(d)}catch(f){if(b.search(/min|max|pattern/i))return this.getAttrWithDefaults(c,b);throw f}},e.updateModel=function(c,d,f,g,h,i,j){function k(){var b=e.attrGetter("ngfKeep",d,f);if(b===!0){if(!h||!h.length)return;var j=(c&&c.$modelValue||d.$$ngfPrevFiles||[]).slice(0),k=!1;if(e.attrGetter("ngfKeepDistinct",d,f)===!0){for(var l=j.length,m=0;m<h.length;m++){for(var n=0;l>n&&h[m].name!==j[n].name;n++);n===l&&(j.push(h[m]),k=!0)}if(!k)return;h=j}else h=j.concat(h)}d.$$ngfPrevFiles=h;var o=h&&h.length?h[0]:null;if(c){var p=!e.attrGetter("ngfMultiple",d,f)&&!e.attrGetter("multiple",d)&&!b;a(e.attrGetter("ngModel",d)).assign(f,p?o:h)}var q=e.attrGetter("ngfModel",d);q&&a(q).assign(f,h),g&&a(g)(f,{$files:h,$file:o,$event:i})}j?k():e.validate(h,c,d,f,e.attrGetter("ngfValidateLater",d),function(){b(function(){k()})})},e}])}(),function(){function a(a,c,d,e,f,g,h,i){function j(){return"input"===c[0].tagName.toLowerCase()&&d.type&&"file"===d.type.toLowerCase()}function k(){return u("ngfChange")||u("ngfSelect")}function l(b){for(var c=b.__files_||b.target&&b.target.files,f=[],g=0;g<c.length;g++)f.push(c[g]);i.updateModel(e,d,a,k(),f.length?f:null,b)}function m(a){if(c!==a)for(var b=0;b<c[0].attributes.length;b++){var d=c[0].attributes[b];"type"!==d.name&&"class"!==d.name&&"id"!==d.name&&"style"!==d.name&&((null==d.value||""===d.value)&&("required"===d.name&&(d.value="required"),"multiple"===d.name&&(d.value="multiple")),a.attr(d.name,d.value))}}function n(){if(j())return c;var a=angular.element('<input type="file">');return m(a),a.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),b.push({el:c,ref:a}),document.body.appendChild(a[0]),a}function o(b){if(c.attr("disabled")||u("ngfSelectDisabled",a))return!1;var d=p(b);return null!=d?d:(r(b),q(navigator.userAgent)?setTimeout(function(){x[0].click()},0):x[0].click(),!1)}function p(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if("touchstart"===a.type)return w=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),"touchend"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-w)>20)return!1}}function q(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=i.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}function r(b){x.val()&&(x.val(null),i.updateModel(e,d,a,k(),null,b,!0))}function s(a){if(x&&!x.attr("__ngf_ie10_Fix_")){if(!x[0].parentNode)return void(x=null);a.preventDefault(),a.stopPropagation(),x.unbind("click");var b=x.clone();return x.replaceWith(b),x=b,x.attr("__ngf_ie10_Fix_","true"),x.bind("change",l),x.bind("click",s),x[0].click(),!1}x.removeAttr("__ngf_ie10_Fix_")}function t(a,b){return a===b||Boolean(16&a.compareDocumentPosition(b))}var u=function(a,b){return i.attrGetter(a,d,b)},v=[];v.push(a.$watch(u("ngfMultiple"),function(){x.attr("multiple",u("ngfMultiple",a))})),v.push(a.$watch(u("ngfCapture"),function(){x.attr("capture",u("ngfCapture",a))})),d.$observe("accept",function(){x.attr("accept",u("accept"))}),v.push(function(){d.$$observers&&delete d.$$observers.accept});var w=0,x=c;j()||(x=n()),x.bind("change",l),j()?c.bind("click",r):c.bind("click touchstart touchend",o),i.registerValidators(e,x,d,a),-1!==navigator.appVersion.indexOf("MSIE 10")&&x.bind("click",s),a.$on("$destroy",function(){j()||x.remove(),angular.forEach(v,function(a){a()})});for(var y=0;y<b.length;y++){var z=b[y];t(document,z.el[0])||(b.splice(y,1),z.ref.remove())}window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(c,x,l)}var b=[];ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}])}(),function(){function a(a){return"img"===a.tagName.toLowerCase()?"image":"audio"===a.tagName.toLowerCase()?"audio":"video"===a.tagName.toLowerCase()?"video":/\./}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){var d=a;return d.dataUrl=function(a,d){if(d&&null!=a.dataUrl||!d&&null!=a.blobUrl){var e=c.defer();return b(function(){e.resolve(d?a.dataUrl:a.blobUrl)}),e.promise}var f=d?a.$ngfDataUrlPromise:a.$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!d){var e;try{e=c.createObjectURL(a)}catch(f){return void b(function(){a.blobUrl="",g.reject()})}b(function(){a.blobUrl=e,e&&g.resolve(e)})}else{var h=new FileReader;h.onload=function(c){b(function(){a.dataUrl=c.target.result,g.resolve(c.target.result)})},h.onerror=function(){b(function(){a.dataUrl="",g.reject()})},h.readAsDataURL(a)}}else b(function(){a[d?"dataUrl":"blobUrl"]="",g.reject()})}),f=d?a.$ngfDataUrlPromise=g.promise:a.$ngfBlobUrlPromise=g.promise,f["finally"](function(){delete a[d?"$ngfDataUrlPromise":"$ngfBlobUrlPromise"]}),f},d}]);var b=angular.element("<style>.ngf-hide{display:none !important}</style>");document.getElementsByTagName("head")[0].appendChild(b[0]),ngFileUpload.directive("ngfSrc",["$compile","$timeout","Upload",function(b,c,d){return{restrict:"AE",link:function(b,e,f){c(function(){b.$watch(f.ngfSrc,function(g){if(angular.isString(g))return e.removeClass("ngf-hide"),e.attr("src",g);if(g&&0===g.type.indexOf(a(e[0]))){var h=d.attrGetter("ngfNoObjectUrl",f,b);d.dataUrl(g,h)["finally"](function(){c(function(){h&&g.dataUrl||!h&&g.blobUrl?(e.removeClass("ngf-hide"),e.attr("src",h?g.dataUrl:g.blobUrl)):e.addClass("ngf-hide")})})}else e.addClass("ngf-hide")})})}}}]),ngFileUpload.directive("ngfBackground",["Upload","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(b,d,e){c(function(){b.$watch(e.ngfBackground,function(f){if(angular.isString(f))return d.css("background-image","url('"+f+"')");if(f&&0===f.type.indexOf("image")){var g=a.attrGetter("ngfNoObjectUrl",e,b);a.dataUrl(f,g)["finally"](function(){c(function(){g&&f.dataUrl||!g&&f.blobUrl?d.css("background-image","url('"+(g?f.dataUrl:f.blobUrl)+"')"):d.css("background-image","")})})}else d.css("background-image","")})})}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d){return angular.isString(c)?b.trustAsResourceUrl(c):c&&!c.dataUrl?(void 0===c.dataUrl&&angular.isObject(c)&&(c.dataUrl=null,a.dataUrl(c,d)),""):(c&&c.dataUrl?b.trustAsResourceUrl(c.dataUrl):c)||""}}])}(),function(){function a(b){if(b.length>2&&"/"===b[0]&&"/"===b[b.length-1])return b.substring(1,b.length-1);var c=b.split(","),d="";if(c.length>1)for(var e=0;e<c.length;e++)d+="("+a(c[e])+")",e<c.length-1&&(d+="|");else 0===b.indexOf(".")&&(b="*"+b),d="^"+b.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",d=d.replace(/\\\*/g,".*").replace(/\\\?/g,".");return d}function b(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1e3*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1e6*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1e9*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));
if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a}ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(c,d,e){var f=c;return f.registerValidators=function(a,b,c,d){function e(a){angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})}a&&(a.$ngfValidations=[],a.$formatters.push(function(g){return f.attrGetter("ngfValidateLater",c,d)||!a.$$ngfValidated?(f.validate(g,a,c,d,!1,function(){e(a),a.$$ngfValidated=!1}),g&&0===g.length&&(g=null),!b||null!=g&&0!==g.length||b.val()&&b.val(null)):(e(a),a.$$ngfValidated=!1),g}))},f.validatePattern=function(b,c){if(!c)return!0;var d=new RegExp(a(c),"gi");return null!=b.type&&d.test(b.type.toLowerCase())||null!=b.name&&d.test(b.name.toLowerCase())},f.validate=function(a,c,d,e,g,h){function i(b,d,e){if(a){for(var f="ngf"+b[0].toUpperCase()+b.substr(1),g=a.length,h=null;g--;){var i=a[g],j=k(f,{$file:i});null==j&&(j=d(k("ngfValidate")||{}),h=null==h?!0:h),null!=j&&(e(i,j)||(i.$error=b,i.$errorParam=j,a.splice(g,1),h=!1))}null!==h&&c.$ngfValidations.push({name:b,valid:h})}}function j(b,d,e,f,g){if(a){var i=0,j=!1,m="ngf"+b[0].toUpperCase()+b.substr(1);a=void 0===a.length?[a]:a,angular.forEach(a,function(a){if(0!==a.type.search(e))return!0;var n=k(m,{$file:a})||d(k("ngfValidate",{$file:a})||{});n&&(l++,i++,f(a,n).then(function(c){g(c,n)||(a.$error=b,a.$errorParam=n,j=!0)},function(){k("ngfValidateForce",{$file:a})&&(a.$error=b,a.$errorParam=n,j=!0)})["finally"](function(){l--,i--,i||c.$ngfValidations.push({name:b,valid:!j}),l||h.call(c,c.$ngfValidations)}))})}}c=c||{},c.$ngfValidations=c.$ngfValidations||[],angular.forEach(c.$ngfValidations,function(a){a.valid=!0});var k=function(a,b){return f.attrGetter(a,d,e,b)};if(g)return void h.call(c);if(c.$$ngfValidated=!0,null==a||0===a.length)return void h.call(c);if(a=void 0===a.length?[a]:a.slice(0),i("pattern",function(a){return a.pattern},f.validatePattern),i("minSize",function(a){return a.size&&a.size.min},function(a,c){return a.size>=b(c)}),i("maxSize",function(a){return a.size&&a.size.max},function(a,c){return a.size<=b(c)}),i("validateFn",function(){return null},function(a,b){return b===!0||null===b||""===b}),!a.length)return void h.call(c,c.$ngfValidations);var l=0;j("maxHeight",function(a){return a.height&&a.height.max},/image/,this.imageDimensions,function(a,b){return a.height<=b}),j("minHeight",function(a){return a.height&&a.height.min},/image/,this.imageDimensions,function(a,b){return a.height>=b}),j("maxWidth",function(a){return a.height&&a.width.max},/image/,this.imageDimensions,function(a,b){return a.width<=b}),j("minWidth",function(a){return a.height&&a.width.min},/image/,this.imageDimensions,function(a,b){return a.width>=b}),j("maxDuration",function(a){return a.height&&a.duration.max},/audio|video/,this.mediaDuration,function(a,c){return a<=b(c)}),j("minDuration",function(a){return a.height&&a.duration.min},/audio|video/,this.mediaDuration,function(a,c){return a>=b(c)}),j("validateAsyncFn",function(){return null},/./,function(a,b){return b},function(a){return a===!0||null===a||""===a}),l||h.call(c,c.$ngfValidations)},f.imageDimensions=function(a){if(a.width&&a.height){var b=d.defer();return e(function(){b.resolve({width:a.width,height:a.height})}),b.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var c=d.defer();return e(function(){return 0!==a.type.indexOf("image")?void c.reject("not image"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].clientWidth,d=h[0].clientHeight;h.remove(),a.width=b,a.height=d,c.resolve({width:b,height:d})}function f(){h.remove(),c.reject("load error")}function g(){e(function(){h[0].parentNode&&(h[0].clientWidth?d():i>10?f():g())},1e3)}var h=angular.element("<img>").attr("src",b).css("visibility","hidden").css("position","fixed");h.on("load",d),h.on("error",f);var i=0;g(),angular.element(document.getElementsByTagName("body")[0]).append(h)},function(){c.reject("load error")})}),a.$ngfDimensionPromise=c.promise,a.$ngfDimensionPromise["finally"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.duration){var b=d.defer();return e(function(){b.resolve(a.duration)}),b.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var c=d.defer();return e(function(){return 0!==a.type.indexOf("audio")&&0!==a.type.indexOf("video")?void c.reject("not media"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.duration=b,h.remove(),c.resolve(b)}function f(){h.remove(),c.reject("load error")}function g(){e(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",b).css("visibility","none").css("position","fixed");h.on("loadedmetadata",d),h.on("error",f);var i=0;g(),angular.element(document.body).append(h)},function(){c.reject("load error")})}),a.$ngfDurationPromise=c.promise,a.$ngfDurationPromise["finally"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}])}(),function(){function a(a,c,d,e,f,g,h,i){function j(){return c.attr("disabled")||n("ngfDropDisabled",a)}function k(a,b,c,d){var e=n("ngfDragOverClass",a,{$event:c}),f=n("ngfDragOverClass")||"dragover";if(angular.isString(e))return void d(e);if(e&&(e.delay&&(r=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g)for(var h=n("ngfPattern",a,{$event:c}),j=0;j<g.length;j++)if("file"===g[j].kind||""===g[j].kind){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}}d(f)}function l(a,b,c,d){function e(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;a.push({name:b.name,type:"directory",path:d});var f=b.createReader(),g=[];i++;var h=function(){f.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var f=0;f<g.length;f++)e(a,g[f],(c?c:"")+b.name+"/");i--}}catch(j){i--,console.error(j)}},function(){i--})};h()}else i++,b.file(function(b){try{i--,b.path=(c?c:"")+b.name,a.push(b)}catch(d){i--,console.error(d)}},function(){i--})}var f=[],i=0,j=a.dataTransfer.items;if(j&&j.length>0&&"file"!==h.protocol())for(var k=0;k<j.length;k++){if(j[k].webkitGetAsEntry&&j[k].webkitGetAsEntry()&&j[k].webkitGetAsEntry().isDirectory){var l=j[k].webkitGetAsEntry();if(l.isDirectory&&!c)continue;null!=l&&e(f,l)}else{var m=j[k].getAsFile();null!=m&&f.push(m)}if(!d&&f.length>0)break}else{var n=a.dataTransfer.files;if(null!=n)for(var o=0;o<n.length&&(f.push(n.item(o)),d||!(f.length>0));o++);}var p=0;!function q(a){g(function(){if(i)10*p++<2e4&&q(10);else{if(!d&&f.length>1){for(k=0;"directory"===f[k].type;)k++;f=[f[k]]}b(f)}},a||0)}()}var m=b(),n=function(a,b,c){return i.attrGetter(a,d,b,c)};if(n("dropAvailable")&&g(function(){a[n("dropAvailable")]?a[n("dropAvailable")].value=m:a[n("dropAvailable")]=m}),!m)return void(n("ngfHideOnDropNotAvailable",a)===!0&&c.css("display","none"));i.registerValidators(e,null,d,a);var o,p=null,q=f(n("ngfStopPropagation")),r=1;c[0].addEventListener("dragover",function(b){if(!j()){if(b.preventDefault(),q(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}g.cancel(p),o||(o="C",k(a,d,b,function(a){o=a,c.addClass(o)}))}},!1),c[0].addEventListener("dragenter",function(b){j()||(b.preventDefault(),q(a)&&b.stopPropagation())},!1),c[0].addEventListener("dragleave",function(){j()||(p=g(function(){c.removeClass(o),o=null},r||1))},!1),c[0].addEventListener("drop",function(b){j()||(b.preventDefault(),q(a)&&b.stopPropagation(),c.removeClass(o),o=null,l(b,function(c){i.updateModel(e,d,a,n("ngfChange")||n("ngfDrop"),c,b)},n("ngfAllowDir",a)!==!1,n("multiple")||n("ngfMultiple",a)))},!1),c[0].addEventListener("paste",function(b){if(!j()){var c=[],f=b.clipboardData||b.originalEvent.clipboardData;if(f&&f.items){for(var g=0;g<f.items.length;g++)-1!==f.items[g].type.indexOf("image")&&c.push(f.items[g].getAsFile());i.updateModel(e,d,a,n("ngfChange")||n("ngfDrop"),c,b)}}},!1)}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter("ngfDropAvailable",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),function(a){"use strict";var b=a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype,c=a.Blob&&function(){try{return Boolean(new Blob)}catch(a){return!1}}(),d=c&&a.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(a){return!1}}(),e=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,f=(c||e)&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(a){var b,f,g,h,i,j;for(b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]),f=new ArrayBuffer(b.length),g=new Uint8Array(f),h=0;h<b.length;h+=1)g[h]=b.charCodeAt(h);return i=a.split(",")[0].split(":")[1].split(";")[0],c?new Blob([d?g:f],{type:i}):(j=new e,j.append(f),j.getBlob(i))};a.HTMLCanvasElement&&!b.toBlob&&(b.mozGetAsFile?b.toBlob=function(a,c,d){a(d&&b.toDataURL&&f?f(this.toDataURL(c,d)):this.mozGetAsFile("blob",c))}:b.toDataURL&&f&&(b.toBlob=function(a,b,c){a(f(this.toDataURL(b,c)))})),"function"==typeof define&&define.amd?define(function(){return f}):a.dataURLtoBlob=f}(this),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var d,e,f,g=c.initialIframeSrc||"javascript:false;";return{send:function(h,i){d=a('<form style="display:none;"></form>'),d.attr("accept-charset",c.formAcceptCharset),f=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+f+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+f+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+f+"_method=PATCH",c.type="POST"),b+=1,e=a('<iframe src="'+g+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(c){b=void 0}i(200,"success",{iframe:b}),a('<iframe src="'+g+'"></iframe>').appendTo(d),window.setTimeout(function(){d.remove()},0)}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",g),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})}),function(a){a.PaginationCalculator=function(a,b){this.maxentries=a,this.opts=b},a.extend(a.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(a){var b=Math.floor(this.opts.num_display_entries/2),c=this.numPages(),d=c-this.opts.num_display_entries,e=a>b?Math.max(Math.min(a-b,d),0):0,f=a>b?Math.min(a+b+this.opts.num_display_entries%2,c):Math.min(this.opts.num_display_entries,c);return{start:e,end:f}}}),a.PaginationRenderers={},a.PaginationRenderers.defaultRenderer=function(b,c){this.maxentries=b,this.opts=c,this.pc=new a.PaginationCalculator(b,c)},a.extend(a.PaginationRenderers.defaultRenderer.prototype,{createLink:function(b,c,d){var e,f=this.pc.numPages();return b=0>b?0:f>b?b:f-1,d=a.extend({text:b+1,classes:""},d||{}),e=a(b==c?isNaN(d.text)?"<li class='disabled'><a>"+d.text+"</a></li>":"<li class='active'><a>"+d.text+"</a></li>":"<li><a href='"+this.opts.link_to.replace(/__id__/,b)+"'>"+d.text+"</a></li>"),d.classes&&e.addClass(d.classes),e.data("page_id",b),e},appendRange:function(a,b,c,d,e){var f;for(f=c;d>f;f++)this.createLink(f,b,e).appendTo(a)},getLinks:function(b,c){b=parseInt(b);var d,e,f=this.pc.getInterval(b),g=this.pc.numPages(),h=a("<ul class='pagination'></ul>");return this.maxentries<=this.opts.items_per_page?h:(this.opts.prev_text&&(b>0||this.opts.prev_show_always)&&h.append(this.createLink(b-1,b,{text:this.opts.prev_text,classes:"prev"})),f.start>0&&this.opts.num_edge_entries>0&&(e=Math.min(this.opts.num_edge_entries,f.start),this.appendRange(h,b,0,e,{classes:"sp"}),this.opts.num_edge_entries<f.start&&this.opts.ellipse_text&&a("<li><a>"+this.opts.ellipse_text+"</a></li>").appendTo(h)),this.appendRange(h,b,f.start,f.end),f.end<g&&this.opts.num_edge_entries>0&&(g-this.opts.num_edge_entries>f.end&&this.opts.ellipse_text&&a("<li><a>"+this.opts.ellipse_text+"</a></li>").appendTo(h),d=Math.max(g-this.opts.num_edge_entries,f.end),this.appendRange(h,b,d,g,{classes:"ep"})),this.opts.next_text&&(g-1>b||this.opts.next_show_always)&&h.append(this.createLink(b+1,b,{text:this.opts.next_text,classes:"next"})),a("li:not(.disabled, .active) a",h).click(c),h)}}),a.fn.pagination=function(b,c){function d(b){var c=a(b.target).parent().data("page_id"),d=e(c);return d||b.stopPropagation(),d}function e(a){i.data("current_page",a),g=f.getLinks(a,d),i.empty(),g.appendTo(i);var b=c.callback(a,i);return b}c=a.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"javascript:;",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",load_first_page:!1,callback:function(){return!1}},c||{});var f,g,h,i=this;if(h=c.current_page,i.data("current_page",h),b=!b||0>b?1:b,c.items_per_page=!c.items_per_page||c.items_per_page<0?1:c.items_per_page,!a.PaginationRenderers[c.renderer])throw new ReferenceError("Pagination renderer '"+c.renderer+"' was not found in jQuery.PaginationRenderers object.");f=new a.PaginationRenderers[c.renderer](b,c);var j=new a.PaginationCalculator(b,c),k=j.numPages();i.bind("setPage",{numPages:k},function(a,b){return b>=0&&b<a.data.numPages?(e(b),!1):void 0}),i.bind("prevPage",function(b){var c=a(this).data("current_page");return c>0&&e(c-1),!1}),i.bind("nextPage",{numPages:k},function(b){var c=a(this).data("current_page");return c<b.data.numPages-1&&e(c+1),!1}),i.bind("currentPage",function(b){var c=a(this).data("current_page");return e(c),!1}),g=f.getLinks(h,d),i.empty(),g.appendTo(i),c.load_first_page&&c.callback(h,i)}}(jQuery),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l;k="caret",b=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.setPos=function(a){return this.domInputor},b.prototype.getIEPosition=function(){return this.getPosition()},b.prototype.getPosition=function(){var a,b;return b=this.getOffset(),a=this.$inputor.offset(),b.left-=a.left,b.top-=a.top,b},b.prototype.getOldIEPos=function(){var a,b;return b=h.selection.createRange(),a=h.body.createTextRange(),a.moveToElementText(this.domInputor),a.setEndPoint("EndToEnd",b),a.text.length},b.prototype.getPos=function(){var a,b,c;return(c=this.range())?(a=c.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(c.endContainer,c.endOffset),b=a.toString().length,a.detach(),b):h.selection?this.getOldIEPos():void 0},b.prototype.getOldIEOffset=function(){var a,b;return a=h.selection.createRange().duplicate(),a.moveStart("character",-1),b=a.getBoundingClientRect(),{height:b.bottom-b.top,left:b.left,top:b.top}},b.prototype.getOffset=function(b){var c,d,e,f,g;return j.getSelection&&(e=this.range())?(e.endOffset-1>0&&e.endContainer===!this.domInputor&&(c=e.cloneRange(),c.setStart(e.endContainer,e.endOffset-1),c.setEnd(e.endContainer,e.endOffset),f=c.getBoundingClientRect(),d={height:f.height,left:f.left+f.width,top:f.top},c.detach()),d&&0!==(null!=d?d.height:void 0)||(c=e.cloneRange(),g=a(h.createTextNode("|")),c.insertNode(g[0]),c.selectNode(g[0]),f=c.getBoundingClientRect(),d={height:f.height,left:f.left,top:f.top},g.remove(),c.detach())):h.selection&&(d=this.getOldIEOffset()),d&&(d.top+=a(j).scrollTop(),d.left+=a(j).scrollLeft()),d},b.prototype.range=function(){var a;if(j.getSelection)return a=j.getSelection(),a.rangeCount>0?a.getRangeAt(0):null},b}(),c=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.getIEPos=function(){var a,b,c,d,e,f,g;return b=this.domInputor,f=h.selection.createRange(),e=0,f&&f.parentElement()===b&&(d=b.value.replace(/\r\n/g,"\n"),c=d.length,g=b.createTextRange(),g.moveToBookmark(f.getBookmark()),a=b.createTextRange(),a.collapse(!1),e=g.compareEndPoints("StartToEnd",a)>-1?c:-g.moveStart("character",-c)),e},b.prototype.getPos=function(){return h.selection?this.getIEPos():this.domInputor.selectionStart},b.prototype.setPos=function(a){var b,c;return b=this.domInputor,h.selection?(c=b.createTextRange(),c.move("character",a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a),b},b.prototype.getIEOffset=function(a){var b,c,d,e;return c=this.domInputor.createTextRange(),a||(a=this.getPos()),c.move("character",a),d=c.boundingLeft,e=c.boundingTop,b=c.boundingHeight,{left:d,top:e,height:b}},b.prototype.getOffset=function(b){var c,d,e;return c=this.$inputor,h.selection?(d=this.getIEOffset(b),d.top+=a(j).scrollTop()+c.scrollTop(),d.left+=a(j).scrollLeft()+c.scrollLeft(),d):(d=c.offset(),e=this.getPosition(b),d={left:d.left+e.left-c.scrollLeft(),top:d.top+e.top-c.scrollTop(),height:e.height})},b.prototype.getPosition=function(a){var b,c,e,f,g,h,i;return b=this.$inputor,f=function(a){return a=a.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\s/g,"&nbsp;")),a},void 0===a&&(a=this.getPos()),i=b.val().slice(0,a),e=b.val().slice(a),g="<span style='position: relative; display: inline;'>"+f(i)+"</span>",g+="<span id='caret' style='position: relative; display: inline;'>|</span>",g+="<span style='position: relative; display: inline;'>"+f(e)+"</span>",h=new d(b),c=h.create(g).rect()},b.prototype.getIEPosition=function(a){var b,c,d,e,f;return d=this.getIEOffset(a),c=this.$inputor.offset(),e=d.left-c.left,f=d.top-c.top,b=d.height,{left:e,top:f,height:b}},b}(),d=function(){function b(a){this.$inputor=a}return b.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],b.prototype.mirrorCss=function(){var b,c=this;return b={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),a.each(this.css_attr,function(a,d){return b[d]=c.$inputor.css(d)}),b},b.prototype.create=function(b){return this.$mirror=a("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(b),this.$inputor.after(this.$mirror),this},b.prototype.rect=function(){var a,b,c;return a=this.$mirror.find("#caret"),b=a.position(),c={left:b.left,top:b.top,height:a.height()},this.$mirror.remove(),c},b}(),e={contentEditable:function(a){return!(!a[0].contentEditable||"true"!==a[0].contentEditable)}},g={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return h.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){var b;return b=this.getOffset(a)}},h=null,j=null,i=null,l=function(a){var b;return(b=null!=a?a.iframe:void 0)?(i=b,j=b.contentWindow,h=b.contentDocument||j.document):(i=void 0,j=window,h=document)},f=function(a){var b;h=a[0].ownerDocument,j=h.defaultView||h.parentWindow;try{return i=j.frameElement}catch(c){b=c}},a.fn.caret=function(d,f,h){var i;return g[d]?(a.isPlainObject(f)?(l(f),f=void 0):l(h),i=e.contentEditable(this)?new b(this):new c(this),g[d].apply(i,[f])):a.error("Method "+d+" does not exist on jQuery.caret")},a.fn.caret.EditableCaret=b,a.fn.caret.InputCaret=c,a.fn.caret.Utils=e,a.fn.caret.apis=g}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){var b,c,d,e,f,g,h,i,j,k,l=[].slice,m=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n={}.hasOwnProperty;b=a,d=function(){function a(a){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=b(a),this.setupRootElement(),this.listen()}return a.prototype.createContainer=function(a){var c;return null!=(c=this.$el)&&c.remove(),b(a.body).append(this.$el=b("<div class='atwho-container'></div>"))},a.prototype.setupRootElement=function(a,c){var d;if(null==c&&(c=!1),a)this.window=a.contentWindow,this.document=a.contentDocument||this.window.document,this.iframe=a;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(e){if(d=e,this.iframe=null,b.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+d)}}return this.createContainer((this.iframeAsRoot=c)?this.document:document)},a.prototype.controller=function(a){var b,c,d,e;if(this.aliasMaps[a])c=this.controllers[this.aliasMaps[a]];else{e=this.controllers;for(d in e)if(b=e[d],d===a){c=b;break}}return c?c:this.controllers[this.currentFlag]},a.prototype.setContextFor=function(a){return this.currentFlag=a,this},a.prototype.reg=function(a,b){var c,d;return d=(c=this.controllers)[a]||(c[a]=this.$inputor.is("[contentEditable]")?new g(this,a):new j(this,a)),b.alias&&(this.aliasMaps[b.alias]=a),d.init(b),this},a.prototype.listen=function(){return this.$inputor.on("compositionstart",function(a){return function(b){var c;return null!=(c=a.controller())&&c.view.hide(),a.isComposing=!0}}(this)).on("compositionend",function(a){return function(b){return a.isComposing=!1}}(this)).on("keyup.atwhoInner",function(a){return function(b){return a.onKeyup(b)}}(this)).on("keydown.atwhoInner",function(a){return function(b){return a.onKeydown(b)}}(this)).on("blur.atwhoInner",function(a){return function(b){var c;return(c=a.controller())?(c.expectedQueryCBId=null,c.view.hide(b,c.getOpt("displayTimeout"))):void 0}}(this)).on("click.atwhoInner",function(a){return function(b){return a.dispatch(b)}}(this)).on("scroll.atwhoInner",function(a){return function(){var b;return b=a.$inputor.scrollTop(),function(c){var d,e;return d=c.target.scrollTop,b!==d&&null!=(e=a.controller())&&e.view.hide(c),b=d,!0}}}(this)())},a.prototype.shutdown=function(){var a,b,c;c=this.controllers;for(a in c)b=c[a],b.destroy(),delete this.controllers[a];return this.$inputor.off(".atwhoInner"),this.$el.remove()},a.prototype.dispatch=function(a){var b,c,d,e;d=this.controllers,e=[];for(b in d)c=d[b],e.push(c.lookUp(a));return e},a.prototype.onKeyup=function(a){var c;switch(a.keyCode){case h.ESC:a.preventDefault(),null!=(c=this.controller())&&c.view.hide();break;case h.DOWN:case h.UP:case h.CTRL:b.noop();break;case h.P:case h.N:a.ctrlKey||this.dispatch(a);break;default:this.dispatch(a)}},a.prototype.onKeydown=function(a){var c,d;if(d=null!=(c=this.controller())?c.view:void 0,d&&d.visible())switch(a.keyCode){case h.ESC:a.preventDefault(),d.hide(a);break;case h.UP:a.preventDefault(),d.prev();break;case h.DOWN:a.preventDefault(),d.next();break;case h.P:if(!a.ctrlKey)return;a.preventDefault(),d.prev();break;case h.N:if(!a.ctrlKey)return;a.preventDefault(),d.next();break;case h.TAB:case h.ENTER:case h.SPACE:if(!d.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&a.keyCode===h.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&a.keyCode===h.TAB)return;d.highlighted()?(a.preventDefault(),d.choose(a)):d.hide(a);break;default:b.noop()}},a}(),e=function(){function a(a,c){this.app=a,this.at=c,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=b("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=b("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new i(this),this.view=new k(this)}return a.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},a.prototype.init=function(a){return this.setting=b.extend({},this.setting||b.fn.atwho["default"],a),this.view.init(),this.model.reload(this.setting.data)},a.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},a.prototype.callDefault=function(){var a,c,d;d=arguments[0],a=2<=arguments.length?l.call(arguments,1):[];try{return f[d].apply(this,a)}catch(e){return c=e,b.error(c+" Or maybe At.js doesn't have function "+d)}},a.prototype.trigger=function(a,b){var c,d;return null==b&&(b=[]),b.push(this),c=this.getOpt("alias"),d=c?a+"-"+c+".atwho":a+".atwho",this.$inputor.trigger(d,b)},a.prototype.callbacks=function(a){return this.getOpt("callbacks")[a]||f[a]},a.prototype.getOpt=function(a,b){var c;try{return this.setting[a]}catch(d){return c=d,null}},a.prototype.insertContentFor=function(a){var c,d;return d=this.getOpt("insertTpl"),c=b.extend({},a.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,d,c,"onInsert")},a.prototype.renderView=function(a){var b;return b=this.getOpt("searchKey"),a=this.callbacks("sorter").call(this,this.query.text,a.slice(0,1001),b),this.view.render(a.slice(0,this.getOpt("limit")))},a.arrayToDefaultHash=function(a){var c,d,e,f;if(!b.isArray(a))return a;for(f=[],c=0,e=a.length;e>c;c++)d=a[c],b.isPlainObject(d)?f.push(d):f.push({name:d});return f},a.prototype.lookUp=function(a){var b,c;return(b=this.catchQuery(a))?(this.app.setContextFor(this.at),(c=this.getOpt("delay"))?this._delayLookUp(b,c):this._lookUp(b),b):(this.expectedQueryCBId=null,b)},a.prototype._delayLookUp=function(a,b){var c,d;return c=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=c),d=b-(c-this.previousCallTime),d>0&&b>d?(this.previousCallTime=c,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(b){return function(){return b.previousCallTime=0,b.delayedCallTimeout=null,b._lookUp(a)}}(this),b)):(this._stopDelayedCall(),this.previousCallTime!==c&&(this.previousCallTime=0),this._lookUp(a))},a.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0},a.prototype._generateQueryCBId=function(){return{}},a.prototype._lookUp=function(a){var c;return c=function(a,b){return a===this.expectedQueryCBId?b&&b.length>0?this.renderView(this.constructor.arrayToDefaultHash(b)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(a.text,b.proxy(c,this,this.expectedQueryCBId))},a}(),j=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return m(c,a),c.prototype.catchQuery=function(){var a,b,c,d,e,f;return b=this.$inputor.val(),a=this.$inputor.caret("pos",{iframe:this.app.iframe}),f=b.slice(0,a),d=this.callbacks("matcher").call(this,this.at,f,this.getOpt("startWithSpace")),"string"==typeof d&&d.length<=this.getOpt("maxLen",20)?(e=a-d.length,c=e+d.length,this.pos=e,d={text:d,headPos:e,endPos:c},this.trigger("matched",[this.at,d.text])):(d=null,this.view.hide()),this.query=d},c.prototype.rect=function(){var a,c,d;if(a=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(c=b(this.app.iframe).offset(),a.left+=c.left,a.top+=c.top),d=this.app.document.selection?0:2,{left:a.left,top:a.top,bottom:a.top+a.height+d}},c.prototype.insert=function(a,b){var c,d,e,f,g;return c=this.$inputor,d=c.val(),e=d.slice(0,Math.max(this.query.headPos-this.at.length,0)),f=""===(f=this.getOpt("suffix"))?f:f||" ",a+=f,g=""+e+a+d.slice(this.query.endPos||0),c.val(g),c.caret("pos",e.length+a.length,{iframe:this.app.iframe}),c.is(":focus")||c.focus(),c.change()},c}(e),g=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return m(c,a),c.prototype._getRange=function(){var a;return a=this.app.window.getSelection(),a.rangeCount>0?a.getRangeAt(0):void 0},c.prototype._setRange=function(a,c,d){return null==d&&(d=this._getRange()),d?(c=b(c)[0],"after"===a?(d.setEndAfter(c),d.setStartAfter(c)):(d.setEndBefore(c),d.setStartBefore(c)),d.collapse(!1),this._clearRange(d)):void 0},c.prototype._clearRange=function(a){var b;return null==a&&(a=this._getRange()),b=this.app.window.getSelection(),null==this.ctrl_a_pressed?(b.removeAllRanges(),b.addRange(a)):void 0},c.prototype._movingEvent=function(a){var b;return"click"===a.type||(b=a.which)===h.RIGHT||b===h.LEFT||b===h.UP||b===h.DOWN},c.prototype._unwrap=function(a){var c;return a=b(a).unwrap().get(0),(c=a.nextSibling)&&c.nodeValue&&(a.nodeValue+=c.nodeValue,b(c).remove()),a},c.prototype.catchQuery=function(a){var c,d,e,f,g,i,j,k,l,m;if(!this.app.isComposing&&(m=this._getRange())){if(a.which===h.CTRL?this.ctrl_pressed=!0:a.which===h.A?null==this.ctrl_pressed&&(this.ctrl_a_pressed=!0):(delete this.ctrl_a_pressed,delete this.ctrl_pressed),a.which===h.ENTER)return(d=b(m.startContainer).closest(".atwho-query")).contents().unwrap(),d.is(":empty")&&d.remove(),(d=b(".atwho-query",this.app.document)).text(d.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(b(m.startContainer).is(this.$inputor))return void this._clearRange();a.which===h.BACKSPACE&&m.startContainer.nodeType===document.ELEMENT_NODE&&(k=m.startOffset-1)>=0?(e=m.cloneRange(),e.setStart(m.startContainer,k),b(e.cloneContents()).contents().last().is(".atwho-inserted")&&(g=b(m.startContainer).contents().get(k),this._setRange("after",b(g).contents().last()))):a.which===h.LEFT&&m.startContainer.nodeType===document.TEXT_NODE&&(c=b(m.startContainer.previousSibling),c.is(".atwho-inserted")&&0===m.startOffset&&this._setRange("after",c.contents().last()))}return b(m.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(d=b(".atwho-query",this.app.document)).length>0&&d.is(":empty")&&0===d.text().length&&d.remove(),this._movingEvent(a)||d.removeClass("atwho-inserted"),e=m.cloneRange(),e.setStart(m.startContainer,0),j=this.callbacks("matcher").call(this,this.at,e.toString(),this.getOpt("startWithSpace")),0===d.length&&"string"==typeof j&&(f=m.startOffset-this.at.length-j.length)>=0&&(m.setStart(m.startContainer,f),
d=b("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),m.surroundContents(d.get(0)),i=d.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(m.setStart(i,i.length),m.setEnd(i,i.length),this._clearRange(m)):this._setRange("after",i,m)),"string"==typeof j&&j.length<=this.getOpt("maxLen",20)?(l={text:j,el:d},this.trigger("matched",[this.at,l.text]),this.query=l):(this.view.hide(),this.query={el:d},d.text().indexOf(this.at)>=0&&(this._movingEvent(a)&&d.hasClass("atwho-inserted")?d.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,d)&&this._setRange("after",this._unwrap(d.text(d.text()).contents().first()))),null)}},c.prototype.rect=function(){var a,c,d;return d=this.query.el.offset(),this.app.iframe&&!this.app.iframeAsRoot&&(c=(a=b(this.app.iframe)).offset(),d.left+=c.left-this.$inputor.scrollLeft(),d.top+=c.top-this.$inputor.scrollTop()),d.bottom=d.top+this.query.el.height(),d},c.prototype.insert=function(a,b){var c,d,e;return d=""===(d=this.getOpt("suffix"))?d:d||" ",this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(a),(c=this._getRange())&&(c.setEndAfter(this.query.el[0]),c.collapse(!1),c.insertNode(e=this.app.document.createTextNode(d)),this._setRange("after",e,c)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()},c}(e),i=function(){function a(a){this.context=a,this.at=this.context.at,this.storage=this.context.$inputor}return a.prototype.destroy=function(){return this.storage.data(this.at,null)},a.prototype.saved=function(){return this.fetch()>0},a.prototype.query=function(a,b){var c,d,e;return d=this.fetch(),e=this.context.getOpt("searchKey"),d=this.context.callbacks("filter").call(this.context,a,d,e)||[],c=this.context.callbacks("remoteFilter"),d.length>0||!c&&0===d.length?b(d):c.call(this.context,a,b)},a.prototype.fetch=function(){return this.storage.data(this.at)||[]},a.prototype.save=function(a){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,a||[]))},a.prototype.load=function(a){return!this.saved()&&a?this._load(a):void 0},a.prototype.reload=function(a){return this._load(a)},a.prototype._load=function(a){return"string"==typeof a?b.ajax(a,{dataType:"json"}).done(function(a){return function(b){return a.save(b)}}(this)):this.save(a)},a}(),k=function(){function a(a){this.context=a,this.$el=b("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return a.prototype.init=function(){var a;return a=this.context.getOpt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+a})},a.prototype.destroy=function(){return this.$el.remove()},a.prototype.bindEvent=function(){var a;return a=this.$el.find("ul"),a.on("mouseenter.atwho-view","li",function(c){return a.find(".cur").removeClass("cur"),b(c.currentTarget).addClass("cur")}).on("click.atwho-view","li",function(c){return function(d){return a.find(".cur").removeClass("cur"),b(d.currentTarget).addClass("cur"),c.choose(d),d.preventDefault()}}(this))},a.prototype.visible=function(){return this.$el.is(":visible")},a.prototype.highlighted=function(){return this.$el.find(".cur").length>0},a.prototype.choose=function(a){var b,c;return(b=this.$el.find(".cur")).length&&(c=this.context.insertContentFor(b),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,c,b),b),this.context.trigger("inserted",[b,a]),this.hide(a)),this.context.getOpt("hideWithoutSuffix")?this.stopShowing=!0:void 0},a.prototype.reposition=function(a){var c,d,e,f;return c=this.context.app.iframeAsRoot?this.context.app.window:window,a.bottom+this.$el.height()-b(c).scrollTop()>b(c).height()&&(a.bottom=a.top-this.$el.height()),a.left>(e=b(c).width()-this.$el.width()-5)&&(a.left=e),d={left:a.left,top:a.bottom},null!=(f=this.context.callbacks("beforeReposition"))&&f.call(this.context,d),this.$el.offset(d),this.context.trigger("reposition",[d])},a.prototype.next=function(){var a,b;return a=this.$el.find(".cur").removeClass("cur"),b=a.next(),b.length||(b=this.$el.find("li:first")),b.addClass("cur"),this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))},a.prototype.prev=function(){var a,b;return a=this.$el.find(".cur").removeClass("cur"),b=a.prev(),b.length||(b=this.$el.find("li:last")),b.addClass("cur"),this.scrollTop(Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height()))},a.prototype.scrollTop=function(a){var b;return b=this.context.getOpt("scrollDuration"),b?this.$el.animate({scrollTop:a},b):this.$el.scrollTop(a)},a.prototype.show=function(){var a;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(a=this.context.rect())?this.reposition(a):void 0)},a.prototype.hide=function(a,b){var c;if(this.visible())return isNaN(b)?(this.$el.hide(),this.context.trigger("hidden",[a])):(c=function(a){return function(){return a.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(c,b))},a.prototype.render=function(a){var c,d,e,f,g,h,i;if(!(b.isArray(a)&&a.length>0))return void this.hide();for(this.$el.find("ul").empty(),d=this.$el.find("ul"),i=this.context.getOpt("displayTpl"),e=0,g=a.length;g>e;e++)f=a[e],f=b.extend({},f,{"atwho-at":this.context.at}),h=this.context.callbacks("tplEval").call(this.context,i,f,"onDisplay"),c=b(this.context.callbacks("highlighter").call(this.context,h,this.context.query.text)),c.data("item-data",f),d.append(c);return this.show(),this.context.getOpt("highlightFirst")?d.find("li:first").addClass("cur"):void 0},a}(),h={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},f={beforeSave:function(a){return e.arrayToDefaultHash(a)},matcher:function(a,b,c,d){var e,f,g,h,i;return a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c&&(a="(?:^|\\s)"+a),e=decodeURI("%C3%80"),f=decodeURI("%C3%BF"),i=d?" ":"",h=new RegExp(a+"([A-Za-z"+e+"-"+f+"0-9_"+i+".+-]*)$|"+a+"([^\\x00-\\xff]*)$","gi"),g=h.exec(b),g?g[2]||g[1]:null},filter:function(a,b,c){var d,e,f,g;for(d=[],e=0,g=b.length;g>e;e++)f=b[e],~new String(f[c]).toLowerCase().indexOf(a.toLowerCase())&&d.push(f);return d},remoteFilter:null,sorter:function(a,b,c){var d,e,f,g;if(!a)return b;for(d=[],e=0,g=b.length;g>e;e++)f=b[e],f.atwho_order=new String(f[c]).toLowerCase().indexOf(a.toLowerCase()),f.atwho_order>-1&&d.push(f);return d.sort(function(a,b){return a.atwho_order-b.atwho_order})},tplEval:function(a,b){var c,d;d=a;try{return"string"!=typeof a&&(d=a(b)),d.replace(/\$\{([^\}]*)\}/g,function(a,c,d){return b[c]})}catch(e){return c=e,""}},highlighter:function(a,b){var c;return b?(c=new RegExp(">\\s*(\\w*?)("+b.replace("+","\\+")+")(\\w*)\\s*<","ig"),a.replace(c,function(a,b,c,d){return"> "+b+"<strong>"+c+"</strong>"+d+" <"})):a},beforeInsert:function(a,b){return a},beforeReposition:function(a){return a},afterMatchFailed:function(a,b){}},c={load:function(a,b){var c;return(c=this.controller(a))?c.model.load(b):void 0},isSelecting:function(){var a;return null!=(a=this.controller())?a.view.visible():void 0},hide:function(){var a;return null!=(a=this.controller())?a.view.hide():void 0},reposition:function(){var a;return(a=this.controller())?a.view.reposition(a.rect()):void 0},setIframe:function(a,b){return this.setupRootElement(a,b),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},b.fn.atwho=function(a){var e,f;return e=arguments,f=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var g,h;return(h=(g=b(this)).data("atwho"))||g.data("atwho",h=new d(this)),"object"!=typeof a&&a?c[a]&&h?f=c[a].apply(h,Array.prototype.slice.call(e,1)):b.error("Method "+a+" does not exist on jQuery.atwho"):h.reg(a.at,a)}),null!=f?f:this},b.fn.atwho["default"]={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:f,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150},b.fn.atwho.debug=!1}),function(){function a(){var a,b,c=arguments,d={},e=function(a,b){var c,d;"object"!=typeof a&&(a={});for(d in b)b.hasOwnProperty(d)&&(c=b[d],c&&"object"==typeof c&&"[object Array]"!==Object.prototype.toString.call(c)&&"renderTo"!==d&&"number"!=typeof c.nodeType?a[d]=e(a[d]||{},c):a[d]=b[d]);return a};for(c[0]===!0&&(d=c[1],c=Array.prototype.slice.call(c,2)),b=c.length,a=0;b>a;a++)d=e(d,c[a]);return d}function b(a,b){return parseInt(a,b||10)}function c(a){return"string"==typeof a}function d(a){return a&&"object"==typeof a}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}function f(a){return"number"==typeof a}function g(a){return la.log(a)/la.LN10}function h(a){return la.pow(10,a)}function i(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function j(a){return a!==K&&null!==a}function k(a,b,e){var f,g;if(c(b))j(e)?a.setAttribute(b,e):a&&a.getAttribute&&(g=a.getAttribute(b));else if(j(b)&&d(b))for(f in b)a.setAttribute(f,b[f]);return g}function l(a){return e(a)?a:[a]}function m(a,b){ya&&!Ea&&b&&b.opacity!==K&&(b.filter="alpha(opacity="+100*b.opacity+")"),db(a.style,b)}function n(a,b,c,d,e){var f=ja.createElement(a);return b&&db(f,b),e&&m(f,{padding:0,border:Va,margin:0}),c&&m(f,c),d&&d.appendChild(f),f}function o(a,b){var c=function(){return K};return c.prototype=new a,db(c.prototype,b),c}function p(a,b){return new Array((b||2)+1-String(a).length).join(0)+a}function q(a,b){return/%$/.test(a)?b*parseFloat(a)/100:parseFloat(a)}function r(a){return 6e4*(W&&W(a)||V||0)}function s(a,b){var c,d=/f$/,e=/\.([0-9])/,f=O.lang;return d.test(a)?(c=a.match(e),c=c?c[1]:-1,null!==b&&(b=ia.numberFormat(b,c,f.decimalPoint,a.indexOf(",")>-1?f.thousandsSep:""))):b=P(a,b),b}function t(a,b){for(var c,d,e,f,g,h,i,j="{",k=!1,l=[];-1!==(i=a.indexOf(j));){if(c=a.slice(0,i),k){for(d=c.split(":"),e=d.shift().split("."),g=e.length,h=b,f=0;g>f;f++)h=h[e[f]];d.length&&(h=s(d.join(":"),h)),l.push(h)}else l.push(c);a=a.slice(i+1),k=!k,j=k?"}":"{"}return l.push(a),l.join("")}function u(a){return la.pow(10,na(la.log(a)/la.LN10))}function v(a,b,c,d,e){var f,g,h=a;for(c=eb(c,1),f=a/c,b||(b=[1,2,2.5,5,10],d===!1&&(1===c?b=[1,2,5,10]:.1>=c&&(b=[1/c]))),g=0;g<b.length&&(h=b[g],!(e&&h*c>=a||!e&&f<=(b[g]+(b[g+1]||b[g]))/2));g++);return h*=c}function w(a,b){var c,d,e=a.length;for(d=0;e>d;d++)a[d].ss_i=d;for(a.sort(function(a,d){return c=b(a,d),0===c?a.ss_i-d.ss_i:c}),d=0;e>d;d++)delete a[d].ss_i}function x(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function y(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}function z(a,b){var c;for(c in a)a[c]&&a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function A(a){N||(N=n(Oa)),a&&N.appendChild(a),N.innerHTML=""}function B(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;ka.console&&console.log(c)}function C(a,b){return parseFloat(a.toPrecision(b||14))}function D(a,b){b.renderer.globalAnimation=eb(a,b.animation)}function E(){var a=O.global,b=a.useUTC,c=b?"getUTC":"get",d=b?"setUTC":"set";T=a.Date||window.Date,V=b&&a.timezoneOffset,W=b&&a.getTimezoneOffset,U=function(a,c,d,e,f,g){var h;return b?(h=T.UTC.apply(0,arguments),h+=r(h)):h=new T(a,c,eb(d,1),eb(e,0),eb(f,0),eb(g,0)).getTime(),h},X=c+"Minutes",Y=c+"Hours",Z=c+"Day",$=c+"Date",_=c+"Month",aa=c+"FullYear",ba=d+"Milliseconds",ca=d+"Seconds",da=d+"Minutes",ea=d+"Hours",fa=d+"Date",ga=d+"Month",ha=d+"FullYear"}function F(b){return O=a(!0,O,b),E(),O}function G(){return O}function H(){}function I(a,b,c,d){this.axis=a,this.pos=b,this.type=c||"",this.isNew=!0,c||d||this.addLabel()}function J(a,b,c,d,e){var f=a.chart.inverted;this.axis=a,this.isNegative=c,this.options=b,this.x=d,this.total=null,this.points={},this.stack=e,this.alignOptions={align:b.align||(f?c?"left":"right":"center"),verticalAlign:b.verticalAlign||(f?"middle":c?"bottom":"top"),y:eb(b.y,f?4:c?14:-6),x:eb(b.x,f?c?-6:6:0)},this.textAlign=b.textAlign||(f?c?"right":"left":"center")}var K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja=document,ka=window,la=Math,ma=la.round,na=la.floor,oa=la.ceil,pa=la.max,qa=la.min,ra=la.abs,sa=la.cos,ta=la.sin,ua=la.PI,va=2*ua/360,wa=navigator.userAgent,xa=ka.opera,ya=/(msie|trident)/i.test(wa)&&!xa,za=8===ja.documentMode,Aa=/AppleWebKit/.test(wa),Ba=/Firefox/.test(wa),Ca=/(Mobile|Android|Windows Phone)/.test(wa),Da="http://www.w3.org/2000/svg",Ea=!!ja.createElementNS&&!!ja.createElementNS(Da,"svg").createSVGRect,Fa=Ba&&parseInt(wa.split("Firefox/")[1],10)<4,Ga=!Ea&&!ya&&!!ja.createElement("canvas").getContext,Ha={},Ia=0,Ja=function(){return K},Ka=[],La=0,Ma="Highcharts",Na="4.1.8",Oa="div",Pa="absolute",Qa="relative",Ra="hidden",Sa="highcharts-",Ta="visible",Ua="px",Va="none",Wa="M",Xa="L",Ya=/^[0-9]+$/,Za="",$a="hover",_a="select",ab=["plotTop","marginRight","marginBottom","plotLeft"],bb="stroke-width",cb={};ia=ka.Highcharts=ka.Highcharts?B(16,!0):{},ia.seriesTypes=cb;var db=ia.extend=function(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a},eb=ia.pick=function(){var a,b,c=arguments,d=c.length;for(a=0;d>a;a++)if(b=c[a],b!==K&&null!==b)return b},fb=ia.wrap=function(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(d),c.apply(this,a)}};P=function(a,b,c){if(!j(b)||isNaN(b))return O.lang.invalidDate||"";a=eb(a,"%Y-%m-%d %H:%M:%S");var d,e=new T(b-r(b)),f=e[Y](),g=e[Z](),h=e[$](),i=e[_](),k=e[aa](),l=O.lang,m=l.weekdays,n=db({a:m[g].substr(0,3),A:m[g],d:p(h),e:h,w:g,b:l.shortMonths[i],B:l.months[i],m:p(i+1),y:k.toString().substr(2,2),Y:k,H:p(f),k:f,I:p(f%12||12),l:f%12||12,M:p(e[X]()),p:12>f?"AM":"PM",P:12>f?"am":"pm",S:p(e.getSeconds()),L:p(ma(b%1e3),3)},ia.dateFormats);for(d in n)for(;-1!==a.indexOf("%"+d);)a=a.replace("%"+d,"function"==typeof n[d]?n[d](b):n[d]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a},R={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ia.numberFormat=function(a,c,d,e){var f=O.lang,g=+a||0,h=-1===c?qa((g.toString().split(".")[1]||"").length,20):isNaN(c=ra(c))?2:c,i=void 0===d?f.decimalPoint:d,j=void 0===e?f.thousandsSep:e,k=0>g?"-":"",l=String(b(g=ra(g).toFixed(h))),m=l.length>3?l.length%3:0;return k+(m?l.substr(0,m)+j:"")+l.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+j)+(h?i+ra(g-l).toFixed(h).slice(2):"")},Q={init:function(a,b,c){b=b||"";var d,e,f,g,h,i=a.shift,j=b.indexOf("C")>-1,k=j?7:3,l=b.split(" "),m=[].concat(c),n=function(a){for(f=a.length;f--;)a[f]===Wa&&a.splice(f+1,0,a[f+1],a[f+2],a[f+1],a[f+2])};if(j&&(n(l),n(m)),a.isArea&&(g=l.splice(l.length-6,6),h=m.splice(m.length-6,6)),i<=m.length/k&&l.length===m.length)for(;i--;)m=[].concat(m).splice(0,k).concat(m);if(a.shift=0,l.length)for(d=m.length;l.length<d;)e=[].concat(l).splice(l.length-k,k),j&&(e[k-6]=e[k-2],e[k-5]=e[k-1]),l=l.concat(e);return g&&(l=l.concat(g),m=m.concat(h)),[l,m]},step:function(a,b,c,d){var e,f=[],g=a.length;if(1===c)f=d;else if(g===b.length&&1>c)for(;g--;)e=parseFloat(a[g]),f[g]=isNaN(e)?a[g]:c*parseFloat(b[g]-e)+e;else f=b;return f}},function(a){ka.HighchartsAdapter=ka.HighchartsAdapter||a&&{init:function(b){var d=a.fx;a.extend(a.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),a.each(["cur","_default","width","height","opacity"],function(b,c){var e,f=d.step;"cur"===c?f=d.prototype:"_default"===c&&a.Tween&&(f=a.Tween.propHooks[c],c="set"),e=f[c],e&&(f[c]=function(a){var d;return a=b?a:this,"align"!==a.prop?(d=a.elem,d.attr?d.attr(a.prop,"cur"===c?K:a.now):e.apply(this,arguments)):void 0})}),fb(a.cssHooks.opacity,"get",function(a,b,c){return b.attr?b.opacity||0:a.call(this,b,c)}),this.addAnimSetter("d",function(a){var c,d=a.elem;a.started||(c=b.init(d,d.d,d.toD),a.start=c[0],a.end=c[1],a.started=!0),d.attr("d",b.step(a.start,a.end,a.pos,d.toD))}),this.each=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,b)}:function(a,b){var c,d=a.length;for(c=0;d>c;c++)if(b.call(a[c],a[c],c,a)===!1)return c},a.fn.highcharts=function(){var a,b,d,e="Chart",f=arguments;return this[0]&&(c(f[0])&&(e=f[0],f=Array.prototype.slice.call(f,1)),a=f[0],a!==K&&(a.chart=a.chart||{},a.chart.renderTo=this[0],d=new ia[e](a,f[1]),b=this),a===K&&(b=Ka[k(this[0],"data-highcharts-chart")])),b}},addAnimSetter:function(b,c){a.Tween?a.Tween.propHooks[b]={set:c}:a.fx.step[b]=c},getScript:a.getScript,inArray:a.inArray,adapterRun:function(b,c){return a(b)[c]()},grep:a.grep,map:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[d]=b.call(a[d],a[d],d,a);return c},offset:function(b){return a(b).offset()},addEvent:function(b,c,d){a(b).bind(c,d)},removeEvent:function(b,c,d){var e=ja.removeEventListener?"removeEventListener":"detachEvent";ja[e]&&b&&!b[e]&&(b[e]=function(){}),a(b).unbind(c,d)},fireEvent:function(b,c,d,e){var f,g=a.Event(c),h="detached"+c;!ya&&d&&(delete d.layerX,delete d.layerY,delete d.returnValue),db(g,d),b[c]&&(b[h]=b[c],b[c]=null),a.each(["preventDefault","stopPropagation"],function(a,b){var c=g[b];g[b]=function(){try{c.call(g)}catch(a){"preventDefault"===b&&(f=!0)}}}),a(b).trigger(g),b[h]&&(b[c]=b[h],b[h]=null),!e||g.isDefaultPrevented()||f||e(g)},washMouseEvent:function(a){var b=a.originalEvent||a;return b.pageX===K&&(b.pageX=a.pageX,b.pageY=a.pageY),b},animate:function(b,c,d){var e=a(b);b.style||(b.style={}),c.d&&(b.toD=c.d,c.d=1),e.stop(),c.opacity!==K&&b.attr&&(c.opacity+="px"),b.hasAnim=1,e.animate(c,d)},stop:function(b){b.hasAnim&&a(b).stop()}}}(ka.jQuery);var gb=ka.HighchartsAdapter,hb=gb||{};gb&&gb.init.call(gb,Q);var ib=hb.adapterRun,jb=hb.getScript,kb=hb.inArray,lb=ia.each=hb.each,mb=hb.grep,nb=hb.offset,ob=hb.map,pb=hb.addEvent,qb=hb.removeEvent,rb=hb.fireEvent,sb=hb.washMouseEvent,tb=hb.animate,ub=hb.stop;O={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.1.8/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.1.8/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":ia.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Pa,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Pa,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:Qa,top:"45%"},style:{position:Pa,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Ea,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ca?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var vb=O.plotOptions,wb=vb.line;E();var xb=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,yb=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,zb=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Ab=function(c){function d(a){a&&a.stops?j=ob(a.stops,function(a){return Ab(a[1])}):(i=xb.exec(a),i?k=[b(i[1]),b(i[2]),b(i[3]),parseFloat(i[4],10)]:(i=yb.exec(a),i?k=[b(i[1],16),b(i[2],16),b(i[3],16),1]:(i=zb.exec(a),i&&(k=[b(i[1]),b(i[2]),b(i[3]),1]))))}function e(b){var d;return j?(d=a(c),d.stops=[].concat(d.stops),lb(j,function(a,c){d.stops[c]=[d.stops[c][0],a.get(b)]})):d=k&&!isNaN(k[0])?"rgb"===b?"rgb("+k[0]+","+k[1]+","+k[2]+")":"a"===b?k[3]:"rgba("+k.join(",")+")":c,d}function g(a){if(j)lb(j,function(b){b.brighten(a)});else if(f(a)&&0!==a){var c;for(c=0;3>c;c++)k[c]+=b(255*a),k[c]<0&&(k[c]=0),k[c]>255&&(k[c]=255)}return this}function h(a){return k[3]=a,this}var i,j,k=[];return d(c),{get:e,brighten:g,rgba:k,setOpacity:h,raw:c}};H.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(a,b){var c=this;c.element="span"===b?n(b):ja.createElementNS(Da,b),c.renderer=a},animate:function(b,c,d){var e=eb(c,this.renderer.globalAnimation,!0);return ub(this),e?(e=a(e,{}),d&&(e.complete=d),tb(this,b,e)):this.attr(b,null,d),this},colorGradient:function(b,c,d){var f,g,h,i,k,l,m,n,o,p,q,r=this.renderer,s=[];if(b.linearGradient?g="linearGradient":b.radialGradient&&(g="radialGradient"),g){h=b[g],i=r.gradients,l=b.stops,o=d.radialReference,e(h)&&(b[g]=h={x1:h[0],y1:h[1],x2:h[2],y2:h[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===g&&o&&!j(h.gradientUnits)&&(h=a(h,{cx:o[0]-o[2]/2+h.cx*o[2],cy:o[1]-o[2]/2+h.cy*o[2],r:h.r*o[2],gradientUnits:"userSpaceOnUse"}));for(p in h)"id"!==p&&s.push(p,h[p]);for(p in l)s.push(l[p]);s=s.join(","),i[s]?q=i[s].attr("id"):(h.id=q=Sa+Ia++,i[s]=k=r.createElement(g).attr(h).add(r.defs),k.stops=[],lb(l,function(a){var b;0===a[1].indexOf("rgba")?(f=Ab(a[1]),m=f.get("rgb"),n=f.get("a")):(m=a[1],n=1),b=r.createElement("stop").attr({offset:a[0],"stop-color":m,"stop-opacity":n}).add(k),k.stops.push(b)})),d.setAttribute(c,"url("+r.url+"#"+q+")")}},applyTextShadow:function(a){var c,d=this.element,e=-1!==a.indexOf("contrast"),f={},g=this.renderer.forExport||d.style.textShadow!==K&&!ya;e&&(f.textShadow=a=a.replace(/contrast/g,this.renderer.getContrast(d.style.fill))),Aa&&(f.textRendering="geometricPrecision"),g?m(d,f):(this.fakeTS=!0,this.ySetter=this.xSetter,c=[].slice.call(d.getElementsByTagName("tspan")),lb(a.split(/\s?,\s?/g),function(a){var e,f,g=d.firstChild;a=a.split(" "),e=a[a.length-1],f=a[a.length-2],f&&lb(c,function(a,c){var h;0===c&&(a.setAttribute("x",d.getAttribute("x")),c=d.getAttribute("y"),a.setAttribute("y",c||0),null===c&&d.setAttribute("y",0)),h=a.cloneNode(1),k(h,{"class":Sa+"text-shadow",fill:e,stroke:e,"stroke-opacity":1/pa(b(f),3),"stroke-width":f,"stroke-linejoin":"round"}),d.insertBefore(h,g)})}))},attr:function(a,b,c){var d,e,f,g,h=this.element,i=this;if("string"==typeof a&&b!==K&&(d=a,a={},a[d]=b),"string"==typeof a)i=(this[a+"Getter"]||this._defaultGetter).call(this,a,h);else{for(d in a)e=a[d],g=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(d)&&(f||(this.symbolAttr(a),f=!0),g=!0),!this.rotation||"x"!==d&&"y"!==d||(this.doTransform=!0),g||(this[d+"Setter"]||this._defaultSetter).call(this,e,d,h),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(d)&&this.updateShadows(d,e);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return c&&c(),i},updateShadows:function(a,b){for(var c=this.shadows,d=c.length;d--;)c[d].setAttribute(a,"height"===a?pa(b-(c[d].cutHeight||0),0):"d"===a?this.d:b)},addClass:function(a){var b=this.element,c=k(b,"class")||"";return-1===c.indexOf(a)&&k(b,"class",c+" "+a),this},symbolAttr:function(a){var b=this;lb(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(c){b[c]=eb(a[c],b[c])}),b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":Va)},crisp:function(a){var b,c,d=this,e={},f=a.strokeWidth||d.strokeWidth||0;c=ma(f)%2/2,a.x=na(a.x||d.x||0)+c,a.y=na(a.y||d.y||0)+c,a.width=na((a.width||d.width||0)-2*c),a.height=na((a.height||d.height||0)-2*c),a.strokeWidth=f;for(b in a)d[b]!==a[b]&&(d[b]=e[b]=a[b]);return e},css:function(a){var c,d,e,f=this,g=f.styles,h={},i=f.element,j="",l=!g;if(a&&a.color&&(a.fill=a.color),g)for(d in a)a[d]!==g[d]&&(h[d]=a[d],l=!0);if(l){if(c=f.textWidth=a&&a.width&&"text"===i.nodeName.toLowerCase()&&b(a.width)||f.textWidth,g&&(a=db(g,h)),f.styles=a,c&&(Ga||!Ea&&f.renderer.forExport)&&delete a.width,ya&&!Ea)m(f.element,a);else{e=function(a,b){return"-"+b.toLowerCase()};for(d in a)j+=d.replace(/([A-Z])/g,e)+":"+a[d]+";";k(i,"style",j)}c&&f.added&&f.renderer.buildText(f)}return f},on:function(a,b){var c=this,d=c.element;return M&&"click"===a?(d.ontouchstart=function(a){c.touchEventFired=T.now(),a.preventDefault(),b.call(d,a)},d.onclick=function(a){(-1===wa.indexOf("Android")||T.now()-(c.touchEventFired||0)>1100)&&b.call(d,a)}):d["on"+a]=b,this},setRadialReference:function(a){return this.element.radialReference=a,this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){var a=this;return a.inverted=!0,a.updateTransform(),a},updateTransform:function(){var a,b=this,c=b.translateX||0,d=b.translateY||0,e=b.scaleX,f=b.scaleY,g=b.inverted,h=b.rotation,i=b.element;g&&(c+=b.attr("width"),d+=b.attr("height")),a=["translate("+c+","+d+")"],g?a.push("rotate(90) scale(-1,1)"):h&&a.push("rotate("+h+" "+(i.getAttribute("x")||0)+" "+(i.getAttribute("y")||0)+")"),(j(e)||j(f))&&a.push("scale("+eb(e,1)+" "+eb(f,1)+")"),a.length&&i.setAttribute("transform",a.join(" "))},toFront:function(){var a=this.element;return a.parentNode.appendChild(a),this},align:function(a,b,d){var e,f,g,h,j,k={},l=this.renderer,m=l.alignedObjects;return a?(this.alignOptions=a,this.alignByTranslate=b,(!d||c(d))&&(this.alignTo=j=d||"renderer",i(m,this),m.push(this),d=null)):(a=this.alignOptions,b=this.alignByTranslate,j=this.alignTo),d=eb(d,l[j],l),e=a.align,f=a.verticalAlign,g=(d.x||0)+(a.x||0),h=(d.y||0)+(a.y||0),("right"===e||"center"===e)&&(g+=(d.width-(a.width||0))/{right:1,center:2}[e]),k[b?"translateX":"x"]=ma(g),("bottom"===f||"middle"===f)&&(h+=(d.height-(a.height||0))/({bottom:1,middle:2}[f]||1)),k[b?"translateY":"y"]=ma(h),this[this.placed?"animate":"attr"](k),this.placed=!0,this.alignAttr=k,this},getBBox:function(a){var b,c,d,e,f,g,h=this,i=h.renderer,j=h.rotation,k=h.element,l=h.styles,m=j*va,n=h.textStr,o=k.style;if(n!==K&&(g=["",j||0,l&&l.fontSize,k.style.width].join(","),g=""===n||Ya.test(n)?"num:"+n.toString().length+g:n+g),g&&!a&&(b=i.cache[g]),!b){if(k.namespaceURI===Da||i.forExport){try{f=this.fakeTS&&function(a){lb(k.querySelectorAll("."+Sa+"text-shadow"),function(b){b.style.display=a})},Ba&&o.textShadow?(e=o.textShadow,o.textShadow=""):f&&f(Va),b=k.getBBox?db({},k.getBBox()):{width:k.offsetWidth,height:k.offsetHeight},e?o.textShadow=e:f&&f("")}catch(p){}(!b||b.width<0)&&(b={width:0,height:0})}else b=h.htmlGetBBox();i.isSVG&&(c=b.width,d=b.height,ya&&l&&"11px"===l.fontSize&&"16.9"===d.toPrecision(3)&&(b.height=d=14),j&&(b.width=ra(d*ta(m))+ra(c*sa(m)),b.height=ra(d*sa(m))+ra(c*ta(m)))),g&&(i.cache[g]=b)}return b},show:function(a){return this.attr({visibility:a?"inherit":Ta})},hide:function(){return this.attr({visibility:Ra})},fadeOut:function(a){var b=this;b.animate({opacity:0},{duration:a||150,complete:function(){b.attr({y:-9999})}})},add:function(a){var b,c=this.renderer,d=this.element;return a&&(this.parentGroup=a),this.parentInverted=a&&a.inverted,void 0!==this.textStr&&c.buildText(this),this.added=!0,(!a||a.handleZ||this.zIndex)&&(b=this.zIndexSetter()),b||(a?a.element:c.box).appendChild(d),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a,b,c,d=this,e=d.element||{},f=d.shadows,g=d.renderer.isSVG&&"SPAN"===e.nodeName&&d.parentGroup;if(e.onclick=e.onmouseout=e.onmouseover=e.onmousemove=e.point=null,ub(d),d.clipPath&&(d.clipPath=d.clipPath.destroy()),d.stops){for(c=0;c<d.stops.length;c++)d.stops[c]=d.stops[c].destroy();d.stops=null}for(d.safeRemoveChild(e),f&&lb(f,function(a){d.safeRemoveChild(a)});g&&g.div&&0===g.div.childNodes.length;)a=g.parentGroup,d.safeRemoveChild(g.div),delete g.div,g=a;d.alignTo&&i(d.renderer.alignedObjects,d);for(b in d)delete d[b];return null},shadow:function(a,b,c){var d,e,f,g,h,i,j=[],l=this.element;if(a){for(g=eb(a.width,3),h=(a.opacity||.15)/g,i=this.parentInverted?"(-1,-1)":"("+eb(a.offsetX,1)+", "+eb(a.offsetY,1)+")",d=1;g>=d;d++)e=l.cloneNode(0),f=2*g+1-2*d,k(e,{isShadow:"true",stroke:a.color||"black","stroke-opacity":h*d,"stroke-width":f,transform:"translate"+i,fill:Va}),c&&(k(e,"height",pa(k(e,"height")-f,0)),e.cutHeight=f),b?b.element.appendChild(e):l.parentNode.insertBefore(e,l),j.push(e);this.shadows=j}return this},xGetter:function(a){return"circle"===this.element.nodeName&&(a={x:"cx",y:"cy"}[a]||a),this._defaultGetter(a)},_defaultGetter:function(a){var b=eb(this[a],this.element?this.element.getAttribute(a):null,0);return/^[\-0-9\.]+$/.test(b)&&(b=parseFloat(b)),b},dSetter:function(a,b,c){a&&a.join&&(a=a.join(" ")),/(NaN| {2}|^$)/.test(a)&&(a="M 0 0"),c.setAttribute(b,a),this[b]=a},dashstyleSetter:function(a){var c;if(a=a&&a.toLowerCase()){for(a=a.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),c=a.length;c--;)a[c]=b(a[c])*this["stroke-width"];a=a.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",a)}},alignSetter:function(a){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[a])},opacitySetter:function(a,b,c){this[b]=a,c.setAttribute(b,a)},titleSetter:function(a){var b=this.element.getElementsByTagName("title")[0];b||(b=ja.createElementNS(Da,"title"),this.element.appendChild(b)),b.appendChild(ja.createTextNode(String(eb(a),"").replace(/<[^>]*>/g,"")))},textSetter:function(a){a!==this.textStr&&(delete this.bBox,this.textStr=a,this.added&&this.renderer.buildText(this))},fillSetter:function(a,b,c){"string"==typeof a?c.setAttribute(b,a):a&&this.colorGradient(a,b,c)},visibilitySetter:function(a,b,c){"inherit"===a?c.removeAttribute(b):c.setAttribute(b,a)},zIndexSetter:function(a,c){var d,e,f,g,h,i=this.renderer,l=this.parentGroup,m=l||i,n=m.element||i.box,o=this.element,p=this.added;
if(j(a)&&(o.setAttribute(c,a),a=+a,this[c]===a&&(p=!1),this[c]=a),p){for(a=this.zIndex,a&&l&&(l.handleZ=!0),d=n.childNodes,h=0;h<d.length&&!g;h++)e=d[h],f=k(e,"zIndex"),e!==o&&(b(f)>a||!j(a)&&j(f))&&(n.insertBefore(o,e),g=!0);g||n.appendChild(o)}return g},_defaultSetter:function(a,b,c){c.setAttribute(b,a)}},H.prototype.yGetter=H.prototype.xGetter,H.prototype.translateXSetter=H.prototype.translateYSetter=H.prototype.rotationSetter=H.prototype.verticalAlignSetter=H.prototype.scaleXSetter=H.prototype.scaleYSetter=function(a,b){this[b]=a,this.doTransform=!0},H.prototype["stroke-widthSetter"]=H.prototype.strokeSetter=function(a,b,c){this[b]=a,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],H.prototype.fillSetter.call(this,this.stroke,"stroke",c),c.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===b&&0===a&&this.hasStroke&&(c.removeAttribute("stroke"),this.hasStroke=!1)};var Bb=function(){this.init.apply(this,arguments)};Bb.prototype={Element:H,init:function(a,b,c,d,e){var f,g,h,i=this,j=location;f=i.createElement("svg").attr({version:"1.1"}).css(this.getStyle(d)),g=f.element,a.appendChild(g),-1===a.innerHTML.indexOf("xmlns")&&k(g,"xmlns",Da),i.isSVG=!0,i.box=g,i.boxWrapper=f,i.alignedObjects=[],i.url=(Ba||Aa)&&ja.getElementsByTagName("base").length?j.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",h=this.createElement("desc").add(),h.element.appendChild(ja.createTextNode("Created with "+Ma+" "+Na)),i.defs=this.createElement("defs").add(),i.forExport=e,i.gradients={},i.cache={},i.setSize(b,c,!1);var l,n;Ba&&a.getBoundingClientRect&&(i.subPixelFix=l=function(){m(a,{left:0,top:0}),n=a.getBoundingClientRect(),m(a,{left:oa(n.left)-n.left+Ua,top:oa(n.top)-n.top+Ua})},l(),pb(ka,"resize",l))},getStyle:function(a){return this.style=db({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},a)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this,b=a.defs;return a.box=null,a.boxWrapper=a.boxWrapper.destroy(),z(a.gradients||{}),a.gradients=null,b&&(a.defs=b.destroy()),a.subPixelFix&&qb(ka,"resize",a.subPixelFix),a.alignedObjects=null,null},createElement:function(a){var b=new this.Element;return b.init(this,a),b},draw:function(){},buildText:function(a){for(var c,d,e,f=a.element,g=this,h=g.forExport,i=eb(a.textStr,"").toString(),j=-1!==i.indexOf("<"),l=f.childNodes,n=k(f,"x"),o=a.styles,p=a.textWidth,q=o&&o.lineHeight,r=o&&o.textShadow,s=o&&"ellipsis"===o.textOverflow,t=l.length,u=p&&!a.added&&this.box,v=function(a){return q?b(q):g.fontMetrics(/(px|em)$/.test(a&&a.style.fontSize)?a.style.fontSize:o&&o.fontSize||g.style.fontSize||12,a).h},w=function(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">")};t--;)f.removeChild(l[t]);return j||r||s||-1!==i.indexOf(" ")?(d=/<.*style="([^"]+)".*>/,e=/<.*href="(http[^"]+)".*>/,u&&u.appendChild(f),c=j?i.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[i],""===c[c.length-1]&&c.pop(),lb(c,function(b,c){var i,j=0;b=b.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),i=b.split("|||"),lb(i,function(b){if(""!==b||1===i.length){var l,q={},r=ja.createElementNS(Da,"tspan");if(d.test(b)&&(l=b.match(d)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),k(r,"style",l)),e.test(b)&&!h&&(k(r,"onclick",'location.href="'+b.match(e)[1]+'"'),m(r,{cursor:"pointer"})),b=w(b.replace(/<(.|\n)*?>/g,"")||" ")," "!==b){if(r.appendChild(ja.createTextNode(b)),j?q.dx=0:c&&null!==n&&(q.x=n),k(r,q),f.appendChild(r),!j&&c&&(!Ea&&h&&m(r,{display:"block"}),k(r,"dy",v(r))),p){for(var t,u,x,y,z=b.replace(/([^\^])-/g,"$1- ").split(" "),A=i.length>1||c||z.length>1&&"nowrap"!==o.whiteSpace,B=[],C=v(r),D=1,E=a.rotation,F=b,G=F.length;(A||s)&&(z.length||B.length);)a.rotation=0,y=a.getBBox(!0),x=y.width,!Ea&&g.forExport&&(x=g.measureSpanWidth(r.firstChild.data,a.styles)),t=x>p,void 0===u&&(u=t),s&&u?(G/=2,""===F||!t&&.5>G?z=[]:(t&&(u=!0),F=b.substring(0,F.length+(t?-1:1)*oa(G)),z=[F+(p>3?"…":"")],r.removeChild(r.firstChild))):t&&1!==z.length?(r.removeChild(r.firstChild),B.unshift(z.pop())):(z=B,B=[],z.length&&(D++,r=ja.createElementNS(Da,"tspan"),k(r,{dy:C,x:n}),l&&k(r,"style",l),f.appendChild(r)),x>p&&(p=x)),z.length&&r.appendChild(ja.createTextNode(z.join(" ").replace(/- /g,"-")));u&&a.attr("title",a.textStr),a.rotation=E}j++}}})}),u&&u.removeChild(f),r&&a.applyTextShadow&&a.applyTextShadow(r),void 0):void f.appendChild(ja.createTextNode(w(i)))},getContrast:function(a){return a=Ab(a).rgba,a[0]+a[1]+a[2]>384?"#000000":"#FFFFFF"},button:function(b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q=this.label(b,c,d,j,null,null,null,null,"button"),r=0,s={x1:0,y1:0,x2:0,y2:1};return f=a({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:s,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},f),m=f.style,delete f.style,g=a(f,{stroke:"#68A",fill:{linearGradient:s,stops:[[0,"#FFF"],[1,"#ACF"]]}},g),n=g.style,delete g.style,h=a(f,{stroke:"#68A",fill:{linearGradient:s,stops:[[0,"#9BD"],[1,"#CDF"]]}},h),o=h.style,delete h.style,i=a(f,{style:{color:"#CCC"}},i),p=i.style,delete i.style,pb(q.element,ya?"mouseover":"mouseenter",function(){3!==r&&q.attr(g).css(n)}),pb(q.element,ya?"mouseout":"mouseleave",function(){3!==r&&(k=[f,g,h][r],l=[m,n,o][r],q.attr(k).css(l))}),q.setState=function(a){q.state=r=a,a?2===a?q.attr(h).css(o):3===a&&q.attr(i).css(p):q.attr(f).css(m)},q.on("click",function(a){3!==r&&e.call(q,a)}).attr(f).css(db({cursor:"default"},m))},crispLine:function(a,b){return a[1]===a[4]&&(a[1]=a[4]=ma(a[1])-b%2/2),a[2]===a[5]&&(a[2]=a[5]=ma(a[2])+b%2/2),a},path:function(a){var b={fill:Va};return e(a)?b.d=a:d(a)&&db(b,a),this.createElement("path").attr(b)},circle:function(a,b,c){var e=d(a)?a:{x:a,y:b,r:c},f=this.createElement("circle");return f.xSetter=function(a){this.element.setAttribute("cx",a)},f.ySetter=function(a){this.element.setAttribute("cy",a)},f.attr(e)},arc:function(a,b,c,e,f,g){var h;return d(a)&&(b=a.y,c=a.r,e=a.innerR,f=a.start,g=a.end,a=a.x),h=this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:e||0,start:f||0,end:g||0}),h.r=c,h},rect:function(a,b,c,e,f,g){f=d(a)?a.r:f;var h=this.createElement("rect"),i=d(a)?a:a===K?{}:{x:a,y:b,width:pa(c,0),height:pa(e,0)};return g!==K&&(i.strokeWidth=g,i=h.crisp(i)),f&&(i.r=f),h.rSetter=function(a){k(this.element,{rx:a,ry:a})},h.attr(i)},setSize:function(a,b,c){var d=this,e=d.alignedObjects,f=e.length;for(d.width=a,d.height=b,d.boxWrapper[eb(c,!0)?"animate":"attr"]({width:a,height:b});f--;)e[f].align()},g:function(a){var b=this.createElement("g");return j(a)?b.attr({"class":Sa+a}):b},image:function(a,b,c,d,e){var f,g={preserveAspectRatio:Va};return arguments.length>1&&db(g,{x:b,y:c,width:d,height:e}),f=this.createElement("image").attr(g),f.element.setAttributeNS?f.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):f.element.setAttribute("hc-svg-href",a),f},symbol:function(a,b,c,d,e,f){var g,h,i,j,k,l=this.symbols[a],m=l&&l(ma(b),ma(c),d,e,f),o=/^url\((.*?)\)$/;return m?(g=this.path(m),db(g,{symbolName:a,x:b,y:c,width:d,height:e}),f&&db(g,f)):o.test(a)&&(k=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(ma((d-b[0])/2),ma((e-b[1])/2)))},i=a.match(o)[1],j=Ha[i]||f&&f.width&&f.height&&[f.width,f.height],g=this.image(i).attr({x:b,y:c}),g.isImg=!0,j?k(g,j):(g.attr({width:0,height:0}),h=n("img",{onload:function(){k(g,Ha[i]=[this.width,this.height])},src:i}))),g},symbols:{circle:function(a,b,c,d){var e=.166*c;return[Wa,a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return[Wa,a,b,Xa,a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return[Wa,a+c/2,b,Xa,a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return[Wa,a,b,Xa,a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return[Wa,a+c/2,b,Xa,a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,g=e.r||c||d,h=e.end-.001,i=e.innerR,j=e.open,k=sa(f),l=ta(f),m=sa(h),n=ta(h),o=e.end-f<ua?0:1;return[Wa,a+g*k,b+g*l,"A",g,g,0,o,1,a+g*m,b+g*n,j?Wa:Xa,a+i*m,b+i*n,"A",i,i,0,o,0,a+i*k,b+i*l,j?"":"Z"]},callout:function(a,b,c,d,e){var f,g=6,h=6,i=qa(e&&e.r||0,c,d),j=i+h,k=e&&e.anchorX,l=e&&e.anchorY;return f=["M",a+i,b,"L",a+c-i,b,"C",a+c,b,a+c,b,a+c,b+i,"L",a+c,b+d-i,"C",a+c,b+d,a+c,b+d,a+c-i,b+d,"L",a+i,b+d,"C",a,b+d,a,b+d,a,b+d-i,"L",a,b+i,"C",a,b,a,b,a+i,b],k&&k>c&&l>b+j&&b+d-j>l?f.splice(13,3,"L",a+c,l-h,a+c+g,l,a+c,l+h,a+c,b+d-i):k&&0>k&&l>b+j&&b+d-j>l?f.splice(33,3,"L",a,l+h,a-g,l,a,l-h,a,b+i):l&&l>d&&k>a+j&&a+c-j>k?f.splice(23,3,"L",k+h,b+d,k,b+d+g,k-h,b+d,a+i,b+d):l&&0>l&&k>a+j&&a+c-j>k&&f.splice(3,3,"L",k-h,b,k,b-g,k+h,b,c-i,b),f}},clipRect:function(a,b,c,d){var e,f=Sa+Ia++,g=this.createElement("clipPath").attr({id:f}).add(this.defs);return e=this.rect(a,b,c,d,0).add(g),e.id=f,e.clipPath=g,e.count=0,e},text:function(a,b,c,d){var e,f=this,g=Ga||!Ea&&f.forExport,h={};return d&&!f.forExport?f.html(a,b,c):(h.x=Math.round(b||0),c&&(h.y=Math.round(c)),(a||0===a)&&(h.text=a),e=f.createElement("text").attr(h),g&&e.css({position:Pa}),d||(e.xSetter=function(a,b,c){var d,e,f=c.getElementsByTagName("tspan"),g=c.getAttribute(b);for(e=0;e<f.length;e++)d=f[e],d.getAttribute(b)===g&&d.setAttribute(b,a);c.setAttribute(b,a)}),e)},fontMetrics:function(a,c){var d,e,f;return a=a||this.style.fontSize,c&&ka.getComputedStyle&&(c=c.element||c,f=ka.getComputedStyle(c,""),a=f&&f.fontSize),a=/px/.test(a)?b(a):/em/.test(a)?12*parseFloat(a):12,d=24>a?a+3:ma(1.2*a),e=ma(.8*d),{h:d,b:e,f:a}},rotCorr:function(a,b,c){var d=a;return b&&c&&(d=pa(d*sa(b*va),4)),{x:-a/3*ta(b*va),y:d}},label:function(b,c,d,e,f,g,h,i,k){function l(){var a,b,c=y.element.style;p=(void 0===q||void 0===r||x.styles.textAlign)&&j(y.textStr)&&y.getBBox(),x.width=(q||p.width||0)+2*A+B,x.height=(r||p.height||0)+2*A,u=A+w.fontMetrics(c&&c.fontSize,y).b,v&&(o||(a=ma(-z*A)+C,b=(i?-u:0)+C,x.box=o=e?w.symbol(e,a,b,x.width,x.height,D):w.rect(a,b,x.width,x.height,0,D[bb]),o.isImg||o.attr("fill",Va),o.add(x)),o.isImg||o.attr(db({width:ma(x.width),height:ma(x.height)},D)),D=null)}function m(){var a,b=x.styles,c=b&&b.textAlign,d=B+A*(1-z);a=i?0:u,j(q)&&p&&("center"===c||"right"===c)&&(d+={center:.5,right:1}[c]*(q-p.width)),(d!==y.x||a!==y.y)&&(y.attr("x",d),a!==K&&y.attr("y",a)),y.x=d,y.y=a}function n(a,b){o?o.attr(a,b):D[a]=b}var o,p,q,r,s,t,u,v,w=this,x=w.g(k),y=w.text("",0,0,h).attr({zIndex:1}),z=0,A=3,B=0,C=0,D={};x.onAdd=function(){y.add(x),x.attr({text:b||0===b?b:"",x:c,y:d}),o&&j(f)&&x.attr({anchorX:f,anchorY:g})},x.widthSetter=function(a){q=a},x.heightSetter=function(a){r=a},x.paddingSetter=function(a){j(a)&&a!==A&&(A=x.padding=a,m())},x.paddingLeftSetter=function(a){j(a)&&a!==B&&(B=a,m())},x.alignSetter=function(a){z={left:0,center:.5,right:1}[a]},x.textSetter=function(a){a!==K&&y.textSetter(a),l(),m()},x["stroke-widthSetter"]=function(a,b){a&&(v=!0),C=a%2/2,n(b,a)},x.strokeSetter=x.fillSetter=x.rSetter=function(a,b){"fill"===b&&a&&(v=!0),n(b,a)},x.anchorXSetter=function(a,b){f=a,n(b,ma(a)-C-s)},x.anchorYSetter=function(a,b){g=a,n(b,a-t)},x.xSetter=function(a){x.x=a,z&&(a-=z*((q||p.width)+A)),s=ma(a),x.attr("translateX",s)},x.ySetter=function(a){t=x.y=ma(a),x.attr("translateY",t)};var E=x.css;return db(x,{css:function(b){if(b){var c={};b=a(b),lb(x.textProps,function(a){b[a]!==K&&(c[a]=b[a],delete b[a])}),y.css(c)}return E.call(x,b)},getBBox:function(){return{width:p.width+2*A,height:p.height+2*A,x:p.x-A,y:p.y-A}},shadow:function(a){return o&&o.shadow(a),x},destroy:function(){qb(x.element,"mouseenter"),qb(x.element,"mouseleave"),y&&(y=y.destroy()),o&&(o=o.destroy()),H.prototype.destroy.call(x),x=w=l=m=n=null}})}},L=Bb,db(H.prototype,{htmlCss:function(a){var b=this,c=b.element,d=a&&"SPAN"===c.tagName&&a.width;return d&&(delete a.width,b.textWidth=d,b.updateTransform()),a&&"ellipsis"===a.textOverflow&&(a.whiteSpace="nowrap",a.overflow="hidden"),b.styles=db(b.styles,a),m(b.element,a),b},htmlGetBBox:function(){var a=this,b=a.element;return"text"===b.nodeName&&(b.style.position=Pa),{x:b.offsetLeft,y:b.offsetTop,width:b.offsetWidth,height:b.offsetHeight}},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var a=this,c=a.renderer,d=a.element,e=a.translateX||0,f=a.translateY||0,g=a.x||0,h=a.y||0,i=a.textAlign||"left",k={left:0,center:.5,right:1}[i],l=a.shadows,n=a.styles;if(m(d,{marginLeft:e,marginTop:f}),l&&lb(l,function(a){m(a,{marginLeft:e+1,marginTop:f+1})}),a.inverted&&lb(d.childNodes,function(a){c.invertChild(a,d)}),"SPAN"===d.tagName){var o,p,q=a.rotation,r=b(a.textWidth),s=[q,i,d.innerHTML,a.textWidth,a.textAlign].join(",");s!==a.cTT&&(p=c.fontMetrics(d.style.fontSize).b,j(q)&&a.setSpanRotation(q,k,p),o=eb(a.elemWidth,d.offsetWidth),o>r&&/[ \-]/.test(d.textContent||d.innerText)&&(m(d,{width:r+Ua,display:"block",whiteSpace:n&&n.whiteSpace||"normal"}),o=r),a.getSpanCorrection(o,p,k,q,i)),m(d,{left:g+(a.xCorr||0)+Ua,top:h+(a.yCorr||0)+Ua}),Aa&&(p=d.offsetHeight),a.cTT=s}},setSpanRotation:function(a,b,c){var d={},e=ya?"-ms-transform":Aa?"-webkit-transform":Ba?"MozTransform":xa?"-o-transform":"";d[e]=d.transform="rotate("+a+"deg)",d[e+(Ba?"Origin":"-origin")]=d.transformOrigin=100*b+"% "+c+"px",m(this.element,d)},getSpanCorrection:function(a,b,c){this.xCorr=-a*c,this.yCorr=-b}}),db(Bb.prototype,{html:function(a,b,c){var d=this.createElement("span"),e=d.element,f=d.renderer;return d.textSetter=function(a){a!==e.innerHTML&&delete this.bBox,e.innerHTML=this.textStr=a,d.htmlUpdateTransform()},d.xSetter=d.ySetter=d.alignSetter=d.rotationSetter=function(a,b){"align"===b&&(b="textAlign"),d[b]=a,d.htmlUpdateTransform()},d.attr({text:a,x:ma(b),y:ma(c)}).css({position:Pa,fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),e.style.whiteSpace="nowrap",d.css=d.htmlCss,f.isSVG&&(d.add=function(a){var b,c,g=f.box.parentNode,h=[];if(this.parentGroup=a,a){if(b=a.div,!b){for(c=a;c;)h.push(c),c=c.parentGroup;lb(h.reverse(),function(a){var c,d=k(a.element,"class");d&&(d={className:d}),b=a.div=a.div||n(Oa,d,{position:Pa,left:(a.translateX||0)+Ua,top:(a.translateY||0)+Ua},b||g),c=b.style,db(a,{translateXSetter:function(b,d){c.left=b+Ua,a[d]=b,a.doTransform=!0},translateYSetter:function(b,d){c.top=b+Ua,a[d]=b,a.doTransform=!0}}),fb(a,"visibilitySetter",function(a,b,d,e){a.call(this,b,d,e),c[d]=b})})}}else b=g;return b.appendChild(e),d.added=!0,d.alignOnAdd&&d.htmlUpdateTransform(),d}),d}});var Cb,Db;if(!Ea&&!Ga){Db={init:function(a,b){var c=this,d=["<",b,' filled="f" stroked="f"'],e=["position: ",Pa,";"],f=b===Oa;("shape"===b||f)&&e.push("left:0;top:0;width:1px;height:1px;"),e.push("visibility: ",f?Ra:Ta),d.push(' style="',e.join(""),'"/>'),b&&(d=f||"span"===b||"img"===b?d.join(""):a.prepVML(d),c.element=n(d)),c.renderer=a},add:function(a){var b=this,c=b.renderer,d=b.element,e=c.box,f=a&&a.inverted,g=a?a.element||a:e;return f&&c.invertChild(d,g),g.appendChild(d),b.added=!0,b.alignOnAdd&&!b.deferUpdateTransform&&b.updateTransform(),b.onAdd&&b.onAdd(),b},updateTransform:H.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=sa(a*va),c=ta(a*va);m(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-c,", M21=",c,", M22=",b,", sizingMethod='auto expand')"].join(""):Va})},getSpanCorrection:function(a,b,c,d,e){var f,g=d?sa(d*va):1,h=d?ta(d*va):0,i=eb(this.elemHeight,this.element.offsetHeight),j=e&&"left"!==e;this.xCorr=0>g&&-a,this.yCorr=0>h&&-i,f=0>g*h,this.xCorr+=h*b*(f?1-c:c),this.yCorr-=g*b*(d?f?c:1-c:1),j&&(this.xCorr-=a*c*(0>g?-1:1),d&&(this.yCorr-=i*c*(0>h?-1:1)),m(this.element,{textAlign:e}))},pathToVML:function(a){for(var b=a.length,c=[];b--;)f(a[b])?c[b]=ma(10*a[b])-5:"Z"===a[b]?c[b]="x":(c[b]=a[b],!a.isArc||"wa"!==a[b]&&"at"!==a[b]||(c[b+5]===c[b+7]&&(c[b+7]+=a[b+7]>a[b+5]?1:-1),c[b+6]===c[b+8]&&(c[b+8]+=a[b+8]>a[b+6]?1:-1)));return c.join(" ")||"x"},clip:function(a){var b,c,d=this;return a?(b=a.members,i(b,d),b.push(d),d.destroyClip=function(){i(b,d)},c=a.getCSS(d)):(d.destroyClip&&d.destroyClip(),c={clip:za?"inherit":"rect(auto)"}),d.css(c)},css:H.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&A(a)},destroy:function(){return this.destroyClip&&this.destroyClip(),H.prototype.destroy.apply(this)},on:function(a,b){return this.element["on"+a]=function(){var a=ka.event;a.target=a.srcElement,b(a)},this},cutOffPath:function(a,c){var d;return a=a.split(/[ ,]/),d=a.length,(9===d||11===d)&&(a[d-4]=a[d-2]=b(a[d-2])-10*c),a.join(" ")},shadow:function(a,c,d){var e,f,g,h,i,j,k,l=[],m=this.element,o=this.renderer,p=m.style,q=m.path;if(q&&"string"!=typeof q.value&&(q="x"),i=q,a){for(j=eb(a.width,3),k=(a.opacity||.15)/j,e=1;3>=e;e++)h=2*j+1-2*e,d&&(i=this.cutOffPath(q.value,h+.5)),g=['<shape isShadow="true" strokeweight="',h,'" filled="false" path="',i,'" coordsize="10 10" style="',m.style.cssText,'" />'],f=n(o.prepVML(g),null,{left:b(p.left)+eb(a.offsetX,1),top:b(p.top)+eb(a.offsetY,1)}),d&&(f.cutOff=h+1),g=['<stroke color="',a.color||"black",'" opacity="',k*e,'"/>'],n(o.prepVML(g),null,null,f),c?c.element.appendChild(f):m.parentNode.insertBefore(f,m),l.push(f);this.shadows=l}return this},updateShadows:Ja,setAttr:function(a,b){za?this.element[a]=b:this.element.setAttribute(a,b)},classSetter:function(a){this.element.className=a},dashstyleSetter:function(a,b,c){var d=c.getElementsByTagName("stroke")[0]||n(this.renderer.prepVML(["<stroke/>"]),null,null,c);d[b]=a||"solid",this[b]=a},dSetter:function(a,b,c){var d,e=this.shadows;if(a=a||[],this.d=a.join&&a.join(" "),c.path=a=this.pathToVML(a),e)for(d=e.length;d--;)e[d].path=e[d].cutOff?this.cutOffPath(a,e[d].cutOff):a;this.setAttr(b,a)},fillSetter:function(a,b,c){var d=c.nodeName;"SPAN"===d?c.style.color=a:"IMG"!==d&&(c.filled=a!==Va,this.setAttr("fillcolor",this.renderer.color(a,c,b,this)))},opacitySetter:Ja,rotationSetter:function(a,b,c){var d=c.style;this[b]=d[b]=a,d.left=-ma(ta(a*va)+1)+Ua,d.top=ma(sa(a*va))+Ua},strokeSetter:function(a,b,c){this.setAttr("strokecolor",this.renderer.color(a,c,b))},"stroke-widthSetter":function(a,b,c){c.stroked=!!a,this[b]=a,f(a)&&(a+=Ua),this.setAttr("strokeweight",a)},titleSetter:function(a,b){this.setAttr(b,a)},visibilitySetter:function(a,b,c){"inherit"===a&&(a=Ta),this.shadows&&lb(this.shadows,function(c){c.style[b]=a}),"DIV"===c.nodeName&&(a=a===Ra?"-999em":0,za||(c.style[b]=a?Ta:Ra),b="top"),c.style[b]=a},xSetter:function(a,b,c){this[b]=a,"x"===b?b="left":"y"===b&&(b="top"),this.updateClipping?(this[b]=a,this.updateClipping()):c.style[b]=a},zIndexSetter:function(a,b,c){c.style[b]=a}},ia.VMLElement=Db=o(H,Db),Db.prototype.ySetter=Db.prototype.widthSetter=Db.prototype.heightSetter=Db.prototype.xSetter;var Eb={Element:Db,isIE8:wa.indexOf("MSIE 8.0")>-1,init:function(a,b,c,d){var e,f,g,h=this;if(h.alignedObjects=[],e=h.createElement(Oa).css(db(this.getStyle(d),{position:Qa})),f=e.element,a.appendChild(e.element),h.isVML=!0,h.box=f,h.boxWrapper=e,h.cache={},h.setSize(b,c,!1),!ja.namespaces.hcv){ja.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),g="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{ja.createStyleSheet().cssText=g}catch(i){ja.styleSheets[0].cssText+=g}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(a,b,c,e){var f=this.createElement(),g=d(a);return db(f,{members:[],count:0,left:(g?a.x:a)+1,top:(g?a.y:b)+1,width:(g?a.width:c)-1,height:(g?a.height:e)-1,getCSS:function(a){var b=a.element,c=b.nodeName,d="shape"===c,e=a.inverted,f=this,g=f.top-(d?b.offsetTop:0),h=f.left,i=h+f.width,j=g+f.height,k={clip:"rect("+ma(e?h:g)+"px,"+ma(e?j:i)+"px,"+ma(e?i:j)+"px,"+ma(e?g:h)+"px)"};return!e&&za&&"DIV"===c&&db(k,{width:i+Ua,height:j+Ua}),k},updateClipping:function(){lb(f.members,function(a){a.element&&a.css(f.getCSS(a))})}})},color:function(a,b,c,d){var e,f,g,h=this,i=/^rgba/,j=Va;if(a&&a.linearGradient?g="gradient":a&&a.radialGradient&&(g="pattern"),g){var k,l,m,o,p,q,r,s,t,u,v,w,x=a.linearGradient||a.radialGradient,y="",z=a.stops,A=[],B=function(){f=['<fill colors="'+A.join(",")+'" opacity="',s,'" o:opacity2="',r,'" type="',g,'" ',y,'focus="100%" method="any" />'],n(h.prepVML(f),null,null,b)};if(v=z[0],w=z[z.length-1],v[0]>0&&z.unshift([0,v[1]]),w[0]<1&&z.push([1,w[1]]),lb(z,function(a,b){i.test(a[1])?(e=Ab(a[1]),k=e.get("rgb"),l=e.get("a")):(k=a[1],l=1),A.push(100*a[0]+"% "+k),b?(s=l,t=k):(r=l,u=k)}),"fill"===c)if("gradient"===g)m=x.x1||x[0]||0,o=x.y1||x[1]||0,p=x.x2||x[2]||0,q=x.y2||x[3]||0,y='angle="'+(90-180*la.atan((q-o)/(p-m))/ua)+'"',B();else{var C,D=x.r,E=2*D,F=2*D,G=x.cx,H=x.cy,I=b.radialReference,J=function(){I&&(C=d.getBBox(),G+=(I[0]-C.x)/C.width-.5,H+=(I[1]-C.y)/C.height-.5,E*=I[2]/C.width,F*=I[2]/C.height),y='src="'+O.global.VMLRadialGradientURL+'" size="'+E+","+F+'" origin="0.5,0.5" position="'+G+","+H+'" color2="'+u+'" ',B()};d.added?J():d.onAdd=J,j=t}else j=k}else if(i.test(a)&&"IMG"!==b.tagName)e=Ab(a),f=["<",c,' opacity="',e.get("a"),'"/>'],n(this.prepVML(f),null,null,b),j=e.get("rgb");else{var K=b.getElementsByTagName(c);K.length&&(K[0].opacity=1,K[0].type="solid"),j=a}return j},prepVML:function(a){var b="display:inline-block;behavior:url(#default#VML);",c=this.isIE8;return a=a.join(""),c?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="'+b+'" />'):a.replace('style="','style="'+b)):a=a.replace("<","<hcv:"),a},text:Bb.prototype.html,path:function(a){var b={coordsize:"10 10"};return e(a)?b.d=a:d(a)&&db(b,a),this.createElement("shape").attr(b)},circle:function(a,b,c){var e=this.symbol("circle");return d(a)&&(c=a.r,b=a.y,a=a.x),e.isCircle=!0,e.r=c,e.attr({x:a,y:b})},g:function(a){var b,c;return a&&(c={className:Sa+a,"class":Sa+a}),b=this.createElement(Oa).attr(c)},image:function(a,b,c,d,e){var f=this.createElement("img").attr({src:a});return arguments.length>1&&f.attr({x:b,y:c,width:d,height:e}),f},createElement:function(a){return"rect"===a?this.symbol(a):Bb.prototype.createElement.call(this,a)},invertChild:function(a,c){var d=this,e=c.style,f="IMG"===a.tagName&&a.style;m(a,{flip:"x",left:b(e.width)-(f?b(f.top):1),top:b(e.height)-(f?b(f.left):1),rotation:-90}),lb(a.childNodes,function(b){d.invertChild(b,a)})},symbols:{arc:function(a,b,c,d,e){var f,g=e.start,h=e.end,i=e.r||c||d,j=e.innerR,k=sa(g),l=ta(g),m=sa(h),n=ta(h);return h-g===0?["x"]:(f=["wa",a-i,b-i,a+i,b+i,a+i*k,b+i*l,a+i*m,b+i*n],e.open&&!j&&f.push("e",Wa,a,b),f.push("at",a-j,b-j,a+j,b+j,a+j*m,b+j*n,a+j*k,b+j*l,"x","e"),f.isArc=!0,f)},circle:function(a,b,c,d,e){return e&&(c=d=2*e.r),e&&e.isCircle&&(a-=c/2,b-=d/2),["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){return Bb.prototype.symbols[j(e)&&e.r?"callout":"square"].call(0,a,b,c,d,e)}}};ia.VMLRenderer=Cb=function(){this.init.apply(this,arguments)},Cb.prototype=a(Bb.prototype,Eb),L=Cb}Bb.prototype.measureSpanWidth=function(a,b){var c,d=ja.createElement("span"),e=ja.createTextNode(a);return d.appendChild(e),m(d,b),this.box.appendChild(d),c=d.offsetWidth,A(d),c};var Fb,Gb;Ga&&(ia.CanVGRenderer=Fb=function(){Da="http://www.w3.org/1999/xhtml"},Fb.prototype.symbols={},Gb=function(){function a(){var a,c=b.length;for(a=0;c>a;a++)b[a]();b=[]}var b=[];return{push:function(c,d){0===b.length&&jb(d,a),b.push(c)}}}(),L=Fb),I.prototype={addLabel:function(){var b,c,d=this,e=d.axis,f=e.options,g=e.chart,i=e.categories,k=e.names,l=d.pos,m=f.labels,n=e.tickPositions,o=l===n[0],p=l===n[n.length-1],q=i?eb(i[l],k[l],l):l,r=d.label,s=n.info;e.isDatetimeAxis&&s&&(c=f.dateTimeLabelFormats[s.higherRanks[l]||s.unitName]),d.isFirst=o,d.isLast=p,b=e.labelFormatter.call({axis:e,chart:g,isFirst:o,isLast:p,dateTimeLabelFormat:c,value:e.isLog?C(h(q)):q}),j(r)?r&&r.attr({text:b}):(d.label=r=j(b)&&m.enabled?g.renderer.text(b,0,0,m.useHTML).css(a(m.style)).add(e.labelGroup):null,d.labelLength=r&&r.getBBox().width,d.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(a){var b,c,d,e=this.axis,f=a.x,g=e.chart.chartWidth,h=e.chart.spacing,i=eb(e.labelLeft,qa(e.pos,h[3])),j=eb(e.labelRight,pa(e.pos+e.len,g-h[1])),k=this.label,l=this.rotation,m={left:0,center:.5,right:1}[e.labelAlign],n=k.getBBox().width,o=e.slotWidth,p=m,q=1,r={};l?0>l&&i>f-m*n?d=ma(f/sa(l*va)-i):l>0&&f+m*n>j&&(d=ma((g-f)/sa(l*va))):(b=f-m*n,c=f+(1-m)*n,i>b?o=a.x+o*(1-m)-i:c>j&&(o=j-a.x+o*m,q=-1),o=qa(e.slotWidth,o),o<e.slotWidth&&"center"===e.labelAlign&&(a.x+=q*(e.slotWidth-o-p*(e.slotWidth-qa(n,o)))),(n>o||e.autoRotation&&k.styles.width)&&(d=o)),d&&(r.width=d,e.options.labels.style.textOverflow||(r.textOverflow="ellipsis"),k.css(r))},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,g=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||f.chartWidth)-e.right-e.left:0),y:a?g-e.bottom+e.offset-(e.opposite?e.height:0):g-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,g,h){var i,j=this.axis,k=j.transA,l=j.reversed,m=j.staggerLines,n=j.tickRotCorr||{x:0,y:0},o=eb(e.y,n.y+(2===j.side?8:-(c.getBBox().height/2)));return a=a+e.x+n.x-(f&&d?f*k*(l?-1:1):0),b=b+o-(f&&!d?f*k*(l?1:-1):0),m&&(i=g/(h||1)%m,b+=i*(j.labelOffset/m)),{x:a,y:ma(b)}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine([Wa,a,b,Xa,a+(e?0:-c),b+(e?c:0)],d)},render:function(a,b,c){var d,e,f,g=this,h=g.axis,i=h.options,j=h.chart,k=j.renderer,l=h.horiz,m=g.type,n=g.label,o=g.pos,p=i.labels,q=g.gridLine,r=m?m+"Grid":"grid",s=m?m+"Tick":"tick",t=i[r+"LineWidth"],u=i[r+"LineColor"],v=i[r+"LineDashStyle"],w=i[s+"Length"],x=eb(i[s+"Width"],!m&&h.isXAxis?1:0),y=i[s+"Color"],z=i[s+"Position"],A=g.mark,B=p.step,C=!0,D=h.tickmarkOffset,E=g.getPosition(l,o,D,b),F=E.x,G=E.y,H=l&&F===h.pos+h.len||!l&&G===h.pos?-1:1;c=eb(c,1),this.isActive=!0,t&&(d=h.getPlotLinePath(o+D,t*H,b,!0),q===K&&(f={stroke:u,"stroke-width":t},v&&(f.dashstyle=v),m||(f.zIndex=1),b&&(f.opacity=0),g.gridLine=q=t?k.path(d).attr(f).add(h.gridGroup):null),!b&&q&&d&&q[g.isNew?"attr":"animate"]({d:d,opacity:c})),x&&w&&("inside"===z&&(w=-w),h.opposite&&(w=-w),e=g.getMarkPath(F,G,w,x*H,l,k),A?A.animate({d:e,opacity:c}):g.mark=k.path(e).attr({stroke:y,"stroke-width":x,opacity:c}).add(h.axisGroup)),n&&!isNaN(F)&&(n.xy=E=g.getLabelPosition(F,G,n,l,p,D,a,B),g.isFirst&&!g.isLast&&!eb(i.showFirstLabel,1)||g.isLast&&!g.isFirst&&!eb(i.showLastLabel,1)?C=!1:!l||h.isRadial||p.step||p.rotation||b||0===c||g.handleOverflow(E),B&&a%B&&(C=!1),C&&!isNaN(E.y)?(E.opacity=c,n[g.isNew?"attr":"animate"](E),g.isNew=!1):n.attr("y",-9999))},destroy:function(){z(this,this.axis)}},ia.PlotLineOrBand=function(a,b){this.axis=a,b&&(this.options=b,this.id=b.id)},ia.PlotLineOrBand.prototype={render:function(){var b,c,d,e,f,h,i=this,k=i.axis,l=k.horiz,m=i.options,n=m.label,o=i.label,p=m.width,q=m.to,r=m.from,s=j(r)&&j(q),t=m.value,u=m.dashStyle,v=i.svgElem,w=[],z=m.color,A=m.zIndex,B=m.events,C={},D=k.chart.renderer;if(k.isLog&&(r=g(r),q=g(q),t=g(t)),p)w=k.getPlotLinePath(t,p),C={stroke:z,"stroke-width":p},u&&(C.dashstyle=u);else{if(!s)return;w=k.getPlotBandPath(r,q,m),z&&(C.fill=z),m.borderWidth&&(C.stroke=m.borderColor,C["stroke-width"]=m.borderWidth)}if(j(A)&&(C.zIndex=A),v)w?v.animate({d:w},null,v.onGetPath):(v.hide(),v.onGetPath=function(){v.show()},o&&(i.label=o=o.destroy()));else if(w&&w.length&&(i.svgElem=v=D.path(w).attr(C).add(),B)){b=function(a){v.on(a,function(b){B[a].apply(i,[b])})};for(c in B)b(c)}return n&&j(n.text)&&w&&w.length&&k.width>0&&k.height>0?(n=a({align:l&&s&&"center",x:l?!s&&4:10,verticalAlign:!l&&s&&"middle",y:l?s?16:10:s?6:-4,rotation:l&&!s&&90},n),o||(C={align:n.textAlign||n.align,rotation:n.rotation},j(A)&&(C.zIndex=A),i.label=o=D.text(n.text,0,0,n.useHTML).attr(C).css(n.style).add()),d=[w[1],w[4],s?w[6]:w[1]],e=[w[2],w[5],s?w[7]:w[2]],f=x(d),h=x(e),o.align(n,!1,{x:f,y:h,width:y(d)-f,height:y(e)-h}),o.show()):o&&o.hide(),i},destroy:function(){i(this.axis.plotLinesAndBands,this),delete this.axis,z(this)}},S={getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b,null,null,!0),d=this.getPlotLinePath(a,null,null,!0);return d&&c&&d.toString()!==c.toString()?d.push(c[4],c[5],c[1],c[2]):d=null,d},addPlotBand:function(a){return this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){return this.addPlotBandOrLine(a,"plotLines")},addPlotBandOrLine:function(a,b){var c=new ia.PlotLineOrBand(this,a).render(),d=this.userOptions;return c&&(b&&(d[b]=d[b]||[],d[b].push(a)),this.plotLinesAndBands.push(c)),c},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,c=this.options,d=this.userOptions,e=b.length;e--;)b[e].id===a&&b[e].destroy();lb([c.plotLines||[],d.plotLines||[],c.plotBands||[],d.plotBands||[]],function(b){for(e=b.length;e--;)b[e].id===a&&i(b,b[e])})}};var Hb=ia.Axis=function(){this.init.apply(this,arguments)};Hb.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return ia.numberFormat(this.total,-1)},style:a(vb.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(a,b){var c=b.isX,d=this;d.chart=a,d.horiz=a.inverted?!c:c,d.isXAxis=c,d.coll=c?"xAxis":"yAxis",d.opposite=b.opposite,d.side=b.side||(d.horiz?d.opposite?0:2:d.opposite?1:3),d.setOptions(b);var e=this.options,f=e.type,i="datetime"===f;d.labelFormatter=e.labels.formatter||d.defaultLabelFormatter,d.userOptions=b,d.minPixelPadding=0,d.reversed=e.reversed,d.zoomEnabled=e.zoomEnabled!==!1,d.categories=e.categories||"category"===f,d.names=d.names||[],d.isLog="logarithmic"===f,d.isDatetimeAxis=i,d.isLinked=j(e.linkedTo),d.ticks={},d.labelEdge=[],d.minorTicks={},d.plotLinesAndBands=[],d.alternateBands={},d.len=0,d.minRange=d.userMinRange=e.minRange||e.maxZoom,d.range=e.range,d.offset=e.offset||0,d.stacks={},d.oldStacks={},d.stacksTouched=0,d.max=null,d.min=null,d.crosshair=eb(e.crosshair,l(a.options.tooltip.crosshairs)[c?0:1],!1);var k,m=d.options.events;-1===kb(d,a.axes)&&(c&&!this.isColorAxis?a.axes.splice(a.xAxis.length,0,d):a.axes.push(d),a[d.coll].push(d)),d.series=d.series||[],a.inverted&&c&&d.reversed===K&&(d.reversed=!0),d.removePlotBand=d.removePlotBandOrLine,d.removePlotLine=d.removePlotBandOrLine;for(k in m)pb(d,k,m[k]);d.isLog&&(d.val2lin=g,d.lin2val=h)},setOptions:function(b){this.options=a(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],a(O[this.coll],b))},defaultLabelFormatter:function(){var a,b,c=this.axis,d=this.value,e=c.categories,f=this.dateTimeLabelFormat,g=O.lang.numericSymbols,h=g&&g.length,i=c.options.labels.format,j=c.isLog?d:c.tickInterval;if(i)b=t(i,this);else if(e)b=d;else if(f)b=P(f,d);else if(h&&j>=1e3)for(;h--&&b===K;)a=Math.pow(1e3,h+1),j>=a&&10*d%a===0&&null!==g[h]&&(b=ia.numberFormat(d/a,-1)+g[h]);
return b===K&&(b=ra(d)>=1e4?ia.numberFormat(d,-1):ia.numberFormat(d,-1,K,"")),b},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1,a.dataMin=a.dataMax=a.ignoreMinPadding=a.ignoreMaxPadding=null,a.buildStacks&&a.buildStacks(),lb(a.series,function(c){if(c.visible||!b.options.chart.ignoreHiddenSeries){var d,e,f,g=c.options,h=g.threshold;a.hasVisibleSeries=!0,a.isLog&&0>=h&&(h=null),a.isXAxis?(d=c.xData,d.length&&(a.dataMin=qa(eb(a.dataMin,d[0]),x(d)),a.dataMax=pa(eb(a.dataMax,d[0]),y(d)))):(c.getExtremes(),f=c.dataMax,e=c.dataMin,j(e)&&j(f)&&(a.dataMin=qa(eb(a.dataMin,e),e),a.dataMax=pa(eb(a.dataMax,f),f)),j(h)&&(a.dataMin>=h?(a.dataMin=h,a.ignoreMinPadding=!0):a.dataMax<h&&(a.dataMax=h,a.ignoreMaxPadding=!0)))}})},translate:function(a,b,c,d,e,g){var h,i=this.linkedParent||this,j=1,k=0,l=d?i.oldTransA:i.transA,m=d?i.oldMin:i.min,n=i.minPixelPadding,o=(i.doPostTranslate||i.isLog&&e)&&i.lin2val;return l||(l=i.transA),c&&(j*=-1,k=i.len),i.reversed&&(j*=-1,k-=j*(i.sector||i.len)),b?(a=a*j+k,a-=n,h=a/l+m,o&&(h=i.lin2val(h))):(o&&(a=i.val2lin(a)),"between"===g&&(g=.5),h=j*(a-m)*l+k+j*n+(f(g)?l*g*i.pointRange:0)),h},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-(b?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(a,b,c,d,e){var f,g,h,i,j,k=this,l=k.chart,m=k.left,n=k.top,o=c&&l.oldChartHeight||l.chartHeight,p=c&&l.oldChartWidth||l.chartWidth,q=k.transB,r=function(a,b,c){return(b>a||a>c)&&(d?a=qa(pa(b,a),c):j=!0),a};return e=eb(e,k.translate(a,null,null,c)),f=h=ma(e+q),g=i=ma(o-e-q),isNaN(e)?j=!0:k.horiz?(g=n,i=o-k.bottom,f=h=r(f,m,m+k.width)):(f=m,h=p-k.right,g=i=r(g,n,n+k.height)),j&&!d?null:l.renderer.crispLine([Wa,f,g,Xa,h,i],b||1)},getLinearTickPositions:function(a,b,c){var d,e,g=C(na(b/a)*a),h=C(oa(c/a)*a),i=[];if(b===c&&f(b))return[b];for(d=g;h>=d&&(i.push(d),d=C(d+a),d!==e);)e=d;return i},getMinorTickPositions:function(){var a,b,c,d=this,e=d.options,f=d.tickPositions,g=d.minorTickInterval,h=[],i=d.pointRangePadding||0,j=d.min-i,k=d.max+i,l=k-j;if(l&&l/g<d.len/3)if(d.isLog)for(c=f.length,b=1;c>b;b++)h=h.concat(d.getLogTickPositions(g,f[b-1],f[b],!0));else if(d.isDatetimeAxis&&"auto"===e.minorTickInterval)h=h.concat(d.getTimeTicks(d.normalizeTimeTickInterval(g),j,k,e.startOfWeek));else for(a=j+(f[0]-j)%g;k>=a;a+=g)h.push(a);return 0!==h.length&&d.trimTicks(h,e.startOnTick,e.endOnTick),h},adjustForMinRange:function(){var a,b,c,d,e,f,g,h,i=this,k=i.options,l=i.min,m=i.max,n=i.dataMax-i.dataMin>=i.minRange;if(i.isXAxis&&i.minRange===K&&!i.isLog&&(j(k.min)||j(k.max)?i.minRange=null:(lb(i.series,function(a){for(e=a.xData,f=a.xIncrement?1:e.length-1,c=f;c>0;c--)d=e[c]-e[c-1],(b===K||b>d)&&(b=d)}),i.minRange=qa(5*b,i.dataMax-i.dataMin))),m-l<i.minRange){var o=i.minRange;a=(o-m+l)/2,g=[l-a,eb(k.min,l-a)],n&&(g[2]=i.dataMin),l=y(g),h=[l+o,eb(k.max,l+o)],n&&(h[2]=i.dataMax),m=x(h),o>m-l&&(g[0]=m-o,g[1]=eb(k.min,m-o),l=y(g))}i.min=l,i.max=m},setAxisTranslation:function(a){var b,d,e=this,f=e.max-e.min,g=e.axisPointRange||0,h=0,i=0,k=e.linkedParent,l=!!e.categories,m=e.transA,n=e.isXAxis;(n||l||g)&&(k?(h=k.minPointOffset,i=k.pointRangePadding):lb(e.series,function(a){var d=l?1:n?a.pointRange:e.axisPointRange||0,k=a.options.pointPlacement,m=a.closestPointRange;d>f&&(d=0),g=pa(g,d),e.single||(h=pa(h,c(k)?0:d/2),i=pa(i,"on"===k?0:d)),!a.noSharedTooltip&&j(m)&&(b=j(b)?qa(b,m):m)}),d=e.ordinalSlope&&b?e.ordinalSlope/b:1,e.minPointOffset=h*=d,e.pointRangePadding=i*=d,e.pointRange=qa(g,f),n&&(e.closestPointRange=b)),a&&(e.oldTransA=m),e.translationSlope=e.transA=m=e.len/(f+i||1),e.transB=e.horiz?e.left:e.bottom,e.minPixelPadding=m*h},minFromRange:function(){return this.max-this.range},setTickInterval:function(a){var b,c,d,e=this,h=e.chart,i=e.options,k=e.isLog,l=e.isDatetimeAxis,m=e.isXAxis,n=e.isLinked,o=i.maxPadding,p=i.minPadding,q=i.tickInterval,r=i.tickPixelInterval,s=e.categories;l||s||n||this.getTickAmount(),n?(e.linkedParent=h[e.coll][i.linkedTo],c=e.linkedParent.getExtremes(),e.min=eb(c.min,c.dataMin),e.max=eb(c.max,c.dataMax),i.type!==e.linkedParent.options.type&&B(11,1)):(e.min=eb(e.userMin,i.min,e.dataMin),e.max=eb(e.userMax,i.max,e.dataMax)),k&&(!a&&qa(e.min,eb(e.dataMin,e.min))<=0&&B(10,1),e.min=C(g(e.min),15),e.max=C(g(e.max),15)),e.range&&j(e.max)&&(e.userMin=e.min=pa(e.min,e.minFromRange()),e.userMax=e.max,e.range=null),e.beforePadding&&e.beforePadding(),e.adjustForMinRange(),s||e.axisPointRange||e.usePercentage||n||!j(e.min)||!j(e.max)||(b=e.max-e.min,b&&(j(i.min)||j(e.userMin)||!p||!(e.dataMin<0)&&e.ignoreMinPadding||(e.min-=b*p),j(i.max)||j(e.userMax)||!o||!(e.dataMax>0)&&e.ignoreMaxPadding||(e.max+=b*o))),f(i.floor)&&(e.min=pa(e.min,i.floor)),f(i.ceiling)&&(e.max=qa(e.max,i.ceiling)),e.min===e.max||void 0===e.min||void 0===e.max?e.tickInterval=1:n&&!q&&r===e.linkedParent.options.tickPixelInterval?e.tickInterval=q=e.linkedParent.tickInterval:e.tickInterval=eb(q,this.tickAmount?(e.max-e.min)/pa(this.tickAmount-1,1):void 0,s?1:(e.max-e.min)*r/pa(e.len,r)),m&&!a&&lb(e.series,function(a){a.processData(e.min!==e.oldMin||e.max!==e.oldMax)}),e.setAxisTranslation(!0),e.beforeSetTickPositions&&e.beforeSetTickPositions(),e.postProcessTickInterval&&(e.tickInterval=e.postProcessTickInterval(e.tickInterval)),e.pointRange&&(e.tickInterval=pa(e.pointRange,e.tickInterval)),d=eb(i.minTickInterval,e.isDatetimeAxis&&e.closestPointRange),!q&&e.tickInterval<d&&(e.tickInterval=d),l||k||q||(e.tickInterval=v(e.tickInterval,null,u(e.tickInterval),eb(i.allowDecimals,!(e.tickInterval>.5&&e.tickInterval<5&&e.max>1e3&&e.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(e.tickInterval=e.unsquish()),this.setTickPositions()},setTickPositions:function(){var a,b,c=this.options,d=c.tickPositions,e=c.tickPositioner,f=c.startOnTick,g=c.endOnTick;this.tickmarkOffset=this.categories&&"between"===c.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===c.minorTickInterval&&this.tickInterval?this.tickInterval/5:c.minorTickInterval,this.tickPositions=a=d&&d.slice(),a||(a=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,c.units),this.min,this.max,c.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),a.length>this.len&&(a=[a[0],a.pop()]),this.tickPositions=a,e&&(e=e.apply(this,[this.min,this.max]),e&&(this.tickPositions=a=e))),this.isLinked||(this.trimTicks(a,f,g),this.min===this.max&&j(this.min)&&!this.tickAmount&&(b=!0,this.min-=.5,this.max+=.5),this.single=b,d||e||this.adjustTickAmount())},trimTicks:function(a,b,c){var d=a[0],e=a[a.length-1],f=this.minPointOffset||0;b?this.min=d:this.min-f>d&&a.shift(),c?this.max=e:this.max+f<e&&a.pop(),0===a.length&&j(d)&&a.push((e+d)/2)},getTickAmount:function(){var a,b={},c=this.options,d=c.tickAmount,e=c.tickPixelInterval;!j(c.tickInterval)&&this.len<e&&!this.isRadial&&!this.isLog&&c.startOnTick&&c.endOnTick&&(d=2),d||this.chart.options.chart.alignTicks===!1||c.alignTicks===!1||(lb(this.chart[this.coll],function(c){var d=c.options,e=c.horiz,f=[e?d.left:d.top,e?d.width:d.height,d.pane].join(",");b[f]?c.series.length&&(a=!0):b[f]=1}),a&&(d=oa(this.len/e)+1)),4>d&&(this.finalTickAmt=d,d=5),this.tickAmount=d},adjustTickAmount:function(){var a,b,c=this.tickInterval,d=this.tickPositions,e=this.tickAmount,f=this.finalTickAmt,g=d&&d.length;if(e>g){for(;d.length<e;)d.push(C(d[d.length-1]+c));this.transA*=(g-1)/(e-1),this.max=d[d.length-1]}else g>e&&(this.tickInterval*=2,this.setTickPositions());if(j(f)){for(a=b=d.length;a--;)(3===f&&a%2===1||2>=f&&a>0&&b-1>a)&&d.splice(a,1);this.finalTickAmt=K}},setScale:function(){var a,b,c=this;c.oldMin=c.min,c.oldMax=c.max,c.oldAxisLength=c.len,c.setAxisSize(),b=c.len!==c.oldAxisLength,lb(c.series,function(b){(b.isDirtyData||b.isDirty||b.xAxis.isDirty)&&(a=!0)}),b||a||c.isLinked||c.forceRedraw||c.userMin!==c.oldUserMin||c.userMax!==c.oldUserMax?(c.resetStacks&&c.resetStacks(),c.forceRedraw=!1,c.getSeriesExtremes(),c.setTickInterval(),c.oldUserMin=c.userMin,c.oldUserMax=c.userMax,c.isDirty||(c.isDirty=b||c.min!==c.oldMin||c.max!==c.oldMax)):c.cleanStacks&&c.cleanStacks()},setExtremes:function(a,b,c,d,e){var f=this,g=f.chart;c=eb(c,!0),lb(f.series,function(a){delete a.kdTree}),e=db(e,{min:a,max:b}),rb(f,"setExtremes",e,function(){f.userMin=a,f.userMax=b,f.eventArgs=e,c&&g.redraw(d)})},zoom:function(a,b){var c=this.dataMin,d=this.dataMax,e=this.options,f=qa(c,eb(e.min,c)),g=pa(d,eb(e.max,d));return this.allowZoomOutside||(j(c)&&f>=a&&(a=f),j(d)&&b>=g&&(b=g)),this.displayBtn=a!==K||b!==K,this.setExtremes(a,b,!1,K,{trigger:"zoom"}),!0},setAxisSize:function(){var a=this.chart,b=this.options,c=b.offsetLeft||0,d=b.offsetRight||0,e=this.horiz,f=eb(b.width,a.plotWidth-c+d),g=eb(b.height,a.plotHeight),h=eb(b.top,a.plotTop),i=eb(b.left,a.plotLeft+c),j=/%$/;j.test(g)&&(g=parseFloat(g)/100*a.plotHeight),j.test(h)&&(h=parseFloat(h)/100*a.plotHeight+a.plotTop),this.left=i,this.top=h,this.width=f,this.height=g,this.bottom=a.chartHeight-g-h,this.right=a.chartWidth-f-i,this.len=pa(e?f:g,0),this.pos=e?i:h},getExtremes:function(){var a=this,b=a.isLog;return{min:b?C(h(a.min)):a.min,max:b?C(h(a.max)):a.max,dataMin:a.dataMin,dataMax:a.dataMax,userMin:a.userMin,userMax:a.userMax}},getThreshold:function(a){var b=this,c=b.isLog,d=c?h(b.min):b.min,e=c?h(b.max):b.max;return null===a?a=0>e?e:d:d>a?a=d:a>e&&(a=e),b.translate(a,0,1,0,1)},autoLabelAlign:function(a){var b,c=(eb(a,0)-90*this.side+720)%360;return b=c>15&&165>c?"right":c>195&&345>c?"left":"center"},unsquish:function(){var a,b,c,d=this.chart,e=this.ticks,f=this.options.labels,g=this.horiz,h=this.tickInterval,i=h,k=this.len/(((this.categories?1:0)+this.max-this.min)/h),l=f.rotation,m=d.renderer.fontMetrics(f.style.fontSize,e[0]&&e[0].label),n=Number.MAX_VALUE,o=function(a){var b=a/(k||1);return b=b>1?oa(b):1,b*h};return g?(c=j(l)?[l]:k<eb(f.autoRotationLimit,80)&&!f.staggerLines&&!f.step&&f.autoRotation,c&&lb(c,function(c){var d;(c===l||c&&c>=-90&&90>=c)&&(b=o(ra(m.h/ta(va*c))),d=b+ra(c/360),n>d&&(n=d,a=c,i=b))})):f.step||(i=o(m.h)),this.autoRotation=c,this.labelRotation=a,i},renderUnsquish:function(){var b,d,e,f,g=this.chart,h=g.renderer,i=this.tickPositions,j=this.ticks,k=this.options.labels,l=this.horiz,m=g.margin,n=this.categories?i.length:i.length-1,o=this.slotWidth=l&&!k.step&&!k.rotation&&(this.staggerLines||1)*g.plotWidth/n||!l&&(m[3]&&m[3]-g.spacing[3]||.33*g.chartWidth),p=pa(1,ma(o-2*(k.padding||5))),q={},r=h.fontMetrics(k.style.fontSize,j[0]&&j[0].label),s=k.style.textOverflow,t=0;if(c(k.rotation)||(q.rotation=k.rotation||0),this.autoRotation)lb(i,function(a){a=j[a],a&&a.labelLength>t&&(t=a.labelLength)}),t>p&&t>r.h?q.rotation=this.labelRotation:this.labelRotation=0;else if(o&&(b={width:p+Ua},!s))for(b.textOverflow="clip",e=i.length;!l&&e--;)f=i[e],d=j[f].label,d&&("ellipsis"===d.styles.textOverflow&&d.css({textOverflow:"clip"}),d.getBBox().height>this.len/i.length-(r.h-r.f)&&(d.specCss={textOverflow:"ellipsis"}));q.rotation&&(b={width:(t>.5*g.chartHeight?.33*g.chartHeight:g.chartHeight)+Ua},s||(b.textOverflow="ellipsis")),this.labelAlign=q.align=k.align||this.autoLabelAlign(this.labelRotation),lb(i,function(c){var d=j[c],e=d&&d.label;e&&(b&&e.css(a(b,e.specCss)),delete e.specCss,e.attr(q),d.rotation=q.rotation)}),this.tickRotCorr=h.rotCorr(r.b,this.labelRotation||0,2===this.side)},hasData:function(){return this.hasVisibleSeries||j(this.min)&&j(this.max)&&!!this.tickPositions},getOffset:function(){var a,b,c,d,e,f,g,h=this,i=h.chart,k=i.renderer,l=h.options,m=h.tickPositions,n=h.ticks,o=h.horiz,p=h.side,q=i.inverted?[1,0,3,2][p]:p,r=0,s=0,t=l.title,u=l.labels,v=0,w=i.axisOffset,x=i.clipOffset,y=[-1,1,1,-1][p];if(a=h.hasData(),h.showAxis=b=a||eb(l.showEmpty,!0),h.staggerLines=h.horiz&&u.staggerLines,h.axisGroup||(h.gridGroup=k.g("grid").attr({zIndex:l.gridZIndex||1}).add(),h.axisGroup=k.g("axis").attr({zIndex:l.zIndex||2}).add(),h.labelGroup=k.g("axis-labels").attr({zIndex:u.zIndex||7}).addClass(Sa+h.coll.toLowerCase()+"-labels").add()),a||h.isLinked)lb(m,function(a){n[a]?n[a].addLabel():n[a]=new I(h,a)}),h.renderUnsquish(),lb(m,function(a){(0===p||2===p||{1:"left",3:"right"}[p]===h.labelAlign)&&(v=pa(n[a].getLabelSize(),v))}),h.staggerLines&&(v*=h.staggerLines,h.labelOffset=v);else for(f in n)n[f].destroy(),delete n[f];t&&t.text&&t.enabled!==!1&&(h.axisTitle||(h.axisTitle=k.text(t.text,0,0,t.useHTML).attr({zIndex:7,rotation:t.rotation||0,align:t.textAlign||{low:"left",middle:"center",high:"right"}[t.align]}).addClass(Sa+this.coll.toLowerCase()+"-title").css(t.style).add(h.axisGroup),h.axisTitle.isNew=!0),b&&(r=h.axisTitle.getBBox()[o?"height":"width"],c=t.offset,s=j(c)?0:eb(t.margin,o?5:10)),h.axisTitle[b?"show":"hide"]()),h.offset=y*eb(l.offset,w[p]),h.tickRotCorr=h.tickRotCorr||{x:0,y:0},g=2===p?h.tickRotCorr.y:0,d=v+s+(v&&y*(o?eb(u.y,h.tickRotCorr.y+8):u.x)-g),h.axisTitleMargin=eb(c,d),w[p]=pa(w[p],h.axisTitleMargin+r+y*h.offset,d),e=l.offset?0:2*na(l.lineWidth/2),x[q]=pa(x[q],e)},getLinePath:function(a){var b=this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,g=b.chartHeight-this.bottom-(c?this.height:0)+d;return c&&(a*=-1),b.renderer.crispLine([Wa,e?this.left:f,e?g:this.top,Xa,e?b.chartWidth-this.right:f,e?g:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,c=this.left,d=this.top,e=this.len,f=this.options.title,g=a?c:d,h=this.opposite,i=this.offset,j=f.x||0,k=f.y||0,l=b(f.style.fontSize||12),m={low:g+(a?0:e),middle:g+e/2,high:g+(a?e:0)}[f.align],n=(a?d+this.height:c)+(a?1:-1)*(h?-1:1)*this.axisTitleMargin+(2===this.side?l:0);return{x:a?m+j:n+(h?this.width:0)+i+j,y:a?n+k-(h?this.height:0)+i:m+k}},render:function(){var a,b,c,d=this,e=d.chart,f=e.renderer,g=d.options,i=d.isLog,k=d.isLinked,l=d.tickPositions,m=d.axisTitle,n=d.ticks,o=d.minorTicks,p=d.alternateBands,q=g.stackLabels,r=g.alternateGridColor,s=d.tickmarkOffset,t=g.lineWidth,u=e.hasRendered,v=u&&j(d.oldMin)&&!isNaN(d.oldMin),w=d.showAxis,x=f.globalAnimation;d.labelEdge.length=0,d.overlap=!1,lb([n,o,p],function(a){var b;for(b in a)a[b].isActive=!1}),(d.hasData()||k)&&(d.minorTickInterval&&!d.categories&&lb(d.getMinorTickPositions(),function(a){o[a]||(o[a]=new I(d,a,"minor")),v&&o[a].isNew&&o[a].render(null,!0),o[a].render(null,!1,1)}),l.length&&(lb(l,function(a,b){(!k||a>=d.min&&a<=d.max)&&(n[a]||(n[a]=new I(d,a)),v&&n[a].isNew&&n[a].render(b,!0,.1),n[a].render(b))}),s&&(0===d.min||d.single)&&(n[-1]||(n[-1]=new I(d,-1,null,!0)),n[-1].render(-1))),r&&lb(l,function(a,e){e%2===0&&a<d.max&&(p[a]||(p[a]=new ia.PlotLineOrBand(d)),b=a+s,c=l[e+1]!==K?l[e+1]+s:d.max,p[a].options={from:i?h(b):b,to:i?h(c):c,color:r},p[a].render(),p[a].isActive=!0)}),d._addedPlotLB||(lb((g.plotLines||[]).concat(g.plotBands||[]),function(a){d.addPlotBandOrLine(a)}),d._addedPlotLB=!0)),lb([n,o,p],function(a){var b,c,d=[],f=x?x.duration||500:0,g=function(){for(c=d.length;c--;)a[d[c]]&&!a[d[c]].isActive&&(a[d[c]].destroy(),delete a[d[c]])};for(b in a)a[b].isActive||(a[b].render(b,!1,0),a[b].isActive=!1,d.push(b));a!==p&&e.hasRendered&&f?f&&setTimeout(g,f):g()}),t&&(a=d.getLinePath(t),d.axisLine?d.axisLine.animate({d:a}):d.axisLine=f.path(a).attr({stroke:g.lineColor,"stroke-width":t,zIndex:7}).add(d.axisGroup),d.axisLine[w?"show":"hide"]()),m&&w&&(m[m.isNew?"attr":"animate"](d.getTitlePosition()),m.isNew=!1),q&&q.enabled&&d.renderStackTotals(),d.isDirty=!1},redraw:function(){this.render(),lb(this.plotLinesAndBands,function(a){a.render()}),lb(this.series,function(a){a.isDirty=!0})},destroy:function(a){var b,c,d=this,e=d.stacks,f=d.plotLinesAndBands;a||qb(d);for(b in e)z(e[b]),e[b]=null;for(lb([d.ticks,d.minorTicks,d.alternateBands],function(a){z(a)}),c=f.length;c--;)f[c].destroy();lb(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(a){d[a]&&(d[a]=d[a].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(a,b){var c,d,e,f,g=this.crosshair,h=g.animation;if(!this.crosshair||(j(b)||!eb(this.crosshair.snap,!0))===!1||b&&b.series&&b.series[this.coll]!==this)this.hideCrosshair();else{if(eb(g.snap,!0)?j(b)&&(d=this.isXAxis?b.plotX:this.len-b.plotY):d=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos,c=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:eb(b.stackY,b.y))||null:this.getPlotLinePath(null,null,null,null,d)||null,null===c)return void this.hideCrosshair();this.cross?this.cross.attr({visibility:Ta})[h?"animate":"attr"]({d:c},h):(f=this.categories&&!this.isRadial,e={"stroke-width":g.width||(f?this.transA:1),stroke:g.color||(f?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:g.zIndex||2},g.dashStyle&&(e.dashstyle=g.dashStyle),this.cross=this.chart.renderer.path(c).attr(e).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},db(Hb.prototype,S),Hb.prototype.getTimeTicks=function(a,b,c,d){var e,f,g=[],h={},i=O.global.useUTC,k=new T(b-r(b)),l=a.unitRange,m=a.count;if(j(b)){k[ba](l>=R.second?0:m*na(k.getMilliseconds()/m)),l>=R.second&&k[ca](l>=R.minute?0:m*na(k.getSeconds()/m)),l>=R.minute&&k[da](l>=R.hour?0:m*na(k[X]()/m)),l>=R.hour&&k[ea](l>=R.day?0:m*na(k[Y]()/m)),l>=R.day&&k[fa](l>=R.month?1:m*na(k[$]()/m)),l>=R.month&&(k[ga](l>=R.year?0:m*na(k[_]()/m)),f=k[aa]()),l>=R.year&&(f-=f%m,k[ha](f)),l===R.week&&k[fa](k[$]()-k[Z]()+eb(d,1)),e=1,(V||W)&&(k=k.getTime(),k=new T(k+r(k))),f=k[aa]();for(var n=k.getTime(),o=k[_](),p=k[$](),q=(R.day+(i?r(k):60*k.getTimezoneOffset()*1e3))%R.day;c>n;)g.push(n),l===R.year?n=U(f+e*m,0):l===R.month?n=U(f,o+e*m):i||l!==R.day&&l!==R.week?n+=l*m:n=U(f,o,p+e*m*(l===R.day?1:7)),e++;g.push(n),lb(mb(g,function(a){return l<=R.hour&&a%R.day===q}),function(a){h[a]="day"})}return g.info=db(a,{higherRanks:h,totalRange:l*m}),g},Hb.prototype.normalizeTimeTickInterval=function(a,b){var c,d,e=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],f=e[e.length-1],g=R[f[0]],h=f[1];for(d=0;d<e.length;d++)if(f=e[d],g=R[f[0]],h=f[1],e[d+1]){var i=(g*h[h.length-1]+R[e[d+1][0]])/2;if(i>=a)break}return g===R.year&&5*g>a&&(h=[1,2,5]),c=v(a/g,h,"year"===f[0]?pa(u(a/g),1):1),{unitRange:g,count:c,unitName:f[0]}},Hb.prototype.getLogTickPositions=function(a,b,c,d){var e=this,f=e.options,i=e.len,j=[];if(d||(e._minorAutoInterval=null),a>=.5)a=ma(a),j=e.getLinearTickPositions(a,b,c);else if(a>=.08){var k,l,m,n,o,p,q,r=na(b);for(k=a>.3?[1,2,4]:a>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],l=r;c+1>l&&!q;l++)for(n=k.length,m=0;n>m&&!q;m++)o=g(h(l)*k[m]),o>b&&(!d||c>=p)&&p!==K&&j.push(p),p>c&&(q=!0),p=o}else{var s=h(b),t=h(c),w=f[d?"minorTickInterval":"tickInterval"],x="auto"===w?null:w,y=f.tickPixelInterval/(d?5:1),z=d?i/e.tickPositions.length:i;a=eb(x,e._minorAutoInterval,(t-s)*y/(z||1)),a=v(a,null,u(a)),j=ob(e.getLinearTickPositions(a,s,t),g),d||(e._minorAutoInterval=a/5)}return d||(e.tickInterval=a),j};var Ib=ia.Tooltip=function(){this.init.apply(this,arguments)};Ib.prototype={init:function(a,c){var d=c.borderWidth,e=c.style,f=b(e.padding);this.chart=a,this.options=c,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=a.renderer.label("",0,0,c.shape||"callout",null,null,c.useHTML,null,"tooltip").attr({padding:f,fill:c.backgroundColor,"stroke-width":d,r:c.borderRadius,zIndex:8}).css(e).css({padding:0}).add().attr({y:-9999}),Ga||this.label.shadow(c.shadow),this.shared=c.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(a,b,c,d){var e=this,f=e.now,g=e.options.animation!==!1&&!e.isHidden&&(ra(a-f.x)>1||ra(b-f.y)>1),h=e.followPointer||e.len>1;db(f,{x:g?(2*f.x+a)/3:a,y:g?(f.y+b)/2:b,anchorX:h?K:g?(2*f.anchorX+c)/3:c,anchorY:h?K:g?(f.anchorY+d)/2:d}),e.label.attr(f),g&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){e&&e.move(a,b,c,d)},32))},hide:function(a){var b,c=this;clearTimeout(this.hideTimer),this.isHidden||(b=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){c.label.fadeOut(),c.isHidden=!0},eb(a,this.options.hideDelay,500)))},getAnchor:function(a,b){var c,d,e,f=this.chart,g=f.inverted,h=f.plotTop,i=f.plotLeft,j=0,k=0;return a=l(a),c=a[0].tooltipPos,this.followPointer&&b&&(b.chartX===K&&(b=f.pointer.normalize(b)),c=[b.chartX-f.plotLeft,b.chartY-h]),c||(lb(a,function(a){d=a.series.yAxis,e=a.series.xAxis,j+=a.plotX+(!g&&e?e.left-i:0),k+=(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!g&&d?d.top-h:0)}),j/=a.length,k/=a.length,c=[g?f.plotWidth-k:j,this.shared&&!g&&a.length>1&&b?b.chartY-h:g?f.plotHeight-j:k]),ob(c,ma)},getPosition:function(a,b,c){var d,e=this.chart,f=this.distance,g={},h=c.h||0,i=["y",e.chartHeight,b,c.plotY+e.plotTop,e.plotTop,e.plotTop+e.plotHeight],j=["x",e.chartWidth,a,c.plotX+e.plotLeft,e.plotLeft,e.plotLeft+e.plotWidth],k=eb(c.ttBelow,e.inverted&&!c.negative||!e.inverted&&c.negative),l=function(a,b,c,d,e,i){var j=d-f>c,l=b>d+f+c,m=d-f-c,n=d+f;if(k&&l)g[a]=n;else if(!k&&j)g[a]=m;else if(j)g[a]=qa(i-c,0>m-h?m:m-h);else{if(!l)return!1;g[a]=pa(e,n+h+c>b?n:n+h)}},m=function(a,b,c,d){return f>d||d>b-f?!1:void(c/2>d?g[a]=1:d>b-c/2?g[a]=b-c-2:g[a]=d-c/2)},n=function(a){var b=i;i=j,j=b,d=a},o=function(){l.apply(0,i)!==!1?m.apply(0,j)!==!1||d||(n(!0),o()):d?g.x=g.y=0:(n(!0),o())};return(e.inverted||this.len>1)&&n(),o(),g},defaultFormatter:function(a){var b,c=this.points||l(this);return b=[a.tooltipFooterHeaderFormatter(c[0])],b=b.concat(a.bodyFormatter(c)),b.push(a.tooltipFooterHeaderFormatter(c[0],!0)),b.join("")},refresh:function(a,b){var c,d,e,f,g,h,i=this,j=i.chart,k=i.label,m=i.options,n={},o=[],p=m.formatter||i.defaultFormatter,q=j.hoverPoints,r=i.shared;clearTimeout(this.hideTimer),i.followPointer=l(a)[0].series.tooltipOptions.followPointer,e=i.getAnchor(a,b),c=e[0],d=e[1],!r||a.series&&a.series.noSharedTooltip?n=a.getLabelConfig():(j.hoverPoints=a,q&&lb(q,function(a){a.setState()}),lb(a,function(a){a.setState($a),o.push(a.getLabelConfig())}),n={x:a[0].category,y:a[0].y},n.points=o,this.len=o.length,a=a[0]),f=p.call(n,i),h=a.series,this.distance=eb(h.tooltipOptions.distance,16),f===!1?this.hide():(i.isHidden&&(ub(k),k.attr("opacity",1).show()),k.attr({text:f}),g=m.borderColor||a.color||h.color||"#606060",k.attr({stroke:g}),i.updatePosition({plotX:c,plotY:d,negative:a.negative,ttBelow:a.ttBelow,h:e[2]||0}),this.isHidden=!1),rb(j,"tooltipRefresh",{text:f,x:c+j.plotLeft,y:d+j.plotTop,borderColor:g})},updatePosition:function(a){var b=this.chart,c=this.label,d=(this.options.positioner||this.getPosition).call(this,c.width,c.height,a);this.move(ma(d.x),ma(d.y||0),a.plotX+b.plotLeft,a.plotY+b.plotTop)},getXDateFormat:function(a,b,c){var d,e,f,g=b.dateTimeLabelFormats,h=c&&c.closestPointRange,i="01-01 00:00:00.000",j={millisecond:15,second:12,minute:9,hour:6,day:3},k="millisecond";if(h){f=P("%m-%d %H:%M:%S.%L",a.x);for(e in R){if(h===R.week&&+P("%w",a.x)===c.options.startOfWeek&&f.substr(6)===i.substr(6)){e="week";break}if(R[e]>h){e=k;break}if(j[e]&&f.substr(j[e])!==i.substr(j[e]))break;"week"!==e&&(k=e)}e&&(d=g[e])}else d=g.day;return d||g.year},tooltipFooterHeaderFormatter:function(a,b){var c=b?"footer":"header",d=a.series,e=d.tooltipOptions,g=e.xDateFormat,h=d.xAxis,i=h&&"datetime"===h.options.type&&f(a.key),j=e[c+"Format"];return i&&!g&&(g=this.getXDateFormat(a,e,h)),i&&g&&(j=j.replace("{point.key}","{point.key:"+g+"}")),t(j,{point:a,series:d})},bodyFormatter:function(a){return ob(a,function(a){var b=a.series.tooltipOptions;return(b.pointFormatter||a.point.tooltipFormatter).call(a.point,b.pointFormat)})}};var Jb;M=ja.documentElement.ontouchstart!==K;var Kb=ia.Pointer=function(a,b){this.init(a,b)};if(Kb.prototype={init:function(a,b){var c,d,e=b.chart,f=e.events,g=Ga?"":e.zoomType,h=a.inverted;this.options=b,this.chart=a,this.zoomX=c=/x/.test(g),this.zoomY=d=/y/.test(g),this.zoomHor=c&&!h||d&&h,this.zoomVert=d&&!h||c&&h,this.hasZoom=c||d,this.runChartClick=f&&!!f.click,this.pinchDown=[],this.lastValidTouch={},ia.Tooltip&&b.tooltip.enabled&&(a.tooltip=new Ib(a,b.tooltip),this.followTouchMove=eb(b.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(a,b){var c,d,e;return a=a||window.event,a=sb(a),a.target||(a.target=a.srcElement),e=a.touches?a.touches.length?a.touches.item(0):a.changedTouches[0]:a,b||(this.chartPosition=b=nb(this.chart.container)),e.pageX===K?(c=pa(a.x,a.clientX-b.left),d=a.y):(c=e.pageX-b.left,d=e.pageY-b.top),db(a,{chartX:ma(c),chartY:ma(d)})},getCoordinates:function(a){var b={xAxis:[],yAxis:[]};return lb(this.chart.axes,function(c){b[c.isXAxis?"xAxis":"yAxis"].push({axis:c,value:c.toValue(a[c.horiz?"chartX":"chartY"])})}),b},runPointActions:function(a){var b,c,d,e,f,g,h,i=this,j=i.chart,k=j.series,l=j.tooltip,m=l?l.shared:!1,n=j.hoverPoint,o=j.hoverSeries,p=j.chartWidth,q=[];if(!m&&!o)for(c=0;c<k.length;c++)(k[c].directTouch||!k[c].options.stickyTracking)&&(k=[]);if(!m&&o&&o.directTouch&&n?g=n:(lb(k,function(b){e=b.noSharedTooltip&&m,f=!m&&b.directTouch,b.visible&&!e&&!f&&eb(b.options.enableMouseTracking,!0)&&(h=b.searchPoint(a,!e&&1===b.kdDimensions),h&&q.push(h))}),lb(q,function(a){a&&"number"==typeof a.dist&&a.dist<p&&(p=a.dist,g=a)})),g&&(g!==this.prevKDPoint||l&&l.isHidden)){if(m&&!g.series.noSharedTooltip){for(c=q.length;c--;)(q[c].clientX!==g.clientX||q[c].series.noSharedTooltip)&&q.splice(c,1);q.length&&l&&l.refresh(q,a),lb(q,function(b){b.onMouseOver(a,b!==(o&&o.directTouch&&n||g))})}else l&&l.refresh(g,a),o&&o.directTouch||g.onMouseOver(a);this.prevKDPoint=g}else b=o&&o.tooltipOptions.followPointer,l&&b&&!l.isHidden&&(d=l.getAnchor([{}],a),l.updatePosition({plotX:d[0],plotY:d[1]}));l&&!i._onDocumentMouseMove&&(i._onDocumentMouseMove=function(a){Ka[Jb]&&Ka[Jb].pointer.onDocumentMouseMove(a)},pb(ja,"mousemove",i._onDocumentMouseMove)),lb(j.axes,function(b){b.drawCrosshair(a,eb(g,n))})},reset:function(a,b){var c=this,d=c.chart,e=d.hoverSeries,f=d.hoverPoint,g=d.hoverPoints,h=d.tooltip,i=h&&h.shared?g:f;a=a&&h&&i,a&&l(i)[0].plotX===K&&(a=!1),a?(h.refresh(i),f&&(f.setState(f.state,!0),lb(d.axes,function(a){eb(a.options.crosshair&&a.options.crosshair.snap,!0)?a.drawCrosshair(null,f):a.hideCrosshair()}))):(f&&f.onMouseOut(),g&&lb(g,function(a){a.setState()}),e&&e.onMouseOut(),h&&h.hide(b),c._onDocumentMouseMove&&(qb(ja,"mousemove",c._onDocumentMouseMove),c._onDocumentMouseMove=null),lb(d.axes,function(a){a.hideCrosshair()}),c.hoverX=d.hoverPoints=d.hoverPoint=null)},scaleGroups:function(a,b){var c,d=this.chart;lb(d.series,function(e){c=a||e.getPlotBox(),e.xAxis&&e.xAxis.zoomEnabled&&(e.group.attr(c),e.markerGroup&&(e.markerGroup.attr(c),e.markerGroup.clip(b?d.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(c))}),d.clipRect.attr(b||d.clipBox)},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type,b.cancelClick=!1,b.mouseDownX=this.mouseDownX=a.chartX,b.mouseDownY=this.mouseDownY=a.chartY},drag:function(a){var b,c,d=this.chart,e=d.options.chart,f=a.chartX,g=a.chartY,h=this.zoomHor,i=this.zoomVert,j=d.plotLeft,k=d.plotTop,l=d.plotWidth,m=d.plotHeight,n=this.selectionMarker,o=this.mouseDownX,p=this.mouseDownY,q=e.panKey&&a[e.panKey+"Key"];n&&n.touch||(j>f?f=j:f>j+l&&(f=j+l),k>g?g=k:g>k+m&&(g=k+m),this.hasDragged=Math.sqrt(Math.pow(o-f,2)+Math.pow(p-g,2)),this.hasDragged>10&&(b=d.isInsidePlot(o-j,p-k),d.hasCartesianSeries&&(this.zoomX||this.zoomY)&&b&&!q&&(n||(this.selectionMarker=n=d.renderer.rect(j,k,h?1:l,i?1:m,0).attr({fill:e.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),n&&h&&(c=f-o,n.attr({width:ra(c),x:(c>0?0:c)+o})),n&&i&&(c=g-p,n.attr({height:ra(c),y:(c>0?0:c)+p})),b&&!n&&e.panning&&d.pan(a,e.panning)))},drop:function(a){var b=this,c=this.chart,d=this.hasPinched;if(this.selectionMarker){var e,f={xAxis:[],yAxis:[],originalEvent:a.originalEvent||a},g=this.selectionMarker,h=g.attr?g.attr("x"):g.x,i=g.attr?g.attr("y"):g.y,k=g.attr?g.attr("width"):g.width,l=g.attr?g.attr("height"):g.height;(this.hasDragged||d)&&(lb(c.axes,function(c){if(c.zoomEnabled&&j(c.min)&&(d||b[{xAxis:"zoomX",yAxis:"zoomY"}[c.coll]])){var g=c.horiz,m="touchend"===a.type?c.minPixelPadding:0,n=c.toValue((g?h:i)+m),o=c.toValue((g?h+k:i+l)-m);f[c.coll].push({axis:c,min:qa(n,o),max:pa(n,o)}),e=!0}}),e&&rb(c,"selection",f,function(a){c.zoom(db(a,d?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),d&&this.scaleGroups()}c&&(m(c.container,{cursor:c._cursor}),c.cancelClick=this.hasDragged>10,c.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(a){a=this.normalize(a),a.preventDefault&&a.preventDefault(),this.dragStart(a)},onDocumentMouseUp:function(a){Ka[Jb]&&Ka[Jb].pointer.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,c=this.chartPosition;a=this.normalize(a,c),!c||this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)||this.reset()},onContainerMouseLeave:function(){var a=Ka[Jb];a&&(a.pointer.reset(),a.pointer.chartPosition=null)},onContainerMouseMove:function(a){var b=this.chart;Jb=b.index,a=this.normalize(a),a.returnValue=!1,"mousedown"===b.mouseIsDown&&this.drag(a),!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)||b.openMenu||this.runPointActions(a)},inClass:function(a,b){for(var c;a;){if(c=k(a,"class")){if(-1!==c.indexOf(b))return!0;if(-1!==c.indexOf(Sa+"container"))return!1}a=a.parentNode}},onTrackerMouseOut:function(a){var b=this.chart.hoverSeries,c=a.relatedTarget||a.toElement,d=c&&c.point&&c.point.series;!b||b.options.stickyTracking||this.inClass(c,Sa+"tooltip")||d===b||b.onMouseOut()},onContainerClick:function(a){var b=this.chart,c=b.hoverPoint,d=b.plotLeft,e=b.plotTop;a=this.normalize(a),a.originalEvent=a,b.cancelClick||(c&&this.inClass(a.target,Sa+"tracker")?(rb(c.series,"click",db(a,{point:c})),b.hoverPoint&&c.firePointEvent("click",a)):(db(a,this.getCoordinates(a)),b.isInsidePlot(a.chartX-d,a.chartY-e)&&rb(b,"click",a)))},setDOMEvents:function(){var a=this,b=a.chart.container;b.onmousedown=function(b){a.onContainerMouseDown(b)},b.onmousemove=function(b){a.onContainerMouseMove(b)},b.onclick=function(b){a.onContainerClick(b)},pb(b,"mouseleave",a.onContainerMouseLeave),1===La&&pb(ja,"mouseup",a.onDocumentMouseUp),M&&(b.ontouchstart=function(b){a.onContainerTouchStart(b)},b.ontouchmove=function(b){a.onContainerTouchMove(b)},1===La&&pb(ja,"touchend",a.onDocumentTouchEnd))},destroy:function(){var a;qb(this.chart.container,"mouseleave",this.onContainerMouseLeave),La||(qb(ja,"mouseup",this.onDocumentMouseUp),qb(ja,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(a in this)this[a]=null}},db(ia.Pointer.prototype,{pinchTranslate:function(a,b,c,d,e,f){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,a,b,c,d,e,f),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,a,b,c,d,e,f)},pinchTranslateDirection:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=this.chart,p=a?"x":"y",q=a?"X":"Y",r="chart"+q,s=a?"width":"height",t=o["plot"+(a?"Left":"Top")],u=h||1,v=o.inverted,w=o.bounds[a?"h":"v"],x=1===b.length,y=b[0][r],z=c[0][r],A=!x&&b[1][r],B=!x&&c[1][r],C=function(){!x&&ra(y-A)>20&&(u=h||ra(z-B)/ra(y-A)),k=(t-z)/u+y,i=o["plot"+(a?"Width":"Height")]/u};C(),j=k,j<w.min?(j=w.min,l=!0):j+i>w.max&&(j=w.max-i,l=!0),l?(z-=.8*(z-g[p][0]),x||(B-=.8*(B-g[p][1])),C()):g[p]=[z,B],v||(f[p]=k-t,f[s]=i),n=v?a?"scaleY":"scaleX":"scale"+q,m=v?1/u:u,e[s]=i,e[p]=j,d[n]=u,d["translate"+q]=m*t+(z-m*y)},pinch:function(a){var b=this,c=b.chart,d=b.pinchDown,e=a.touches,f=e.length,g=b.lastValidTouch,h=b.hasZoom,i=b.selectionMarker,j={},k=1===f&&(b.inClass(a.target,Sa+"tracker")&&c.runTrackerClick||b.runChartClick),l={};f>1&&(b.initiated=!0),h&&b.initiated&&!k&&a.preventDefault(),ob(e,function(a){return b.normalize(a)}),"touchstart"===a.type?(lb(e,function(a,b){d[b]={chartX:a.chartX,chartY:a.chartY}}),g.x=[d[0].chartX,d[1]&&d[1].chartX],
g.y=[d[0].chartY,d[1]&&d[1].chartY],lb(c.axes,function(a){if(a.zoomEnabled){var b=c.bounds[a.horiz?"h":"v"],d=a.minPixelPadding,e=a.toPixels(eb(a.options.min,a.dataMin)),f=a.toPixels(eb(a.options.max,a.dataMax)),g=qa(e,f),h=pa(e,f);b.min=qa(a.pos,g-d),b.max=pa(a.pos+a.len,h+d)}}),b.res=!0):d.length&&(i||(b.selectionMarker=i=db({destroy:Ja,touch:!0},c.plotBox)),b.pinchTranslate(d,e,j,i,l,g),b.hasPinched=h,b.scaleGroups(j,l),!h&&b.followTouchMove&&1===f?this.runPointActions(b.normalize(a)):b.res&&(b.res=!1,this.reset(!1,0)))},touch:function(a,b){var c=this.chart;Jb=c.index,1===a.touches.length?(a=this.normalize(a),c.isInsidePlot(a.chartX-c.plotLeft,a.chartY-c.plotTop)&&!c.openMenu?(b&&this.runPointActions(a),this.pinch(a)):b&&this.reset()):2===a.touches.length&&this.pinch(a)},onContainerTouchStart:function(a){this.touch(a,!0)},onContainerTouchMove:function(a){this.touch(a)},onDocumentTouchEnd:function(a){Ka[Jb]&&Ka[Jb].pointer.drop(a)}}),ka.PointerEvent||ka.MSPointerEvent){var Lb={},Mb=!!ka.PointerEvent,Nb=function(){var a,b=[];b.item=function(a){return this[a]};for(a in Lb)Lb.hasOwnProperty(a)&&b.push({pageX:Lb[a].pageX,pageY:Lb[a].pageY,target:Lb[a].target});return b},Ob=function(a,b,c,d){var e;a=a.originalEvent||a,"touch"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_TOUCH||!Ka[Jb]||(d(a),e=Ka[Jb].pointer,e[b]({type:c,target:a.currentTarget,preventDefault:Ja,touches:Nb()}))};db(Kb.prototype,{onContainerPointerDown:function(a){Ob(a,"onContainerTouchStart","touchstart",function(a){Lb[a.pointerId]={pageX:a.pageX,pageY:a.pageY,target:a.currentTarget}})},onContainerPointerMove:function(a){Ob(a,"onContainerTouchMove","touchmove",function(a){Lb[a.pointerId]={pageX:a.pageX,pageY:a.pageY},Lb[a.pointerId].target||(Lb[a.pointerId].target=a.currentTarget)})},onDocumentPointerUp:function(a){Ob(a,"onDocumentTouchEnd","touchend",function(a){delete Lb[a.pointerId]})},batchMSEvents:function(a){a(this.chart.container,Mb?"pointerdown":"MSPointerDown",this.onContainerPointerDown),a(this.chart.container,Mb?"pointermove":"MSPointerMove",this.onContainerPointerMove),a(ja,Mb?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),fb(Kb.prototype,"init",function(a,b,c){a.call(this,b,c),this.hasZoom&&m(b.container,{"-ms-touch-action":Va,"touch-action":Va})}),fb(Kb.prototype,"setDOMEvents",function(a){a.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(pb)}),fb(Kb.prototype,"destroy",function(a){this.batchMSEvents(qb),a.call(this)})}var Pb=ia.Legend=function(a,b){this.init(a,b)};Pb.prototype={init:function(b,c){var d,e=this,f=c.itemStyle,g=c.itemMarginTop||0;this.options=c,c.enabled&&(e.itemStyle=f,e.itemHiddenStyle=a(f,c.itemHiddenStyle),e.itemMarginTop=g,e.padding=d=eb(c.padding,8),e.initialItemX=d,e.initialItemY=d-5,e.maxItemWidth=0,e.chart=b,e.itemHeight=0,e.symbolWidth=eb(c.symbolWidth,16),e.pages=[],e.render(),pb(e.chart,"endResize",function(){e.positionCheckboxes()}))},colorizeItem:function(a,b){var c,d,e=this,f=e.options,g=a.legendItem,h=a.legendLine,i=a.legendSymbol,j=e.itemHiddenStyle.color,k=b?f.itemStyle.color:j,l=b?a.legendColor||a.color||"#CCC":j,m=a.options&&a.options.marker,n={fill:l};if(g&&g.css({fill:k,color:k}),h&&h.attr({stroke:l}),i){if(m&&i.isMarker){n.stroke=l,m=a.convertAttribs(m);for(c in m)d=m[c],d!==K&&(n[c]=d)}i.attr(n)}},positionItem:function(a){var b=this,c=b.options,d=c.symbolPadding,e=!c.rtl,f=a._legendItemPos,g=f[0],h=f[1],i=a.checkbox,j=a.legendGroup;j&&j.element&&j.translate(e?g:b.legendWidth-g-2*d-4,h),i&&(i.x=g,i.y=h)},destroyItem:function(a){var b=a.checkbox;lb(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&(a[b]=a[b].destroy())}),b&&A(a.checkbox)},destroy:function(){var a=this,b=a.group,c=a.box;c&&(a.box=c.destroy()),b&&(a.group=b.destroy())},positionCheckboxes:function(a){var b,c=this.group.alignAttr,d=this.clipHeight||this.legendHeight;c&&(b=c.translateY,lb(this.allItems,function(e){var f,g=e.checkbox;g&&(f=b+g.y+(a||0)+3,m(g,{left:c.translateX+e.checkboxOffset+g.x-20+Ua,top:f+Ua,display:f>b-6&&b+d-6>f?"":Va}))}))},renderTitle:function(){var a,b=this.options,c=this.padding,d=b.title,e=0;d.text&&(this.title||(this.title=this.chart.renderer.label(d.text,c-3,c-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(d.style).add(this.group)),a=this.title.getBBox(),e=a.height,this.offsetWidth=a.width,this.contentGroup.attr({translateY:e})),this.titleHeight=e},setText:function(a){var b=this.options;a.legendItem.attr({text:b.labelFormat?t(b.labelFormat,a):b.labelFormatter.call(a)})},renderItem:function(b){var c,d,e,f=this,g=f.chart,h=g.renderer,i=f.options,j="horizontal"===i.layout,k=f.symbolWidth,l=i.symbolPadding,m=f.itemStyle,n=f.itemHiddenStyle,o=f.padding,p=j?eb(i.itemDistance,20):0,q=!i.rtl,r=i.width,s=i.itemMarginBottom||0,t=f.itemMarginTop,u=f.initialItemX,v=b.legendItem,w=b.series&&b.series.drawLegendSymbol?b.series:b,x=w.options,y=f.createCheckboxForItem&&x&&x.showCheckbox,z=i.useHTML;v||(b.legendGroup=h.g("legend-item").attr({zIndex:1}).add(f.scrollGroup),b.legendItem=v=h.text("",q?k+l:-l,f.baseline||0,z).css(a(b.visible?m:n)).attr({align:q?"left":"right",zIndex:2}).add(b.legendGroup),f.baseline||(f.fontMetrics=h.fontMetrics(m.fontSize,v),f.baseline=f.fontMetrics.f+3+t,v.attr("y",f.baseline)),w.drawLegendSymbol(f,b),f.setItemEvents&&f.setItemEvents(b,v,z,m,n),f.colorizeItem(b,b.visible),y&&f.createCheckboxForItem(b)),f.setText(b),d=v.getBBox(),e=b.checkboxOffset=i.itemWidth||b.legendItemWidth||k+l+d.width+p+(y?20:0),f.itemHeight=c=ma(b.legendItemHeight||d.height),j&&f.itemX-u+e>(r||g.chartWidth-2*o-u-i.x)&&(f.itemX=u,f.itemY+=t+f.lastLineHeight+s,f.lastLineHeight=0),f.maxItemWidth=pa(f.maxItemWidth,e),f.lastItemY=t+f.itemY+s,f.lastLineHeight=pa(c,f.lastLineHeight),b._legendItemPos=[f.itemX,f.itemY],j?f.itemX+=e:(f.itemY+=t+c+s,f.lastLineHeight=c),f.offsetWidth=r||pa((j?f.itemX-u-p:e)+o,f.offsetWidth)},getAllItems:function(){var a=[];return lb(this.chart.series,function(b){var c=b.options;eb(c.showInLegend,j(c.linkedTo)?!1:K,!0)&&(a=a.concat(b.legendItems||("point"===c.legendType?b.data:b)))}),a},adjustMargins:function(a,b){var c=this.chart,d=this.options,e=d.align.charAt(0)+d.verticalAlign.charAt(0)+d.layout.charAt(0);this.display&&!d.floating&&lb([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(f,g){f.test(e)&&!j(a[g])&&(c[ab[g]]=pa(c[ab[g]],c.legend[(g+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][g]*d[g%2?"x":"y"]+eb(d.margin,12)+b[g]))})},render:function(){var a,b,c,d,e=this,f=e.chart,g=f.renderer,h=e.group,i=e.box,j=e.options,k=e.padding,l=j.borderWidth,m=j.backgroundColor;e.itemX=e.initialItemX,e.itemY=e.initialItemY,e.offsetWidth=0,e.lastItemY=0,h||(e.group=h=g.g("legend").attr({zIndex:7}).add(),e.contentGroup=g.g().attr({zIndex:1}).add(h),e.scrollGroup=g.g().add(e.contentGroup)),e.renderTitle(),a=e.getAllItems(),w(a,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)}),j.reversed&&a.reverse(),e.allItems=a,e.display=b=!!a.length,e.lastLineHeight=0,lb(a,function(a){e.renderItem(a)}),c=(j.width||e.offsetWidth)+k,d=e.lastItemY+e.lastLineHeight+e.titleHeight,d=e.handleOverflow(d),d+=k,(l||m)&&(i?c>0&&d>0&&(i[i.isNew?"attr":"animate"](i.crisp({width:c,height:d})),i.isNew=!1):(e.box=i=g.rect(0,0,c,d,j.borderRadius,l||0).attr({stroke:j.borderColor,"stroke-width":l||0,fill:m||Va}).add(h).shadow(j.shadow),i.isNew=!0),i[b?"show":"hide"]()),e.legendWidth=c,e.legendHeight=d,lb(a,function(a){e.positionItem(a)}),b&&h.align(db({width:c,height:d},j),!0,"spacingBox"),f.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var b,c,d=this,e=this.chart,f=e.renderer,g=this.options,h=g.y,i="top"===g.verticalAlign,j=e.spacingBox.height+(i?-h:h)-this.padding,k=g.maxHeight,l=this.clipRect,m=g.navigation,n=eb(m.animation,!0),o=m.arrowSize||12,p=this.nav,q=this.pages,r=this.padding,s=this.allItems,t=function(a){l.attr({height:a}),d.contentGroup.div&&(d.contentGroup.div.style.clip="rect("+r+"px,9999px,"+(r+a)+"px,0)")};return"horizontal"===g.layout&&(j/=2),k&&(j=qa(j,k)),q.length=0,a>j?(this.clipHeight=b=pa(j-20-this.titleHeight-r,0),this.currentPage=eb(this.currentPage,1),this.fullHeight=a,lb(s,function(a,d){var e=a._legendItemPos[1],f=ma(a.legendItem.getBBox().height),g=q.length;(!g||e-q[g-1]>b&&(c||e)!==q[g-1])&&(q.push(c||e),g++),d===s.length-1&&e+f-q[g-1]>b&&q.push(e),e!==c&&(c=e)}),l||(l=d.clipRect=f.clipRect(0,r,9999,0),d.contentGroup.clip(l)),t(b),p||(this.nav=p=f.g().attr({zIndex:1}).add(this.group),this.up=f.symbol("triangle",0,0,o,o).on("click",function(){d.scroll(-1,n)}).add(p),this.pager=f.text("",15,10).css(m.style).add(p),this.down=f.symbol("triangle-down",0,0,o,o).on("click",function(){d.scroll(1,n)}).add(p)),d.scroll(0),a=j):p&&(t(e.chartHeight),p.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),a},scroll:function(a,b){var c,d=this.pages,e=d.length,f=this.currentPage+a,g=this.clipHeight,h=this.options.navigation,i=h.activeColor,j=h.inactiveColor,k=this.pager,l=this.padding;f>e&&(f=e),f>0&&(b!==K&&D(b,this.chart),this.nav.attr({translateX:l,translateY:g+this.padding+7+this.titleHeight,visibility:Ta}),this.up.attr({fill:1===f?j:i}).css({cursor:1===f?"default":"pointer"}),k.attr({text:f+"/"+e}),this.down.attr({x:18+this.pager.getBBox().width,fill:f===e?j:i}).css({cursor:f===e?"default":"pointer"}),c=-d[f-1]+this.initialItemY,this.scrollGroup.animate({translateY:c}),this.currentPage=f,this.positionCheckboxes(c))}};var Qb=ia.LegendSymbolMixin={drawRectangle:function(a,b){var c=a.options.symbolHeight||a.fontMetrics.f;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-c+1,a.symbolWidth,c,a.options.symbolRadius||0).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var b,c,d,e=this.options,f=e.marker,g=a.symbolWidth,h=this.chart.renderer,i=this.legendGroup,j=a.baseline-ma(.3*a.fontMetrics.b);e.lineWidth&&(d={"stroke-width":e.lineWidth},e.dashStyle&&(d.dashstyle=e.dashStyle),this.legendLine=h.path([Wa,0,j,Xa,g,j]).attr(d).add(i)),f&&f.enabled!==!1&&(b=f.radius,this.legendSymbol=c=h.symbol(this.symbol,g/2-b,j-b,2*b,2*b).add(i),c.isMarker=!0)}};(/Trident\/7\.0/.test(wa)||Ba)&&fb(Pb.prototype,"positionItem",function(a,b){var c=this,d=function(){b._legendItemPos&&a.call(c,b)};d(),setTimeout(d)});var Rb=ia.Chart=function(){this.init.apply(this,arguments)};Rb.prototype={callbacks:[],init:function(b,c){var d,e=b.series;b.series=null,d=a(O,b),d.series=b.series=e,this.userOptions=b;var f=d.chart;this.margin=this.splashArray("margin",f),this.spacing=this.splashArray("spacing",f);var g=f.events;this.bounds={h:{},v:{}},this.callback=c,this.isResizing=0,this.options=d,this.axes=[],this.series=[],this.hasCartesianSeries=f.showAxes;var h,i=this;if(i.index=Ka.length,Ka.push(i),La++,f.reflow!==!1&&pb(i,"load",function(){i.initReflow()}),g)for(h in g)pb(i,h,g[h]);i.xAxis=[],i.yAxis=[],i.animation=Ga?!1:eb(f.animation,!0),i.pointCount=i.colorCounter=i.symbolCounter=0,i.firstRender()},initSeries:function(a){var b,c=this,d=c.options.chart,e=a.type||d.type||d.defaultSeriesType,f=cb[e];return f||B(17,!0),b=new f,b.init(this,a),b},isInsidePlot:function(a,b,c){var d=c?b:a,e=c?a:b;return d>=0&&d<=this.plotWidth&&e>=0&&e<=this.plotHeight},redraw:function(a){var b,c,d,e=this,f=e.axes,g=e.series,h=e.pointer,i=e.legend,j=e.isDirtyLegend,k=e.hasCartesianSeries,l=e.isDirtyBox,m=g.length,n=m,o=e.renderer,p=o.isHidden(),q=[];for(D(a,e),p&&e.cloneRenderTo(),e.layOutTitles();n--;)if(d=g[n],d.options.stacking&&(b=!0,d.isDirty)){c=!0;break}if(c)for(n=m;n--;)d=g[n],d.options.stacking&&(d.isDirty=!0);lb(g,function(a){a.isDirty&&"point"===a.options.legendType&&(a.updateTotals&&a.updateTotals(),j=!0)}),j&&i.options.enabled&&(i.render(),e.isDirtyLegend=!1),b&&e.getStacks(),k&&(e.isResizing||(e.maxTicks=null,lb(f,function(a){a.setScale()}))),e.getMargins(),k&&(lb(f,function(a){a.isDirty&&(l=!0)}),lb(f,function(a){var c=a.min+","+a.max;a.extKey!==c&&(a.extKey=c,q.push(function(){rb(a,"afterSetExtremes",db(a.eventArgs,a.getExtremes())),delete a.eventArgs})),(l||b)&&a.redraw()})),l&&e.drawChartBox(),lb(g,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()}),h&&h.reset(!0),o.draw(),rb(e,"redraw"),p&&e.cloneRenderTo(!0),lb(q,function(a){a.call()})},get:function(a){var b,c,d,e=this,f=e.axes,g=e.series;for(b=0;b<f.length;b++)if(f[b].options.id===a)return f[b];for(b=0;b<g.length;b++)if(g[b].options.id===a)return g[b];for(b=0;b<g.length;b++)for(d=g[b].points||[],c=0;c<d.length;c++)if(d[c].id===a)return d[c];return null},getAxes:function(){var a,b,c=this,d=this.options,e=d.xAxis=l(d.xAxis||{}),f=d.yAxis=l(d.yAxis||{});lb(e,function(a,b){a.index=b,a.isX=!0}),lb(f,function(a,b){a.index=b}),a=e.concat(f),lb(a,function(a){b=new Hb(c,a)})},getSelectedPoints:function(){var a=[];return lb(this.series,function(b){a=a.concat(mb(b.points||[],function(a){return a.selected}))}),a},getSelectedSeries:function(){return mb(this.series,function(a){return a.selected})},setTitle:function(b,c,d){var e,f,g=this,h=g.options;e=h.title=a(h.title,b),f=h.subtitle=a(h.subtitle,c),lb([["title",b,e],["subtitle",c,f]],function(a){var b=a[0],c=g[b],d=a[1],e=a[2];c&&d&&(g[b]=c=c.destroy()),e&&e.text&&!c&&(g[b]=g.renderer.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":Sa+b,zIndex:e.zIndex||4}).css(e.style).add())}),g.layOutTitles(d)},layOutTitles:function(a){var b,c=0,d=this.title,e=this.subtitle,f=this.options,g=f.title,h=f.subtitle,i=this.renderer,j=this.spacingBox.width-44;d&&(d.css({width:(g.width||j)+Ua}).align(db({y:i.fontMetrics(g.style.fontSize,d).b-3},g),!1,"spacingBox"),g.floating||g.verticalAlign||(c=d.getBBox().height)),e&&(e.css({width:(h.width||j)+Ua}).align(db({y:c+(g.margin-13)+i.fontMetrics(g.style.fontSize,e).b},h),!1,"spacingBox"),h.floating||h.verticalAlign||(c=oa(c+e.getBBox().height))),b=this.titleOffset!==c,this.titleOffset=c,!this.isDirtyBox&&b&&(this.isDirtyBox=b,this.hasRendered&&eb(a,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var a=this,b=a.options.chart,c=b.width,d=b.height,e=a.renderToClone||a.renderTo;j(c)||(a.containerWidth=ib(e,"width")),j(d)||(a.containerHeight=ib(e,"height")),a.chartWidth=pa(0,c||a.containerWidth||600),a.chartHeight=pa(0,eb(d,a.containerHeight>19?a.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,c=this.container;a?b&&(this.renderTo.appendChild(c),A(b),delete this.renderToClone):(c&&c.parentNode===this.renderTo&&this.renderTo.removeChild(c),this.renderToClone=b=this.renderTo.cloneNode(0),m(b,{position:Pa,top:"-9999px",display:"block"}),b.style.setProperty&&b.style.setProperty("display","block","important"),ja.body.appendChild(b),c&&b.appendChild(c))},getContainer:function(){var a,d,e,f,g,h,i=this,j=i.options.chart,l="data-highcharts-chart";i.renderTo=f=j.renderTo,h=Sa+Ia++,c(f)&&(i.renderTo=f=ja.getElementById(f)),f||B(13,!0),g=b(k(f,l)),!isNaN(g)&&Ka[g]&&Ka[g].hasRendered&&Ka[g].destroy(),k(f,l,i.index),f.innerHTML="",j.skipClone||f.offsetWidth||i.cloneRenderTo(),i.getChartSize(),d=i.chartWidth,e=i.chartHeight,i.container=a=n(Oa,{className:Sa+"container"+(j.className?" "+j.className:""),id:h},db({position:Qa,overflow:Ra,width:d+Ua,height:e+Ua,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},j.style),i.renderToClone||f),i._cursor=a.style.cursor,i.renderer=j.forExport?new Bb(a,d,e,j.style,!0):new L(a,d,e,j.style),Ga&&i.renderer.create(i,a,d,e),i.renderer.chartIndex=i.index},getMargins:function(a){var b=this,c=b.spacing,d=b.margin,e=b.titleOffset;b.resetMargins(),e&&!j(d[0])&&(b.plotTop=pa(b.plotTop,e+b.options.title.margin+c[0])),b.legend.adjustMargins(d,c),b.extraBottomMargin&&(b.marginBottom+=b.extraBottomMargin),b.extraTopMargin&&(b.plotTop+=b.extraTopMargin),a||this.getAxisMargins()},getAxisMargins:function(){var a=this,b=a.axisOffset=[0,0,0,0],c=a.margin;a.hasCartesianSeries&&lb(a.axes,function(a){a.getOffset()}),lb(ab,function(d,e){j(c[e])||(a[d]+=b[e])}),a.setChartSize()},reflow:function(a){var b=this,c=b.options.chart,d=b.renderTo,e=c.width||ib(d,"width"),f=c.height||ib(d,"height"),g=a?a.target:ka,h=function(){b.container&&(b.setSize(e,f,!1),b.hasUserSize=null)};b.hasUserSize||b.isPrinting||!e||!f||g!==ka&&g!==ja||((e!==b.containerWidth||f!==b.containerHeight)&&(clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(h,100):h()),b.containerWidth=e,b.containerHeight=f)},initReflow:function(){var a=this,b=function(b){a.reflow(b)};pb(ka,"resize",b),pb(a,"destroy",function(){qb(ka,"resize",b)})},setSize:function(a,b,c){var d,e,f,g=this,h=g.renderer,i=h.globalAnimation;g.isResizing+=1,f=function(){g&&rb(g,"endResize",null,function(){g.isResizing-=1})},D(c,g),g.oldChartHeight=g.chartHeight,g.oldChartWidth=g.chartWidth,j(a)&&(g.chartWidth=d=pa(0,ma(a)),g.hasUserSize=!!d),j(b)&&(g.chartHeight=e=pa(0,ma(b))),(i?tb:m)(g.container,{width:d+Ua,height:e+Ua},i),g.setChartSize(!0),h.setSize(d,e,c),g.maxTicks=null,lb(g.axes,function(a){a.isDirty=!0,a.setScale()}),lb(g.series,function(a){a.isDirty=!0}),g.isDirtyLegend=!0,g.isDirtyBox=!0,g.layOutTitles(),g.getMargins(),g.redraw(c),g.oldChartHeight=null,rb(g,"resize"),i===!1?f():setTimeout(f,i&&i.duration||500)},setChartSize:function(a){var b,c,d,e,f,g,h,i=this,j=i.inverted,k=i.renderer,l=i.chartWidth,m=i.chartHeight,n=i.options.chart,o=i.spacing,p=i.clipOffset;i.plotLeft=d=ma(i.plotLeft),i.plotTop=e=ma(i.plotTop),i.plotWidth=f=pa(0,ma(l-d-i.marginRight)),i.plotHeight=g=pa(0,ma(m-e-i.marginBottom)),i.plotSizeX=j?g:f,i.plotSizeY=j?f:g,i.plotBorderWidth=n.plotBorderWidth||0,i.spacingBox=k.spacingBox={x:o[3],y:o[0],width:l-o[3]-o[1],height:m-o[0]-o[2]},i.plotBox=k.plotBox={x:d,y:e,width:f,height:g},h=2*na(i.plotBorderWidth/2),b=oa(pa(h,p[3])/2),c=oa(pa(h,p[0])/2),i.clipBox={x:b,y:c,width:na(i.plotSizeX-pa(h,p[1])/2-b),height:pa(0,na(i.plotSizeY-pa(h,p[2])/2-c))},a||lb(i.axes,function(a){a.setAxisSize(),a.setAxisTranslation()})},resetMargins:function(){var a=this;lb(ab,function(b,c){a[b]=eb(a.margin[c],a.spacing[c])}),a.axisOffset=[0,0,0,0],a.clipOffset=[0,0,0,0]},drawChartBox:function(){var a,b,c=this,d=c.options.chart,e=c.renderer,f=c.chartWidth,g=c.chartHeight,h=c.chartBackground,i=c.plotBackground,j=c.plotBorder,k=c.plotBGImage,l=d.borderWidth||0,m=d.backgroundColor,n=d.plotBackgroundColor,o=d.plotBackgroundImage,p=d.plotBorderWidth||0,q=c.plotLeft,r=c.plotTop,s=c.plotWidth,t=c.plotHeight,u=c.plotBox,v=c.clipRect,w=c.clipBox;a=l+(d.shadow?8:0),(l||m)&&(h?h.animate(h.crisp({width:f-a,height:g-a})):(b={fill:m||Va},l&&(b.stroke=d.borderColor,b["stroke-width"]=l),c.chartBackground=e.rect(a/2,a/2,f-a,g-a,d.borderRadius,l).attr(b).addClass(Sa+"background").add().shadow(d.shadow))),n&&(i?i.animate(u):c.plotBackground=e.rect(q,r,s,t,0).attr({fill:n}).add().shadow(d.plotShadow)),o&&(k?k.animate(u):c.plotBGImage=e.image(o,q,r,s,t).add()),v?v.animate({width:w.width,height:w.height}):c.clipRect=e.clipRect(w),p&&(j?j.animate(j.crisp({x:q,y:r,width:s,height:t,strokeWidth:-p})):c.plotBorder=e.rect(q,r,s,t,0,-p).attr({stroke:d.plotBorderColor,"stroke-width":p,fill:Va,zIndex:1}).add()),c.isDirtyBox=!1},propFromSeries:function(){var a,b,c,d=this,e=d.options.chart,f=d.options.series;lb(["inverted","angular","polar"],function(g){for(a=cb[e.type||e.defaultSeriesType],c=d[g]||e[g]||a&&a.prototype[g],b=f&&f.length;!c&&b--;)a=cb[f[b].type],a&&a.prototype[g]&&(c=!0);d[g]=c})},linkSeries:function(){var a=this,b=a.series;lb(b,function(a){a.linkedSeries.length=0}),lb(b,function(b){var d=b.options.linkedTo;c(d)&&(d=":previous"===d?a.series[b.index-1]:a.get(d),d&&(d.linkedSeries.push(b),b.linkedParent=d,b.visible=eb(b.options.visible,d.options.visible,b.visible)))})},renderSeries:function(){lb(this.series,function(a){a.translate(),a.render()})},renderLabels:function(){var a=this,c=a.options.labels;c.items&&lb(c.items,function(d){var e=db(c.style,d.style),f=b(e.left)+a.plotLeft,g=b(e.top)+a.plotTop+12;delete e.left,delete e.top,a.renderer.text(d.html,f,g).attr({zIndex:2}).css(e).add()})},render:function(){var a,b,c,d,e=this,f=e.axes,g=e.renderer,h=e.options;e.setTitle(),e.legend=new Pb(e,h.legend),e.getStacks&&e.getStacks(),e.getMargins(!0),e.setChartSize(),a=e.plotWidth,b=e.plotHeight=e.plotHeight-13,lb(f,function(a){a.setScale()}),e.getAxisMargins(),c=a/e.plotWidth>1.1,d=b/e.plotHeight>1.1,(c||d)&&(e.maxTicks=null,lb(f,function(a){(a.horiz&&c||!a.horiz&&d)&&a.setTickInterval(!0)}),e.getMargins()),e.drawChartBox(),e.hasCartesianSeries&&lb(f,function(a){a.render()}),e.seriesGroup||(e.seriesGroup=g.g("series-group").attr({zIndex:3}).add()),e.renderSeries(),e.renderLabels(),e.showCredits(h.credits),e.hasRendered=!0},showCredits:function(a){a.enabled&&!this.credits&&(this.credits=this.renderer.text(a.text,0,0).on("click",function(){a.href&&(location.href=a.href)}).attr({align:a.position.align,zIndex:8}).css(a.style).add().align(a.position))},destroy:function(){var a,b=this,c=b.axes,d=b.series,e=b.container,f=e&&e.parentNode;for(rb(b,"destroy"),Ka[b.index]=K,La--,b.renderTo.removeAttribute("data-highcharts-chart"),qb(b),a=c.length;a--;)c[a]=c[a].destroy();for(a=d.length;a--;)d[a]=d[a].destroy();lb(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(a){var c=b[a];c&&c.destroy&&(b[a]=c.destroy())}),e&&(e.innerHTML="",qb(e),f&&A(e));for(a in b)delete b[a]},isReadyToRender:function(){var a=this;return!Ea&&ka==ka.top&&"complete"!==ja.readyState||Ga&&!ka.canvg?(Ga?Gb.push(function(){a.firstRender()},a.options.global.canvasToolsURL):ja.attachEvent("onreadystatechange",function(){ja.detachEvent("onreadystatechange",a.firstRender),"complete"===ja.readyState&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,c=a.callback;a.isReadyToRender()&&(a.getContainer(),rb(a,"init"),a.resetMargins(),a.setChartSize(),a.propFromSeries(),a.getAxes(),lb(b.series||[],function(b){a.initSeries(b)}),a.linkSeries(),rb(a,"beforeRender"),ia.Pointer&&(a.pointer=new Kb(a,b)),a.render(),a.renderer.draw(),c&&c.apply(a,[a]),lb(a.callbacks,function(b){a.index!==K&&b.apply(a,[a])}),rb(a,"load"),a.cloneRenderTo(!0))},splashArray:function(a,b){var c=b[a],e=d(c)?c:[c,c,c,c];return[eb(b[a+"Top"],e[0]),eb(b[a+"Right"],e[1]),eb(b[a+"Bottom"],e[2]),eb(b[a+"Left"],e[3])]}};var Sb=ia.CenteredSeriesMixin={getCenter:function(){var a,b,c,d=this.options,e=this.chart,f=2*(d.slicedOffset||0),g=e.plotWidth-2*f,h=e.plotHeight-2*f,i=d.center,j=[eb(i[0],"50%"),eb(i[1],"50%"),d.size||"100%",d.innerSize||0],k=qa(g,h);for(b=0;4>b;++b)c=j[b],a=2>b||2===b&&/%$/.test(c),j[b]=q(c,[g,h,k,j[2]][b])+(a?f:0);return j}},Tb=function(){};Tb.prototype={init:function(a,b,c){var d,e=this;return e.series=a,e.color=a.color,e.applyOptions(b,c),e.pointAttr={},a.options.colorByPoint&&(d=a.options.colors||a.chart.options.colors,e.color=e.color||d[a.colorCounter++],a.colorCounter===d.length&&(a.colorCounter=0)),a.chart.pointCount++,e},applyOptions:function(a,b){var c=this,d=c.series,e=d.options.pointValKey||d.pointValKey;return a=Tb.prototype.optionsToObject.call(this,a),db(c,a),c.options=c.options?db(c.options,a):a,e&&(c.y=c[e]),c.x===K&&d&&(c.x=b===K?d.autoIncrement():b),c},optionsToObject:function(a){var b,c={},d=this.series,f=d.options.keys,g=f||d.pointArrayMap||["y"],h=g.length,i=0,j=0;if("number"==typeof a||null===a)c[g[0]]=a;else if(e(a))for(!f&&a.length>h&&(b=typeof a[0],"string"===b?c.name=a[0]:"number"===b&&(c.x=a[0]),i++);h>j;)c[g[j++]]=a[i++];else"object"==typeof a&&(c=a,a.dataLabels&&(d._hasPointLabels=!0),a.marker&&(d._hasPointMarkers=!0));return c},destroy:function(){var a,b=this,c=b.series,d=c.chart,e=d.hoverPoints;d.pointCount--,e&&(b.setState(),i(e,b),e.length||(d.hoverPoints=null)),b===d.hoverPoint&&b.onMouseOut(),(b.graphic||b.dataLabel)&&(qb(b),b.destroyElements()),b.legendItem&&d.legend.destroyItem(b);for(a in b)b[a]=null},destroyElements:function(){for(var a,b=this,c=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],d=6;d--;)a=c[d],b[a]&&(b[a]=b[a].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(a){var b=this.series,c=b.tooltipOptions,d=eb(c.valueDecimals,""),e=c.valuePrefix||"",f=c.valueSuffix||"";return lb(b.pointArrayMap||["y"],function(b){b="{point."+b,(e||f)&&(a=a.replace(b+"}",e+b+"}"+f)),a=a.replace(b+"}",b+":,."+d+"f}")}),t(a,{point:this,series:this.series})},firePointEvent:function(a,b,c){var d=this,e=this.series,f=e.options;(f.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents(),"click"===a&&f.allowPointSelect&&(c=function(a){d.select&&d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)}),rb(this,a,b,c)}};var Ub=ia.Series=function(){};Ub.prototype={isCartesian:!0,type:"line",pointClass:Tb,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(a,b){var c,d,e=this,f=a.series,g=function(a,b){return eb(a.options.index,a._i)-eb(b.options.index,b._i)};e.chart=a,e.options=b=e.setOptions(b),e.linkedSeries=[],e.bindAxes(),db(e,{name:b.name,state:Za,pointAttr:{},visible:b.visible!==!1,selected:b.selected===!0}),Ga&&(b.animation=!1),d=b.events;for(c in d)pb(e,c,d[c]);(d&&d.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)&&(a.runTrackerClick=!0),e.getColor(),e.getSymbol(),lb(e.parallelArrays,function(a){e[a+"Data"]=[]}),e.setData(b.data,!1),e.isCartesian&&(a.hasCartesianSeries=!0),f.push(e),e._i=f.length-1,w(f,g),this.yAxis&&w(this.yAxis.series,g),lb(f,function(a,b){a.index=b,a.name=a.name||"Series "+(b+1)})},bindAxes:function(){var a,b=this,c=b.options,d=b.chart;lb(b.axisTypes||[],function(e){lb(d[e],function(d){a=d.options,(c[e]===a.index||c[e]!==K&&c[e]===a.id||c[e]===K&&0===a.index)&&(d.series.push(b),b[e]=d,d.isDirty=!0)}),b[e]||b.optionalAxis===e||B(18,!0)})},updateParallelArrays:function(a,b){var c=a.series,d=arguments,e="number"==typeof b?function(d){var e="y"===d&&c.toYData?c.toYData(a):a[d];c[d+"Data"][b]=e}:function(a){Array.prototype[b].apply(c[a+"Data"],Array.prototype.slice.call(d,2))};lb(c.parallelArrays,e)},autoIncrement:function(){var a,b,c=this.options,d=this.xIncrement,e=c.pointIntervalUnit;return d=eb(d,c.pointStart,0),this.pointInterval=b=eb(this.pointInterval,c.pointInterval,1),("month"===e||"year"===e)&&(a=new T(d),a="month"===e?+a[ga](a[_]()+b):+a[ha](a[aa]()+b),b=a-d),this.xIncrement=d+b,d},getSegments:function(){var a,b=this,c=-1,d=[],e=b.points,f=e.length;if(f)if(b.options.connectNulls){for(a=f;a--;)null===e[a].y&&e.splice(a,1);e.length&&(d=[e])}else lb(e,function(a,b){null===a.y?(b>c+1&&d.push(e.slice(c+1,b)),c=b):b===f-1&&d.push(e.slice(c+1,b+1))});b.segments=d},setOptions:function(b){var c,d,e=this.chart,f=e.options,g=f.plotOptions,h=e.userOptions||{},i=h.plotOptions||{},k=g[this.type];return this.userOptions=b,c=a(k,g.series,b),this.tooltipOptions=a(O.tooltip,O.plotOptions[this.type].tooltip,h.tooltip,i.series&&i.series.tooltip,i[this.type]&&i[this.type].tooltip,b.tooltip),null===k.marker&&delete c.marker,this.zoneAxis=c.zoneAxis,d=this.zones=(c.zones||[]).slice(),!c.negativeColor&&!c.negativeFillColor||c.zones||d.push({value:c[this.zoneAxis+"Threshold"]||c.threshold||0,color:c.negativeColor,fillColor:c.negativeFillColor}),d.length&&j(d[d.length-1].value)&&d.push({color:this.color,fillColor:this.fillColor}),c},getCyclic:function(a,b,c){var d,e=this.userOptions,f="_"+a+"Index",g=a+"Counter";b||(j(e[f])?d=e[f]:(e[f]=d=this.chart[g]%c.length,this.chart[g]+=1),b=c[d]),this[a]=b},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||vb[this.type].color,this.chart.options.colors)},getSymbol:function(){var a=this.options.marker;this.getCyclic("symbol",a.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(a.radius=0)},drawLegendSymbol:Qb.drawLineMarker,setData:function(a,b,d,g){var h,i,k,l=this,m=l.points,n=m&&m.length||0,o=l.options,p=l.chart,q=null,r=l.xAxis,s=r&&!!r.categories,t=o.turboThreshold,u=this.xData,v=this.yData,w=l.pointArrayMap,x=w&&w.length;if(a=a||[],h=a.length,b=eb(b,!0),g!==!1&&h&&n===h&&!l.cropped&&!l.hasGroupedData&&l.visible)lb(a,function(a,b){m[b].update&&m[b].update(a,!1,null,!1)});else{if(l.xIncrement=null,l.pointRange=s?1:o.pointRange,l.colorCounter=0,lb(this.parallelArrays,function(a){l[a+"Data"].length=0}),t&&h>t){for(i=0;null===q&&h>i;)q=a[i],i++;if(f(q)){var y=eb(o.pointStart,0),z=eb(o.pointInterval,1);for(i=0;h>i;i++)u[i]=y,v[i]=a[i],y+=z;l.xIncrement=y}else if(e(q))if(x)for(i=0;h>i;i++)k=a[i],u[i]=k[0],v[i]=k.slice(1,x+1);else for(i=0;h>i;i++)k=a[i],u[i]=k[0],v[i]=k[1];else B(12)}else for(i=0;h>i;i++)a[i]!==K&&(k={series:l},l.pointClass.prototype.applyOptions.apply(k,[a[i]]),l.updateParallelArrays(k,i),s&&j(k.name)&&(r.names[k.x]=k.name));for(c(v[0])&&B(14,!0),l.data=[],l.options.data=a,i=n;i--;)m[i]&&m[i].destroy&&m[i].destroy();r&&(r.minRange=r.userMinRange),l.isDirty=l.isDirtyData=p.isDirtyBox=!0,d=!1}b&&p.redraw(d)},processData:function(a){var b,c,d,e,f,g,h,i,j=this,k=j.xData,l=j.yData,m=k.length,n=0,o=j.xAxis,p=j.options,q=p.cropThreshold,r=j.isCartesian;if(r&&!j.isDirty&&!o.isDirty&&!j.yAxis.isDirty&&!a)return!1;for(o&&(g=o.getExtremes(),h=g.min,i=g.max),r&&j.sorted&&(!q||m>q||j.forceCrop)&&(k[m-1]<h||k[0]>i?(k=[],l=[]):(k[0]<h||k[m-1]>i)&&(b=this.cropData(j.xData,j.yData,h,i),k=b.xData,l=b.yData,n=b.start,c=!0)),f=k.length-1;f>=0;f--)d=k[f]-k[f-1],d>0&&(e===K||e>d)?e=d:0>d&&j.requireSorting&&B(15);j.cropped=c,j.cropStart=n,j.processedXData=k,j.processedYData=l,null===p.pointRange&&(j.pointRange=e||1),j.closestPointRange=e},cropData:function(a,b,c,d){var e,f=a.length,g=0,h=f,i=eb(this.cropShoulder,1);for(e=0;f>e;e++)if(a[e]>=c){g=pa(0,e-i);break}for(;f>e;e++)if(a[e]>d){h=e+i;break}return{xData:a.slice(g,h),yData:b.slice(g,h),start:g,end:h}},generatePoints:function(){var a,b,c,d,e=this,f=e.options,g=f.data,h=e.data,i=e.processedXData,j=e.processedYData,k=e.pointClass,m=i.length,n=e.cropStart||0,o=e.hasGroupedData,p=[];if(!h&&!o){var q=[];q.length=g.length,h=e.data=q}for(d=0;m>d;d++)b=n+d,o?p[d]=(new k).init(e,[i[d]].concat(l(j[d]))):(h[b]?c=h[b]:g[b]!==K&&(h[b]=c=(new k).init(e,g[b],i[d])),p[d]=c),p[d].index=b;if(h&&(m!==(a=h.length)||o))for(d=0;a>d;d++)d!==n||o||(d+=m),h[d]&&(h[d].destroyElements(),h[d].plotX=K);e.data=h,e.points=p},getExtremes:function(a){var b,c,d,e,f,g,h,i=this.xAxis,j=this.yAxis,k=this.processedXData,l=[],m=0,n=i.getExtremes(),o=n.min,p=n.max;for(a=a||this.stackedYData||this.processedYData,b=a.length,g=0;b>g;g++)if(e=k[g],f=a[g],c=null!==f&&f!==K&&(!j.isLog||f.length||f>0),d=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(k[g+1]||e)>=o&&(k[g-1]||e)<=p,c&&d)if(h=f.length)for(;h--;)null!==f[h]&&(l[m++]=f[h]);else l[m++]=f;this.dataMin=x(l),this.dataMax=y(l)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var a,b,c,d,e=this,g=e.options,h=g.stacking,i=e.xAxis,k=i.categories,l=e.yAxis,m=e.points,n=m.length,o=!!e.modifyValue,p=g.pointPlacement,q="between"===p||f(p),r=g.threshold,s=g.startFromThreshold?r:0,t=Number.MAX_VALUE;for(a=0;n>a;a++){var u,v,w=m[a],x=w.x,y=w.y,z=w.low,A=h&&l.stacks[(e.negStacks&&(s?0:r)>y?"-":"")+e.stackKey];l.isLog&&null!==y&&0>=y&&(w.y=y=null,B(10)),w.plotX=b=qa(pa(-1e5,i.translate(x,0,0,0,1,p,"flags"===this.type)),1e5),h&&e.visible&&A&&A[x]&&(u=A[x],v=u.points[e.index+","+a],z=v[0],y=v[1],z===s&&(z=eb(r,l.min)),l.isLog&&0>=z&&(z=null),w.total=w.stackTotal=u.total,w.percentage=u.total&&w.y/u.total*100,w.stackY=y,u.setOffset(e.pointXOffset||0,e.barW||0)),w.yBottom=j(z)?l.translate(z,0,1,0,1):null,o&&(y=e.modifyValue(y,w)),w.plotY=c="number"==typeof y&&y!==1/0?qa(pa(-1e5,l.translate(y,0,1,0,1)),1e5):K,w.isInside=c!==K&&c>=0&&c<=l.len&&b>=0&&b<=i.len,w.clientX=q?i.translate(x,0,0,0,1):b,
w.negative=w.y<(r||0),w.category=k&&k[w.x]!==K?k[w.x]:w.x,a&&(t=qa(t,ra(b-d))),d=b}e.closestPointRangePx=t,e.getSegments()},setClip:function(a){var b=this.chart,c=b.renderer,d=b.inverted,e=this.clipBox,f=e||b.clipBox,g=this.sharedClipKey||["_sharedClip",a&&a.duration,a&&a.easing,f.height].join(","),h=b[g],i=b[g+"m"];h||(a&&(f.width=0,b[g+"m"]=i=c.clipRect(-99,d?-b.plotLeft:-b.plotTop,99,d?b.chartWidth:b.chartHeight)),b[g]=h=c.clipRect(f)),a&&(h.count+=1),this.options.clip!==!1&&(this.group.clip(a||e?h:b.clipRect),this.markerGroup.clip(i),this.sharedClipKey=g),a||(h.count-=1,h.count<=0&&g&&b[g]&&(e||(b[g]=b[g].destroy()),b[g+"m"]&&(b[g+"m"]=b[g+"m"].destroy())))},animate:function(a){var b,c,e=this,f=e.chart,g=e.options.animation;g&&!d(g)&&(g=vb[e.type].animation),a?e.setClip(g):(c=this.sharedClipKey,b=f[c],b&&b.animate({width:f.plotSizeX},g),f[c+"m"]&&f[c+"m"].animate({width:f.plotSizeX+99},g),e.animate=null)},afterAnimate:function(){this.setClip(),rb(this,"afterAnimate")},drawPoints:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=n.points,p=n.chart,q=n.options,r=q.marker,s=n.pointAttr[""],t=n.markerGroup,u=n.xAxis,v=eb(r.enabled,u.isRadial,n.closestPointRangePx>2*r.radius);if(r.enabled!==!1||n._hasPointMarkers)for(d=o.length;d--;)e=o[d],b=na(e.plotX),c=e.plotY,i=e.graphic,j=e.marker||{},k=!!e.marker,l=v&&j.enabled===K||j.enabled,m=e.isInside,l&&c!==K&&!isNaN(c)&&null!==e.y?(a=e.pointAttr[e.selected?_a:Za]||s,f=a.r,g=eb(j.symbol,n.symbol),h=0===g.indexOf("url"),i?i[m?"show":"hide"](!0).animate(db({x:b-f,y:c-f},i.symbolName?{width:2*f,height:2*f}:{})):m&&(f>0||h)&&(e.graphic=i=p.renderer.symbol(g,b-f,c-f,2*f,2*f,k?j:r).attr(a).add(t))):i&&(e.graphic=i.destroy())},convertAttribs:function(a,b,c,d){var e,f,g=this.pointAttrToOptions,h={};a=a||{},b=b||{},c=c||{},d=d||{};for(e in g)f=g[e],h[e]=eb(a[f],b[e],c[e],d[e]);return h},getAttribs:function(){var a,b,c,d,e,f,g,h,i=this,k=i.options,l=vb[i.type].marker?k.marker:k,m=l.states,n=m[$a],o=i.color,p=i.options.negativeColor,q={stroke:o,fill:o},r=i.points||[],s=[],t=i.pointAttrToOptions,u=i.hasPointSpecificOptions,v=l.lineColor,w=l.fillColor,x=k.turboThreshold,y=i.zones,z=i.zoneAxis||"y";if(k.marker?(n.radius=n.radius||l.radius+n.radiusPlus,n.lineWidth=n.lineWidth||l.lineWidth+n.lineWidthPlus):(n.color=n.color||Ab(n.color||o).brighten(n.brightness).get(),n.negativeColor=n.negativeColor||Ab(n.negativeColor||p).brighten(n.brightness).get()),s[Za]=i.convertAttribs(l,q),lb([$a,_a],function(a){s[a]=i.convertAttribs(m[a],s[Za])}),i.pointAttr=s,b=r.length,!x||x>b||u)for(;b--;){if(e=r[b],l=e.options&&e.options.marker||e.options,l&&l.enabled===!1&&(l.radius=0),y.length){for(c=0,d=y[c];e[z]>=d.value;)d=y[++c];d.color&&(e.color=e.fillColor=d.color)}if(u=k.colorByPoint||e.color,e.options)for(h in t)j(l[t[h]])&&(u=!0);u?(l=l||{},f=[],m=l.states||{},a=m[$a]=m[$a]||{},k.marker||(a.color=a.color||!e.options.color&&n[e.negative&&p?"negativeColor":"color"]||Ab(e.color).brighten(a.brightness||n.brightness).get()),g={color:e.color},w||(g.fillColor=e.color),v||(g.lineColor=e.color),l.hasOwnProperty("color")&&!l.color&&delete l.color,f[Za]=i.convertAttribs(db(g,l),s[Za]),f[$a]=i.convertAttribs(m[$a],s[$a],f[Za]),f[_a]=i.convertAttribs(m[_a],s[_a],f[Za])):f=s,e.pointAttr=f}},destroy:function(){var a,b,c,d,e,f=this,g=f.chart,h=/AppleWebKit\/533/.test(wa),j=f.data||[];for(rb(f,"destroy"),qb(f),lb(f.axisTypes||[],function(a){e=f[a],e&&(i(e.series,f),e.isDirty=e.forceRedraw=!0)}),f.legendItem&&f.chart.legend.destroyItem(f),b=j.length;b--;)c=j[b],c&&c.destroy&&c.destroy();f.points=null,clearTimeout(f.animationTimeout);for(d in f)f[d]instanceof H&&!f[d].survive&&(a=h&&"group"===d?"hide":"destroy",f[d][a]());g.hoverSeries===f&&(g.hoverSeries=null),i(g.series,f);for(d in f)delete f[d]},getSegmentPath:function(a){var b=this,c=[],d=b.options.step;return lb(a,function(e,f){var g,h=e.plotX,i=e.plotY;b.getPointSpline?c.push.apply(c,b.getPointSpline(a,e,f)):(c.push(f?Xa:Wa),d&&f&&(g=a[f-1],"right"===d?c.push(g.plotX,i):"center"===d?c.push((g.plotX+h)/2,g.plotY,(g.plotX+h)/2,i):c.push(h,g.plotY)),c.push(e.plotX,e.plotY))}),c},getGraphPath:function(){var a,b=this,c=[],d=[];return lb(b.segments,function(e){a=b.getSegmentPath(e),e.length>1?c=c.concat(a):d.push(e[0])}),b.singlePoints=d,b.graphPath=c,c},drawGraph:function(){var a=this,b=this.options,c=[["graph",b.lineColor||this.color,b.dashStyle]],d=b.lineWidth,e="square"!==b.linecap,f=this.getGraphPath(),g=this.fillGraph&&this.color||Va,h=this.zones;lb(h,function(d,e){c.push(["zoneGraph"+e,d.color||a.color,d.dashStyle||b.dashStyle])}),lb(c,function(c,h){var i,j=c[0],k=a[j];k?k.animate({d:f}):(d||g)&&f.length&&(i={stroke:c[1],"stroke-width":d,fill:g,zIndex:1},c[2]?i.dashstyle=c[2]:e&&(i["stroke-linecap"]=i["stroke-linejoin"]="round"),a[j]=a.chart.renderer.path(f).attr(i).add(a.group).shadow(2>h&&b.shadow))})},applyZones:function(){var a,b,c,d,e,f,g,h=this,i=this.chart,j=i.renderer,k=this.zones,l=this.clips||[],m=this.graph,n=this.area,o=pa(i.chartWidth,i.chartHeight),p=this[(this.zoneAxis||"y")+"Axis"],q=p.reversed,r=i.inverted,s=p.horiz,t=!1;k.length&&(m||n)&&p.min!==K&&(m&&m.hide(),n&&n.hide(),d=p.getExtremes(),lb(k,function(k,u){a=q?s?i.plotWidth:0:s?0:p.toPixels(d.min),a=qa(pa(eb(b,a),0),o),b=qa(pa(ma(p.toPixels(eb(k.value,d.max),!0)),0),o),t&&(a=b=p.toPixels(d.max)),e=Math.abs(a-b),f=qa(a,b),g=pa(a,b),p.isXAxis?(c={x:r?g:f,y:0,width:e,height:o},s||(c.x=i.plotHeight-c.x)):(c={x:0,y:r?g:f,width:o,height:e},s&&(c.y=i.plotWidth-c.y)),i.inverted&&j.isVML&&(c=p.isXAxis?{x:0,y:q?f:g,height:c.width,width:i.chartWidth}:{x:c.y-i.plotLeft-i.spacingBox.x,y:0,width:c.height,height:i.chartHeight}),l[u]?l[u].animate(c):(l[u]=j.clipRect(c),m&&h["zoneGraph"+u].clip(l[u]),n&&h["zoneArea"+u].clip(l[u])),t=k.value>d.max}),this.clips=l)},invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};lb(["group","markerGroup"],function(c){b[c]&&b[c].attr(a).invert()})}var b=this,c=b.chart;b.xAxis&&(pb(c,"resize",a),pb(b,"destroy",function(){qb(c,"resize",a)}),a(),b.invertGroups=a)},plotGroup:function(a,b,c,d,e){var f=this[a],g=!f;return g&&(this[a]=f=this.chart.renderer.g(b).attr({visibility:c,zIndex:d||.1}).add(e)),f[g?"attr":"animate"](this.getPlotBox()),f},getPlotBox:function(){var a=this.chart,b=this.xAxis,c=this.yAxis;return a.inverted&&(b=c,c=this.xAxis),{translateX:b?b.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}},render:function(){var a,b=this,c=b.chart,d=b.options,e=d.animation,f=e&&!!b.animate&&c.renderer.isSVG&&eb(e.duration,500)||0,g=b.visible?Ta:Ra,h=d.zIndex,i=b.hasRendered,j=c.seriesGroup;a=b.plotGroup("group","series",g,h,j),b.markerGroup=b.plotGroup("markerGroup","markers",g,h,j),f&&b.animate(!0),b.getAttribs(),a.inverted=b.isCartesian?c.inverted:!1,b.drawGraph&&(b.drawGraph(),b.applyZones()),lb(b.points,function(a){a.redraw&&a.redraw()}),b.drawDataLabels&&b.drawDataLabels(),b.visible&&b.drawPoints(),b.drawTracker&&b.options.enableMouseTracking!==!1&&b.drawTracker(),c.inverted&&b.invertGroups(),d.clip===!1||b.sharedClipKey||i||a.clip(c.clipRect),f&&b.animate(),i||(f?b.animationTimeout=setTimeout(function(){b.afterAnimate()},f):b.afterAnimate()),b.isDirty=b.isDirtyData=!1,b.hasRendered=!0},redraw:function(){var a=this,b=a.chart,c=a.isDirtyData,d=a.isDirty,e=a.group,f=a.xAxis,g=a.yAxis;e&&(b.inverted&&e.attr({width:b.plotWidth,height:b.plotHeight}),e.animate({translateX:eb(f&&f.left,b.plotLeft),translateY:eb(g&&g.top,b.plotTop)})),a.translate(),a.render(),c&&rb(a,"updatedData"),(d||c)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(a,b){var c=this,d=c.xAxis,e=c.yAxis,f=c.chart.inverted;return this.searchKDTree({clientX:f?d.len-a.chartY+d.pos:a.chartX-d.pos,plotY:f?e.len-a.chartX+e.pos:a.chartY-e.pos},b)},buildKDTree:function(){function a(b,d,e){var f,g,h=b&&b.length;return h?(f=c.kdAxisArray[d%e],b.sort(function(a,b){return a[f]-b[f]}),g=Math.floor(h/2),{point:b[g],left:a(b.slice(0,g),d+1,e),right:a(b.slice(g+1),d+1,e)}):void 0}function b(){var b=mb(c.points||[],function(a){return null!==a.y});c.kdTree=a(b,d,d)}var c=this,d=c.kdDimensions;delete c.kdTree,c.options.kdSync?b():setTimeout(b)},searchKDTree:function(a,b){function c(a,b){var c=j(a[f])&&j(b[f])?Math.pow(a[f]-b[f],2):null,d=j(a[g])&&j(b[g])?Math.pow(a[g]-b[g],2):null,e=(c||0)+(d||0);b.dist=j(e)?Math.sqrt(e):Number.MAX_VALUE,b.distX=j(c)?Math.sqrt(c):Number.MAX_VALUE}function d(a,b,f,g){var i,j,k,l,m,n=b.point,o=e.kdAxisArray[f%g],p=n;return c(a,n),i=a[o]-n[o],j=0>i?"left":"right",k=0>i?"right":"left",b[j]&&(l=d(a,b[j],f+1,g),p=l[h]<p[h]?l:n),b[k]&&Math.sqrt(i*i)<p[h]&&(m=d(a,b[k],f+1,g),p=m[h]<p[h]?m:p),p}var e=this,f=this.kdAxisArray[0],g=this.kdAxisArray[1],h=b?"distX":"dist";return this.kdTree||this.buildKDTree(),this.kdTree?d(a,this.kdTree,this.kdDimensions,this.kdDimensions):void 0}},J.prototype={destroy:function(){z(this,this.axis)},render:function(a){var b=this.options,c=b.format,d=c?t(c,this):b.formatter.call(this);this.label?this.label.attr({text:d,visibility:Ra}):this.label=this.axis.chart.renderer.text(d,null,null,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:Ra}).add(a)},setOffset:function(a,b){var c,d=this,e=d.axis,f=e.chart,g=f.inverted,h=e.reversed,i=this.isNegative&&!h||!this.isNegative&&h,j=e.translate(e.usePercentage?100:this.total,0,0,0,1),k=e.translate(0),l=ra(j-k),m=f.xAxis[0].translate(this.x)+a,n=f.plotHeight,o={x:g?i?j:j-l:m,y:g?n-m-b:i?n-j-l:n-j,width:g?l:b,height:g?b:l},p=this.label;p&&(p.align(this.alignOptions,null,o),c=p.alignAttr,p[this.options.crop===!1||f.isInsidePlot(c.x,c.y)?"show":"hide"](!0))}},Rb.prototype.getStacks=function(){var a=this;lb(a.yAxis,function(a){a.stacks&&a.hasVisibleSeries&&(a.oldStacks=a.stacks)}),lb(a.series,function(b){!b.options.stacking||b.visible!==!0&&a.options.chart.ignoreHiddenSeries!==!1||(b.stackKey=b.type+eb(b.options.stack,""))})},Hb.prototype.buildStacks=function(){var a=this.series,b=eb(this.options.reversedStacks,!0),c=a.length;if(!this.isXAxis){for(this.usePercentage=!1;c--;)a[b?c:a.length-c-1].setStackedPoints();if(this.usePercentage)for(c=0;c<a.length;c++)a[c].setPercentStacks()}},Hb.prototype.renderStackTotals=function(){var a,b,c,d=this,e=d.chart,f=e.renderer,g=d.stacks,h=d.stackTotalGroup;h||(d.stackTotalGroup=h=f.g("stack-labels").attr({visibility:Ta,zIndex:6}).add()),h.translate(e.plotLeft,e.plotTop);for(a in g){b=g[a];for(c in b)b[c].render(h)}},Hb.prototype.resetStacks=function(){var a,b,c=this.stacks;if(!this.isXAxis)for(a in c)for(b in c[a])c[a][b].touched<this.stacksTouched?(c[a][b].destroy(),delete c[a][b]):(c[a][b].total=null,c[a][b].cum=0)},Hb.prototype.cleanStacks=function(){var a,b,c;if(!this.isXAxis){this.oldStacks&&(a=this.stacks=this.oldStacks);for(b in a)for(c in a[b])a[b][c].cum=a[b][c].total}},Ub.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var a,b,c,d,e,f,g,h,i=this,j=i.processedXData,k=i.processedYData,l=[],m=k.length,n=i.options,o=n.threshold,p=n.startFromThreshold?o:0,q=n.stack,r=n.stacking,s=i.stackKey,t="-"+s,u=i.negStacks,v=i.yAxis,w=v.stacks,x=v.oldStacks;for(v.stacksTouched+=1,f=0;m>f;f++)g=j[f],h=k[f],e=i.index+","+f,a=u&&(p?0:o)>h,d=a?t:s,w[d]||(w[d]={}),w[d][g]||(x[d]&&x[d][g]?(w[d][g]=x[d][g],w[d][g].total=null):w[d][g]=new J(v,v.options.stackLabels,a,g,q)),b=w[d][g],b.points[e]=[eb(b.cum,p)],b.touched=v.stacksTouched,"percent"===r?(c=a?s:t,u&&w[c]&&w[c][g]?(c=w[c][g],b.total=c.total=pa(c.total,b.total)+ra(h)||0):b.total=C(b.total+(ra(h)||0))):b.total=C(b.total+(h||0)),b.cum=eb(b.cum,p)+(h||0),b.points[e].push(b.cum),l[f]=b.cum;"percent"===r&&(v.usePercentage=!0),this.stackedYData=l,v.oldStacks={}}},Ub.prototype.setPercentStacks=function(){var a=this,b=a.stackKey,c=a.yAxis.stacks,d=a.processedXData;lb([b,"-"+b],function(b){for(var e,f,g,h,i=d.length;i--;)e=d[i],f=c[b]&&c[b][e],g=f&&f.points[a.index+","+i],g&&(h=f.total?100/f.total:0,g[0]=C(g[0]*h),g[1]=C(g[1]*h),a.stackedYData[i]=g[1])})},db(Rb.prototype,{addSeries:function(a,b,c){var d,e=this;return a&&(b=eb(b,!0),rb(e,"addSeries",{options:a},function(){d=e.initSeries(a),e.isDirtyLegend=!0,e.linkSeries(),b&&e.redraw(c)})),d},addAxis:function(b,c,d,e){var f,g=c?"xAxis":"yAxis",h=this.options;f=new Hb(this,a(b,{index:this[g].length,isX:c})),h[g]=l(h[g]||{}),h[g].push(b),eb(d,!0)&&this.redraw(e)},showLoading:function(a){var b=this,c=b.options,d=b.loadingDiv,e=c.loading,f=function(){d&&m(d,{left:b.plotLeft+Ua,top:b.plotTop+Ua,width:b.plotWidth+Ua,height:b.plotHeight+Ua})};d||(b.loadingDiv=d=n(Oa,{className:Sa+"loading"},db(e.style,{zIndex:10,display:Va}),b.container),b.loadingSpan=n("span",null,e.labelStyle,d),pb(b,"redraw",f)),b.loadingSpan.innerHTML=a||c.lang.loading,b.loadingShown||(m(d,{opacity:0,display:""}),tb(d,{opacity:e.style.opacity},{duration:e.showDuration||0}),b.loadingShown=!0),f()},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&tb(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){m(b,{display:Va})}}),this.loadingShown=!1}}),db(Tb.prototype,{update:function(a,b,c,f){function g(){i.applyOptions(a),null===i.y&&k&&(i.graphic=k.destroy()),d(a)&&!e(a)&&(i.redraw=function(){k&&k.element&&a&&a.marker&&a.marker.symbol&&(i.graphic=k.destroy()),a&&a.dataLabels&&i.dataLabel&&(i.dataLabel=i.dataLabel.destroy()),i.redraw=null}),h=i.index,j.updateParallelArrays(i,h),n&&i.name&&(n[i.x]=i.name),m.data[h]=i.options,j.isDirty=j.isDirtyData=!0,!j.fixedBox&&j.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===m.legendType&&(l.isDirtyLegend=!0),b&&l.redraw(c)}var h,i=this,j=i.series,k=i.graphic,l=j.chart,m=j.options,n=j.xAxis&&j.xAxis.names;b=eb(b,!0),f===!1?g():i.firePointEvent("update",{options:a},g)},remove:function(a,b){this.series.removePoint(kb(this,this.series.data),a,b)}}),db(Ub.prototype,{addPoint:function(a,b,c,d){var e,f,g,h,i=this,j=i.options,k=i.data,l=i.graph,m=i.area,n=i.chart,o=i.xAxis&&i.xAxis.names,p=l&&l.shift||0,q=["graph","area"],r=j.data,s=i.xData;if(D(d,n),c){for(g=i.zones.length;g--;)q.push("zoneGraph"+g,"zoneArea"+g);lb(q,function(a){i[a]&&(i[a].shift=p+1)})}if(m&&(m.isArea=!0),b=eb(b,!0),e={series:i},i.pointClass.prototype.applyOptions.apply(e,[a]),h=e.x,g=s.length,i.requireSorting&&h<s[g-1])for(f=!0;g&&s[g-1]>h;)g--;i.updateParallelArrays(e,"splice",g,0,0),i.updateParallelArrays(e,g),o&&e.name&&(o[h]=e.name),r.splice(g,0,a),f&&(i.data.splice(g,0,null),i.processData()),"point"===j.legendType&&i.generatePoints(),c&&(k[0]&&k[0].remove?k[0].remove(!1):(k.shift(),i.updateParallelArrays(e,"shift"),r.shift())),i.isDirty=!0,i.isDirtyData=!0,b&&(i.getAttribs(),n.redraw())},removePoint:function(a,b,c){var d=this,e=d.data,f=e[a],g=d.points,h=d.chart,i=function(){e.length===g.length&&g.splice(a,1),e.splice(a,1),d.options.data.splice(a,1),d.updateParallelArrays(f||{series:d},"splice",a,1),f&&f.destroy(),d.isDirty=!0,d.isDirtyData=!0,b&&h.redraw()};D(c,h),b=eb(b,!0),f?f.firePointEvent("remove",null,i):i()},remove:function(a,b){var c=this,d=c.chart;a=eb(a,!0),c.isRemoving||(c.isRemoving=!0,rb(c,"remove",null,function(){c.destroy(),d.isDirtyLegend=d.isDirtyBox=!0,d.linkSeries(),a&&d.redraw(b)})),c.isRemoving=!1},update:function(b,c){var d,e=this,f=this.chart,g=this.userOptions,h=this.type,i=cb[h].prototype,j=["group","markerGroup","dataLabelsGroup"];(b.type&&b.type!==h||void 0!==b.zIndex)&&(j.length=0),lb(j,function(a){j[a]=e[a],delete e[a]}),b=a(g,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},b),this.remove(!1);for(d in i)this[d]=K;db(this,cb[b.type||h].prototype),lb(j,function(a){e[a]=j[a]}),this.init(f,b),f.linkSeries(),eb(c,!0)&&f.redraw(!1)}}),db(Hb.prototype,{update:function(b,c){var d=this.chart;b=d.options[this.coll][this.options.index]=a(this.userOptions,b),this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=K,this.init(d,db(b,{events:K})),d.isDirtyBox=!0,eb(c,!0)&&d.redraw()},remove:function(a){for(var b=this.chart,c=this.coll,d=this.series,e=d.length;e--;)d[e]&&d[e].remove(!1);i(b.axes,this),i(b[c],this),b.options[c].splice(this.options.index,1),lb(b[c],function(a,b){a.options.index=b}),this.destroy(),b.isDirtyBox=!0,eb(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});var Vb=o(Ub);cb.line=Vb,vb.area=a(wb,{threshold:0});var Wb=o(Ub,{type:"area",getSegments:function(){var a,b,c,d,e=this,f=[],g=[],h=[],i=this.xAxis,j=this.yAxis,k=j.stacks[this.stackKey],l={},m=this.points,n=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(c=0;c<m.length;c++)l[m[c].x]=m[c];for(d in k)null!==k[d].total&&h.push(+d);h.sort(function(a,b){return a-b}),lb(h,function(d){var f,h=0;if(!n||l[d]&&null!==l[d].y)if(l[d])g.push(l[d]);else{for(c=e.index;c<=j.series.length;c++)if(f=k[d].points[c+","+d]){h=f[1];break}a=i.translate(d),b=j.toPixels(h,!0),g.push({y:null,plotX:a,clientX:a,plotY:b,yBottom:b,onMouseOver:Ja})}}),g.length&&f.push(g)}else Ub.prototype.getSegments.call(this),f=this.segments;this.segments=f},getSegmentPath:function(a){var b,c,d=Ub.prototype.getSegmentPath.call(this,a),e=[].concat(d),f=this.options,g=d.length,h=this.yAxis.getThreshold(f.threshold);if(3===g&&e.push(Xa,d[1],d[2]),f.stacking&&!this.closedStacks)for(b=a.length-1;b>=0;b--)c=eb(a[b].yBottom,h),b<a.length-1&&f.step&&e.push(a[b+1].plotX,c),e.push(a[b].plotX,c);else this.closeSegment(e,a,h);return this.areaPath=this.areaPath.concat(e),d},closeSegment:function(a,b,c){a.push(Xa,b[b.length-1].plotX,c,Xa,b[0].plotX,c)},drawGraph:function(){this.areaPath=[],Ub.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,c=this.options,d=this.zones,e=[["area",this.color,c.fillColor]];lb(d,function(b,d){e.push(["zoneArea"+d,b.color||a.color,b.fillColor||c.fillColor])}),lb(e,function(d){var e=d[0],f=a[e];f?f.animate({d:b}):a[e]=a.chart.renderer.path(b).attr({fill:eb(d[2],Ab(d[1]).setOpacity(eb(c.fillOpacity,.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:Qb.drawRectangle});cb.area=Wb,vb.spline=a(wb);var Xb=o(Ub,{type:"spline",getPointSpline:function(a,b,c){var d,e,f,g,h,i=1.5,j=i+1,k=b.plotX,l=b.plotY,m=a[c-1],n=a[c+1];if(m&&n){var o,p=m.plotX,q=m.plotY,r=n.plotX,s=n.plotY;d=(i*k+p)/j,e=(i*l+q)/j,f=(i*k+r)/j,g=(i*l+s)/j,o=(g-e)*(f-k)/(f-d)+l-g,e+=o,g+=o,e>q&&e>l?(e=pa(q,l),g=2*l-e):q>e&&l>e&&(e=qa(q,l),g=2*l-e),g>s&&g>l?(g=pa(s,l),e=2*l-g):s>g&&l>g&&(g=qa(s,l),e=2*l-g),b.rightContX=f,b.rightContY=g}return c?(h=["C",m.rightContX||m.plotX,m.rightContY||m.plotY,d||k,e||l,k,l],m.rightContX=m.rightContY=null):h=[Wa,k,l],h}});cb.spline=Xb,vb.areaspline=a(vb.area);var Yb=Wb.prototype,Zb=o(Xb,{type:"areaspline",closedStacks:!0,getSegmentPath:Yb.getSegmentPath,closeSegment:Yb.closeSegment,drawGraph:Yb.drawGraph,drawLegendSymbol:Qb.drawRectangle});cb.areaspline=Zb,vb.column=a(wb,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});var $b=o(Ub,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Ub.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&lb(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},getColumnMetrics:function(){var a,b,c=this,d=c.options,e=c.xAxis,f=c.yAxis,g=e.reversed,h={},i=0;d.grouping===!1?i=1:lb(c.chart.series,function(d){var e=d.options,g=d.yAxis;d.type===c.type&&d.visible&&f.len===g.len&&f.pos===g.pos&&(e.stacking?(a=d.stackKey,h[a]===K&&(h[a]=i++),b=h[a]):e.grouping!==!1&&(b=i++),d.columnIndex=b)});var j=qa(ra(e.transA)*(e.ordinalSlope||d.pointRange||e.closestPointRange||e.tickInterval||1),e.len),k=j*d.groupPadding,l=j-2*k,m=l/i,n=qa(d.maxPointWidth||e.len,eb(d.pointWidth,m*(1-2*d.pointPadding))),o=(m-n)/2,p=(g?i-(c.columnIndex||0):c.columnIndex)||0,q=o+(k+p*m-j/2)*(g?-1:1);return c.columnMetrics={width:n,offset:q}},translate:function(){var a=this,b=a.chart,c=a.options,d=a.borderWidth=eb(c.borderWidth,a.closestPointRange*a.xAxis.transA<2?0:1),e=a.yAxis,f=c.threshold,g=a.translatedThreshold=e.getThreshold(f),h=eb(c.minPointLength,5),i=a.getColumnMetrics(),j=i.width,k=a.barW=pa(j,1+2*d),l=a.pointXOffset=i.offset,m=-(d%2?.5:0),n=d%2?.5:1;b.inverted&&(g-=.5,b.renderer.isVML&&(n+=1)),c.pointPadding&&(k=oa(k)),Ub.prototype.translate.apply(a),lb(a.points,function(c){var d,f,i,o,p=eb(c.yBottom,g),q=999+ra(p),r=qa(pa(-q,c.plotY),e.len+q),s=c.plotX+l,t=k,u=qa(r,p),v=pa(r,p)-u;ra(v)<h&&h&&(v=h,o=!e.reversed&&!c.negative||e.reversed&&c.negative,u=ma(ra(u-g)>h?p-h:g-(o?h:0))),c.barX=s,c.pointWidth=j,d=ma(s+t)+m,s=ma(s)+m,t=d-s,i=ra(u)<.5,f=qa(ma(u+v)+n,9e4),u=ma(u)+n,v=f-u,i&&(u-=1,v+=1),c.tooltipPos=b.inverted?[e.len+e.pos-b.plotLeft-r,a.xAxis.len-s-t/2,v]:[s+t/2,r+e.pos-b.plotTop,v],c.shapeType="rect",c.shapeArgs={x:s,y:u,width:t,height:v}})},getSymbol:Ja,drawLegendSymbol:Qb.drawRectangle,drawGraph:Ja,drawPoints:function(){var b,c,d=this,e=this.chart,f=d.options,g=e.renderer,h=f.animationLimit||250;lb(d.points,function(i){var k,l=i.plotY,m=i.graphic;l===K||isNaN(l)||null===i.y?m&&(i.graphic=m.destroy()):(b=i.shapeArgs,k=j(d.borderWidth)?{"stroke-width":d.borderWidth}:{},c=i.pointAttr[i.selected?_a:Za]||d.pointAttr[Za],m?(ub(m),m.attr(k)[e.pointCount<h?"animate":"attr"](a(b))):i.graphic=m=g[i.shapeType](b).attr(k).attr(c).add(d.group).shadow(f.shadow,null,f.stacking&&!f.borderRadius))})},animate:function(a){var b,c=this,d=this.yAxis,e=c.options,f=this.chart.inverted,g={};Ea&&(a?(g.scaleY=.001,b=qa(d.pos+d.len,pa(d.pos,d.toPixels(e.threshold))),f?g.translateX=b-d.len:g.translateY=b,c.group.attr(g)):(g.scaleY=1,g[f?"translateX":"translateY"]=d.pos,c.group.animate(g,c.options.animation),c.animate=null))},remove:function(){var a=this,b=a.chart;b.hasRendered&&lb(b.series,function(b){b.type===a.type&&(b.isDirty=!0)}),Ub.prototype.remove.apply(a,arguments)}});cb.column=$b,vb.bar=a(vb.column);var _b=o($b,{type:"bar",inverted:!0});cb.bar=_b,vb.scatter=a(wb,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var ac=o(Ub,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&Ub.prototype.drawGraph.call(this)}});cb.scatter=ac,vb.pie=a(wb,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var bc=o(Tb,{init:function(){Tb.prototype.init.apply(this,arguments);var a,b=this;return db(b,{visible:b.visible!==!1,name:eb(b.name,"Slice")}),a=function(a){b.slice("select"===a.type)},pb(b,"select",a),pb(b,"unselect",a),b},setVisible:function(a,b){var c=this,d=c.series,e=d.chart,f=d.options.ignoreHiddenPoint;b=eb(b,f),a!==c.visible&&(c.visible=c.options.visible=a=a===K?!c.visible:a,d.options.data[kb(c,d.data)]=c.options,lb(["graphic","dataLabel","connector","shadowGroup"],function(b){c[b]&&c[b][a?"show":"hide"](!0)}),c.legendItem&&e.legend.colorizeItem(c,a),a||"hover"!==c.state||c.setState(""),f&&(d.isDirty=!0),b&&e.redraw())},slice:function(a,b,c){var d,e=this,f=e.series,g=f.chart;D(c,g),b=eb(b,!0),e.sliced=e.options.sliced=a=j(a)?a:!e.sliced,f.options.data[kb(e,f.data)]=e.options,d=a?e.slicedTranslation:{translateX:0,translateY:0},e.graphic.animate(d),e.shadowGroup&&e.shadowGroup.animate(d)},haloPath:function(a){var b=this.shapeArgs,c=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(c.plotLeft+b.x,c.plotTop+b.y,b.r+a,b.r+a,{innerR:this.shapeArgs.r,start:b.start,end:b.end})}}),cc={type:"pie",isCartesian:!1,pointClass:bc,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(a){var b=this,c=b.points,d=b.startAngleRad;a||(lb(c,function(a){var c=a.graphic,e=a.shapeArgs;c&&(c.attr({r:a.startR||b.center[3]/2,start:d,end:d}),c.animate({r:e.r,start:e.start,end:e.end},b.options.animation))}),b.animate=null)},setData:function(a,b,c,d){Ub.prototype.setData.call(this,a,!1,c,d),this.processData(),this.generatePoints(),eb(b,!0)&&this.chart.redraw(c)},updateTotals:function(){var a,b,c=0,d=this.points,e=d.length,f=this.options.ignoreHiddenPoint;for(a=0;e>a;a++)b=d[a],c+=f&&!b.visible?0:b.y;for(this.total=c,a=0;e>a;a++)b=d[a],b.percentage=c>0&&(b.visible||!f)?b.y/c*100:0,b.total=c},generatePoints:function(){Ub.prototype.generatePoints.call(this),this.updateTotals()},translate:function(a){this.generatePoints();var b,c,d,e,f,g,h,i=this,j=0,k=1e3,l=i.options,m=l.slicedOffset,n=m+l.borderWidth,o=l.startAngle||0,p=i.startAngleRad=ua/180*(o-90),q=i.endAngleRad=ua/180*(eb(l.endAngle,o+360)-90),r=q-p,s=i.points,t=l.dataLabels.distance,u=l.ignoreHiddenPoint,v=s.length;for(a||(i.center=a=i.getCenter()),i.getX=function(b,c){return d=la.asin(qa((b-a[1])/(a[2]/2+t),1)),a[0]+(c?-1:1)*(sa(d)*(a[2]/2+t))},g=0;v>g;g++)h=s[g],b=p+j*r,(!u||h.visible)&&(j+=h.percentage/100),c=p+j*r,h.shapeType="arc",h.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:ma(b*k)/k,end:ma(c*k)/k},d=(c+b)/2,d>1.5*ua?d-=2*ua:-ua/2>d&&(d+=2*ua),h.slicedTranslation={translateX:ma(sa(d)*m),translateY:ma(ta(d)*m)},e=sa(d)*a[2]/2,f=ta(d)*a[2]/2,h.tooltipPos=[a[0]+.7*e,a[1]+.7*f],h.half=-ua/2>d||d>ua/2?1:0,h.angle=d,n=qa(n,t/2),h.labelPos=[a[0]+e+sa(d)*t,a[1]+f+ta(d)*t,a[0]+e+sa(d)*n,a[1]+f+ta(d)*n,a[0]+e,a[1]+f,0>t?"center":h.half?"right":"left",d]},drawGraph:null,drawPoints:function(){var a,b,c,d,e,f=this,g=f.chart,h=g.renderer,i=f.options.shadow;i&&!f.shadowGroup&&(f.shadowGroup=h.g("shadow").add(f.group)),lb(f.points,function(g){null!==g.y&&(b=g.graphic,d=g.shapeArgs,c=g.shadowGroup,i&&!c&&(c=g.shadowGroup=h.g("shadow").add(f.shadowGroup)),a=g.sliced?g.slicedTranslation:{translateX:0,translateY:0},c&&c.attr(a),b?b.animate(db(d,a)):(e={"stroke-linejoin":"round"},g.visible||(e.visibility="hidden"),g.graphic=b=h[g.shapeType](d).setRadialReference(f.center).attr(g.pointAttr[g.selected?_a:Za]).attr(e).attr(a).add(f.group).shadow(i,c)))})},searchPoint:Ja,sortByAngle:function(a,b){a.sort(function(a,c){return void 0!==a.angle&&(c.angle-a.angle)*b})},drawLegendSymbol:Qb.drawRectangle,getCenter:Sb.getCenter,getSymbol:Ja};cc=o(Ub,cc),cb.pie=cc,Ub.prototype.drawDataLabels=function(){var b,c,d,e,f=this,g=f.options,h=g.cursor,i=g.dataLabels,k=f.points,l=f.hasRendered||0,m=f.chart.renderer;(i.enabled||f._hasPointLabels)&&(f.dlProcessOptions&&f.dlProcessOptions(i),e=f.plotGroup("dataLabelsGroup","data-labels",i.defer?Ra:Ta,i.zIndex||6),eb(i.defer,!0)&&(e.attr({opacity:+l}),l||pb(f,"afterAnimate",function(){f.visible&&e.show(),e[g.animation?"animate":"attr"]({opacity:1},{duration:200})})),c=i,lb(k,function(k){var l,n,o,p,q,r,s=k.dataLabel,u=k.connector,v=!0,w={};if(b=k.dlOptions||k.options&&k.options.dataLabels,l=eb(b&&b.enabled,c.enabled),s&&!l)k.dataLabel=s.destroy();else if(l){if(i=a(c,b),r=i.style,q=i.rotation,n=k.getLabelConfig(),d=i.format?t(i.format,n):i.formatter.call(n,i),r.color=eb(i.color,r.color,f.color,"black"),s)j(d)?(s.attr({text:d}),v=!1):(k.dataLabel=s=s.destroy(),u&&(k.connector=u.destroy()));else if(j(d)){o={fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth,r:i.borderRadius||0,rotation:q,padding:i.padding,zIndex:1},"contrast"===r.color&&(w.color=i.inside||i.distance<0||g.stacking?m.getContrast(k.color||f.color):"#000000"),h&&(w.cursor=h);for(p in o)o[p]===K&&delete o[p];s=k.dataLabel=m[q?"text":"label"](d,0,-999,i.shape,null,null,i.useHTML).attr(o).css(db(r,w)).add(e).shadow(i.shadow)}s&&f.alignDataLabel(k,s,i,null,v)}}))},Ub.prototype.alignDataLabel=function(a,b,c,d,e){var f,g,h=this.chart,i=h.inverted,j=eb(a.plotX,-999),k=eb(a.plotY,-999),l=b.getBBox(),m=h.renderer.fontMetrics(c.style.fontSize).b,n=this.visible&&(a.series.forceDL||h.isInsidePlot(j,ma(k),i)||d&&h.isInsidePlot(j,i?d.x+1:d.y+d.height-1,i));n&&(d=db({x:i?h.plotWidth-k:j,y:ma(i?h.plotHeight-j:k),width:0,height:0},d),db(c,{width:l.width,height:l.height}),c.rotation?(f=h.renderer.rotCorr(m,c.rotation),b[e?"attr":"animate"]({x:d.x+c.x+d.width/2+f.x,y:d.y+c.y+d.height/2}).attr({align:c.align})):(b.align(c,null,d),g=b.alignAttr,"justify"===eb(c.overflow,"justify")?this.justifyDataLabel(b,c,g,l,d,e):eb(c.crop,!0)&&(n=h.isInsidePlot(g.x,g.y)&&h.isInsidePlot(g.x+l.width,g.y+l.height)),c.shape&&b.attr({anchorX:a.plotX,anchorY:a.plotY}))),n||(b.attr({y:-999}),b.placed=!1)},Ub.prototype.justifyDataLabel=function(a,b,c,d,e,f){var g,h,i=this.chart,j=b.align,k=b.verticalAlign,l=a.box?0:a.padding||0;g=c.x+l,0>g&&("right"===j?b.align="left":b.x=-g,h=!0),g=c.x+d.width-l,g>i.plotWidth&&("left"===j?b.align="right":b.x=i.plotWidth-g,h=!0),g=c.y+l,0>g&&("bottom"===k?b.verticalAlign="top":b.y=-g,h=!0),g=c.y+d.height-l,g>i.plotHeight&&("top"===k?b.verticalAlign="bottom":b.y=i.plotHeight-g,h=!0),h&&(a.placed=!f,a.align(b,null,e))},cb.pie&&(cb.pie.prototype.drawDataLabels=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=n.data,p=n.chart,q=n.options.dataLabels,r=eb(q.connectorPadding,10),s=eb(q.connectorWidth,1),t=p.plotWidth,u=p.plotHeight,v=eb(q.softConnector,!0),w=q.distance,x=n.center,z=x[2]/2,A=x[1],B=w>0,C=[[],[]],D=[0,0,0,0],E=function(a,b){return b.y-a.y};if(n.visible&&(q.enabled||n._hasPointLabels)){for(Ub.prototype.drawDataLabels.apply(n),lb(o,function(a){a.dataLabel&&a.visible&&C[a.half].push(a)}),l=2;l--;){var F,G,H,I,J=[],K=[],L=C[l],M=L.length;if(M){for(n.sortByAngle(L,l-.5),m=g=0;!g&&L[m];)g=L[m]&&L[m].dataLabel&&(L[m].dataLabel.getBBox().height||21),m++;if(w>0){for(H=qa(A+z+w,p.plotHeight),G=pa(0,A-z-w);H>=G;G+=g)J.push(G);if(F=J.length,M>F){for(k=[].concat(L),k.sort(E),m=M;m--;)k[m].rank=m;for(m=M;m--;)L[m].rank>=F&&L.splice(m,1);M=L.length}for(m=0;M>m;m++){a=L[m],f=a.labelPos;var N,O,P=9999;for(O=0;F>O;O++)N=ra(J[O]-f[1]),P>N&&(P=N,I=O);if(m>I&&null!==J[m])I=m;else if(M-m+I>F&&null!==J[m])for(I=F-M+m;null===J[I];)I++;else for(;null===J[I];)I++;K.push({i:I,y:J[I]}),J[I]=null}K.sort(E)}for(m=0;M>m;m++){var Q,R;a=L[m],f=a.labelPos,d=a.dataLabel,j=a.visible===!1?Ra:"inherit",R=f[1],w>0?(Q=K.pop(),I=Q.i,i=Q.y,(R>i&&null!==J[I+1]||i>R&&null!==J[I-1])&&(i=qa(pa(0,R),p.plotHeight))):i=R,h=q.justify?x[0]+(l?-1:1)*(z+w):n.getX(i===A-z-w||i===A+z+w?R:i,l),d._attr={visibility:j,align:f[6]},d._pos={x:h+q.x+({left:r,right:-r}[f[6]]||0),y:i+q.y-10},d.connX=h,d.connY=i,null===this.options.size&&(e=d.width,r>h-e?D[3]=pa(ma(e-h+r),D[3]):h+e>t-r&&(D[1]=pa(ma(h+e-t+r),D[1])),0>i-g/2?D[0]=pa(ma(-i+g/2),D[0]):i+g/2>u&&(D[2]=pa(ma(i+g/2-u),D[2])))}}}(0===y(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),B&&s&&lb(this.points,function(a){b=a.connector,f=a.labelPos,d=a.dataLabel,d&&d._pos&&a.visible?(j=d._attr.visibility,h=d.connX,i=d.connY,c=v?[Wa,h+("left"===f[6]?5:-5),i,"C",h,i,2*f[2]-f[4],2*f[3]-f[5],f[2],f[3],Xa,f[4],f[5]]:[Wa,h+("left"===f[6]?5:-5),i,Xa,f[2],f[3],Xa,f[4],f[5]],b?(b.animate({d:c}),b.attr("visibility",j)):a.connector=b=n.chart.renderer.path(c).attr({"stroke-width":s,stroke:q.connectorColor||a.color||"#606060",visibility:j}).add(n.dataLabelsGroup)):b&&(a.connector=b.destroy())}))}},cb.pie.prototype.placeDataLabels=function(){lb(this.points,function(a){var b,c=a.dataLabel;c&&a.visible&&(b=c._pos,b?(c.attr(c._attr),c[c.moved?"animate":"attr"](b),c.moved=!0):c&&c.attr({y:-999}))})},cb.pie.prototype.alignDataLabel=Ja,
cb.pie.prototype.verifyDataLabelOverflow=function(a){var b,c=this.center,d=this.options,e=d.center,f=d.minSize||80,g=f;return null!==e[0]?g=pa(c[2]-pa(a[1],a[3]),f):(g=pa(c[2]-a[1]-a[3],f),c[0]+=(a[3]-a[1])/2),null!==e[1]?g=pa(qa(g,c[2]-pa(a[0],a[2])),f):(g=pa(qa(g,c[2]-a[0]-a[2]),f),c[1]+=(a[0]-a[2])/2),g<c[2]?(c[2]=g,c[3]=q(d.innerSize||0,g),this.translate(c),lb(this.points,function(a){a.dataLabel&&(a.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):b=!0,b}),cb.column&&(cb.column.prototype.alignDataLabel=function(b,c,d,e,f){var g=this.chart.inverted,h=b.series,i=b.dlBox||b.shapeArgs,j=eb(b.below,b.plotY>eb(this.translatedThreshold,h.yAxis.len)),k=eb(d.inside,!!this.options.stacking);i&&(e=a(i),g&&(e={x:h.yAxis.len-e.y-e.height,y:h.xAxis.len-e.x-e.width,width:e.height,height:e.width}),k||(g?(e.x+=j?0:e.width,e.width=0):(e.y+=j?e.height:0,e.height=0))),d.align=eb(d.align,!g||k?"center":j?"right":"left"),d.verticalAlign=eb(d.verticalAlign,g||k?"middle":j?"top":"bottom"),Ub.prototype.alignDataLabel.call(this,b,c,d,e,f)}),function(a){var b=a.Chart,c=a.each,d=a.pick,e=HighchartsAdapter.addEvent;b.prototype.callbacks.push(function(a){function b(){var b=[];c(a.series,function(a){var e=a.options.dataLabels,f=a.dataLabelCollections||["dataLabel"];(e.enabled||a._hasPointLabels)&&!e.allowOverlap&&a.visible&&c(f,function(e){c(a.points,function(a){a[e]&&(a[e].labelrank=d(a.labelrank,a.shapeArgs&&a.shapeArgs.height),b.push(a[e]))})})}),a.hideOverlappingLabels(b)}b(),e(a,"redraw",b)}),b.prototype.hideOverlappingLabels=function(a){var b,d,e,f,g,h,i,j,k,l=a.length,m=function(a,b,c,d,e,f,g,h){return!(e>a+c||a>e+g||f>b+d||b>f+h)};for(d=0;l>d;d++)b=a[d],b&&(b.oldOpacity=b.opacity,b.newOpacity=1);for(a.sort(function(a,b){return(b.labelrank||0)-(a.labelrank||0)}),d=0;l>d;d++)for(f=a[d],e=d+1;l>e;++e)g=a[e],f&&g&&f.placed&&g.placed&&0!==f.newOpacity&&0!==g.newOpacity&&(i=f.alignAttr,j=g.alignAttr,k=2*(f.box?0:f.padding),h=m(i.x,i.y,f.width-k,f.height-k,j.x,j.y,g.width-k,g.height-k),h&&((f.labelrank<g.labelrank?f:g).newOpacity=0));c(a,function(a){var b,c;a&&(c=a.newOpacity,a.oldOpacity!==c&&a.placed&&(c?a.show(!0):b=function(){a.hide()},a.alignAttr.opacity=c,a[a.isOld?"animate":"attr"](a.alignAttr,null,b)),a.isOld=!0)})}}(ia);var dc=ia.TrackerMixin={drawTrackerPoint:function(){var a=this,b=a.chart,c=b.pointer,d=a.options.cursor,e=d&&{cursor:d},f=function(a){for(var c,d=a.target;d&&!c;)c=d.point,d=d.parentNode;c!==K&&c!==b.hoverPoint&&c.onMouseOver(a)};lb(a.points,function(a){a.graphic&&(a.graphic.element.point=a),a.dataLabel&&(a.dataLabel.element.point=a)}),a._hasTracking||(lb(a.trackerGroups,function(b){a[b]&&(a[b].addClass(Sa+"tracker").on("mouseover",f).on("mouseout",function(a){c.onTrackerMouseOut(a)}).css(e),M&&a[b].on("touchstart",f))}),a._hasTracking=!0)},drawTrackerGraph:function(){var a,b,c=this,d=c.options,e=d.trackByArea,f=[].concat(e?c.areaPath:c.graphPath),g=f.length,h=c.chart,i=h.pointer,j=h.renderer,k=h.options.tooltip.snap,l=c.tracker,m=d.cursor,n=m&&{cursor:m},o=c.singlePoints,p=function(){h.hoverSeries!==c&&c.onMouseOver()},q="rgba(192,192,192,"+(Ea?1e-4:.002)+")";if(g&&!e)for(b=g+1;b--;)f[b]===Wa&&f.splice(b+1,0,f[b+1]-k,f[b+2],Xa),(b&&f[b]===Wa||b===g)&&f.splice(b,0,Xa,f[b-2]+k,f[b-1]);for(b=0;b<o.length;b++)a=o[b],f.push(Wa,a.plotX-k,a.plotY,Xa,a.plotX+k,a.plotY);l?l.attr({d:f}):(c.tracker=j.path(f).attr({"stroke-linejoin":"round",visibility:c.visible?Ta:Ra,stroke:q,fill:e?q:Va,"stroke-width":d.lineWidth+(e?0:2*k),zIndex:2}).add(c.group),lb([c.tracker,c.markerGroup],function(a){a.addClass(Sa+"tracker").on("mouseover",p).on("mouseout",function(a){i.onTrackerMouseOut(a)}).css(n),M&&a.on("touchstart",p)}))}};cb.column&&($b.prototype.drawTracker=dc.drawTrackerPoint),cb.pie&&(cb.pie.prototype.drawTracker=dc.drawTrackerPoint),cb.scatter&&(ac.prototype.drawTracker=dc.drawTrackerPoint),db(Pb.prototype,{setItemEvents:function(a,b,c,d,e){var f=this;(c?b:a.legendGroup).on("mouseover",function(){a.setState($a),b.css(f.options.itemHoverStyle)}).on("mouseout",function(){b.css(a.visible?d:e),a.setState()}).on("click",function(b){var c="legendItemClick",d=function(){a.setVisible()};b={browserEvent:b},a.firePointEvent?a.firePointEvent(c,b,d):rb(a,c,b,d)})},createCheckboxForItem:function(a){var b=this;a.checkbox=n("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},b.options.itemCheckboxStyle,b.chart.container),pb(a.checkbox,"click",function(b){var c=b.target;rb(a.series||a,"checkboxClick",{checked:c.checked,item:a},function(){a.select()})})}}),O.legend.itemStyle.cursor="pointer",db(Rb.prototype,{showResetZoom:function(){var a=this,b=O.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f="chart"===c.relativeTo?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=this;rb(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,c,e=this,f=e.pointer,g=!1;!a||a.resetSelection?lb(e.axes,function(a){b=a.zoom()}):lb(a.xAxis.concat(a.yAxis),function(a){var c=a.axis,d=c.isXAxis;(f[d?"zoomX":"zoomY"]||f[d?"pinchX":"pinchY"])&&(b=c.zoom(a.min,a.max),c.displayBtn&&(g=!0))}),c=e.resetZoomButton,g&&!c?e.showResetZoom():!g&&d(c)&&(e.resetZoomButton=c.destroy()),b&&e.redraw(eb(e.options.chart.animation,a&&a.animation,e.pointCount<100))},pan:function(a,b){var c,d=this,e=d.hoverPoints;e&&lb(e,function(a){a.setState()}),lb("xy"===b?[1,0]:[1],function(b){var e=a[b?"chartX":"chartY"],f=d[b?"xAxis":"yAxis"][0],g=d[b?"mouseDownX":"mouseDownY"],h=(f.pointRange||0)/2,i=f.getExtremes(),j=f.toValue(g-e,!0)+h,k=f.toValue(g+d[b?"plotWidth":"plotHeight"]-e,!0)-h,l=g>e;f.series.length&&(l||j>qa(i.dataMin,i.min))&&(!l||k<pa(i.dataMax,i.max))&&(f.setExtremes(j,k,!1,!1,{trigger:"pan"}),c=!0),d[b?"mouseDownX":"mouseDownY"]=e}),c&&d.redraw(!1),m(d.container,{cursor:"move"})}}),db(Tb.prototype,{select:function(a,b){var c=this,d=c.series,e=d.chart;a=eb(a,!c.selected),c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=c.options.selected=a,d.options.data[kb(c,d.data)]=c.options,c.setState(a&&_a),b||lb(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=a.options.selected=!1,d.options.data[kb(a,d.data)]=a.options,a.setState(Za),a.firePointEvent("unselect"))})})},onMouseOver:function(a,b){var c=this,d=c.series,e=d.chart,f=e.tooltip,g=e.hoverPoint;e.hoverSeries!==d&&d.onMouseOver(),g&&g!==c&&g.onMouseOut(),c.series&&(c.firePointEvent("mouseOver"),!f||f.shared&&!d.noSharedTooltip||f.refresh(c,a),c.setState($a),b||(e.hoverPoint=c))},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;this.firePointEvent("mouseOut"),b&&-1!==kb(this,b)||(this.setState(),a.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var b,c=this,d=a(c.series.options.point,c.options),e=d.events;c.events=e;for(b in e)pb(c,b,e[b]);this.hasImportedEvents=!0}},setState:function(b,c){var d,e,f,g,h=this,i=h.plotX,j=h.plotY,k=h.series,l=k.options.states,m=vb[k.type].marker&&k.options.marker,n=m&&!m.enabled,o=m&&m.states[b],p=o&&o.enabled===!1,q=k.stateMarkerGraphic,r=h.marker||{},s=k.chart,t=k.halo;b=b||Za,g=h.pointAttr[b]||k.pointAttr[b],b===h.state&&!c||h.selected&&b!==_a||l[b]&&l[b].enabled===!1||b&&(p||n&&o.enabled===!1)||b&&r.states&&r.states[b]&&r.states[b].enabled===!1||(h.graphic?(d=m&&h.graphic.symbolName&&g.r,h.graphic.attr(a(g,d?{x:i-d,y:j-d,width:2*d,height:2*d}:{})),q&&q.hide()):(b&&o&&(d=o.radius,f=r.symbol||k.symbol,q&&q.currentSymbol!==f&&(q=q.destroy()),q?q[c?"animate":"attr"]({x:i-d,y:j-d}):f&&(k.stateMarkerGraphic=q=s.renderer.symbol(f,i-d,j-d,2*d,2*d).attr(g).add(k.markerGroup),q.currentSymbol=f)),q&&(q[b&&s.isInsidePlot(i,j,s.inverted)?"show":"hide"](),q.element.point=h)),e=l[b]&&l[b].halo,e&&e.size?(t||(k.halo=t=s.renderer.path().add(s.seriesGroup)),t.attr(db({fill:Ab(h.color||k.color).setOpacity(e.opacity).get()},e.attributes))[c?"animate":"attr"]({d:h.haloPath(e.size)})):t&&t.attr({d:[]}),h.state=b)},haloPath:function(a){var b=this.series,c=b.chart,d=b.getPlotBox(),e=c.inverted;return c.renderer.symbols.circle(d.translateX+(e?b.yAxis.len-this.plotY:this.plotX)-a,d.translateY+(e?b.xAxis.len-this.plotX:this.plotY)-a,2*a,2*a)}}),db(Ub.prototype,{onMouseOver:function(){var a=this,b=a.chart,c=b.hoverSeries;c&&c!==a&&c.onMouseOut(),a.options.events.mouseOver&&rb(a,"mouseOver"),a.setState($a),b.hoverSeries=a},onMouseOut:function(){var a=this,b=a.options,c=a.chart,d=c.tooltip,e=c.hoverPoint;c.hoverSeries=null,e&&e.onMouseOut(),a&&b.events.mouseOut&&rb(a,"mouseOut"),!d||b.stickyTracking||d.shared&&!a.noSharedTooltip||d.hide(),a.setState()},setState:function(a){var b,c=this,d=c.options,e=c.graph,f=d.states,g=d.lineWidth,h=0;if(a=a||Za,c.state!==a){if(c.state=a,f[a]&&f[a].enabled===!1)return;if(a&&(g=f[a].lineWidth||g+(f[a].lineWidthPlus||0)),e&&!e.dashstyle)for(b={"stroke-width":g},e.attr(b);c["zoneGraph"+h];)c["zoneGraph"+h].attr(b),h+=1}},setVisible:function(a,b){var c,d=this,e=d.chart,f=d.legendItem,g=e.options.chart.ignoreHiddenSeries,h=d.visible;d.visible=a=d.userOptions.visible=a===K?!h:a,c=a?"show":"hide",lb(["group","dataLabelsGroup","markerGroup","tracker"],function(a){d[a]&&d[a][c]()}),(e.hoverSeries===d||(e.hoverPoint&&e.hoverPoint.series)===d)&&d.onMouseOut(),f&&e.legend.colorizeItem(d,a),d.isDirty=!0,d.options.stacking&&lb(e.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)}),lb(d.linkedSeries,function(b){b.setVisible(a,!1)}),g&&(e.isDirtyBox=!0),b!==!1&&e.redraw(),rb(d,c)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){var b=this;b.selected=a=a===K?!b.selected:a,b.checkbox&&(b.checkbox.checked=a),rb(b,a?"select":"unselect")},drawTracker:dc.drawTrackerGraph}),db(ia,{Color:Ab,Point:Tb,Tick:I,Renderer:L,SVGElement:H,SVGRenderer:Bb,arrayMin:x,arrayMax:y,charts:Ka,dateFormat:P,error:B,format:t,pathAnim:Q,getOptions:G,hasBidiBug:Fa,isTouchDevice:Ca,setOptions:F,addEvent:pb,removeEvent:qb,createElement:n,discardElement:A,css:m,each:lb,map:ob,merge:a,splat:l,extendClass:o,pInt:b,svg:Ea,canvas:Ga,vml:!Ea&&!Ga,product:Ma,version:Na})}(),function(a,b){function c(a,b,c){this.init.call(this,a,b,c)}var d=a.arrayMin,e=a.arrayMax,f=a.each,g=a.extend,h=a.merge,i=a.map,j=a.pick,k=a.pInt,l=a.getOptions().plotOptions,m=a.seriesTypes,n=a.extendClass,o=a.splat,p=a.wrap,q=a.Axis,r=a.Tick,s=a.Point,t=a.Pointer,u=a.CenteredSeriesMixin,v=a.TrackerMixin,w=a.Series,x=Math,y=x.round,z=x.floor,A=x.max,B=a.Color,C=function(){};g(c.prototype,{init:function(a,b,c){var d,e=this,g=e.defaultOptions;e.chart=b,e.options=a=h(g,b.angular?{background:{}}:void 0,a),d=a.background,d&&f([].concat(o(d)).reverse(),function(a){var b=a.backgroundColor,d=c.userOptions;a=h(e.defaultBackgroundOptions,a),b&&(a.backgroundColor=b),a.color=a.backgroundColor,c.options.plotBands.unshift(a),d.plotBands=d.plotBands||[],d.plotBands.unshift(a)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var D=q.prototype,E=r.prototype,F={getOffset:C,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:C,setCategories:C,setTitle:C},G={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(a){var b=this.options=h(this.defaultOptions,this.defaultRadialOptions,a);b.plotBands||(b.plotBands=[])},getOffset:function(){D.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=u.getCenter.call(this.pane)},getLinePath:function(a,b){var c=this.center;return b=j(b,c[2]/2-this.offset),this.chart.renderer.symbols.arc(this.left+c[0],this.top+c[1],b,b,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){D.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=this.center[2]/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){D.setAxisSize.call(this),this.isRadial&&(this.center=this.pane.center=a.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*j(this.sector,1)/2)},getPosition:function(a,b){return this.postTranslate(this.isCircular?this.translate(a):0,j(this.isCircular?b:this.translate(a),this.center[2]/2)-this.offset)},postTranslate:function(a,b){var c=this.chart,d=this.center;return a=this.startAngleRad+a,{x:c.plotLeft+d[0]+Math.cos(a)*b,y:c.plotTop+d[1]+Math.sin(a)*b}},getPlotBandPath:function(a,b,c){var d,e,f,g,h=this.center,l=this.startAngleRad,m=h[2]/2,n=[j(c.outerRadius,"100%"),c.innerRadius,j(c.thickness,10)],o=/%$/,p=this.isCircular;return"polygon"===this.options.gridLineInterpolation?g=this.getPlotLinePath(a).concat(this.getPlotLinePath(b,!0)):(a=Math.max(a,this.min),b=Math.min(b,this.max),p||(n[0]=this.translate(a),n[1]=this.translate(b)),n=i(n,function(a){return o.test(a)&&(a=k(a,10)*m/100),a}),"circle"!==c.shape&&p?(d=l+this.translate(a),e=l+this.translate(b)):(d=-Math.PI/2,e=1.5*Math.PI,f=!0),g=this.chart.renderer.symbols.arc(this.left+h[0],this.top+h[1],n[0],n[0],{start:Math.min(d,e),end:Math.max(d,e),innerR:j(n[1],n[0]-n[2]),open:f})),g},getPlotLinePath:function(a,b){var c,d,e,g,h=this,i=h.center,j=h.chart,k=h.getPosition(a);return h.isCircular?g=["M",i[0]+j.plotLeft,i[1]+j.plotTop,"L",k.x,k.y]:"circle"===h.options.gridLineInterpolation?(a=h.translate(a),a&&(g=h.getLinePath(0,a))):(f(j.xAxis,function(a){a.pane===h.pane&&(c=a)}),g=[],a=h.translate(a),e=c.tickPositions,c.autoConnect&&(e=e.concat([e[0]])),b&&(e=[].concat(e).reverse()),f(e,function(b,e){d=c.getPosition(b,a),g.push(e?"L":"M",d.x,d.y)})),g},getTitlePosition:function(){var a=this.center,b=this.chart,c=this.options.title;return{x:b.plotLeft+a[0]+(c.x||0),y:b.plotTop+a[1]-{high:.5,middle:.25,low:0}[c.align]*a[2]+(c.y||0)}}};p(D,"init",function(a,d,e){var f,i,k,l,m,n,p=this,q=d.angular,r=d.polar,s=e.isX,t=q&&s,u=d.options,v=e.pane||0;q?(g(this,t?F:G),f=!s,f&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):r&&(g(this,G),f=s,this.defaultRadialOptions=s?this.defaultRadialXOptions:h(this.defaultYAxisOptions,this.defaultRadialYOptions)),a.call(this,d,e),t||!q&&!r||(l=this.options,d.panes||(d.panes=[]),this.pane=m=d.panes[v]=d.panes[v]||new c(o(u.pane)[v],d,p),n=m.options,d.inverted=!1,u.chart.zoomType=null,this.startAngleRad=i=(n.startAngle-90)*Math.PI/180,this.endAngleRad=k=(j(n.endAngle,n.startAngle+360)-90)*Math.PI/180,this.offset=l.offset||0,this.isCircular=f,f&&e.max===b&&k-i===2*Math.PI&&(this.autoConnect=!0))}),p(E,"getPosition",function(a,b,c,d,e){var f=this.axis;return f.getPosition?f.getPosition(c):a.call(this,b,c,d,e)}),p(E,"getLabelPosition",function(a,b,c,d,e,f,g,h,i){var k,l=this.axis,m=f.y,n=20,o=f.align,p=(l.translate(this.pos)+l.startAngleRad+Math.PI/2)/Math.PI*180%360;return l.isRadial?(k=l.getPosition(this.pos,l.center[2]/2+j(f.distance,-25)),"auto"===f.rotation?d.attr({rotation:p}):null===m&&(m=l.chart.renderer.fontMetrics(d.styles.fontSize).b-d.getBBox().height/2),null===o&&(l.isCircular?(this.label.getBBox().width>l.len*l.tickInterval/(l.max-l.min)&&(n=0),o=p>n&&180-n>p?"left":p>180+n&&360-n>p?"right":"center"):o="center",d.attr({align:o})),k.x+=f.x,k.y+=m):k=a.call(this,b,c,d,e,f,g,h,i),k}),p(E,"getMarkPath",function(a,b,c,d,e,f,g){var h,i,j=this.axis;return j.isRadial?(h=j.getPosition(this.pos,j.center[2]/2+d),i=["M",b,c,"L",h.x,h.y]):i=a.call(this,b,c,d,e,f,g),i}),l.arearange=h(l.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}}),m.arearange=n(m.area,{type:"arearange",pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(a){return[a.low,a.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(a){var b=this.chart,c=this.xAxis.postTranslate(a.rectPlotX,this.yAxis.len-a.plotHigh);a.plotHighX=c.x-b.plotLeft,a.plotHigh=c.y-b.plotTop},getSegments:function(){var a=this;f(a.points,function(b){a.options.connectNulls||null!==b.low&&null!==b.high?null===b.low&&null!==b.high&&(b.y=b.high):b.y=null}),w.prototype.getSegments.call(this)},translate:function(){var a=this,b=a.yAxis;m.area.prototype.translate.apply(a),f(a.points,function(a){var c=a.low,d=a.high,e=a.plotY;null===d&&null===c?a.y=null:null===c?(a.plotLow=a.plotY=null,a.plotHigh=b.translate(d,0,1,0,1)):null===d?(a.plotLow=e,a.plotHigh=null):(a.plotLow=e,a.plotHigh=b.translate(d,0,1,0,1))}),this.chart.polar&&f(this.points,function(b){a.highToXY(b)})},getSegmentPath:function(a){var b,c,d,e,f,g=[],h=a.length,i=w.prototype.getSegmentPath,j=this.options,k=j.step;for(b=HighchartsAdapter.grep(a,function(a){return null!==a.plotLow});h--;)c=a[h],null!==c.plotHigh&&g.push({plotX:c.plotHighX||c.plotX,plotY:c.plotHigh});return e=i.call(this,b),k&&(k===!0&&(k="left"),j.step={left:"right",center:"center",right:"left"}[k]),f=i.call(this,g),j.step=k,d=[].concat(e,f),this.chart.polar||(f[0]="L"),this.areaPath=this.areaPath.concat(e,f),d},drawDataLabels:function(){var a,b,c,d=this.data,e=d.length,f=[],g=w.prototype,h=this.options.dataLabels,i=h.align,j=this.chart.inverted;if(h.enabled||this._hasPointLabels){for(a=e;a--;)b=d[a],b&&(c=b.plotHigh>b.plotLow,b.y=b.high,b._plotY=b.plotY,b.plotY=b.plotHigh,f[a]=b.dataLabel,b.dataLabel=b.dataLabelUpper,b.below=c,j?(i||(h.align=c?"right":"left"),h.x=h.xHigh):h.y=h.yHigh);for(g.drawDataLabels&&g.drawDataLabels.apply(this,arguments),a=e;a--;)b=d[a],b&&(c=b.plotHigh>b.plotLow,b.dataLabelUpper=b.dataLabel,b.dataLabel=f[a],b.y=b.low,b.plotY=b._plotY,b.below=!c,j?(i||(h.align=c?"left":"right"),h.x=h.xLow):h.y=h.yLow);g.drawDataLabels&&g.drawDataLabels.apply(this,arguments)}h.align=i},alignDataLabel:function(){m.column.prototype.alignDataLabel.apply(this,arguments)},setStackedPoints:C,getSymbol:C,drawPoints:C}),l.areasplinerange=h(l.arearange),m.areasplinerange=n(m.arearange,{type:"areasplinerange",getPointSpline:m.spline.prototype.getPointSpline}),function(){var a=m.column.prototype;l.columnrange=h(l.column,l.arearange,{lineWidth:1,pointRange:null}),m.columnrange=n(m.arearange,{type:"columnrange",translate:function(){var b,c=this,d=c.yAxis;a.translate.apply(c),f(c.points,function(a){var e,f,g,h=a.shapeArgs,i=c.options.minPointLength;a.tooltipPos=null,a.plotHigh=b=d.translate(a.high,0,1,0,1),a.plotLow=a.plotY,g=b,f=a.plotY-b,Math.abs(f)<i?(e=i-f,f+=e,g-=e/2):0>f&&(f*=-1,g-=f),h.height=f,h.y=g})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:C,pointAttrToOptions:a.pointAttrToOptions,drawPoints:a.drawPoints,drawTracker:a.drawTracker,animate:a.animate,getColumnMetrics:a.getColumnMetrics})}(),l.gauge=h(l.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1});var H=n(s,{setState:function(a){this.state=a}}),I={type:"gauge",pointClass:H,angular:!0,drawGraph:C,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var a=this,b=a.yAxis,c=a.options,d=b.center;a.generatePoints(),f(a.points,function(a){var e=h(c.dial,a.dial),f=k(j(e.radius,80))*d[2]/200,g=k(j(e.baseLength,70))*f/100,i=k(j(e.rearLength,10))*f/100,l=e.baseWidth||3,m=e.topWidth||1,n=c.overshoot,o=b.startAngleRad+b.translate(a.y,null,null,null,!0);n&&"number"==typeof n?(n=n/180*Math.PI,o=Math.max(b.startAngleRad-n,Math.min(b.endAngleRad+n,o))):c.wrap===!1&&(o=Math.max(b.startAngleRad,Math.min(b.endAngleRad,o))),o=180*o/Math.PI,a.shapeType="path",a.shapeArgs={d:e.path||["M",-i,-l/2,"L",g,-l/2,f,-m/2,f,m/2,g,l/2,-i,l/2,"z"],translateX:d[0],translateY:d[1],rotation:o},a.plotX=d[0],a.plotY=d[1]})},drawPoints:function(){var a=this,b=a.yAxis.center,c=a.pivot,d=a.options,e=d.pivot,g=a.chart.renderer;f(a.points,function(b){var c=b.graphic,e=b.shapeArgs,f=e.d,i=h(d.dial,b.dial);c?(c.animate(e),e.d=f):b.graphic=g[b.shapeType](e).attr({stroke:i.borderColor||"none","stroke-width":i.borderWidth||0,fill:i.backgroundColor||"black",rotation:e.rotation}).add(a.group)}),c?c.animate({translateX:b[0],translateY:b[1]}):a.pivot=g.circle(0,0,j(e.radius,5)).attr({"stroke-width":e.borderWidth||0,stroke:e.borderColor||"silver",fill:e.backgroundColor||"black"}).translate(b[0],b[1]).add(a.group)},animate:function(a){var b=this;a||(f(b.points,function(a){var c=a.graphic;c&&(c.attr({rotation:180*b.yAxis.startAngleRad/Math.PI}),c.animate({rotation:a.shapeArgs.rotation},b.options.animation))}),b.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),w.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(a,b){w.prototype.setData.call(this,a,!1),this.processData(),this.generatePoints(),j(b,!0)&&this.chart.redraw()},drawTracker:v&&v.drawTrackerPoint};m.gauge=n(m.line,I),l.boxplot=h(l.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2}),m.boxplot=n(m.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(a){return[a.low,a.q1,a.median,a.q3,a.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:C,translate:function(){var a=this,b=a.yAxis,c=a.pointArrayMap;m.column.prototype.translate.apply(a),f(a.points,function(a){f(c,function(c){null!==a[c]&&(a[c+"Plot"]=b.translate(a[c],0,1,0,1))})})},drawPoints:function(){var a,c,d,e,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,A,B=this,C=B.points,D=B.options,E=B.chart,F=E.renderer,G=B.doQuartiles!==!1,H=parseInt(B.options.whiskerLength,10)/100;f(C,function(f){l=f.graphic,x=f.shapeArgs,n={},q={},s={},A=f.color||B.color,f.plotY!==b&&(a=f.pointAttr[f.selected?"selected":""],t=x.width,u=z(x.x),v=u+t,w=y(t/2),c=z(G?f.q1Plot:f.lowPlot),d=z(G?f.q3Plot:f.lowPlot),e=z(f.highPlot),g=z(f.lowPlot),n.stroke=f.stemColor||D.stemColor||A,n["stroke-width"]=j(f.stemWidth,D.stemWidth,D.lineWidth),n.dashstyle=f.stemDashStyle||D.stemDashStyle,q.stroke=f.whiskerColor||D.whiskerColor||A,q["stroke-width"]=j(f.whiskerWidth,D.whiskerWidth,D.lineWidth),s.stroke=f.medianColor||D.medianColor||A,s["stroke-width"]=j(f.medianWidth,D.medianWidth,D.lineWidth),i=n["stroke-width"]%2/2,k=u+w+i,m=["M",k,d,"L",k,e,"M",k,c,"L",k,g],G&&(i=a["stroke-width"]%2/2,k=z(k)+i,c=z(c)+i,d=z(d)+i,u+=i,v+=i,o=["M",u,d,"L",u,c,"L",v,c,"L",v,d,"L",u,d,"z"]),H&&(i=q["stroke-width"]%2/2,e+=i,g+=i,p=["M",k-w*H,e,"L",k+w*H,e,"M",k-w*H,g,"L",k+w*H,g]),i=s["stroke-width"]%2/2,h=y(f.medianPlot)+i,r=["M",u,h,"L",v,h],l?(f.stem.animate({d:m}),H&&f.whiskers.animate({d:p}),G&&f.box.animate({d:o}),f.medianShape.animate({d:r})):(f.graphic=l=F.g().add(B.group),f.stem=F.path(m).attr(n).add(l),H&&(f.whiskers=F.path(p).attr(q).add(l)),G&&(f.box=F.path(o).attr(a).add(l)),f.medianShape=F.path(r).attr(s).add(l)))})},setStackedPoints:C}),l.errorbar=h(l.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),m.errorbar=n(m.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(a){return[a.low,a.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:m.arearange?m.arearange.prototype.drawDataLabels:C,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||m.column.prototype.getColumnMetrics.call(this)}}),l.waterfall=h(l.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",dataLabels:{inside:!0},states:{hover:{lineWidthPlus:0}}}),m.waterfall=n(m.column,{type:"waterfall",upColorProp:"fill",pointValKey:"y",translate:function(){var a,b,c,d,e,f,g,h,i,j,k,l,n=this,o=n.options,p=n.yAxis,q=o.threshold,r=o.stacking;for(m.column.prototype.translate.apply(this),i=j=q,c=n.points,b=0,a=c.length;a>b;b++)d=c[b],h=this.processedYData[b],e=d.shapeArgs,f=r&&p.stacks[(n.negStacks&&q>h?"-":"")+n.stackKey],k=f?f[d.x].points[n.index+","+b]:[0,h],d.isSum?d.y=h:d.isIntermediateSum&&(d.y=h-j),g=A(i,i+d.y)+k[0],e.y=p.translate(g,0,1),d.isSum?(e.y=p.translate(k[1],0,1),e.height=Math.min(p.translate(k[0],0,1),p.len)-e.y):d.isIntermediateSum?(e.y=p.translate(k[1],0,1),e.height=Math.min(p.translate(j,0,1),p.len)-e.y,j=k[1]):(0!==i&&(e.height=h>0?p.translate(i,0,1)-e.y:p.translate(i,0,1)-p.translate(i-h,0,1)),i+=h),e.height<0&&(e.y+=e.height,e.height*=-1),d.plotY=e.y=y(e.y)-n.borderWidth%2/2,e.height=A(y(e.height),.001),d.yBottom=e.y+e.height,l=d.plotY+(d.negative?e.height:0),n.chart.inverted?d.tooltipPos[0]=p.len-l:d.tooltipPos[1]=l},processData:function(a){var b,c,d,e,f,g,h,i=this,j=i.options,k=i.yData,l=i.options.data,m=k.length,n=j.threshold||0;for(d=c=e=f=n,h=0;m>h;h++)g=k[h],b=l&&l[h]?l[h]:{},"sum"===g||b.isSum?k[h]=d:"intermediateSum"===g||b.isIntermediateSum?k[h]=c:(d+=g,c+=g),e=Math.min(d,e),f=Math.max(d,f);w.prototype.processData.call(this,a),i.dataMin=e,i.dataMax=f},toYData:function(a){return a.isSum?0===a.x?null:"sum":a.isIntermediateSum?0===a.x?null:"intermediateSum":a.y},getAttribs:function(){m.column.prototype.getAttribs.apply(this,arguments);var b=this,c=b.options,d=c.states,e=c.upColor||b.color,g=a.Color(e).brighten(.1).get(),i=h(b.pointAttr),j=b.upColorProp;i[""][j]=e,i.hover[j]=d.hover.upColor||g,i.select[j]=d.select.upColor||e,f(b.points,function(a){a.options.color||(a.y>0?(a.pointAttr=i,a.color=e):a.pointAttr=b.pointAttr)})},getGraphPath:function(){var a,b,c,d,e=this.data,f=e.length,g=this.options.lineWidth+this.borderWidth,h=y(g)%2/2,i=[],j="M",k="L";for(c=1;f>c;c++)b=e[c].shapeArgs,a=e[c-1].shapeArgs,d=[j,a.x+a.width,a.y+h,k,b.x,a.y+h],e[c-1].y<0&&(d[2]+=a.height,d[5]+=a.height),i=i.concat(d);return i},getExtremes:C,drawGraph:w.prototype.drawGraph}),l.polygon=h(l.scatter,{marker:{enabled:!1}}),m.polygon=n(m.scatter,{type:"polygon",fillGraph:!0,getSegmentPath:function(a){return w.prototype.getSegmentPath.call(this,a).concat("z")},drawGraph:w.prototype.drawGraph,drawLegendSymbol:a.LegendSymbolMixin.drawRectangle}),l.bubble=h(l.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"});var J=n(s,{haloPath:function(){return s.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)},ttBelow:!1});m.bubble=n(m.scatter,{type:"bubble",pointClass:J,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,zoneAxis:"z",pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(a){var b=this.options.marker,c=j(b.fillOpacity,.5);return a=a||b.fillColor||this.color,1!==c&&(a=B(a).setOpacity(c).get("rgba")),a},convertAttribs:function(){var a=w.prototype.convertAttribs.apply(this,arguments);return a.fill=this.applyOpacity(a.fill),a},getRadii:function(a,b,c,d){var e,f,g,h=this.zData,i=[],j="width"!==this.options.sizeBy,k=b-a;for(f=0,e=h.length;e>f;f++)h[f]<a?i.push(c/2-1):(g=k>0?(h[f]-a)/k:.5,j&&g>=0&&(g=Math.sqrt(g)),i.push(x.ceil(c+g*(d-c))/2));this.radii=i},animate:function(a){var b=this.options.animation;a||(f(this.points,function(a){var c=a.graphic,d=a.shapeArgs;c&&d&&(c.attr("r",1),c.animate({r:d.r},b))}),this.animate=null)},translate:function(){var a,c,d,e=this.data,f=this.radii;for(m.scatter.prototype.translate.call(this),a=e.length;a--;)c=e[a],d=f?f[a]:0,d>=this.minPxSize/2?(c.shapeType="circle",c.shapeArgs={x:c.plotX,y:c.plotY,r:d},c.dlBox={x:c.plotX-d,y:c.plotY-d,width:2*d,height:2*d}):c.shapeArgs=c.plotY=c.dlBox=b},drawLegendSymbol:function(a,b){var c=k(a.itemStyle.fontSize)/2;b.legendSymbol=this.chart.renderer.circle(c,a.baseline-c,c).attr({zIndex:3}).add(b.legendGroup),b.legendSymbol.isMarker=!0},drawPoints:m.column.prototype.drawPoints,alignDataLabel:m.column.prototype.alignDataLabel,buildKDTree:C,applyZones:C}),q.prototype.beforePadding=function(){var a=this,c=this.len,g=this.chart,h=0,i=c,l=this.isXAxis,m=l?"xData":"yData",n=this.min,o={},p=x.min(g.plotWidth,g.plotHeight),q=Number.MAX_VALUE,r=-Number.MAX_VALUE,s=this.max-n,t=c/s,u=[];f(this.series,function(b){var c,h=b.options;!b.bubblePadding||!b.visible&&g.options.chart.ignoreHiddenSeries||(a.allowZoomOutside=!0,u.push(b),l&&(f(["minSize","maxSize"],function(a){var b=h[a],c=/%$/.test(b);b=k(b),o[a]=c?p*b/100:b}),b.minPxSize=o.minSize,b.maxPxSize=o.maxSize,c=b.zData,c.length&&(q=j(h.zMin,x.min(q,x.max(d(c),h.displayNegative===!1?h.zThreshold:-Number.MAX_VALUE))),r=j(h.zMax,x.max(r,e(c))))))}),f(u,function(a){var b,c=a[m],d=c.length;if(l&&a.getRadii(q,r,a.minPxSize,a.maxPxSize),s>0)for(;d--;)"number"==typeof c[d]&&(b=a.radii[d],h=Math.min((c[d]-n)*t-b,h),i=Math.max((c[d]-n)*t+b,i))}),u.length&&s>0&&!this.isLog&&(i-=c,t*=(c+h-i)/c,f([["min","userMin",h],["max","userMax",i]],function(c){j(a.options[c[0]],a[c[1]])===b&&(a[c[0]]+=c[2]/t)}))},function(){function a(a,b,c){a.call(this,b,c),this.chart.polar&&(this.closeSegment=function(a){var b=this.xAxis.center;a.push("L",b[0],b[1])},this.closedStacks=!0)}function b(a,b){var c,d=this.chart,e=this.options.animation,f=this.group,g=this.markerGroup,h=this.xAxis.center,i=d.plotLeft,j=d.plotTop;d.polar?d.renderer.isSVG&&(e===!0&&(e={}),b?(c={translateX:h[0]+i,translateY:h[1]+j,scaleX:.001,scaleY:.001},f.attr(c),g&&g.attr(c)):(c={translateX:i,translateY:j,scaleX:1,scaleY:1},f.animate(c,e),g&&g.animate(c,e),this.animate=null)):a.call(this,b)}var c,d=w.prototype,e=t.prototype;d.searchPointByAngle=function(a){var b=this,c=b.chart,d=b.xAxis,e=d.pane.center,f=a.chartX-e[0]-c.plotLeft,g=a.chartY-e[1]-c.plotTop;return this.searchKDTree({clientX:180+Math.atan2(f,g)*(-180/Math.PI)})},p(d,"buildKDTree",function(a){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.kdDimensions=2),a.apply(this)}),d.toXY=function(a){var b,c,d=this.chart,e=a.plotX,f=a.plotY;a.rectPlotX=e,a.rectPlotY=f,b=this.xAxis.postTranslate(a.plotX,this.yAxis.len-f),a.plotX=a.polarPlotX=b.x-d.plotLeft,a.plotY=a.polarPlotY=b.y-d.plotTop,this.kdByAngle?(c=(e/Math.PI*180+this.xAxis.pane.options.startAngle)%360,0>c&&(c+=360),a.clientX=c):a.clientX=a.plotX},m.area&&p(m.area.prototype,"init",a),m.areaspline&&p(m.areaspline.prototype,"init",a),m.spline&&p(m.spline.prototype,"getPointSpline",function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=1.5,x=w+1;return this.chart.polar?(f=c.plotX,g=c.plotY,h=b[d-1],i=b[d+1],this.connectEnds&&(h||(h=b[b.length-2]),
i||(i=b[1])),h&&i&&(j=h.plotX,k=h.plotY,l=i.plotX,m=i.plotY,n=(w*f+j)/x,o=(w*g+k)/x,p=(w*f+l)/x,q=(w*g+m)/x,r=Math.sqrt(Math.pow(n-f,2)+Math.pow(o-g,2)),s=Math.sqrt(Math.pow(p-f,2)+Math.pow(q-g,2)),t=Math.atan2(o-g,n-f),u=Math.atan2(q-g,p-f),v=Math.PI/2+(t+u)/2,Math.abs(t-v)>Math.PI/2&&(v-=Math.PI),n=f+Math.cos(v)*r,o=g+Math.sin(v)*r,p=f+Math.cos(Math.PI+v)*s,q=g+Math.sin(Math.PI+v)*s,c.rightContX=p,c.rightContY=q),d?(e=["C",h.rightContX||h.plotX,h.rightContY||h.plotY,n||f,o||g,f,g],h.rightContX=h.rightContY=null):e=["M",f,g]):e=a.call(this,b,c,d),e}),p(d,"translate",function(a){var b,c,d=this.chart;if(a.call(this),d.polar&&(this.kdByAngle=d.tooltip&&d.tooltip.shared,!this.preventPostTranslate))for(b=this.points,c=b.length;c--;)this.toXY(b[c])}),p(d,"getSegmentPath",function(a,b){var c=this.points;return this.chart.polar&&this.options.connectEnds!==!1&&b[b.length-1]===c[c.length-1]&&null!==c[0].y&&(this.connectEnds=!0,b=[].concat(b,[c[0]])),a.call(this,b)}),p(d,"animate",b),m.column&&(c=m.column.prototype,p(c,"animate",b),p(c,"translate",function(a){var b,c,d,e,f=this.xAxis,g=this.yAxis.len,h=f.center,i=f.startAngleRad,k=this.chart.renderer;if(this.preventPostTranslate=!0,a.call(this),f.isRadial)for(c=this.points,e=c.length;e--;)d=c[e],b=d.barX+i,d.shapeType="path",d.shapeArgs={d:k.symbols.arc(h[0],h[1],g-d.plotY,null,{start:b,end:b+d.pointWidth,innerR:g-j(d.yBottom,g)})},this.toXY(d),d.tooltipPos=[d.plotX,d.plotY],d.ttBelow=d.plotY>h[1]}),p(c,"alignDataLabel",function(a,b,c,e,f,g){if(this.chart.polar){var h,i,j=b.rectPlotX/Math.PI*180;null===e.align&&(h=j>20&&160>j?"left":j>200&&340>j?"right":"center",e.align=h),null===e.verticalAlign&&(i=45>j||j>315?"bottom":j>135&&225>j?"top":"middle",e.verticalAlign=i),d.alignDataLabel.call(this,b,c,e,f,g)}else a.call(this,b,c,e,f,g)})),p(e,"getCoordinates",function(a,b){var c=this.chart,d={xAxis:[],yAxis:[]};return c.polar?f(c.axes,function(a){var e=a.isXAxis,f=a.center,g=b.chartX-f[0]-c.plotLeft,h=b.chartY-f[1]-c.plotTop;d[e?"xAxis":"yAxis"].push({axis:a,value:a.translate(e?Math.PI-Math.atan2(g,h):Math.sqrt(Math.pow(g,2)+Math.pow(h,2)),!0)})}):d=a.call(this,b),d})}()}(Highcharts),function(a){"use strict";var b,c,d=a.getOptions().plotOptions,e=a.pInt,f=a.pick,g=a.each;d.solidgauge=a.merge(d.gauge,{colorByPoint:!0}),b={initDataClasses:function(b){var c,d=this,e=this.chart,f=0,h=this.options;this.dataClasses=c=[],g(b.dataClasses,function(g,i){var j;g=a.merge(g),c.push(g),g.color||("category"===h.dataClassColor?(j=e.options.colors,g.color=j[f++],f===j.length&&(f=0)):g.color=d.tweenColors(a.Color(h.minColor),a.Color(h.maxColor),i/(b.dataClasses.length-1)))})},initStops:function(b){this.stops=b.stops||[[0,this.options.minColor],[1,this.options.maxColor]],g(this.stops,function(b){b.color=a.Color(b[1])})},toColor:function(a,b){var d,e,f,g,h,i,j=this.stops,k=this.dataClasses;if(k){for(i=k.length;i--;)if(h=k[i],e=h.from,f=h.to,(e===c||a>=e)&&(f===c||f>=a)){g=h.color,b&&(b.dataClass=i);break}}else{for(this.isLog&&(a=this.val2lin(a)),d=1-(this.max-a)/(this.max-this.min),i=j.length;i--&&!(d>j[i][0]););e=j[i]||j[i+1],f=j[i+1]||e,d=1-(f[0]-d)/(f[0]-e[0]||1),g=this.tweenColors(e.color,f.color,d)}return g},tweenColors:function(a,b,c){var d,e;return b.rgba.length&&a.rgba.length?(a=a.rgba,b=b.rgba,d=1!==b[3]||1!==a[3],e=(d?"rgba(":"rgb(")+Math.round(b[0]+(a[0]-b[0])*(1-c))+","+Math.round(b[1]+(a[1]-b[1])*(1-c))+","+Math.round(b[2]+(a[2]-b[2])*(1-c))+(d?","+(b[3]+(a[3]-b[3])*(1-c)):"")+")"):e=b.raw||"none",e}},g(["fill","stroke"],function(c){HighchartsAdapter.addAnimSetter(c,function(d){d.elem.attr(c,b.tweenColors(a.Color(d.start),a.Color(d.end),d.pos))})}),a.seriesTypes.solidgauge=a.extendClass(a.seriesTypes.gauge,{type:"solidgauge",pointAttrToOptions:{},bindAxes:function(){var c;a.seriesTypes.gauge.prototype.bindAxes.call(this),c=this.yAxis,a.extend(c,b),c.options.dataClasses&&c.initDataClasses(c.options),c.initStops(c.options)},drawPoints:function(){var b=this,c=b.yAxis,d=c.center,g=b.options,h=b.chart.renderer,i=g.overshoot,j=i&&"number"==typeof i?i/180*Math.PI:0;a.each(b.points,function(a){var i,k,l,m,n,o=a.graphic,p=c.startAngleRad+c.translate(a.y,null,null,null,!0),q=e(f(a.options.radius,g.radius,100))*d[2]/200,r=e(f(a.options.innerRadius,g.innerRadius,60))*d[2]/200,s=c.toColor(a.y,a),t=Math.min(c.startAngleRad,c.endAngleRad),u=Math.max(c.startAngleRad,c.endAngleRad);"none"===s&&(s=a.color||b.color||"none"),"none"!==s&&(l=a.color,a.color=s),p=Math.max(t-j,Math.min(u+j,p)),g.wrap===!1&&(p=Math.max(t,Math.min(u,p))),m=Math.min(p,c.startAngleRad),n=Math.max(p,c.startAngleRad),n-m>2*Math.PI&&(n=m+2*Math.PI),a.shapeArgs=i={x:d[0],y:d[1],r:q,innerR:r,start:m,end:n,fill:s},a.startR=q,o?(k=i.d,o.animate(i),k&&(i.d=k)):a.graphic=h.arc(i).attr({stroke:g.borderColor||"none","stroke-width":g.borderWidth||0,fill:s,"sweep-flag":0}).add(b.group)})},animate:function(b){b||(this.startAngleRad=this.yAxis.startAngleRad,a.seriesTypes.pie.prototype.animate.call(this,b))}})}(Highcharts),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"undefined"!=typeof module&&module.exports?module.exports=a:a(jQuery,window,document)}(function(a){!function(b){var c="function"==typeof define&&define.amd,d="undefined"!=typeof module&&module.exports,e="https:"==document.location.protocol?"https:":"http:",f="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js";c||(d?require("jquery-mousewheel")(a):a.event.special.mousewheel||a("head").append(decodeURI("%3Cscript src="+e+"//"+f+"%3E%3C/script%3E"))),b()}(function(){var b,c="mCustomScrollbar",d="mCS",e=".mCustomScrollbar",f={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},g=0,h={},i=window.attachEvent&&!window.addEventListener?1:0,j=!1,k=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],l={init:function(b){var b=a.extend(!0,{},f,b),c=m.call(this);if(b.live){var i=b.liveSelector||this.selector||e,j=a(i);if("off"===b.live)return void o(i);h[i]=setTimeout(function(){j.mCustomScrollbar(b),"once"===b.live&&j.length&&o(i)},500)}else o(i);return b.setWidth=b.set_width?b.set_width:b.setWidth,b.setHeight=b.set_height?b.set_height:b.setHeight,b.axis=b.horizontalScroll?"x":p(b.axis),b.scrollInertia=b.scrollInertia>0&&b.scrollInertia<17?17:b.scrollInertia,"object"!=typeof b.mouseWheel&&1==b.mouseWheel&&(b.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),b.mouseWheel.scrollAmount=b.mouseWheelPixels?b.mouseWheelPixels:b.mouseWheel.scrollAmount,b.mouseWheel.normalizeDelta=b.advanced.normalizeMouseWheelDelta?b.advanced.normalizeMouseWheelDelta:b.mouseWheel.normalizeDelta,b.scrollButtons.scrollType=q(b.scrollButtons.scrollType),n(b),a(c).each(function(){var c=a(this);if(!c.data(d)){c.data(d,{idx:++g,opt:b,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:c.css("direction"),cbOffsets:null,trigger:null});var e=c.data(d),f=e.opt,h=c.data("mcs-axis"),i=c.data("mcs-scrollbar-position"),j=c.data("mcs-theme");h&&(f.axis=h),i&&(f.scrollbarPosition=i),j&&(f.theme=j,n(f)),r.call(this),a("#mCSB_"+e.idx+"_container img:not(."+k[2]+")").addClass(k[2]),l.update.call(null,c)}})},update:function(b,c){var e=b||m.call(this);return a(e).each(function(){var b=a(this);if(b.data(d)){var e=b.data(d),f=e.opt,g=a("#mCSB_"+e.idx+"_container"),h=[a("#mCSB_"+e.idx+"_dragger_vertical"),a("#mCSB_"+e.idx+"_dragger_horizontal")];if(!g.length)return;e.tweenRunning&&V(b),b.hasClass(k[3])&&b.removeClass(k[3]),b.hasClass(k[4])&&b.removeClass(k[4]),v.call(this),t.call(this),"y"===f.axis||f.advanced.autoExpandHorizontalScroll||g.css("width",s(g.children())),e.overflowed=z.call(this),D.call(this),f.autoDraggerLength&&w.call(this),x.call(this),B.call(this);var i=[Math.abs(g[0].offsetTop),Math.abs(g[0].offsetLeft)];"x"!==f.axis&&(e.overflowed[0]?h[0].height()>h[0].parent().height()?A.call(this):(W(b,i[0].toString(),{dir:"y",dur:0,overwrite:"none"}),e.contentReset.y=null):(A.call(this),"y"===f.axis?C.call(this):"yx"===f.axis&&e.overflowed[1]&&W(b,i[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==f.axis&&(e.overflowed[1]?h[1].width()>h[1].parent().width()?A.call(this):(W(b,i[1].toString(),{dir:"x",dur:0,overwrite:"none"}),e.contentReset.x=null):(A.call(this),"x"===f.axis?C.call(this):"yx"===f.axis&&e.overflowed[0]&&W(b,i[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),c&&e&&(2===c&&f.callbacks.onImageLoad&&"function"==typeof f.callbacks.onImageLoad?f.callbacks.onImageLoad.call(this):3===c&&f.callbacks.onSelectorChange&&"function"==typeof f.callbacks.onSelectorChange?f.callbacks.onSelectorChange.call(this):f.callbacks.onUpdate&&"function"==typeof f.callbacks.onUpdate&&f.callbacks.onUpdate.call(this)),T.call(this)}})},scrollTo:function(b,c){if("undefined"!=typeof b&&null!=b){var e=m.call(this);return a(e).each(function(){var e=a(this);if(e.data(d)){var f=e.data(d),g=f.opt,h={trigger:"external",scrollInertia:g.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i=a.extend(!0,{},h,c),j=R.call(this,b),k=i.scrollInertia>0&&i.scrollInertia<17?17:i.scrollInertia;j[0]=S.call(this,j[0],"y"),j[1]=S.call(this,j[1],"x"),i.moveDragger&&(j[0]*=f.scrollRatio.y,j[1]*=f.scrollRatio.x),i.dur=k,setTimeout(function(){null!==j[0]&&"undefined"!=typeof j[0]&&"x"!==g.axis&&f.overflowed[0]&&(i.dir="y",i.overwrite="all",W(e,j[0].toString(),i)),null!==j[1]&&"undefined"!=typeof j[1]&&"y"!==g.axis&&f.overflowed[1]&&(i.dir="x",i.overwrite="none",W(e,j[1].toString(),i))},i.timeout)}})}},stop:function(){var b=m.call(this);return a(b).each(function(){var b=a(this);b.data(d)&&V(b)})},disable:function(b){var c=m.call(this);return a(c).each(function(){var c=a(this);if(c.data(d)){c.data(d);T.call(this,"remove"),C.call(this),b&&A.call(this),D.call(this,!0),c.addClass(k[3])}})},destroy:function(){var b=m.call(this);return a(b).each(function(){var e=a(this);if(e.data(d)){var f=e.data(d),g=f.opt,h=a("#mCSB_"+f.idx),i=a("#mCSB_"+f.idx+"_container"),j=a(".mCSB_"+f.idx+"_scrollbar");g.live&&o(g.liveSelector||a(b).selector),T.call(this,"remove"),C.call(this),A.call(this),e.removeData(d),$(this,"mcs"),j.remove(),i.find("img."+k[2]).removeClass(k[2]),h.replaceWith(i.contents()),e.removeClass(c+" _"+d+"_"+f.idx+" "+k[6]+" "+k[7]+" "+k[5]+" "+k[3]).addClass(k[4])}})}},m=function(){return"object"!=typeof a(this)||a(this).length<1?e:this},n=function(b){var c=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],d=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],e=["minimal","minimal-dark"],f=["minimal","minimal-dark"],g=["minimal","minimal-dark"];b.autoDraggerLength=a.inArray(b.theme,c)>-1?!1:b.autoDraggerLength,b.autoExpandScrollbar=a.inArray(b.theme,d)>-1?!1:b.autoExpandScrollbar,b.scrollButtons.enable=a.inArray(b.theme,e)>-1?!1:b.scrollButtons.enable,b.autoHideScrollbar=a.inArray(b.theme,f)>-1?!0:b.autoHideScrollbar,b.scrollbarPosition=a.inArray(b.theme,g)>-1?"outside":b.scrollbarPosition},o=function(a){h[a]&&(clearTimeout(h[a]),$(h,a))},p=function(a){return"yx"===a||"xy"===a||"auto"===a?"yx":"x"===a||"horizontal"===a?"x":"y"},q=function(a){return"stepped"===a||"pixels"===a||"step"===a||"click"===a?"stepped":"stepless"},r=function(){var b=a(this),e=b.data(d),f=e.opt,g=f.autoExpandScrollbar?" "+k[1]+"_expand":"",h=["<div id='mCSB_"+e.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+f.theme+" mCSB_scrollTools_vertical"+g+"'><div class='"+k[12]+"'><div id='mCSB_"+e.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+e.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+e.idx+"_scrollbar mCS-"+f.theme+" mCSB_scrollTools_horizontal"+g+"'><div class='"+k[12]+"'><div id='mCSB_"+e.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],i="yx"===f.axis?"mCSB_vertical_horizontal":"x"===f.axis?"mCSB_horizontal":"mCSB_vertical",j="yx"===f.axis?h[0]+h[1]:"x"===f.axis?h[1]:h[0],l="yx"===f.axis?"<div id='mCSB_"+e.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",m=f.autoHideScrollbar?" "+k[6]:"",n="x"!==f.axis&&"rtl"===e.langDir?" "+k[7]:"";f.setWidth&&b.css("width",f.setWidth),f.setHeight&&b.css("height",f.setHeight),f.setLeft="y"!==f.axis&&"rtl"===e.langDir?"989999px":f.setLeft,b.addClass(c+" _"+d+"_"+e.idx+m+n).wrapInner("<div id='mCSB_"+e.idx+"' class='mCustomScrollBox mCS-"+f.theme+" "+i+"'><div id='mCSB_"+e.idx+"_container' class='mCSB_container' style='position:relative; top:"+f.setTop+"; left:"+f.setLeft+";' dir="+e.langDir+" /></div>");var o=a("#mCSB_"+e.idx),p=a("#mCSB_"+e.idx+"_container");"y"===f.axis||f.advanced.autoExpandHorizontalScroll||p.css("width",s(p.children())),"outside"===f.scrollbarPosition?("static"===b.css("position")&&b.css("position","relative"),b.css("overflow","visible"),o.addClass("mCSB_outside").after(j)):(o.addClass("mCSB_inside").append(j),p.wrap(l)),u.call(this);var q=[a("#mCSB_"+e.idx+"_dragger_vertical"),a("#mCSB_"+e.idx+"_dragger_horizontal")];q[0].css("min-height",q[0].height()),q[1].css("min-width",q[1].width())},s=function(b){return Math.max.apply(Math,b.map(function(){return a(this).outerWidth(!0)}).get())},t=function(){var b=a(this),c=b.data(d),e=c.opt,f=a("#mCSB_"+c.idx+"_container");if(e.advanced.autoExpandHorizontalScroll&&"y"!==e.axis){var g=a("textarea:focus,input:focus");f.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(f[0].getBoundingClientRect().right+.4)-Math.floor(f[0].getBoundingClientRect().left),position:"relative"}).unwrap(),g.focus()}},u=function(){var b=a(this),c=b.data(d),e=c.opt,f=a(".mCSB_"+c.idx+"_scrollbar:first"),g=ba(e.scrollButtons.tabindex)?"tabindex='"+e.scrollButtons.tabindex+"'":"",h=["<a href='#' class='"+k[13]+"' oncontextmenu='return false;' "+g+" />","<a href='#' class='"+k[14]+"' oncontextmenu='return false;' "+g+" />","<a href='#' class='"+k[15]+"' oncontextmenu='return false;' "+g+" />","<a href='#' class='"+k[16]+"' oncontextmenu='return false;' "+g+" />"],i=["x"===e.axis?h[2]:h[0],"x"===e.axis?h[3]:h[1],h[2],h[3]];e.scrollButtons.enable&&f.prepend(i[0]).append(i[1]).next(".mCSB_scrollTools").prepend(i[2]).append(i[3])},v=function(){var b=a(this),c=b.data(d),e=a("#mCSB_"+c.idx),f=b.css("max-height")||"none",g=-1!==f.indexOf("%"),h=b.css("box-sizing");if("none"!==f){var i=g?b.parent().height()*parseInt(f)/100:parseInt(f);"border-box"===h&&(i-=b.innerHeight()-b.height()+(b.outerHeight()-b.innerHeight())),e.css("max-height",Math.round(i))}},w=function(){var b=a(this),c=b.data(d),e=a("#mCSB_"+c.idx),f=a("#mCSB_"+c.idx+"_container"),g=[a("#mCSB_"+c.idx+"_dragger_vertical"),a("#mCSB_"+c.idx+"_dragger_horizontal")],h=[e.height()/f.outerHeight(!1),e.width()/f.outerWidth(!1)],j=[parseInt(g[0].css("min-height")),Math.round(h[0]*g[0].parent().height()),parseInt(g[1].css("min-width")),Math.round(h[1]*g[1].parent().width())],k=i&&j[1]<j[0]?j[0]:j[1],l=i&&j[3]<j[2]?j[2]:j[3];g[0].css({height:k,"max-height":g[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":j[0]+"px"}),g[1].css({width:l,"max-width":g[1].parent().width()-10})},x=function(){var b=a(this),c=b.data(d),e=a("#mCSB_"+c.idx),f=a("#mCSB_"+c.idx+"_container"),g=[a("#mCSB_"+c.idx+"_dragger_vertical"),a("#mCSB_"+c.idx+"_dragger_horizontal")],h=[f.outerHeight(!1)-e.height(),f.outerWidth(!1)-e.width()],i=[h[0]/(g[0].parent().height()-g[0].height()),h[1]/(g[1].parent().width()-g[1].width())];c.scrollRatio={y:i[0],x:i[1]}},y=function(a,b,c){var d=c?k[0]+"_expanded":"",e=a.closest(".mCSB_scrollTools");"active"===b?(a.toggleClass(k[0]+" "+d),e.toggleClass(k[1]),a[0]._draggable=a[0]._draggable?0:1):a[0]._draggable||("hide"===b?(a.removeClass(k[0]),e.removeClass(k[1])):(a.addClass(k[0]),e.addClass(k[1])))},z=function(){var b=a(this),c=b.data(d),e=a("#mCSB_"+c.idx),f=a("#mCSB_"+c.idx+"_container"),g=null==c.overflowed?f.height():f.outerHeight(!1),h=null==c.overflowed?f.width():f.outerWidth(!1);return[g>e.height(),h>e.width()]},A=function(){var b=a(this),c=b.data(d),e=c.opt,f=a("#mCSB_"+c.idx),g=a("#mCSB_"+c.idx+"_container"),h=[a("#mCSB_"+c.idx+"_dragger_vertical"),a("#mCSB_"+c.idx+"_dragger_horizontal")];if(V(b),("x"!==e.axis&&!c.overflowed[0]||"y"===e.axis&&c.overflowed[0])&&(h[0].add(g).css("top",0),W(b,"_resetY")),"y"!==e.axis&&!c.overflowed[1]||"x"===e.axis&&c.overflowed[1]){var i=dx=0;"rtl"===c.langDir&&(i=f.width()-g.outerWidth(!1),dx=Math.abs(i/c.scrollRatio.x)),g.css("left",i),h[1].css("left",dx),W(b,"_resetX")}},B=function(){function b(){g=setTimeout(function(){if(a.event.special.mousewheel){if(clearTimeout(g),0===c.parents("html").length)return void(c=null);I.call(c[0])}else b()},100)}var c=a(this),e=c.data(d),f=e.opt;if(!e.bindEvents){if(F.call(this),f.contentTouchScroll&&G.call(this),H.call(this),f.mouseWheel.enable){var g;b()}L.call(this),N.call(this),f.advanced.autoScrollOnFocus&&M.call(this),f.scrollButtons.enable&&O.call(this),f.keyboard.enable&&P.call(this),e.bindEvents=!0}},C=function(){var b=a(this),c=b.data(d),e=c.opt,f=d+"_"+c.idx,g=".mCSB_"+c.idx+"_scrollbar",h=a("#mCSB_"+c.idx+",#mCSB_"+c.idx+"_container,#mCSB_"+c.idx+"_container_wrapper,"+g+" ."+k[12]+",#mCSB_"+c.idx+"_dragger_vertical,#mCSB_"+c.idx+"_dragger_horizontal,"+g+">a"),i=a("#mCSB_"+c.idx+"_container");e.advanced.releaseDraggableSelectors&&h.add(a(e.advanced.releaseDraggableSelectors)),c.bindEvents&&(a(document).unbind("."+f),h.each(function(){a(this).unbind("."+f)}),clearTimeout(b[0]._focusTimeout),$(b[0],"_focusTimeout"),clearTimeout(c.sequential.step),$(c.sequential,"step"),clearTimeout(i[0].onCompleteTimeout),$(i[0],"onCompleteTimeout"),c.bindEvents=!1)},D=function(b){var c=a(this),e=c.data(d),f=e.opt,g=a("#mCSB_"+e.idx+"_container_wrapper"),h=g.length?g:a("#mCSB_"+e.idx+"_container"),i=[a("#mCSB_"+e.idx+"_scrollbar_vertical"),a("#mCSB_"+e.idx+"_scrollbar_horizontal")],j=[i[0].find(".mCSB_dragger"),i[1].find(".mCSB_dragger")];"x"!==f.axis&&(e.overflowed[0]&&!b?(i[0].add(j[0]).add(i[0].children("a")).css("display","block"),h.removeClass(k[8]+" "+k[10])):(f.alwaysShowScrollbar?(2!==f.alwaysShowScrollbar&&j[0].css("display","none"),h.removeClass(k[10])):(i[0].css("display","none"),h.addClass(k[10])),h.addClass(k[8]))),"y"!==f.axis&&(e.overflowed[1]&&!b?(i[1].add(j[1]).add(i[1].children("a")).css("display","block"),h.removeClass(k[9]+" "+k[11])):(f.alwaysShowScrollbar?(2!==f.alwaysShowScrollbar&&j[1].css("display","none"),h.removeClass(k[11])):(i[1].css("display","none"),h.addClass(k[11])),h.addClass(k[9]))),e.overflowed[0]||e.overflowed[1]?c.removeClass(k[5]):c.addClass(k[5])},E=function(a){var b=a.type;switch(b){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return a.target.ownerDocument!==document?[a.originalEvent.screenY,a.originalEvent.screenX,!1]:[a.originalEvent.pageY,a.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var c=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],d=a.originalEvent.touches.length||a.originalEvent.changedTouches.length;return a.target.ownerDocument!==document?[c.screenY,c.screenX,d>1]:[c.pageY,c.pageX,d>1];default:return[a.pageY,a.pageX,!1]}},F=function(){function b(a){var b=o.find("iframe");if(b.length){var c=a?"auto":"none";b.css("pointer-events",c)}}function c(a,b,c,d){if(o[0].idleTimer=l.scrollInertia<233?250:0,e.attr("id")===n[1])var f="x",g=(e[0].offsetLeft-b+d)*k.scrollRatio.x;else var f="y",g=(e[0].offsetTop-a+c)*k.scrollRatio.y;W(h,g.toString(),{dir:f,drag:!0})}var e,f,g,h=a(this),k=h.data(d),l=k.opt,m=d+"_"+k.idx,n=["mCSB_"+k.idx+"_dragger_vertical","mCSB_"+k.idx+"_dragger_horizontal"],o=a("#mCSB_"+k.idx+"_container"),p=a("#"+n[0]+",#"+n[1]),q=l.advanced.releaseDraggableSelectors?p.add(a(l.advanced.releaseDraggableSelectors)):p;p.bind("mousedown."+m+" touchstart."+m+" pointerdown."+m+" MSPointerDown."+m,function(c){if(c.stopImmediatePropagation(),c.preventDefault(),_(c)){j=!0,i&&(document.onselectstart=function(){return!1}),b(!1),V(h),e=a(this);var d=e.offset(),k=E(c)[0]-d.top,m=E(c)[1]-d.left,n=e.height()+d.top,o=e.width()+d.left;n>k&&k>0&&o>m&&m>0&&(f=k,g=m),y(e,"active",l.autoExpandScrollbar)}}).bind("touchmove."+m,function(a){a.stopImmediatePropagation(),a.preventDefault();var b=e.offset(),d=E(a)[0]-b.top,h=E(a)[1]-b.left;c(f,g,d,h)}),a(document).bind("mousemove."+m+" pointermove."+m+" MSPointerMove."+m,function(a){if(e){var b=e.offset(),d=E(a)[0]-b.top,h=E(a)[1]-b.left;if(f===d)return;c(f,g,d,h)}}).add(q).bind("mouseup."+m+" touchend."+m+" pointerup."+m+" MSPointerUp."+m,function(a){e&&(y(e,"active",l.autoExpandScrollbar),e=null),j=!1,i&&(document.onselectstart=null),b(!0)})},G=function(){function c(a){if(!aa(a)||j||E(a)[2])return void(b=0);b=1,v=0,w=0;var c=C.offset();k=E(a)[0]-c.top,l=E(a)[1]-c.left,K=[E(a)[0],E(a)[1]]}function e(a){if(aa(a)&&!j&&!E(a)[2]&&(a.stopImmediatePropagation(),!w||v)){p=Y();var b=B.offset(),c=E(a)[0]-b.top,d=E(a)[1]-b.left,e="mcsLinearOut";if(F.push(c),G.push(d),K[2]=Math.abs(E(a)[0]-K[0]),K[3]=Math.abs(E(a)[1]-K[1]),y.overflowed[0])var f=D[0].parent().height()-D[0].height(),g=k-c>0&&c-k>-(f*y.scrollRatio.y)&&(2*K[3]<K[2]||"yx"===z.axis);if(y.overflowed[1])var h=D[1].parent().width()-D[1].width(),m=l-d>0&&d-l>-(h*y.scrollRatio.x)&&(2*K[2]<K[3]||"yx"===z.axis);g||m?(a.preventDefault(),v=1):w=1,t="yx"===z.axis?[k-c,l-d]:"x"===z.axis?[null,l-d]:[k-c,null],C[0].idleTimer=250,y.overflowed[0]&&i(t[0],H,e,"y","all",!0),y.overflowed[1]&&i(t[1],H,e,"x",I,!0)}}function f(a){if(!aa(a)||j||E(a)[2])return void(b=0);b=1,a.stopImmediatePropagation(),V(x),o=Y();var c=B.offset();m=E(a)[0]-c.top,n=E(a)[1]-c.left,F=[],G=[]}function g(a){if(aa(a)&&!j&&!E(a)[2]){a.stopImmediatePropagation(),v=0,w=0,q=Y();var b=B.offset(),c=E(a)[0]-b.top,d=E(a)[1]-b.left;if(!(q-p>30)){s=1e3/(q-o);var e="mcsEaseOut",f=2.5>s,g=f?[F[F.length-2],G[G.length-2]]:[0,0];r=f?[c-g[0],d-g[1]]:[c-m,d-n];var k=[Math.abs(r[0]),Math.abs(r[1])];s=f?[Math.abs(r[0]/4),Math.abs(r[1]/4)]:[s,s];var l=[Math.abs(C[0].offsetTop)-r[0]*h(k[0]/s[0],s[0]),Math.abs(C[0].offsetLeft)-r[1]*h(k[1]/s[1],s[1])];t="yx"===z.axis?[l[0],l[1]]:"x"===z.axis?[null,l[1]]:[l[0],null],u=[4*k[0]+z.scrollInertia,4*k[1]+z.scrollInertia];var x=parseInt(z.contentTouchScroll)||0;t[0]=k[0]>x?t[0]:0,t[1]=k[1]>x?t[1]:0,y.overflowed[0]&&i(t[0],u[0],e,"y",I,!1),y.overflowed[1]&&i(t[1],u[1],e,"x",I,!1)}}}function h(a,b){var c=[1.5*b,2*b,b/1.5,b/2];return a>90?b>4?c[0]:c[3]:a>60?b>3?c[3]:c[2]:a>30?b>8?c[1]:b>6?c[0]:b>4?b:c[2]:b>8?b:c[3]}function i(a,b,c,d,e,f){a&&W(x,a.toString(),{dur:b,scrollEasing:c,dir:d,overwrite:e,drag:f})}var k,l,m,n,o,p,q,r,s,t,u,v,w,x=a(this),y=x.data(d),z=y.opt,A=d+"_"+y.idx,B=a("#mCSB_"+y.idx),C=a("#mCSB_"+y.idx+"_container"),D=[a("#mCSB_"+y.idx+"_dragger_vertical"),a("#mCSB_"+y.idx+"_dragger_horizontal")],F=[],G=[],H=0,I="yx"===z.axis?"none":"all",K=[],L=C.find("iframe"),M=["touchstart."+A+" pointerdown."+A+" MSPointerDown."+A,"touchmove."+A+" pointermove."+A+" MSPointerMove."+A,"touchend."+A+" pointerup."+A+" MSPointerUp."+A];C.bind(M[0],function(a){c(a)}).bind(M[1],function(a){e(a)}),B.bind(M[0],function(a){f(a)}).bind(M[2],function(a){g(a)}),L.length&&L.each(function(){a(this).load(function(){J(this)&&a(this.contentDocument||this.contentWindow.document).bind(M[0],function(a){c(a),f(a)}).bind(M[1],function(a){e(a)}).bind(M[2],function(a){g(a)})})})},H=function(){function c(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function e(a,b,c){k.type=c&&f?"stepped":"stepless",k.scrollAmount=10,Q(g,a,b,"mcsLinearOut",c?60:null)}var f,g=a(this),h=g.data(d),i=h.opt,k=h.sequential,l=d+"_"+h.idx,m=a("#mCSB_"+h.idx+"_container"),n=m.parent();m.bind("mousedown."+l,function(a){b||0===a.button&&(f||(f=1,j=!0))}).add(document).bind("mousemove."+l,function(a){if(!b&&f&&c()){var d=m.offset(),g=E(a)[0]-d.top+m[0].offsetTop,j=E(a)[1]-d.left+m[0].offsetLeft;g>0&&g<n.height()&&j>0&&j<n.width()?k.step&&e("off",null,"stepped"):("x"!==i.axis&&h.overflowed[0]&&(0>g?e("on",38):g>n.height()&&e("on",40)),"y"!==i.axis&&h.overflowed[1]&&(0>j?e("on",37):j>n.width()&&e("on",39)))}}).bind("mouseup."+l,function(a){b||(f&&(f=0,e("off",null)),j=!1)})},I=function(){function b(b,d){if(V(c),!K(c,b.target)){var g="auto"!==f.mouseWheel.deltaFactor?parseInt(f.mouseWheel.deltaFactor):i&&b.deltaFactor<100?100:b.deltaFactor||100;if("x"===f.axis||"x"===f.mouseWheel.axis)var k="x",l=[Math.round(g*e.scrollRatio.x),parseInt(f.mouseWheel.scrollAmount)],m="auto"!==f.mouseWheel.scrollAmount?l[1]:l[0]>=h.width()?.9*h.width():l[0],n=Math.abs(a("#mCSB_"+e.idx+"_container")[0].offsetLeft),o=j[1][0].offsetLeft,p=j[1].parent().width()-j[1].width(),q=b.deltaX||b.deltaY||d;else var k="y",l=[Math.round(g*e.scrollRatio.y),parseInt(f.mouseWheel.scrollAmount)],m="auto"!==f.mouseWheel.scrollAmount?l[1]:l[0]>=h.height()?.9*h.height():l[0],n=Math.abs(a("#mCSB_"+e.idx+"_container")[0].offsetTop),o=j[0][0].offsetTop,p=j[0].parent().height()-j[0].height(),q=b.deltaY||d;"y"===k&&!e.overflowed[0]||"x"===k&&!e.overflowed[1]||((f.mouseWheel.invert||f.horizontalScroll&&b.deltaX!==-0)&&(q=-q),f.mouseWheel.normalizeDelta&&(q=0>q?-1:1),(c.data("mCS").opt.horizontalScroll||!(b.deltaX<-8||b.deltaX>8))&&((q>0&&0!==o||0>q&&o!==p||f.mouseWheel.preventDefault)&&(b.stopImmediatePropagation(),b.preventDefault()),W(c,(n-q*m).toString(),{dir:k})))}}var c=a(this),e=c.data(d),f=e.opt,g=d+"_"+e.idx,h=a("#mCSB_"+e.idx),j=[a("#mCSB_"+e.idx+"_dragger_vertical"),a("#mCSB_"+e.idx+"_dragger_horizontal")],k=a("#mCSB_"+e.idx+"_container").find("iframe");e&&(k.length&&k.each(function(){a(this).load(function(){J(this)&&a(this.contentDocument||this.contentWindow.document).bind("mousewheel."+g,function(a,c){b(a,c)})})}),h.bind("mousewheel."+g,function(a,c){b(a,c)}))},J=function(a){var b=null;try{var c=a.contentDocument||a.contentWindow.document;b=c.body.innerHTML}catch(d){}return null!==b},K=function(b,c){var e=c.nodeName.toLowerCase(),f=b.data(d).opt.mouseWheel.disableOver,g=["select","textarea"];return a.inArray(e,f)>-1&&!(a.inArray(e,g)>-1&&!a(c).is(":focus"))},L=function(){var b=a(this),c=b.data(d),e=d+"_"+c.idx,f=a("#mCSB_"+c.idx+"_container"),g=f.parent(),h=a(".mCSB_"+c.idx+"_scrollbar ."+k[12]);h.bind("touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(a){j=!0}).bind("touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(a){j=!1}).bind("click."+e,function(d){if(a(d.target).hasClass(k[12])||a(d.target).hasClass("mCSB_draggerRail")){V(b);var e=a(this),h=e.find(".mCSB_dragger");if(e.parent(".mCSB_scrollTools_horizontal").length>0){if(!c.overflowed[1])return;var i="x",j=d.pageX>h.offset().left?-1:1,l=Math.abs(f[0].offsetLeft)-j*(.9*g.width())}else{if(!c.overflowed[0])return;var i="y",j=d.pageY>h.offset().top?-1:1,l=Math.abs(f[0].offsetTop)-j*(.9*g.height())}W(b,l.toString(),{dir:i,scrollEasing:"mcsEaseInOut"})}})},M=function(){var b=a(this),c=b.data(d),e=c.opt,f=d+"_"+c.idx,g=a("#mCSB_"+c.idx+"_container"),h=g.parent();g.bind("focusin."+f,function(c){var d=a(document.activeElement),f=g.find(".mCustomScrollBox").length,i=0;d.is(e.advanced.autoScrollOnFocus)&&(V(b),clearTimeout(b[0]._focusTimeout),b[0]._focusTimer=f?(i+17)*f:0,b[0]._focusTimeout=setTimeout(function(){var a=[ca(d)[0],ca(d)[1]],c=[g[0].offsetTop,g[0].offsetLeft],f=[c[0]+a[0]>=0&&c[0]+a[0]<h.height()-d.outerHeight(!1),c[1]+a[1]>=0&&c[0]+a[1]<h.width()-d.outerWidth(!1)],j="yx"!==e.axis||f[0]||f[1]?"all":"none";"x"===e.axis||f[0]||W(b,a[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:j,dur:i}),"y"===e.axis||f[1]||W(b,a[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:j,dur:i})},b[0]._focusTimer))})},N=function(){var b=a(this),c=b.data(d),e=d+"_"+c.idx,f=a("#mCSB_"+c.idx+"_container").parent();f.bind("scroll."+e,function(b){(0!==f.scrollTop()||0!==f.scrollLeft())&&a(".mCSB_"+c.idx+"_scrollbar").css("visibility","hidden")})},O=function(){var b=a(this),c=b.data(d),e=c.opt,f=c.sequential,g=d+"_"+c.idx,h=".mCSB_"+c.idx+"_scrollbar",i=a(h+">a");i.bind("mousedown."+g+" touchstart."+g+" pointerdown."+g+" MSPointerDown."+g+" mouseup."+g+" touchend."+g+" pointerup."+g+" MSPointerUp."+g+" mouseout."+g+" pointerout."+g+" MSPointerOut."+g+" click."+g,function(d){
function g(a,c){f.scrollAmount=e.snapAmount||e.scrollButtons.scrollAmount,Q(b,a,c)}if(d.preventDefault(),_(d)){var h=a(this).attr("class");switch(f.type=e.scrollButtons.scrollType,d.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===f.type)return;j=!0,c.tweenRunning=!1,g("on",h);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===f.type)return;j=!1,f.dir&&g("off",h);break;case"click":if("stepped"!==f.type||c.tweenRunning)return;g("on",h)}}})},P=function(){function b(b){function d(a,b){g.type=f.keyboard.scrollType,g.scrollAmount=f.snapAmount||f.keyboard.scrollAmount,"stepped"===g.type&&e.tweenRunning||Q(c,a,b)}switch(b.type){case"blur":e.tweenRunning&&g.dir&&d("off",null);break;case"keydown":case"keyup":var h=b.keyCode?b.keyCode:b.which,i="on";if("x"!==f.axis&&(38===h||40===h)||"y"!==f.axis&&(37===h||39===h)){if((38===h||40===h)&&!e.overflowed[0]||(37===h||39===h)&&!e.overflowed[1])return;"keyup"===b.type&&(i="off"),a(document.activeElement).is(l)||(b.preventDefault(),b.stopImmediatePropagation(),d(i,h))}else if(33===h||34===h){if((e.overflowed[0]||e.overflowed[1])&&(b.preventDefault(),b.stopImmediatePropagation()),"keyup"===b.type){V(c);var m=34===h?-1:1;if("x"===f.axis||"yx"===f.axis&&e.overflowed[1]&&!e.overflowed[0])var n="x",o=Math.abs(j[0].offsetLeft)-m*(.9*k.width());else var n="y",o=Math.abs(j[0].offsetTop)-m*(.9*k.height());W(c,o.toString(),{dir:n,scrollEasing:"mcsEaseInOut"})}}else if((35===h||36===h)&&!a(document.activeElement).is(l)&&((e.overflowed[0]||e.overflowed[1])&&(b.preventDefault(),b.stopImmediatePropagation()),"keyup"===b.type)){if("x"===f.axis||"yx"===f.axis&&e.overflowed[1]&&!e.overflowed[0])var n="x",o=35===h?Math.abs(k.width()-j.outerWidth(!1)):0;else var n="y",o=35===h?Math.abs(k.height()-j.outerHeight(!1)):0;W(c,o.toString(),{dir:n,scrollEasing:"mcsEaseInOut"})}}}var c=a(this),e=c.data(d),f=e.opt,g=e.sequential,h=d+"_"+e.idx,i=a("#mCSB_"+e.idx),j=a("#mCSB_"+e.idx+"_container"),k=j.parent(),l="input,textarea,select,datalist,keygen,[contenteditable='true']",m=j.find("iframe"),n=["blur."+h+" keydown."+h+" keyup."+h];m.length&&m.each(function(){a(this).load(function(){J(this)&&a(this.contentDocument||this.contentWindow.document).bind(n[0],function(a){b(a)})})}),i.attr("tabindex","0").bind(n[0],function(a){b(a)})},Q=function(b,c,e,f,g){function h(a){var c="stepped"!==m.type,d=g?g:a?c?p/1.5:q:1e3/60,e=a?c?7.5:40:2.5,i=[Math.abs(n[0].offsetTop),Math.abs(n[0].offsetLeft)],k=[j.scrollRatio.y>10?10:j.scrollRatio.y,j.scrollRatio.x>10?10:j.scrollRatio.x],l="x"===m.dir[0]?i[1]+m.dir[1]*(k[1]*e):i[0]+m.dir[1]*(k[0]*e),o="x"===m.dir[0]?i[1]+m.dir[1]*parseInt(m.scrollAmount):i[0]+m.dir[1]*parseInt(m.scrollAmount),r="auto"!==m.scrollAmount?o:l,s=f?f:a?c?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",t=a?!0:!1;return a&&17>d&&(r="x"===m.dir[0]?i[1]:i[0]),W(b,r.toString(),{dir:m.dir[0],scrollEasing:s,dur:d,onComplete:t}),a?void(m.dir=!1):(clearTimeout(m.step),void(m.step=setTimeout(function(){h()},d)))}function i(){clearTimeout(m.step),$(m,"step"),V(b)}var j=b.data(d),l=j.opt,m=j.sequential,n=a("#mCSB_"+j.idx+"_container"),o="stepped"===m.type?!0:!1,p=l.scrollInertia<26?26:l.scrollInertia,q=l.scrollInertia<1?17:l.scrollInertia;switch(c){case"on":if(m.dir=[e===k[16]||e===k[15]||39===e||37===e?"x":"y",e===k[13]||e===k[15]||38===e||37===e?-1:1],V(b),ba(e)&&"stepped"===m.type)return;h(o);break;case"off":i(),(o||j.tweenRunning&&m.dir)&&h(!0)}},R=function(b){var c=a(this).data(d).opt,e=[];return"function"==typeof b&&(b=b()),b instanceof Array?e=b.length>1?[b[0],b[1]]:"x"===c.axis?[null,b[0]]:[b[0],null]:(e[0]=b.y?b.y:b.x||"x"===c.axis?null:b,e[1]=b.x?b.x:b.y||"y"===c.axis?null:b),"function"==typeof e[0]&&(e[0]=e[0]()),"function"==typeof e[1]&&(e[1]=e[1]()),e},S=function(b,c){if(null!=b&&"undefined"!=typeof b){var e=a(this),f=e.data(d),g=f.opt,h=a("#mCSB_"+f.idx+"_container"),i=h.parent(),j=typeof b;c||(c="x"===g.axis?"x":"y");var k="x"===c?h.outerWidth(!1):h.outerHeight(!1),m="x"===c?h[0].offsetLeft:h[0].offsetTop,n="x"===c?"left":"top";switch(j){case"function":return b();case"object":var o=b.jquery?b:a(b);if(!o.length)return;return"x"===c?ca(o)[1]:ca(o)[0];case"string":case"number":if(ba(b))return Math.abs(b);if(-1!==b.indexOf("%"))return Math.abs(k*parseInt(b)/100);if(-1!==b.indexOf("-="))return Math.abs(m-parseInt(b.split("-=")[1]));if(-1!==b.indexOf("+=")){var p=m+parseInt(b.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==b.indexOf("px")&&ba(b.split("px")[0]))return Math.abs(b.split("px")[0]);if("top"===b||"left"===b)return 0;if("bottom"===b)return Math.abs(i.height()-h.outerHeight(!1));if("right"===b)return Math.abs(i.width()-h.outerWidth(!1));if("first"===b||"last"===b){var o=h.find(":"+b);return"x"===c?ca(o)[1]:ca(o)[0]}return a(b).length?"x"===c?ca(a(b))[1]:ca(a(b))[0]:(h.css(n,b),void l.update.call(null,e[0]))}}},T=function(b){function c(){return clearTimeout(n[0].autoUpdate),0===i.parents("html").length?void(i=null):void(n[0].autoUpdate=setTimeout(function(){return m.advanced.updateOnSelectorChange&&(o=g(),o!==u)?(h(3),void(u=o)):(m.advanced.updateOnContentResize&&(p=[n.outerHeight(!1),n.outerWidth(!1),r.height(),r.width(),t()[0],t()[1]],(p[0]!==v[0]||p[1]!==v[1]||p[2]!==v[2]||p[3]!==v[3]||p[4]!==v[4]||p[5]!==v[5])&&(h(p[0]!==v[0]||p[1]!==v[1]),v=p)),m.advanced.updateOnImageLoad&&(q=e(),q!==w&&(n.find("img").each(function(){f(this)}),w=q)),void((m.advanced.updateOnSelectorChange||m.advanced.updateOnContentResize||m.advanced.updateOnImageLoad)&&c()))},60))}function e(){var a=0;return m.advanced.updateOnImageLoad&&(a=n.find("img").length),a}function f(b){function c(a,b){return function(){return b.apply(a,arguments)}}function d(){this.onload=null,a(b).addClass(k[2]),h(2)}if(a(b).hasClass(k[2]))return void h();var e=new Image;e.onload=c(e,d),e.src=b.src}function g(){m.advanced.updateOnSelectorChange===!0&&(m.advanced.updateOnSelectorChange="*");var b=0,c=n.find(m.advanced.updateOnSelectorChange);return m.advanced.updateOnSelectorChange&&c.length>0&&c.each(function(){b+=a(this).height()+a(this).width()}),b}function h(a){clearTimeout(n[0].autoUpdate),l.update.call(null,i[0],a)}var i=a(this),j=i.data(d),m=j.opt,n=a("#mCSB_"+j.idx+"_container");if(b)return clearTimeout(n[0].autoUpdate),void $(n[0],"autoUpdate");var o,p,q,r=n.parent(),s=[a("#mCSB_"+j.idx+"_scrollbar_vertical"),a("#mCSB_"+j.idx+"_scrollbar_horizontal")],t=function(){return[s[0].is(":visible")?s[0].outerHeight(!0):0,s[1].is(":visible")?s[1].outerWidth(!0):0]},u=g(),v=[n.outerHeight(!1),n.outerWidth(!1),r.height(),r.width(),t()[0],t()[1]],w=e();c()},U=function(a,b,c){return Math.round(a/b)*b-c},V=function(b){var c=b.data(d),e=a("#mCSB_"+c.idx+"_container,#mCSB_"+c.idx+"_container_wrapper,#mCSB_"+c.idx+"_dragger_vertical,#mCSB_"+c.idx+"_dragger_horizontal");e.each(function(){Z.call(this)})},W=function(b,c,e){function f(a){return i&&j.callbacks[a]&&"function"==typeof j.callbacks[a]}function g(){return[j.callbacks.alwaysTriggerOffsets||t>=u[0]+w,j.callbacks.alwaysTriggerOffsets||-x>=t]}function h(){var a=[n[0].offsetTop,n[0].offsetLeft],c=[r[0].offsetTop,r[0].offsetLeft],d=[n.outerHeight(!1),n.outerWidth(!1)],f=[m.height(),m.width()];b[0].mcs={content:n,top:a[0],left:a[1],draggerTop:c[0],draggerLeft:c[1],topPct:Math.round(100*Math.abs(a[0])/(Math.abs(d[0])-f[0])),leftPct:Math.round(100*Math.abs(a[1])/(Math.abs(d[1])-f[1])),direction:e.dir}}var i=b.data(d),j=i.opt,k={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:j.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},e=a.extend(k,e),l=[e.dur,e.drag?0:e.dur],m=a("#mCSB_"+i.idx),n=a("#mCSB_"+i.idx+"_container"),o=n.parent(),p=j.callbacks.onTotalScrollOffset?R.call(b,j.callbacks.onTotalScrollOffset):[0,0],q=j.callbacks.onTotalScrollBackOffset?R.call(b,j.callbacks.onTotalScrollBackOffset):[0,0];if(i.trigger=e.trigger,(0!==o.scrollTop()||0!==o.scrollLeft())&&(a(".mCSB_"+i.idx+"_scrollbar").css("visibility","visible"),o.scrollTop(0).scrollLeft(0)),"_resetY"!==c||i.contentReset.y||(f("onOverflowYNone")&&j.callbacks.onOverflowYNone.call(b[0]),i.contentReset.y=1),"_resetX"!==c||i.contentReset.x||(f("onOverflowXNone")&&j.callbacks.onOverflowXNone.call(b[0]),i.contentReset.x=1),"_resetY"!==c&&"_resetX"!==c){switch(!i.contentReset.y&&b[0].mcs||!i.overflowed[0]||(f("onOverflowY")&&j.callbacks.onOverflowY.call(b[0]),i.contentReset.x=null),!i.contentReset.x&&b[0].mcs||!i.overflowed[1]||(f("onOverflowX")&&j.callbacks.onOverflowX.call(b[0]),i.contentReset.x=null),j.snapAmount&&(c=U(c,j.snapAmount,j.snapOffset)),e.dir){case"x":var r=a("#mCSB_"+i.idx+"_dragger_horizontal"),s="left",t=n[0].offsetLeft,u=[m.width()-n.outerWidth(!1),r.parent().width()-r.width()],v=[c,0===c?0:c/i.scrollRatio.x],w=p[1],x=q[1],z=w>0?w/i.scrollRatio.x:0,A=x>0?x/i.scrollRatio.x:0;break;case"y":var r=a("#mCSB_"+i.idx+"_dragger_vertical"),s="top",t=n[0].offsetTop,u=[m.height()-n.outerHeight(!1),r.parent().height()-r.height()],v=[c,0===c?0:c/i.scrollRatio.y],w=p[0],x=q[0],z=w>0?w/i.scrollRatio.y:0,A=x>0?x/i.scrollRatio.y:0}v[1]<0||0===v[0]&&0===v[1]?v=[0,0]:v[1]>=u[1]?v=[u[0],u[1]]:v[0]=-v[0],b[0].mcs||(h(),f("onInit")&&j.callbacks.onInit.call(b[0])),clearTimeout(n[0].onCompleteTimeout),(i.tweenRunning||!(0===t&&v[0]>=0||t===u[0]&&v[0]<=u[0]))&&(X(r[0],s,Math.round(v[1]),l[1],e.scrollEasing),X(n[0],s,Math.round(v[0]),l[0],e.scrollEasing,e.overwrite,{onStart:function(){e.callbacks&&e.onStart&&!i.tweenRunning&&(f("onScrollStart")&&(h(),j.callbacks.onScrollStart.call(b[0])),i.tweenRunning=!0,y(r),i.cbOffsets=g())},onUpdate:function(){e.callbacks&&e.onUpdate&&f("whileScrolling")&&(h(),j.callbacks.whileScrolling.call(b[0]))},onComplete:function(){if(e.callbacks&&e.onComplete){"yx"===j.axis&&clearTimeout(n[0].onCompleteTimeout);var a=n[0].idleTimer||0;n[0].onCompleteTimeout=setTimeout(function(){f("onScroll")&&(h(),j.callbacks.onScroll.call(b[0])),f("onTotalScroll")&&v[1]>=u[1]-z&&i.cbOffsets[0]&&(h(),j.callbacks.onTotalScroll.call(b[0])),f("onTotalScrollBack")&&v[1]<=A&&i.cbOffsets[1]&&(h(),j.callbacks.onTotalScrollBack.call(b[0])),i.tweenRunning=!1,n[0].idleTimer=0,y(r,"hide")},a)}}}))}},X=function(a,b,c,d,e,f,g){function h(){v.stop||(s||o.call(),s=Y()-r,i(),s>=v.time&&(v.time=s>v.time?s+m-(s-v.time):s+m-1,v.time<s+1&&(v.time=s+1)),v.time<d?v.id=n(h):q.call())}function i(){d>0?(v.currVal=l(v.time,t,w,d,e),u[b]=Math.round(v.currVal)+"px"):u[b]=c+"px",p.call()}function j(){m=1e3/60,v.time=s+m,n=window.requestAnimationFrame?window.requestAnimationFrame:function(a){return i(),setTimeout(a,.01)},v.id=n(h)}function k(){null!=v.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(v.id):clearTimeout(v.id),v.id=null)}function l(a,b,c,d,e){switch(e){case"linear":case"mcsLinear":return c*a/d+b;case"mcsLinearOut":return a/=d,a--,c*Math.sqrt(1-a*a)+b;case"easeInOutSmooth":return a/=d/2,1>a?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b);case"easeInOutStrong":return a/=d/2,1>a?c/2*Math.pow(2,10*(a-1))+b:(a--,c/2*(-Math.pow(2,-10*a)+2)+b);case"easeInOut":case"mcsEaseInOut":return a/=d/2,1>a?c/2*a*a*a+b:(a-=2,c/2*(a*a*a+2)+b);case"easeOutSmooth":return a/=d,a--,-c*(a*a*a*a-1)+b;case"easeOutStrong":return c*(-Math.pow(2,-10*a/d)+1)+b;case"easeOut":case"mcsEaseOut":default:var f=(a/=d)*a,g=f*a;return b+c*(.499999999999997*g*f+-2.5*f*f+5.5*g+-6.5*f+4*a)}}a._mTween||(a._mTween={top:{},left:{}});var m,n,g=g||{},o=g.onStart||function(){},p=g.onUpdate||function(){},q=g.onComplete||function(){},r=Y(),s=0,t=a.offsetTop,u=a.style,v=a._mTween[b];"left"===b&&(t=a.offsetLeft);var w=c-t;v.stop=0,"none"!==f&&k(),j()},Y=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Z=function(){var a=this;a._mTween||(a._mTween={top:{},left:{}});for(var b=["top","left"],c=0;c<b.length;c++){var d=b[c];a._mTween[d].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(a._mTween[d].id):clearTimeout(a._mTween[d].id),a._mTween[d].id=null,a._mTween[d].stop=1)}},$=function(a,b){try{delete a[b]}catch(c){a[b]=null}},_=function(a){return!(a.which&&1!==a.which)},aa=function(a){var b=a.originalEvent.pointerType;return!(b&&"touch"!==b&&2!==b)},ba=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},ca=function(a){var b=a.parents(".mCSB_container");return[a.offset().top-b.offset().top,a.offset().left-b.offset().left]};a.fn[c]=function(b){return l[b]?l[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist"):l.init.apply(this,arguments)},a[c]=function(b){return l[b]?l[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist"):l.init.apply(this,arguments)},a[c].defaults=f,window[c]=!0,a(window).load(function(){a(e)[c](),a.extend(a.expr[":"],{mcsInView:a.expr[":"].mcsInView||function(b){var c,d,e=a(b),f=e.parents(".mCSB_container");if(f.length)return c=f.parent(),d=[f[0].offsetTop,f[0].offsetLeft],d[0]+ca(e)[0]>=0&&d[0]+ca(e)[0]<c.height()-e.outerHeight(!1)&&d[1]+ca(e)[1]>=0&&d[1]+ca(e)[1]<c.width()-e.outerWidth(!1)},mcsOverflow:a.expr[":"].mcsOverflow||function(b){var c=a(b).data(d);if(c)return c.overflowed[0]||c.overflowed[1]}})})})}),function(a,b,c,d){"use strict";var e=c("html"),f=c(a),g=c(b),h=c.fancybox=function(){h.open.apply(this,arguments)},i=navigator.userAgent.match(/msie/i),j=null,k=b.createTouch!==d,l=function(a){return a&&a.hasOwnProperty&&a instanceof c},m=function(a){return a&&"string"===c.type(a)},n=function(a){return m(a)&&a.indexOf("%")>0},o=function(a){return a&&!(a.style.overflow&&"hidden"===a.style.overflow)&&(a.clientWidth&&a.scrollWidth>a.clientWidth||a.clientHeight&&a.scrollHeight>a.clientHeight)},p=function(a,b){var c=parseInt(a,10)||0;return b&&n(a)&&(c=h.getViewport()[b]/100*c),Math.ceil(c)},q=function(a,b){return p(a,b)+"px"};c.extend(h,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!k,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(i?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeChange:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){return a&&(c.isPlainObject(b)||(b={}),!1!==h.close(!0))?(c.isArray(a)||(a=l(a)?c(a).get():[a]),c.each(a,function(e,f){var g,i,j,k,n,o,p,q={};"object"===c.type(f)&&(f.nodeType&&(f=c(f)),l(f)?(q={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},c.metadata&&c.extend(!0,q,f.metadata())):q=f),g=b.href||q.href||(m(f)?f:null),i=b.title!==d?b.title:q.title||"",j=b.content||q.content,k=j?"html":b.type||q.type,!k&&q.isDom&&(k=f.data("fancybox-type"),k||(n=f.prop("class").match(/fancybox\.(\w+)/),k=n?n[1]:null)),m(g)&&(k||(h.isImage(g)?k="image":h.isSWF(g)?k="swf":"#"===g.charAt(0)?k="inline":m(f)&&(k="html",j=f)),"ajax"===k&&(o=g.split(/\s+/,2),g=o.shift(),p=o.shift())),j||("inline"===k?g?j=c(m(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):q.isDom&&(j=f):"html"===k?j=g:k||g||!q.isDom||(k="inline",j=f)),c.extend(q,{href:g,type:k,content:j,title:i,selector:p}),a[e]=q}),h.opts=c.extend(!0,{},h.defaults,b),b.keys!==d&&(h.opts.keys=b.keys?c.extend({},h.defaults.keys,b.keys):!1),h.group=a,h._start(h.opts.index)):void 0},cancel:function(){var a=h.coming;a&&!1!==h.trigger("onCancel")&&(h.hideLoading(),h.ajaxLoad&&h.ajaxLoad.abort(),h.ajaxLoad=null,h.imgPreload&&(h.imgPreload.onload=h.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),h.coming=null,h.current||h._afterZoomOut(a))},close:function(a){h.cancel(),!1!==h.trigger("beforeClose")&&(h.unbindEvents(),h.isActive&&(h.isOpen&&a!==!0?(h.isOpen=h.isOpened=!1,h.isClosing=!0,c(".fancybox-item, .fancybox-nav").remove(),h.wrap.stop(!0,!0).removeClass("fancybox-opened"),h.transitions[h.current.closeMethod]()):(c(".fancybox-wrap").stop(!0).trigger("onReset").remove(),h._afterZoomOut())))},play:function(a){var b=function(){clearTimeout(h.player.timer)},c=function(){b(),h.current&&h.player.isActive&&(h.player.timer=setTimeout(h.next,h.current.playSpeed))},d=function(){b(),g.unbind(".player"),h.player.isActive=!1,h.trigger("onPlayEnd")},e=function(){h.current&&(h.current.loop||h.current.index<h.group.length-1)&&(h.player.isActive=!0,g.bind({"onCancel.player beforeClose.player":d,"onUpdate.player":c,"beforeLoad.player":b}),c(),h.trigger("onPlayStart"))};a===!0||!h.player.isActive&&a!==!1?e():d()},next:function(a){var b=h.current;b&&(m(a)||(a=b.direction.next),h.jumpto(b.index+1,a,"next"))},prev:function(a){var b=h.current;b&&(m(a)||(a=b.direction.prev),h.jumpto(b.index-1,a,"prev"))},jumpto:function(a,b,c){var e=h.current;e&&(a=p(a),h.direction=b||e.direction[a>=e.index?"next":"prev"],h.router=c||"jumpto",e.loop&&(0>a&&(a=e.group.length+a%e.group.length),a%=e.group.length),e.group[a]!==d&&(h.cancel(),h._start(a)))},reposition:function(a,b){var d,e=h.current,f=e?e.wrap:null;f&&(d=h._getPosition(b),a&&"scroll"===a.type?(delete d.position,f.stop(!0,!0).animate(d,200)):(f.css(d),e.pos=c.extend({},e.dim,d)))},update:function(a){var b=a&&a.type,c=!b||"orientationchange"===b;c&&(clearTimeout(j),j=null),h.isOpen&&!j&&(j=setTimeout(function(){var d=h.current;d&&!h.isClosing&&(h.wrap.removeClass("fancybox-tmp"),(c||"load"===b||"resize"===b&&d.autoResize)&&h._setDimension(),"scroll"===b&&d.canShrink||h.reposition(a),h.trigger("onUpdate"),j=null)},c&&!k?0:300))},toggle:function(a){h.isOpen&&(h.current.fitToView="boolean"===c.type(a)?a:!h.current.fitToView,k&&(h.wrap.removeAttr("style").addClass("fancybox-tmp"),h.trigger("onUpdate")),h.update())},hideLoading:function(){g.unbind(".loading"),c("#fancybox-loading").remove()},showLoading:function(){var a,b;h.hideLoading(),a=c('<div id="fancybox-loading"><div></div></div>').click(h.cancel).appendTo("body"),g.bind("keydown.loading",function(a){27===(a.which||a.keyCode)&&(a.preventDefault(),h.cancel())}),h.defaults.fixed||(b=h.getViewport(),a.css({position:"absolute",top:.5*b.h+b.y,left:.5*b.w+b.x}))},getViewport:function(){var b=h.current&&h.current.locked||!1,c={x:f.scrollLeft(),y:f.scrollTop()};return b?(c.w=b[0].clientWidth,c.h=b[0].clientHeight):(c.w=k&&a.innerWidth?a.innerWidth:f.width(),c.h=k&&a.innerHeight?a.innerHeight:f.height()),c},unbindEvents:function(){h.wrap&&l(h.wrap)&&h.wrap.unbind(".fb"),g.unbind(".fb"),f.unbind(".fb")},bindEvents:function(){var a,b=h.current;b&&(f.bind("orientationchange.fb"+(k?"":" resize.fb")+(b.autoCenter&&!b.locked?" scroll.fb":""),h.update),a=b.keys,a&&g.bind("keydown.fb",function(e){var f=e.which||e.keyCode,g=e.target||e.srcElement;return 27===f&&h.coming?!1:void(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||g&&(g.type||c(g).is("[contenteditable]"))||c.each(a,function(a,g){return b.group.length>1&&g[f]!==d?(h[a](g[f]),e.preventDefault(),!1):c.inArray(f,g)>-1?(h[a](),e.preventDefault(),!1):void 0}))}),c.fn.mousewheel&&b.mouseWheel&&h.wrap.bind("mousewheel.fb",function(a,d,e,f){for(var g=a.target||null,i=c(g),j=!1;i.length&&!(j||i.is(".fancybox-skin")||i.is(".fancybox-wrap"));)j=o(i[0]),i=c(i).parent();0===d||j||h.group.length>1&&!b.canShrink&&(f>0||e>0?h.prev(f>0?"down":"left"):(0>f||0>e)&&h.next(0>f?"up":"right"),a.preventDefault())}))},trigger:function(a,b){var d,e=b||h.coming||h.current;if(e){if(c.isFunction(e[a])&&(d=e[a].apply(e,Array.prototype.slice.call(arguments,1))),d===!1)return!1;e.helpers&&c.each(e.helpers,function(b,d){d&&h.helpers[b]&&c.isFunction(h.helpers[b][a])&&h.helpers[b][a](c.extend(!0,{},h.helpers[b].defaults,d),e)}),g.trigger(a)}},isImage:function(a){return m(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return m(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var b,d,e,f,g,i={};if(a=p(a),b=h.group[a]||null,!b)return!1;if(i=c.extend(!0,{},h.opts,b),f=i.margin,g=i.padding,"number"===c.type(f)&&(i.margin=[f,f,f,f]),"number"===c.type(g)&&(i.padding=[g,g,g,g]),i.modal&&c.extend(!0,i,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),i.autoSize&&(i.autoWidth=i.autoHeight=!0),"auto"===i.width&&(i.autoWidth=!0),"auto"===i.height&&(i.autoHeight=!0),i.group=h.group,i.index=a,h.coming=i,!1===h.trigger("beforeLoad"))return void(h.coming=null);if(e=i.type,d=i.href,!e)return h.coming=null,h.current&&h.router&&"jumpto"!==h.router?(h.current.index=a,h[h.router](h.direction)):!1;if(h.isActive=!0,("image"===e||"swf"===e)&&(i.autoHeight=i.autoWidth=!1,i.scrolling="visible"),"image"===e&&(i.aspectRatio=!0),"iframe"===e&&k&&(i.scrolling="scroll"),i.wrap=c(i.tpl.wrap).addClass("fancybox-"+(k?"mobile":"desktop")+" fancybox-type-"+e+" fancybox-tmp "+i.wrapCSS).appendTo(i.parent||"body"),c.extend(i,{skin:c(".fancybox-skin",i.wrap),outer:c(".fancybox-outer",i.wrap),inner:c(".fancybox-inner",i.wrap)}),c.each(["Top","Right","Bottom","Left"],function(a,b){i.skin.css("padding"+b,q(i.padding[a]))}),h.trigger("onReady"),"inline"===e||"html"===e){if(!i.content||!i.content.length)return h._error("content")}else if(!d)return h._error("href");"image"===e?h._loadImage():"ajax"===e?h._loadAjax():"iframe"===e?h._loadIframe():h._afterLoad()},_error:function(a){c.extend(h.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:h.coming.tpl.error}),h._afterLoad()},_loadImage:function(){var a=h.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null,h.coming.width=this.width/h.opts.pixelRatio,h.coming.height=this.height/h.opts.pixelRatio,h._afterLoad()},a.onerror=function(){this.onload=this.onerror=null,h._error("image")},a.src=h.coming.href,a.complete!==!0&&h.showLoading()},_loadAjax:function(){var a=h.coming;h.showLoading(),h.ajaxLoad=c.ajax(c.extend({},a.ajax,{url:a.href,error:function(a,b){h.coming&&"abort"!==b?h._error("ajax",a):h.hideLoading()},success:function(b,c){"success"===c&&(a.content=b,h._afterLoad())}}))},_loadIframe:function(){var a=h.coming,b=c(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",k?"auto":a.iframe.scrolling).attr("src",a.href);c(a.wrap).bind("onReset",function(){try{c(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}}),a.iframe.preload&&(h.showLoading(),b.one("load",function(){c(this).data("ready",1),k||c(this).bind("load.fb",h.update),c(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),h._afterLoad()})),a.content=b.appendTo(a.inner),a.iframe.preload||h._afterLoad()},_preloadImages:function(){var a,b,c=h.group,d=h.current,e=c.length,f=d.preload?Math.min(d.preload,e-1):0;for(b=1;f>=b;b+=1)a=c[(d.index+b)%e],"image"===a.type&&a.href&&((new Image).src=a.href)},_afterLoad:function(){var a,b,d,e,f,g,i=h.coming,j=h.current,k="fancybox-placeholder";if(h.hideLoading(),i&&h.isActive!==!1){if(!1===h.trigger("afterLoad",i,j))return i.wrap.stop(!0).trigger("onReset").remove(),void(h.coming=null);switch(j&&(h.trigger("beforeChange",j),j.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),h.unbindEvents(),a=i,b=i.content,d=i.type,e=i.scrolling,c.extend(h,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:j}),f=a.href,d){case"inline":case"ajax":case"html":a.selector?b=c("<div>").html(b).find(a.selector):l(b)&&(b.data(k)||b.data(k,c('<div class="'+k+'"></div>').insertAfter(b).hide()),b=b.show().detach(),a.wrap.bind("onReset",function(){c(this).find(b).length&&b.hide().replaceAll(b.data(k)).data(k,!1)}));break;case"image":b=a.tpl.image.replace("{href}",f);break;case"swf":b='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+f+'"></param>',g="",c.each(a.swf,function(a,c){b+='<param name="'+a+'" value="'+c+'"></param>',g+=" "+a+'="'+c+'"'}),b+='<embed src="'+f+'" type="application/x-shockwave-flash" width="100%" height="100%"'+g+"></embed></object>"}l(b)&&b.parent().is(a.inner)||a.inner.append(b),h.trigger("beforeShow"),a.inner.css("overflow","yes"===e?"scroll":"no"===e?"hidden":e),h._setDimension(),h.reposition(),h.isOpen=!1,h.coming=null,h.bindEvents(),h.isOpened?j.prevMethod&&h.transitions[j.prevMethod]():c(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),h.transitions[h.isOpened?a.nextMethod:a.openMethod](),h._preloadImages()}},_setDimension:function(){var a,b,d,e,f,g,i,j,k,l,m,o,r,s,t,u=h.getViewport(),v=0,w=!1,x=!1,y=h.wrap,z=h.skin,A=h.inner,B=h.current,C=B.width,D=B.height,E=B.minWidth,F=B.minHeight,G=B.maxWidth,H=B.maxHeight,I=B.scrolling,J=B.scrollOutside?B.scrollbarWidth:0,K=B.margin,L=p(K[1]+K[3]),M=p(K[0]+K[2]);if(y.add(z).add(A).width("auto").height("auto").removeClass("fancybox-tmp"),a=p(z.outerWidth(!0)-z.width()),b=p(z.outerHeight(!0)-z.height()),d=L+a,e=M+b,f=n(C)?(u.w-d)*p(C)/100:C,g=n(D)?(u.h-e)*p(D)/100:D,"iframe"===B.type){if(s=B.content,B.autoHeight&&1===s.data("ready"))try{s[0].contentWindow.document.location&&(A.width(f).height(9999),t=s.contents().find("body"),J&&t.css("overflow-x","hidden"),g=t.outerHeight(!0))}catch(N){}}else(B.autoWidth||B.autoHeight)&&(A.addClass("fancybox-tmp"),B.autoWidth||A.width(f),B.autoHeight||A.height(g),B.autoWidth&&(f=A.width()),B.autoHeight&&(g=A.height()),A.removeClass("fancybox-tmp"));if(C=p(f),D=p(g),k=f/g,E=p(n(E)?p(E,"w")-d:E),G=p(n(G)?p(G,"w")-d:G),F=p(n(F)?p(F,"h")-e:F),H=p(n(H)?p(H,"h")-e:H),i=G,j=H,B.fitToView&&(G=Math.min(u.w-d,G),H=Math.min(u.h-e,H)),o=u.w-L,r=u.h-M,B.aspectRatio?(C>G&&(C=G,D=p(C/k)),D>H&&(D=H,C=p(D*k)),E>C&&(C=E,D=p(C/k)),F>D&&(D=F,C=p(D*k))):(C=Math.max(E,Math.min(C,G)),B.autoHeight&&"iframe"!==B.type&&(A.width(C),D=A.height()),D=Math.max(F,Math.min(D,H))),B.fitToView)if(A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height(),B.aspectRatio)for(;(l>o||m>r)&&C>E&&D>F&&!(v++>19);)D=Math.max(F,Math.min(H,D-10)),C=p(D*k),E>C&&(C=E,D=p(C/k)),C>G&&(C=G,D=p(C/k)),A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height();else C=Math.max(E,Math.min(C,C-(l-o))),D=Math.max(F,Math.min(D,D-(m-r)));J&&"auto"===I&&g>D&&o>C+a+J&&(C+=J),A.width(C).height(D),y.width(C+a),l=y.width(),m=y.height(),w=(l>o||m>r)&&C>E&&D>F,x=B.aspectRatio?i>C&&j>D&&f>C&&g>D:(i>C||j>D)&&(f>C||g>D),c.extend(B,{dim:{width:q(l),height:q(m)},origWidth:f,origHeight:g,canShrink:w,canExpand:x,wPadding:a,hPadding:b,wrapSpace:m-z.outerHeight(!0),skinSpace:z.height()-D}),!s&&B.autoHeight&&D>F&&H>D&&!x&&A.height("auto")},_getPosition:function(a){var b=h.current,c=h.getViewport(),d=b.margin,e=h.wrap.width()+d[1]+d[3],f=h.wrap.height()+d[0]+d[2],g={position:"absolute",top:d[0],left:d[3]};return b.autoCenter&&b.fixed&&!a&&f<=c.h&&e<=c.w?g.position="fixed":b.locked||(g.top+=c.y,g.left+=c.x),g.top=q(Math.max(g.top,g.top+(c.h-f)*b.topRatio)),g.left=q(Math.max(g.left,g.left+(c.w-e)*b.leftRatio)),g},_afterZoomIn:function(){var a=h.current;a&&(h.isOpen=h.isOpened=!0,h.wrap.css("overflow","visible").addClass("fancybox-opened"),h.update(),(a.closeClick||a.nextClick&&h.group.length>1)&&h.inner.css("cursor","pointer").bind("click.fb",function(b){c(b.target).is("a")||c(b.target).parent().is("a")||(b.preventDefault(),h[a.closeClick?"close":"next"]())}),a.closeBtn&&c(a.tpl.closeBtn).appendTo(h.skin).bind("click.fb",function(a){a.preventDefault(),h.close()}),a.arrows&&h.group.length>1&&((a.loop||a.index>0)&&c(a.tpl.prev).appendTo(h.outer).bind("click.fb",h.prev),(a.loop||a.index<h.group.length-1)&&c(a.tpl.next).appendTo(h.outer).bind("click.fb",h.next)),h.trigger("afterShow"),a.loop||a.index!==a.group.length-1?h.opts.autoPlay&&!h.player.isActive&&(h.opts.autoPlay=!1,h.play()):h.play(!1))},_afterZoomOut:function(a){a=a||h.current,c(".fancybox-wrap").trigger("onReset").remove(),c.extend(h,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),h.trigger("afterClose",a)}}),h.transitions={getOrigPosition:function(){var a=h.current,b=a.element,c=a.orig,d={},e=50,f=50,g=a.hPadding,i=a.wPadding,j=h.getViewport();return!c&&a.isDom&&b.is(":visible")&&(c=b.find("img:first"),c.length||(c=b)),l(c)?(d=c.offset(),c.is("img")&&(e=c.outerWidth(),f=c.outerHeight())):(d.top=j.y+(j.h-f)*a.topRatio,d.left=j.x+(j.w-e)*a.leftRatio),("fixed"===h.wrap.css("position")||a.locked)&&(d.top-=j.y,d.left-=j.x),d={top:q(d.top-g*a.topRatio),left:q(d.left-i*a.leftRatio),width:q(e+i),height:q(f+g)}},step:function(a,b){var c,d,e,f=b.prop,g=h.current,i=g.wrapSpace,j=g.skinSpace;("width"===f||"height"===f)&&(c=b.end===b.start?1:(a-b.start)/(b.end-b.start),h.isClosing&&(c=1-c),d="width"===f?g.wPadding:g.hPadding,e=a-d,h.skin[f](p("width"===f?e:e-i*c)),h.inner[f](p("width"===f?e:e-i*c-j*c)))},zoomIn:function(){var a=h.current,b=a.pos,d=a.openEffect,e="elastic"===d,f=c.extend({opacity:1},b);delete f.position,e?(b=this.getOrigPosition(),a.openOpacity&&(b.opacity=.1)):"fade"===d&&(b.opacity=.1),h.wrap.css(b).animate(f,{duration:"none"===d?0:a.openSpeed,easing:a.openEasing,step:e?this.step:null,complete:h._afterZoomIn})},zoomOut:function(){var a=h.current,b=a.closeEffect,c="elastic"===b,d={opacity:.1};c&&(d=this.getOrigPosition(),a.closeOpacity&&(d.opacity=.1)),h.wrap.animate(d,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:c?this.step:null,complete:h._afterZoomOut})},changeIn:function(){var a,b=h.current,c=b.nextEffect,d=b.pos,e={opacity:1},f=h.direction,g=200;d.opacity=.1,"elastic"===c&&(a="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(d[a]=q(p(d[a])-g),e[a]="+="+g+"px"):(d[a]=q(p(d[a])+g),e[a]="-="+g+"px")),"none"===c?h._afterZoomIn():h.wrap.css(d).animate(e,{duration:b.nextSpeed,easing:b.nextEasing,complete:h._afterZoomIn})},changeOut:function(){var a=h.previous,b=a.prevEffect,d={opacity:.1},e=h.direction,f=200;"elastic"===b&&(d["down"===e||"up"===e?"top":"left"]=("up"===e||"left"===e?"-":"+")+"="+f+"px"),a.wrap.animate(d,{duration:"none"===b?0:a.prevSpeed,
easing:a.prevEasing,complete:function(){c(this).trigger("onReset").remove()}})}},h.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!k,fixed:!0},overlay:null,fixed:!1,el:c("html"),create:function(a){a=c.extend({},this.defaults,a),this.overlay&&this.close(),this.overlay=c('<div class="fancybox-overlay"></div>').appendTo(h.coming?h.coming.parent:a.parent),this.fixed=!1,a.fixed&&h.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var b=this;a=c.extend({},this.defaults,a),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a),this.fixed||(f.bind("resize.overlay",c.proxy(this.update,this)),this.update()),a.closeClick&&this.overlay.bind("click.overlay",function(a){return c(a.target).hasClass("fancybox-overlay")?(h.isActive?h.close():b.close(),!1):void 0}),this.overlay.css(a.css).show()},close:function(){var a,b;f.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(c(".fancybox-margin").removeClass("fancybox-margin"),a=f.scrollTop(),b=f.scrollLeft(),this.el.removeClass("fancybox-lock"),f.scrollTop(a).scrollLeft(b)),c(".fancybox-overlay").remove().hide(),c.extend(this,{overlay:null,fixed:!1})},update:function(){var a,c="100%";this.overlay.width(c).height("100%"),i?(a=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),g.width()>a&&(c=g.width())):g.width()>f.width()&&(c=g.width()),this.overlay.width(c).height(g.height())},onReady:function(a,b){var d=this.overlay;c(".fancybox-overlay").stop(!0,!0),d||this.create(a),a.locked&&this.fixed&&b.fixed&&(d||(this.margin=g.height()>f.height()?c("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1),a.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var d,e;b.locked&&(this.margin!==!1&&(c("*").filter(function(){return"fixed"===c(this).css("position")&&!c(this).hasClass("fancybox-overlay")&&!c(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),d=f.scrollTop(),e=f.scrollLeft(),this.el.addClass("fancybox-lock"),f.scrollTop(d).scrollLeft(e)),this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!h.coming&&this.overlay.fadeOut(a.speedOut,c.proxy(this.close,this))}},h.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var b,d,e=h.current,f=e.title,g=a.type;if(c.isFunction(f)&&(f=f.call(e.element,e)),m(f)&&""!==c.trim(f)){switch(b=c('<div class="fancybox-title fancybox-title-'+g+'-wrap">'+f+"</div>"),g){case"inside":d=h.skin;break;case"outside":d=h.wrap;break;case"over":d=h.inner;break;default:d=h.skin,b.appendTo("body"),i&&b.width(b.width()),b.wrapInner('<span class="child"></span>'),h.current.margin[2]+=Math.abs(p(b.css("margin-bottom")))}b["top"===a.position?"prependTo":"appendTo"](d)}}},c.fn.fancybox=function(a){var b,d=c(this),e=this.selector||"",f=function(f){var g,i,j=c(this).blur(),k=b;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||j.is(".fancybox-wrap")||(g=a.groupAttr||"data-fancybox-group",i=j.attr(g),i||(g="rel",i=j.get(0)[g]),i&&""!==i&&"nofollow"!==i&&(j=e.length?c(e):d,j=j.filter("["+g+'="'+i+'"]'),k=j.index(this)),a.index=k,h.open(j,a)!==!1&&f.preventDefault())};return a=a||{},b=a.index||0,e&&a.live!==!1?g.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-item, .fancybox-nav')","click.fb-start",f):d.unbind("click.fb-start").bind("click.fb-start",f),this.filter("[data-fancybox-start=1]").trigger("click"),this},g.ready(function(){var b,f;c.scrollbarWidth===d&&(c.scrollbarWidth=function(){var a=c('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),d=b.innerWidth()-b.height(99).innerWidth();return a.remove(),d}),c.support.fixedPosition===d&&(c.support.fixedPosition=function(){var a=c('<div style="position:fixed;top:20px;"></div>').appendTo("body"),b=20===a[0].offsetTop||15===a[0].offsetTop;return a.remove(),b}()),c.extend(h.defaults,{scrollbarWidth:c.scrollbarWidth(),fixed:c.support.fixedPosition,parent:c("body")}),b=c(a).width(),e.addClass("fancybox-lock-test"),f=c(a).width(),e.removeClass("fancybox-lock-test"),c("<style type='text/css'>.fancybox-margin{margin-right:"+(f-b)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(a){var b=a.fancybox;b.helpers.buttons={defaults:{skipSingle:!1,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(a,b){return a.skipSingle&&b.group.length<2?(b.helpers.buttons=!1,void(b.closeBtn=!0)):void(b.margin["bottom"===a.position?2:0]+=30)},onPlayStart:function(){this.buttons&&this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")},onPlayEnd:function(){this.buttons&&this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")},afterShow:function(c,d){var e=this.buttons;e||(this.list=a(c.tpl).addClass(c.position).appendTo("body"),e={prev:this.list.find(".btnPrev").click(b.prev),next:this.list.find(".btnNext").click(b.next),play:this.list.find(".btnPlay").click(b.play),toggle:this.list.find(".btnToggle").click(b.toggle),close:this.list.find(".btnClose").click(b.close)}),d.index>0||d.loop?e.prev.removeClass("btnDisabled"):e.prev.addClass("btnDisabled"),d.loop||d.index<d.group.length-1?(e.next.removeClass("btnDisabled"),e.play.removeClass("btnDisabled")):(e.next.addClass("btnDisabled"),e.play.addClass("btnDisabled")),this.buttons=e,this.onUpdate(c,d)},onUpdate:function(a,b){var c;this.buttons&&(c=this.buttons.toggle.removeClass("btnDisabled btnToggleOn"),b.canShrink?c.addClass("btnToggleOn"):b.canExpand||c.addClass("btnDisabled"))},beforeClose:function(){this.list&&this.list.remove(),this.list=null,this.buttons=null}}}(jQuery),function(a){var b=a.fancybox;b.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(b){var c;return b.element&&(c=a(b.element).find("img").attr("src")),!c&&"image"===b.type&&b.href&&(c=b.href),c}},wrap:null,list:null,width:0,init:function(b,c){var d,e=this,f=b.width,g=b.height,h=b.source;d="";for(var i=0;i<c.group.length;i++)d+='<li><a style="width:'+f+"px;height:"+g+'px;" href="javascript:jQuery.fancybox.jumpto('+i+');"></a></li>';this.wrap=a('<div id="fancybox-thumbs"></div>').addClass(b.position).appendTo("body"),this.list=a("<ul>"+d+"</ul>").appendTo(this.wrap),a.each(c.group,function(b){var d=h(c.group[b]);d&&a("<img />").load(function(){var c,d,h,i=this.width,j=this.height;e.list&&i&&j&&(c=i/f,d=j/g,h=e.list.children().eq(b).find("a"),c>=1&&d>=1&&(c>d?(i=Math.floor(i/d),j=g):(i=f,j=Math.floor(j/c))),a(this).css({width:i,height:j,top:Math.floor(g/2-j/2),left:Math.floor(f/2-i/2)}),h.width(f).height(g),a(this).hide().appendTo(h).fadeIn(300))}).attr("src",d)}),this.width=this.list.children().eq(0).outerWidth(!0),this.list.width(this.width*(c.group.length+1)).css("left",Math.floor(.5*a(window).width()-(c.index*this.width+.5*this.width)))},beforeLoad:function(a,b){return b.group.length<2?void(b.helpers.thumbs=!1):void(b.margin["top"===a.position?0:2]+=a.height+15)},afterShow:function(a,b){this.list?this.onUpdate(a,b):this.init(a,b),this.list.children().removeClass("active").eq(b.index).addClass("active")},onUpdate:function(b,c){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*a(window).width()-(c.index*this.width+.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery),function(a){"use strict";var b=a.fancybox,c=function(b,c,d){return d=d||"","object"===a.type(d)&&(d=a.param(d,!0)),a.each(c,function(a,c){b=b.replace("$"+a,c||"")}),d.length&&(b+=(b.indexOf("?")>0?"&":"?")+d),b};b.helpers.media={defaults:{youtube:{matcher:/(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(b,c,d){return d.swf.flashVars="playerVars="+a.param(c,!0),"//www.metacafe.com/fplayer/"+b[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(a){return"//maps.google."+a[1]+"/"+a[3]+a[4]+"&output="+(a[4].indexOf("layer=c")>0?"svembed":"embed")}}},beforeLoad:function(b,d){var e,f,g,h,i=d.href||"",j=!1;for(e in b)if(b.hasOwnProperty(e)&&(f=b[e],g=i.match(f.matcher))){j=f.type,h=a.extend(!0,{},f.params,d[e]||(a.isPlainObject(b[e])?b[e].params:null)),i="function"===a.type(f.url)?f.url.call(this,g,h,d):c(f.url,g,h);break}j&&(d.href=i,d.type=j,d.autoHeight=!1)}}}(jQuery),Sanitize.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i,Sanitize.RELATIVE="__RELATIVE__",Sanitize.ALL="__ALL__",Sanitize.prototype.clean_node=function(a){function b(a,b){var c;for(c=0;c<b.length;c++)if(b[c]==a)return c;return-1}function c(){var a,b,c=[],d={};for(a=0;a<arguments.length;a++)if(arguments[a]&&arguments[a].length)for(b=0;b<arguments[a].length;b++)d[arguments[a][b]]||(d[arguments[a][b]]=!0,c.push(arguments[a][b]));return c}function d(a){var b;switch(a.nodeType){case 1:e.call(this,a);break;case 3:b=a.cloneNode(!1),this.current_element.appendChild(b);break;case 5:b=a.cloneNode(!1),this.current_element.appendChild(b);break;case 8:this.config.allow_comments&&(b=a.cloneNode(!1),this.current_element.appendChild(b));break;default:console&&console.log&&console.log("unknown node type",a.nodeType)}}function e(a){var e,g,h,i,j,k,l,m,n,o,p=f.call(this,a);if(a=p.node,h=a.nodeName.toLowerCase(),g=this.current_element,this.allowed_elements[h]||p.whitelist){this.current_element=this.dom.createElement(a.nodeName),g.appendChild(this.current_element);var q=this.config.attributes;for(i=c(q[h],q[Sanitize.ALL],p.attr_whitelist),e=0;e<i.length;e++)k=i[e],j=a.attributes[k],j&&(o=!0,this.config.protocols[h]&&this.config.protocols[h][k]&&(m=this.config.protocols[h][k],n=j.value.toLowerCase().match(Sanitize.REGEX_PROTOCOL),o=n?-1!=b(n[1],m):-1!=b(Sanitize.RELATIVE,m)),o&&(l=document.createAttribute(k),l.value=j.value,this.current_element.setAttributeNode(l)));if(this.config.add_attributes[h])for(k in this.config.add_attributes[h])l=document.createAttribute(k),l.value=this.config.add_attributes[h][k],this.current_element.setAttributeNode(l)}else if(-1!=b(a,this.whitelist_nodes)){for(this.current_element=a.cloneNode(!0);this.current_element.childNodes.length>0;)this.current_element.removeChild(this.current_element.firstChild);g.appendChild(this.current_element)}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[h])for(e=0;e<a.childNodes.length;e++)d.call(this,a.childNodes[e]);this.current_element.normalize&&this.current_element.normalize(),this.current_element=g}function f(a){var d,e,f,g={attr_whitelist:[],node:a,whitelist:!1};for(d=0;d<this.transformers.length;d++)if(f=this.transformers[d]({allowed_elements:this.allowed_elements,config:this.config,node:a,node_name:a.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom}),null!=f){if("object"!=typeof f)throw new Error("transformer output must be an object or null");if(f.whitelist_nodes&&f.whitelist_nodes instanceof Array)for(e=0;e<f.whitelist_nodes.length;e++)-1==b(f.whitelist_nodes[e],this.whitelist_nodes)&&this.whitelist_nodes.push(f.whitelist_nodes[e]);g.whitelist=f.whitelist?!0:!1,f.attr_whitelist&&(g.attr_whitelist=c(g.attr_whitelist,f.attr_whitelist)),g.node=f.node?f.node:g.node}return g}var g=this.dom.createDocumentFragment();for(this.current_element=g,this.whitelist_nodes=[],i=0;i<a.childNodes.length;i++)d.call(this,a.childNodes[i]);return g.normalize&&g.normalize(),g},"function"==typeof define&&define("sanitize",[],function(){return Sanitize}),Sanitize.Config||(Sanitize.Config={}),Sanitize.Config.BASIC={elements:["a","b","blockquote","br","cite","code","dd","dl","dt","em","i","li","ol","p","pre","q","small","strike","strong","sub","sup","u","ul"],attributes:{a:["href"],blockquote:["cite"],q:["cite"]},add_attributes:{a:{rel:"nofollow"}},protocols:{a:{href:["ftp","http","https","mailto",Sanitize.RELATIVE]},blockquote:{cite:["http","https",Sanitize.RELATIVE]},q:{cite:["http","https",Sanitize.RELATIVE]}}},Sanitize.Config.RELAXED={elements:["a","b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","hr","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","del","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","div","span"],attributes:{a:["href","title"],blockquote:["cite"],col:["span","width"],colgroup:["span","width"],img:["align","alt","height","src","title","width","class"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width","align"],th:["abbr","axis","colspan","rowspan","scope","width","align"],ul:["type"],div:["class"],span:["class"],hr:[""]},protocols:{a:{href:["ftp","http","https","mailto",Sanitize.RELATIVE]},blockquote:{cite:["http","https",Sanitize.RELATIVE]},img:{src:["http","https",Sanitize.RELATIVE]},q:{cite:["http","https",Sanitize.RELATIVE]}}},Sanitize.Config.RESTRICTED={elements:["b","em","i","strong","u"]},function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){}function e(a,b,c){}function f(a,b,c){}function g(a,b,c){}function h(a){return a.replace(y,"&lt;").replace(z,"&gt;")}function i(a,b,c,d){if(d=d||x,c=o(c),"href"===b||"src"===b){if(c=v.trim(c),"#"===c)return"#";if("http://"!==c.substr(0,7)&&"https://"!==c.substr(0,8)&&"mailto:"!==c.substr(0,7)&&"/"!==c[0])return""}else if("background"===b){if(F.lastIndex=0,F.test(c))return""}else if("style"===b){if(G.lastIndex=0,G.test(c))return"";if(H.lastIndex=0,H.test(c)&&(F.lastIndex=0,F.test(c)))return"";c=d.process(c)}return c=p(c)}function j(a){return a.replace(A,"&quot;")}function k(a){return a.replace(B,'"')}function l(a){return a.replace(C,function(a,b){return"x"===b[0]||"X"===b[0]?String.fromCharCode(parseInt(b.substr(1),16)):String.fromCharCode(parseInt(b,10))})}function m(a){return a.replace(D,":").replace(E," ")}function n(a){for(var b="",c=0,d=a.length;d>c;c++)b+=a.charCodeAt(c)<32?" ":a.charAt(c);return v.trim(b)}function o(a){return a=k(a),a=l(a),a=m(a),a=n(a)}function p(a){return a=j(a),a=h(a)}function q(){return""}function r(a,b){function c(b){return d?!0:-1!==v.indexOf(a,b)}"function"!=typeof b&&(b=function(){});var d=!Array.isArray(a),e=[],f=!1;return{onIgnoreTag:function(a,d,g){if(c(a)){if(g.isClosing){var h="[/removed]",i=g.position+h.length;return e.push([f!==!1?f:g.position,i]),f=!1,h}return f||(f=g.position),"[removed]"}return b(a,d,g)},remove:function(a){var b="",c=0;return v.forEach(e,function(d){b+=a.slice(c,d[0]),c=d[1]}),b+=a.slice(c)}}}function s(a){return a.replace(I,"")}function t(a){var b=a.split("");return b=b.filter(function(a){var b=a.charCodeAt(0);return 127===b?!1:31>=b?10===b||13===b?!0:!1:!0}),b.join("")}var u=a("cssfilter").FilterCSS,v=a("./util"),w={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","colspan","align","valign"],tfoot:["align","valign"],th:["width","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},x=new u,y=/</g,z=/>/g,A=/"/g,B=/&quot;/g,C=/&#([a-zA-Z0-9]*);?/gim,D=/&colon;?/gim,E=/&newline;?/gim,F=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,G=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,H=/u\s*r\s*l\s*\(.*/gi,I=/<!--[\s\S]*?-->/g;c.whiteList=w,c.onTag=d,c.onIgnoreTag=e,c.onTagAttr=f,c.onIgnoreTagAttr=g,c.safeAttrValue=i,c.escapeHtml=h,c.escapeQuote=j,c.unescapeQuote=k,c.escapeHtmlEntities=l,c.escapeDangerHtml5Entities=m,c.clearNonPrintableCharacter=n,c.friendlyAttrValue=o,c.escapeAttrValue=p,c.onIgnoreTagStripAll=q,c.StripTagBody=r,c.stripCommentTag=s,c.stripBlankChar=t,c.cssFilter=x},{"./util":4,cssfilter:8}],2:[function(a,b,c){function d(a,b){var c=new g(b);return c.process(a)}var e=a("./default"),f=a("./parser"),g=a("./xss");c=b.exports=d,c.FilterXSS=g;for(var h in e)c[h]=e[h];for(var h in f)c[h]=f[h];"function"==typeof define&&define.amd&&define(function(){return b.exports}),"undefined"!=typeof window&&(window.filterXSS=b.exports)},{"./default":1,"./parser":3,"./xss":5}],3:[function(a,b,c){function d(a){var b=a.indexOf(" ");if(-1===b)var c=a.slice(1,-1);else var c=a.slice(1,b+1);return c=l.trim(c).toLowerCase(),"/"===c.slice(0,1)&&(c=c.slice(1)),"/"===c.slice(-1)&&(c=c.slice(0,-1)),c}function e(a){return"</"===a.slice(0,2)}function f(a,b,c){"user strict";var f="",g=0,h=!1,i=!1,j=0,k=a.length,l="",m="";for(j=0;k>j;j++){var n=a.charAt(j);if(h===!1){if("<"===n){h=j;continue}}else if(i===!1){if("<"===n){f+=c(a.slice(g,j)),h=j,g=j;continue}if(">"===n){f+=c(a.slice(g,h)),l=a.slice(h,j+1),m=d(l),f+=b(h,f.length,m,l,e(l)),g=j+1,h=!1;continue}if(('"'===n||"'"===n)&&"="===a.charAt(j-1)){i=n;continue}}else if(n===i){i=!1;continue}}return g<a.length&&(f+=c(a.substr(g))),f}function g(a,b){"user strict";function c(a,c){if(a=l.trim(a),a=a.replace(m,"").toLowerCase(),!(a.length<1)){var d=b(a,c||"");d&&e.push(d)}}for(var d=0,e=[],f=!1,g=a.length,j=0;g>j;j++){var n,o,p=a.charAt(j);if(f!==!1||"="!==p)if(f===!1||j!==d||'"'!==p&&"'"!==p||"="!==a.charAt(j-1))if(" "!==p);else{if(f===!1){if(o=h(a,j),-1===o){n=l.trim(a.slice(d,j)),c(n),f=!1,d=j+1;continue}j=o-1;continue}if(o=i(a,j-1),-1===o){n=l.trim(a.slice(d,j)),n=k(n),c(f,n),f=!1,d=j+1;continue}}else{if(o=a.indexOf(p,j+1),-1===o)break;n=l.trim(a.slice(d+1,o)),c(f,n),f=!1,j=o,d=j+1}else f=a.slice(d,j),d=j+1}return d<a.length&&(f===!1?c(a.slice(d)):c(f,k(l.trim(a.slice(d))))),l.trim(e.join(" "))}function h(a,b){for(;b<a.length;b++){var c=a[b];if(" "!==c)return"="===c?b:-1}}function i(a,b){for(;b>0;b--){var c=a[b];if(" "!==c)return"="===c?b:-1}}function j(a){return'"'===a[0]&&'"'===a[a.length-1]||"'"===a[0]&&"'"===a[a.length-1]?!0:!1}function k(a){return j(a)?a.substr(1,a.length-2):a}var l=a("./util"),m=/[^a-zA-Z0-9_:\.\-]/gim;c.parseTag=f,c.parseAttr=g},{"./util":4}],4:[function(a,b,c){b.exports={indexOf:function(a,b){var c,d;if(Array.prototype.indexOf)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},forEach:function(a,b,c){var d,e;if(Array.prototype.forEach)return a.forEach(b,c);for(d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a)},trim:function(a){return String.prototype.trim?a.trim():a.replace(/(^\s*)|(\s*$)/g,"")}}},{}],5:[function(a,b,c){function d(a){return void 0===a||null===a}function e(a){var b=a.indexOf(" ");if(-1===b)return{html:"",closing:"/"===a[a.length-2]};a=l.trim(a.slice(b+1,-1));var c="/"===a[a.length-1];return c&&(a=l.trim(a.slice(0,-1))),{html:a,closing:c}}function f(a){a=a||{},a.stripIgnoreTag&&(a.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),a.onIgnoreTag=h.onIgnoreTagStripAll),a.whiteList=a.whiteList||h.whiteList,a.onTag=a.onTag||h.onTag,a.onTagAttr=a.onTagAttr||h.onTagAttr,a.onIgnoreTag=a.onIgnoreTag||h.onIgnoreTag,a.onIgnoreTagAttr=a.onIgnoreTagAttr||h.onIgnoreTagAttr,a.safeAttrValue=a.safeAttrValue||h.safeAttrValue,a.escapeHtml=a.escapeHtml||h.escapeHtml,a.css=a.css||{},this.options=a,this.cssFilter=new g(a.css)}var g=a("cssfilter").FilterCSS,h=a("./default"),i=a("./parser"),j=i.parseTag,k=i.parseAttr,l=a("./util");f.prototype.process=function(a){if(a=a||"",a=a.toString(),!a)return"";var b=this,c=b.options,f=c.whiteList,g=c.onTag,i=c.onIgnoreTag,m=c.onTagAttr,n=c.onIgnoreTagAttr,o=c.safeAttrValue,p=c.escapeHtml,q=b.cssFilter;if(c.stripBlankChar&&(a=h.stripBlankChar(a)),c.allowCommentTag||(a=h.stripCommentTag(a)),c.stripIgnoreTagBody){var r=h.StripTagBody(c.stripIgnoreTagBody,i);i=r.onIgnoreTag}else r=!1;var s=j(a,function(a,b,c,h,j){var r={sourcePosition:a,position:b,isClosing:j,isWhite:c in f},s=g(c,h,r);if(!d(s))return s;if(r.isWhite){if(r.isClosing)return"</"+c+">";var t=e(h),u=f[c],v=k(t.html,function(a,b){var e=-1!==l.indexOf(u,a),f=m(c,a,b,e);if(!d(f))return f;if(e)return b=o(c,a,b,q),b?a+'="'+b+'"':a;var f=n(c,a,b,e);return d(f)?void 0:f}),h="<"+c;return v&&(h+=" "+v),t.closing&&(h+=" /"),h+=">"}var s=i(c,h,r);return d(s)?p(h):s},p);return r&&(s=r.remove(s)),s},b.exports=f},{"./default":1,"./parser":3,"./util":4,cssfilter:8}],6:[function(a,b,c){function d(a){return void 0===a||null===a}function e(a){a=a||{},a.whiteList=a.whiteList||f.whiteList,a.onAttr=a.onAttr||f.onAttr,a.onIgnoreAttr=a.onIgnoreAttr||f.onIgnoreAttr,this.options=a}var f=a("./default"),g=a("./parser");a("./util");e.prototype.process=function(a){if(a=a||"",a=a.toString(),!a)return"";var b=this,c=b.options,e=c.whiteList,f=c.onAttr,h=c.onIgnoreAttr,i=g(a,function(a,b,c,g,i){var j=e[c],k=!1;j===!0?k=j:"function"==typeof j?k=j(g):j instanceof RegExp&&(k=j.test(g)),k!==!0&&(k=!1);var l={position:b,sourcePosition:a,source:i,isWhite:k};if(k){var m=f(c,g,l);return d(m)?c+":"+g:m}var m=h(c,g,l);return d(m)?void 0:m});return i},b.exports=e},{"./default":7,"./parser":9,"./util":10}],7:[function(a,b,c){function d(a,b,c){}function e(a,b,c){}var f={};f["align-content"]=!1,f["align-items"]=!1,f["align-self"]=!1,f["alignment-adjust"]=!1,f["alignment-baseline"]=!1,f.all=!1,f["anchor-point"]=!1,f.animation=!1,f["animation-delay"]=!1,f["animation-direction"]=!1,f["animation-duration"]=!1,f["animation-fill-mode"]=!1,f["animation-iteration-count"]=!1,f["animation-name"]=!1,f["animation-play-state"]=!1,f["animation-timing-function"]=!1,f.azimuth=!1,f["backface-visibility"]=!1,f.background=!0,f["background-attachment"]=!0,f["background-clip"]=!0,f["background-color"]=!0,f["background-image"]=!0,f["background-origin"]=!0,f["background-position"]=!0,f["background-repeat"]=!0,f["background-size"]=!0,f["baseline-shift"]=!1,f.binding=!1,f.bleed=!1,f["bookmark-label"]=!1,f["bookmark-level"]=!1,f["bookmark-state"]=!1,f.border=!0,f["border-bottom"]=!0,f["border-bottom-color"]=!0,f["border-bottom-left-radius"]=!0,f["border-bottom-right-radius"]=!0,f["border-bottom-style"]=!0,f["border-bottom-width"]=!0,f["border-collapse"]=!0,f["border-color"]=!0,f["border-image"]=!0,f["border-image-outset"]=!0,f["border-image-repeat"]=!0,f["border-image-slice"]=!0,f["border-image-source"]=!0,f["border-image-width"]=!0,f["border-left"]=!0,f["border-left-color"]=!0,f["border-left-style"]=!0,f["border-left-width"]=!0,f["border-radius"]=!0,f["border-right"]=!0,f["border-right-color"]=!0,f["border-right-style"]=!0,f["border-right-width"]=!0,f["border-spacing"]=!0,f["border-style"]=!0,f["border-top"]=!0,f["border-top-color"]=!0,f["border-top-left-radius"]=!0,f["border-top-right-radius"]=!0,f["border-top-style"]=!0,f["border-top-width"]=!0,f["border-width"]=!0,f.bottom=!1,f["box-decoration-break"]=!0,f["box-shadow"]=!0,f["box-sizing"]=!0,f["box-snap"]=!0,f["box-suppress"]=!0,f["break-after"]=!0,f["break-before"]=!0,f["break-inside"]=!0,f["caption-side"]=!1,f.chains=!1,f.clear=!0,f.clip=!1,f["clip-path"]=!1,f["clip-rule"]=!1,f.color=!0,f["color-interpolation-filters"]=!0,f["column-count"]=!1,f["column-fill"]=!1,f["column-gap"]=!1,f["column-rule"]=!1,f["column-rule-color"]=!1,f["column-rule-style"]=!1,f["column-rule-width"]=!1,f["column-span"]=!1,f["column-width"]=!1,f.columns=!1,f.contain=!1,f.content=!1,f["counter-increment"]=!1,f["counter-reset"]=!1,f["counter-set"]=!1,f.crop=!1,f.cue=!1,f["cue-after"]=!1,f["cue-before"]=!1,f.cursor=!1,f.direction=!1,f.display=!0,f["display-inside"]=!0,f["display-list"]=!0,f["display-outside"]=!0,f["dominant-baseline"]=!1,f.elevation=!1,f["empty-cells"]=!1,f.filter=!1,f.flex=!1,f["flex-basis"]=!1,f["flex-direction"]=!1,f["flex-flow"]=!1,f["flex-grow"]=!1,f["flex-shrink"]=!1,f["flex-wrap"]=!1,f["float"]=!1,f["float-offset"]=!1,f["flood-color"]=!1,f["flood-opacity"]=!1,f["flow-from"]=!1,f["flow-into"]=!1,f.font=!0,f["font-family"]=!0,f["font-feature-settings"]=!0,f["font-kerning"]=!0,f["font-language-override"]=!0,f["font-size"]=!0,f["font-size-adjust"]=!0,f["font-stretch"]=!0,f["font-style"]=!0,f["font-synthesis"]=!0,f["font-variant"]=!0,f["font-variant-alternates"]=!0,f["font-variant-caps"]=!0,f["font-variant-east-asian"]=!0,f["font-variant-ligatures"]=!0,f["font-variant-numeric"]=!0,f["font-variant-position"]=!0,f["font-weight"]=!0,f.grid=!1,f["grid-area"]=!1,f["grid-auto-columns"]=!1,f["grid-auto-flow"]=!1,f["grid-auto-rows"]=!1,f["grid-column"]=!1,f["grid-column-end"]=!1,f["grid-column-start"]=!1,f["grid-row"]=!1,f["grid-row-end"]=!1,f["grid-row-start"]=!1,f["grid-template"]=!1,f["grid-template-areas"]=!1,f["grid-template-columns"]=!1,f["grid-template-rows"]=!1,f["hanging-punctuation"]=!1,f.height=!0,f.hyphens=!1,f.icon=!1,f["image-orientation"]=!1,f["image-resolution"]=!1,f["ime-mode"]=!1,f["initial-letters"]=!1,f["inline-box-align"]=!1,f["justify-content"]=!1,f["justify-items"]=!1,f["justify-self"]=!1,f.left=!1,f["letter-spacing"]=!0,f["lighting-color"]=!0,f["line-box-contain"]=!1,f["line-break"]=!1,f["line-grid"]=!1,f["line-height"]=!1,f["line-snap"]=!1,f["line-stacking"]=!1,f["line-stacking-ruby"]=!1,f["line-stacking-shift"]=!1,f["line-stacking-strategy"]=!1,f["list-style"]=!0,f["list-style-image"]=!0,f["list-style-position"]=!0,f["list-style-type"]=!0,f.margin=!0,f["margin-bottom"]=!0,f["margin-left"]=!0,f["margin-right"]=!0,f["margin-top"]=!0,f["marker-offset"]=!1,f["marker-side"]=!1,f.marks=!1,f.mask=!1,f["mask-box"]=!1,f["mask-box-outset"]=!1,f["mask-box-repeat"]=!1,f["mask-box-slice"]=!1,f["mask-box-source"]=!1,f["mask-box-width"]=!1,f["mask-clip"]=!1,f["mask-image"]=!1,f["mask-origin"]=!1,f["mask-position"]=!1,f["mask-repeat"]=!1,f["mask-size"]=!1,f["mask-source-type"]=!1,f["mask-type"]=!1,f["max-height"]=!0,f["max-lines"]=!1,f["max-width"]=!0,f["min-height"]=!0,f["min-width"]=!0,f["move-to"]=!1,f["nav-down"]=!1,f["nav-index"]=!1,f["nav-left"]=!1,f["nav-right"]=!1,f["nav-up"]=!1,f["object-fit"]=!1,f["object-position"]=!1,f.opacity=!1,f.order=!1,f.orphans=!1,f.outline=!1,f["outline-color"]=!1,f["outline-offset"]=!1,f["outline-style"]=!1,f["outline-width"]=!1,f.overflow=!1,f["overflow-wrap"]=!1,f["overflow-x"]=!1,f["overflow-y"]=!1,f.padding=!0,f["padding-bottom"]=!0,f["padding-left"]=!0,f["padding-right"]=!0,f["padding-top"]=!0,f.page=!1,f["page-break-after"]=!1,f["page-break-before"]=!1,f["page-break-inside"]=!1,f["page-policy"]=!1,f.pause=!1,f["pause-after"]=!1,f["pause-before"]=!1,f.perspective=!1,f["perspective-origin"]=!1,f.pitch=!1,f["pitch-range"]=!1,f["play-during"]=!1,f.position=!1,f["presentation-level"]=!1,f.quotes=!1,f["region-fragment"]=!1,f.resize=!1,f.rest=!1,f["rest-after"]=!1,f["rest-before"]=!1,f.richness=!1,f.right=!1,f.rotation=!1,f["rotation-point"]=!1,f["ruby-align"]=!1,f["ruby-merge"]=!1,f["ruby-position"]=!1,f["shape-image-threshold"]=!1,f["shape-outside"]=!1,f["shape-margin"]=!1,f.size=!1,f.speak=!1,f["speak-as"]=!1,f["speak-header"]=!1,f["speak-numeral"]=!1,f["speak-punctuation"]=!1,f["speech-rate"]=!1,f.stress=!1,f["string-set"]=!1,f["tab-size"]=!1,f["table-layout"]=!1,f["text-align"]=!0,f["text-align-last"]=!0,f["text-combine-upright"]=!0,f["text-decoration"]=!0,f["text-decoration-color"]=!0,f["text-decoration-line"]=!0,f["text-decoration-skip"]=!0,f["text-decoration-style"]=!0,f["text-emphasis"]=!0,f["text-emphasis-color"]=!0,f["text-emphasis-position"]=!0,f["text-emphasis-style"]=!0,f["text-height"]=!0,f["text-indent"]=!0,f["text-justify"]=!0,f["text-orientation"]=!0,f["text-overflow"]=!0,f["text-shadow"]=!0,f["text-space-collapse"]=!0,f["text-transform"]=!0,f["text-underline-position"]=!0,f["text-wrap"]=!0,f.top=!1,f.transform=!1,f["transform-origin"]=!1,f["transform-style"]=!1,f.transition=!1,f["transition-delay"]=!1,f["transition-duration"]=!1,f["transition-property"]=!1,f["transition-timing-function"]=!1,f["unicode-bidi"]=!1,f["vertical-align"]=!1,f.visibility=!1,f["voice-balance"]=!1,f["voice-duration"]=!1,f["voice-family"]=!1,f["voice-pitch"]=!1,f["voice-range"]=!1,f["voice-rate"]=!1,f["voice-stress"]=!1,f["voice-volume"]=!1,f.volume=!1,f["white-space"]=!1,f.widows=!1,f.width=!0,f["will-change"]=!1,f["word-break"]=!0,f["word-spacing"]=!0,f["word-wrap"]=!0,f["wrap-flow"]=!1,f["wrap-through"]=!1,f["writing-mode"]=!1,f["z-index"]=!1,c.whiteList=f,c.onAttr=d,c.onIgnoreAttr=e},{}],8:[function(a,b,c){function d(a,b){var c=new f(b);return c.process(a)}var e=a("./default"),f=a("./css");c=b.exports=d,c.FilterCSS=f;for(var g in e)c[g]=e[g];"function"==typeof define&&define.amd&&define(function(){return b.exports}),"undefined"!=typeof window&&(window.filterCSS=b.exports)},{"./css":6,"./default":7}],9:[function(a,b,c){function d(a,b){function c(){if(!f){var c=e.trim(a.slice(g,h)),d=c.indexOf(":");if(-1!==d){var j=e.trim(c.slice(0,d)),k=e.trim(c.slice(d+1));if(j){var l=b(g,i.length,j,k,c);l&&(i+=l+"; ")}}}g=h+1}a=e.trimRight(a),";"!==a[a.length-1]&&(a+=";");for(var d=a.length,f=!1,g=0,h=0,i="";d>h;h++){var j=a[h];if("/"===j&&"*"===a[h+1]){var k=a.indexOf("*/",h+2);if(-1===k)break;h=k+1,g=h+1,f=!1}else"("===j?f=!0:")"===j?f=!1:";"===j?f||c():"\n"===j&&c()}return e.trim(i)}var e=a("./util");b.exports=d},{"./util":10}],10:[function(a,b,c){b.exports={indexOf:function(a,b){var c,d;if(Array.prototype.indexOf)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},forEach:function(a,b,c){var d,e;if(Array.prototype.forEach)return a.forEach(b,c);for(d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a)},trim:function(a){return String.prototype.trim?a.trim():a.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(a){return String.prototype.trimRight?a.trimRight():a.replace(/(\s*$)/g,"")}}},{}]},{},[2]);var Base64=function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b={encode:function(b){var c,d,e,f,g,h,i,j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),e=b.charCodeAt(k++),
f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+a.charAt(f)+a.charAt(g)+a.charAt(h)+a.charAt(i);while(k<b.length);return j},decode:function(b){var c,d,e,f,g,h,i,j="",k=0;b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),h=a.indexOf(b.charAt(k++)),i=a.indexOf(b.charAt(k++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!=h&&(j+=String.fromCharCode(d)),64!=i&&(j+=String.fromCharCode(e));while(k<b.length);return j}};return b}(),MD5=function(){var a=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},b=function(a,b){return a<<b|a>>>32-b},c=function(a){for(var b=[],c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<c%32;return b},d=function(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b},e=function(a){for(var b="0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c},f=function(c,d,e,f,g,h){return a(b(a(a(d,c),a(f,h)),g),e)},g=function(a,b,c,d,e,g,h){return f(b&c|~b&d,a,b,e,g,h)},h=function(a,b,c,d,e,g,h){return f(b&d|c&~d,a,b,e,g,h)},i=function(a,b,c,d,e,g,h){return f(b^c^d,a,b,e,g,h)},j=function(a,b,c,d,e,g,h){return f(c^(b|~d),a,b,e,g,h)},k=function(b,c){b[c>>5]|=128<<c%32,b[(c+64>>>9<<4)+14]=c;for(var d,e,f,k,l=1732584193,m=-271733879,n=-1732584194,o=271733878,p=0;p<b.length;p+=16)d=l,e=m,f=n,k=o,l=g(l,m,n,o,b[p+0],7,-680876936),o=g(o,l,m,n,b[p+1],12,-389564586),n=g(n,o,l,m,b[p+2],17,606105819),m=g(m,n,o,l,b[p+3],22,-1044525330),l=g(l,m,n,o,b[p+4],7,-176418897),o=g(o,l,m,n,b[p+5],12,1200080426),n=g(n,o,l,m,b[p+6],17,-1473231341),m=g(m,n,o,l,b[p+7],22,-45705983),l=g(l,m,n,o,b[p+8],7,1770035416),o=g(o,l,m,n,b[p+9],12,-1958414417),n=g(n,o,l,m,b[p+10],17,-42063),m=g(m,n,o,l,b[p+11],22,-1990404162),l=g(l,m,n,o,b[p+12],7,1804603682),o=g(o,l,m,n,b[p+13],12,-40341101),n=g(n,o,l,m,b[p+14],17,-1502002290),m=g(m,n,o,l,b[p+15],22,1236535329),l=h(l,m,n,o,b[p+1],5,-165796510),o=h(o,l,m,n,b[p+6],9,-1069501632),n=h(n,o,l,m,b[p+11],14,643717713),m=h(m,n,o,l,b[p+0],20,-373897302),l=h(l,m,n,o,b[p+5],5,-701558691),o=h(o,l,m,n,b[p+10],9,38016083),n=h(n,o,l,m,b[p+15],14,-660478335),m=h(m,n,o,l,b[p+4],20,-405537848),l=h(l,m,n,o,b[p+9],5,568446438),o=h(o,l,m,n,b[p+14],9,-1019803690),n=h(n,o,l,m,b[p+3],14,-187363961),m=h(m,n,o,l,b[p+8],20,1163531501),l=h(l,m,n,o,b[p+13],5,-1444681467),o=h(o,l,m,n,b[p+2],9,-51403784),n=h(n,o,l,m,b[p+7],14,1735328473),m=h(m,n,o,l,b[p+12],20,-1926607734),l=i(l,m,n,o,b[p+5],4,-378558),o=i(o,l,m,n,b[p+8],11,-2022574463),n=i(n,o,l,m,b[p+11],16,1839030562),m=i(m,n,o,l,b[p+14],23,-35309556),l=i(l,m,n,o,b[p+1],4,-1530992060),o=i(o,l,m,n,b[p+4],11,1272893353),n=i(n,o,l,m,b[p+7],16,-155497632),m=i(m,n,o,l,b[p+10],23,-1094730640),l=i(l,m,n,o,b[p+13],4,681279174),o=i(o,l,m,n,b[p+0],11,-358537222),n=i(n,o,l,m,b[p+3],16,-722521979),m=i(m,n,o,l,b[p+6],23,76029189),l=i(l,m,n,o,b[p+9],4,-640364487),o=i(o,l,m,n,b[p+12],11,-421815835),n=i(n,o,l,m,b[p+15],16,530742520),m=i(m,n,o,l,b[p+2],23,-995338651),l=j(l,m,n,o,b[p+0],6,-198630844),o=j(o,l,m,n,b[p+7],10,1126891415),n=j(n,o,l,m,b[p+14],15,-1416354905),m=j(m,n,o,l,b[p+5],21,-57434055),l=j(l,m,n,o,b[p+12],6,1700485571),o=j(o,l,m,n,b[p+3],10,-1894986606),n=j(n,o,l,m,b[p+10],15,-1051523),m=j(m,n,o,l,b[p+1],21,-2054922799),l=j(l,m,n,o,b[p+8],6,1873313359),o=j(o,l,m,n,b[p+15],10,-30611744),n=j(n,o,l,m,b[p+6],15,-1560198380),m=j(m,n,o,l,b[p+13],21,1309151649),l=j(l,m,n,o,b[p+4],6,-145523070),o=j(o,l,m,n,b[p+11],10,-1120210379),n=j(n,o,l,m,b[p+2],15,718787259),m=j(m,n,o,l,b[p+9],21,-343485551),l=a(l,d),m=a(m,e),n=a(n,f),o=a(o,k);return[l,m,n,o]},l={hexdigest:function(a){return e(k(c(a),8*a.length))},hash:function(a){return d(k(c(a),8*a.length))}};return l}();Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice,d=Array.prototype.concat,e=c.call(arguments,1);return function(){return b.apply(a?a:this,d.call(e,c.call(arguments,0)))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),function(a){function b(a,b){return new f.Builder(a,b)}function c(a){return new f.Builder("message",a)}function d(a){return new f.Builder("iq",a)}function e(a){return new f.Builder("presence",a)}var f;f={VERSION:"1.1.3",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(a){for(var b=0;b<f.XHTML.tags.length;b++)if(a==f.XHTML.tags[b])return!0;return!1},validAttribute:function(a,b){if("undefined"!=typeof f.XHTML.attributes[a]&&f.XHTML.attributes[a].length>0)for(var c=0;c<f.XHTML.attributes[a].length;c++)if(b==f.XHTML.attributes[a][c])return!0;return!1},validCSS:function(a){for(var b=0;b<f.XHTML.css.length;b++)if(a==f.XHTML.css[b])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(a,b){f.NS[a]=b},forEachChild:function(a,b,c){var d,e;for(d=0;d<a.childNodes.length;d++)e=a.childNodes[d],e.nodeType!=f.ElementType.NORMAL||b&&!this.isTagEqual(e,b)||c(e)},isTagEqual:function(a,b){return a.tagName.toLowerCase()==b.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var a;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(a=this._getIEXmlDom(),a.appendChild(a.createElement("strophe"))):a=document.implementation.createDocument("jabber:client","strophe",null),a},xmlGenerator:function(){return f._xmlGenerator||(f._xmlGenerator=f._makeGenerator()),f._xmlGenerator},_getIEXmlDom:function(){for(var a=null,b=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],c=0;c<b.length&&null===a;c++)try{a=new ActiveXObject(b[c])}catch(d){a=null}return a},xmlElement:function(a){if(!a)return null;var b,c,d,e=f.xmlGenerator().createElement(a);for(b=1;b<arguments.length;b++)if(arguments[b])if("string"==typeof arguments[b]||"number"==typeof arguments[b])e.appendChild(f.xmlTextNode(arguments[b]));else if("object"==typeof arguments[b]&&"function"==typeof arguments[b].sort)for(c=0;c<arguments[b].length;c++)"object"==typeof arguments[b][c]&&"function"==typeof arguments[b][c].sort&&e.setAttribute(arguments[b][c][0],arguments[b][c][1]);else if("object"==typeof arguments[b])for(d in arguments[b])arguments[b].hasOwnProperty(d)&&e.setAttribute(d,arguments[b][d]);return e},xmlescape:function(a){return a=a.replace(/\&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/'/g,"&apos;"),a=a.replace(/"/g,"&quot;")},xmlTextNode:function(a){return f.xmlGenerator().createTextNode(a)},xmlHtmlNode:function(a){var b;if(window.DOMParser){var c=new DOMParser;b=c.parseFromString(a,"text/xml")}else b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a);return b},getText:function(a){if(!a)return null;var b="";0===a.childNodes.length&&a.nodeType==f.ElementType.TEXT&&(b+=a.nodeValue);for(var c=0;c<a.childNodes.length;c++)a.childNodes[c].nodeType==f.ElementType.TEXT&&(b+=a.childNodes[c].nodeValue);return f.xmlescape(b)},copyElement:function(a){var b,c;if(a.nodeType==f.ElementType.NORMAL){for(c=f.xmlElement(a.tagName),b=0;b<a.attributes.length;b++)c.setAttribute(a.attributes[b].nodeName.toLowerCase(),a.attributes[b].value);for(b=0;b<a.childNodes.length;b++)c.appendChild(f.copyElement(a.childNodes[b]))}else a.nodeType==f.ElementType.TEXT&&(c=f.xmlGenerator().createTextNode(a.nodeValue));return c},createHtml:function(a){var b,c,d,e,g,h,i,j,k,l,m;if(a.nodeType==f.ElementType.NORMAL)if(e=a.nodeName.toLowerCase(),f.XHTML.validTag(e))try{for(c=f.xmlElement(e),b=0;b<f.XHTML.attributes[e].length;b++)if(g=f.XHTML.attributes[e][b],h=a.getAttribute(g),"undefined"!=typeof h&&null!==h&&""!==h&&h!==!1&&0!==h)if("style"==g&&"object"==typeof h&&"undefined"!=typeof h.cssText&&(h=h.cssText),"style"==g){for(i=[],j=h.split(";"),d=0;d<j.length;d++)k=j[d].split(":"),l=k[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),f.XHTML.validCSS(l)&&(m=k[1].replace(/^\s*/,"").replace(/\s*$/,""),i.push(l+": "+m));i.length>0&&(h=i.join("; "),c.setAttribute(g,h))}else c.setAttribute(g,h);for(b=0;b<a.childNodes.length;b++)c.appendChild(f.createHtml(a.childNodes[b]))}catch(n){c=f.xmlTextNode("")}else for(c=f.xmlGenerator().createDocumentFragment(),b=0;b<a.childNodes.length;b++)c.appendChild(f.createHtml(a.childNodes[b]));else if(a.nodeType==f.ElementType.FRAGMENT)for(c=f.xmlGenerator().createDocumentFragment(),b=0;b<a.childNodes.length;b++)c.appendChild(f.createHtml(a.childNodes[b]));else a.nodeType==f.ElementType.TEXT&&(c=f.xmlTextNode(a.nodeValue));return c},escapeNode:function(a){return a.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(a){return a.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(a){return a.indexOf("@")<0?null:a.split("@")[0]},getDomainFromJid:function(a){var b=f.getBareJidFromJid(a);if(b.indexOf("@")<0)return b;var c=b.split("@");return c.splice(0,1),c.join("@")},getResourceFromJid:function(a){var b=a.split("/");return b.length<2?null:(b.splice(0,1),b.join("/"))},getBareJidFromJid:function(a){return a?a.split("/")[0]:null},log:function(a,b){},debug:function(a){this.log(this.LogLevel.DEBUG,a)},info:function(a){this.log(this.LogLevel.INFO,a)},warn:function(a){this.log(this.LogLevel.WARN,a)},error:function(a){this.log(this.LogLevel.ERROR,a)},fatal:function(a){this.log(this.LogLevel.FATAL,a)},serialize:function(a){var b;if(!a)return null;"function"==typeof a.tree&&(a=a.tree());var c,d,e=a.nodeName;for(a.getAttribute("_realname")&&(e=a.getAttribute("_realname")),b="<"+e,c=0;c<a.attributes.length;c++)"_realname"!=a.attributes[c].nodeName&&(b+=" "+a.attributes[c].nodeName.toLowerCase()+"='"+a.attributes[c].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/>/g,"&gt;").replace(/</g,"&lt;")+"'");if(a.childNodes.length>0){for(b+=">",c=0;c<a.childNodes.length;c++)switch(d=a.childNodes[c],d.nodeType){case f.ElementType.NORMAL:b+=f.serialize(d);break;case f.ElementType.TEXT:b+=f.xmlescape(d.nodeValue);break;case f.ElementType.CDATA:b+="<![CDATA["+d.nodeValue+"]]>"}b+="</"+e+">"}else b+="/>";return b},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(a,b){f._connectionPlugins[a]=b}},f.Builder=function(a,b){("presence"==a||"message"==a||"iq"==a)&&(b&&!b.xmlns?b.xmlns=f.NS.CLIENT:b||(b={xmlns:f.NS.CLIENT})),this.nodeTree=f.xmlElement(a,b),this.node=this.nodeTree},f.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return f.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(a){for(var b in a)a.hasOwnProperty(b)&&this.node.setAttribute(b,a[b]);return this},c:function(a,b,c){var d=f.xmlElement(a,b,c);return this.node.appendChild(d),c||(this.node=d),this},cnode:function(a){var b,c=f.xmlGenerator();try{b=void 0!==c.importNode}catch(d){b=!1}var e=b?c.importNode(a,!0):f.copyElement(a);return this.node.appendChild(e),this.node=e,this},t:function(a){var b=f.xmlTextNode(a);return this.node.appendChild(b),this},h:function(a){var b=document.createElement("body");b.innerHTML=a;for(var c=f.createHtml(b);c.childNodes.length>0;)this.node.appendChild(c.childNodes[0]);return this}},f.Handler=function(a,b,c,d,e,g,h){this.handler=a,this.ns=b,this.name=c,this.type=d,this.id=e,this.options=h||{matchBare:!1},this.options.matchBare||(this.options.matchBare=!1),this.options.matchBare?this.from=g?f.getBareJidFromJid(g):null:this.from=g,this.user=!0},f.Handler.prototype={isMatch:function(a){var b,c=null;if(c=this.options.matchBare?f.getBareJidFromJid(a.getAttribute("from")):a.getAttribute("from"),b=!1,this.ns){var d=this;f.forEachChild(a,null,function(a){a.getAttribute("xmlns")==d.ns&&(b=!0)}),b=b||a.getAttribute("xmlns")==this.ns}else b=!0;return!b||this.name&&!f.isTagEqual(a,this.name)||this.type&&a.getAttribute("type")!=this.type||this.id&&a.getAttribute("id")!=this.id||this.from&&c!=this.from?!1:!0},run:function(a){var b=null;try{b=this.handler(a)}catch(c){throw c.sourceURL?f.fatal("error: "+this.handler+" "+c.sourceURL+":"+c.line+" - "+c.name+": "+c.message):c.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",c,c.message)),f.fatal("error: "+this.handler+" "+c.fileName+":"+c.lineNumber+" - "+c.name+": "+c.message)):f.fatal("error: "+c.message+"\n"+c.stack),c}return b},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},f.TimedHandler=function(a,b){this.period=a,this.handler=b,this.lastCalled=(new Date).getTime(),this.user=!0},f.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},f.Connection=function(a,b){this.service=a,this.options=b||{};var c=this.options.protocol||"";0===a.indexOf("ws:")||0===a.indexOf("wss:")||0===c.indexOf("ws")?this._proto=new f.Websocket(this):this._proto=new f.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this._idleTimeout=null,this._disconnectTimeout=null,this.do_authentication=!0,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var d in f._connectionPlugins)if(f._connectionPlugins.hasOwnProperty(d)){var e=f._connectionPlugins[d],g=function(){};g.prototype=e,this[d]=new g,this[d].init(this)}},f.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(a){return"string"==typeof a||"number"==typeof a?++this._uniqueId+":"+a:++this._uniqueId+""},connect:function(a,b,c,d,e,g){this.jid=a,this.authzid=f.getBareJidFromJid(this.jid),this.authcid=f.getNodeFromJid(this.jid),this.pass=b,this.servtype="xmpp",this.connect_callback=c,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.domain=f.getDomainFromJid(this.jid),this._changeConnectStatus(f.Status.CONNECTING,null),this._proto._connect(d,e,g)},attach:function(a,b,c,d,e,f,g){this._proto._attach(a,b,c,d,e,f,g)},xmlInput:function(a){},xmlOutput:function(a){},rawInput:function(a){},rawOutput:function(a){},send:function(a){if(null!==a){if("function"==typeof a.sort)for(var b=0;b<a.length;b++)this._queueData(a[b]);else"function"==typeof a.tree?this._queueData(a.tree()):this._queueData(a);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(a,b,c,d){var e=null,f=this;"function"==typeof a.tree&&(a=a.tree());var g=a.getAttribute("id");g||(g=this.getUniqueId("sendIQ"),a.setAttribute("id",g));var h=this.addHandler(function(a){e&&f.deleteTimedHandler(e);var d=a.getAttribute("type");if("result"==d)b&&b(a);else{if("error"!=d)throw{name:"StropheError",message:"Got bad IQ type of "+d};c&&c(a)}},null,"iq",null,g);return d&&(e=this.addTimedHandler(d,function(){return f.deleteHandler(h),c&&c(null),!1})),this.send(a),g},_queueData:function(a){if(null===a||!a.tagName||!a.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(a)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(a,b){var c=new f.TimedHandler(a,b);return this.addTimeds.push(c),c},deleteTimedHandler:function(a){this.removeTimeds.push(a)},addHandler:function(a,b,c,d,e,g,h){var i=new f.Handler(a,b,c,d,e,g,h);return this.addHandlers.push(i),i},deleteHandler:function(a){this.removeHandlers.push(a)},disconnect:function(a){if(this._changeConnectStatus(f.Status.DISCONNECTING,a),f.info("Disconnect was called because: "+a),this.connected){var b=!1;this.disconnecting=!0,this.authenticated&&(b=e({xmlns:f.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(b)}},_changeConnectStatus:function(a,b){for(var c in f._connectionPlugins)if(f._connectionPlugins.hasOwnProperty(c)){var d=this[c];if(d.statusChanged)try{d.statusChanged(a,b)}catch(e){f.error(""+c+" plugin caused an exception changing status: "+e)}}if(this.connect_callback)try{this.connect_callback(a,b)}catch(g){f.error("User connection callback caused an exception: "+g)}},_doDisconnect:function(){null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),f.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(f.Status.DISCONNECTED,null),this.connected=!1},_dataRecv:function(a,b){f.info("_dataRecv called");var c=this._proto._reqToData(a);if(null!==c){this.xmlInput!==f.Connection.prototype.xmlInput&&(c.nodeName===this._proto.strip&&c.childNodes.length?this.xmlInput(c.childNodes[0]):this.xmlInput(c)),this.rawInput!==f.Connection.prototype.rawInput&&(b?this.rawInput(b):this.rawInput(f.serialize(c)));for(var d,e;this.removeHandlers.length>0;)e=this.removeHandlers.pop(),d=this.handlers.indexOf(e),d>=0&&this.handlers.splice(d,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var g,h,i=c.getAttribute("type");if(null!==i&&"terminate"==i){if(this.disconnecting)return;return g=c.getAttribute("condition"),h=c.getElementsByTagName("conflict"),null!==g?("remote-stream-error"==g&&h.length>0&&(g="conflict"),this._changeConnectStatus(f.Status.CONNFAIL,g)):this._changeConnectStatus(f.Status.CONNFAIL,"unknown"),void this.disconnect("unknown stream-error")}var j=this;f.forEachChild(c,null,function(a){var b,c;for(c=j.handlers,j.handlers=[],b=0;b<c.length;b++){var d=c[b];try{!d.isMatch(a)||!j.authenticated&&d.user?j.handlers.push(d):d.run(a)&&j.handlers.push(d)}catch(e){f.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}})}},mechanisms:{},_connect_cb:function(a,b,c){f.info("_connect_cb was called"),this.connected=!0;var d=this._proto._reqToData(a);if(d){this.xmlInput!==f.Connection.prototype.xmlInput&&(d.nodeName===this._proto.strip&&d.childNodes.length?this.xmlInput(d.childNodes[0]):this.xmlInput(d)),this.rawInput!==f.Connection.prototype.rawInput&&(c?this.rawInput(c):this.rawInput(f.serialize(d)));var e=this._proto._connect_cb(d);if(e!==f.Status.CONNFAIL){this._authentication.sasl_scram_sha1=!1,this._authentication.sasl_plain=!1,this._authentication.sasl_digest_md5=!1,this._authentication.sasl_anonymous=!1,this._authentication.legacy_auth=!1;var g=d.getElementsByTagName("stream:features").length>0;g||(g=d.getElementsByTagName("features").length>0);var h,i,j=d.getElementsByTagName("mechanism"),k=[],l=!1;if(!g)return void this._proto._no_auth_received(b);if(j.length>0)for(h=0;h<j.length;h++)i=f.getText(j[h]),this.mechanisms[i]&&k.push(this.mechanisms[i]);return this._authentication.legacy_auth=d.getElementsByTagName("auth").length>0,(l=this._authentication.legacy_auth||k.length>0)?void(this.do_authentication!==!1&&this.authenticate(k)):void this._proto._no_auth_received(b)}}},authenticate:function(a){var c;for(c=0;c<a.length-1;++c){for(var e=c,g=c+1;g<a.length;++g)a[g].prototype.priority>a[e].prototype.priority&&(e=g);if(e!=c){var h=a[c];a[c]=a[e],a[e]=h}}var i=!1;for(c=0;c<a.length;++c)if(a[c].test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new a[c],this._sasl_mechanism.onStart(this);var j=b("auth",{xmlns:f.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var k=this._sasl_mechanism.onChallenge(this,null);j.t(Base64.encode(k))}this.send(j.tree()),i=!0;break}i||(null===f.getNodeFromJid(this.jid)?(this._changeConnectStatus(f.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(f.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(d({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:f.NS.AUTH}).c("username",{}).t(f.getNodeFromJid(this.jid)).tree())))},_sasl_challenge_cb:function(a){var c=Base64.decode(f.getText(a)),d=this._sasl_mechanism.onChallenge(this,c),e=b("response",{xmlns:f.NS.SASL});return""!==d&&e.t(Base64.encode(d)),this.send(e.tree()),!0},_auth1_cb:function(a){var b=d({type:"set",id:"_auth_2"}).c("query",{xmlns:f.NS.AUTH}).c("username",{}).t(f.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return f.getResourceFromJid(this.jid)||(this.jid=f.getBareJidFromJid(this.jid)+"/strophe"),b.up().c("resource",{}).t(f.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(b.tree()),!1},_sasl_success_cb:function(a){if(this._sasl_data["server-signature"]){var b,c=Base64.decode(f.getText(a)),d=/([a-z]+)=([^,]+)(,|$)/,e=c.match(d);if("v"==e[1]&&(b=e[2]),b!=this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}return f.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(a){this.features=a;var b,c;for(b=0;b<a.childNodes.length;b++)c=a.childNodes[b],"bind"==c.nodeName&&(this.do_bind=!0),"session"==c.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(f.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var e=f.getResourceFromJid(this.jid);return e?this.send(d({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:f.NS.BIND}).c("resource",{}).t(e).tree()):this.send(d({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:f.NS.BIND}).tree()),!1},_sasl_bind_cb:function(a){if("error"==a.getAttribute("type")){f.info("SASL binding failed.");var b,c=a.getElementsByTagName("conflict");return c.length>0&&(b="conflict"),this._changeConnectStatus(f.Status.AUTHFAIL,b),!1}var e,g=a.getElementsByTagName("bind");return g.length>0?(e=g[0].getElementsByTagName("jid"),void(e.length>0&&(this.jid=f.getText(e[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(d({type:"set",id:"_session_auth_2"}).c("session",{xmlns:f.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(f.Status.CONNECTED,null))))):(f.info("SASL binding failed."),this._changeConnectStatus(f.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(a){if("result"==a.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(f.Status.CONNECTED,null);else if("error"==a.getAttribute("type"))return f.info("Session creation failed."),this._changeConnectStatus(f.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(a){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(f.Status.AUTHFAIL,null),!1},_auth2_cb:function(a){return"result"==a.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(f.Status.CONNECTED,null)):"error"==a.getAttribute("type")&&(this._changeConnectStatus(f.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(a,b){var c=new f.TimedHandler(a,b);return c.user=!1,this.addTimeds.push(c),c},_addSysHandler:function(a,b,c,d,e){var g=new f.Handler(a,b,c,d,e);return g.user=!1,this.addHandlers.push(g),g},_onDisconnectTimeout:function(){return f.info("_onDisconnectTimeout was called"),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var a,b,c,d;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)b=this.removeTimeds.pop(),a=this.timedHandlers.indexOf(b),a>=0&&this.timedHandlers.splice(a,1);var e=(new Date).getTime();for(d=[],a=0;a<this.timedHandlers.length;a++)b=this.timedHandlers[a],(this.authenticated||!b.user)&&(c=b.lastCalled+b.period,0>=c-e?b.run()&&d.push(b):d.push(b));this.timedHandlers=d,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},a&&a(f,b,c,d,e),f.SASLMechanism=function(a,b,c){this.name=a,this.isClientFirst=b,this.priority=c},f.SASLMechanism.prototype={test:function(a){return!0},onStart:function(a){this._connection=a},onChallenge:function(a,b){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},f.SASLAnonymous=function(){},f.SASLAnonymous.prototype=new f.SASLMechanism("ANONYMOUS",!1,10),f.SASLAnonymous.test=function(a){return null===a.authcid},f.Connection.prototype.mechanisms[f.SASLAnonymous.prototype.name]=f.SASLAnonymous,f.SASLPlain=function(){},f.SASLPlain.prototype=new f.SASLMechanism("PLAIN",!0,20),f.SASLPlain.test=function(a){return null!==a.authcid},f.SASLPlain.prototype.onChallenge=function(a){var b=a.authzid;return b+="\x00",b+=a.authcid,b+="\x00",b+=a.pass},f.Connection.prototype.mechanisms[f.SASLPlain.prototype.name]=f.SASLPlain,f.SASLSHA1=function(){},f.SASLSHA1.prototype=new f.SASLMechanism("SCRAM-SHA-1",!0,40),f.SASLSHA1.test=function(a){return null!==a.authcid},f.SASLSHA1.prototype.onChallenge=function(a,b,c){var d=c||MD5.hexdigest(1234567890*Math.random()),e="n="+a.authcid;return e+=",r=",e+=d,a._sasl_data.cnonce=d,a._sasl_data["client-first-message-bare"]=e,e="n,,"+e,this.onChallenge=function(a,b){for(var c,d,e,f,g,h,i,j,k,l,m,n="c=biws,",o=a._sasl_data["client-first-message-bare"]+","+b+",",p=a._sasl_data.cnonce,q=/([a-z]+)=([^,]+)(,|$)/;b.match(q);){var r=b.match(q);switch(b=b.replace(r[0],""),r[1]){case"r":c=r[2];break;case"s":d=r[2];break;case"i":e=r[2]}}if(c.substr(0,p.length)!==p)return a._sasl_data={},a._sasl_failure_cb();for(n+="r="+c,o+=n,d=Base64.decode(d),d+="\x00\x00\x00",f=h=core_hmac_sha1(a.pass,d),i=1;e>i;i++){for(g=core_hmac_sha1(a.pass,binb2str(h)),j=0;5>j;j++)f[j]^=g[j];h=g}for(f=binb2str(f),k=core_hmac_sha1(f,"Client Key"),l=str_hmac_sha1(f,"Server Key"),m=core_hmac_sha1(str_sha1(binb2str(k)),o),a._sasl_data["server-signature"]=b64_hmac_sha1(l,o),j=0;5>j;j++)k[j]^=m[j];return n+=",p="+Base64.encode(binb2str(k))}.bind(this),e},f.Connection.prototype.mechanisms[f.SASLSHA1.prototype.name]=f.SASLSHA1,f.SASLMD5=function(){},f.SASLMD5.prototype=new f.SASLMechanism("DIGEST-MD5",!1,30),f.SASLMD5.test=function(a){return null!==a.authcid},f.SASLMD5.prototype._quote=function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},f.SASLMD5.prototype.onChallenge=function(a,b,c){for(var d,e=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,f=c||MD5.hexdigest(""+1234567890*Math.random()),g="",h=null,i="",j="";b.match(e);)switch(d=b.match(e),b=b.replace(d[0],""),d[2]=d[2].replace(/^"(.+)"$/,"$1"),d[1]){case"realm":g=d[2];break;case"nonce":i=d[2];break;case"qop":j=d[2];break;case"host":h=d[2]}var k=a.servtype+"/"+a.domain;null!==h&&(k=k+"/"+h);var l=MD5.hash(a.authcid+":"+g+":"+this._connection.pass)+":"+i+":"+f,m="AUTHENTICATE:"+k,n="";return n+="charset=utf-8,",n+="username="+this._quote(a.authcid)+",",n+="realm="+this._quote(g)+",",n+="nonce="+this._quote(i)+",",n+="nc=00000001,",n+="cnonce="+this._quote(f)+",",n+="digest-uri="+this._quote(k)+",",n+="response="+MD5.hexdigest(MD5.hexdigest(l)+":"+i+":00000001:"+f+":auth:"+MD5.hexdigest(m))+",",n+="qop=auth",this.onChallenge=function(){return""}.bind(this),n},f.Connection.prototype.mechanisms[f.SASLMD5.prototype.name]=f.SASLMD5}(function(){window.Strophe=arguments[0],window.$build=arguments[1],window.$msg=arguments[2],window.$iq=arguments[3],window.$pres=arguments[4]}),Strophe.Request=function(a,b,c,d){this.id=++Strophe._requestId,this.xmlData=a,this.data=Strophe.serialize(a),this.origFunc=b,this.func=b,this.rid=c,this.date=NaN,this.sends=d||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var a=new Date;return(a-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var a=new Date;return(a-this.dead)/1e3},this.xhr=this._newXHR()},Strophe.Request.prototype={getResponse:function(){var a=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(a=this.xhr.responseXML.documentElement,"parsererror"==a.tagName)throw Strophe.error("invalid response received"),Strophe.error("responseText: "+this.xhr.responseText),Strophe.error("responseXML: "+Strophe.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(Strophe.error("invalid response received"),Strophe.error("responseText: "+this.xhr.responseText),Strophe.error("responseXML: "+Strophe.serialize(this.xhr.responseXML)));return a},_newXHR:function(){
var a=null;return window.XMLHttpRequest?(a=new XMLHttpRequest,a.overrideMimeType&&a.overrideMimeType("text/xml")):window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),a.onreadystatechange=this.func.bind(null,this),a}},Strophe.Bosh=function(a){this._conn=a,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this._requests=[]},Strophe.Bosh.prototype={strip:null,_buildBody:function(){var a=$build("body",{rid:this.rid++,xmlns:Strophe.NS.HTTPBIND});return null!==this.sid&&a.attrs({sid:this.sid}),a},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null},_connect:function(a,b,c){this.wait=a||this.wait,this.hold=b||this.hold;var d=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":Strophe.NS.BOSH});c&&d.attrs({route:c});var e=this._conn._connect_cb;this._requests.push(new Strophe.Request(d.tree(),this._onRequestStateChange.bind(this,e.bind(this._conn)),d.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(a,b,c,d,e,f,g){this._conn.jid=a,this.sid=b,this.rid=c,this._conn.connect_callback=d,this._conn.domain=Strophe.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=e||this.wait,this.hold=f||this.hold,this.window=g||this.window,this._conn._changeConnectStatus(Strophe.Status.ATTACHED,null)},_connect_cb:function(a){var b,c,d=a.getAttribute("type");if(null!==d&&"terminate"==d)return Strophe.error("BOSH-Connection failed: "+b),b=a.getAttribute("condition"),c=a.getElementsByTagName("conflict"),null!==b?("remote-stream-error"==b&&c.length>0&&(b="conflict"),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,b)):this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(),Strophe.Status.CONNFAIL;this.sid||(this.sid=a.getAttribute("sid"));var e=a.getAttribute("requests");e&&(this.window=parseInt(e,10));var f=a.getAttribute("hold");f&&(this.hold=parseInt(f,10));var g=a.getAttribute("wait");g&&(this.wait=parseInt(g,10))},_disconnect:function(a){this._sendTerminate(a)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random())},_emptyQueue:function(){return 0===this._requests.length},_hitError:function(a){this.errors++,Strophe.warn("request errored, status: "+a+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_no_auth_received:function(a){a=a?a.bind(this._conn):this._conn._connect_cb.bind(this._conn);var b=this._buildBody();this._requests.push(new Strophe.Request(b.tree(),this._onRequestStateChange.bind(this,a.bind(this._conn)),b.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){for(var a;this._requests.length>0;)a=this._requests.pop(),a.abort=!0,a.xhr.abort(),a.xhr.onreadystatechange=function(){}},_onIdle:function(){var a=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===a.length&&!this._conn.disconnecting&&(Strophe.info("no requests during idle cycle, sending blank request"),a.push(null)),this._requests.length<2&&a.length>0&&!this._conn.paused){for(var b=this._buildBody(),c=0;c<a.length;c++)null!==a[c]&&("restart"===a[c]?b.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":Strophe.NS.BOSH}):b.cnode(a[c]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new Strophe.Request(b.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),b.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}if(this._requests.length>0){var d=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(Strophe.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),d>Math.floor(Strophe.TIMEOUT*this.wait)&&(Strophe.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(Strophe.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}},_onRequestStateChange:function(a,b){if(Strophe.debug("request id "+b.id+"."+b.sends+" state changed to "+b.xhr.readyState),b.abort)return void(b.abort=!1);var c;if(4==b.xhr.readyState){c=0;try{c=b.xhr.status}catch(d){}if("undefined"==typeof c&&(c=0),this.disconnecting&&c>=400)return void this._hitError(c);var e=this._requests[0]==b,f=this._requests[1]==b;(c>0&&500>c||b.sends>5)&&(this._removeRequest(b),Strophe.debug("request id "+b.id+" should now be removed")),200==c?((f||e&&this._requests.length>0&&this._requests[0].age()>Math.floor(Strophe.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),Strophe.debug("request id "+b.id+"."+b.sends+" got 200"),a(b),this.errors=0):(Strophe.error("request id "+b.id+"."+b.sends+" error "+c+" happened"),(0===c||c>=400&&600>c||c>=12e3)&&(this._hitError(c),c>=400&&500>c&&(this._conn._changeConnectStatus(Strophe.Status.DISCONNECTING,null),this._conn._doDisconnect()))),c>0&&500>c||b.sends>5||this._throttledRequestHandler()}},_processRequest:function(a){var b=this,c=this._requests[a],d=-1;try{4==c.xhr.readyState&&(d=c.xhr.status)}catch(e){Strophe.error("caught an error in _requests["+a+"], reqStatus: "+d)}if("undefined"==typeof d&&(d=-1),c.sends>this.maxRetries)return void this._onDisconnectTimeout();var f=c.age(),g=!isNaN(f)&&f>Math.floor(Strophe.TIMEOUT*this.wait),h=null!==c.dead&&c.timeDead()>Math.floor(Strophe.SECONDARY_TIMEOUT*this.wait),i=4==c.xhr.readyState&&(1>d||d>=500);if((g||h||i)&&(h&&Strophe.error("Request "+this._requests[a].id+" timed out (secondary), restarting"),c.abort=!0,c.xhr.abort(),c.xhr.onreadystatechange=function(){},this._requests[a]=new Strophe.Request(c.xmlData,c.origFunc,c.rid,c.sends),c=this._requests[a]),0===c.xhr.readyState){Strophe.debug("request id "+c.id+"."+c.sends+" posting");try{c.xhr.open("POST",this._conn.service,this._conn.options.sync?!1:!0)}catch(j){return Strophe.error("XHR open failed."),this._conn.connected||this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var k=function(){if(c.date=new Date,b._conn.options.customHeaders){var a=b._conn.options.customHeaders;for(var d in a)a.hasOwnProperty(d)&&c.xhr.setRequestHeader(d,a[d])}c.xhr.send(c.data)};if(c.sends>1){var l=1e3*Math.min(Math.floor(Strophe.TIMEOUT*this.wait),Math.pow(c.sends,3));setTimeout(k,l)}else k();c.sends++,this._conn.xmlOutput!==Strophe.Connection.prototype.xmlOutput&&(c.xmlData.nodeName===this.strip&&c.xmlData.childNodes.length?this._conn.xmlOutput(c.xmlData.childNodes[0]):this._conn.xmlOutput(c.xmlData)),this._conn.rawOutput!==Strophe.Connection.prototype.rawOutput&&this._conn.rawOutput(c.data)}else Strophe.debug("_processRequest: "+(0===a?"first":"second")+" request has readyState of "+c.xhr.readyState)},_removeRequest:function(a){Strophe.debug("removing request");var b;for(b=this._requests.length-1;b>=0;b--)a==this._requests[b]&&this._requests.splice(b,1);a.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(a){var b=this._requests[a];null===b.dead&&(b.dead=new Date),this._processRequest(a)},_reqToData:function(a){try{return a.getResponse()}catch(b){if("parsererror"!=b)throw b;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(a){Strophe.info("_sendTerminate was called");var b=this._buildBody().attrs({type:"terminate"});a&&b.cnode(a.tree());var c=new Strophe.Request(b.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),b.tree().getAttribute("rid"));this._requests.push(c),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(this._conn._onIdle.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?Strophe.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):Strophe.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},Strophe.Websocket=function(a){this._conn=a,this.strip="stream:stream";var b=a.service;if(0!==b.indexOf("ws:")&&0!==b.indexOf("wss:")){var c="";c+="ws"===a.options.protocol&&"https:"!==window.location.protocol?"ws":"wss",c+="://"+window.location.host,c+=0!==b.indexOf("/")?window.location.pathname+b:b,a.service=c}},Strophe.Websocket.prototype={_buildStream:function(){return $build("stream:stream",{to:this._conn.domain,xmlns:Strophe.NS.CLIENT,"xmlns:stream":Strophe.NS.STREAM,version:"1.0"})},_check_streamerror:function(a,b){var c=a.getElementsByTagName("stream:error");if(0===c.length)return!1;for(var d=c[0],e="",f="",g="urn:ietf:params:xml:ns:xmpp-streams",h=0;h<d.childNodes.length;h++){var i=d.childNodes[h];if(i.getAttribute("xmlns")!==g)break;"text"===i.nodeName?f=i.textContent:e=i.nodeName}var j="WebSocket stream error: ";return j+=e?e:"unknown",f&&(j+=" - "+e),Strophe.error(j),this._conn._changeConnectStatus(b,e),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(a){var b=this._check_streamerror(a,Strophe.Status.CONNFAIL);return b?Strophe.Status.CONNFAIL:void 0},_handleStreamStart:function(a){var b=!1,c=a.getAttribute("xmlns");"string"!=typeof c?b="Missing xmlns in stream:stream":c!==Strophe.NS.CLIENT&&(b="Wrong xmlns in stream:stream: "+c);var d=a.namespaceURI;"string"!=typeof d?b="Missing xmlns:stream in stream:stream":d!==Strophe.NS.STREAM&&(b="Wrong xmlns:stream in stream:stream: "+d);var e=a.getAttribute("version");return"string"!=typeof e?b="Missing version in stream:stream":"1.0"!==e&&(b="Wrong version in stream:stream: "+e),b?(this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,b),this._conn._doDisconnect(),!1):!0},_connect_cb_wrapper:function(a){if(0===a.data.indexOf("<stream:stream ")||0===a.data.indexOf("<?xml")){var b=a.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===b)return;b=a.data.replace(/<stream:stream (.*[^\/])>/,"<stream:stream $1/>");var c=(new DOMParser).parseFromString(b,"text/xml").documentElement;this._conn.xmlInput(c),this._conn.rawInput(a.data),this._handleStreamStart(c)&&(this._connect_cb(c),this.streamStart=a.data.replace(/^<stream:(.*)\/>$/,"<stream:$1>"))}else{if("</stream:stream>"===a.data)return this._conn.rawInput(a.data),this._conn.xmlInput(document.createElement("stream:stream")),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"Received closing stream"),void this._conn._doDisconnect();var d=this._streamWrap(a.data),e=(new DOMParser).parseFromString(d,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(e,null,a.data)}},_disconnect:function(a){if(this.socket.readyState!==WebSocket.CLOSED){a&&this._conn.send(a);var b="</stream:stream>";this._conn.xmlOutput(document.createElement("stream:stream")),this._conn.rawOutput(b);try{this.socket.send(b)}catch(c){Strophe.info("Couldn't send closing stream tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){Strophe.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(a){return this.streamStart+a+"</stream:stream>"},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(a){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(){this._conn.connected&&!this._conn.disconnecting?(Strophe.error("Websocket closed unexcectedly"),this._conn._doDisconnect()):Strophe.info("Websocket closed")},_no_auth_received:function(a){Strophe.error("Server did not send any auth methods"),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"Server did not send any auth methods"),a&&(a=a.bind(this._conn))(),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_onError:function(a){Strophe.error("Websocket error "+a),this._conn._changeConnectStatus(Strophe.Status.CONNFAIL,"The WebSocket connection could not be established was disconnected."),this._disconnect()},_onIdle:function(){var a=this._conn._data;if(a.length>0&&!this._conn.paused){for(var b=0;b<a.length;b++)if(null!==a[b]){var c,d;"restart"===a[b]?(c=this._buildStream(),d=this._removeClosingTag(c),c=c.tree()):(c=a[b],d=Strophe.serialize(c)),this._conn.xmlOutput(c),this._conn.rawOutput(d),this.socket.send(d)}this._conn._data=[]}},_onMessage:function(a){var b,c;if("</stream:stream>"===a.data){var d="</stream:stream>";return this._conn.rawInput(d),this._conn.xmlInput(document.createElement("stream:stream")),void(this._conn.disconnecting||this._conn._doDisconnect())}if(0===a.data.search("<stream:stream ")){if(c=a.data.replace(/<stream:stream (.*[^\/])>/,"<stream:stream $1/>"),b=(new DOMParser).parseFromString(c,"text/xml").documentElement,!this._handleStreamStart(b))return}else c=this._streamWrap(a.data),b=(new DOMParser).parseFromString(c,"text/xml").documentElement;if(!this._check_streamerror(b,Strophe.Status.ERROR))return this._conn.disconnecting&&"presence"===b.firstChild.nodeName&&"unavailable"===b.firstChild.getAttribute("type")?(this._conn.xmlInput(b),void this._conn.rawInput(Strophe.serialize(b))):void this._conn._dataRecv(b,a.data)},_onOpen:function(){Strophe.info("Websocket open");var a=this._buildStream();this._conn.xmlOutput(a.tree());var b=this._removeClosingTag(a);this._conn.rawOutput(b),this.socket.send(b)},_removeClosingTag:function(a){var b=Strophe.serialize(a);return b=b.replace(/<(stream:stream .*[^\/])\/>$/,"<$1>")},_reqToData:function(a){return a},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},function(){"use strict";var a={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(b){var c=b.which;switch(c){case a.COMMAND:case a.SHIFT:case a.CTRL:case a.ALT:return!0}return b.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a},isVerticalMovement:function(b){return~[a.UP,a.DOWN].indexOf(b)},isHorizontalMovement:function(b){return~[a.LEFT,a.RIGHT,a.BACKSPACE,a.DELETE].indexOf(b)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(a){return angular.element(this[0].querySelectorAll(a))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(a){for(var b=this[0],c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector;b;){if(c.bind(b)(a))return b;b=b.parentElement}return!1});var b=0,c=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,generateId:function(){return b++},appendToBody:!1}).service("uiSelectMinErr",function(){var a=angular.$$minErr("ui.select");return function(){var b=a.apply(this,arguments),c=b.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(c)}}).directive("uisTranscludeAppend",function(){return{link:function(a,b,c,d,e){e(a,function(a){b.append(a)})}}}).filter("highlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c&&b?b.replace(new RegExp(a(c),"gi"),'<span class="ui-select-highlight">$&</span>'):b}}).factory("uisOffset",["$document","$window",function(a,b){return function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}}}]);c.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile",function(a,b,c,d){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(b){var c=b.parent().attr("theme")||a.theme;return c+"/choices.tpl.html"},compile:function(e,f){if(!f.repeat)throw c("repeat","Expected 'repeat' expression.");return function(e,f,g,h,i){var j=g.groupBy,k=g.groupFilter;if(h.parseRepeatAttr(g.repeat,j,k),h.disableChoiceExpression=g.uiDisableChoice,h.onHighlightCallback=g.onHighlight,j){var l=f.querySelectorAll(".ui-select-choices-group");if(1!==l.length)throw c("rows","Expected 1 .ui-select-choices-group but got '{0}'.",l.length);l.attr("ng-repeat",b.getGroupNgRepeatExpression())}var m=f.querySelectorAll(".ui-select-choices-row");if(1!==m.length)throw c("rows","Expected 1 .ui-select-choices-row but got '{0}'.",m.length);m.attr("ng-repeat",b.getNgRepeatExpression(h.parserResult.itemName,"$select.items",h.parserResult.trackByExp,j)).attr("ng-if","$select.open").attr("ng-mouseenter","$select.setActiveItem("+h.parserResult.itemName+")").attr("ng-click","$select.select("+h.parserResult.itemName+",false,$event)");var n=f.querySelectorAll(".ui-select-choices-row-inner");if(1!==n.length)throw c("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",n.length);n.attr("uis-transclude-append",""),d(f,i)(e),e.$watch("$select.search",function(a){a&&!h.open&&h.multiple&&h.activate(!1,!0),h.activeIndex=h.tagging.isActivated?-1:0,h.refresh(g.refresh)}),g.$observe("refreshDelay",function(){var b=e.$eval(g.refreshDelay);h.refreshDelay=void 0!==b?b:a.refreshDelay})}}}}]),c.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig",function(b,c,d,e,f,g,h){function i(){(m.resetSearchInput||void 0===m.resetSearchInput&&h.resetSearchInput)&&(m.search=n,m.selected&&m.items.length&&!m.multiple&&(m.activeIndex=m.items.indexOf(m.selected)))}function j(a,b){var c,d,e=[];for(c=0;c<b.length;c++)for(d=0;d<a.length;d++)a[d].name==[b[c]]&&e.push(a[d]);return e}function k(b){var c=!0;switch(b){case a.DOWN:!m.open&&m.multiple?m.activate(!1,!0):m.activeIndex<m.items.length-1&&m.activeIndex++;break;case a.UP:!m.open&&m.multiple?m.activate(!1,!0):(m.activeIndex>0||0===m.search.length&&m.tagging.isActivated&&m.activeIndex>-1)&&m.activeIndex--;break;case a.TAB:(!m.multiple||m.open)&&m.select(m.items[m.activeIndex],!0);break;case a.ENTER:m.open&&(m.tagging.isActivated||m.activeIndex>=0)?m.select(m.items[m.activeIndex]):m.activate(!1,!0);break;case a.ESC:m.close();break;default:c=!1}return c}function l(){var a=c.querySelectorAll(".ui-select-choices-content"),b=a.querySelectorAll(".ui-select-choices-row");if(b.length<1)throw g("choices","Expected multiple .ui-select-choices-row but got '{0}'.",b.length);if(!(m.activeIndex<0)){var d=b[m.activeIndex],e=d.offsetTop+d.clientHeight-a[0].scrollTop,f=a[0].offsetHeight;e>f?a[0].scrollTop+=e-f:e<d.clientHeight&&(m.isGrouped&&0===m.activeIndex?a[0].scrollTop=0:a[0].scrollTop-=d.clientHeight-e)}}var m=this,n="";if(m.placeholder=h.placeholder,m.searchEnabled=h.searchEnabled,m.sortable=h.sortable,m.refreshDelay=h.refreshDelay,m.removeSelected=!1,m.closeOnSelect=!0,m.search=n,m.activeIndex=0,m.items=[],m.open=!1,m.focus=!1,m.disabled=!1,m.selected=void 0,m.focusser=void 0,m.resetSearchInput=!0,m.multiple=void 0,m.disableChoiceExpression=void 0,m.tagging={isActivated:!1,fct:void 0},m.taggingTokens={isActivated:!1,tokens:void 0},m.lockChoiceExpression=void 0,m.clickTriggeredSelect=!1,m.$filter=e,m.searchInput=c.querySelectorAll("input.ui-select-search"),1!==m.searchInput.length)throw g("searchInput","Expected 1 input.ui-select-search but got '{0}'.",m.searchInput.length);m.isEmpty=function(){return angular.isUndefined(m.selected)||null===m.selected||""===m.selected},m.activate=function(a,c){m.disabled||m.open||(c||i(),b.$broadcast("uis:activate"),m.open=!0,m.activeIndex=m.activeIndex>=m.items.length?0:m.activeIndex,-1===m.activeIndex&&m.taggingLabel!==!1&&(m.activeIndex=0),d(function(){m.search=a||m.search,m.searchInput[0].focus()}))},m.findGroupByName=function(a){return m.groups&&m.groups.filter(function(b){return b.name===a})[0]},m.parseRepeatAttr=function(a,c,d){function e(a){var e=b.$eval(c);if(m.groups=[],angular.forEach(a,function(a){var b=angular.isFunction(e)?e(a):a[e],c=m.findGroupByName(b);c?c.items.push(a):m.groups.push({name:b,items:[a]})}),d){var f=b.$eval(d);angular.isFunction(f)?m.groups=f(m.groups):angular.isArray(f)&&(m.groups=j(m.groups,f))}m.items=[],m.groups.forEach(function(a){m.items=m.items.concat(a.items)})}function h(a){m.items=a}m.setItemsFn=c?e:h,m.parserResult=f.parse(a),m.isGrouped=!!c,m.itemProperty=m.parserResult.itemName,m.refreshItems=function(a){a=a||m.parserResult.source(b);var c=m.selected;if(angular.isArray(c)&&!c.length||!m.removeSelected)m.setItemsFn(a);else if(void 0!==a){var d=a.filter(function(a){return c.indexOf(a)<0});m.setItemsFn(d)}},b.$watchCollection(m.parserResult.source,function(a){if(void 0===a||null===a)m.items=[];else{if(!angular.isArray(a))throw g("items","Expected an array but got '{0}'.",a);m.refreshItems(a),m.ngModel.$modelValue=null}})};var o;m.refresh=function(a){void 0!==a&&(o&&d.cancel(o),o=d(function(){b.$eval(a)},m.refreshDelay))},m.setActiveItem=function(a){m.activeIndex=m.items.indexOf(a)},m.isActive=function(a){if(!m.open)return!1;var b=m.items.indexOf(a[m.itemProperty]),c=b===m.activeIndex;return!c||0>b&&m.taggingLabel!==!1||0>b&&m.taggingLabel===!1?!1:(c&&!angular.isUndefined(m.onHighlightCallback)&&a.$eval(m.onHighlightCallback),c)},m.isDisabled=function(a){if(m.open){var b,c=m.items.indexOf(a[m.itemProperty]),d=!1;return c>=0&&!angular.isUndefined(m.disableChoiceExpression)&&(b=m.items[c],d=!!a.$eval(m.disableChoiceExpression),b._uiSelectChoiceDisabled=d),d}},m.select=function(a,c,e){if(void 0===a||!a._uiSelectChoiceDisabled){if(!m.items&&!m.search)return;if(!a||!a._uiSelectChoiceDisabled){if(m.tagging.isActivated){if(m.taggingLabel===!1)if(m.activeIndex<0){if(a=void 0!==m.tagging.fct?m.tagging.fct(m.search):m.search,!a||angular.equals(m.items[0],a))return}else a=m.items[m.activeIndex];else if(0===m.activeIndex){if(void 0===a)return;if(void 0!==m.tagging.fct&&"string"==typeof a){if(a=m.tagging.fct(m.search),!a)return}else"string"==typeof a&&(a=a.replace(m.taggingLabel,"").trim())}if(m.selected&&angular.isArray(m.selected)&&m.selected.filter(function(b){return angular.equals(b,a)}).length>0)return void m.close(c)}b.$broadcast("uis:select",a);var f={};f[m.parserResult.itemName]=a,d(function(){m.onSelectCallback(b,{$item:a,$model:m.parserResult.modelMapper(b,f)})}),m.closeOnSelect&&m.close(c),e&&"click"===e.type&&(m.clickTriggeredSelect=!0)}}},m.close=function(a){m.open&&(m.ngModel&&m.ngModel.$setTouched&&m.ngModel.$setTouched(),i(),m.open=!1,b.$broadcast("uis:close",a))},m.setFocus=function(){m.focus||m.focusInput[0].focus()},m.clear=function(a){m.select(void 0),a.stopPropagation(),d(function(){m.focusser[0].focus()},0,!1)},m.toggle=function(a){m.open?(m.close(),a.preventDefault(),a.stopPropagation()):m.activate()},m.isLocked=function(a,b){var c,d=m.selected[b];return d&&!angular.isUndefined(m.lockChoiceExpression)&&(c=!!a.$eval(m.lockChoiceExpression),d._uiSelectChoiceLocked=c),c};var p=null;m.sizeSearchInput=function(){var a=m.searchInput[0],c=m.searchInput.parent().parent()[0],e=function(){return c.clientWidth*!!a.offsetParent},f=function(b){if(0===b)return!1;var c=b-a.offsetLeft-10;return 50>c&&(c=b),m.searchInput.css("width",c+"px"),!0};m.searchInput.css("width","10px"),d(function(){null!==p||f(e())||(p=b.$watch(e,function(a){f(a)&&(p(),p=null)}))})},m.searchInput.on("keydown",function(c){var e=c.which;b.$apply(function(){var b=!1;if((m.items.length>0||m.tagging.isActivated)&&(k(e),m.taggingTokens.isActivated)){for(var f=0;f<m.taggingTokens.tokens.length;f++)m.taggingTokens.tokens[f]===a.MAP[c.keyCode]&&m.search.length>0&&(b=!0);b&&d(function(){m.searchInput.triggerHandler("tagged");var b=m.search.replace(a.MAP[c.keyCode],"").trim();m.tagging.fct&&(b=m.tagging.fct(b)),b&&m.select(b,!0)})}}),a.isVerticalMovement(e)&&m.items.length>0&&l(),(e===a.ENTER||e===a.ESC)&&(c.preventDefault(),c.stopPropagation())}),m.searchInput.on("paste",function(a){var b=a.originalEvent.clipboardData.getData("text/plain");if(b&&b.length>0&&m.taggingTokens.isActivated&&m.tagging.fct){var c=b.split(m.taggingTokens.tokens[0]);c&&c.length>0&&(angular.forEach(c,function(a){var b=m.tagging.fct(a);b&&m.select(b,!0)}),a.preventDefault(),a.stopPropagation())}}),m.searchInput.on("tagged",function(){d(function(){i()})}),b.$on("$destroy",function(){m.searchInput.off("keyup keydown tagged blur paste")})}]),c.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(a,b,c,d,e,f,g){return{restrict:"EA",templateUrl:function(a,c){var d=c.theme||b.theme;return d+(angular.isDefined(c.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(e,h){return angular.isDefined(h.multiple)?e.append("<ui-select-multiple/>").removeAttr("multiple"):e.append("<ui-select-single/>"),function(e,h,i,j,k){function l(a){if(o.open){var b=!1;if(b=window.jQuery?window.jQuery.contains(h[0],a.target):h[0].contains(a.target),!b&&!o.clickTriggeredSelect){var c=["input","button","textarea"],d=angular.element(a.target).scope(),f=d&&d.$select&&d.$select!==o;f||(f=~c.indexOf(a.target.tagName.toLowerCase())),o.close(f),e.$digest()}o.clickTriggeredSelect=!1}}function m(){var b=d(h);r=angular.element('<div class="ui-select-placeholder"></div>'),r[0].style.width=b.width+"px",r[0].style.height=b.height+"px",h.after(r),s=h[0].style.width,a.find("body").append(h),h[0].style.position="absolute",h[0].style.left=b.left+"px",h[0].style.top=b.top+"px",h[0].style.width=b.width+"px"}function n(){null!==r&&(r.replaceWith(h),r=null,h[0].style.position="",h[0].style.left="",h[0].style.top="",h[0].style.width=s)}var o=j[0],p=j[1];o.generatedId=b.generateId(),o.baseTitle=i.title||"Select box",o.focusserTitle=o.baseTitle+" focus",o.focusserId="focusser-"+o.generatedId,o.closeOnSelect=function(){return angular.isDefined(i.closeOnSelect)?f(i.closeOnSelect)():b.closeOnSelect}(),o.onSelectCallback=f(i.onSelect),o.onRemoveCallback=f(i.onRemove),o.ngModel=p,o.choiceGrouped=function(a){return o.isGrouped&&a&&a.name},i.tabindex&&i.$observe("tabindex",function(a){o.focusInput.attr("tabindex",a),h.removeAttr("tabindex")}),e.$watch("searchEnabled",function(){var a=e.$eval(i.searchEnabled);o.searchEnabled=void 0!==a?a:b.searchEnabled}),e.$watch("sortable",function(){var a=e.$eval(i.sortable);o.sortable=void 0!==a?a:b.sortable}),i.$observe("disabled",function(){o.disabled=void 0!==i.disabled?i.disabled:!1}),i.$observe("resetSearchInput",function(){var a=e.$eval(i.resetSearchInput);o.resetSearchInput=void 0!==a?a:!0}),i.$observe("tagging",function(){if(void 0!==i.tagging){var a=e.$eval(i.tagging);o.tagging={isActivated:!0,fct:a!==!0?a:void 0}}else o.tagging={isActivated:!1,fct:void 0}}),i.$observe("taggingLabel",function(){void 0!==i.tagging&&("false"===i.taggingLabel?o.taggingLabel=!1:o.taggingLabel=void 0!==i.taggingLabel?i.taggingLabel:"(new)")}),i.$observe("taggingTokens",function(){if(void 0!==i.tagging){var a=void 0!==i.taggingTokens?i.taggingTokens.split("|"):[",","ENTER"];o.taggingTokens={isActivated:!0,tokens:a}}}),angular.isDefined(i.autofocus)&&g(function(){o.setFocus()}),angular.isDefined(i.focusOn)&&e.$on(i.focusOn,function(){g(function(){o.setFocus()})}),a.on("click",l),e.$on("$destroy",function(){a.off("click",l)}),k(e,function(a){var b=angular.element("<div>").append(a),d=b.querySelectorAll(".ui-select-match");if(d.removeAttr("ui-select-match"),d.removeAttr("data-ui-select-match"),1!==d.length)throw c("transcluded","Expected 1 .ui-select-match but got '{0}'.",d.length);h.querySelectorAll(".ui-select-match").replaceWith(d);var e=b.querySelectorAll(".ui-select-choices");if(e.removeAttr("ui-select-choices"),e.removeAttr("data-ui-select-choices"),1!==e.length)throw c("transcluded","Expected 1 .ui-select-choices but got '{0}'.",e.length);h.querySelectorAll(".ui-select-choices").replaceWith(e)});var q=e.$eval(i.appendToBody);(void 0!==q?q:b.appendToBody)&&(e.$watch("$select.open",function(a){a?m():n()}),e.$on("$destroy",function(){n()}));var r=null,s="",t=null,u="direction-up";e.$watch("$select.open",function(b){if(b){if(t=angular.element(h).querySelectorAll(".ui-select-dropdown"),null===t)return;t[0].style.opacity=0,g(function(){var b=d(h),c=d(t),e=a[0].documentElement.scrollTop;0===e&&(e=angular.element("body")[0].scrollTop),b.top+b.height+c.height>e+a[0].documentElement.clientHeight&&(t[0].style.position="absolute",t[0].style.top=-1*c.height+"px",h.addClass(u)),t[0].style.opacity=1})}else{if(null===t)return;t[0].style.position="",t[0].style.top="",h.removeClass(u)}})}}}}]),c.directive("uiSelectMatch",["uiSelectConfig",function(a){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(b){var c=b.parent().attr("theme")||a.theme,d=b.parent().attr("multiple");return c+(d?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(b,c,d,e){function f(a){e.allowClear=angular.isDefined(a)?""===a?!0:"true"===a.toLowerCase():!1}e.lockChoiceExpression=d.uiLockChoice,d.$observe("placeholder",function(b){e.placeholder=void 0!==b?b:a.placeholder}),d.$observe("allowClear",f),f(d.allowClear),e.multiple&&e.sizeSearchInput()}}}]),c.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(b,c){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(a,b){var c,d=this,e=a.$select;a.$evalAsync(function(){c=a.ngModel}),d.activeMatchIndex=-1,d.updateModel=function(){c.$setViewValue(Date.now()),d.refreshComponent()},d.refreshComponent=function(){e.refreshItems(),e.sizeSearchInput()},d.removeChoice=function(c){var f=e.selected[c];if(!f._uiSelectChoiceLocked){var g={};g[e.parserResult.itemName]=f,e.selected.splice(c,1),d.activeMatchIndex=-1,e.sizeSearchInput(),b(function(){e.onRemoveCallback(a,{$item:f,$model:e.parserResult.modelMapper(a,g)})}),d.updateModel()}},d.getPlaceholder=function(){return e.selected.length?void 0:e.placeholder}}],controllerAs:"$selectMultiple",link:function(d,e,f,g){function h(a){return angular.isNumber(a.selectionStart)?a.selectionStart:a.value.length}function i(b){function c(){switch(b){case a.LEFT:return~n.activeMatchIndex?k:g;case a.RIGHT:return~n.activeMatchIndex&&i!==g?j:(l.activate(),!1);case a.BACKSPACE:return~n.activeMatchIndex?(n.removeChoice(i),k):g;case a.DELETE:return~n.activeMatchIndex?(n.removeChoice(n.activeMatchIndex),i):!1}}var d=h(l.searchInput[0]),e=l.selected.length,f=0,g=e-1,i=n.activeMatchIndex,j=n.activeMatchIndex+1,k=n.activeMatchIndex-1,m=i;return d>0||l.search.length&&b==a.RIGHT?!1:(l.close(),m=c(),l.selected.length&&m!==!1?n.activeMatchIndex=Math.min(g,Math.max(f,m)):n.activeMatchIndex=-1,
!0)}function j(a){if(void 0===a||void 0===l.search)return!1;var b=a.filter(function(a){return void 0===l.search.toUpperCase()||void 0===a?!1:a.toUpperCase()===l.search.toUpperCase()}).length>0;return b}function k(a,b){var c=-1;if(angular.isArray(a))for(var d=angular.copy(a),e=0;e<d.length;e++)if(void 0===l.tagging.fct)d[e]+" "+l.taggingLabel===b&&(c=e);else{var f=d[e];f.isTag=!0,angular.equals(f,b)&&(c=e)}return c}var l=g[0],m=d.ngModel=g[1],n=d.$selectMultiple;l.multiple=!0,l.removeSelected=!0,l.focusInput=l.searchInput,m.$parsers.unshift(function(){for(var a,b={},c=[],e=l.selected.length-1;e>=0;e--)b={},b[l.parserResult.itemName]=l.selected[e],a=l.parserResult.modelMapper(d,b),c.unshift(a);return c}),m.$formatters.unshift(function(a){var b,c=l.parserResult.source(d,{$select:{search:""}}),e={};if(!c)return a;var f=[],g=function(a,c){if(a&&a.length){for(var g=a.length-1;g>=0;g--){if(e[l.parserResult.itemName]=a[g],b=l.parserResult.modelMapper(d,e),l.parserResult.trackByExp){var h=/\.(.+)/.exec(l.parserResult.trackByExp);if(h.length>0&&b[h[1]]==c[h[1]])return f.unshift(a[g]),!0}if(angular.equals(b,c))return f.unshift(a[g]),!0}return!1}};if(!a)return f;for(var h=a.length-1;h>=0;h--)g(l.selected,a[h])||g(c,a[h])||f.unshift(a[h]);return f}),d.$watchCollection(function(){return m.$modelValue},function(a,b){b!=a&&(m.$modelValue=null,n.refreshComponent())}),m.$render=function(){if(!angular.isArray(m.$viewValue)){if(!angular.isUndefined(m.$viewValue)&&null!==m.$viewValue)throw b("multiarr","Expected model value to be array but got '{0}'",m.$viewValue);l.selected=[]}l.selected=m.$viewValue,d.$evalAsync()},d.$on("uis:select",function(a,b){l.selected.push(b),n.updateModel()}),d.$on("uis:activate",function(){n.activeMatchIndex=-1}),d.$watch("$select.disabled",function(a,b){b&&!a&&l.sizeSearchInput()}),l.searchInput.on("keydown",function(b){var c=b.which;d.$apply(function(){var d=!1;a.isHorizontalMovement(c)&&(d=i(c)),d&&c!=a.TAB&&(b.preventDefault(),b.stopPropagation())})}),l.searchInput.on("keyup",function(b){if(a.isVerticalMovement(b.which)||d.$evalAsync(function(){l.activeIndex=l.taggingLabel===!1?-1:0}),l.tagging.isActivated&&l.search.length>0){if(b.which===a.TAB||a.isControl(b)||a.isFunctionKey(b)||b.which===a.ESC||a.isVerticalMovement(b.which))return;if(l.activeIndex=l.taggingLabel===!1?-1:0,l.taggingLabel===!1)return;var c,e,f,g,h=angular.copy(l.items),i=angular.copy(l.items),m=!1,n=-1;if(void 0!==l.tagging.fct){if(f=l.$filter("filter")(h,{isTag:!0}),f.length>0&&(g=f[0]),h.length>0&&g&&(m=!0,h=h.slice(1,h.length),i=i.slice(1,i.length)),c=l.tagging.fct(l.search),c.isTag=!0,i.filter(function(a){return angular.equals(a,l.tagging.fct(l.search))}).length>0)return;c.isTag=!0}else{if(f=l.$filter("filter")(h,function(a){return a.match(l.taggingLabel)}),f.length>0&&(g=f[0]),e=h[0],void 0!==e&&h.length>0&&g&&(m=!0,h=h.slice(1,h.length),i=i.slice(1,i.length)),c=l.search+" "+l.taggingLabel,k(l.selected,l.search)>-1)return;if(j(i.concat(l.selected)))return void(m&&(h=i,d.$evalAsync(function(){l.activeIndex=0,l.items=h})));if(j(i))return void(m&&(l.items=i.slice(1,i.length)))}m&&(n=k(l.selected,c)),n>-1?h=h.slice(n+1,h.length-1):(h=[],h.push(c),h=h.concat(i)),d.$evalAsync(function(){l.activeIndex=0,l.items=h})}}),l.searchInput.on("blur",function(){c(function(){n.activeMatchIndex=-1})})}}}]),c.directive("uiSelectSingle",["$timeout","$compile",function(b,c){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(d,e,f,g){var h=g[0],i=g[1];i.$parsers.unshift(function(a){var b,c={};return c[h.parserResult.itemName]=a,b=h.parserResult.modelMapper(d,c)}),i.$formatters.unshift(function(a){var b,c=h.parserResult.source(d,{$select:{search:""}}),e={};if(c){var f=function(c){return e[h.parserResult.itemName]=c,b=h.parserResult.modelMapper(d,e),b==a};if(h.selected&&f(h.selected))return h.selected;for(var g=c.length-1;g>=0;g--)if(f(c[g]))return c[g]}return a}),d.$watch("$select.selected",function(a){i.$viewValue!==a&&i.$setViewValue(a)}),i.$render=function(){h.selected=i.$viewValue},d.$on("uis:select",function(a,b){h.selected=b}),d.$on("uis:close",function(a,c){b(function(){h.focusser.prop("disabled",!1),c||h.focusser[0].focus()},0,!1)}),d.$on("uis:activate",function(){j.prop("disabled",!0)});var j=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");c(j)(d),h.focusser=j,h.focusInput=j,e.parent().append(j),j.bind("focus",function(){d.$evalAsync(function(){h.focus=!0})}),j.bind("blur",function(){d.$evalAsync(function(){h.focus=!1})}),j.bind("keydown",function(b){return b.which===a.BACKSPACE?(b.preventDefault(),b.stopPropagation(),h.select(void 0),void d.$apply()):void(b.which===a.TAB||a.isControl(b)||a.isFunctionKey(b)||b.which===a.ESC||((b.which==a.DOWN||b.which==a.UP||b.which==a.ENTER||b.which==a.SPACE)&&(b.preventDefault(),b.stopPropagation(),h.activate()),d.$digest()))}),j.bind("keyup input",function(b){b.which===a.TAB||a.isControl(b)||a.isFunctionKey(b)||b.which===a.ESC||b.which==a.ENTER||b.which===a.BACKSPACE||(h.activate(j.val()),j.val(""),d.$digest())})}}}]),c.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(a,b,c){return{require:"^uiSelect",link:function(b,d,e,f){if(null===b[e.uiSelectSort])throw c("sort","Expected a list to sort");var g=angular.extend({axis:"horizontal"},b.$eval(e.uiSelectSortOptions)),h=g.axis,i="dragging",j="dropping",k="dropping-before",l="dropping-after";b.$watch(function(){return f.sortable},function(a){a?d.attr("draggable",!0):d.removeAttr("draggable")}),d.on("dragstart",function(a){d.addClass(i),(a.dataTransfer||a.originalEvent.dataTransfer).setData("text/plain",b.$index)}),d.on("dragend",function(){d.removeClass(i)});var m,n=function(a,b){this.splice(b,0,this.splice(a,1)[0])},o=function(a){a.preventDefault();var b="vertical"===h?a.offsetY||a.layerY||(a.originalEvent?a.originalEvent.offsetY:0):a.offsetX||a.layerX||(a.originalEvent?a.originalEvent.offsetX:0);b<this["vertical"===h?"offsetHeight":"offsetWidth"]/2?(d.removeClass(l),d.addClass(k)):(d.removeClass(k),d.addClass(l))},p=function(b){b.preventDefault();var c=parseInt((b.dataTransfer||b.originalEvent.dataTransfer).getData("text/plain"),10);a.cancel(m),m=a(function(){q(c)},20)},q=function(a){var c=b.$eval(e.uiSelectSort),f=c[a],g=null;g=d.hasClass(k)?a<b.$index?b.$index-1:b.$index:a<b.$index?b.$index:b.$index+1,n.apply(c,[a,g]),b.$apply(function(){b.$emit("uiSelectSort:change",{array:c,item:f,from:a,to:g})}),d.removeClass(j),d.removeClass(k),d.removeClass(l),d.off("drop",p)};d.on("dragenter",function(){d.hasClass(i)||(d.addClass(j),d.on("dragover",o),d.on("drop",p))}),d.on("dragleave",function(a){a.target==d&&(d.removeClass(j),d.removeClass(k),d.removeClass(l),d.off("dragover",o),d.off("drop",p))})}}}]),c.service("uisRepeatParser",["uiSelectMinErr","$parse",function(a,b){var c=this;c.parse=function(c){var d=c.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);return{itemName:d[2],source:b(d[3]),trackByExp:d[4],modelMapper:b(d[1]||d[2])}},c.getGroupNgRepeatExpression=function(){return"$group in $select.groups"},c.getNgRepeatExpression=function(a,b,c,d){var e=a+" in "+(d?"$group.items":b);return c&&(e+=" track by "+c),e}}])}(),angular.module("ui.select").run(["$templateCache",function(a){a.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="javascript:void(0)" class="ui-select-choices-row-inner"></a></div></li></ul>'),a.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),a.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),a.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>'),a.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),a.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li><li ng-if=\'$select.items.length === 0\' class=\'no-result\'>没有搜索结果.</li></ul>'),a.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),a.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),a.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),a.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),a.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),a.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),a.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]),function(a,b){"use strict";var c={};c.prototype=c,c.config={feed_turn_on:!0,debug:function(){return"dev"!==wt.env||c.util.isIE()||"object"!=typeof a.console?!1:!0},prefixed:"wt",lang:"zh-cn",default_pos:65535,default_count:20,box_url:function(){return wt.appConfig.box.base_url},feed_url:function(){return wt.appConfig.feed_host+"/http-bind"},box_url_regex:function(){return new RegExp(wt.appConfig.box.box_url_regex)},default_team_pic:"/img/logo.png",default_avatar:"/img/default_avatar.png",default_box:"",default_project_bg:"",default_nopic:"/img/bg/nopic.png",wtbox_url:"https://wt-thumb.oss.aliyuncs.com/",wtlogo_url:"https://wt-team.oss.aliyuncs.com/",wtavatar_url:"https://wt-avatars.oss.aliyuncs.com/",wtall_url:"https://wt-all.oss.aliyuncs.com/",wtprj_url:"https://wt-prj.oss.aliyuncs.com/",desk_notify_key:"my_desk_notice",root_url:"https://worktile.com",colors:{completed:"#88b244",uncompleted:"#f7af49",expired:"#f47a55",archived:"#9fc6e7",created:"#9fe1e7"}},c.calcHeight=function(){b("[data-minheight]").each(function(){var a=parseInt(c.util.winHeight()-b(this).data("minheight"),10);b(this).css("minHeight",a)}),b("[data-maxheight]").each(function(){var a=parseInt(c.util.winHeight()-b(this).attr("data-maxheight"),10);b(this).css("maxHeight",a)}),b("[data-height]").each(function(){var a=parseInt(c.util.winHeight()-b(this).attr("data-height"),10);b(this).css("height",a)})},c.emojis=["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","ok_woman","no_good","information_desk_person","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn","house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"],Date.prototype.format=function(a){var b={"y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},c.util={isIE:function(){return!!a.ActiveXObject},isIE6:function(){return c.util.isIE()&&!a.XMLHttpRequest},isIE7:function(){return c.util.isIE()&&!c.util.isIE6()&&!c.util.isIE8()},isIE8:function(){return c.util.isIE()&&!!document.documentMode},winHeight:function(){return b(a).height()},docWidth:function(){return b(document).width()},docHeight:function(){return b(document).height()},docOuterWidth:function(){return b(document).outerWidth()},docOuterHeight:function(){return b(document).outerHeight()},headerNavHeight:function(){return b("#header").outerHeight(!0)},modNavHeight:function(){return b(".mod-navbar").outerHeight(!0)},heightNoHeader:function(){return c.util.winHeight()-c.util.headerNavHeight()},heightNoNav:function(){return c.util.winHeight()-c.util.headerNavHeight()-c.util.modNavHeight()},dateToTimestamp:function(a){return isNaN(a)?Date.parse(a):a},isDate:function(a){return"object"==typeof a&&a.constructor==Date},getWeekday:function(a){var b=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];if(c.util.isDate(a))return b[a.getDay()];var d=new Date(a);return b[d.getDay()]},datetimeToDTW:function(a){var b=moment(),d=moment(a),e="";return b.isSame(d,"year")||(e=d.year()+"年 "),e+=b.isSame(d,"day")?d.format("今天 "):d.format("MM月DD日 "),e+=d.format("HH:mm "),e+=c.util.getWeekday(d)}},c.helper={build_file_icon:function(a){var b=kzi.constant.get_file_icon(a);return"-1"===b&&(b=a.path),b},get_query:function(b){var c=String(a.document.location.href),d=new RegExp("(^|)"+b+"=([^&]*)(&|$)","gi").exec(c);return d&&d.length>2?d[2]:""},substr:function(a,b){return a?a.length<=b?a:a.substring(0,b-1)+"...":""},mouse_position:function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},split_line:function(a){var b=[];return _.isString(a)?b=_.compact(a.split(/\n/)):b},check_platform:function(){var a=navigator.userAgent.toLowerCase(),b=/ipad|iphone|ipod|android/gi.test(a),c=/ipad|iphone|ipod/gi.test(a),d=/ipad/gi.test(a),e=/iphone|ipod/gi.test(a),f=/android/gi.test(a),g=/micromessenger/gi.test(a);return{is_mobile:b,is_ios:c,is_ipad:d,is_iphone:e,is_android:f,is_weixin:g}}},c.validator={isEmail:function(a){var b=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return b.test(a)},isUrl:function(a){var b=/^(https?|s?ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/;
return b.test(a)}},c.get_cookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},c.console={log:function(a){c.config.debug()&&console.log(a)},time:function(a){c.config.debug()&&console.time(a)},timeEnd:function(a){c.config.debug()&&console.timeEnd(a)},group:function(a){c.config.debug()&&console.groupCollapsed(a)},groupEnd:function(a){c.config.debug()&&console.groupEnd(a)},profile:function(a){c.config.debug()&&console.profile(a)},profileEnd:function(a){c.config.debug()&&console.profile(a)}};var d=function(a,c,d){b(".notifications").notify({type:a,message:{text:c},onClosed:d}).show()};c.msg={info:function(a,b){d("info",a,b)},error:function(a,b){d("danger",a,b)},success:function(a,b){d("success",a,b)},warn:function(a,b){d("warning",a,b)}},c.localData={hname:location.hostname?location.hostname:"localStatus",isLocalStorage:a.localStorage?!0:!1,dataDom:null,initDom:function(){if(!this.dataDom)try{this.dataDom=document.createElement("input"),this.dataDom.type="hidden",this.dataDom.style.display="none",this.dataDom.addBehavior("#default#userData"),document.body.appendChild(this.dataDom);var a=new Date;a=a.getDate()+30,this.dataDom.expires=a.toUTCString()}catch(b){return!1}return!0},set:function(b,c){this.isLocalStorage?a.localStorage.setItem(b,c):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.setAttribute(b,c),this.dataDom.save(this.hname))},get:function(b){return this.isLocalStorage?a.localStorage.getItem(b):this.initDom()?(this.dataDom.load(this.hname),this.dataDom.getAttribute(b)):void 0},setObject:function(b,c){return this.isLocalStorage?a.localStorage.setItem(b,JSON.stringify(c)):null},getObject:function(b){if(!this.isLocalStorage)return null;try{return JSON.parse(a.localStorage.getItem(b))}catch(c){return null}},remove:function(a){this.isLocalStorage?localStorage.removeItem(a):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.removeAttribute(a),this.dataDom.save(this.hname))},clear:function(){this.isLocalStorage?localStorage.clear():this.initDom()&&document.body.removeChild(this.dataDom)}},c.activity_icon={project_create:"ai-blue icon-folder-close",project_update:"ai-yellow icon-folder-close",project_archive:"ai-dark-blue icon-archive",project_unarchive:"ai-red icon-archive",project_delete:"ai-red icon-trash",member_add:"ai-green icon-user",member_remove:"ai-red icon-user",member_join:"ai-orange icon-user",entry_create:"ai-blue icon-columns",entry_update:"ai-yellow icon-columns",entry_archive:"ai-dark-blue icon-archive",entry_unarchive:"ai-red icon-archive",entry_delete:"ai-red icon-trash",entry_restore:"ai-yellow icon-reply-all",entry_move:"ai-orange icon-share-alt",task_create:"ai-blue icon-check",task_update:"ai-yellow icon-check",task_delete:"ai-red icon-trash",task_restore:"ai-yellow icon-reply-all",task_move:"ai-orange icon-share-alt",task_expire_set:"ai-yellow icon-time",task_expire_reset:"ai-yellow icon-time",task_complete:"ai-green icon-check-sign",task_uncomplete:"ai-red icon-check-empty",task_archive:"ai-dark-blue icon-archive",task_unarchive:"ai-red icon-archive",todo_add:"ai-blue icon-th-list",todo_remove:"ai-red icon-th-list",todo_check:"ai-green icon-check-sign",todo_uncheck:"ai-red icon-check-empty",todo_update:"ai-yellow icon-th-list",labels_add:"ai-green icon-tag",labels_remove:"ai-red icon-tag",folder_add:"ai-blue icon-folder-open-alt",folder_update:"ai-yellow icon-folder-open-alt",folder_del:"ai-red icon-folder-open-alt",file_move:"ai-orange icon-share-alt",file_attach:"ai-blue icon-paper-clip",file_detach:"ai-red icon-paper-clip",file_upload:"ai-blue icon-file",file_update:"ai-yellow icon-file",file_new_version:"ai-blue icon-upload-alt",file_delete:"ai-red icon-trash",file_restore:"ai-yellow icon-reply-all",comment_add:"ai-blue icon-comment",comment_remove:"ai-red icon-comment",watch_add:"ai-purple icon-eye-open",watch_remove:"ai-red icon-eye-open",post_create:"ai-blue icon-comments-alt",post_update:"ai-yellow icon-comments-alt",post_delete:"ai-red icon-trash",post_restore:"ai-yellow icon-reply-all",page_create:"ai-blue icon-file-text-alt",page_update:"ai-yellow icon-file-text-alt",page_new_version:"ai-blue icon-file-text-alt",page_delete:"ai-red icon-trash",page_restore:"ai-yellow icon-reply-all",event_create:"ai-blue icon-calendar",event_update:"ai-yellow icon-calendar",event_delete:"ai-red icon-trash",attendee_add:"ai-green icon-user",attendee_remove:"ai-red icon-user"},c.init_fancybox=function(){var a={padding:0,scrolling:"auto",maxWidth:"95%",wrapCSS:"fancybox-scroll",openEffect:"elastic",closeEffect:"elastic",closeBtn:!1,beforeLoad:function(){_.isString(this.title)&&(this.title=filterXSS(this.title),this.title=this.title.replace(/\n/g,"<br>"))},helpers:{title:{type:"outside",position:"top"},buttons:{tpl:['<div id="fancybox-buttons"><ul>','<li><a class="btnPrev" title="上一个" href="javascript:;"></a></li>','<li><a class="btnPlay" title="开始幻灯播放" href="javascript:;"></a></li>','<li><a class="btnNext" title="下一个" href="javascript:;"></a></li>','<li><a class="btnToggle" title="切换大小" href="javascript:;"></a></li>','<li><a class="btnClose" title="关闭" href="javascript:;"></a></li>',"</ul></div>"].join("")},thumbs:{width:50,height:50},media:{}},tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:['<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" '," webkitAllowFullScreen mozallowfullscreen allowFullScreen",c.util.isIE()?' allowtransparency="true"':"","></iframe>"].join(""),error:'<p class="fancybox-error">内容加载失败.<br/>请稍后重试.</p>',closeBtn:'<a title="关闭" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="下一个" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="上一个" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'}};b(".fancybox-file").fancybox(a)};var e=function(){if(b){b(document).ready(function(){c.calcHeight(),c.init_fancybox()}),b(a).load(function(){c.calcHeight()}),setInterval(function(){kzi.calcHeight()},150);var d=_.debounce(function(){kzi.calcHeight()},50);b(a).on("resize",d)}a.location.origin||(a.location.origin=a.location.protocol+"//"+a.location.host)};e(),a.kzi=c}(window,window.jQuery||null),function(){"use strict";function a(){var a=this,c=null,d=null,e=null;a.build_status=function(b){for(var c in b)a[c]=b[c],a[c].type="statusType"},a.getMsgByCode=function(b){var c=a.getStatusByCode(b);return null!=c&&null!=c.msg?c.msg:"未知错误，错误码：["+b+"]，请联系管理员。"},a.getStatusByCode=function(b){if(null==c){c={};for(var d=a.getStatuses(),e=0;e<d.length;e++){var f=d[e];if(null!=c[f.code])throw new Error("有重复的Code("+f.code+").");c[f.code]=f}}return c[b]},a.getStatuses=function(){if(null==e){e=[],d=a.getStatusTypes();for(var c=0;c<d.length;c++){var f=d[c];for(var g in f){var h=f[g];h.hasOwnProperty("code")&&"object"==typeof h&&null!=h.code&&e.push(new b(h.code,h.msg))}}}return e},a.getStatusTypes=function(){if(null==d){d=[];for(var a in this){var b=this[a];this.hasOwnProperty(a)&&a.length>0&&"_"!=a[0]&&"object"==typeof b&&"statusType"===b.type&&d.push(b)}}return d}}function b(a,b){this.code=a,this.msg=b,this.toString=function(){return this.code}}kzi.statuses=new a,kzi.statuses.ok=200,kzi.statuses.invalid_input=401,kzi.statuses.not_found=404,kzi.statuses.build_status({error:{sig:{code:1001,msg:"错误的签名"},ver:{code:1002,msg:"错误的接口版本号"},err_client_ver:{code:1003,msg:"错误的接口版本号"},invalid_token:{code:1004,msg:"无效的访问令牌"},permission_deny:{code:1005,msg:"无权限访问"},server_error:{code:500,msg:"服务端错误"},unknown:{code:404,msg:"找不到资源"}},user_error:{not_found:{code:2001,msg:"用户不存在"},invalid_user:{code:2002,msg:"错误的用户"},login_err:{code:2003,msg:"用户登录的时候出现异常"},invalid_userinfo:{code:2004,msg:"用户登录失败，用户名或密码错"},not_login:{code:2005,msg:"没有登录,无权限访问"},signup_error:{code:2006,msg:"登录错误"},get_user_error:{code:2007,msg:"获取用户错误"},search_user_error:{code:2008,msg:"搜索用户错误"},update_user_error:{code:2009,msg:"更新用户错误"},update_avatar_error:{code:2010,msg:"更新头像错误"},change_pwd_error:{code:2011,msg:"修改密码错误"},check_email_error:{code:2012,msg:"检查邮箱错误"},check_name_error:{code:2013,msg:"检查用户名错误"},invalid_pwd_error:{code:2014,msg:"验证密码错误"},email_not_exist:{code:2015,msg:"邮件不存在"},forgot_apply_error:{code:2016,msg:"修改忘记密码错误"},invalid_token_error:{code:2017,msg:"无效的身份"},prefs_get_error:{code:2018,msg:"获取个性化设置错误"},prefs_set_error:{code:2019,msg:"设置个性化设置错误"},invalid_name_error:{code:2020,msg:"用户名无效"},email_has_exist:{code:2021,msg:"邮箱地址已经存在"},name_has_exist:{code:2022,msg:"用户名已经存在"},change_email_error:{code:2023,msg:"修改邮箱地址失败"},email_match_error:{code:2024,msg:"邮箱地址匹配失败"},get_secret_error:{code:2025,msg:"获取验证密钥失败"},enable_twofactor_error:{code:2026,msg:"启动验证失败"},disable_twofactor_error:{code:2027,msg:"禁用验证失败"},twofactor_match_error:{code:2028,msg:"验证匹配错误"},recovery_match_error:{code:2029,msg:"验证匹配错误"},signin_limit:{code:2034,msg:"登录失败次数过多!"},signin_verify_image_error:{code:2035,msg:"验证码错误!"},signup_limit:{code:2036,msg:"规定时间内注册已达上限!"}},team_error:{not_found:{code:4001,msg:"团队不存在"},invalid_team:{code:4002,msg:"错误的用户"},user_team_error:{code:4003,msg:"用户团队错误"},create_team_error:{code:4004,msg:"创建团队错误"},update_team_error:{code:4005,msg:"团队更新错误"},del_team_error:{code:4006,msg:"删除团队错误"},member_add_error:{code:4007,msg:"添加会员错误"},member_get_error:{code:4008,msg:"获取会员错误"},member_remove_error:{code:4009,msg:"移除会员错误"},member_role_error:{code:4010,msg:"会员角色错误"},member_group_error:{code:4011,msg:"会员分组错误"},group_add_error:{code:4012,msg:"添加团队成员分组错误"},group_remove_error:{code:4013,msg:"移除团队成员分组错误"},group_update_error:{code:4014,msg:"更新团队成员分组错误"},group_get_error:{code:4015,msg:"获取团队成员分组错误"},trans_team_error:{code:4016,msg:"转换团队错误"},get_team_error:{code:4017,msg:"获取团队错误"},update_logo_error:{code:4018,msg:"更新团队logo错误"},set_current_error:{code:4019,msg:"设置当前团队正确"},member_invite_error:{code:4020,msg:"邀请成员错误"},member_uninvite_error:{code:4021,msg:"取消邀请成员错误"},member_projects_error:{code:4022,msg:"获取成员项目错误"}},prj_error:{not_found:{code:5001,msg:"项目不存在"},invalid_prj:{code:5002,msg:"错误的项目"},user_prj_error:{code:5003,msg:"用户项目错误"},create_prj_error:{code:5004,msg:"创建项目错误"},prj_name_exist:{code:5005,msg:"同一团队下的项目名重复"},prj_activity_error:{code:5006,msg:"获取项目活动错误"},update_prj_error:{code:5007,msg:"项目更新错误"},update_prj_pic_error:{code:5008,msg:"项目封面更新错误"},remove_only_admin_error:{code:5009,msg:"只有一个管理员用户，不允许从项目移除成员。"},add_member_error:{code:5010,msg:"添加项目成员错误"},remove_member_error:{code:5011,msg:"移除项目成员错误"},close_prj_error:{code:5012,msg:"关闭项目失败"}},entry_error:{not_found:{code:6001,msg:"列表不存在"},invalid_entry:{code:6002,msg:"错误的列表"},create_entry_error:{code:6003,msg:"创建列表错误"},update_entry_error:{code:6004,msg:"列表更新错误"},get_entry_error:{code:6005,msg:"获取列表错误"},trash_entry_error:{code:6006,msg:"回收列表错误"},del_entry_error:{code:6007,msg:"删除列表错误"},archive_entry_error:{code:6008,msg:"列表存档错误"},pos_entry_error:{code:6009,msg:"还原列表错误"}},task_error:{not_found:{code:7001,msg:"任务不存在"},invalid_task:{code:7002,msg:"错误的任务"},create_task_error:{code:7003,msg:"创建任务错误"},update_task_error:{code:7004,msg:"任务更新错误"},task_activity_error:{code:7005,msg:"获取任务活动错误"},task_add_user_error:{code:7006,msg:"添加任务成员错误"},get_task_list_error:{code:7007,msg:"获取任务错误"},get_task_items_error:{code:7008,msg:"加载任务条目列表失败"},get_task_attachments_error:{code:7009,msg:"加载任务条目附件失败"},task_del_user_error:{code:7010,msg:"移除任务成员失败"},add_task_item_error:{code:7011,msg:"添加任务条目失败"},change_task_item_status_error:{code:7012,msg:"修改任务条目状态失败"},del_task_item_error:{code:7013,msg:"移除任务条目失败"},update_task_item_error:{code:7014,msg:"更新任务条目失败"},del_comment_error:{code:7015,msg:"删除评论失败"},update_task_tag_error:{code:7016,msg:"定义任务标签失败"},todo_update_error:{code:7017,msg:"更新TODO错误"},todo_checked_error:{code:7018,msg:"完成检查项错误"},todo_unchecked_error:{code:7019,msg:"设置检查项错误"},todo_position_error:{code:7020,msg:"todo_position_error"},watcher_add_error:{code:7021,msg:"watcher_add_error"},watcher_remove_error:{code:7022,msg:"watcher_remove_error"},get_tasks_forme_error:{code:7033,msg:"获取我的任务错误"}},file_error:{not_found:{code:8001,msg:"找不到文件"},invalid_file:{code:8002,msg:"文件无效"},create_file_error:{code:8003,msg:"创建文件错误"},update_file_error:{code:8004,msg:"上次文件错误"},trash_file_error:{code:8005,msg:"回收文件错误"},del_file_error:{code:8006,msg:"删除文件错误"},get_file_error:{code:8007,msg:"获取文件错误"},get_list_error:{code:8008,msg:"获取文件列表错误"},version_new_error:{code:8009,msg:"上次新版本错误"},version_get_error:{code:8010,msg:"获取新版本错误"},get_attach_error:{code:8011,msg:"获取附件错误"},attach_file_error:{code:8012,msg:"关联附件错误"},detach_file_error:{code:8013,msg:"取消附件关联错误"},get_targets_error:{code:8014,msg:"获取标签错误"},generate_thumbnail_error:{code:8308,msg:"获取标签错误"}},comment_error:{not_found:{code:20001,msg:"找不到评论"},add_error:{code:20002,msg:"添加评论错误"},update_error:{code:20003,msg:"更新评论错误"},delete_error:{code:20004,msg:"删除评论错误"},get_error:{code:20005,msg:"获取评论错误"}},watch_error:{not_found:{code:21001,msg:"找不到关注"},add_error:{code:21002,msg:"添加关注错误"},remove_error:{code:21003,msg:"移除关注错误"},get_watcher_error:{code:21004,msg:"获取关注错误"},get_watch_forme_error:{code:21005,msg:"移除关注错误"}},post_error:{not_found:{code:9001,msg:"话题不存在"}},page_error:{not_found:{code:10001,msg:"文档不存在"}},event_error:{add_event_error:{code:13001,msg:"添加日程失败"},get_event_error:{code:13002,msg:"获取日程失败"},attendee_add_error:{code:13003,msg:"attendee_add_error"},attendee_remove_error:{code:13004,msg:"attendee_remove_error"},trash_event_error:{code:13005,msg:"trash_event_error"},update_event_error:{code:13006,msg:"update_event_error"},not_found:{code:13007,msg:"not_found"}},upload_error:{upload_error:{code:22001,msg:"上传错误"}},notice_error:{get_unread_error:{code:23001,msg:"获取未读通知错误"},get_list_error:{code:23002,msg:"获取通知列表错误"},set_all_read_error:{code:23003,msg:"设置通知已读错误"}},activity_error:{get_list_error:{code:24001,msg:"获取活动列表错误"}},invite_error:{invalid_invite_code:{code:25001,msg:"邀请错误"},accept_invite_code:{code:25002,msg:"接受邀请错误"},join_invite_code:{code:25003,msg:"补充资料并接受邀请错误"},refuse_invite_code:{code:25004,msg:"拒绝邀请错误"},get_invite_code:{code:25005,msg:"获取邀请码错误"},get_new_invite_code:{code:25006,msg:"获取最新邀请码错误"}},others:{invalid_input:{code:401,msg:"输入格式不正确"}}})}(),function(){"use strict";kzi.constant=kzi.constant||{},kzi.constant.operation={add:1,update:2,remove:3},kzi.constant.get_role_name=function(a){switch(a){case kzi.constant.role.admin:return"管理员";case kzi.constant.role.member:return"普通成员";case kzi.constant.role.visitor:return"访问者";default:return"没有该角色"}},kzi.constant.get_member_roles=function(){return[{role:kzi.constant.role.admin,name:"管理员"},{role:kzi.constant.role.member,name:"成员"}]},kzi.constant.event_names={emit_filter_activity_by_type:"emit_filter_activities_by_type",filter_activity_by_type:"filter_activities_by_type",filter_activity_by_prj:"filter_activities_by_prj",reload_item_activities:"reload_item_activities",clear_item_activities:"clear_item_activities",clear_comment_activity:"clear_comment_activity",emit_filter_watch_by_type:"emit_filter_watch_by_type",filter_watch_by_type:"filter_watch_by_type",filter_posts_by_sort:"filter_posts_by_sort",post_comment_add:"post_comment_add",shortcut_key_to_edit:"shortcut_key_to_edit",shortcut_key_to_cancel:"shortcut_key_to_cancel",shortcut_key_to_task:"shortcut_key_to_task",shortcut_key_select_prjs:"shortcut_key_select_prjs",shortcut_key_left_menu:"shortcut_key_left_menu",load_entity_task:"load_entity_task",load_entity_event:"load_entity_event",load_entity_post:"load_entity_post",load_entity_file:"load_entity_file",load_entity_page:"load_entity_page",load_entity_mail:"load_entity_mail",load_comments:"load_comments",clear_comments:"clear_comments",select_comment_tab:"select_comment_tab",select_activity_tab:"select_activity_tab",load_teams_projects_sucess:"load_teams_projects_sucess",notice_new:"notice_new",load_prj_feed:"load_prj_feed",show_project_sidebar:"show_project_sidebar",on_project_tasks_filter:"on_project_tasks_filter",show_project_tasks_filter:"show_project_tasks_filter",show_project_setting:"show_project_setting",show_project_setting_step0:"show_project_setting_step0",show_project_setting_label:"show_project_setting_label",show_project_setting_prjcopy:"show_project_setting_prjcopy",show_project_setting_exportdata:"show_project_setting_exportdata",show_project_setting_createbymail:"show_project_setting_createbymail",show_project_setting_baseinfo:"show_project_setting_baseinfo",show_project_setting_timingtask:"show_project_setting_timingtask",project_clear_task_filter:"project_clear_task_filter",project_sort_change:"project_sort_change",on_file_add:"on_file_add",on_weixin_bind:"on_weixin_bind",on_pastefile_to_task:"on_pastefile_to_task",on_pastefile_to_event:"on_pastefile_to_event",on_pastefile_to_file:"on_pastefile_to_file",on_pastefile_to_post:"on_pastefile_to_post",on_pastefile_to_folder:"on_pastefile_to_folder",on_uploadfile_add:"on_uploadfile_add",on_uploadfile_add_to_post:"on_uploadfile_add_to_post",on_uploadfile_del_to_post:"on_uploadfile_del_to_post",on_task_add:"on_task_add",on_task_trash:"on_task_trash",on_task_archive:"on_task_archive",on_task_complete:"on_task_complete",on_task_move:"on_task_move",on_task_update:"on_task_update",on_task_comment:"on_task_comment",on_task_badges_file:"on_task_badges_file",on_task_unarchived:"on_task_unarchived",on_task_badges_check:"on_task_badges_check",on_task_assign:"on_task_assign",on_event_add:"on_event_add",on_event_update:"on_event_update",on_event_update_date:"on_event_update_date",on_event_trash:"on_event_trash",on_file_trash:"on_file_trash",on_file_move:"on_file_move",on_file_update:"on_file_update",on_post_trash:"on_post_trash",on_post_comment:"on_post_comment",on_post_update:"on_post_update",on_page_update:"on_page_update",on_page_trash:"on_page_trash",on_slide_hide:"on_slide_hide",on_mail_trash:"on_mail_trash",on_right_menu:"on_right_menu",member_state_change:"member_state_change",team_member_role_change:"team_member_role_change",project_member_role_change:"project_member_role_change",project_permission_change:"project_permission_change",on_comment_new:"on_comment_new",scroll_up:"scroll_up",scroll_down:"scroll_down",scroll_page_up:"scroll_page_up",scroll_page_down:"scroll_page_down",page_go_full_screen:"page_go_full_screen",header_hide:"header_hide",header_show:"header_show",post_updated_by_editor:"post_updated_by_editor",post_created_by_editor:"post_created_by_editor",page_updated_by_editor:"page_saved_by_editor",page_created_by_editor:"page_created_by_editor",team_add_stats:"team_add_stats",team_remove_stats:"team_remove_stats",autosave_cancel:"autosave_cancel"},kzi.constant.shift_cutover_keys=[84,67,70,68,65,69,82,71],kzi.constant.global_shortcut_keys=[63,69,27,47,96,85,71,83,78,80,84,70],kzi.constant.entry_shortcut_keys=[37,38,39,40,13,67,27,68,76,77,32,87,60,62,74,75,73,69,65],kzi.constant.keyASCIIs={C:67,D:68,A:65,B:66,E:69,F:70,G:71,P:80,R:82,S:83,T:84,U:85,L:76,M:77,N:78,W:87,At:64,ESC:27,Slash:47,I:73,J:74,K:75,Key96:96,QuestionMark:63,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_RETURN:13,VK_SPACE:32,VK_LessThan:60,VK_GreaterThan:62,ENTER:13,VK_PAGEUP:33,VK_PAGEDOWN:34},kzi.constant.all_hour_sections=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],kzi.constant.all_minute_sections=["00","10","20","30","40","50"],kzi.constant.mail={domain:"@mail.worktile.com"},kzi.constant.role={deleted:-1,admin:1,member:2,guest:3,visitor:4},kzi.constant.status={ok:1,pending:2},kzi.constant.state={offline:0,online:1,busy:2,leave:3},kzi.constant.user_status={ok:1,pending:2,inactived:3},kzi.constant.trash={no:0,yes:1},kzi.constant.archived={yes:1,no:0},kzi.constant.star={yes:1,no:0},kzi.constant.completed={yes:1,no:0},kzi.constant.checked={yes:1,no:0},kzi.constant.notify={yes:1,no:0},kzi.constant.entity_type={task:"task",file:"file",post:"post",page:"page",event:"event",mail:"mail"},kzi.constant.notice_type_icon={task:{name:"task",icon:"icon-check"},file:{name:"file",icon:"icon-file"},post:{name:"post",icon:"icon-list-alt"},page:{name:"page",icon:"icon-file-text-alt"},event:{name:"event",icon:"icon-calendar"},project:{name:"project",icon:"icon-inbox"},comment:{name:null,icon:"icon-comment-alt"},team:{name:"team",icon:"icon-sitemap"}},kzi.constant.feed_type_icon={task:{name:"task",icon:"icon-check"},event:{name:"event",icon:"icon-calendar"},file:{name:"file",icon:"icon-file"},post:{name:"post",icon:"icon-list-alt"},page:{name:"page",icon:"icon-file-text-alt"},completed:{name:"task",icon:"icon-check"},comment:{name:null,icon:"icon-comment-alt"}},kzi.constant.notice_types={all:"all",assign:"assign",complete:"complete",metion:"metion",watch:"watch",comment:"comment",other:"other"},kzi.constant.get_notice_types=function(){return[{type:kzi.constant.notice_types.all,name:"全部消息",icon_class:"icon-bell"},{type:kzi.constant.notice_types.assign,name:"分配任务",icon_class:"icon-user"},{type:kzi.constant.notice_types.complete,name:"完成任务",icon_class:"icon-check-sign"},{type:kzi.constant.notice_types.metion,name:"提到我的",icon_class:"icon-quote-left"},{type:kzi.constant.notice_types.watch,name:"提醒关注",icon_class:"icon-eye-open"},{type:kzi.constant.notice_types.comment,name:"评论",icon_class:"icon-comment-alt"},{type:kzi.constant.notice_types.other,name:"更多",icon_class:"icon-ellipsis-horizontal"}]},kzi.constant.xtype={task:"tasks",file:"files",post:"posts",page:"pages",event:"events",email:"emails"},kzi.constant.exts={none:0,txt:1,png:2,jpeg:3,jpg:4,gif:5,doc:6,xls:7,ppt:8,pdf:9,zip:10,rar:11,xml:12,html:13,docx:14,xlsx:15,pptx:16,mail:17,pages:18,key:19,numbers:20,ipa:21,apk:22,xap:23,cs:24,java:25,rb:26,py:27,css:28,js:29,cpp:30,c:31,h:32,php:33,cc:34,hh:35,vb:36,mp3:37,avi:38,chm:39,vsd:40,rp:41,wmv:42,bmp:43,psd:44,cvs:45,ai:46,json:47,"7z":48,tar:49,swf:50,wim:51,bat:52,sh:53,wab:54,vba:55,ost:56,msi:57,log:58,svg:59,less:60,md:61,bin:62,obj:63,edx:64,mmap:65,thmx:66,dump:67,one:68,pst:69,vcf:70,ini:71,csv:72,wps:73,et:74,dps:75,pfx:76},kzi.constant.permission={holder:0,ok:1,project_archived:4,entity_not_found:8,entity_deleted:16,entity_archived:32,team_not_found:64,team_stop_service:128},kzi.constant.prj_permission={admin:31,member:15,guest:7,viewer:1,deny:0},kzi.constant.team_module={setting:16,add_project:8,add_member:4,view:2,view_base:1},kzi.constant.team_permission={owner:31,admin:15,member:3,guest:1,deny:0},kzi.constant.prj_module={setting:16,crud:8,comment:4,watch:2,view:1},kzi.constant.client_name={unknown:0,web:1,mail:2,iphone:3,ipad:4,android:5,androidHD:6,winphone:7,win8:8,wap:9,weinxin:10,openapp:11},kzi.constant.get_ext=function(a){return kzi.constant.exts[a.toLowerCase()]?kzi.constant.exts[a.toLowerCase()]:0},kzi.constant.image_exts=[2,3,4,5,43],kzi.constant.get_file_icon=function(a){if(1===a.type)switch(a.ext){case 1:return"res/icon/icon-folder-green.png";case 2:return"res/icon/icon-folder-orange.png";case 3:return"res/icon/icon-folder-purple.png";case 4:return"res/icon/icon-folder-red.png";case 8:return"res/icon/icon-folder-blue.png";default:return"res/icon/icon-folder-yellow.png"}else switch(a.ext){case 1:return"res/icon/icon-txt.png";case 2:return"-1";case 3:return"-1";case 4:return"-1";case 5:return"-1";case 6:return"res/icon/icon-word.png";case 7:return"res/icon/icon-excel.png";case 8:return"res/icon/icon-ppt.png";case 9:return"res/icon/icon-pdf.png";case 10:return"res/icon/icon-zip.png";case 11:return"res/icon/icon-rar.png";case 12:return"res/icon/icon-xml.png";case 13:return"res/icon/icon-html.png";case 14:return"res/icon/icon-word.png";case 15:return"res/icon/icon-excel.png";case 16:return"res/icon/icon-ppt.png";case 17:return"res/icon/icon-mail.png";case 18:return"res/icon/icon-pages.png";case 19:return"res/icon/icon-keynote.png";case 20:return"res/icon/icon-numbers.png";case 21:return"res/icon/icon-ipa.png";case 22:return"res/icon/icon-apk.png";case 23:return"res/icon/icon-xap.png";case 24:return"res/icon/icon-csharp.png";case 25:return"res/icon/icon-java.png";case 26:return"res/icon/icon-ruby.png";case 27:return"res/icon/icon-python.png";case 28:return"res/icon/icon-css.png";case 29:return"res/icon/icon-js.png";case 30:return"res/icon/icon-cpp.png";case 31:return"res/icon/icon-c.png";case 32:return"res/icon/icon-h.png";case 33:return"res/icon/icon-php.png";case 34:return"res/icon/icon-c.png";case 35:return"res/icon/icon-h.png";case 36:return"res/icon/icon-vb.png";case 37:return"res/icon/icon-mp3.png";case 38:return"res/icon/icon-avi.png";case 39:return"res/icon/icon-chm.png";case 40:return"res/icon/icon-visio.png";case 41:return"res/icon/icon-rp.png";case 42:return"res/icon/icon-wmv.png";case 43:return"-1";case 44:return"res/icon/icon-psd.png";case 45:return"res/icon/icon-cvs.png";case 46:return"res/icon/icon-ai.png";case 47:return"res/icon/icon-json.png";case 48:return"res/icon/icon-7z.png";case 49:return"res/icon/icon-tar.png";case 50:return"res/icon/icon-swf.png";case 51:return"res/icon/icon-wim.png";case 52:return"res/icon/icon-bat.png";case 53:return"res/icon/icon-sh.png";case 54:return"res/icon/icon-wab.png";case 55:return"res/icon/icon-vba.png";case 56:return"res/icon/icon-ost.png";case 57:return"res/icon/icon-msi.png";case 58:return"res/icon/icon-log.png";case 59:return"res/icon/icon-svg.png";case 60:return"res/icon/icon-less.png";case 61:return"res/icon/icon-md.png";case 62:return"res/icon/icon-bin.png";case 63:return"res/icon/icon-obj.png";case 64:return"res/icon/icon-edx.png";case 65:return"res/icon/icon-mmap.png";case 66:return"res/icon/icon-thmx.png";case 67:return"res/icon/icon-dump.png";case 68:return"res/icon/icon-one.png";case 69:return"res/icon/icon-pst.png";case 70:return"res/icon/icon-vcf.png";case 71:return"res/icon/icon-ini.png";case 72:return"res/icon/icon-csv.png";case 73:return"res/icon/icon-wps.png";case 74:return"res/icon/icon-et.png";case 75:return"res/icon/icon-dps.png";case 76:return"res/icon/icon-pfx.png";default:return"res/icon/icon-file-default.png"}},kzi.constant.get_folder_icons=[{ext:1,path:"res/icon/icon-folder-green.png"},{ext:2,path:"res/icon/icon-folder-orange.png"},{ext:3,path:"res/icon/icon-folder-purple.png"},{ext:4,path:"res/icon/icon-folder-red.png"},{ext:8,path:"res/icon/icon-folder-blue.png"},{ext:0,path:"res/icon/icon-folder-yellow.png"}],kzi.constant.labels=[{name:"blue",desc:"",color:"#59b2e0"},{name:"green",desc:"",color:"#5eac82"},{name:"orange",desc:"",color:"#ef5e1b"},{name:"purple",desc:"",color:"#76428d"},{name:"red",desc:"",color:"#cb1a44"},{name:"yellow",desc:"",color:"#ffb11b"},{name:"shallow_green",desc:"",color:"#33a6b8"},{name:"young_blue",desc:"",color:"#278785"},{name:"willow",desc:"",color:"#91ad70"},{name:"violet",desc:"",color:"#9c90c2"},{name:"red_in",desc:"",color:"#da4d6d"},{name:"peony",desc:"",color:"#c1328e"},{name:"lead",desc:"",color:"#787878"},{name:"gardenia",desc:"",color:"#f7c557"},{name:"peach",desc:"",color:"#f596aa"},{name:"walnut",desc:"",color:"#947a6d"}],kzi.constant.verbs={create:"create",update:"update",add:"add",remove:"remove"},kzi.constant.atypes={project:"project",entry:"entry",task:"task",post:"post",page:"page",file:"file",folder:"folder",todo:"todo",vote:"vote"},kzi.constant.img_exts=[kzi.constant.exts.jpg,kzi.constant.exts.jpeg,kzi.constant.exts.gif,kzi.constant.exts.png,kzi.constant.exts.bmp],kzi.constant.preview_exts=[kzi.constant.exts.doc,kzi.constant.exts.docx,kzi.constant.exts.ppt,kzi.constant.exts.pptx,kzi.constant.exts.xls,kzi.constant.exts.xlsx,kzi.constant.exts.pdf],kzi.constant.text_exts=[kzi.constant.exts.txt,kzi.constant.exts.xml,kzi.constant.exts.html,kzi.constant.exts.cs,kzi.constant.exts.java,kzi.constant.exts.rb,kzi.constant.exts.py,kzi.constant.exts.css,kzi.constant.exts.js,kzi.constant.exts.cpp,kzi.constant.exts.c,kzi.constant.exts.h,kzi.constant.exts.php,kzi.constant.exts.cc,kzi.constant.exts.hh,kzi.constant.exts.vb,kzi.constant.exts.cvs,kzi.constant.exts.json,kzi.constant.exts.log,kzi.constant.exts.less,kzi.constant.exts.md,kzi.constant.exts.csv],kzi.constant.file_type={file:0,folder:1},kzi.constant.folder_ext={normal:0,image:1,mail:2},kzi.constant.prj_colors=["#6b0516","#ac050f","#d61818","#dc428e","#9c2867","#765c9d","#6f6eb4","#4761b5","#286391","#3c8cad","#38a8aa","#94ccc3","#6ea182","#15945f","#5d8d0b","#47634c","#c19c01","#ecba05","#dc8310","#aa6517","#ac8671","#805f4c","#70736c","#444444"],kzi.constant.prj_icons=["icon-apple","icon-android","icon-html5","icon-desktop","icon-mobile-phone","icon-tablet","icon-github","icon-dribbble","icon-linux","icon-windows","icon-qrcode","icon-bug","icon-suitcase","icon-beaker","icon-plane","icon-truck","icon-money","icon-book","icon-music","icon-facetime-video","icon-picture","icon-cloud","icon-gift","icon-coffee","icon-heart","icon-flag","icon-bar-chart","icon-lock","icon-gears","icon-fire"],kzi.constant.team={edition:{free:1,business:2,nonprofit:3},status:{normal:1,trial:2,expired:3},quota_free:10,quota_nonprofit:50},kzi.constant.subscription={status:{normal:1,arrears:2,trial:3,expired:4},step:{pay_online:1,already_fee:2,next_fee:3,already_fee_and_next_new:4},price:10,dividing_day:15},kzi.constant.payment={status:{unpaid:1,successed:2,failed:3,cancel:4},method:{unknown:0,online:1,manual:2,remit:3,transfer:4,recharge:5},type:{unknown:0,alipay:1,bank:2,paypal:3,credit:4,cash:5,coupon:6},direction:{payment:1,refund:2},scheme:{one_month:1,one_quarter:3,half_year:6,one_year:12,two_year:24}},kzi.constant.client={unknown:0,web:1,mail:2,iphone:3,ipad:4,android:5,androidHD:6,winphone:7,win8:8,wap:9,weinxin:10,openapp:11},kzi.constant.prj_visibility={"private":1,"protected":2,"public":3},kzi.constant.team_visibility={"private":1,"public":2},kzi.constant.event_trash_type={one:1,follow_up:2,all:3},kzi.constant.event_update_type={one:1,follow_up:2},kzi.constant.event_recurrence={no_repeat:0,day:1,week:2,month:3,year:4},kzi.constant.event_repeat_intervals=[{key:0,desc:"不重复"},{key:1,desc:"每日重复"},{key:2,desc:"每周重复"},{key:3,desc:"每月重复"},{key:4,desc:"每年重复"}],kzi.constant.prj_navigations=[{id:1,name:"task",title:"任务",icon:"icon-check",shortcuts:"(Shift+T)",desc:"提供看板式任务管理功能，通过拖拽来分配任务或者在不同列表间移动任务"},{id:2,name:"event",title:"日历",icon:"icon-calendar",shortcuts:"(Shift+E)",desc:"通过日历方便的安排团队日程，设置了截止日期的任务也会在日历中显示"},{id:3,name:"file",title:"文件",icon:"icon-file",shortcuts:"(Shift+F)",desc:"与团队成员共享文件资源，支持文件在线预览，支持文件历史版本管理"},{id:4,name:"post",title:"话题",icon:"icon-list-alt",shortcuts:"(Shift+C)",desc:"通过话题随时随地与团队成员发起讨论，打造属于团队内部的讨论组"},{id:5,name:"page",title:"文档",icon:"icon-file-text-alt",shortcuts:"(Shift+D)",desc:"在线编写文档，形成团队知识库，支持文档历史版本管理和比对功能"},{id:6,name:"graph",title:"简报",icon:"icon-bar-chart",shortcuts:"(Shift+G)",desc:"通过对项目中的任务完成情况进行统计，形成周报和日报，查看项目的历史活动"}],kzi.constant.prj_menues={task:1,event:2,file:3,post:4,page:5,graph:6},kzi.constant.actions=[{action:"create_task",desc:"创建任务"},{action:"complete_task",desc:"完成任务"},{action:"expire_task",desc:"任务设置截止时间"},{action:"assign_task",desc:"任务分配"},{action:"create_event",desc:"新建日程"},{action:"pick_post",desc:"发起话题"},{action:"create_page",desc:"新建文档"},{action:"page_version",desc:"文档新版本"},{action:"pick_comment",desc:"发表评论"}],kzi.constant.search={max_history:20},kzi.constant.team_industries={0:"",1:"互联网",2:"电商",3:"教育",4:"游戏",5:"制造业/外贸",6:"金融/证券/银行",7:"咨询/广告/律所",8:"房地产/建筑/设计",9:"社团/公益组织/事业单位",13:"其他"},kzi.constant.graph_color={done:"#5eac82",todo:"#ffb11b",addnew:"#59b2e0"},kzi.constant.stats_type=[{name:"task_overview",desc:"项目任务统计",icon:"wtf-pie",value:1},{name:"task_entry",desc:"任务列表 Top 5",icon:"wtf-colum",value:2},{name:"task_member",desc:"成员列表 Top 5",icon:"wtf-bar",value:3},{name:"task_5day",desc:"近5天任务完成数",icon:"wtf-line",value:4}]}(),function(){"use strict";function a(a,b){var c={get:1,post:2,put:3,del:4},d=!1,e=function(b,c,e,f){if(2005===b.code)return void a.returnToSignin();if(b.code===kzi.statuses.error.permission_deny.code)return void kzi.msg.error("没有权限操作");
if(!d){d=!0;var g="操作失败，请重新尝试";"GET"==f.method&&(g="加载失败，请重新尝试"),kzi.msg.error(g,function(){d=!1})}},f=function(a,d,f,g,h,i){h||(h=e);var j=function(){kzi.console.timeEnd("Ajax："+a)},k=null;switch(d){case c.get:kzi.console.time("Ajax："+a),k=b.get(a);break;case c.post:kzi.console.time("Ajax："+a),k=b.post(a,{data:f});break;case c.del:kzi.console.time("Ajax："+a),k=b({method:"delete",url:a});break;case c.put:kzi.console.time("Ajax："+a),k=b.put(a,{data:f});break;default:throw new Error("传入的方法类型不支持")}return k=k.success(j),g&&(k=k.success(g)),h&&(k=k.error(h)),i&&(k=k["finally"](i)),k},g=function(a,b,d,e){return f(a,c.get,null,b,d,e)},h=function(a,b,d,e,g){return f(a,c.post,b,d,e,g)},i=function(a,b,d,e){return f(a,c.del,null,b,d,e)},j=function(a,b,d,e,g){return f(a,c.put,b,d,e,g)};return{error:function(a){$(document).scope().global.show_msg||($(document).scope().global.show_msg=!0,kzi.msg.error("加载失败，请重新尝试",function(){$(document).scope().global.show_msg=!1}))},getcode:function(a,b,c){var d="/api/user/signin/verify/image";g(d,a,b,c)},signin:function(a,b,c,d,e,f,g){var i={name:a,password:b};c&&d&&(i.image_code=c,i.image_md5=d),h("/api/user/signin",i,e,f,g)},signup:function(a,b,c,d,e,f,g,i,j,k,l){var m={name:a,email:b,password:c,referrer:e,utm_source:f};g&&i&&(m.image_code=g,m.image_md5=i),h("/api/user/signup",m,j,k,l)},signout:function(a,b,c){h("/api/user/signout",null,a,b,c)},auth:function(a,b,c){g("/api/me",a,b,c)},referrals:function(a,b,c){g("/api/user/referrals",a,b,c)},watch:function(a,b,c,d,e,f,g){h("/api/"+b+"/"+c+"/watcher?pid="+a,{uids:[d]},e,f,g)},watch_batch:function(a,b,c,d,e,f,g){h("/api/"+b+"/"+c+"/watcher?pid="+a,{uids:d},e,f,g)},unwatch:function(a,b,c,d,e,f,g){i("/api/"+b+"/"+c+"/watchers/"+d+"?pid="+a,e,f,g)},get_my_watchs:function(a,b,c,d,e,f,h){g("/api/watchs/forme?team_id="+a+"&type="+b+"&since_id="+c+"&count="+d,e,f,h)},search:{all:function(a,b,c,d,e,f){c.keyword=encodeURIComponent(a),b&&(c.page=b);var h=_.foldl(c,function(a,b,c){return b?a+"&"+c+"="+b:a},"").substr(1);g("/api/search?"+h,d,e,f)},tasks:function(a,b,c,d,e,f){c.keyword=encodeURIComponent(a),b&&(c.page=b);var h=_.foldl(c,function(a,b,c){return b?a+"&"+c+"="+b:a},"").substr(1);g("/api/tasks/search?"+h,d,e,f)},events:function(a,b,c,d,e,f){c.keyword=encodeURIComponent(a),b&&(c.page=b);var h=_.foldl(c,function(a,b,c){return b?a+"&"+c+"="+b:a},"").substr(1);g("/api/events/search?"+h,d,e,f)},files:function(a,b,c,d,e,f){c.keyword=encodeURIComponent(a),b&&(c.page=b);var h=_.foldl(c,function(a,b,c){return b?a+"&"+c+"="+b:a},"").substr(1);g("/api/files/search?"+h,d,e,f)},posts:function(a,b,c,d,e,f){c.keyword=encodeURIComponent(a),b&&(c.page=b);var h=_.foldl(c,function(a,b,c){return b?a+"&"+c+"="+b:a},"").substr(1);g("/api/posts/search?"+h,d,e,f)},pages:function(a,b,c,d,e,f){c.keyword=encodeURIComponent(a),b&&(c.page=b);var h=_.foldl(c,function(a,b,c){return b?a+"&"+c+"="+b:a},"").substr(1);g("/api/pages/search?"+h,d,e,f)},mails:function(a,b,c,d,e,f){c.keyword=encodeURIComponent(a),b&&(c.page=b);var h=_.foldl(c,function(a,b,c){return b?a+"&"+c+"="+b:a},"").substr(1);g("/api/mails/search?"+h,d,e,f)}},user:{get:function(a,b,c){g("/api/account/basic",a,b,c)},update:function(a,b,c,d,e,f,g){j("/api/user",{display_name:a,title:b,phone:c,desc:d,initials:""},e,f,g)},email_check:function(a,b,c,d){g("/api/user/email/check?email="+a,b,c,d)},name_check:function(a,b,c,d){g("/api/user/name/check?name="+a,b,c,d)},forgot_pwd:function(a,b,c,d){h("/api/user/password/forgot",{email:a},b,c,d)},change_pwd:function(a,b,c,d,e){j("/api/user/password/change",{oldpassword:a,password:b},c,d,e)},reset_pwd:function(a,b,c,d,e){j("/api/user/password/reset?token="+a,{password:b},c,d,e)},set_avatar:function(a,b,c,d){j("/api/user/avatar",{avatar:a},b,c,d)},search_user:function(a,b,c,d){g("/api/user/search?criteria="+a,b,c,d)},set_user_prefs:function(a,b,c,d,e,f){j("/api/users/"+a+"/prefs",{key:b,value:c},d,e,f)},apply:function(a,b,c,d,e,f){h("/api/apply",{email:a,team_name:b,team_desc:c},d,e,f)},get_apply:function(a,b,c,d){g("/api/apply?code="+a,b,c,d)},apply_signup:function(a,b,c,d,e,f,g,i){var j={name:b,email:c,password:d,team_name:e};h("/api/user/apply_signup?code="+a,j,f,g,i)},email_change_apply:function(a,b,c,d){h("/api/user/email/apply",{email:a},b,c,d)},reset_email:function(a,b,c,d){j("/api/user/email/reset?token="+a,null,b,c,d)},activate_email:function(a,b,c,d){j("/api/user/activate?code="+a,"",b,c,d)},resend_activation_email:function(a,b,c){j("/api/user/activation/resend","",a,b,c)},signin_twofactor:function(a,b,c,d,e,f){var g={name:b,password:c,factor:a};h("/api/user/twofactor",g,d,e,f)},signin_recovery:function(a,b,c,d,e,f){var g={name:b,password:c,factor:a};h("/api/user/recovery",g,d,e,f)},caltoken:function(a,b,c,d){g("/api/user/caltoken?uid="+a,b,c,d)},caltoken_reset:function(a,b,c,d){j("/api/user/caltoken/reset?uid="+a,{},b,c,d)},overview_dashboard:function(a,b,c){g("/api/user/overview/dashboard",a,b,c)},set_user_old:function(a,b,c){return j("/api/user/old",{},a,b,c)},weixin_unbind:function(a,b,c){return g("/api/weixin/unbind",a,b,c)}},account:{get_basic:function(a,b,c){return g("/api/account/basic",a,b,c)},get_teams:function(a,b,c){g("/api/account/teams",a,b,c)},get_projects:function(a,b,c){g("/api/account/projects",a,b,c)},get_security:function(a,b,c,d){g("/api/account/security?page="+a,b,c,d)},conform_password:function(a,b,c,d){j("/api/account/sudo/confirm",{password:a},b,c,d)},get_recovery_codes:function(a,b,c){g("/api/account/twofactor/recovery",a,b,c)},get_twofactor_secret:function(a,b,c){g("/api/account/twofactor/secret",a,b,c)},enable_twofactor:function(a,b,c,d){j("/api/account/twofactor/enable",{factor:a},b,c,d)},disable_twofactor:function(a,b,c){j("/api/account/twofactor/disable",{},a,b,c)},get_apps:function(a,b,c){g("/api/account/apps",a,b,c)},decommissioning_app:function(a,b,c,d){i("/api/account/apps/"+a.app_id+"?type="+a.type,b,c,d)},get_contacts:function(a,b,c){return g("/api/user/teams/contacts/",a,b,c)},get_notice_settings:function(a,b,c){return g("/api/account/notice/settings/",a,b,c)},update_email_notice:function(a,b,c,d){return h("/api/account/notice/settings",{type:"email",email_notice:a},b,c,d)},update_weixin_notice:function(a,b,c,d){return h("/api/account/notice/settings",{type:"weixin",weixin_notice:a},b,c,d)},update_mobile_notice:function(a,b,c,d){return h("/api/account/notice/settings",{type:"mobile",client_notice:a},b,c,d)}},team:{get_full:function(a,b,c,d){return g("/api/teams/"+a,b,c,d)},get_basic:function(a,b,c,d){return g("/api/teams/"+a+"/basic",b,c,d)},get_list:function(a,b,c){return g("/api/teams",a,b,c)},add:function(a,b,c,d,e,f){return h("/api/team/",{name:a,desc:b,industry:c},d,e,f)},update:function(a,b,c,d,e,f,g,h){return j("/api/teams/"+a+"/account",{name:b,desc:c,url:d,industry:e},f,g,h)},transfer:function(a,b,c,d,e){return j("/api/teams/"+a+"/account/transfer",{uid:b},c,d,e)},dismiss:function(a,b,c,d){return i("/api/teams/"+a+"/account",b,c,d)},get_team_projects:function(a,b,c,d){return g("/api/teams/"+a+"/projects?has_stats=true",b,c,d)},add_member:function(a,b,c,d,e){return h("/api/teams/"+a+"/member",{uid:b},c,d,e)},del_member:function(a,b,c,d,e){return i("/api/teams/"+a+"/members/"+b,c,d,e)},invite_member:function(a,b,c,d,e,f,g){return h("/api/teams/"+a+"/member/invite",{members:b,message:c,project_ids:d},e,f,g)},uninvite_member:function(a,b,c,d,e){return j("/api/teams/"+a+"/members/"+b+"/uninvite",null,c,d,e)},set_role:function(a,b,c,d,e,f){return j("/api/teams/"+a+"/members/"+b+"/role",{role:c},d,e,f)},get_team_members_with_stats:function(a,b,c,d){return g("/api/teams/"+a+"/members?with_stats=true",b,c,d)},get_team_members:function(a,b,c,d){return g("/api/teams/"+a+"/members",b,c,d)},get_member_projects:function(a,b,c,d,e,f){var h=c?"?supp=true":"";return g("/api/teams/"+a+"/members/"+b+"/projects"+h,d,e,f)},get_account_project_members:function(a,b,c,d,e){return g("/api/teams/"+a+"/account/projects/"+b+"/members",c,d,e)},add_account_project_member:function(a,b,c,d,e,f,g){return h("/api/teams/"+a+"/account/projects/"+b+"/member",{uid:c,role:d},e,f,g)},set_account_project_role:function(a,b,c,d,e,f,g){return j("/api/teams/"+a+"/account/projects/"+b+"/members/role",{uid:c,role:d},e,f,g)},member_join_projects:function(a,b,c,d,e,f){return j("/api/teams/"+a+"/members/"+b+"/join/projects",{pids:c},d,e,f)},leave:function(a,b,c,d){j("/api/teams/"+a+"/leave",null,b,c,d)},summary:function(a,b,c,d){return g("/api/teams/"+a+"/account/summary",b,c,d)},upgrade:function(a,b,c,d,e){j("/api/teams/"+a+"/account/upgrade",{quota:b},c,d,e)},degrade:function(a,b,c,d){j("/api/teams/"+a+"/account/degrade",null,b,c,d)},payment:function(a,b,c,d){g("/api/teams/"+a+"/account/payment",b,c,d)},get_payments:function(a,b,c,d,e){g("/api/teams/"+a+"/account/payments?page="+b,c,d,e)},get_billings:function(a,b,c,d,e){g("/api/teams/"+a+"/account/billings",c,d,e)},redeem_coupon:function(a,b,c,d,e){h("/api/teams/"+a+"/account/redeem",{coupon_no:b},c,d,e)},cancel_payment:function(a,b,c,d,e){i("/api/teams/"+a+"/account/payment?pay_id="+b,c,d,e)},get_account_members:function(a,b,c,d){g("/api/teams/"+a+"/account/members",b,c,d)},get_account_projects:function(a,b,c,d){g("/api/teams/"+a+"/account/projects",b,c,d)},get_security_histories:function(a,b,c,d,e){g("/api/teams/"+a+"/account/security?page="+b,c,d,e)},change_subscription:function(a,b,c,d,e){j("/api/teams/"+a+"/account/subscription",{quota:b},c,d,e)},bulk_export:function(a,b,c,d){h("/api/teams/"+a+"/account/export",null,b,c,d)},get_bulk_export:function(a,b,c,d,e){return g("/api/teams/"+a+"/account/export?page="+b,c,d,e)},set_visibility:function(a,b,c,d,e){return j("/api/teams/"+a+"/account/visibility",{visibility:b},c,d,e)},get_tasks:function(a,b,c,d,e,f,h,i){return g("/api/teams/"+a+"/tasks?page="+e+"&filter="+d+"&uid="+b+"&pid="+c,f,h,i)},get_tasks_overview:function(a,b,c,d){return g("/api/teams/"+a+"/tasks/overview",b,c,d)},get_team_stats:function(a,b,c,d){return g("/api/teams/"+a+"/stats",b,c,d)},add_team_stats:function(a,b,c,d,e){return j("/api/projects/"+a+"/stats",{types:b},c,d,e)},del_team_stats:function(a,b,c,d,e){return i("/api/projects/"+a+"/stats/"+b,c,d,e)},update_team_stats_pos:function(a,b,c,d,e,f){return j("/api/projects/"+a+"/stats/"+b+"/position",{pos:c},d,e,f)},join_link_open:function(a,b,c,d){return j("/api/teams/"+a+"/link/join/open",{},b,c,d)},join_link_close:function(a,b,c,d){return j("/api/teams/"+a+"/link/join/close",{},b,c,d)},join_by_link:function(a,b,c,d,e){return j("/api/teams/"+a+"/link/join?code="+b,{},c,d,e)},join_info:function(a,b,c,d){return g("/api/link/join/"+a+"?type=team",b,c,d)},set_labels:function(a,b,c,d,e){return j("/api/teams/"+a+"/labels",{labels:b},c,d,e)},label_add:function(a,b,c,d,e,f){return h("/api/teams/"+a+"/label",{name:b,desc:c},d,e,f)},label_update:function(a,b,c,d,e,f){return j("/api/teams/"+a+"/labels/"+b,{desc:c},d,e,f)},label_remove:function(a,b,c,d,e){return i("/api/teams/"+a+"/labels/"+b,c,d,e)},projects_get:function(a,b,c,d){return g("/api/teams/"+a+"/projects",b,c,d)},set_default_project:function(a,b,c,d,e){return h("/api/teams/"+a+"/default/projects",{pids:b},c,d,e)},get_project_templates:function(a,b,c,d){return g("/api/teams/"+a+"/project/templates",b,c,d)},set_default_template:function(a,b,c,d,e){return j("/api/teams/"+a+"/project/template",{template_id:b},c,d,e)},delete_project_template:function(a,b,c,d,e){return i("/api/teams/"+a+"/project/templates/"+b,c,d,e)},update_project_template:function(a,b,c,d,e,f){return j("/api/teams/"+a+"/project/templates/"+b,c,d,e,f)},get_project_template:function(a,b,c,d,e){return g("/api/teams/"+a+"/project/templates/"+b,c,d,e)},add_project_template:function(a,b,c,d,e){return h("/api/teams/"+a+"/project/template",b,c,d,e)}},project:{get_all:function(a,b,c,d){return g("/api/projects/all?type="+a,b,c,d)},get_all_abstracts:function(a,b,c,d){return g("/api/projects/abstracts?type="+a,b,c,d)},add_personal_project:function(a,b,c,d,e,f){return h("/api/project",{name:a,desc:b,visibility:c},d,e,f)},add_team_project:function(a,b,c,d,e,f,g,i){return h("/api/teams/"+a+"/project",{name:b,desc:c,visibility:d,template_id:e},f,g,i)},get:function(a,b,c,d){return g("/api/projects/"+a,b,c,d)},get_full:function(a,b,c,d){return g("/api/projects/"+a+"/full",b,c,d)},update:function(a,b,c,d,e,f,g,h,i){return j("/api/projects/"+a,{name:b,bg:c,pic:d,desc:e,visibility:f},g,h,i)},del:function(a,b,c,d){return i("/api/projects/"+a,b,c,d)},archive:function(a,b,c,d){return j("/api/projects/"+a+"/archive",null,b,c,d)},unarchive:function(a,b,c,d){return j("/api/projects/"+a+"/unarchive",null,b,c,d)},set_prefs:function(a,b,c,d,e,f){return j("/api/projects/"+a+"/prefs",{key:b,value:c},d,e,f)},add_member:function(a,b,c,d,e,f){return h("/api/projects/"+a+"/member",{uid:b,role:c},d,e,f)},invite_member:function(a,b,c,d,e){return h("/api/projects/"+a+"/member/invite",{email:b},c,d,e)},get_members:function(a,b,c,d){return g("/api/projects/"+a+"/members",b,c,d)},del_member:function(a,b,c,d,e){return i("/api/projects/"+a+"/members/"+b,c,d,e)},set_member_role:function(a,b,c,d,e,f){return j("/api/projects/"+a+"/members/role",{uid:b,role:c},d,e,f)},set_labels:function(a,b,c,d,e){return j("/api/projects/"+a+"/labels",{labels:b},c,d,e)},label_add:function(a,b,c,d,e,f){return h("/api/projects/"+a+"/label",{name:b,desc:c},d,e,f)},label_update:function(a,b,c,d,e,f){return j("/api/projects/"+a+"/labels/"+b,{desc:c},d,e,f)},label_remove:function(a,b,c,d,e){return i("/api/projects/"+a+"/labels/"+b,c,d,e)},get_labels:function(a,b,c,d){return g("/api/projects/"+a+"/labels",b,c,d)},get_trash:function(a,b,c,d){return g("/api/projects/"+a+"/recycle",b,c,d)},clear_trash:function(a,b,c,d){return i("/api/projects/"+a+"/recycle",b,c,d)},member_leave:function(a,b,c,d){return j("/api/projects/"+a+"/leave",null,b,c,d)},prj_position:function(a,b,c,d,e){return j("/api/projects/"+a+"/position",{pos:b},c,d,e)},get_unique_admin_prjs:function(a,b,c,d,e){var f="/api/projects/users/"+b+"/unique/admin?team_id="+a;return g(f,c,d,e)},set_favorite:function(a,b,c,d,e){return j("/api/projects/"+a+"/favorite",{favorite:b?1:0},c,d,e)},get_favorite:function(a,b,c){var d="/api/projects/favorite";return g(d,a,b,c)},transfer:function(a,b,c,d,e){return j("/api/projects/"+a+"/shift",{team_id:b},c,d,e)},join_link_open:function(a,b,c,d){return j("/api/projects/"+a+"/link/join/open",{},b,c,d)},join_link_close:function(a,b,c,d){return j("/api/projects/"+a+"/link/join/close",{},b,c,d)},join_by_link:function(a,b,c,d,e){return j("/api/projects/"+a+"/link/join?code="+b,{},c,d,e)},join_info:function(a,b,c,d){return g("/api/link/join/"+a+"?type=project",b,c,d)},copy_project:function(a,b,c,d,e,f,g,h,i,k,l){return j("/api/projects/"+a+"/copy",{name:c,team_id:b,keep_tasks:d,keep_files:e,keep_posts:f,keep_pages:g,visibility:h},i,k,l)},change_navs:function(a,b,c,d,e){return j("/api/projects/"+a+"/navs",{navs:b},c,d,e)}},entry:{add:function(a,b,c,d,e,f){h("/api/entry?pid="+a,{name:b,pos:c},d,e,f)},get_list:function(a,b,c,d,e){g("/api/entries/?pid="+a+"&exclude_tasks="+b,c,d,e)},get_archived_list:function(a,b,c,d){g("/api/entries/archived?pid="+a,b,c,d)},update:function(a,b,c,d,e,f){j("/api/entries/"+b+"?pid="+a,{name:c},d,e,f)},trash:function(a,b,c,d,e){j("/api/entries/"+b+"/trash?pid="+a,null,c,d,e)},untrash:function(a,b,c,d,e){j("/api/entries/"+b+"/restore?pid="+a,null,c,d,e)},del:function(a,b,c,d,e){i("/api/entries/"+b+"?pid="+a,c,d,e)},change_pos:function(a,b,c,d,e,f){j("/api/entries/"+b+"/position?pid="+a,{pos:c},d,e,f)},archive:function(a,b,c,d,e){j("/api/entries/"+b+"/archive?pid="+a,null,c,d,e)},unarchive:function(a,b,c,d,e){j("/api/entries/"+b+"/unarchive?pid="+a,null,c,d,e)},move:function(a,b,c,d,e,f){j("/api/entries/"+b+"/move?pid="+a,{to_pid:c},d,e,f)},copy:function(a,b,c,d,e){j("/api/entries/"+b+"/copy?pid="+a,null,c,d,e)},batch_assign:function(a,b,c,d,e,f,g){j("/api/entries/"+b+"/tasks/members?pid="+a,{uid:c,tasks:d},e,f,g)},batch_unassign:function(a,b,c,d,e,f,g){h("/api/entries/"+b+"/tasks/members?pid="+a,{uid:c,tasks:d},e,f,g)},batch_set_label:function(a,b,c,d,e,f,g){j("/api/entries/"+b+"/tasks/labels?pid="+a,{label:d,tasks:c},e,f,g)},batch_remove_label:function(a,b,c,d,e,f,g){h("/api/entries/"+b+"/tasks/labels?pid="+a,{label:d,tasks:c},e,f,g)},batch_set_expire:function(a,b,c,d,e,f,g){j("/api/entries/"+b+"/tasks/expire?pid="+a,{tasks:c,expire:d},e,f,g)},copy_entry:function(a,b,c,d,e,f,g){h("/api/entries/"+b+"/copy?pid="+a,{name:c,pos:d},e,f,g)},watch_entry:function(a,b,c,d,e){h("/api/entries/"+b+"/watcher?pid="+a,{},c,d,e)},unwatch_entry:function(a,b,c,d,e){i("/api/entries/"+b+"/watcher?pid="+a,c,d,e)}},task:{add:function(a,b,c,d,e,f,g){h("/api/task?pid="+a,{entry_id:b,name:c,pos:d},e,f,g)},add_full:function(a,b,c,d,e,f,g,i,j,k){h("/api/task?pid="+a,{entry_id:b,name:c,pos:d,labels:f,members:e,expire_date:g},i,j,k)},batch_add:function(a,b,c,d,e,f,g,i,j,k){h("/api/tasks/batch?pid="+a,{entry_id:b,names:d,pos_type:c,labels:f,members:e,expire_date:g},i,j,k)},get:function(a,b,c,d,e){g("/api/tasks/"+b+"?pid="+a,c,d,e)},update:function(a,b,c,d,e,f,g){j("/api/tasks/"+b+"?pid="+a,{name:c,desc:d},e,f,g)},trash:function(a,b,c,d,e){j("/api/tasks/"+b+"/trash?pid="+a,null,c,d,e)},untrash:function(a,b,c,d,e,f){j("/api/tasks/"+c+"/restore?pid="+a,{entry_id:b},d,e,f)},del:function(a,b,c,d,e){i("/api/tasks/"+b+"?pid="+a,c,d,e)},change_entry:function(a,b,c,d,e,f,g,h){j("/api/tasks/"+b+"/position?pid="+a,{from:c,to:d,pos:e},f,g,h)},change_entry_for_batch_task:function(a,b,c,d,e,f,g,h){j("/api/entries/"+c+"/tasks/position?pid="+a,{to:d,tids:b,pos:e},f,g,h)},move:function(a,b,c,d,e,f,g){j("/api/tasks/"+b+"/move?pid="+a,{to_pid:c,to_entry_id:d},e,f,g)},batch_move:function(a,b,c,d,e,f,g){j("/api/tasks/move?pid="+a,{tasks:b,to_pid:c,to_entry_id:d},e,f,g)},set_expire:function(a,b,c,d,e,f){j("/api/tasks/"+b+"/expire?pid="+a,{expire:c},d,e,f)},assign:function(a,b,c,d,e,f){h("/api/tasks/"+b+"/member?pid="+a,{uid:c},d,e,f)},unassign:function(a,b,c,d,e,f){i("/api/tasks/"+b+"/members/"+c+"?pid="+a,d,e,f)},set_labels:function(a,b,c,d,e,f){j("/api/tasks/"+b+"/labels?pid="+a,{label:c},d,e,f)},del_labels:function(a,b,c,d,e,f){i("/api/tasks/"+b+"/labels?pid="+a+"&label="+c,d,e,f)},complete:function(a,b,c,d,e){j("/api/tasks/"+b+"/complete?pid="+a,null,c,d,e)},uncomplete:function(a,b,c,d,e){j("/api/tasks/"+b+"/uncomplete?pid="+a,null,c,d,e)},add_todo:function(a,b,c,d,e,f,g){h("/api/tasks/"+b+"/todo?pid="+a,{name:c,pos:d},e,f,g)},update_todo:function(a,b,c,d,e,f,g,h){j("/api/tasks/"+b+"/todos/"+c+"?pid="+a,{name:d},f,g,h)},del_todo:function(a,b,c,d,e,f){i("/api/tasks/"+b+"/todos/"+c+"?pid="+a,d,e,f)},update_todo_pos:function(a,b,c,d,e,f,g){var h="/api/tasks/"+b+"/todos/"+c+"/position?pid="+a;j(h,{pos:d},e,f,g)},complete_todo:function(a,b,c,d,e,f){j("/api/tasks/"+b+"/todos/"+c+"/checked?pid="+a,null,d,e,f)},uncomplete_todo:function(a,b,c,d,e,f){j("/api/tasks/"+b+"/todos/"+c+"/unchecked?pid="+a,null,d,e,f)},change_todo_pos:function(a,b,c,d,e,f,g){j("/api/tasks/"+b+"/todos/"+c+"/position?pid="+a,{pos:d},e,f,g)},get_for_me:function(a,b,c,d,e){g("/api/tasks/forme?team_id="+a+"&complete="+b,c,d,e)},get_for_uncompleted:function(a,b,c){g("/api/tasks/uncompleted",a,b,c)},get_for_expired:function(a,b,c){g("/api/tasks/expired",a,b,c)},get_for_completed:function(a,b,c,d){g("/api/tasks/completed?page="+a,b,c,d)},get_archived_list:function(a,b,c,d,e,f){g("/api/tasks/archived?pid="+a+"&page="+b+"&count="+c,d,e,f)},get_for_graph:function(a,b,c,d,e){g("/api/graph/user?start="+a+"&end="+b,c,d,e)},get_for_user_overview:function(a,b,c){g("/api/tasks/user/overview",a,b,c)},archive:function(a,b,c,d,e){j("/api/tasks/"+b+"/archive?pid="+a,{},c,d,e)},unarchive:function(a,b,c,d,e,f){j("/api/tasks/"+b+"/unarchive?pid="+a,{entry_id:c},d,e,f)},archived_all:function(a,b,c,d,e){j("/api/tasks/archived?pid="+a,{entry_id:b},c,d,e)},copy_task:function(a,b,c,d,e,f,g,i,j,k,l,m,n){var o={name:c,pos:d,keep_comments:Number(e),keep_members:Number(f),keep_labels:Number(g),keep_attachments:Number(i),keep_watchers:Number(k),keep_todos:Number(j)};h("/api/tasks/"+b+"/copy?pid="+a,o,l,m,n)},get_all_list:function(a,b,c,d,e){g("/api/tasks/browse?type="+a+"&page="+b,c,d,e)},share:function(a,b,c,d,e,f){h("/api/tasks/"+b+"/share?pid="+a,{to:c},d,e,f)},get_dashboard_task:function(a,b,c){g("/api/tasks/uncompleted/forme",a,b,c)},drop_dashboard_task:function(a,b,c,d,e,f){j("/api/tasks/"+b+"/mark?pid="+a,{mark:c},d,e,f)}},file:{new_upload:function(a,b,c,d,e){h("/api/file?pid="+a,b,c,d,e)},get_list:function(a,b,c,d,e,f,h,i){g("/api/files?pid="+a+"&folder_id="+b+"&page="+c+"&sort="+d+"&filter="+e,f,h,i)},get_image_list:function(a,b,c,d){g("/api/files/images?pid="+a,b,c,d)},get:function(a,b,c,d,e){g("/api/files/"+b+"?pid="+a,c,d,e)},update:function(a,b,c,d,e,f,g){j("/api/files/"+b+"?pid="+a,{name:c,desc:d},e,f,g)},update_ext:function(a,b,c,d,e,f){j("/api/files/"+b+"/ext?pid="+a,{ext:c},d,e,f)},trash:function(a,b,c,d,e){j("/api/files/"+b+"/trash?pid="+a,null,c,d,e)},untrash:function(a,b,c,d,e){j("/api/files/"+b+"/restore?pid="+a,null,c,d,e)},del:function(a,b,c,d,e){i("/api/files/"+b+"?pid="+a,c,d,e)},get_versions:function(a,b,c,d,e){g("/api/files/"+b+"/versions?pid="+a,c,d,e)},move:function(a,b,c,d,e,f,g){j("/api/files/"+b+"/move?pid="+a,{from:c,to:d},e,f,g)},get_target:function(a,b,c,d,e){g("/api/files/"+b+"/target?pid="+a,c,d,e)},attach:function(a,b,c,d,e,f,g){j("/api/"+b+"/"+c+"/attach?pid="+a,{fid:d},e,f,g)},detach:function(a,b,c,d,e,f,g){j("/api/"+b+"/"+c+"/detach?pid="+a,{fid:d},e,f,g)},upload_attach:function(a,b,c,d,e,f,g){h("/api/"+b+"/"+c+"/file?pid="+a,{files:d},e,f,g)},get_attach_list:function(a,b,c,d,e,f){g("/api/"+b+"/"+c+"/files?pid="+a,d,e,f)},add_folder:function(a,b,c,d,e,f,g){h("/api/folder?pid="+a,{name:b,ext:c,parent_id:d},e,f,g)},get_folders:function(a,b,c,d){g("/api/folders?pid="+a,b,c,d)},get_all_list:function(a,b,c,d,e){g("/api/files/browse?type="+a+"&page="+b,c,d,e)},share:function(a,b,c,d,e,f){h("/api/files/"+b+"/share?pid="+a,{to:c},d,e,f)},uploadlink:function(a,b,c,d,e){h(a,b,c,d,e)}},comment:{publish:function(a,b,c,d,e,f,g,i){h("/api/"+b+"/"+c+"/comment?pid="+a,{message:d,fids:e},f,g,i)},get_list:function(a,b,c,d,e,f){g("/api/"+b+"/"+c+"/comments?pid="+a,d,e,f)},del:function(a,b,c,d,e,f,g){i("/api/"+c+"/"+d+"/comments/"+b+"?pid="+a,e,f,g)},update:function(a,b,c,d,e,f,g,h){j("/api/"+c+"/"+d+"/comments/"+b+"?pid="+a,{message:e},f,g,h)}},calendar:{get_tasks_forme:function(a,b,c,d,e,f){g("/api/calendar/tasks/forme?type="+a+"&start="+b+"&end="+c,d,e,f)},get_events_and_tasks:function(a,b,c,d,e){g("/api/calendar/events/tasks/forme?start="+a+"&end="+b,c,d,e)},get_teams_events_and_tasks:function(a,b,c,d,e,f,h,i){g("/api/calendar/teams/"+a+"?type="+b+"&pid="+c+"&start="+d+"&end="+e,f,h,i)},get_tasks:function(a,b,c,d,e,f,h,i){g("/api/calendar/tasks?team_id="+a+"&type="+b+"&uid="+c+"&start="+d+"&end="+e,f,h,i)},get_list:function(a,b,c,d,e,f,h){g("/api/calendar/events?pid="+a+"&showall="+b+"&start="+c+"&end="+d,e,f,h)}},event:{get:function(a,b,c,d,e){g("/api/events/"+b+"?pid="+a,c,d,e)},add:function(a,b,c,d,e,f,g,i,j,k,l,m){h("/api/event?pid="+a,{name:b,location:c,attendees:d,start_date:e,start_time:f,end_date:g,end_time:i,recurrence:j},k,l,m)},update:function(a,b,c,d,e,f,g,h,i,k,l,m,n){j("/api/events/"+b+"?pid="+a,{name:c,location:e,summary:d,start_date:f,start_time:g,end_date:h,end_time:i,type:k},l,m,n)},update_date:function(a,b,c,d,e,f,g,h,i){j("/api/events/"+b+"/date?pid="+a,{start_date:c,start_time:d,end_date:e,end_time:f},g,h,i)},trash:function(a,b,c,d,e,f){j("/api/events/"+b+"/trash?pid="+a,{type:c},d,e,f)},get_list:function(a,b,c,d,e,f){g("/api/events?pid="+a+"&start="+b+"&end="+c,d,e,f)},attendee_add:function(a,b,c,d,e,f){j("/api/events/"+b+"/attendee?pid="+a,{uid:c},d,e,f)},attendee_remove:function(a,b,c,d,e,f){i("/api/events/"+b+"/attendees/"+c+"?pid="+a,d,e,f)},untrash:function(a,b,c,d,e){j("/api/events/"+b+"/restore?pid="+a,null,c,d,e)},del:function(a,b,c,d,e){i("/api/events/"+b+"?pid="+a,c,d,e)},get_today_events:function(a,b,c){g("/api/events/today",a,b,c)},share:function(a,b,c,d,e,f){h("/api/events/"+b+"/share?pid="+a,{to:c},d,e,f)}},post:{add:function(a,b,c,d,e,f,g){var i="/api/post?pid="+a;h(i,{name:b,content:c,watchers:d},e,f,g)},get:function(a,b,c,d,e){g("/api/posts/"+b+"?pid="+a,c,d,e)},get_list:function(a,b,c,d,e,f,h,i,j){var k="/api/posts?pid="+a+"&since_id="+b+"&count="+c+"&sort="+d+"&desc="+e+"&type="+f;g(k,h,i,j)},update:function(a,b,c,d,e,f,g){var h="/api/posts/"+b+"?pid="+a;j(h,{name:c,content:d},e,f,g)},trash:function(a,b,c,d,e){j("/api/posts/"+b+"/trash?pid="+a,null,c,d,e)},untrash:function(a,b,c,d,e){j("/api/posts/"+b+"/restore?pid="+a,null,c,d,e)},del:function(a,b,c,d,e){i("/api/posts/"+b+"?pid="+a,c,d,e)},get_all_list:function(a,b,c,d,e){g("/api/posts/browse?type="+a+"&page="+b,c,d,e)},share:function(a,b,c,d,e,f){h("/api/posts/"+b+"/share?pid="+a,{to:c},d,e,f)}},page:{add:function(a,b,c,d,e,f,g,i,j){var k="/api/page?pid="+a;h(k,{name:b,content:c,message:d,parent_id:e,watchers:f},g,i,j)},get:function(a,b,c,d,e){g("/api/pages/"+b+"?pid="+a,c,d,e)},get_versions:function(a,b,c,d,e){var f="/api/pages/"+b+"/versions?pid="+a;g(f,c,d,e)},get_list:function(a,b,c,d,e,f,h,i){var j="/api/pages?pid="+a+"&since_id="+b+"&count="+c+"&sort="+d+"&desc="+e;g(j,f,h,i)},get_all:function(a,b,c,d){var e="/api/pages?pid="+a;g(e,b,c,d)},update:function(a,b,c,d,e,f,g,h,i,k,l){var m="/api/pages/"+b+"?pid="+a;j(m,{name:c,content:d,message:e,parent_id:f,is_notify:g,unloak:h},i,k,l)},trash:function(a,b,c,d,e){j("/api/pages/"+b+"/trash?pid="+a,null,c,d,e)},untrash:function(a,b,c,d,e){j("/api/pages/"+b+"/restore?pid="+a,null,c,d,e)},del:function(a,b,c,d,e){i("/api/pages/"+b+"?pid="+a,c,d,e)},locked:function(a,b,c,d,e){j("/api/pages/"+b+"/locked?pid="+a,null,c,d,e)},unlocked:function(a,b,c,d,e){j("/api/pages/"+b+"/unlocked?pid="+a,null,c,d,e)},get_all_list:function(a,b,c,d,e){g("/api/pages/browse?type="+a+"&page="+b,c,d,e)},share:function(a,b,c,d,e,f){h("/api/pages/"+b+"/share?pid="+a,{to:c},d,e,f)},get_version_page:function(a,b,c,d,e,f,h){g("/api/pages/"+b+"/versions/content?pid="+a+"&version_ids="+c+","+d,e,f,h)}},activity:{get_for_project:function(a,b,c,d,e,f,h){return g("/api/activity/project?pid="+a+"&type="+b+"&since_id="+c+"&count="+d,e,f,h)},get_for_item:function(a,b,c,d,e,f,h){return g("/api/activity/"+a+"/"+b+"?since_id="+c+"&count="+d,e,f,h)},get_feeds:function(a,b,c,d,e,f,h){var i="/api/activity/feed?pid="+a+"&type="+b+"&page="+c;return i=d?i+"&size="+d:i,g(i,e,f,h)},get_feeds_for_team:function(a,b,c,d,e,f,h){var i="/api/teams/"+a+"/feeds?type="+b+"&page="+c;return i=d?i+"&size="+d:i,g(i,e,f,h)}},notice:{unread_count:function(a,b,c){return g("/api/notice/unread/count",a,b,c)},set_allread:function(a,b,c,d){return j("/api/notice/allread?type="+a,null,b,c,d)},set_read:function(a,b,c,d){return j("/api/notices/"+a+"/read",null,b,c,d)},get_list:function(a,b,c,d,e,f,h){return g("/api/notices?type="+a+"&since_id="+b+"&count="+c+"&is_read="+d,e,f,h)},get_pending_list:function(a,b,c){return g("/api/notices/pending",a,b,c)},update_pending:function(a,b,c,d,e){return j("/api/notices/"+a+"/pending",{is_pending:b},c,d,e)},set_allhandle:function(a,b,c){return j("/api/notice/allhandle",null,a,b,c)}},invite:{accept:function(a,b,c,d){j("/api/invites/"+a+"/accept",null,b,c,d)},join:function(a,b,c,d,e,f,g){j("/api/invites/"+a+"/join",{name:b,display_name:c,password:d},e,f,g)},refuse:function(a,b,c,d){j("/api/invites/"+a+"/refuse",null,b,c,d)},get:function(a,b,c,d){g("/api/invites/"+a,b,c,d)},get_new:function(a,b,c){g("/api/invites/new",a,b,c)},get_invite_code:function(a,b,c,d,e){var f="/api/invite/code?member_id="+b+"&team_id="+a;g(f,c,d,e)}},feedback:{add:function(a,b,c,d,e,f,g,i){var j={name:a,email:b,category:c,desc:d,path:e};h("/api/feedback",j,f,g,i)}},graph:{overview:function(a,b,c,d){g("/api/graph/overview?pid="+a,b,c,d)},get_pulse:function(a,b,c,d,e,f){g("/api/graph/pulse?pid="+a+"&start="+b+"&end="+c,d,e,f)},get_daily:function(a,b,c,d,e,f){g("/api/graph/daily?pid="+a+"&start="+b+"&end="+c,d,e,f)},get_contribution:function(a,b,c,d,e,f){g("/api/graph/contribution?pid="+a+"&start="+b+"&end="+c,d,e,f)}},share:{recommand:function(a,b,c,d,e){h("/api/share/recommand",{email:a,message:b},c,d,e)},enable_share_link:function(a,b,c,d,e,f){j("/api/"+b+"/"+c+"/share/link/open?pid="+a,{},d,e,f)},disable_share_link:function(a,b,c,d,e,f){j("/api/"+b+"/"+c+"/share/link/close?pid="+a,{},d,e,f)},get_share_tasks:function(a,b,c,d){g("/api/tasks/share/"+a,b,c,d)},get_share_posts:function(a,b,c,d){g("/api/posts/share/"+a,b,c,d)},get_share_files:function(a,b,c,d){g("/api/files/share/"+a,b,c,d)},get_share_pages:function(a,b,c,d){g("/api/pages/share/"+a,b,c,d)},get_share_events:function(a,b,c,d){g("/api/events/share/"+a,b,c,d)}},mail:{get_list:function(a,b,c,d,e){g("/api/mails?page="+a+"&category=all&is_read="+b,c,d,e)},get:function(a,b,c,d){g("/api/mails/"+a,b,c,d)},trash:function(a,b,c,d){i("/api/mails/"+a,b,c,d)},convert:function(a,b,c,d,e,f,g){j("/api/mails/"+b+"/convert",{pid:a,watchers:d,type:c},e,f,g)},set_read:function(a,b,c,d){j("/api/mails/"+a+"/read",null,b,c,d)}},broadcast:{get_latest:function(a,b,c){g("/api/broadcast/show",a,b,c)}},webhook:{get_actions:function(a,b,c){g("/api/webhook/actions",a,b,c)},get_webhooks:function(a,b,c,d){g("/api/webhooks?pid="+a,b,c,d)},add_webhook:function(a,b,c,d,e){h("/api/webhook/?pid="+a,b,c,d,e)},change_webhook:function(a,b,c,d,e){j("/api/webhook/?pid="+a,b,c,d,e)},del_webhook:function(a,b,c,d,e){i("/api/webhook/"+b+"?pid="+a,c,d,e)},get_person_webhooks:function(a,b,c){g("/api/webhooks/notice",a,b,c)},add_person_webhook:function(a,b,c,d){h("/api/webhook/notice",{name:a.name,web_hook_url:a.web_hook_url,type:1,secret:a.secret},b,c,d)},update_person_webhook:function(a,b,c,d){j("/api/webhook/notice",{wid:a.wid,name:a.name,web_hook_url:a.web_hook_url,secret:a.secret},b,c,d)},delete_person_webhook:function(a,b,c,d){i("/api/webhook/notice/"+a,b,c,d)}},timingtask:{get_timingtasks:function(a,b,c,d){g("/api/timingtask?pid="+a,b,c,d)},add_timingtask:function(a,b,c,d,e){h("/api/timingtask/?pid="+a,b,c,d,e)},del_timingtask:function(a,b,c,d,e){i("/api/timingtask/"+b+"?pid="+a,c,d,e)},update_timingtask:function(a,b,c,d,e,f){j("/api/timingtask/"+a+"?pid="+b,c,d,e,f)}},utils:{get_qrcode:function(a,c,d,e,f){var g="/api/qr/code?size="+c+"&text="+a,h=angular.isFunction(d)?d:angular.noop,i=angular.isFunction(e)?e:angular.noop,j=angular.isFunction(f)?f:angular.noop;b.get(g).success(h).error(i)["finally"](j)}}}}angular.module("wt.service.data",[]).factory("data",a),a.$inject=["$rootScope","$http"]}(),function(){"use strict";function a(a,b){var c={},d=function(a,b,d){_.isArray(c[a])&&_.isFunction(b)?c[a].push(b):c[a]=[b],_.isEmpty(d)||d.$on("$destroy",function(){e(a,b)})},e=function(a,b){c[a]&&c[a].splice(c[a].indexOf(b),1)},f=function(a){if(_.isArray(c[a])){var b=_.toArray(arguments);_.each(c[a],function(a){a.apply(void 0,b.slice(1))})}};return{user:{get:function(a,b,c){}},team:{find_add_prj_teams:function(){var a=_.clone(b.teams);if(void 0===_.findWhere(a,{team_id:"-1"})){var c={name:"个人项目",team_id:"-1",curr_role:"1"};a.unshift(c)}return a=_.filter(a,function(a){return 1===a.curr_role||"-1"===a.team_id||a.permission&b.global.team_module.add_project})},get_add_prj_teams:function(a){var c=_.clone(a);return c=_.filter(c,function(a){return a.permission&b.global.team_module.add_project}),_.findWhere(c,{team_id:"-1"})||c.unshift({name:"个人项目",team_id:"-1",curr_role:"1"}),c},calculate_stats_pos:function(a,b){var c=0;return c=_.isUndefined(a)&&!_.isUndefined(b)?b/2+1:_.isUndefined(b)&&!_.isUndefined(a)?a+kzi.config.default_pos+1:_.isUndefined(b)||_.isUndefined(a)?kzi.config.default_pos:(b+a)/2+1}},project:{set_star_toggle:function(a,b,c,d){1!=a.archived&&(a.is_star=a.is_star?0:1,wt.data.project.set_prefs(a.pid,"is_star",a.is_star,function(a){_.isFunction(b)&&b(a)},function(){a.is_star=a.is_star?0:1},d))},set_fav_toggle:function(a,b,c,d){if(1!=a.archived){var e=a.is_favorite?0:1;
a.is_favorite=e,wt.data.project.set_favorite(a.pid,e,function(a){_.isFunction(b)&&b(a)},function(){a.is_favorite=e?0:1})}},calculate_prj_pos:function(a,b){var c=0;return c=_.isEmpty(a)&&!_.isEmpty(b)?b.pos/2+1:_.isEmpty(b)&&!_.isEmpty(a)?a.pos+kzi.config.default_pos+1:_.isEmpty(b)||_.isEmpty(a)?kzi.config.default_pos:(b.pos+a.pos)/2+1},label:{load:function(a,b){return _.each(b,function(b){b.assigned=a&&_.findWhere(a.labels,{name:b.name})?1:0}),b},set_labels:function(a,b,c,d,e,f,g,h,i,j){var k=[{name:"blue",desc:b},{name:"green",desc:c},{name:"orange",desc:d},{name:"purple",desc:e},{name:"red",desc:f},{name:"yellow",desc:g}];wt.data.project.set_labels(a,k,function(){h(k)},i,j)}},get_member_projects:function(a,b){var c=[];return _.each(a,function(a){if(kzi.constant.prj_module.crud&a.permission){var d=_.clone(a);if(b){var e=_.find(b,function(a){return a.team_id==d.team_id});d.team_name=e?e.name:"个人项目",d.sort=e&&-1!=d.team_id?e.create_date:1e3}c.push(d)}}),b?_.sortBy(c,function(a){return a.sort}):c},get_navs:function(a){if(_.isEmpty(a))return _.clone(kzi.constant.prj_navigations);var b=[];return _.each(a,function(a){_.indexOf(_.pluck(b,"id"),a)<0&&b.push(_.findWhere(kzi.constant.prj_navigations,{id:parseInt(a,10)}))}),b},get_un_navs:function(a){if(_.isEmpty(a))return[];var b=[];return _.each(kzi.constant.prj_navigations,function(c){a.indexOf(c.id)<0&&b.push(c)}),b},get_visibilities:function(a){return-1==a?[{id:kzi.constant.prj_visibility["private"],name:"私有项目（只有加入项目的成员才能看到该项目内容）"},{id:kzi.constant.prj_visibility["public"],name:"公开项目（所有注册用户都可以访问该项目内容）"}]:[{id:kzi.constant.prj_visibility["private"],name:"私有项目（只有加入项目的成员才能看到该项目内容）"},{id:kzi.constant.prj_visibility["protected"],name:"团队可见（项目所属的团队成员都可以访问该项目内容）"},{id:kzi.constant.prj_visibility["public"],name:"公开项目（所有注册用户都可以访问该项目内容）"}]}},entry:{calculate_copy_entry_pos:function(a,b){for(var c=0;c<a.length;c++)if(a[c].entry_id===b.entry_id){if(c+1<a.length){var d=a[c+1].pos;return(d+b.pos)/2+1}return b.pos+kzi.config.default_pos+1}return b.pos+kzi.config.default_pos+1},calculate_entry_pos:function(a,b){var c=kzi.config.default_pos;if(!_.isEmpty(a))if(b){var d=_.min(a,function(a){return a.pos});_.isEmpty(d)||(c=d.pos/2+1)}else{var e=_.max(a,function(a){return a.pos});_.isEmpty(e)||(c=e.pos+kzi.config.default_pos+1)}return c},batch_toggle_member:function(a,b,c,d,e,f){var g="",h=null;0===c.assigned_all?(g="set",h=wt.data.entry.batch_assign):(g="unset",h=wt.data.entry.batch_unassign),h(a,b.entry_id,c.uid,b.selected_tasks,function(a){c.assigned_all=1===c.assigned_all?0:1,_.each(b.tasks,function(a){var d=_.any(b.selected_tasks,function(b){return b===a.tid});if(d)if(_.isEmpty(a.members))a.members=[c];else{var e=_.any(a.members,function(a){return a.uid===c.uid});e&&"unset"===g&&(a.members=_.remove(a.members,function(a){return a.uid!==c.uid})),e||"set"!==g||a.members.push(c)}}),_.isFunction(d)&&d(a)},e,f)},batch_toggle_label:function(a,b,c,d,e,f,g){var h="",i=null;1===d.assigned?(h="set",i=wt.data.entry.batch_set_label):(h="unset",i=wt.data.entry.batch_remove_label),i(a,b.entry_id,c,d.name,function(a){_.each(b.tasks,function(a){if(!(c.indexOf(a.tid)<0))if(_.isEmpty(a.labels))a.labels=[d];else{var b=_.any(a.labels,function(a){return a.name===d.name});b&&"unset"===h&&(a.labes=_.remove(a.labels,function(a){return a.name===d.name})),b||"set"!==h||(a.labels.push(d),a.labels=_.sortBy(a.labels,function(a){return a.name}))}}),_.isFunction(e)&&e(a)},f,g)}},task:{calculate_task_pos:function(a,b){var c=kzi.config.default_pos;return b?_.isEmpty(a.tasks)||(c=_.min(a.tasks,function(a){return a.pos}).pos/2+1):_.isEmpty(a.tasks)||(c=_.max(a.tasks,function(a){return a.pos}).pos+kzi.config.default_pos+1),c},calculate_copy_task_pos:function(a,b){for(var c=0;c<a.tasks.length;c++)if(a.tasks[c].tid===b.tid){if(c+1<a.tasks.length){var d=a.tasks[c+1].pos;return(d+b.pos)/2+1}return b.pos+kzi.config.default_pos+1}return b.pos+kzi.config.default_pos+1},set_toggle_label:function(a,b,c,d){var e=_.findWhere(b.labels,{name:c.name});c.assigned?(e&&(b.labels=_.reject(b.labels,function(a){return a.name===c.name}),b.labels=_.sortBy(b.labels,function(a){return a.name})),c.assigned=0,_.isEmpty(b.tid)||wt.data.task.del_labels(a,b.tid,c.name,d)):e||(b.labels.push(c),c.assigned=1,b.labels=_.sortBy(b.labels,function(a){return a.name}),_.isEmpty(b.tid)||wt.data.task.set_labels(a,b.tid,c.name,d))},get_copy_task:function(a){var b={name:a.name,tid:a.tid,entry_id:a.entry_id,pos:a.pos,comment_count:a.badges.comment_count,file_count:a.badges.file_count,todo_count:a.badges.todo_count,member_count:a.members.length,watcher_count:a.watchers.length,label_count:a.labels.length},c=!1;return b.comment_count>0?(b.keep_comments=!0,c=!0):b.keep_comments=!1,b.file_count>0?(b.keep_attachments=!0,c=!0):b.keep_attachments=!1,b.todo_count>0?(b.keep_todos=!0,c=!0):b.keep_todos=!1,b.member_count>0?(b.keep_members=!0,c=!0):b.keep_members=!1,b.watcher_count>0?(b.keep_watchers=!0,c=!0):b.keep_watchers=!1,b.label_count>0?(b.keep_labels=!0,c=!0):b.keep_labels=!1,b.show_keeps=c,b},set_is_show_data:function(a,b){return _.each(a,function(a){var c=moment(a.update_date).format("YYYY-MM-DD");c===b?a.is_show_date=!1:(a.is_show_date=!0,b=c)}),b},compare_task:function(a,b){if(a.expire_date>0&&b.expire_date>0){var c=(new Date).getTime();return a.expire_date===b.expire_date?0:a.expire_date>c&&b.expire_date<c?-1:a.expire_date<c&&b.expire_date>c?1:a.expire_date>c&&b.expire_date>c?a.expire_date>b.expire_date?1:-1:a.expire_date>b.expire_date?-1:1}return a.expire_date>0&&0===b.expire_date?-1:0===a.expire_date&&b.expire_date>0?1:a.create_date>b.create_date?-1:1}},file:{load_files_db:function(a,c,d,e,f,g,h,i,j){wt.data.file.get_list(a,c,d,e,f,function(a){b.folder={folder_id:a.data.folder.folder_id,name:a.data.folder.name},_.each(a.data.files,function(a){if(a.icon=kzi.helper.build_file_icon(a),g){var c=_.findWhere(b.project.files,{fid:a.fid});c||b.project.files.push(a)}}),h(g?b.project:a.data)},i,j)},load_one_page_files:function(a,c){_.isUndefined(c)&&(c=!1),a.files_controls.loading_done=!1;var d=function(b){var d=[];if(a.files_controls.folder_id){a.files_controls.is_folder=!0,d=_.where(b.files,{folder_id:a.files_controls.folder_id});var e=_.findWhere(a.files_controls.files,{fid:a.files_controls.folder_id});_.isEmpty(e)?a.files_controls.folder_name=a.folder.name:a.files_controls.folder_name=e.name}else d=_.where(b.files,{folder_id:""}),a.files_controls.is_folder=!1,a.files_controls.folder_name="文件";d.length>0&&(c?a.files_controls.files=d:a.files_controls.files=a.files_controls.files.concat(d)),d.length<20?a.files_controls.has_more_files=!1:(a.files_controls.has_more_files=!0,a.files_controls.page++),a.files_controls.folders=b.folders,a.files_controls.loading_done=!0};wt.bus.file.load_files_db(a.files_controls.pid,a.files_controls.folder_id,a.files_controls.page,a.files_controls.sort_method_id,a.files_controls.filter,!1,d,function(){kzi.msg.error("加载文件失败")},function(){b.global.loading_done=!0})},new_upload:function(a,c,d,e){var f=a.files[0],g={};switch(g.target=f.formData.target,g.type=f.formData.type||"project",g.file={pid:f.formData.pid,name:f.fname,ext:kzi.constant.get_ext(f.ext),size:f.size,path:f.url},f.formData.type){case"task":g.ext={tid:f.formData.tid};break;case"post":g.ext={post_id:f.formData.post_id};break;case"file":g.ext={fid:f.formData.fid};break;case"event":g.ext={event_id:f.formData.event_id};break;default:g.ext={folder_id:f.formData.folder_id}}wt.data.file.new_upload(f.formData.pid,g,function(a){g.file=_.extend(g.file,f,a.data),g.file.icon=kzi.helper.build_file_icon(g.file),b.$broadcast(kzi.constant.event_names.on_file_add,g),_.isFunction(c)&&c(a)},function(a){_.isFunction(d)&&d(a)},function(){_.isFunction(e)&&e()})}},event:{event_to_calEvent:function(a,b){var c={id:a.event_id,title:a.name,allDay:0,start:moment(a.start.date).format(),end:moment(a.end.date).format(),url:"",editable:a.recurrence_id?!1:!0,textColor:"#fff",borderColor:"#fbfbfb",className:"cal_event slide-trigger",backgroundColor:b,extend:{xtype:kzi.constant.xtype.event,pid:a.pid,end:a.end.date,recurrence_id:a.recurrence_id}};return c}},mkEditor:{checkClose:function(){var a=$(".fullscreen-editing"),b=!1;return _.each(a,function(a){$(a).scope().isFullscreen===!0&&($(a).scope().cancelFullscreen(),b=!0)}),b}},comment:{},calendar:{},post:{},page:{},activity:{set_activities_show_date:function(a){var b=null;_.each(a,function(a){var c=moment(a.published).format("YYYY-MM-DD");c===b?a.is_show_date=!1:(a.is_show_date=!0,b=c)})}},notice:{},invite:{},feedback:{},watch:{get_scope_watcher_members:function(a,b){var c=[],d=_.pluck(b,"uid");return _.each(a,function(a){var b=_.clone(a);b.status===kzi.constant.status.ok&&(_.contains(d,b.uid)?b.watched=!0:b.watched=!1,c.push(b))}),c},mail_convert_post_watch_toggle:function(a,b,c,d,e,f){if(!c.watched){var g=_.findWhere(b.watchers,{uid:c.uid});return c.watched=!0,g||b.watchers.push(c),_.isFunction(d)&&d(),void(_.isFunction(f)&&f())}var g=_.findWhere(b.watchers,{uid:c.uid});c.watched=!1,g&&(b.watchers=_.reject(b.watchers,function(a){return a.uid===c.uid})),_.isFunction(d)&&d(),_.isFunction(f)&&f()},unwatch:function(a,b,c,d,e,f,g,h){wt.data.unwatch(a,c,d,e.uid,function(a){var c=_.findWhere(b.watchers,{uid:e.uid});c&&(b.watchers=_.reject(b.watchers,function(a){return a.uid===e.uid})),e.watched=!1,_.isFunction(f)&&f(a)},g,h)},set_watcher_toggle:function(a,b,c,d,e,f,g,h){var i=null;if(e.watched){if(i=_.findWhere(b.watchers,{uid:e.uid}),i&&(b.watchers=_.reject(b.watchers,function(a){return a.uid===e.uid})),e.watched=!1,!d)return _.isFunction(f)&&f(),void(_.isFunction(h)&&h());wt.data.unwatch(a,c,d,e.uid,f,g,h)}else if(i=_.findWhere(b.watchers,{uid:e.uid}),!i){if(b.watchers.push(e),e.watched=!0,!d)return _.isFunction(f)&&f(),void(_.isFunction(h)&&h());wt.data.watch(a,c,d,e.uid,f,g,h)}},watch_all:function(a,b,c,d,e,f,g,h){if(b.watchers.length!==e.length){if(d){var i=_.pluck(e,"uid");wt.data.watch_batch(a,c,d,i,function(){b.watchers=e,_.isFunction(f)&&f()},g,h)}else b.watchers=e,_.isFunction(f)&&f(),_.isFunction(h)&&h();_.each(e,function(a){a.watched=!0})}}},member:{set_task_member_toggle:function(a,b,c,d,e,f){if(c.assigned){var g=_.findWhere(b.members,{uid:c.uid});if(_.isEmpty(b.tid))return c.assigned=0,void(g&&(b.members=_.reject(b.members,function(a){return a.uid===c.uid})));if(c.setting_toggle_member===!0)return;c.setting_toggle_member=!0,wt.data.task.unassign(a,b.tid,c.uid,function(a){g&&(b.members=_.reject(b.members,function(a){return a.uid===c.uid})),c.assigned=0,_.isFunction(d)&&d(a)},e,function(){c.setting_toggle_member=!1,_.isFunction(f)&&f()})}else{var g=_.findWhere(b.members,{uid:c.uid});if(_.isEmpty(b.tid))return c.assigned=1,void(g||b.members.push(c));if(!g){if(c.setting_toggle_member===!0)return;c.setting_toggle_member=!0,wt.data.task.assign(a,b.tid,c.uid,function(a){g=_.findWhere(b.members,{uid:c.uid}),g||(b.members.push(c),c.assigned=1,_.isFunction(d)&&d(a))},e,function(){c.setting_toggle_member=!1,_.isFunction(f)&&f()})}}},get_normal_members:function(a){var b=[];return _.each(a,function(a){a.status===kzi.constant.status.ok&&(a.role===kzi.constant.role.admin||a.role===kzi.constant.role.member)&&b.push(a)}),b},set_event_attendees_toggle:function(a,b,c,d,e,f){if(c.assigned){var g=_.findWhere(b.attendees,{uid:c.uid});if(_.isEmpty(b.event_id))return c.assigned=0,g&&(b.attendees=_.reject(b.attendees,function(a){return a.uid===c.uid})),_.isFunction(d)&&d(),void(_.isFunction(f)&&f());wt.data.event.attendee_remove(a,b.event_id,c.uid,function(a){g&&(b.attendees=_.reject(b.attendees,function(a){return a.uid===c.uid})),c.assigned=0,_.isFunction(d)&&d(a)},e,f)}else{var g=_.findWhere(b.attendees,{uid:c.uid});if(_.isEmpty(b.event_id))return c.assigned=1,g||b.attendees.push(c),_.isFunction(d)&&d(),void(_.isFunction(f)&&f());g||wt.data.event.attendee_add(a,b.event_id,c.uid,function(a){g=_.findWhere(b.attendees,{uid:c.uid}),g||(b.attendees.push(c),c.assigned=1,_.isFunction(d)&&d(a))},e,f)}},get_scope_members_for_assigned:function(a,b){var c=[],d=_.pluck(b,"uid");return _.each(a,function(a){var b=_.clone(a);b.status===kzi.constant.status.ok&&b.role!==kzi.constant.role.guest&&(_.contains(d,b.uid)?b.assigned=!0:b.assigned=!1,c.push(b))}),c},event_attend_all:function(a,b,c,d,e,f){var g=_.pluck(c,"uid"),h=function(){_.each(c,function(a){a.assigned=1,_.findWhere(b.attendees,{uid:a.uid})||b.attendees.push(a)}),_.isFunction(d)&&d(result)};return b.event_id?void wt.data.event.attendee_add(a,b.event_id,g,function(a){h()},e,f):h()}},addListener:d,removeListener:e,triggerEvent:f,$on:d,$delete:e,$execute:f}}angular.module("wt.bus",[]).factory("bus",a),a.$inject=["$http","$rootScope"]}(),function(){"use strict";var a=function(a,b,c){if(void 0!==a&&null!==a){moment.locale(kzi.config.lang),_.isString(a)?a=moment(parseFloat(a)):_.isObject(a)||(a=moment(a));var d="";return d="zh"==b?"MM月DD日":"MM-DD",c&&(d+=" HH:mm"),moment().isSame(a,"year")?moment(a).format(d):moment(a).format("YYYY"+("zh"==b?"年 ":" ")+d)}};angular.module("wt.filter",[]).filter("role",[function(){return function(a){switch(a){case kzi.constant.role.admin:return"管理员";case kzi.constant.role.member:return"成员";case kzi.constant.role.guest:return"访客";default:return a}}}]).filter("prj_role",[function(){return function(a){switch(a){case kzi.constant.role.admin:return"负责人";case kzi.constant.role.member:return"成员";case kzi.constant.role.guest:return"访客";default:return a}}}]).filter("wt_entity_type",[function(){return function(a){switch(a){case kzi.constant.atypes.task:return"任务";case kzi.constant.atypes.file:return"文件";case kzi.constant.atypes.post:return"话题";case kzi.constant.atypes.page:return"文档";case kzi.constant.atypes.event:return"事件";default:return""}}}]).filter("is_admin",[function(){return function(a){return a===kzi.constant.role.admin?!0:!1}}]).filter("is_member",[function(){return function(a){return a===kzi.constant.role.member?!0:!1}}]).filter("is_guest",[function(){return function(a){return a===kzi.constant.role.guest?!0:!1}}]).filter("is_pending",[function(){return function(a){return a===kzi.constant.status.pending?!0:!1}}]).filter("sex",[function(){return function(a){switch(a){case"male":return"男性";case"female":return"女性";default:return a}}}]).filter("follow",[function(){return function(a){return a?"已关注":"关注"}}]).filter("mark",[function(){return function(a){return a?"已标记":"标记"}}]).filter("name_rule",[function(){return function(a){if(a){var b=/^[(\u4e00-\u9fa5)a-z][(\u4e00-\u9fa5)a-zA-Z0-9_]{1,15}$/,c=utf8.stringToBytes(a).length;return b.test(a)?c>0&&5>c?"长度必须大于5字节，一个汉字3字节":c>15?"长度必须小于15字节，一个汉字3字节":!1:"支持汉字、小写字母a-z、数字0-9、或下划线_"}}}]).filter("sanitize",["sanitize",function(a){return function(b){return _.isString(b)?a(b):void 0}}]).filter("length",[function(){return function(a){return a?utf8.stringToBytes(a).length:0}}]).filter("firstText",[function(){return function(a){return a?a.substring(0,1).toLocaleUpperCase():""}}]).filter("number2K",[function(){return function(a){return _.isNumber(a)&&!_.isNaN(a)?a>999?(a/1e3).toFixed(0)+"K":a:0}}]).filter("cutstr",[function(){return function(a){if(_.isArray(a)){var b=a[0],c=a[1];if(_.isEmpty(b))return"";if(2*b.length<=c)return b;for(var d=0,e="",f=0;f<b.length;f++)if(e+=b.charAt(f),b.charCodeAt(f)>128){if(d+=2,d>c)return e.substring(0,~~(c/2))+"..."}else if(d+=1,d>c)return e.substring(0,e.length)+"...";return e}}}]).filter("arrReverse",[function(){return function(a){return _.isArray(a)?a.slice().reverse():null}}]).filter("fromNow",["$filter",function(a){return function(a){if(void 0!==a&&null!==a){var b=new moment,c=moment(a);return b.isSame(c,"day")?"今天 "+c.format("HH:mm"):b.add(1,"days").isSame(c,"day")?"明天 "+c.format("HH:mm"):b.add(-1,"day").isSame(c,"day")?"昨天 "+c.format("HH:mm"):b.isSame(c,"year")?c.format("MM-DD HH:mm"):c.format("YYYY-MM-DD HH:mm")}}}]).filter("fromNowZHCN",["$filter",function(a){return function(a){if(void 0!==a&&null!==a){var b=new moment,c=moment(a);return b.isSame(c,"day")?"今天 "+c.format("HH:mm"):b.add(1,"days").isSame(c,"day")?"明天 "+c.format("HH:mm"):b.add(-1,"day").isSame(c,"day")?"昨天 "+c.format("HH:mm"):b.isSame(c,"year")?c.format("MM月DD日 HH:mm"):c.format("YYYY年MM月DD HH:mm")}}}]).filter("momentFormat",["$filter",function(a){return function(a){return moment.locale(kzi.config.lang),moment(a[0]).format(a[1])}}]).filter("dateFormat",["$filter",function(a){return function(a){return void 0!==a&&null!==a?(moment.locale(kzi.config.lang),moment(a).format("YYYY-MM-DD")):void 0}}]).filter("timeFormat",["$filter",function(a){return function(a){return void 0!==a&&null!==a?(moment.locale(kzi.config.lang),moment(a).format("HH:mm")):void 0}}]).filter("timeFullFormat",["$filter",function(a){return function(a){return moment.locale(kzi.config.lang),moment(a).format("YYYY-MM-DD HH:mm")}}]).filter("dateAutoFormat",[function(){return function(b){return a(b,"",!1)}}]).filter("dateAutoFormatZH",[function(){return function(b){return a(b,"zh",!1)}}]).filter("datetimeAutoFormat",[function(){return function(b){return a(b,"",!0)}}]).filter("datetimeAutoFormatZH",[function(){return function(b){return a(b,"zh",!0)}}]).filter("dateFormatZHCN",["$filter",function(a){return function(a){return void 0!==a&&null!==a?(moment.locale(kzi.config.lang),_.isObject(a)?a.format("YYYY年MM月DD日"):_.isString(a)?moment(parseFloat(a)).format("YYYY年MM月DD日"):moment(a).format("YYYY年MM月DD日")):void 0}}]).filter("timeFormatZHCN",["$filter",function(a){return function(a){return void 0!==a&&null!==a?(moment.locale(kzi.config.lang),moment(a).format("YYYY年MM月DD日 HH:mm")):void 0}}]).filter("timeFullFormatZHCN",[function(){return function(a){return void 0!==a&&null!==a?(moment.locale(kzi.config.lang),moment(a).format("YYYY年MM月DD日 HH:mm")):void 0}}]).filter("longTimeFormat",["$filter",function(a){return function(a){return void 0!==a&&null!==a?(moment.locale(kzi.config.lang),moment(a).format("YYYY-MM-DD")):void 0}}]).filter("shortTimeFormat",["$filter",function(a){return function(a){return void 0!==a&&null!==a?(moment.locale(kzi.config.lang),moment(a).format("MM-DD")):void 0}}]).filter("datetimeToDTW",[function(){return function(a){return void 0!==a&&null!==a?kzi.util.datetimeToDTW(a):void 0}}]).filter("isNotUndefined",["$filter",function(a){return function(a){return!_.isUndefined(a)}}]).filter("isNullOrEmpty",["$filter",function(a){return function(a){return angular.isUndefined(a)||null===a||""===a||""===$.trim(a)?!0:!1}}]).filter("isNotNullOrEmpty",["$filter",function(a){return function(a){return angular.isUndefined(a)||null===a||""===a||""===$.trim(a)?!1:!0}}]).filter("watch",[function(){return function(a){return a?"取消关注":"关注"}}]).filter("indexOf",["$filter",function(a){return function(a){return angular.isArray(a)?-1!==_.indexOf(a[0],a[1])?!0:!1:void 0}}]).filter("activityIcon",["$filter",function(a){return function(a){var b=a;return _.isUndefined(kzi.activity_icon[a])||(b=kzi.activity_icon[a]),b}}]).filter("fullPath",["$filter",function(a){return function(a){return a?0===a.indexOf("/img")?a:0===a.indexOf("http://wt-avatars")?a:0===a.indexOf("http://wt-prj")?a:kzi.config.box_url+a:void 0}}]).filter("wtBox",["$filter",function(a){return function(a){return a?kzi.config.wtbox_url+a:kzi.config.default_box}}]).filter("wtBoxDownload",["$filter",function(a){return function(a){if(_.isEmpty(a))return kzi.config.default_box;var b=kzi.get_cookie("sid"),c=a.pid,d=a.version?a.version:"";return kzi.config.box_url()+"download/"+a.fid+"?pid="+c+"&token="+b+"&vid="+d}}]).filter("wtBoxView",["$filter",function(a){return function(a){if(_.isEmpty(a))return kzi.config.default_box;if(kzi.constant.image_exts.indexOf(a.ext)>-1){var b=kzi.get_cookie("sid"),c=a.pid;return kzi.config.box_url()+"view/"+a.fid+"?pid="+c+"&token="+b+"&dt="+(a.dt||"")}return _.isUndefined(a.icon)?void 0:kzi.config.wtbox_url+a.icon}}]).filter("propsFilter",function(){return function(a,b){var c=[];return angular.isArray(a)?a.forEach(function(a){for(var d=!1,e=Object.keys(b),f=0;f<e.length;f++){var g=e[f],h=b[g].toLowerCase();if(-1!==a[g].toString().toLowerCase().indexOf(h)){d=!0;break}}d&&c.push(a)}):c=a,c}}).filter("getFileIcon",[function(){return function(a){return _.isEmpty(a)?"":kzi.helper.build_file_icon(a)}}]).filter("fileThumbSrcByExt",[function(){return function(a){var a=a.toLowerCase();return["doc","docx"].indexOf(a)>=0?"/img/icons/doc.png":["ppt","pptx"].indexOf(a)>=0?"/img/icons/ppt.png":["xls","xlsx"].indexOf(a)>=0?"/img/icons/xls.png":"pdf"==a?"/img/icons/pdf.png":"txt"==a?"/img/icons/txt.png":"apk"==a?"/img/icons/apk.png":"bak"==a?"/img/icons/bak.png":"cs"==a?"/img/icons/cs.png":"csv"==a?"/img/icons/csv.png":"exe"==a?"/img/icons/exe.png":"fla"==a?"/img/icons/fla.png":"html"==a?"/img/icons/html.png":"ipa"==a?"/img/icons/ipa.png":"java"==a?"/img/icons/java.png":"js"==a?"/img/icons/js.png":"mp3"==a?"/img/icons/mp3.png":"mp4"==a?"/img/icons/mp4.png":"php"==a?"/img/icons/php.png":"rar"==a?"/img/icons/rar.png":"swf"==a?"/img/icons/swf.png":"ttf"==a?"/img/icons/ttf.png":"txt"==a?"/img/icons/txt.png":"vss"==a?"/img/icons/vss.png":"xsd"==a?"/img/icons/xsd.png":"zip"==a?"/img/icons/zip.png":"/img/icons/default.png"}}]).filter("filterMembers",["$filter",function(a){return function(a,b){if(_.isEmpty(b))return a;var c=b.toLowerCase().trim();return _.filter(a,function(a){return a.name.toLowerCase().indexOf(c)>-1||a.display_name.toLowerCase().indexOf(c)>-1})}}]).filter("filterProjects",["$filter",function(a){return function(a,b){if(_.isEmpty(b))return a;var c=b.toLowerCase().trim();return _.filter(a,function(a){return a.name.toLowerCase().indexOf(c)>-1})}}]).filter("fileExt",[function(){return function(a){if(a.type===kzi.constant.file_type.file){if(kzi.constant.img_exts.indexOf(a.ext)>-1)return"图片";var b=_.findKey(kzi.constant.exts,function(b,c){return b===a.ext});return b?b:"未知"}return""}}]).filter("fileSize",[function(){return function(a){if(!_.isUndefined(a)&&_.isNumber(parseInt(a,10))){var b="K",c=a/1024;return c>1024&&(b="M",c/=1024),c.toFixed(2)+b}return""}}]).filter("isFile",[function(){return function(a){return a===kzi.constant.file_type.file?!0:!1}}]).filter("isFolder",[function(){return function(a){return a===kzi.constant.file_type.folder?!0:!1}}]).filter("isImageFile",[function(){return function(a){return _.isEmpty(a)?!1:"-1"===kzi.constant.get_file_icon(a)}}]).filter("isPreviewFile",[function(){return function(a){return _.isEmpty(a)?null:a.type&&a.type===kzi.constant.file_type.folder?1:_.contains(kzi.constant.img_exts,a.ext)?0:_.contains(kzi.constant.text_exts,a.ext)||_.contains(kzi.constant.preview_exts,a.ext)?2:null}}]).filter("teamIndustries",[function(){return function(a){return kzi.constant.team_industries[a]?kzi.constant.team_industries[a]:"未知"}}]).filter("teamEdition",[function(){return function(a){switch(a){case kzi.constant.team.edition.business:return"商业";case kzi.constant.team.edition.free:return"免费";case kzi.constant.team.edition.nonprofit:return"公益"}}}]).filter("payType",[function(){return function(a){switch(a){case kzi.constant.payment.type.alipay:return"支付宝";case kzi.constant.payment.type.bank:return"网银";case kzi.constant.payment.type.credit:return"信用卡";case kzi.constant.payment.type.cash:return"现金支付";case kzi.constant.payment.type.coupon:return"优惠劵"}}}]).filter("payStatus",[function(){return function(a){switch(a){case kzi.constant.payment.status.unpaid:return"未支付";case kzi.constant.payment.status.failed:return"支付失败";case kzi.constant.payment.status.cancel:return"支付取消";case kzi.constant.payment.status.successed:return"支付成功"}}}]).filter("payStatusIsSuccess",[function(){return function(a){return kzi.constant.payment.status.successed===a}}]).filter("memberStatus",[function(){return function(a){switch(a){case kzi.constant.status.pending:return"已邀请";case kzi.constant.status.ok:return"正常"}}}]).filter("projectStatus",[function(){return function(a){switch(a){case kzi.constant.archived.yes:return"已归档";case kzi.constant.archived.no:return"正常"}}}]).filter("exportStatus",[function(){return function(a){switch(a){case 1:return"准备中";case 2:return"就绪";case 3:return"已下载"}}}]).filter("fileuploadErrorInfo",[function(){return function(a){switch(a){case"error":return"上传失败";default:return a}}}]).filter("ifImgExtSetClass",[function(){return function(a){var b=a[0],c=a[1];return kzi.constant.image_exts.indexOf(b)>-1?c:""}}]).filter("getExtIcon",[function(){return function(a){var b={type:2,ext:kzi.constant.get_ext(a.substring(a.lastIndexOf(".")+1))};return kzi.config.wtbox_url+kzi.constant.get_file_icon(b)}}]).filter("appClientName",[function(){return function(a){switch(a.client_id){case kzi.constant.client.android:return"Worktile Android版";case kzi.constant.client.iphone:return"Worktile iPhone版";case kzi.constant.client.openapp:return a.name;default:return""}}}]).filter("GetClientEdition",[function(){return function(a){switch(a.client_id){case kzi.constant.client.openapp:return"第三方应用";default:return"官方"}}}]).filter("projectVisibility",[function(){return function(a){switch(a){case kzi.constant.prj_visibility["private"]:return"私有项目";case kzi.constant.prj_visibility["protected"]:return"团队可见";case kzi.constant.prj_visibility["public"]:return"公开项目";default:return""}}}]).filter("permission",[function(){return function(a,b){return a&&b?a&b:!1}}]).filter("teamVisibility",[function(){return function(a){switch(a){case kzi.constant.team_visibility["private"]:return"私有团队";case kzi.constant.team_visibility["public"]:return"公开团队";default:return""}}}]).filter("clientName",[function(){return function(a){switch(a){case kzi.constant.client_name.web:return"Web端";case kzi.constant.client_name.iphone:return"iPhone客户端";case kzi.constant.client_name.android:return"Android客户端";default:return"未知"}}}]).filter("encodeURIComponent",[function(){return function(a){return encodeURIComponent(a)}}]).filter("escapeRegExp",[function(){return function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}]).filter("reHighlight",function(){return function(a,b,c){return b||angular.isNumber(b)?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="ui-match">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="ui-match">$&</span>')):a}})}(),function(){angular.module("shared.config",["w5c.validator"]).config(["$httpProvider","$sceDelegateProvider","$compileProvider","w5cValidatorProvider",function(a,b,c,d){delete a.defaults.headers.common["X-Requested-With"],b.resourceUrlWhitelist([kzi.config.box_url_regex(),kzi.config.wtbox_url,"self"]),c.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|webcal):/),a.interceptors.push(["$q",function(a){return{request:function(a){return a.url.toLowerCase().indexOf("/api/")>=0&&"GET"==a.method&&(a.url.indexOf("?")>-1?a.url=a.url+"&dt="+(new Date).getTime():a.url=a.url+"?dt="+(new Date).getTime()),a},requestError:function(b){return a.reject(b)},response:function(b){return b.config.url.toLowerCase().indexOf("/api/")>=0&&(!b.data||200!==b.data.code)?a.reject(b):b},responseError:function(b){return a.reject(b)}}}]),d.config({showError:!1,removeError:!1}),d.setRules({projectName:{required:"项目名称不能为空"},login_name:{required:"用户名或者邮箱不能为空"},login_password:{required:"登录密码不能为空",maxlength:"输入的密码长度必须小于{maxlength}",minlength:"输入的密码长度不能小于{minlength}"},user_name:{required:"输入的用户名不能为空",maxlength:"输入的用户名长度必须小于{maxlength}",w5cuniquecheck:"输入的用户名已经存在，请重新输入",regex:"用户名必须为3-30个字符, 可以是字母、数字、下划线,以字母开头"},signup_team_name:{required:"团队名称不能为空",maxlength:"团队名称长度不能大于{maxlength}"},signup_name:{required:"输入的用户名不能为空",maxlength:"输入的用户名长度必须小于{maxlength}",w5cuniquecheck:"输入的用户名已经存在，请重新输入",regex:"用户名必须为3-30个字符, 可以是字母、数字、下划线,以字母开头"},signup_password:{required:"输入的密码不能为空",maxlength:"输入的密码长度必须小于{maxlength}",minlength:"输入的密码长度不能小于{minlength}"},signup_email:{required:"输入的邮箱不能为空",w5cuniquecheck:"该邮箱地址已经被注册，请重新输入"},apply_email:{required:"输入的邮箱不能为空",w5cuniquecheck:"该邮箱地址已经被注册，请重新输入",maxlength:"输入的邮箱长度必须小于{maxlength}"},team_name:{required:"团队名称不能为空",maxlength:"团队名称必须小于{maxlength}"},team_industry:{required:"请选择所属行业"},forget_email:{required:"输入的邮箱不能为空",w5cuniquecheck:"该邮箱地址不存在，请重新输入",maxlength:"输入的邮箱长度必须小于{maxlength}"},feedback_username:{required:"反馈输入的姓名不能为空"},feedback_email:{required:"反馈输入的邮箱不能为空"},feedback_desc:{required:"反馈内容不能为空"},display_name:{required:"姓名不能为空",regex:"姓名输入不合法，重新输入"},password:{required:"输入的密码不能为空",minlength:"输入的密码长度不能小于{minlength}"},pwd_old:{required:"原密码不能为空",minlength:"原密码长度不能小于{minlength}"},pwd_new:{required:"新密码不能为空",minlength:"新密码长度不能小于{minlength}"},prj_name:{required:"项目名不能为空"},task_name:{required:"任务名不能为空"},entry_select:{required:"任务所在列表不能为空"},new_email:{required:"新邮箱地址不能空",w5cuniquecheck:"该邮箱地址已经存在，请重新输入"},share_email:{required:"邮箱地址不能空"},share_desc:{required:"分享描述信息不能不空"},selected_team:{required:"请选择团队"},apply_team_desc:{required:"请填写申请公益团队的描述"},confirm_password:{required:"确认密码不能为空"},factor:{required:"动态验证码不能为空"},recovery_code:{required:"安全码不能为空"},signup_display_name:{regex:"姓名输入不合法，重新输入"}})}])}();var Heyoffline,addEvent,destroy,extend,setStyles,__bind=function(a,b){return function(){return a.apply(b,arguments)}};extend=function(a,b){var c;if(b)for(c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=a[c]||{},arguments.callee(a[c],b[c])):a[c]=b[c];return a},addEvent=function(a,b,c,d){return null==d&&(d=!1),a.addEventListener(b,c,d)},setStyles=function(a,b){var c,d;d=[];for(c in b)d.push(a.style[c]=b[c]);return d},destroy=function(a){return a.parentNode.removeChild(a)},Heyoffline=function(){function a(a){this.hideMessage=__bind(this.hideMessage,this),this.offline=__bind(this.offline,this),this.online=__bind(this.online,this),extend(this.options,a),this.setup()}return a.prototype.version="1.1.1",a.prototype.options={text:{title:"You're currently offline",content:"Seems like you've gone offline,                you might want to wait until your network comes back before continuing.<br /><br />                This message will self-destruct once you're online again.",button:"Relax, I know what I'm doing"},monitorFields:!1,prefix:"heyoffline",noStyles:!1,disableDismiss:!1,elements:["input","select","textarea","*[contenteditable]"]},a.prototype.modified=!1,a.prototype.setup=function(){return this.events={element:["keyup","change"],network:["online","offline"]},this.elements={fields:document.querySelectorAll(this.options.elements.join(",")),overlay:document.createElement("div"),modal:document.createElement("div"),heading:document.createElement("h2"),content:document.createElement("p"),button:document.createElement("a")},this.defaultStyles={overlay:{position:"absolute",top:0,left:0,width:"100%",background:"rgba(0, 0, 0, 0.3)",zIndex:500},modal:{padding:"15px",background:"#fff",boxShadow:"0 2px 30px rgba(0, 0, 0, 0.3)",width:"450px",margin:"0 auto",position:"relative",top:"30%",color:"#444",borderRadius:"2px",zIndex:600},heading:{fontSize:"1.7em",paddingBottom:"15px"},content:{paddingBottom:"15px"},button:{fontWeight:"bold",cursor:"pointer"}},this.attachEvents()},a.prototype.createElements=function(){return this.createElement(document.body,"overlay"),this.resizeOverlay(),this.createElement(this.elements.overlay,"modal"),this.createElement(this.elements.modal,"heading",this.options.text.title),this.createElement(this.elements.modal,"content",this.options.text.content),this.options.disableDismiss?void 0:(this.createElement(this.elements.modal,"button",this.options.text.button),addEvent(this.elements.button,"click",this.hideMessage))},a.prototype.createElement=function(a,b,c){return this.elements[b].setAttribute("class",""+this.options.prefix+"_"+b),this.elements[b]=a.appendChild(this.elements[b]),c&&(this.elements[b].innerHTML=c),this.options.noStyles?void 0:setStyles(this.elements[b],this.defaultStyles[b])},a.prototype.resizeOverlay=function(){return setStyles(this.elements.overlay,{height:""+window.innerHeight+"px"})},a.prototype.destroyElements=function(){return this.elements.overlay?destroy(this.elements.overlay):void 0},a.prototype.attachEvents=function(){var a,b,c,d,e,f,g,h,i=this;for(g=this.elements.fields,c=0,e=g.length;e>c;c++)b=g[c],this.elementEvents(b);for(h=this.events.network,d=0,f=h.length;f>d;d++)a=h[d],this.networkEvents(a);
return addEvent(window,"resize",function(){return i.resizeOverlay()})},a.prototype.elementEvents=function(a){var b,c,d,e,f,g=this;for(e=this.events.element,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(b){return addEvent(a,b,function(){return g.modified=!0})}(b));return f},a.prototype.networkEvents=function(a){return addEvent(window,a,this[a])},a.prototype.online=function(a){return this.hideMessage()},a.prototype.offline=function(){return this.options.monitorFields?this.modified?this.showMessage():void 0:this.showMessage()},a.prototype.showMessage=function(){return this.createElements(),this.options.onOnline?this.options.onOnline.call(this):void 0},a.prototype.hideMessage=function(a){return a&&a.preventDefault(),this.destroyElements(),this.options.onOffline?this.options.onOffline.call(this):void 0},a}();var __whitespace={" ":!0,"	":!0,"\n":!0,"\f":!0,"\r":!0},difflib={defaultJunkFunction:function(a){return __whitespace.hasOwnProperty(a)},stripLinebreaks:function(a){return a.replace(/^[\n\r]*|[\n\r]*$/g,"")},stringAsLines:function(a){for(var b=a.indexOf("\n"),c=a.indexOf("\r"),d=b>-1&&c>-1||0>c?"\n":"\r",e=a.split(d),f=0;f<e.length;f++)e[f]=difflib.stripLinebreaks(e[f]);return e},__reduce:function(a,b,c){if(null!=c)var d=c,e=0;else{if(!b)return null;var d=b[0],e=1}for(;e<b.length;e++)d=a(d,b[e]);return d},__ntuplecomp:function(a,b){for(var c=Math.max(a.length,b.length),d=0;c>d;d++){if(a[d]<b[d])return-1;if(a[d]>b[d])return 1}return a.length==b.length?0:a.length<b.length?-1:1},__calculate_ratio:function(a,b){return b?2*a/b:1},__isindict:function(a){return function(b){return a.hasOwnProperty(b)}},__dictget:function(a,b,c){return a.hasOwnProperty(b)?a[b]:c},SequenceMatcher:function(a,b,c){this.set_seqs=function(a,b){this.set_seq1(a),this.set_seq2(b)},this.set_seq1=function(a){a!=this.a&&(this.a=a,this.matching_blocks=this.opcodes=null)},this.set_seq2=function(a){a!=this.b&&(this.b=a,this.matching_blocks=this.opcodes=this.fullbcount=null,this.__chain_b())},this.__chain_b=function(){for(var a=this.b,b=a.length,c=this.b2j={},d={},e=0;e<a.length;e++){var f=a[e];if(c.hasOwnProperty(f)){var g=c[f];b>=200&&100*g.length>b?(d[f]=1,delete c[f]):g.push(e)}else c[f]=[e]}for(var f in d)d.hasOwnProperty(f)&&delete c[f];var h=this.isjunk,i={};if(h){for(var f in d)d.hasOwnProperty(f)&&h(f)&&(i[f]=1,delete d[f]);for(var f in c)c.hasOwnProperty(f)&&h(f)&&(i[f]=1,delete c[f])}this.isbjunk=difflib.__isindict(i),this.isbpopular=difflib.__isindict(d)},this.find_longest_match=function(a,b,c,d){for(var e,f=this.a,g=this.b,h=this.b2j,i=this.isbjunk,j=a,k=c,l=0,m=null,n={},o=[],p=a;b>p;p++){var q={},r=difflib.__dictget(h,f[p],o);for(var s in r)if(r.hasOwnProperty(s)){if(m=r[s],c>m)continue;if(m>=d)break;q[m]=e=difflib.__dictget(n,m-1,0)+1,e>l&&(j=p-e+1,k=m-e+1,l=e)}n=q}for(;j>a&&k>c&&!i(g[k-1])&&f[j-1]==g[k-1];)j--,k--,l++;for(;b>j+l&&d>k+l&&!i(g[k+l])&&f[j+l]==g[k+l];)l++;for(;j>a&&k>c&&i(g[k-1])&&f[j-1]==g[k-1];)j--,k--,l++;for(;b>j+l&&d>k+l&&i(g[k+l])&&f[j+l]==g[k+l];)l++;return[j,k,l]},this.get_matching_blocks=function(){if(null!=this.matching_blocks)return this.matching_blocks;for(var a,b,c,d,e,f,g,h,i,j=this.a.length,k=this.b.length,l=[[0,j,0,k]],m=[];l.length;)e=l.pop(),a=e[0],b=e[1],c=e[2],d=e[3],i=this.find_longest_match(a,b,c,d),f=i[0],g=i[1],h=i[2],h&&(m.push(i),f>a&&g>c&&l.push([a,f,c,g]),b>f+h&&d>g+h&&l.push([f+h,b,g+h,d]));m.sort(difflib.__ntuplecomp);var n,o,p,q=0,r=0,s=0,t=0,u=[];for(var v in m)m.hasOwnProperty(v)&&(t=m[v],n=t[0],o=t[1],p=t[2],q+s==n&&r+s==o?s+=p:(s&&u.push([q,r,s]),q=n,r=o,s=p));return s&&u.push([q,r,s]),u.push([j,k,0]),this.matching_blocks=u,this.matching_blocks},this.get_opcodes=function(){if(null!=this.opcodes)return this.opcodes;var a=0,b=0,c=[];this.opcodes=c;var d,e,f,g,h,i=this.get_matching_blocks();for(var j in i)i.hasOwnProperty(j)&&(d=i[j],e=d[0],f=d[1],g=d[2],h="",e>a&&f>b?h="replace":e>a?h="delete":f>b&&(h="insert"),h&&c.push([h,a,e,b,f]),a=e+g,b=f+g,g&&c.push(["equal",e,a,f,b]));return c},this.get_grouped_opcodes=function(a){a||(a=3);var b=this.get_opcodes();b||(b=[["equal",0,1,0,1]]);var c,d,e,f,g,h;"equal"==b[0][0]&&(c=b[0],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],b[0]=[d,Math.max(e,f-a),f,Math.max(g,h-a),h]),"equal"==b[b.length-1][0]&&(c=b[b.length-1],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],b[b.length-1]=[d,e,Math.min(f,e+a),g,Math.min(h,g+a)]);var i=a+a,j=[],k=[];for(var l in b)b.hasOwnProperty(l)&&(c=b[l],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],"equal"==d&&f-e>i&&(j.push([d,e,Math.min(f,e+a),g,Math.min(h,g+a)]),k.push(j),j=[],e=Math.max(e,f-a),g=Math.max(g,h-a)),j.push([d,e,f,g,h]));return!j||1==j.length&&"equal"==j[0][0]||k.push(j),k},this.ratio=function(){return matches=difflib.__reduce(function(a,b){return a+b[b.length-1]},this.get_matching_blocks(),0),difflib.__calculate_ratio(matches,this.a.length+this.b.length)},this.quick_ratio=function(){var a,b;if(null==this.fullbcount){this.fullbcount=a={};for(var c=0;c<this.b.length;c++)b=this.b[c],a[b]=difflib.__dictget(a,b,0)+1}a=this.fullbcount;for(var d={},e=difflib.__isindict(d),f=numb=0,c=0;c<this.a.length;c++)b=this.a[c],e(b)?numb=d[b]:numb=difflib.__dictget(a,b,0),d[b]=numb-1,numb>0&&f++;return difflib.__calculate_ratio(f,this.a.length+this.b.length)},this.real_quick_ratio=function(){var a=this.a.length,b=this.b.length;return _calculate_ratio(Math.min(a,b),a+b)},this.isjunk=c?c:difflib.defaultJunkFunction,this.a=this.b=null,this.set_seqs(a,b)}};diffview={buildView:function(a){function b(a,b){var c=document.createElement(a);return c.className=b,c}function c(a,b){var c=document.createElement(a);return c.appendChild(document.createTextNode(b)),c}function d(a,b,c){var d=document.createElement(a);return d.className=b,d.appendChild(document.createTextNode(c)),d}function e(a,e,f,g,h){return f>e?(a.appendChild(c("th",(e+1).toString())),a.appendChild(d("td",h,g[e].replace(/\t/g,"    "))),e+1):(a.appendChild(document.createElement("th")),a.appendChild(b("td","empty")),e)}function f(a,b,e,f,g){a.appendChild(c("th",null==b?"":(b+1).toString())),a.appendChild(c("th",null==e?"":(e+1).toString())),a.appendChild(d("td",g,f[null!=b?b:e].replace(/\t/g,"    ")))}var g=a.baseTextLines,h=a.newTextLines,i=a.opcodes,j=a.baseTextName?a.baseTextName:"Base Text",k=a.newTextName?a.newTextName:"New Text",l=a.contextSize,m=0==a.viewType||1==a.viewType?a.viewType:0;if(null==g)throw"Cannot build diff view; baseTextLines is not defined.";if(null==h)throw"Cannot build diff view; newTextLines is not defined.";if(!i)throw"Canno build diff view; opcodes is not defined.";var n=document.createElement("thead"),o=document.createElement("tr");n.appendChild(o),m?(o.appendChild(document.createElement("th")),o.appendChild(document.createElement("th")),o.appendChild(d("th","texttitle",j+" vs. "+k))):(o.appendChild(document.createElement("th")),o.appendChild(d("th","texttitle",j)),o.appendChild(document.createElement("th")),o.appendChild(d("th","texttitle",k))),n=[n];for(var p,q=[],r=0;r<i.length;r++){code=i[r],change=code[0];for(var s=code[1],t=code[2],u=code[3],v=code[4],w=Math.max(t-s,v-u),x=[],y=[],z=0;w>z;z++){if(l&&i.length>1&&(r>0&&z==l||0==r&&0==z)&&"equal"==change){var A=w-(0==r?1:2)*l;if(A>1){if(x.push(o=document.createElement("tr")),s+=A,u+=A,z+=A-1,o.appendChild(c("th","...")),m||o.appendChild(d("td","skip","")),o.appendChild(c("th","...")),o.appendChild(d("td","skip","")),r+1==i.length)break;continue}}x.push(o=document.createElement("tr")),m?"insert"==change?f(o,null,u++,h,change):"replace"==change?(y.push(p=document.createElement("tr")),t>s&&f(o,s++,null,g,"delete"),v>u&&f(p,null,u++,h,"insert")):"delete"==change?f(o,s++,null,g,change):f(o,s++,u++,g,change):(s=e(o,s,t,g,change),u=e(o,u,v,h,change))}for(var z=0;z<x.length;z++)q.push(x[z]);for(var z=0;z<y.length;z++)q.push(y[z])}q.push(o=d("th","author"," ")),o.setAttribute("colspan",m?3:4),n.push(o=document.createElement("tbody"));for(var r in q)q.hasOwnProperty(r)&&o.appendChild(q[r]);o=b("table","diff"+(m?" inlinediff":""));for(var r in n)n.hasOwnProperty(r)&&o.appendChild(n[r]);return o}},function(){"use strict";angular.module("ui.bootstrap.popbox",["ui.bootstrap.position"]).provider("$popbox",[function(){var a={placement:"top",align:null,animation:!0,popupDelay:0,arrow:!1,popboxClass:"popbox",transitionClass:"fade",triggerClass:"in",popboxOpenClass:"popbox-open",resolve:{},backdropFade:!1,popboxFade:!1,keyboard:!0,backdropClick:!0,autoAdapt:!1},b={},c=2,d=58;this.options=function(a){b=a},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$injector","$position","$timeout",function(e,f,g,h,i,j,k,l,m,n){function o(a){var b=angular.element("<div>");return b.addClass(a),b}function p(c){var d=this,e=this.options=angular.extend({},a,b,c);this._open=!1,this._target=$(d.options.target.target),$(this._target).hasClass("js-popbox")||$(this._target).parents(".js-popbox").length>0&&(this._target=$(this._target).parents(".js-popbox").eq(0)),this.modalEl=o(e.popboxClass),e.popboxFade&&(this.modalEl.addClass(e.transitionClass),this.modalEl.removeClass(e.triggerClass)),this.handledEscapeKey=function(a){if(27===a.which){var b=d.modalEl.find(".ui-select-dropdown:visible");if(b.length>0)return b.scope().$select.open=!1,void d.$scope.$apply();d.close(),a.preventDefault(),d.$scope.$apply()}},this.handledSortable=function(a){d.close(),d.$scope.$apply()},this.handleBackDropClick=function(a){for(var b=a.target,c=!0;b;){if($(b).hasClass("popbox")||$(b).hasClass("popbox-step-li")||$(b).hasClass("openpop")||$(b).hasClass("ui-select-container")||0!=$(b).parents(".ui-select-container").length){c=!1;break}b=b.parentNode}0===$(a.target).parents("body").length&&(c=!1),c&&q.hasClass("popbox-open")&&(d.close(),a.preventDefault(),d.$scope.$apply())},this.handleLocationChange=function(){d.close()}}var q=f.find("body");return p.prototype.isOpen=function(){return this._open},p.prototype.open=function(a,b){var e=this,f=this.options,j=e.options.popboxClass,l=$("."+j.replace(" ","."));if(q.hasClass("popbox-open")&&l.length>0){if(this._target[0]===l.scope().popbox._target[0])return void l.scope().popbox.close();$(".popbox").each(function(){$(this).scope().popbox.close()})}if(a&&(f.templateUrl=a),b&&(f.controller=b),!f.template&&!f.templateUrl)throw new Error("Popbox.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(a){var b=a.$scope=e.$scope=a.$scope?a.$scope:h.$new();if(e.modalEl.html(a.$template),e.options.controller){var f=i(e.options.controller,a);e.modalEl.children().data("ngControllerController",f)}e._addElementsToDom(),g(e.modalEl)(b),n(function(){e.options.popboxFade&&e.modalEl.addClass(e.options.triggerClass)});var j=kzi.util.docWidth(),k=kzi.util.docHeight(),l=kzi.util.docOuterWidth(),o=(kzi.util.docOuterHeight(),null),p=function(){var a,b={};a=m.position(e._target),a.top=e.options.top||$(e._target).offset().top,a.left=e.options.left||$(e._target).offset().left,e.modalEl.css({display:"block"});var f=$(e.modalEl).outerWidth(!0),g=$(e.modalEl).outerHeight(!0);e.options.top&&(a.height=0),e.options.left&&(a.width=0);var h=$(e._target).data("placement");h||(h=e.options.placement);var i=$(e._target).data("align");i||(i=e.options.align);var n=$(e._target).data("offset");n=null==n?c:parseInt(n,10);var p={set_box_placement_auto_lf:function(){(null===h||"auto"===h)&&(h=a.left<j/2?"right":"left")},set_box_align_auto_tb:function(){"auto"===i&&(i=a.top<k/2?"top":"bottom")},set_top_position:function(){"top"===i?b.top=~~a.top:"bottom"===i?b.bottom=k-a.top-a.height:a.top>k/2?b.bottom=~~(k-a.top-a.height/2-g/2):b.top=~~(a.top+a.height/2-g/2),void 0!==b.top&&null!==b.top&&(b.top+g>k?b.top=k-g-c:b.top<d&&(b.top=d+c)),void 0!==b.bottom&&null!==b.bottom&&(b.bottom<0?b.bottom=c:b.bottom+g+d>k&&(b.bottom=k-g-d))},set_left_position:function(){"right"===i?b.right=j-a.left-a.width:"left"===i?b.left=a.left:b.left=a.left+a.width/2-f/2,void 0!==b.left&&null!==b.left&&(b.left<=0?b.left=c:b.left+f>j&&(b.left="auto",b.right=c)),void 0!==b.right&&null!==b.right&&(b.right<0?b.right=c:b.right+f>j&&(b.right="auto",b.left=c))}};switch(p.set_box_placement_auto_lf(),h){case"right":p.set_top_position(),b.left=~~(a.left+a.width+c),b.left+f>l&&(b.left="auto",b.right=~~(l-a.left+c));break;case"left":p.set_top_position(),b.right=~~(j-a.left+c),b.right+f>l&&(b.right=~~(a.left+f+c));break;case"top":p.set_left_position(),b.bottom=~~(k-a.top+c),b.bottom+g>k-d&&(b.bottom=void 0,b.top=~~(a.top+a.height+c),b.top+g>k-d&&(b.bottom=c,b.top=void 0)),void 0===b.bottom&&b.top+g>k&&(b.top=a.top-~~(g/2),b.top<d&&(b.top=d));break;case"bottom":p.set_left_position(),b.top=~~(a.top+a.height+n),b.top+g>k&&(b.top=void 0,b.bottom=~~(k-a.top+c),b.bottom+g>k-d&&(b.top=~~(k-d-g),b.bottom=void 0));break;default:b={top:~~(a.top+a.height)+2+"px",left:~~(a.left-a.width/2)+"px"},e.options.placement="bottom"}o=b,b=angular.extend({left:"auto",right:"auto"},b),e.modalEl.css(b),q.addClass(e.options.popboxOpenClass)},r=$(e._target).data("auto-adapt");r?e.$watcher=b.$watch(function(){return $(e.modalEl).outerWidth(!0)+","+$(e.modalEl).outerHeight(!0)},function(){n(function(){p()},100)}):n(function(){p()},100),e._bindEvents()}),this.deferred=k.defer(),this.deferred.promise},p.prototype.close=function(a,b){var c=this;this._getFadingElements();_.isFunction(c.$watcher)&&c.$watcher(),q.removeClass(c.options.popboxOpenClass),this._onCloseComplete(a,b)},p.prototype._getFadingElements=function(){var a=[];return this.options.popboxFade&&a.push(this.modalEl),a},p.prototype._bindEvents=function(){this.options.keyboard&&q.bind("keydown.popbox",this.handledEscapeKey),this.options.backdropClick&&(q.bind("mousedown.popbox",this.handleBackDropClick),q.bind("sortstart.popbox",this.handledSortable)),this.modalEl.bind("click.popbox mousedown.popbox",function(a){a.target.href&&"javascript:;"!==a.target.href||a.stopPropagation()}),this.$scope.$on("$locationChangeSuccess",this.handleLocationChange)},p.prototype._unbindEvents=function(){this.options.keyboard&&q.unbind("keydown.popbox",this.handledEscapeKey),this.options.backdropClick&&q.unbind("mousedown.popbox",this.handleBackDropClick),q.unbind("sortstart.popbox",this.handledSortable)},p.prototype._onCloseComplete=function(a,b){this._removeElementsFromDom(),b||this._unbindEvents(),this.deferred.resolve(a),angular.isFunction(this.options.onCloseComplete)&&this.options.onCloseComplete()},p.prototype._addElementsToDom=function(){$(this._target).addClass("openpop"),q.append(this.modalEl),this._open=!0},p.prototype._removeElementsFromDom=function(){this._target.removeClass("openpop"),this.modalEl.remove(),this._open=!1},p.prototype._loadResolves=function(){var a,b=[],c=[],d=this;return this.options.template?a=k.when(this.options.template):this.options.templateUrl&&(a=e.get(this.options.templateUrl,{cache:j}).then(function(a){return a.data})),angular.forEach(this.options.resolve||[],function(a,d){c.push(d),b.push(angular.isString(a)?l.get(a):l.invoke(a))}),c.push("$template"),b.push(a),k.all(b).then(function(a){var b={};return angular.forEach(a,function(a,d){b[c[d]]=a}),b.popbox=d,d.options.$scope&&(b.$scope=d.options.$scope),b})},{popbox:function(a){return new p(a)}}}]}])}(),function(){"use strict";function a(){function a(a){e=a,a===Strophe.Status.CONNECTING||a===Strophe.Status.CONNFAIL||a===Strophe.Status.DISCONNECTING||a===Strophe.Status.DISCONNECTED||a===Strophe.Status.CONNECTED&&(c.addHandler(d,null,"message",null,null,null),c.addHandler(f,null,"presence",null,null,null),c.send($pres().c("priority").t(5).tree()))}var b=kzi.config.feed_url(),c=new Strophe.Connection(b),d=null,e=null,f=null,g="";return{onMessage:function(a){d=a},onPresence:function(a){f=a},getStatus:function(){return e},connect:function(b,e){if(!d)throw new Error("onMessageFn is not be null.");for(var f="@im.worktile.com/",h=0;8>h;h++){var i=parseInt(10*Math.random());f+=i}g=b+f,c.connect(g,e,a)},getConnection:function(){return c},getMyJid:function(){return g},online:function(){c.send($pres().c("priority").t(5).tree())},leave:function(){c.send($pres().c("show").t("away").tree())},close:function(){e=Strophe.Status.DISCONNECTED,c.disconnect(),c.reset()}}}angular.module("wt.feed",[]).factory("feed",a),a.$inject=[]}(),function(){"use strict";function a(a,b){var c=this;c.teams=[],c.projects=[],c.project_abstracts=null,c.project={info:null,pid:"",entries:[],tasks:[],navigations:[],cal_events:[],cal_events_start:void 0,cal_events_end:void 0,events:[]},c._cache={},c.getTeam=function(a){return _.find(c.teams,function(b){return b&&b.team_id===a})},c.getProject=function(a){return _.findWhere(c.projects,{pid:a})},c.getPacketProjects=function(a){var b=a;b instanceof Array||(b=c.projects);var d=[],e=[];return _.each(b,function(a){if(kzi.constant.prj_module.crud&a.permission){var b=_.clone(a);if(b.is_star)b.sort=100,b.team_name="常用项目",e.push(b);else{if(c.teams){var f=_.find(c.teams,function(a){return a.team_id===b.team_id});b.team_name=f?f.name:"个人项目",b.sort=f&&-1!=b.team_id?f.create_date:1e3}d.push(b)}}}),d=_.union(e,d),c.teams?_.sortBy(d,function(a){return a.sort}):d},c.setTeamProjects=function(){var a=_.findWhere(c.projects,{team_id:"-1"}),b=_.findWhere(c.teams,{team_id:"-1"});a&&!b&&c.teams.unshift({team_id:"-1",name:"个人项目"}),!a&&b&&(c.teams=_.reject(c.teams,function(a){return"-1"===a.team_id})),_.each(c.teams,function(a){a.projects=_.where(c.projects,{team_id:a.team_id})})},c.loadTeam=function(a){var b=_.findWhere(c.teams,{team_id:a});return b?b:wt.data.team.summary(a).then(function(a){return a.data.data.info},function(){return null})},c.loadFullProject=function(a,b,d,e){return a===c.project.pid&&c.project.info?d(c.project.info):(b&&(c.clearProject(),c.project.pid=a),wt.data.project.get_full(a,null,function(){}).then(function(a){return a.data.data._is_full=!0,b&&(c.project.info=a.data.data),d?d(a.data.data):a.data.data},function(a){return e?e(a):null}))},c.loadProjectMembers=function(a,b){return a===c.project.pid&&c.project.info&&!_.isEmpty(c.project.info.members)?b(c.project.info.members):void wt.data.project.get_members(a,function(a){return b(a.data)})},c.loadEntriesAndTasks=function(a,b,d){return c.project.pid!==a||_.isEmpty(c.project.entries)?void wt.data.entry.get_list(a,!1,function(d){var e=_.sortBy(d.data.entries,function(a){return a.pos}),f=d.data.tasks;c.pid=a,c.project.entries=e,c.project.tasks=f,b(c.project)},d):b(c.project)},c.reloadEntriesAndTasks=function(a,b){wt.data.entry.get_list(a,!1,function(d){var e=_.sortBy(d.data.entries,function(a){return a.pos}),f=d.data.tasks;c.pid=a,c.project.entries=e,c.project.tasks=f,b(c.project)})},c.clearProject=function(){c.project.info=null,c.project.pid="",c.project.entries=[],c.project.tasks=[],c.project.navigations=[],c.project.files=[],c.project.cal_events=[],c.project.cal_events_start=void 0,c.project.cal_events_end=void 0,c.project.events=[]},c.clearEntries=function(){c.project.entries=[],c.project.tasks=[]},c.loadEntries=function(a,b,d){return c.project.pid!==a||_.isEmpty(c.project.entries)?void wt.data.entry.get_list(a,!0,function(a){var c=_.sortBy(a.data.entries,function(a){return a.pos});return b(c)},d):b(c.project.entries)},c.loadTask=function(a,b,d,e,f){var g=null;a!==c.project.pid||_.isEmpty(c.project.tasks)||(g=_.findWhere(c.project.tasks,{tid:b})),g?(d&&d(g),f&&f()):wt.data.task.get(a,b,function(a){d(a.data)},e,f)},c.loadCalEvents=function(a,b,d,e,f){return c.project.pid===a&&c.project.cal_events_start<=b&&c.project.cal_events_end>=d?e(c.project.cal_events):void wt.data.event.get_list(a,b,d,function(a){return c.project.cal_events_start=b,c.project.cal_events_end=d,_.each(a.data,function(a){a.extend.recurrence_id&&(a.editable=!1),a.start.length<25&&(a.start=moment.unix(a.start).format("YYYY-MM-DDTHH:mm"),a.end=moment.unix(a.end).format("YYYY-MM-DDTHH:mm"))}),c.project.cal_events=a.data,e(c.project.cal_events)},f)},c.loadEvent=function(a,b,d,e,f){var g=null;a!==c.project.pid||_.isEmpty(c.project.events)||(g=_.findWhere(c.project.events,{event_id:b})),g?(d&&d(g),f&&f()):wt.data.event.get(a,b,function(a){200===a.code&&(c.project.events.push(a.data),d(a.data))},e,f)},c.reloadUnread=function(){wt.data.notice.unread_count().success(function(a){c.unread_count=a.count})},c.changeUnreadCount=function(a){b.global.unread_count=a},c.readNotice=function(a){a||(a=1),b.global.unread_count>=a?b.global.unread_count=b.global.unread_count-a:b.global.unread_count=0},c.loadProjectAbstracts=function(a){return c.project_abstracts?a(c.project_abstracts):void wt.data.project.get_all_abstracts("visible",function(b){c.project_abstracts=_(b.data).map(function(a){return[a.pid,a]}).zipObject().value(),a(c.project_abstracts)})},c.loadAll=function(){if(!_.isEmpty(c.projects)){var d=a.defer();return d.resolve(c),d.promise}return a.all([wt.data.team.get_list(),wt.data.project.get_all("active"),wt.data.notice.unread_count()]).then(function(a){return _.map(a[0].data.data,function(a){var b=c.getTeam(a.team_id);b?(delete b.faked,_.extend(b,a)):c.teams.push(a)}),c.projects=_.sortBy(a[1].data.data,function(a){return a.pos}),b.global.unread_count=a[2].data.data,c.setTeamProjects(),c},function(a){return c})},c.reloadTeams=function(a){wt.data.team.get_list().success(function(b){c.teams=b.data,c.setTeamProjects(),a&&a()})},c.resortProjects=function(){c.projects=_.sortBy(c.projects,function(a){return a.pos}),c.setTeamProjects()},c.reloadProjects=function(a){wt.data.project.get_all("active",function(b){c.projects=b.data,c.resortProjects(),a&&a(c.projects)})},c.getTeamsInCharge=function(){var a=_.filter(c.teams,function(a){return 1===a.curr_role&&"-1"!==a.team_id||a.permission&kzi.constant.team_module.add_project});return a.unshift(_.findWhere(c.teams,{team_id:"-1"})),a};var d=function(a,d){if(c.projects&&c.projects.length>0&&_.each(c.projects,function(b){if(b.admins&&b.admins.length>0){var c=_.findWhere(b.admins,{uid:a});c&&d(c)}}),c.project.info&&c.project.info.members){var e=_.findWhere(c.project.info.members,{uid:a});e&&d(e),c.project.tasks&&c.project.tasks.length>0&&_.each(c.project.tasks,function(b){if(b.members&&b.members.length>0){var c=_.findWhere(b.members,{uid:a});c&&d(c)}})}d(b.global.me)};c.cache={keep:function(a,b){c._cache[a]=b},get:function(a){return c._cache[a]},purge:function(a){c._cache[a]=null},project:{updateFull:function(a){a.pid===c.project.info.pid&&(c.project.info.name=a.name,c.project.info.desc=a.desc,c.project.info.archived=a.archived,c.project.info.pic=a.pic,c.project.info.bg=a.bg,c.project.info.is_star=a.is_star,c.project.info.curr_role=a.curr_role,c.project.info.show_completed=a.show_completed,c.project.info.permission=a.permission);var b=_.findWhere(c.projects,{pid:a.pid});b&&(b.name=a.name,b.desc=a.desc,b.archived=a.archived,b.pic=a.pic,b.bg=a.bg,b.is_star=a.is_star,b.curr_role=a.curr_role,b.show_completed=a.show_completed,b.permission=a.permission)},update:function(a,b,d,e,f,g){a===c.project.info.pid&&(c.project.info.name=b,c.project.info.bg=d,c.project.info.pic=e,c.project.info.desc=f,c.project.info.visibility=g);var h=_.findWhere(c.projects,{pid:a});h&&(h.name=b,h.bg=d,h.pic=e,h.desc=f,h.visibility=g)},change_navs:function(a,b){a===c.project.info.pid&&(c.project.info.navs=b,c.project.info.navigations=wt.bus.project.get_navs(b));var d=_.findWhere(c.projects,{pid:a});d&&(d.navs=b,d.navigations=wt.bus.project.get_navs(b))},add:function(a){var b=_.findWhere(c.projects,{pid:a.pid});b||c.projects.push(a),c.setTeamProjects()},remove:function(a){c.projects&&c.projects.length>0&&(c.projects=_.reject(c.projects,function(b){return b.pid===a}),c.setTeamProjects())},shift:function(a,b){if(c.project.info&&c.project.info.pid===a){c.project.info.team_id=b,c.project.info.visibility===kzi.constant.prj_visibility["protected"]&&-1===b&&(c.project.info.visibility=kzi.constant.prj_visibility["private"]);var d=_.findWhere(c.teams,{team_id:b});d&&(c.project.info.team={team_id:d.team_id,name:d.name,status:d.status,is_owner:d.is_owner,edition:d.edition}),-1===b&&(c.project.info.team={team_id:-1,name:"个人项目",is_owner:0})}var e=_.findWhere(c.projects,{pid:a});e&&(e.team_id=b,e.visibility===kzi.constant.prj_visibility["protected"]&&-1===b&&(e.visibility=kzi.constant.prj_visibility["private"]),c.setTeamProjects())},add_admin:function(a,b){if(c.projects&&c.projects.length>0){var d=_.findWhere(c.projects,{pid:a});if(d){var e=_.findWhere(d.admins,{uid:b.uid});e||d.admins.push(b)}}},remove_admin:function(a,b){if(c.projects&&c.projects.length>0){var d=_.findWhere(c.projects,{pid:a});d&&(d.admins=_.reject(d.admins,function(a){return a.uid===b.uid}))}},set_star:function(a,b){c.project.info&&a===c.project.info.pid&&(c.project.info.is_star=b);var d=_.findWhere(c.projects,{pid:a});d&&(d.is_star=b)},set_favorite:function(a,b){c.project.info&&a===c.project.info.pid&&(c.project.info.is_favorite=b);var d=_.findWhere(c.projects,{pid:a});d&&(d.is_favorite=b)},label_remove:function(a,b){if(c.project&&c.project.pid===a){var d=_.filter(c.project.tasks,function(a){return a.labels.length>0}),e=_.pluck(d,"tid");_.each(e,function(a){var d=_.find(c.project.tasks,{tid:a});d.labels=_.reject(d.labels,function(a){return a.name===b})})}},member_remove:function(a,b){var d=_.findWhere(c.projects,{pid:a});d&&d.members&&_.remove(d.members,{uid:b}),c.project.pid==a&&c.project.info&&c.project.info.members&&(_.remove(c.project.info.members,{uid:b}),_.forEach(c.project.tasks,function(a){_.remove(a.members,{uid:b}),_.remove(a.watchers,{uid:b})}))},label_rename:function(a,b){if(c.project&&c.project.pid===a){var d=_.filter(c.project.tasks,function(a){return a.labels.length>0}),e=_.pluck(d,"tid");_.each(e,function(a){var d=_.find(c.project.tasks,{tid:a});$(d.labels).each(function(a,c){c.name===b.name&&(c.desc=b.desc)})})}}},team:{dismiss:function(a){var b=c.getTeam(a);c.teams.splice(c.teams.indexOf(b),1),c.projects=_.reject(c.projects,function(b){return b.team_id===a}),c.setTeamProjects()},sync:function(a,b){var d=c.getTeam(a);_.map(b,function(a,b){void 0!==d[b]&&(d[b]=a)})},remove_member:function(a,b){var d=_.findWhere(c.teams,{team_id:a});d&&(d.member_count=d.member_count-1);var e=_.reject(c.projects,function(b){return b.team_id===a});_.forEach(e,function(a){a.member_count=a.member_count-1,a.members&&(a.members=_.reject(a.members,{uid:b})),a.pid==c.project.pid&&(c.project.info.members=_.reject(c.project.info.members,{uid:b}),_.forEach(c.project.tasks,function(a){a.members=_.reject(a.members,{uid:b})}))})},leave:function(a){c.teams=_.reject(c.teams,function(b){return b.team_id===a}),c.projects=_.reject(c.projects,function(b){return b.team_id===a})},update_base:function(a,b,d,e){var f=_.findWhere(c.teams,{team_id:a});f&&(f.name=b,f.desc=d,f.url=e)},update_visibility:function(a,b){var d=_.findWhere(c.teams,{team_id:a});d&&(d.visibility=b)}},task:{add:function(a){if(null!==c.project.info&&a.pid===c.project.info.pid){var b=_.findWhere(c.project.tasks,{tid:a.tid});b||c.project.tasks.push(a);var d=_.findWhere(c.project.entries,{entry_id:a.entry_id});d&&d.tasks&&!_.findWhere(d.tasks,{tid:a.tid})&&d.tasks.push(a)}},batch_add:function(a){if(null!==c.project.info&&a[0].pid===c.project.info.pid){var b=_.findWhere(c.project.entries,{entry_id:a[0].entry_id});_.each(a,function(a){c.project.tasks.push(a),b&&b.tasks&&(b.tasks.push(a),b.tasks=_.sortBy(b.tasks,function(a){return a.pos}))})}},set_expire:function(a,b){var d=_.findWhere(c.project.tasks,{tid:a});d&&(d.expire_date=b,d.badges.expire_date=b)},move:function(a,b,d,e){var f=_.findWhere(c.project.entries,{entry_id:e});if(f){var g=_.findWhere(c.project.tasks,{tid:a});g.pos=b,d!==e&&(g.entry_id=e)}},del:function(a){var b=_.findWhere(c.project.tasks,{tid:a});if(b){b.is_deleted=!0;var d=_.findWhere(c.project.entries,{entry_id:b.entry_id});d&&d.tasks&&(d.tasks=_.reject(d.tasks,function(b){return b.tid===a}))}return c.project.tasks=_.reject(c.project.tasks,function(b){return b.tid===a}),c.project.tasks},archive:function(a){var b=_.findWhere(c.project.tasks,{tid:a});if(b){b.archived=!0;var d=_.findWhere(c.project.entries,{entry_id:b.entry_id});d&&d.tasks&&(d.tasks=_.reject(d.tasks,function(b){return b.tid===a}))}return c.project.tasks=_.reject(c.project.tasks,function(b){return b.tid===a}),c.project.tasks},complete:function(a,b){var d=_.findWhere(c.project.tasks,{tid:a});d&&(d.completed=b)},update_full:function(a){var b=_.findWhere(c.project.tasks,{tid:a.tid});if(b){b.name=a.name,b.desc=a.desc,b.pos=a.pos,b.completed=a.completed,b.is_expire=a.is_expire,b.expire_date=a.expire_date,b.badges=a.badges,b.labels=a.labels,b.members=a.members,b.watchers=a.watchers,b.todos=a.todos;var d=_.findWhere(c.project.entries,{entry_id:a.entry_id});d&&(b.entry_name=d.name)}}},entry:{add:function(a){var b=_.findWhere(c.project.entries,{entry_id:a.entry_id});b||c.project.entries.push(a)},move:function(a,b,d){if(a===c.project.pid){var e=_.findWhere(c.project.entries,{entry_id:b});if(e)return e.pos=d,c.project.entries=_.sortBy(c.project.entries,function(a){return a.pos}),c.project.entries}},del:function(a,b){if(a===c.project.pid){var d=_.findWhere(c.project.entries,{entry_id:b});return d&&(c.project.entries=_.reject(c.project.entries,function(a){return a.entry_id===b}),c.project.tasks=_.reject(c.project.tasks,function(a){return a.entry_id===b})),c.project.entries}}},file:{del:function(a,b){var d=_.filter(c.project.tasks,function(a){return _.includes(a.fids,b)});_.each(d,function(a){a.files&&(a.files=_.reject(a.files,{fid:b})),a.fids=_.without(a.fids,b)})}},event:{update:function(a,b,d){var e=_.findWhere(c.project.events,{event_id:a.event_id});if(b===kzi.constant.event_update_type.one){var f=_.findWhere(c.project.cal_events,{id:a.event_id});e&&(e=a),f&&(f.title=a.name,f.start=moment(a.start.date).format("YYYY-MM-DD HH:MM"),f.end=moment(a.end.date).format("YYYY-MM-DD HH:MM"))}if(b===kzi.constant.event_update_type.follow_up){var g=a.event_id,h=_.findWhere(c.project.cal_events,{id:g}),i=moment(a.start.date)-moment(h.start),j=moment(a.end.date)-moment(h.end),k=_.filter(c.project.cal_events,{extend:{recurrence_id:a.recurrence_id}});k=_.filter(k,function(a){return moment(h.start)<=moment(a.start)}),_.each(k,function(b){b.title=a.name,b.extend.recurrence_id=d,0!=i&&(b.start=moment(b.start).add(i,"milliseconds").format("YYYY-MM-DDTHH:MM")),0!=j&&(b.end=moment(b.end).add(j,"milliseconds").format("YYYY-MM-DDTHH:MM"))})}},update_date:function(a,d,e,f,g,h,i){var j=_.findWhere(c.project.events,{event_id:d}),k=_.findWhere(c.project.cal_events,{id:d});wt.data.event.update_date(a,d,e,f,g,h,function(a){200===a.code&&(k&&(k.start=e+"T"+f+":00+08:00",k.end=g+"T"+h+":00+08:00"),j&&(j.start.date=parseInt(moment(e+"T"+f).format("x"),10),j.start.time=f,j.start.time_zone=j.start.time_zone,j.end.date=parseInt(moment(g+"T"+h).format("x"),10),j.end.time=h,j.end.time_zone=j.end.time_zone),b.$broadcast(kzi.constant.event_names.on_event_update_date,{start_date:parseInt(moment(e+"T"+f).format("x"),10),end_date:parseInt(moment(g+"T"+h).format("x"),10)}))})},trash:function(a,b){var d=parseInt(b);switch(c.project.events=_.reject(c.project.events,function(b){return b.event_id===a.event_id}),d){case kzi.constant.event_trash_type.one:c.project.cal_events=_.reject(c.project.cal_events,function(b){return b.id===a.event_id});break;case kzi.constant.event_trash_type.follow_up:c.project.cal_events=_.reject(c.project.cal_events,function(b){var c=new Date(b.start).getTime();return c>=a.start.date&&b.extend.recurrence_id===a.recurrence_id});break;case kzi.constant.event_trash_type.all:c.project.cal_events=_.reject(c.project.cal_events,function(b){return b.extend.recurrence_id===a.recurrence_id})}return c.project.events}},user:{avatar:function(a,b){d(a,function(a){a.avatar=b})},update:function(a,b,c){d(a,function(a){a.display_name=b,a.desc=c})},remove:function(a){c.project&&c.project.info.members&&c.project.info.members.length>0&&(c.project.info.members=_.reject(c.project.info.members,function(b){return b.uid===a}),c.project.tasks&&c.project.tasks.length>0&&(_.each(c.project.tasks,function(b){b.members&&b.members.length>0&&(b.members=_.reject(b.members,function(b){
return b.uid===a}))}),b.$broadcast("socket_message_project_member_remove",{uid:a})))},change_state:function(a,d){if(b.$broadcast(kzi.constant.event_names.member_state_change,{uid:a,state:d}),c.project.info){var e=_.findWhere(c.project.info.members,{uid:a});e&&(e.online=d)}b.global.me.uid===a&&(b.global.me.online=d)}}}}angular.module("wt.globalDataContext",[]).service("globalDataContext",a),a.$inject=["$q","$rootScope"]}(),function(){"use strict";function a(a,b,c){var d=null,e=null,f=this;f.isOpened=!1,f.pid="",f.xtype="",f.xid="",f.comment_id="",f.onStartOpen=function(a){d=a},f.onStartClose=function(a){e=a},f.open=function(a,b,c,e){f.pid=a,f.xtype=b,f.xid=c,f.comment_id=e,d&&d(f.isOpened),f.isOpened=!0},f.openTask=function(a,b,c){f.open(a,kzi.constant.xtype.task,b,c)},f.openFile=function(a,b,c){f.open(a,kzi.constant.xtype.file,b,c)},f.openPost=function(a,b,c){f.open(a,kzi.constant.xtype.post,b,c)},f.openPage=function(a,b,c){f.open(a,kzi.constant.xtype.page,b,c)},f.openEvent=function(a,b,c){f.open(a,kzi.constant.xtype.event,b,c)},f.openMail=function(a,b){f.open("",kzi.constant.xtype.email,a,b)},f.openEntity=function(a,b,c){switch(b.etype){case kzi.constant.entity_type.task:f.openTask(a,b.eid,c);break;case kzi.constant.entity_type.file:f.openFile(a,b.eid,c);break;case kzi.constant.entity_type.post:f.openPost(a,b.eid,c);break;case kzi.constant.entity_type.page:f.openPage(a,b.eid,c);break;case kzi.constant.entity_type.event:f.openEvent(a,b.eid,c);break;case kzi.constant.entity_type.email:f.openMail(b.eid,c)}},f.toProject=function(a){f.close(),b.go("project",{pid:a},{reload:!0})},f.toPath=function(a){f.close(),c.path(a)},f.close=function(){f.pid="",f.xtype="",f.xid="",f.comment_id="",f.isOpened=!1,e&&e(),a.$broadcast(kzi.constant.event_names.on_slide_hide),a.global.is_scroll_comment=!0}}angular.module("wt.locator",[]).service("locator",a),a.$inject=["$rootScope","$state","$location"]}(),function(){"use strict";angular.module("wt.temp_data",[]).service("tempData",[function(){this.task={},this.file={},this.post={},this.page={},this.event={},this.comment={},this.ensure=function(a,b,c){return this[a][b]=c,this[a][b]},this.checkout=function(a,b){return this[a][b]},this.purge=function(a,b){this[a][b]=null}}])}(),function(){"use strict";function a(a,b,c){this.showAdd=function(d,e){a.open({windowClass:"dialog-w680",templateUrl:"/app/js/service/project/dialog_project_create.html",controller:["$scope","$modalInstance",function(a,f){var g=a.vm={new_project:{template_id:"",desc:"",team_id:d}};a.teams=wt.bus.team.get_add_prj_teams(b.teams);var h=function(a){b.cache.project.add(a.data),f.close(),e?e(a.data):c.go("project",{pid:a.data.pid})},i=function(){return g.new_project.team_id?(g.new_project.team_id&&-1!=g.new_project.team_id&&wt.data.team.get_project_templates(g.new_project.team_id).success(function(a){g.team_templates=a.data}),g.visibilities=wt.bus.project.get_visibilities(g.new_project.team_id),void(g.new_project.visibility||(g.new_project.visibility=kzi.constant.prj_visibility["private"]))):void(g.visibilities=[])};g.save=function(){g.saving||(g.saving=!0,"-1"==g.new_project.team_id?wt.data.project.add_personal_project(g.new_project.name,g.new_project.desc,g.new_project.visibility,h,null,function(){g.saving=!1}):wt.data.project.add_team_project(g.new_project.team_id,g.new_project.name,g.new_project.desc,g.new_project.visibility,g.new_project.template_id,h,null,function(){g.saving=!1}))},g.change_project_team=function(){g.new_project.visibility=kzi.constant.prj_visibility["private"],i()},g.close=function(){f.close()},d&&g.change_project_team()}]})}}angular.module("wt.service.project",[]).service("projectService",a),a.$inject=["$modal","globalDataContext","$state"]}(),function(){"use strict";function a(a,b){this.showAdd=function(){var c=a.open({windowClass:"dialog-w680",templateUrl:"/app/js/service/team/dialog_team_create.html",controller:["$scope","$rootScope","$location",function(a,d,e){function f(){g.is_first_landing=!1,d.global.is_first_landing=!1}var g=a.vm={step_index:1,step_max:3,team_name:"",team_desc:"",team_industry:null,team_industry_text:null,team_invite_email:[{email:""},{email:""}],all_industries:[],contact_members:[],contact_members_clone:[],contact_members_selected:[],is_first_landing:"1"===wt.me.is_new};g.all_industries=_.toArray(kzi.constant.team_industries),g.all_industries.splice(0,1),g.is_first_landing||(g.team_invite_email=[{email:""}]),wt.data.account.get_contacts(function(a){g.contact_members=a.data,g.contact_members_clone=_.cloneDeep(g.contact_members)},null,null),g.js_close=function(){c.close(),f()},g.js_next_step=function(a){if(!(g.step_index>g.step_max)){switch(g.step_index){case 2:a?(g.team_invite_email=_.filter(g.team_invite_email,function(a){return""!=a.email}),g.contact_members_selected=_.filter(g.contact_members,function(a){return a.selected===!0})):g.is_first_landing?g.team_invite_email=[{email:""},{email:""}]:g.team_invite_email=[{email:""}],g.contact_members_selected.unshift(d.global.me)}g.step_index++}},g.js_team_industy_change=function(){g.team_industry=_.indexOf(_.toArray(kzi.constant.team_industries),g.team_industry_text)},g.js_contact_selected_toggle=function(a){_.filter(g.contact_members,function(b){b.uid==a&&(b.selected===!0?b.selected=!1:b.selected=!0)})},g.js_add_invite_member_input=function(){g.team_invite_email.push({email:""})},g.js_remove_email_textbox=function(a){g.team_invite_email.splice(a,1)},g.js_team_add=function(){g.saving=!0,g.contact_members.length>0&&(_.each(g.contact_members,function(a){a.selected===!0&&g.team_invite_email.push(a)}),g.team_invite_email=_.filter(g.team_invite_email,function(a){return""!=a.email}));var a=null;wt.data.team.add(g.team_name,g.team_desc,g.team_industry,function(c){return a=c.data,0==g.team_invite_email.length?(a.member_count=1,b.teams.push(a),void e.path("/teams/"+a.team_id)):void wt.data.team.invite_member(a.team_id,g.team_invite_email,"",[],function(b){a.member_count=1*b.data.length+1},function(){kzi.msg.error("邀请失败，请重新邀请！")},function(){b.teams.push(a),e.path("/teams/"+a.team_id)})},function(a){kzi.msg.error("创建团队失败！")},function(){g.saving=!1,g.js_close()})},c.result.then(null,function(){f()})}]})}}angular.module("wt.service.team",[]).service("teamService",a),a.$inject=["$modal","globalDataContext"]}(),function(){"use strict";function a(a,b,c){this.showAdd=function(){a.open({windowClass:"dialog-w680",templateUrl:"/app/js/service/entity/dialog_task_create.html",controller:["$scope","$modalInstance",function(a,d){function e(){a.projects=b.getPacketProjects(),c.params.pid?(f.new_task.pid=c.params.pid,g()):(f.new_task.pid=a.projects[0].pid,g())}var f=a.vm={new_task:{members:[]}},g=function(){return f.new_task.pid?void wt.data.entry.get_list(f.new_task.pid,!0,function(a){f.entries=a.data.entries,_.isEmpty(f.entries)||(f.new_task.entry_id=f.entries[0].entry_id)}):void(f.entries=[])};f.js_toggle_member=function(a,b,c){b.assigned?(b.assigned=!1,c.members=_.reject(c.members,{uid:b.uid})):(b.assigned=!0,c.members.push(b))},f.change_task_project=function(){f.new_task.entry_id="",f.new_task.members=[],g()},f.create_task=function(a){if(!a.$valid)return a.doValidate();if(!f.saving){f.saving=!0;var e=kzi.helper.split_line(f.new_task.name),g=_.pluck(f.new_task.members,"uid");wt.data.task.batch_add(f.new_task.pid,f.new_task.entry_id,"bottom",e,g,[],"",function(a){b.cache.task.batch_add(a.data);var e=a.data[a.data.length-1];d.close(),c.go("project.task.detail",{pid:e.pid,tid:e.tid})},null,function(){f.saving=!1})}},f.close=function(){d.close()},e()}]})}}angular.module("wt.service.task",[]).service("taskService",a),a.$inject=["$modal","globalDataContext","$state"]}(),function(){"use strict";function a(a,b,c,d,e){this.showAdd=function(){a.open({windowClass:"dialog-w680",templateUrl:"/app/js/service/entity/dialog_file_create.html",controller:["$rootScope","$scope","$modalInstance","$wtUploadFile",function(a,f,g,h){var i=f.vm={new_file:{pid:""}};f.projects=b.getPacketProjects(),c.params.pid?i.new_file.pid=c.params.pid:i.new_file.pid=f.projects[0].pid,i.file_select=function(a){if(!(a.length<=0))if(i.new_file.original=a[0],i.new_file.original.type.indexOf("image")>=0){var b=new FileReader;b.onload=function(a){d(function(){i.new_file.src=a.target.result})},b.readAsDataURL(i.new_file.original)}else{var c=i.new_file.original.name,f=c.substr(c.lastIndexOf(".")+1);i.new_file.src=e("fileThumbSrcByExt")(f)}},i.js_upload_file=function(){if(i.new_file.original){if(!i.new_file.pid)return void kzi.msg.info("请选择所属项目！");i.saving=!0,h.addFiles(i.new_file.pid,[{original:i.new_file.original,data:{target:"prj",type:"project",pid:i.new_file.pid,folder_id:""}}],function(b,d){i.js_close(),d&&d.file&&d.file.fid&&c.go("project.file.detail",{pid:i.new_file.pid,fid:d.file.fid}),a.$broadcast(kzi.constant.event_names.on_uploadfile_add,d)})}},i.close=function(){g.close()}}]})}}angular.module("wt.service.file",[]).service("fileService",a),a.$inject=["$modal","globalDataContext","$state","$timeout","$filter"]}(),function(){"use strict";function a(a,b,c){this.showAdd=function(){a.open({windowClass:"dialog-w680",templateUrl:"/app/js/service/entity/dialog_event_create.html",controller:["$rootScope","$scope","$modalInstance",function(a,d,e){var f=d.vm={new_event:{attendees:[_.clone(a.global.me)]}};d.projects=b.getPacketProjects(),d.repeat_intervals=kzi.constant.event_repeat_intervals,f.new_event.repeat_interval=d.repeat_intervals[0],c.params.pid?f.new_event.pid=c.params.pid:f.new_event.pid=d.projects[0].pid,f.change_event_project=function(){f.new_event.attendees=[_.clone(a.global.me)]},f.js_toggle_member=function(a,b,c){b.setting_toggle_member!==!0&&(b.setting_toggle_member=!0,wt.bus.member.set_event_attendees_toggle(f.new_event.pid,f.new_event,b,function(){},null,function(){b.setting_toggle_member=!1}))},f.js_attendee_all=function(a,b,c,d){wt.bus.member.event_attend_all(f.new_event.pid,f.new_event,b,null,null,d)},f.submit_create_event=function(b){f.saving=!0;var d=_.pluck(f.new_event.attendees,"uid");wt.data.event.add(f.new_event.pid,f.new_event.name,f.new_event.location,d,f.new_event.start_date,f.new_event.start_time,f.new_event.end_date,f.new_event.end_time,f.new_event.repeat_interval.key,function(b){f.close(),a.$broadcast(kzi.constant.event_names.on_event_add,b.data),c.go("project.event.detail",{pid:f.new_event.pid,event_id:b.data[0].event_id},{reload:!0})},function(a){},function(){f.saving=!1})},f.close=function(){e.close()}}]})}}angular.module("wt.service.event",[]).service("eventService",a),a.$inject=["$modal","globalDataContext","$state"]}(),angular.module("wt.service.shortcutKey",[]).service("shortcutKey",["$rootScope","$document","$stateParams","$location","$modal",function(a,b,c,d,e){var f,g=!1,h=this,i=[85,71,83,78,80,84,70],j=function(a){a===kzi.constant.keyASCIIs.T?d.path("/project/"+c.pid+"/task"):a===kzi.constant.keyASCIIs.C?d.path("/project/"+c.pid+"/post"):a===kzi.constant.keyASCIIs.F?d.path("/project/"+c.pid+"/file"):a===kzi.constant.keyASCIIs.D?d.path("/project/"+c.pid+"/page"):a===kzi.constant.keyASCIIs.A?d.path("/project/"+c.pid+"/activity"):a===kzi.constant.keyASCIIs.E?d.path("/project/"+c.pid+"/event"):a===kzi.constant.keyASCIIs.R?d.path("/project/"+c.pid+"/trash"):a===kzi.constant.keyASCIIs.G&&d.path("/project/"+c.pid+"/graph")},k=function(b,c,d,e){if(b===kzi.constant.keyASCIIs.ESC&&a.global.leftmenu_current_expand&&(a.global.leftmenu_current_expand=""),d||c.shiftKey||c.ctrlKey||c.altKey||c.metaKey||!(i.indexOf(b)>=0)){if(a.global.leftmenu_current_expand){var f=[kzi.constant.keyASCIIs.VK_DOWN,kzi.constant.keyASCIIs.VK_UP,kzi.constant.keyASCIIs.ENTER];return void(f.indexOf(b)>=0&&a.$broadcast(kzi.constant.event_names.shortcut_key_select_prjs,{keyCode:b,event:c}))}}else a.$broadcast(kzi.constant.event_names.shortcut_key_left_menu,{keyCode:b,event:c});e||(b===kzi.constant.keyASCIIs.E?a.$broadcast(kzi.constant.event_names.shortcut_key_to_edit):b===kzi.constant.keyASCIIs.ESC&&a.$broadcast(kzi.constant.event_names.shortcut_key_to_cancel),!c.ctrlKey&&!c.altKey&&!c.metaKey&&$.inArray(b,kzi.constant.entry_shortcut_keys)>-1&&a.$broadcast(kzi.constant.event_names.shortcut_key_to_task,b),b!==kzi.constant.keyASCIIs.VK_DOWN||c.metaKey||a.$broadcast(kzi.constant.event_names.scroll_down,b),b===kzi.constant.keyASCIIs.VK_UP&&a.$broadcast(kzi.constant.event_names.scroll_up,b),(b===kzi.constant.keyASCIIs.VK_PAGEDOWN||c.metaKey===!0&&b===kzi.constant.keyASCIIs.VK_DOWN)&&a.$broadcast(kzi.constant.event_names.scroll_page_down),(b===kzi.constant.keyASCIIs.VK_PAGEUP||c.metaKey===!0&&b===kzi.constant.keyASCIIs.VK_UP)&&a.$broadcast(kzi.constant.event_names.scroll_page_up),b===kzi.constant.keyASCIIs.L&&c.ctrlKey===!0&&a.$broadcast(kzi.constant.event_names.page_go_full_screen))};this.showShortcutKeyDialog=function(){return g?void(f&&f.close()):(g=!0,f=e.open({templateUrl:"/app/js/service/shortcutkey/help.html",controller:["$scope","$modalInstance",function(a,b){var d=c.pid;_.isEmpty(d)?a.pid="all":a.pid=d}],size:"lg",resolve:{}}),void f.result.then(function(){g=!1,f=null},function(){g=!1,f=null}))},this.init=function(){b.bind("keydown keypress",function(b){a.$apply(function(){});var d=b.which||b.keyCode,e=b.target||b.srcElement,f=!1;if(d!==kzi.constant.keyASCIIs.VK_SPACE||"keypress"!==b.type)if(null===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||(f=!0),!b.ctrlKey&&!b.altKey&&!b.metaKey&&b.shiftKey&&$.inArray(d,kzi.constant.shift_cutover_keys)>-1){if(f||_.isEmpty(c.pid)||g)return;j(d,b)}else if($.inArray(d,kzi.constant.global_shortcut_keys)>-1||$.inArray(d,kzi.constant.entry_shortcut_keys)>-1){if(d!==kzi.constant.keyASCIIs.ESC&&f&&!e.getAttributeNode("trigger-keydown"))return;if(d===kzi.constant.keyASCIIs.ESC&&b.preventDefault(),(d===kzi.constant.keyASCIIs.QuestionMark||d===kzi.constant.keyASCIIs.Slash)&&h.showShortcutKeyDialog(),g)return;var i=!1,l=[".fancybox-wrap:visible",".ui-select-dropdown:visible",".popbox:visible",".dropdown-menu:visible"];_.forEach(l,function(a){$(a).length>0&&(i=!0)}),k(d,b,f,i)}})}}]),function(){"use strict";function a(a,b){this.show=function(){var b=a.open({backdrop:"static",windowClass:"dialog-w1000",template:'<span style="position:absolute;top:-12px;right:-12px;width:21px;height:21px;border-radius:100%;background:#2e2d2b;"><i id="upgrade_wizard_btn" class="wtfont wtf-close" ng-click="js_close()" style="margin-left: 4px;font-size: 14px;color: #fff;cursor: pointer;"></i></span><iframe src="/upgrade/wizard" width="1000" height="600" frameborder="0" scrolling="false" style="margin-bottom:-7px;"></iframe>',controller:["$scope","$rootScope","$location",function(a,c,d){a.js_close=function(){b.close()}}]})}}angular.module("wt.service.upgrade",[]).service("upgradeService",a),a.$inject=["$modal","globalDataContext"]}(),function(){"use strict";angular.module("wt.directive",[]).directive("wtFocus",["$timeout","$parse",function(a,b){return{restrict:"A",link:function(c,d,e,f){e.wtFocus?(c.$watch(e.wtFocus,function(b){angular.isDefined(b)&&b===!0&&a(function(){d[0].focus()},450)},!0),d.bind("blur",function(){angular.isDefined(e.wtFocus)&&a(function(){_.isUndefined(b(e.wtFocus).assign)||b(e.wtFocus).assign(c,!1)},200)})):a(function(){d[0].focus()},200)}}}]).directive("wtClickSelect",[function(){return{restrict:"A",link:function(a,b,c,d){b.bind("click",function(){b.select()})}}}]).directive("wtAutoClickSelect",["$timeout",function(a){return{restrict:"A",link:function(b,c,d,e){c.bind("click",function(){c.select()}),a(function(){c.trigger("click")},200)}}}]).directive("wtShowEdit",["$timeout","$parse",function(a,b){return{restrict:"A",link:function(c,d,e,f){c.$watch(e.wtShowEdit,function(f,g){if(!_.isUndefined(f))if(f===!0){a(function(){$(d).find(":text,textarea").eq(0).focus()},50);var h=b(e.wtShowEdit);h.assign;d.bind("mousedown.wtShowEdit",function(a){a.stopPropagation()}),a(function(){$(document).bind("mousedown.wtShowEdit",function(a){b(e.wtShowEdit).assign(c,!1),c.$$phase||c.$apply()})},50)}else f===!1&&(d.unbind("click.wtShowEdit"),$(document).unbind("click.wtShowEdit"))})}}}]).directive("wtRepeatPassword",[function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=b.inheritedData("$formController")[c.wtRepeatPassword];d.$parsers.push(function(a){return a===e.$viewValue?(d.$setValidity("repeat",!0),a):void d.$setValidity("repeat",!1)}),e.$parsers.push(function(a){return d.$setValidity("repeat",a===d.$viewValue),a})}}}]).directive("wtMultipleEmail",[function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){var b=/^([a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*;?)+$/i.test(a);return d.$setValidity("multipleEmail",b),a})}}}]).directive("wtRegex",[function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=new RegExp(c.wtRegex);d.$parsers.push(function(a){return d.$setValidity("regex",e.test(a)),a})}}}]).directive("wtRemoteUniqueCheck",["$timeout","$http",function(a,b){return{restrict:"A",require:["ngModel","^w5cFormValidate"],link:function(c,d,e,f){var g=f[0],h=f[1],i=function(){var a=c.$eval(e.wtRemoteUniqueCheck),d=a.url,f=a.isExists;b.get(d).success(function(a,b,c,d){200===a.code?f===!1?g.$setValidity("w5cuniquecheck",a.data):g.$setValidity("w5cuniquecheck",!a.data):g.$setValidity("w5cuniquecheck",!1),h.doValidate?h.doValidate():""})};c.$watch(e.ngModel,function(a){_.isEmpty(a)||c[d[0].form.name][d[0].name].$dirty||i()}),d.bind("blur",function(){a(function(){c[d[0].form.name][d[0].name].$invalid||i()})}),d.bind("focus",function(){a(function(){g.$setValidity("w5cuniquecheck",!0)})})}}}]).directive("wtDatepicker",["$parse",function(a){return{restrict:"A",link:function(b,c,d){c.addClass("wtdate");var e=a(d.select);c.datepicker({defaultDate:d.wtDatepicker,firstDay:0,prevText:"上月",nextText:"下月",onSelect:function(a){b.$apply(function(){b.$eval(d.wtDatepicker+'="'+a+'"',b),_.isFunction(e)&&e(b)})}}),b.$watch(d.wtDatepicker,function(a){c.datepicker("setDate",a)})}}}]).directive("wtFullDatepicker",["$parse","$popbox",function(a,b){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/datepicker.html",link:function(b,c,d){var e=b.vm={},f=b.$eval(d.defaultDate),g=c.find(".wtdate"),h=a(d.setDate),i=b.$eval(d.minDate);e.js_set_date_inner=function(a){var c=null;switch(a){case"today":c=moment().format("YYYY-MM-DD");break;case"tomorrow":c=moment().add(1,"days").format("YYYY-MM-DD");break;case"week":c=moment().endOf("week").add(1,"days").format("YYYY-MM-DD");break;case"next_week":c=moment().add(7,"days").endOf("week").add(1,"days").format("YYYY-MM-DD");break;case"month":c=moment().endOf("month").format("YYYY-MM-DD");break;default:c=moment().format("YYYY-MM-DD")}_.isFunction(h)&&h(b,{date:c})};var j={defaultDate:f,firstDay:0,nextText:"下月",prevText:"上月",onSelect:function(a){b.$apply(function(){_.isFunction(h)&&h(b,{date:a})})}};i&&(j.minDate=i),g.datepicker(j),b.$watch(d.defaultDate,function(a){g.datepicker("setDate",a)})}}}]).directive("wtPopFullDatepicker",["$parse","$popbox",function(a,b){return{restrict:"A",replace:!0,link:function(a,c,d){c.bind("click",function(c){b.popbox({target:c,templateUrl:"/tpl/directive/pop_datepicker.html",controller:["$scope","popbox",function(b,c){var e=a.$eval(d.wtPopFullDatepicker);b.popbox=c,b.default_date=e.default_date,b.min_date=e.min_date,b.js_set_date=function(a){e.set_date(a),c.close()},b.js_close=function(){c.close()}}]}).open()})}}}]).directive("wtInclude",["$compile","$http","$templateCache",function(a,b,c){return{restrict:"ECA",compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"";e.autoscroll;return function(d,e){var h,i=0,j=function(){h&&(h.$destroy(),h=null),e.html("")};d.$watch(f,function(f){if($("#"+f).length<=0)return void e.html('<span class="tpl_none">此模板'+f+"还未实现，请耐心等待...</span>");var k=++i;f?b.get(f,{cache:c}).success(function(b){k===i&&(h&&h.$destroy(),h=d.$new(),e.html(b),a(e.contents())(h),h.$emit("$includeContentLoaded"),d.$eval(g))}).error(function(){k===i&&j()}):j()})}}}}]).directive("draggable",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.draggable,function(a){_.isEmpty(a)||b.draggable(a)})}}}]).directive("droppable",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.droppable,function(a,c){_.isEmpty(a)||b.droppable(a)})}}}]).directive("sortable",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.sortable,function(a,c){null==a?b.sortable({disabled:!0}):b.sortable(a)})}}}]).directive("wtLoadingDone",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.wtLoadingDone,function(a){a===!0?b.css("display","none"):b.css("display","block")})}}}]).directive("wtTitle",[function(){return{link:function(a,b,c){var d=a.$eval(c.wtTitle);b.attr("title",d)}}}]).directive("wtGoTo",["$location",function(a){return{restrict:"A",link:function(b,c,d){c.bind("click",function(c){a.path(d.wtGoTo),b.$$phase||b.$apply()})}}}]).directive("wtEnter",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.wtEnter);c.bind("keypress",function(a){var c=a.which||a.keyCode;void 0!==d.wtEnterNotShift&&a.shiftKey||13===c&&(b.$apply(function(){e(b,{$event:a})}),a.preventDefault())})}}}]).directive("wtUpDownEnter",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.wtUpDownEnter);c.bind("keydown",function(a){var c=a.which||a.keyCode;(38===c||40===c)&&(b.$apply(function(){e(b,{$event:a,keyCode:c})}),a.preventDefault())}),c.bind("keypress",function(a){var c=a.which||a.keyCode;13===c&&(b.$apply(function(){e(b,{$event:a,keyCode:c})}),a.preventDefault())})}}}]).directive("wtCtrlEnter",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.wtCtrlEnter);c.bind("keydown keypress",function(a){var c=a.which||a.keyCode;(a.ctrlKey||a.metaKey)&&13===c&&(b.$apply(function(){e(b,{$event:a})}),a.preventDefault())})}}}]).directive("wtShiftCutover",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.wtShiftCutover);c.bind("keydown keypress",function(a){var c=a.which||a.keyCode,d=a.target||a.srcElement;(null===d||"INPUT"!==d.nodeName&&"TEXTAREA"!==d.nodeName)&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.shiftKey&&$.inArray(c,kzi.constant.shift_cutover_keys)>-1&&b.$apply(function(){e(b,{$event:a,$keyCode:c})})})}}}]).directive("wtClick",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.wtClick);c.bind("click",function(a){b.$$phase?e(b,{$event:a}):b.$apply(function(){e(b,{$event:a})})})}}}]).directive("wtShortcutKey",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.wtShortcutKey);c.bind("keydown keypress",function(a){var c=a.which||a.keyCode;if((c!==kzi.constant.keyASCIIs.VK_SPACE||"keypress"!==a.type)&&($.inArray(c,kzi.constant.global_shortcut_keys)>-1||$.inArray(c,kzi.constant.entry_shortcut_keys)>-1)){if(c!==kzi.constant.keyASCIIs.ESC){var d=a.target||a.srcElement;if(null!==d&&!d.getAttributeNode("trigger-keydown")&&("INPUT"===d.nodeName||"TEXTAREA"===d.nodeName))return}c===kzi.constant.keyASCIIs.ESC&&a.preventDefault(),b.$apply(function(){e(b,{$keyCode:c,event:a})})}})}}}]).directive("wtLoadingStatus",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.wtLoadingStatus,function(b,d){b===!0?c.button("loading"):b===!1&&a(function(){c.button("reset")})})}}}]).directive("wtDisableDrag",[function(){return{restrict:"A",link:function(a,b,c){c.wtDisableDrag?a.$watch(c.wtDisableDrag,function(a,c){a?b.on("dragstart.js_disable",function(a){return a.preventDefault(),!1}):b.unbind("dragstart.js_disable")}):b.on("dragstart.js_disable mousedown.sortable",function(a){return a.preventDefault(),a.stopPropagation(),!1})}}}]).directive("wtSidebarToggle",["$timeout","$parse","$window","$rootScope",function(a,b,c,d){return{restrict:"A",link:function(a,b,c){var e=a.dm={$sidebar:$(".layout_right_sidebar"),$center:$(".layout_content_main"),$sidebarWidth:253,duration:150,sidebarFoldWidth:86,skipWatchFirstInit:!0,init_status:a.$eval(c.wtSidebarToggle),width:a.$eval(c.width)},f=function(a,b){return a?void("members"===a?e.skipWatchFirstInit?(e.$sidebar.width(e.sidebarFoldWidth),e.$center.css("marginRight",e.sidebarFoldWidth+1),d.$broadcast("sidebarToggleSuccess")):(e.$sidebar.animate({width:e.sidebarFoldWidth},e.duration),e.$center.animate({"margin-right":e.sidebarFoldWidth+1},e.duration,null,function(){d.$broadcast("sidebarToggleSuccess"),$("#calendar").fullCalendar("render")})):(e.$sidebar.animate({width:e.width?e.width:e.$sidebarWidth},e.duration),e.$center.animate({"margin-right":e.width?e.width:e.$sidebarWidth},e.duration,null,function(){$("#calendar").fullCalendar("render"),d.$broadcast("sidebarToggleSuccess",{collapse:!1})}))):(e.$sidebar.width(0),e.$center.css("marginRight",0),void d.$broadcast("sidebarToggleSuccess"))};f(e.init_status),a.$watch(c.wtSidebarToggle,function(a,b){return e.skipWatchFirstInit?void(e.skipWatchFirstInit=!1):void f(a,b)})}}}]).directive("wtStopPropagation",[function(){return{restrict:"A",link:function(a,b,c){var d=c.wtStopPropagation;_.isEmpty(d)&&(d="mousedown"),b.bind(d,function(a){a.stopPropagation()})}}}]).directive("wtFocusEvent",["$timeout","$parse",function(a,b){return{restrict:"A",link:function(a,c,d,e){var f=b(d.wtFocusEvent);c.bind("focus",function(b){a.$$phase?f(a,{$event:b}):a.$apply(function(){f(a,{$event:b})})})}}}]).directive("wtPagination",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.wtPagination,function(c){_.isEmpty(c)||b.pagination(c.totalCount,{current_page:0,items_per_page:kzi.config.default_count,num_display_entries:10,callback:function(b){a.$apply(function(){c.opts.callback(b)})},load_first_page:!1,prev_text:"上一页",next_text:"下一页"})})}}}]).directive("ngBindHtmlUnsafe",["$sce","sanitize",function(a,b){return{restrict:"A",scope:{ngBindHtmlUnsafe:"="},template:'<span ng-bind-html="trustedHtml"></span>',link:function(c,d,e,f){c.updateView=function(){if(!_.isUndefined(c.ngBindHtmlUnsafe)){var d=b(c.ngBindHtmlUnsafe);c.trustedHtml=a.trustAsHtml(d)}},c.$watch("ngBindHtmlUnsafe",function(a,b){c.updateView(a)})}}}]).directive("wtAutofocus",["$timeout",function(a){return{restrict:"A",link:function(b,c,d,e){var f=d||{},g=200;f.wtAutofocusTime&&(g=f.wtAutofocusTime),f.wtAutofocusEnable&&b.$eval(f.wtAutofocusEnable)!==!0||a(function(){c[0].focus()},g)}}}]).directive("repeatDone",[function(){return{restrict:"A",link:function(a,b,c){a.$last&&a.$eval(c.repeatDone)}}}]).directive("wtTrack",[function(){return{restrict:"A",link:function(a,b,c){window._hmt&&b.bind("click",function(){if(window._hmt&&c.wtTrack){var a=c.wtTrack.split("|");if(a.length<2)return;window._hmt.push(["_trackEvent",a[0],a[1],a.length>2?a[2]:null,a.length>3?a[3]:null])}})}}}]).directive("wtScrollFoucs",["$parse","$timeout",function(a,b){return{restrict:"A",link:function(a,c,d){c.bind("click",function(){b(function(){c.parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",d.wtScrollFoucs)},100)})}}}]).directive("wtValidatorName",[function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$name=a.$eval(c.wtValidatorName),b.attr("name",a.$eval(c.wtValidatorName));var e=b.controller("form")||{$addControl:angular.noop};e.$addControl(d)}}}])}(),function(){"use strict";function a(a,b,c){return{restrict:"E",replace:!0,templateUrl:"/ycjs/directive/avatar/avatar.html",link:function(d,e,f){var g=function(g){var h=40;f.notInScroll&&e.removeClass("wt-scroll-update-trigger"),angular.isDefined(f.size)&&(h=parseInt(f.size,10)),e.addClass("avatar-"+h),45>h&&(h=40),h>=45&&(h=80),h>=100&&(h=180),angular.isDefined(f.avatar)&&(g.avatar=d.$eval(f.avatar)),e.attr("title",g.display_name),e.attr("member-id",g.uid);var i=e.children(".avatar-face");if(angular.isDefined(f.faceclass)&&i.addClass(f.faceclass),i.empty(),e.find("br").remove(),e.find(".avatar-name").remove(),e.find(".avatar-atname").remove(),e.find(".avatar-role").remove(),e.find(".avatar-append").remove(),"default_avatar.png"===g.avatar||_.isEmpty(g.avatar)){var j=g.display_name.substring(0,1).toLocaleUpperCase();i.append('<span class="avatar-text">'+j+"</span>")}else{var k=kzi.config.default_avatar;if(g.avatar){var l=h;c.isRetina&&(l=40==h?80:180),k=kzi.config.wtavatar_url+l+"/"+g.avatar}i.append('<img src="'+k+'" alt="'+g.display_name+'"/>')}if(angular.isDefined(f.status)||angular.isDefined(f.role)){var m=g.role?g.role:2,n="",o="",p=f.isTeam?"管理员":"负责人";if(1==m||3==m){var q="";1==m?(o=p,q="member-admin"):2==m?(o="成员",q="member-user"):3==m&&(o="访客",q="member-guest")}g.online==kzi.constant.state.online&&(n="online",o+="(在线)"),g.online==kzi.constant.state.leave&&(n="leave",o+="(离开)"),g.online==kzi.constant.state.offline&&(n="offline",o+="(离线)"),1==m?i.append('<i class="icon-user '+n+" "+q+'" title="'+o+'"></i>'):i.append('<i class="status-point '+n+'" title="'+o+'"></i>')}if(angular.isDefined(f.href)&&""!==f.href?e.attr("href",f.href):e.attr("href","javascript:;"),angular.isDefined(f.namebr)&&i.after("<br/>"),angular.isDefined(f.name)){var r=g.display_name;if("true"!==f.name&&(r=d.$eval(f.name)),e.append('<span class="avatar-name">'+b(r)+"</span>"),angular.isDefined(f.nameclass)){var s=e.find(".avatar-name");s.addClass(f.nameclass)}}if(angular.isDefined(f.atname)&&e.append('<span class="avatar-atname">('+g.name+")</span>"),angular.isDefined(f.append)&&e.append('<span class="avatar-append">'+f.append+"</span>"),e.unbind("dragstart.wt-avatar"),angular.isDefined(f.drag)){var t=d.$eval(f.drag);_.isEmpty(t)?e.bind("dragstart.wt-avatar",function(a){return a.preventDefault(),!1}):e.draggable(t)}else e.bind("dragstart.wt-avatar",function(a){return a.preventDefault(),!1});if(e.unbind("click.wt-avatar"),angular.isDefined(f.click)){var u=a(f.click);e.bind("click.wt-avatar",function(a){d.$apply(function(){u(d,{$event:a})})})}};if(d.$watch(f.member,function(a,b){_.isUndefined(a)||_.isNull(a)||_.isEqual(a,b)||g(a)},!0),!_.isUndefined(f.member)){var h=d.$eval(f.member);if(_.isUndefined(h)||_.isNull(h))return;g(h)}}}}angular.module("wt.directive.avatar",[]).directive("wtAvatar",a),a.$inject=["$parse","sanitize","$wtRetina"]}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"/ycjs/directive/notice_panel/notice_panel.html",scope:{checklist:"=",onsave:"&",oncancel:"&"},link:function(a,b,c){function d(){}var e=(a.$parent,a.vm={check_list:a.checklist});e.js_toggle_checkbox_item=function(a){switch(a){case"task":e.check_list.is_check_task=1*!e.check_list.is_check_task;break;case"at":e.check_list.is_check_at=1*!e.check_list.is_check_at;break;case"calendar":e.check_list.is_check_calendar=1*!e.check_list.is_check_calendar;break;case"watcher":e.check_list.is_check_watcher=1*!e.check_list.is_check_watcher;break;case"comment":e.check_list.is_check_comment=1*!e.check_list.is_check_comment;break;case"other":e.check_list.is_check_other=1*!e.check_list.is_check_other}},e.js_save=function(){a.onsave()},e.js_cancel=function(){a.oncancel()},d()}}}angular.module("wt.directive.notice_panel",[]).directive("wtNoticePanel",a),a.$inject=[]}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/task.html",link:function(a,b,c){a.dm={showProject:"true"===c.showProject?!0:!1,viewType:"item"===c.viewType?"item":"card",disableCheckbox:c.disableCheckbox||!1};_.isEmpty(c.hideAction)||(a.hide_action=!!c.hideAction)}}}function b(a){return{restrict:"E",templateUrl:"/tpl/directive/task_composer.html",replace:!0,scope:{vmEntry:"=entry",vmNewTask:"=newTask",vmPosition:"@position",vmSave:"&save",vmCancel:"&cancel",vmShowMore:"&showMore"},link:function(b,c,d){var e=b.vm={entry:b.vmEntry,new_task:b.vmNewTask,position:b.vmPosition,save:b.vmSave,cancel:b.vmCancel,show_more:b.vmShowMore},f=function(){$(document).bind("mousedown.wtTaskComposer",function(a){$(a.target).hasClass("entry-task-composer")||$(a.target).parents(".entry-task-composer").length>0||$(a.target).hasClass("popbox-avatar")||$(a.target).parents(".popbox-avatar").length>0||b.$apply(function(){e.parse_cancel(null)})})};e.focus_textarea=function(a){var b=null;b=$(a.target).hasClass("composer-body-focus")?$(a.target):$(a.target).parents(".composer-body-focus").eq(0),
b.find("textarea").focus()},e.parse_save=function(a,b){e.save({$event:a,new_task:b,entry:e.entry,isTop:"top"===e.position})},e.parse_cancel=function(a,b){e.cancel({$event:a,entry:e.entry,new_task:b})},e.parse_show_task_menu=function(a,b,c){e.show_more({$event:a,entry:e.entry,new_task:c})},f(),a(function(){var b=c.parents(".entry").eq(0).find(".mCSB_container"),d=c.parents(".entry").eq(0).find(".mCSB_dragger");"top"===e.position?(b.css("top",0),d.css("top",0),a(function(){c.find("textarea")[0].focus()},10)):(b.css("top","-"+Math.abs(b.parent().height()-b.outerHeight(!1))+"px"),d.css("top",d.parent().height()-d.height()+"px"),a(function(){c.find("textarea")[0].focus()},10))},50)}}}function c(){return{restrict:"A",link:function(a,b,c){var d=0;b.bind("mousedown",function(a){if(a=a||window.event,2!==a.button&&!($(a.target).parents(".entry").length>0||$(a.target).parents(".entry-new").length>0)){var b=a.pageX,c=$(".entries_panel_sortarea").parents(".mCustomScrollbar").find(".mCSB_container")[0].offsetLeft;c||(c=0),$(document.body).css("cursor","-moz-grabbing"),$(document.body).css("cursor","-webkit-grabbing"),$(document.body).css("cursor","grabbing"),$(document).bind("selectstart.wtMousedownMove",function(){return!1}),$(document).bind("mousemove.wtMousedownMove",function(a){d=b-a.pageX,d=0>=d?"+="+d.toString().substring(1):"-="+d,$(".entries_panel_sortarea").parents(".mCustomScrollbar").mCustomScrollbar("scrollTo",d,{scrollInertia:0,callbacks:!1})})}}),$(document).bind("mouseup",function(){$(this).unbind("mousemove.wtMousedownMove"),$(this).unbind("selectstart.wtMousedownMove"),$(document.body).css("cursor","")})}}}function d(){return{restrict:"E",scope:{task:"=",success:"&",back:"&back",close:"&close"},templateUrl:"/ycjs/directive/task/pop_set_expire_date.html",link:function(a,b,c){a.has_back=c.back,a.has_close=c.close,a.js_set_expire_date=function(b){var c=null;switch(b){case"today":c=moment().format("YYYY-MM-DD");break;case"tomorrow":c=moment().add(1,"days").format("YYYY-MM-DD");break;case"week":c=moment().endOf("week").add(1,"days").format("YYYY-MM-DD");break;case"next_week":c=moment().add(7,"days").endOf("week").add(1,"days").format("YYYY-MM-DD");break;case"month":c=moment().endOf("month").format("YYYY-MM-DD")}a.task.tid||(c&&(a.expire_date=c),a.task.expire_date=a.expire_date,a.success({expire_date:a.expire_date}))},a.js_set_expire=function(){a.task.tid&&wt.data.task.set_expire(a.task.pid,a.task.tid,a.expire_date,function(b){a.task.expire_date=a.expire_date,a.success({expire_date:a.expire_date})})},a.js_cancel_expire=function(){a.task.pid&&wt.data.task.set_expire(a.task.pid,a.task.tid,0,function(b){a.success({expire_date:0})})}}}}angular.module("wt.directive.task",[]).directive("wtTask",a).directive("wtTaskComposer",b).directive("wtMousedownMove",c).directive("wtSetTaskExpireDate",d),a.$inject=[],b.$inject=["$timeout"],c.$inject=[],d.$inject=[]}(),function(){"use strict";function a(a,b){return{restrict:"A",scope:{pid:"=",success:"&popNewTasks",addEntry:"&"},link:function(c,d,e){d.bind("click",function(d){b.popbox({target:d,templateUrl:"/ycjs/directive/task/pop_add_task.html",controller:["$scope","popbox",function(b,d){b.popbox=d,b.new_task={expire_date:0},b.isAddEntry=!!e.addEntry,b.hasExpireDate=e.expireDate,b.step=0,b.hasExpireDate&&(b.new_task.expire_date=moment().format("YYYY-MM-DD")),a.loadEntries(c.pid,function(a){b.entries=a,_.isEmpty(b.entries)||(b.new_task.entry=b.entries[0])}),b.js_to_add_entry_pop=function(){b.js_close(),c.addEntry()},b.js_add_task=function(d,e){if(!b.saving&&!_.isEmpty(e.name)){if(b.saving=!0,_.isEmpty(e.expire_date))var f=null;else var f=moment(e.expire_date).endOf("day").valueOf();var g=kzi.helper.split_line(e.name);wt.data.task.batch_add(c.pid,e.entry.entry_id,"bottom",g,[],[],f,function(d){if(200===d.code){a.cache.task.batch_add(d.data);d.data[d.data.length-1];c.success({tasks:d.data}),b.js_close()}},null,function(){b.saving=!1})}},b.js_close=function(){d.close()},b.js_step=function(a){b.step=a}}]}).open()})}}}angular.module("wt.directive.task").directive("popNewTasks",a),a.$inject=["globalDataContext","$popbox"]}(),function(){"use strict";function a(a){return{restrict:"E",replace:!0,templateUrl:"/ycjs/directive/task/add_timingtask.html",scope:{vmBack:"&back",vmIsBack:"=isback",vmClose:"&close",vmEntries:"=entries",vmTask:"=task"},link:function(b,c,d){var e=b.vm={parse_back:b.vmBack,parse_close:b.vmClose,entries:b.vmEntries,task:b.vmTask,isBack:void 0===b.vmIsBack?!0:b.vmIsBack,timingtask:{name:"循环创建任务 "+b.vmTask.name}};e.js_timingtask_add=function(b){e.timingtask.recurrence=parseInt(e.timingtask.recurrence),e.timingtask.tid=e.task.tid,wt.data.timingtask.add_timingtask(e.task.pid,e.timingtask,function(b){kzi.msg.info("循环任务添加成功"),a.$broadcast(kzi.constant.event_names.show_project_setting_timingtask),e.parse_close()})}}}}angular.module("wt.directive.task").directive("wtAddTimingtask",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(a,b,c){return{restrict:"E",replace:!0,templateUrl:"/ycjs/directive/badges/badges.html",scope:{task:"="},link:function(c,d,e){function f(a){g(a),h(a),i(a),k(a),j(a),n.taskShowLabels&&l(a),n.taskShowProject&&m(a)}function g(c){0!==c.expire_date&&(n.timeText=b(c.expire_date),new Date(c.expire_date).getFullYear()!==(new Date).getFullYear()&&(n.timeText=a(c.expire_date)),n.timeClass="",n.timeTitle="",n.timeExpire=o(c),n.timeTitle="截止时间："+n.timeText,1===n.timeExpire&&(n.timeClass="badge-expire-due",n.timeTitle="任务已经过期"),2===n.timeExpire&&(n.timeClass="badge-expire-soon",n.timeTitle="任务即将截止"))}function h(a){a.badges.todo_count>0?(n.todoText=a.badges.todo_checked_count+"/"+a.badges.todo_count,n.todoClass="",a.badges.todo_checked_count===a.badges.todo_count&&(n.todoClass=" badge-todo-done"),n.todoTitle="",a.badges.todo_checked_count===a.badges.todo_count?n.todoTitle=a.badges.todo_checked_count+"个检查项已全部完成":n.todoTitle="检查项："+a.badges.todo_checked_count+"/"+a.badges.todo_count):(n.todoText=null,n.todoClass=null)}function i(a){a.badges.comment_count>0?(n.commentText=a.badges.comment_count,n.commentTitle="任务有"+a.badges.comment_count+"个评论"):(n.commentText=null,n.commentTitle=null)}function j(a){a.desc&&a.desc.length>0&&(n.descTitle="任务有描述")}function k(a){if(a.files&&a.files.length>0||a.badges.file_count>0){var b=a.badges.file_count>0?a.badges.file_count:a.files.length;n.fileTitle="任务有"+b+"个附件",n.fileCount=b}else n.fileTitle=null,n.fileCount=null}function l(a){}function m(a){n.taskShowProject&&(n.projectName=a.project.name,n.projectIcon=a.project.pic)}var n=c.vm={taskShowLabels:"true"===e.showLabels?!0:!1,taskShowProject:"true"===e.showProject?!0:!1,task:{}};c.$watch(e.task,function(a,b){_.isUndefined(a)||_.isNull(a)||_.isEqual(a,{})||_.isUndefined(a.badges)||_.isNull(a.badges)||(n.taskShowLabels="true"===e.showLabels?!0:!1,n.taskShowProject="true"===e.showProject?!0:!1,f(a),n.task=a)},!0);var o=function(a){var b=0;if(a.completed)b=0;else{var c=moment().valueOf(),d=1e3*moment(a.expire_date).format("X");b=c>d?1:d>c&&d<moment().add(1,"days").valueOf()?2:0}return b}}}}angular.module("wt.directive.badges",[]).directive("wtBadges",a),a.$inject=["longTimeFormatFilter","shortTimeFormatFilter","$rootScope"]}(),function(){"use strict";function a(a){return{restrict:"E",replace:!0,scope:{vmFile:"=file",vmDelPermission:"=delPermission",vmDel:"&del",vmGofile:"&gofile"},templateUrl:"/ycjs/directive/attachment/attachment.html",link:function(a,b,c){var d=a.vm={file:a.vmFile,del_permission:a.vmDelPermission,parse_del:a.vmDel,parse_gofile:a.vmGofile,has_del:!1};if(!_.isEmpty(c.fancygroup)){var e=b.children(".file-picfile").eq(0);e.data("fancybox-group",c.fancygroup),e.attr("data-fancybox-group",c.fancygroup)}void 0!==c.del&&(d.has_del=!0,void 0===c.delPermission||d.del_permission||(d.has_del=!1))}}}angular.module("wt.directive.attachment",[]).directive("wtAttachment",a),a.$inject=["$parse"]}(),function(){function a(){return{restrict:"E",controller:"wtNoticeCtrl",replace:!0,scope:!0,templateUrl:"/ycjs/directive/notice/notice_list.html",link:function(a,b,c,d){}}}function b(a,b,c,d){var e=a.vm={part_first_loading_done:!1,part_loading_done:!1,read_notices:[],unread_notices:[],pending_notices:[],tab:"unread",accordion_justone:!0,accordion_firstopen:!0,since_id:0,type:"all",temp_global_title:b.global.title},f=function(){e.part_loading_done=!1,wt.data.notice.get_list(e.type,e.since_id,kzi.config.default_count,1,function(a){_.isEmpty(a.data)||(e.since_id=a.data[a.data.length-1].published,_.isEmpty(e.read_notices)?e.read_notices=a.data:e.read_notices=e.read_notices.concat(a.data)),a.data.length<kzi.config.default_count&&(e.has_no_more=!0)},null,function(){e.part_loading_done=!0,e.part_first_loading_done=!0})},g=function(a){e.part_loading_done=!1,wt.data.notice.get_list("all",0,"all",0,function(a){e.unread_notices=a.data,d.changeUnreadCount(e.unread_notices.length)},null,function(){e.part_loading_done=!0,e.part_first_loading_done=!0})},h=function(){return _.isEmpty(e.pending_notices)?(e.part_loading_done=!1,void wt.data.notice.get_pending_list(function(a){e.pending_notices=a.data},null,function(){e.part_loading_done=!0,e.part_first_loading_done=!0})):void(e.pending_notices=_.reject(e.pending_notices,function(a){return!a.is_pending}))};e.setType=function(a){e.type=a,e.since_id=0,e.read_notices=[],f()},e.js_load_more_notice=function(){f()},e.js_switch_tab=function(a){a!==e.tab&&(e.tab=a,"unread"===e.tab?_.isEmpty(e.unread_notices)||(e.unread_notices=_.reject(e.unread_notices,function(a){return 1===a.is_read})):"read"===e.tab?0===e.since_id&&f():"pending"===e.tab&&h())},a.$on("wtInboxTriggerSuccess",function(b,d){d?g():c(function(){e.tab="",e.unread_notices=[],e.read_notices=[],e.has_no_more=!1,e.pending_notices=[],e.since_id=0,a.js_switch_tab("unread")})});var i=function(){g()};i(),a.$on(kzi.constant.event_names.notice_new,function(a,b){b.is_pending=0,b.is_read=0,e.unread_notices.unshift(b)}),a.js_show_slide_detail=function(b,c,d){a.js_set_notice_read(null,c)},a.js_toggle_notice_pending=function(a,b){a.stopPropagation();var c=b.is_pending?0:1;wt.data.notice.update_pending(b.nid,c,function(a){var f=_.findWhere(e.unread_notices,{nid:b.nid});f&&(f.is_pending=c,c||(f.is_read=1,d.readNotice(1))),f=_.findWhere(e.read_notices,{nid:b.nid}),f&&(f.is_pending=c),f=_.findWhere(e.pending_notices,{nid:b.nid}),f&&(f.is_pending=c,c||(f.is_read=1)),c&&!_.isEmpty(e.pending_notices)&&e.pending_notices.push(b)})},a.js_handle_all_notice=function(){e.set_allhandleing||(e.set_allhandleing=!0,wt.data.notice.set_allhandle(function(){_.each(e.pending_notices,function(a){var b=_.findWhere(e.unread_notices,{nid:a.nid});b&&(b.is_pending=0,b.is_read||(b.is_read=1,d.readNotice(1))),b=_.findWhere(e.read_notices,{nid:a.nid}),b&&(b.is_pending=0)}),e.pending_notices=[]},null,function(){e.set_allhandleing=!1}))},a.js_set_notice_read=function(a,b){_.isEmpty(a)||a.stopPropagation(),0===b.is_read&&(b.is_read=1,wt.data.notice.set_read(b.nid,function(){_.isEmpty(e.read_notices)||_.findWhere(e.read_notices,{nid:b.nid})||e.read_notices.unshift(b),b.is_read=1,d.readNotice(1)},function(){b.is_read=0,kzi.msg.error("标记消息为已读失败!")}))},a.js_set_all_notice_read=function(){!e.setting_all_notice_read&&e.part_loading_done&&(e.setting_all_notice_read=!0,wt.data.notice.set_allread("all",function(){if(!_.isEmpty(e.unread_notices)){var a=0;_.each(e.unread_notices,function(b){1!==b.is_read&&(b.is_read=1,a++,_.isEmpty(e.read_notices)||_.findWhere(e.read_notices,{nid:b.nid})||e.read_notices.unshift(b))}),e.unread_notices=[],d.readNotice(a)}e.setting_all_notice_read=!1},function(){e.setting_all_notice_read=!1}))}}function c(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"/ycjs/directive/notice/notice_item.html",link:function(e,f,g){var h=a(g.noticeClick),i=e.notice.template;switch(i){case"task_assign":e.action="给你分配了新的任务",e.type_icon=kzi.constant.notice_type_icon.task,e.display_entity=e.notice.data.entity;break;case"task_complete":e.action="完成了任务",e.type_icon=kzi.constant.notice_type_icon.task,e.display_entity=e.notice.data.entity;break;case"event_attend":e.action="邀请你参与日程",e.type_icon=kzi.constant.notice_type_icon.event,e.display_entity=e.notice.data.entity;break;case"task_watch":e.action="提醒你关注任务",e.type_icon=kzi.constant.notice_type_icon.task,e.display_entity=e.notice.data.entity;break;case"file_watch":e.action="提醒你关注文件",e.type_icon=kzi.constant.notice_type_icon.file,e.display_entity=e.notice.data.entity;break;case"post_watch":e.action="提醒你关注话题",e.type_icon=kzi.constant.notice_type_icon.post,e.display_entity=e.notice.data.entity;break;case"page_watch":e.action="提醒你关注文档",e.type_icon=kzi.constant.notice_type_icon.page,e.display_entity=e.notice.data.entity;break;case"task_comment":e.action="评论了任务："+e.notice.data.target.name,e.type_icon=kzi.constant.notice_type_icon.comment,e.display_entity=e.notice.data.entity,e.send_entity=e.notice.data.target;break;case"event_comment":e.action="评论了日程："+e.notice.data.target.name,e.type_icon=kzi.constant.notice_type_icon.comment,e.display_entity=e.notice.data.entity,e.send_entity=e.notice.data.target;break;case"file_comment":e.action="评论了文件："+e.notice.data.target.name,e.type_icon=kzi.constant.notice_type_icon.comment,e.display_entity=e.notice.data.entity,e.send_entity=e.notice.data.target;break;case"post_comment":e.action="评论了话题："+e.notice.data.target.name,e.type_icon=kzi.constant.notice_type_icon.comment,e.display_entity=e.notice.data.entity,e.send_entity=e.notice.data.target;break;case"page_comment":e.action="评论了文档："+e.notice.data.target.name,e.type_icon=kzi.constant.notice_type_icon.comment,e.display_entity=e.notice.data.entity,e.send_entity=e.notice.data.target;break;case"file_version":e.action="上传了文件新版本",e.type_icon=kzi.constant.notice_type_icon.file,e.display_entity=e.notice.data.entity;break;case"page_version":e.action="提交了文档新版本",e.type_icon=kzi.constant.notice_type_icon.page,e.display_entity=e.notice.data.entity;break;case"metion_at_comment":e.action="在评论中提到了你",e.type_icon=kzi.constant.notice_type_icon.comment,e.display_entity=e.notice.data.entity,e.send_entity=e.notice.data.target;break;case"project_archive":e.action="归档了项目",e.type_icon=kzi.constant.notice_type_icon.project,e.display_entity=e.notice.data.entity;break;case"project_delete":e.action="删除了项目",e.type_icon=kzi.constant.notice_type_icon.project,e.display_entity=e.notice.data.entity;break;case"project_member_add":e.action="把你加入了项目",e.type_icon=kzi.constant.notice_type_icon.project,e.display_entity=e.notice.data.entity;break;case"project_member_remove":e.action="把你移出了项目",e.type_icon=kzi.constant.notice_type_icon.project,e.display_entity=e.notice.data.entity;break;case"project_member_admin":e.action="设置你为项目的负责人",e.type_icon=kzi.constant.notice_type_icon.project,e.display_entity=e.notice.data.entity;break;case"add_task_to_entry":e.action="在列表 "+e.notice.data.target.name+" 上添加了任务",e.type_icon=kzi.constant.notice_type_icon.task,e.display_entity=e.notice.data.entity;break;case"move_task_to_entry":e.action="移动任务到了列表 "+e.notice.data.target.name+" 上",e.type_icon=kzi.constant.notice_type_icon.task,e.display_entity=e.notice.data.entity;break;case"team_member_add":e.action="把你加入了团队",e.type_icon=kzi.constant.notice_type_icon.team,e.display_entity=e.notice.data.entity;break;case"team_member_remove":e.action="把你移除了团队",e.type_icon=kzi.constant.notice_type_icon.team,e.display_entity=e.notice.data.entity;break;case"task_remind":e.action="任务即将过期",e.type_icon=kzi.constant.notice_type_icon.task,e.display_entity=e.notice.data.entity;break;case"event_remind":e.action="日程即将开始",e.type_icon=kzi.constant.notice_type_icon.event,e.display_entity=e.notice.data.entity;break;default:e.action=i+"未实现"}e.js_click_notice=function(){d.global.is_scroll_comment=!0;var a=e.type_icon.name,f=e.display_entity;if(_.isEmpty(e.send_entity)||(a=e.send_entity.etype,f=e.send_entity),h(e,{$eType:a,$entity:f}),"team_member_remove"!==e.notice.template&&"project_member_remove"!==e.notice.template){if("project"===a)return void b.path("/project/"+e.notice.filter.prj);if("team"===a)return void b.path("/teams/"+e.notice.filter.team);var g=["task_comment","event_comment","file_comment","page_comment","post_comment","metion_at_comment"];g.indexOf(e.notice.template)>=0?c.openEntity(e.notice.filter.prj,f,e.notice.data.entity.eid):c.openEntity(e.notice.filter.prj,f)}}}}}angular.module("wt.directive.notice",[]).directive("wtNoticeList",a).controller("wtNoticeCtrl",b).directive("wtNoticeItem",c),b.$inject=["$scope","$rootScope","$timeout","globalDataContext"],c.$inject=["$parse","$location","locator","$rootScope"]}(),function(){function a(){return{restrict:"E",replace:!0,scope:!0,controller:"wtSearchPanelCtl",templateUrl:"/ycjs/directive/search/search_panel.html",link:function(a,b,c,d){a.taskIsCollapsed=!1,a.itineraryIsCollapsed=!1}}}function b(a,b,c,d,e,f){a.locator=d;var g=a.vm={mood:"input",last_searched:null,filterTeam:"all",current_tab:"all",teamName:"全部团队",historyIndex:null,qpatternName:"全文匹配",dirty:!1,typing:!1,using_assistant:!1,part_loading_done:!0,team_id:c.team_id||"",keywords:c.keywords||"",qpattern:c.qpattern||"simple",noquery:c.noquery,tokens_re:"",page:1,scopes:"all",data:{},last_month:Date.now()-27648e5,results:{all:{filter_params:{qpattern:"simple",team_id:"all",authored:!1,watching:!1,unarchived:!1,eafter:void 0}},tasks:{filter_params:{qpattern:"simple",team_id:"all",authored:!1,watching:!1,assigned:!1,unarchived:!1,eafter:void 0}},events:{filter_params:{qpattern:"simple",team_id:"all",authored:!1,attend:!1,watching:!1,unarchived:!1,eafter:void 0}},files:{filter_params:{qpattern:"simple",team_id:"all",authored:!1,watching:!1,unarchived:!1,eafter:void 0}},pages:{filter_params:{qpattern:"simple",team_id:"all",authored:!1,watching:!1,unarchived:!1,eafter:void 0}},posts:{filter_params:{qpattern:"simple",team_id:"all",authored:!1,watching:!1,unarchived:!1,eafter:void 0}},mails:{filter_params:{eafter:void 0}}}},h=_.cloneDeep(g.results),i={tasks:"task",events:"event",files:"file",pages:"page",posts:"post",mails:"mail"},j=_(f.teams).filter(function(a){return"-1"!==a.team_id}).map(function(a){return[a.team_id,a.name]}).unshift(["-1","个人项目"]).unshift(["all","全部团队"]).zipObject().value();g.team_id_name_map=j;var k={simple:"全文匹配",complex:"高级匹配",ridiculous:"字母片段"};g.qpattern_id_name_map=k;var l=function(){_.each(g.results,function(a,b){delete a.total,delete a.results})};a.js_revoke_search=function(){a.keywords="",$("#the-search-input").focus()},a.js_blur_input=function(){$("#the-search-input").blur()},a.js_scroll_to=function(a){$("#the-search-result-frame").mCustomScrollbar("scrollTo",a||"top")};var m="search_settings_"+wt.me.uid,n="search_history_"+wt.me.uid,o=function(){var a=kzi.localData.getObject(m)||{};a.team_id&&(g.results.all.filter_params.team_id=a.team_id),a.qpattern&&(g.results.all.filter_params.qpattern=a.qpattern)},p=function(){var a={team_id:g.results.all.filter_params.team_id,qpattern:g.results.all.filter_params.qpattern};kzi.localData.setObject(m,a)},q=function(a){var b;return b=kzi.localData.getObject(n),b&&Array.isArray(b)||(b=[]),b.slice(0,a)},r=function(a){var b=q(),c=b.indexOf(a);return c>=0&&b.splice(c,1),b.unshift(a),b.length>kzi.constant.search.max_history&&(b=b.splice(0,kzi.constant.search.max_history)),kzi.localData.setObject(n,b),q(5)},s=function(a){var b=q(),c=b.indexOf(a);return c>=0&&b.splice(c,1),kzi.localData.setObject(n,b),q(5)},t=function(){return kzi.localData.remove(n),q(5)},u=function(b,c){a.js_blur_input();var d=null,e=null,f=c||1,h={};if(b?e=b:(e="all",f=1),g.part_loading_done&&!(f>50)){if(g.mood="results",g.typing=!1,g.using_assistant=!1,d=wt.data.search[e],"all"!==e?h=_.clone(g.results[b].filter_params):(h=_.clone(g.results.all.filter_params),_.each(g.results,function(a,b){"all"!=b&&(_.each(a.filter_params,function(a,b,c){c[b]=null}),_.merge(a.filter_params,g.results.all.filter_params))})),"all"===h.team_id&&delete h.team_id,"mails"===e&&(h={}),(g.noquery||!g.keywords)&&(h.noquery=!0),h.noquery){var j=_(h).omit(["noquery","team_id","qpattern"]).values().compact().value().length<=0;if(j)return g.js_reset_typing()}g.part_loading_done=!1,d(g.keywords,f,h,function(a){if("all"!==e&&e){var b=g.results[e];b.curPage=a.data.page,b.total=a.data.total,b.results&&1!=f?b.results=b.results.concat(a.data.results):b.results=a.data.results,b.results.length>=b.total?b.has_more=!1:b.has_more=!0,g.current_tab=e}else _.each(a.data.results,function(a,b){var c=g.results[b];c.curPage=f,c.total=a.total,c.results&&1!=f?c.results=c.results.concat(a.data):c.results=a.data,c.results.length>=c.total?c.has_more=!1:c.has_more=!0});g.total=0,g.results.all.results=_(g.results).omit("all").map(function(a,b){var c=i[b];return g.total+=g.results[b].total||0,_.each(g.results[b].results,function(a){a.__type=c}),g.results[b].results}).flatten().compact().sortByOrder(["__score","update_date"],["desc","desc"]).uniq().value()||[],g.results.all.total=g.total,g.results.all.curPage=f,g.results.all.results.length>=g.results.all.total?g.results.all.has_more=!1:g.results.all.has_more=!0,g.tokens_re=_.map(_.filter(a.data.tokens.concat([g.keywords]),function(a){return g.keywords.length>1&&a.length<=1?!1:!0}),function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}).join("|")},null,function(){g.part_loading_done=!0,g.current_tab&&"all"!==e?g.current_tab=e:g.current_tab="all"})}},v=function(){b.global.title="搜索",b.global.loading_done=!0,g.show_mode="input",g.history=q(5),o(),f.loadProjectAbstracts(function(b){a.projects=b})};g.js_drop_history=function(a){g.history=s(a)},g.js_purge_history=function(){g.history=t()},g.js_reset_typing=function(){g.mood="input",g.typing=!1,o()},g.js_select_range=function(b,c){e.popbox({target:b,templateUrl:"/ycjs/directive/search/search_range_pop.html",controller:["$scope","popbox","globalDataContext","pop_data",function(a,b,d,e){a.popbox=b,a.teams=_.pairs(e.teams),a.js_select_team=function(b,d){var f=e.scope.vm;b&&(f.results[f.current_tab||"all"].filter_params.team_id=b),a.js_close(),c?p():u(f.current_tab,1)},a.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{scope:a,teams:j}}}}).open()},g.js_select_pattern=function(b,c){e.popbox({target:b,templateUrl:"/ycjs/directive/search/search_pattern_pop.html",controller:["$scope","popbox","globalDataContext","pop_data",function(a,b,d,e){a.popbox=b,a.patterns=_.pairs(e.patterns),a.solve_current_pattern=function(){var a=e.scope.vm;return a.results[a.current_tab||"all"].filter_params.qpattern},a.js_select_pattern=function(b,d){var f=e.scope.vm;b&&(f.results[f.current_tab||"all"].filter_params.qpattern=b),a.js_close(),c?p():u(f.current_tab,1)},a.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{scope:a,patterns:k}}}}).open()},g.js_trigger_search=function(b){return(b=b||g.keywords)?(g.noquery=!1,g.history=r(b),g.keywords=b,l(),u("all",1),a.js_scroll_to("top"),void p()):g.js_reset_typing()},g.js_load_more=function(){u(g.current_tab,g.results[g.current_tab].curPage+1)},g.js_select_tab=function(b,c){b!==g.current_tab&&(g.current_tab=b,a.js_scroll_to(c))},g.should_tag_lable_hidden=function(a){if(g.current_tab===a)return!1;if(g.noquery&&!g.results[a].total)return!0;var b=_.foldl(g.results[a].filter_params,function(a,b,c){return a||!!b},!1);return 0!==g.results[a].total&&g.results[a].results&&0!==g.results[a].results.length?void 0:b&&g.current_tab===a?!1:!0},g.toggle_filter=function(a,b){var c=g.results[g.current_tab].filter_params;void 0!==c[a]&&(c[a]=!c[a]),g.results[g.current_tab].total=0,g.results[g.current_tab].results=[],u(g.current_tab,1)},g.toggle_filter_value=function(a,b){var c=g.results[g.current_tab].filter_params;void 0===c[a]||null===c[a]?c[a]=b:c[a]=void 0,g.results[g.current_tab].total=0,g.results[g.current_tab].results=[],u(g.current_tab,1)},g.js_to_file_or_dir=function(a){a.type===kzi.constant.file_type.folder?d.toPath("/project/"+a.pid+"/folder/"+a.fid):d.openFile(a.pid,a.fid)},g.js_express_search=function(b){switch(g.results=_.cloneDeep(h),g.noquery=!0,g.keywords="",b){case"_分配给我的":g.results.tasks.filter_params.assigned=!0,u("tasks",1);break;case"_我创建的":_.each(["all","tasks","events","files","pages","posts"],function(a){g.results[a].filter_params.authored=!0}),u("all",1);break;case"_我关注的":_.each(["all","tasks","events","files","pages","posts"],function(a){g.results[a].filter_params.watching=!0}),u("all",1);break;case"_最近修改的":_.each(["all","tasks","events","files","pages","posts"],function(a){g.results[a].filter_params.eafter=g.last_month}),u("all",1);break;default:u("all",1)}a.js_scroll_to("top")},v()}function c(){return{restrict:"E",replace:!0,scope:{entities:"=",projects:"=",highlightRe:"=highlight"},controller:"wtSearchResultListCtl",templateUrl:"/ycjs/directive/search/search_result_list.html"}}function d(a,b){a.locator=b;var c={};a.tmpTitle="",a.solve_entity_icon=function(a){switch(a.__type){case"task":return a.completed?"icon-check-sign":"icon-check-empty";case"event":return"fa fa-calendar-o";case"file":return a.type===kzi.constant.file_type.folder?"fa fa-folder-o":"fa fa-file-o";case"page":return"fa fa-file-text-o";case"post":return"fa fa-comment-o";case"mail":return"fa fa-envelope-o";default:return void 0}},a.open_entity=function(a){switch(a.__type){case"task":b.openTask(a.pid,a.tid);break;case"event":b.openEvent(a.pid,a.event_id);break;case"file":a.type===kzi.constant.file_type.folder?b.toPath("/project/"+a.pid+"/folder/"+a.fid):b.openFile(a.pid,a.fid);break;case"post":b.openPost(a.pid,a.post_id);break;case"page":b.openPage(a.pid,a.page_id);break;case"mail":b.openMail(a.mail_id)}},a.entity_title=function(b){var d="";if(c[b._id])return c[b._id];switch(b.__type){case"event":case"file":case"post":case"page":case"task":d=b.name;break;case"mail":d=b.subject}return a.tmpTitle=d.replace(/</g,"&lt;").replace(/>/g,"&gt;"),d=a.$eval("tmpTitle|reHighlight:highlightRe"),c[b._id]=d,d}}function e(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(){var b=a.innerHeight,e=c.offset().top,f=c.height(),g=e+f,h=null;h=g>=b?f-(g-b):b-g+f;var i=parseInt(d.maxHeightToBottom),j=null;return j=i&&h?h+i:h},function(a,b){a!=b&&a&&c.css("max-height",a.toString()+"px")})}}}function f(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(){var b=a.innerHeight,e=c.offset().top,f=c.height(),g=e+f,h=null;h=0>g||g>=b||f>=b?null:b-g+f;var i=parseInt(d.minHeightToBottom),j=null;return j=i&&h?h+i:h},function(a,b){a!=b&&a>0&&c.css("min-height",a.toString()+"px")})}}}angular.module("wt.directive.search_panel",[]).directive("wtSearchPanel",a).controller("wtSearchPanelCtl",b).directive("wtSearchResultList",c).controller("wtSearchResultListCtl",d).directive("maxHeightToBottom",["$window",e]).directive("minHeightToBottom",["$window",f]),b.$inject=["$scope","$rootScope","$stateParams","locator","$popbox","globalDataContext"],d.$inject=["$scope","locator"]}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"/ycjs/directive/dropwindow/dropwindow.html"}}angular.module("wt.directive.dropwindow",[]).directive("wtDropwindow",a)}(),function(){"use strict";function a(a,b,c,d,e,f){return{restrict:"E",replace:!0,scope:!0,templateUrl:"/ycjs/directive/leftmenu/leftmenu.html",link:function(g,h,i,j){var k=g.vm={$stateParams:d,start_sorting:!1,projects:[],current_team:{}};k.global=e,k.goto_dashboard=function(){a.global.leftmenu_current_expand="",c.go("dashboard.default")},k.goto_search=function(){a.global.leftmenu_current_expand="",c.go("search",{},{reload:!0})},k.expand_item=function(b){return a.global.leftmenu_current_expand===b?void(a.global.leftmenu_current_expand=""):void(a.global.leftmenu_current_expand=b)},k.show_create=function(c){f(function(){a.global.leftmenu_current_expand="create",k.popbox=b.popbox({target:c,templateUrl:"/ycjs/directive/leftmenu/shortcut_create.html",controller:["$scope","popbox","teamService","projectService","taskService","eventService","fileService",function(a,b,c,d,e,f,g){a.popbox=b;var h=a.vm={};h.js_close=function(){b.close()},h.add_team=function(){c.showAdd(),b.close()},h.add_project=function(){d.showAdd(),b.close()},h.add_task=function(){e.showAdd(),b.close()},h.add_file=function(){g.showAdd(),b.close()},h.add_event=function(){f.showAdd(),b.close()}}]}),k.popbox.open().then(function(){k.popbox=null,a.global.leftmenu_current_expand=""},function(){k.popbox=null,a.global.leftmenu_current_expand=""})})},k.js_leftmenu_collapsed=function(b){a.global.leftmenu_current_expand=""},g.js_pop_showhelp=function(a){b.popbox({target:a,templateUrl:"/tpl/dashboard/pop_dashboard_mailhelp.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;a.pm={};a.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{$scope:g}}}}).open()},a.$on("$stateChangeStart",function(b,c,d,e,f){a.global.leftmenu_current_expand=""}),g.$on(kzi.constant.event_names.shortcut_key_left_menu,function(b,d){var e="";switch(d.keyCode){case kzi.constant.keyASCIIs.U:e="me";break;case kzi.constant.keyASCIIs.G:c.go("dashboard.default");break;case kzi.constant.keyASCIIs.S:c.go("search");break;case kzi.constant.keyASCIIs.N:e="notice";break;case kzi.constant.keyASCIIs.P:e="project";break;case kzi.constant.keyASCIIs.T:e="teams";break;case kzi.constant.keyASCIIs.F:k.popbox?k.popbox.close():$("#shortcut_create_btn").click()}a.global.leftmenu_current_expand==e?a.global.leftmenu_current_expand="":a.global.leftmenu_current_expand=e})}}}function b(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,scope:!0,templateUrl:"/ycjs/directive/leftmenu/leftmenu_projects.html",link:function(h,i,j){var k=h.vm={selected_pid:c.pid,projects:[],query:"",query_all_teams_projects:[],current_index:-1,current_pid:"",current_star_project:!0,on_query:!1},l=function(){var b=_.map(a.teams,function(a){var b=_.clone(a);return b.show_projects=_.clone(a.projects),b});k.teams=b,k.star_projects=_.filter(a.projects,function(a){return a.is_star?(k.query_all_teams_projects.push(a.pid),!0):void 0}),_.each(k.teams,function(a){_.filter(a.projects,function(a){k.query_all_teams_projects.push(a.pid)})})};l(),h.$on(kzi.constant.event_names.shortcut_key_select_prjs,function(a,b){switch(b.event.preventDefault(),b.keyCode){case 13:k.current_pid&&k.to_project({pid:k.current_pid});break;case 38:k.current_index<=k.star_projects.length&&1==k.on_query&&(k.current_index=k.star_projects.length+1),k.current_index--,k.current_index<0&&(k.current_index=0),k.current_star_project=k.current_index<k.star_projects.length?!0:!1,k.current_pid=k.query_all_teams_projects[k.current_index],f(k.current_index<=k.star_projects.length?function(){$("#leftmenu_content .mCustomScrollbar:eq(0)").mCustomScrollbar("scrollTo","top",{scrollInertia:10})}:function(){$("#leftmenu_content .mCustomScrollbar:eq(0)").mCustomScrollbar("scrollTo","#leftmenu_content .current",{scrollInertia:10})});break;case 40:k.current_index++;var c=k.query_all_teams_projects.length;k.current_index>c-1&&(k.current_index=c-1),k.current_star_project=k.current_index<k.star_projects.length?!0:!1,k.current_pid=k.query_all_teams_projects[k.current_index],f(function(){$("#leftmenu_content .mCustomScrollbar:eq(0)").mCustomScrollbar("scrollTo","#leftmenu_content .current",{scrollInertia:10})})}}),k.change_query=function(){var b=k.query,c=b.toLowerCase().trim();f(function(){$("#leftmenu_content .mCustomScrollbar:eq(0)").mCustomScrollbar("scrollTo","top",{scrollInertia:10})}),k.query_all_teams_projects=[],_.each(k.star_projects,function(a){k.query_all_teams_projects.push(a.pid)}),_.each(k.teams,function(a){a.show_projects=_.filter(a.projects,function(a){return-1!=a.name.toLowerCase().indexOf(c)?(k.query_all_teams_projects.push(a.pid),!0):void 0})}),k.is_empty=0==_.filter(a.projects,function(a){return-1!=a.name.toLowerCase().indexOf(c)}).length,k.on_query=!0,k.current_index=k.star_projects.length,k.current_pid=k.query_all_teams_projects[k.current_index],k.current_star_project=!1,""===c&&(k.on_query=!1,k.current_pid="",k.current_star_project=!0)},k.js_goto_team=function(a,b){"-1"!==a.team_id&&d.path("/teams/"+a.team_id)},k.to_project=function(a){e.global.leftmenu_current_expand="",
b.go("project",{pid:a.pid},{reload:!0})},k.add_project=function(){g.showAdd()}}}}function c(a,b,c,d,e,f){return{restrict:"E",replace:!0,scope:!0,templateUrl:"/ycjs/directive/leftmenu/leftmenu_teams.html",link:function(c,e,f){var g=c.vm={is_team_searching:!1},h=function(){c.teams=_.filter(_.clone(a.teams),function(a){return"-1"!==a.team_id})};h(),g.js_pop_teams_add_choice=function(a){b.showAdd(),d.global.leftmenu_current_expand=""}}}}function d(a,b,c,d,e,f){return{restrict:"E",replace:!0,scope:!0,templateUrl:"/ycjs/directive/leftmenu/leftmenu_me.html",link:function(a,b,c){var d=a.vm={out_link_current:"weibo",broadcast_msg:{},popbox_obj:null,popbox_download_obj:null},e=function(){};e(),d.js_pop_weixin_qrcode=function(a){d.popbox_obj=f.popbox({target:a,popboxClass:"popbox min-w50",placement:"top",align:"left",templateUrl:"/ycjs/directive/leftmenu/leftmenu_help_pop_weixin_qrcode.html",controller:["$scope","popbox","$window","$rootScope",function(a,b,c,d){a.popbox=b}]}),d.popbox_obj.open()},d.js_outer_link_mouseenter=function(a,b){d.out_link_current=b},d.js_pop_app_download_open=function(a){d.popbox_download_obj=f.popbox({target:a,popboxClass:"popbox min-w50",placement:"top",align:"left",templateUrl:"/ycjs/directive/leftmenu/leftmenu_me_pop_app_download.html",controller:["$scope","popbox","$window","$rootScope",function(a,b,c,d){a.popbox=b}]}),d.popbox_download_obj.open()},d.js_pop_app_download_close=function(a,b){d.popbox_download_obj.close()},d["switch"]=function(){location.href="/version/switch"},wt.data.broadcast.get_latest(function(a){d.broadcast_msg=a.data},function(){kzi.msg.error("获取广播失败")},null)}}}angular.module("wt.directive.leftmenu",[]).directive("wtLeftmenu",a).directive("wtProjectsMenu",b).directive("wtTeamsMenu",c).directive("wtMeMenu",d),a.$inject=["$rootScope","$popbox","$state","$stateParams","globalDataContext","$timeout"],b.$inject=["globalDataContext","$state","$stateParams","$location","$rootScope","$timeout","projectService"],c.$inject=["globalDataContext","teamService","$location","$rootScope","$timeout","$popbox"],d.$inject=["globalDataContext","$stateParams","$location","$rootScope","$timeout","$popbox"]}(),function(){"use strict";function a(){var a=function(a){if(a){var b=$(a);b.length>0&&b.trigger("resize.update-scroll")}else $(".mCustomScrollbar").trigger("resize.update-scroll")};this.update=a}function b(a){return{restrict:"A",link:function(b,c,d){var e={keyboard:{enable:!0},scrollButtons:{enable:!1},scrollInertia:350,theme:"dark-thick",advanced:{updateOnSelectorChange:!1,updateOnImageLoad:!1,updateOnContentResize:!0,autoScrollOnFocus:!1}};if($(c).bind("resize.update-scroll",_.debounce(function(){a(function(){$(this).mCustomScrollbar("update")})})),""!==d.wtScroll){var f=b.$eval(d.wtScroll);$.isPlainObject(f)&&(e=$.extend(!0,e,f))}a(function(){$(c).mCustomScrollbar(e)},200)}}}function c(a,b){return{restrict:"C",link:function(b,c,d){var e=b.cm={type:d.triggerType,elem:d.triggerElm};if(void 0===e.elem&&(e.elem="",$(c).parents(".mCustomScrollbar").length>0)){var f=[];_.each($(c).parents(".mCustomScrollbar"),function(a){f.push($(a).attr("class"))}),_.each(f,function(a){var b=a.split(" ");e.elem=e.elem+", ."+_.find(b,function(a){return 0===a.indexOf("_mCS_")})}),e.elem=e.elem.substr(2,e.elem.length)}e.bindNodeInserted=function(){c.one("animationend.inserttrigger MSAnimationEnd.inserttrigger webkitAnimationEnd.inserttrigger oAnimationEnd.inserttrigger",function(b){"nodeInserted"===b.originalEvent.animationName&&a.update(e.elem)})},e.bindNodeRemoved=function(){c.bind("animationstart.removetrigger MSAnimationStart.removetrigger webkitAnimationStart.removetrigger oAnimationStart.removetrigger",function(b){"nodeRemoved"===b.originalEvent.animationName&&(a.update(e.elem),b.stopPropagation())})},void 0===e.type?(e.bindNodeInserted(),e.bindNodeRemoved()):("insert"===e.type&&e.bindNodeInserted(),"remove"===e.type&&e.bindNodeRemoved())}}}angular.module("wt.directive.scroll",[]).service("wtScrollService",a).directive("wtScroll",b).directive("wtScrollUpdateTrigger",c),a.$inject=[],b.$inject=["$timeout"],c.$inject=["wtScrollService","$timeout"]}(),function(){"use strict";function a(a,b){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/feed.html",compile:function(c,d,e){return{pre:function(a,c,d,e){var f=a.feed.template;switch(angular.isString(a.feed.data.entity.name)&&(a.feed.data.entity.name=b.getTrustedHtml(a.feed.data.entity.name)),f){case"task_create":a.actionTitle="新建了任务",a.type_icon=kzi.constant.feed_type_icon.task,a.display_entity=a.feed.data.entity;break;case"task_complete":a.actionTitle="完成了任务",a.type_icon=kzi.constant.feed_type_icon.completed,a.display_entity=a.feed.data.entity;break;case"task_comment_add":a.actionTitle="评论了任务：",a.actionText=a.feed.data.target.name,a.type_icon=kzi.constant.feed_type_icon.comment,a.display_entity=a.feed.data.entity,a.send_entity=a.feed.data.target;break;case"task_attach_file":a.actionTitle="在任务上添加了附件：",a.actionText=a.feed.data.entity.name,a.type_icon=kzi.constant.feed_type_icon.task,a.display_entity=a.feed.data.target,a.send_entity=a.feed.data.target;break;case"file_upload":a.actionTitle="上传了文件",a.type_icon=kzi.constant.feed_type_icon.file,a.display_entity=a.feed.data.entity;break;case"file_new_version":a.actionTitle="上传了文件新版本",a.type_icon=kzi.constant.feed_type_icon.file,a.display_entity=a.feed.data.entity;break;case"file_comment_add":a.actionTitle="评论了文件：",a.actionText=a.feed.data.target.name,a.type_icon=kzi.constant.feed_type_icon.comment,a.display_entity=a.feed.data.entity,a.send_entity=a.feed.data.target;break;case"post_create":a.actionTitle="发起了新话题",a.type_icon=kzi.constant.feed_type_icon.post,a.display_entity=a.feed.data.entity;break;case"post_comment_add":a.actionTitle="评论了话题：",a.actionText=a.feed.data.target.name,a.type_icon=kzi.constant.feed_type_icon.comment,a.display_entity=a.feed.data.entity,a.send_entity=a.feed.data.target;break;case"event_create":a.actionTitle="新建了日程",a.type_icon=kzi.constant.feed_type_icon.event,a.display_entity=a.feed.data.entity;break;case"event_comment_add":a.actionTitle="评论了日程：",a.actionText=a.feed.data.target.name,a.type_icon=kzi.constant.feed_type_icon.comment,a.display_entity=a.feed.data.entity,a.send_entity=a.feed.data.target;break;case"page_create":a.actionTitle="新建了文档",a.type_icon=kzi.constant.feed_type_icon.page,a.display_entity=a.feed.data.entity;break;case"page_comment_add":a.actionTitle="评论了文档：",a.actionText=a.feed.data.target.name,a.type_icon=kzi.constant.feed_type_icon.comment,a.display_entity=a.feed.data.entity,a.send_entity=a.feed.data.target}},post:function(b,c,d,e){b.js_click_feed=function(){if(!_.isEmpty(b.send_entity)){var c=["task_comment_add","event_comment_add","file_comment_add","page_comment_add","post_comment_add"];return void(c.indexOf(b.feed.template)>=0?a.openEntity(b.feed.filter.prj,b.send_entity,b.feed.data.entity.eid):a.openEntity(b.feed.filter.prj,b.send_entity))}a.openEntity(b.feed.filter.prj,b.display_entity,b.feed.data.entity.eid)}}}}}}angular.module("wt.directive.feed",[]).directive("wtFeed",a),a.$inject=["locator","$sce"]}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/activity.html",link:function(a,b,c){var d=a.$parent.tpl_prefix,e=a.activity.template,f="project_",g="item_";switch(e){case"task_create":d===f?(a.verb="在列表 <strong>"+a.activity.data.target.name+"</strong> 上添加新任务",a.display_entity=a.activity.data.entity):d===g?a.verb="添加任务":a.verb="tpl_prefix为空";break;case"task_update_name":d===f?(a.verb="修改任务",a.display_entity=a.activity.data.entity):d===g?a.verb="修改任务为 <strong>"+a.activity.data.entity.name+"</strong>":a.verb="tpl_prefix为空";break;default:a.verb=e+"模板尚未实现"}}}}angular.module("wt.directive.activity",[]).directive("wtActivity",a)}(),function(){"use strict";function a(){return function(a){return"string"!=typeof a?"":marked(a,{breaks:!0})}}function b(a){var b=new Sanitize({}),c=new Sanitize(Sanitize.Config.RESTRICTED),d=new Sanitize(Sanitize.Config.BASIC),e=new Sanitize(Sanitize.Config.RELAXED);return function(f,g){var h=e;switch(g){case 0:h=b;break;case 1:h=c;break;case 2:h=d;break;case 3:h=e;break;default:h=e}var i=document.createElement("div"),j=document.createElement("div");return i.innerHTML=filterXSS(f,a),j.appendChild(h.clean_node(i)),j.innerHTML}}function c(a){return function(b,c,d){c.addClass("ng-binding markdown").data("$binding",d.genParseMarkdown);var e=c.html()||"",f=new Markdown.Converter;Markdown.Extra.init(f,["tables","fenced_code_gfm","def_list","attr_list","footnotes","strikethrough","newlines"]);var g=f.makeHtml(e),h=a(g);c.html(h),b.$watch(d.wtMarkdown,function(b){if(b=b||"",""!==b){var d=f.makeHtml(b),e=a(d);c.html(e)}else c.html("");c.find("a").attr("target",function(){if(this.host!==location.host)return"_blank";var a=["share/","club","videos","blog","plan","tour","mobile","security","uservoice","customers","press","help","guide","feedback","about","contact","privacy","terms"].join(")|(/");return a=new RegExp("^(/"+a+")"),a.test(this.pathname)?"_blank":void 0})})}}angular.module("wt.directive.markdown",[]).factory("MdParse",a).factory("sanitize",b).directive("wtMarkdown",c),b.$inject=["ycConstantXSSWhiteList"],c.$inject=["sanitize"]}(),function(){"use strict";angular.module("wt.directive.uploadfile",[]).factory("$wtUploadFile",["$rootScope","Upload",function(a,b){function c(){this.uploadQueueFiles=[],this.removeQueueFile=function(a){this.uploadQueueFiles=_.reject(this.uploadQueueFiles,function(b){return b===a})}}return c.prototype.addFileToDb=function(a,b,c){var d=this,e={};switch(e.target=b.formData.target,e.type=b.formData.type||"project",e.file={pid:b.formData.pid,name:b.fname,ext:kzi.constant.get_ext(b.ext),size:b.size,path:b.url},b.formData.type){case"task":e.ext={tid:b.formData.tid};break;case"post":e.ext={post_id:b.formData.post_id};break;case"file":e.ext={fid:b.formData.fid};break;case"event":e.ext={event_id:b.formData.event_id};break;case"event":e.ext={folder_id:""};break;default:e.ext={folder_id:b.formData.folder_id}}wt.data.file.new_upload(b.formData.pid,e,function(f){e.file=_.extend(e.file,b,f.data),e.file.icon=kzi.helper.build_file_icon(e.file),_.isFunction(c)&&c(null,e,a),d.removeQueueFile(a)},function(b){_.isFunction(c)&&c("上传出错，"+b.code,null,a)})},c.prototype.startUpload=function(a,c,d){var e=this;c.percent=0,c.upload=b.upload({url:a,method:"POST",fields:c.data,file:c.original}).progress(function(a){c.percent=parseInt(100*a.loaded/a.total)}).success(function(a){if(200===a.code){var b=a.files[0];"avatar"===b.formData.target?_.isFunction(d)&&d(null,b,c):e.addFileToDb(c,b,d)}else 8100===a.code?c.error="上传文件过大":c.error="上传失败",c.percent=100,d&&d(c.error,null,c)}).error(function(a){c.percent=100,c.error="上传失败",d&&d(a,null,c)}),c.cancel=function(){var a=e.uploadQueueFiles.indexOf(this);e.uploadQueueFiles.splice(a,1),this&&this.upload&&this.upload.abort()}},c.prototype.addFiles=function(a,b,c){var d=this,e=kzi.config.box_url()+"?pid="+a+"&token="+kzi.get_cookie("sid");_.forEach(b,function(a){a.data.size=a.original.size,d.uploadQueueFiles.push(a),d.startUpload(e,a,c)})},c.prototype.uploadAvatar=function(a,b){var c=kzi.config.box_url()+"?pid=avatar&token="+kzi.get_cookie("sid");a.data.size=a.original.size,this.startUpload(c,a,b)},new c}]).directive("uploadFileProcess",["$wtUploadFile",function(a){return{restrict:"E",templateUrl:"/ycjs/directive/file/uploadFileProcess.html",link:function(b,c,d){b.$wtUpload=a,b.cancelUpload=function(b){var c=a.uploadQueueFiles.indexOf(b);a.uploadQueueFiles.splice(c,1),b.upload.abort()}}}}])}(),angular.module("wt.directive").directive("wtConfirmPassword",["$parse","$window",function(a,b){"use strict";return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/confirm_password.html",link:function(c,d,e){var f=a(e.confirmSuccess),g=a(e.confirmCancel);c.js_cancel_option=function(){_.isFunction(g)&&g(c)},c.js_forgot_password=function(){b.location.href="/forgot"},c.js_confirm_password=function(a){c.confirming=!0,wt.data.account.conform_password(c.confirm_password,function(a){_.isFunction(f)&&f(c)},function(b){b.code===kzi.statuses.user_error.invalid_pwd_error.code?a.$errors.unshift("输入密码输入错误"):a.$errors.unshift("服务器发生错误")},function(){c.confirming=!1})}}}}]),function(){"use strict";function a(a,b){return{restrict:"A",link:function(c,d,e){var f="dragfile_element_"+_.random(1e6);$(d).addClass(f),b.global.dragfile_elements.push(f),b.global.dragfile_elements=_.filter(b.global.dragfile_elements,function(a){return 1==$("."+a).size()});var g=a(e.wtDragfile),h=function(a,b){b.length>0&&kzi.msg.warn(_.pluck(b,"name").join("、")+" 是文件夹，请压缩后上传"),g(c,{$files:a})},i=function(){$(d).unbind("dragover.wt_dragfile"),$(d).unbind("drop.wt_dragfile"),$(d).unbind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit")},j=function(){$(d).unbind("dragover.wt_dragfile"),$(d).unbind("drop.wt_dragfile"),$(d).unbind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit"),$(d).bind("dragover.wt_dragfile",function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var c=a.dataTransfer;return c&&-1!==$.inArray("Files",c.types)?(c.dropEffect="copy",_.each(b.global.dragfile_elements,function(a){$("."+a).removeClass("dragfile-hover")}),$(d).addClass("dragfile-hover"),!1):void 0}),$(d).bind("drop.wt_dragfile",function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=a.dataTransfer;if(b&&b.files&&b.files.length){var c=[],d=[];b.items&&"function"==typeof b.items[0].webkitGetAsEntry?_.forEach(b.items,function(a,b,e){var f=a.webkitGetAsEntry();f&&f.isFile&&(c.push(a.getAsFile()),b+1===e.length&&h(c,d)),f.isDirectory&&(d.push(a.getAsFile()),b+1===e.length&&h(c,d))}):"undefined"!=typeof FileReader&&_.forEach(b.files,function(a,b,e){var f={type:2,ext:kzi.constant.get_ext(a.name.substring(a.name.lastIndexOf(".")+1))};if(a.icon=kzi.constant.get_file_icon(f),"undefined"!=typeof FileReader){var g=new FileReader;g.onload=function(f){c.push(a),b+1===e.length&&h(c,d)},g.onerror=function(f){d.push(a),b+1===e.length&&h(c,d)},g.readAsText(a)}})}}),$(d).bind("drop.wt_dragfile_exit dragleave.wt_dragfile_exit dragexit.wt_dragfile_exit dragend.wt_dragfile_exit",function(a){var b=!0,c=$(d).offset().left,e=$(d).width(),f=$(d).offset().top,g=$(d).height(),h=!1;a.originalEvent.pageX>c&a.originalEvent.pageX<c+e&&(h=!0);var i=!1;return a.originalEvent.pageY>f&a.originalEvent.pageY<f+g&&(i=!0),h&&i&&"drop"!==a.type&&(b=!1),b&&$(d).removeClass("dragfile-hover"),!1})};c.$watch(e.wtDragfileEnable,function(a,b){a?j(a):i()},!0)}}}angular.module("wt.directive.dragfile",[]).directive("wtDragfile",a),a.$inject=["$parse","$rootScope"]}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"/tpl/directive/wt-folder-tree.html",link:function(a,b,c,d){}}}function b(a){return{restrict:"A",link:function(b,c,d){c.on("click",function(c){var e=b.$eval(d.addFileFromProject);console.info("pid",e);var f={target:c,templateUrl:"/tpl/directive/add_pop_attachment_from_file.html",controller:["$scope","popbox",function(a,b){a.popbox=b,a.folder_ids=[],a.files_controls={},a.files_controls.sort_method_id=0,a.files_controls.filter=0,a.files_controls.pid=e,a.files_controls.folder_id="",a.files_controls.page=1,a.files_controls.files=[],wt.bus.file.load_one_page_files(a),a.js_attach=function(b){if(1===b.type)a.files_controls.loading_done=!1,a.folder_ids.push(a.files_controls.folder_id),a.files_controls.folder_id=b.fid,a.files_controls.files=[],a.files_controls.page=1,wt.bus.file.load_one_page_files(a);else{var c=angular.element(".new-comment-edit:visible").scope().vmNewComment;_.isEmpty(c.files)&&(c.files=[]),_.findWhere(c.files,{fid:b.fid})||c.files.push(_.omit(b,"watchers"))}},a.go_back=function(){a.files_controls.folder_id=a.folder_ids.pop(),a.files_controls.page=1,a.files_controls.files=[],wt.bus.file.load_one_page_files(a)},a.load_more=function(){wt.bus.file.load_one_page_files(a)},a.js_close=function(){b.close()}}]};a.popbox(f).open()})}}}angular.module("wt.directive.file",[]).directive("wtPopAddAttachmentFromFile",["$popbox","$rootScope",function(a,b){return{restrict:"A",priority:500,link:function(c,d,e){d.on("click",function(d){var f=c.$eval(e.wtPopAddAttachmentFromFile),g={target:d,templateUrl:"/tpl/directive/add_pop_attachment_from_file.html",controller:["$scope","popbox",function(a,c){a.popbox=c,a.folder_ids=[],a.files_controls={},a.files_controls.sort_method_id=0,a.files_controls.filter=0,a.files_controls.pid=f.pid,a.files_controls.folder_id="",a.files_controls.page=1,a.files_controls.files=[],wt.bus.file.load_one_page_files(a),a.js_attach=function(c){if(1===c.type)a.files_controls.loading_done=!1,a.folder_ids.push(a.files_controls.folder_id),a.files_controls.folder_id=c.fid,a.files_controls.files=[],a.files_controls.page=1,wt.bus.file.load_one_page_files(a);else{f.files=f.files||[];var d=_.findWhere(f.files,{fid:c.fid});if(!d){f.files.push(c);var e=f.event_id?kzi.constant.xtype.event:f.post_id?kzi.constant.xtype.post:f.tid?kzi.constant.xtype.task:f.page_id?kzi.constant.xtype.page:void 0;if(void 0===e)return kzi.msg.error("对象类型未知");var g=f.event_id||f.post_id||f.tid||f.page_id||void 0;if(void 0===g)return kzi.msg.error("对象id未知");var h=function(){e===kzi.constant.xtype.task&&(f.file_count+=1,b.$broadcast(kzi.constant.event_names.on_task_update,f)),e===kzi.constant.xtype.post&&b.$broadcast(kzi.constant.event_names.on_uploadfile_add_to_post,{post_id:g,files:[1]})};wt.data.file.attach(f.pid,e,g,c.fid,h)}}},a.go_back=function(){a.files_controls.folder_id=a.folder_ids.pop(),a.files_controls.page=1,a.files_controls.files=[],wt.bus.file.load_one_page_files(a)},a.load_more=function(){wt.bus.file.load_one_page_files(a)},a.js_close=function(){c.close()}}]};a.popbox(g).open()})}}}]).directive("wtAddAttachmentFromFile",["$rootScope","$parse",function(a,b){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/add_pop_attachment_from_file.html",link:function(c,d,e){var f=c.$eval(e.entity),g=b(e.goBackFurther);_.isEmpty(g)?c.has_go_further_back=!1:c.has_go_further_back=!0,c.folder_ids=[],c.files_controls={},c.files_controls.sort_method_id=0,c.files_controls.filter=0,c.files_controls.pid=f.pid,c.files_controls.folder_id="",c.files_controls.page=1,c.files_controls.files=[],wt.bus.file.load_one_page_files(c),c.go_back_further=function(){g(c)},c.js_attach=function(b){if(1===b.type)c.files_controls.loading_done=!1,c.folder_ids.push(c.files_controls.folder_id),c.files_controls.folder_id=b.fid,c.files_controls.files=[],c.files_controls.page=1,wt.bus.file.load_one_page_files(c);else{f.files=f.files||[];var d=_.findWhere(f.files,{fid:b.fid});if(!d){f.files.push(b);var e=f.event_id?kzi.constant.xtype.event:f.post_id?kzi.constant.xtype.post:f.tid?kzi.constant.xtype.task:f.page_id?kzi.constant.xtype.page:void 0;if(void 0===e)return kzi.msg.error("对象类型未知");var g=f.event_id||f.post_id||f.tid||f.page_id||void 0;if(void 0===g)return kzi.msg.error("对象id未知");var h=function(){e===kzi.constant.xtype.task&&(f.badges.file_count++,a.$broadcast(kzi.constant.event_names.on_task_update,f))};wt.data.file.attach(f.pid,e,g,b.fid,h)}}},c.go_back=function(){c.files_controls.folder_id=c.folder_ids.pop(),c.files_controls.page=1,c.files_controls.files=[],wt.bus.file.load_one_page_files(c)},c.load_more=function(){wt.bus.file.load_one_page_files(c)}}}}]).directive("wtFilesBreadcrumb",[function(){return{restrict:"E",scope:{folders:"=",pid:"@"},replace:!0,templateUrl:"/tpl/directive/files_breadcrumb.html",link:function(a,b,c){}}}]).directive("zippy",[function(){return{restrict:"E",transclude:!0,templateUrl:"/tpl/directive/zippy.html",link:function(a,b,c,d){a.isSubFolderVisible=!1,void 0===a.node&&(a.isSubFolderVisible=!0),a.toggleContent=function(){a.isSubFolderVisible===!0&&a.data.selected_move_to_node!==a.node?a.data.selected_move_to_node=a.node:(a.isSubFolderVisible=!a.isSubFolderVisible,a.data.selected_move_to_node=a.node)}}}}]).directive("wtFolderTree",a).directive("addFileFromProject",b),b.$inject=["$popbox"]}(),function(){"use strict";function a(a,b){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/file_item.html",scope:!0,link:function(c,d,e){var f=c.dm={view_type:"icon"===e.viewType?"icon":"list"};c.$watch(e.viewType,function(a,b){_.isEmpty(a)||(f.view_type="icon"===a?"icon":"list")});var g=e.routeChange;f.js_open_file=function(d,e){("icon"!==c.dm.view_type||$(d.target).hasClass("slide-trigger")||!($(d.target).hasClass("file-item-preview")||$(d.target).parents(".file-item-preview").length>0))&&(e.type===kzi.constant.file_type.file?g?e.folder_id?a.path("/project/"+e.pid+"/folder/"+e.folder_id+"/"+e.fid):a.path("/project/"+e.pid+"/file/"+e.fid):b.openFile(e.pid,e.fid,!1):a.path("/project/"+e.pid+"/folder/"+e.fid))}}}}angular.module("wt.directive.file_item",[]).directive("wtFileItem",a),a.$inject=["$location","locator"]}(),function(){"use strict";function a(a,b){return{restrict:"E",replace:!0,templateUrl:"/ycjs/directive/file/file_delete.html",scope:{vmBack:"&back",vmClose:"&close",vmSuccessDone:"&successDone",vmFile:"=file"},link:function(c,d,e){var f=c.vm={parse_back:c.vmBack,parse_close:c.vmClose,parse_success_done:c.vmSuccessDone,file:c.vmFile,has_back:e.back?!0:!1,has_close:e.close?!0:!1,has_success_done:e.successDone?!0:!1,is_deleting:!1};f.js_del_file=function(c){wt.data.file.trash(c.pid,c.fid,function(d){200===d.code?(b.cache.file.del(c.pid,c.fid),a.$broadcast(kzi.constant.event_names.on_file_trash,c),f.has_success_done&&f.parse_success_done()):kzi.msg.warn("文件删除失败")})}}}}angular.module("wt.directive.file").directive("wtFileDelete",a),a.$inject=["$rootScope","globalDataContext"]}(),function(){"use strict";function a(a,b,d,e){return{link:function(f,g,h){document.body.addEventListener&&g.bind("paste",function(f){if("INPUT"!==f.target.tagName&&"TEXTAREA"!==f.target.tagName){var g=c(f,a.global.me);if(g&&0!==g.length){if(!d.isOpened)return e.$$path.length===e.$$path.indexOf("/file")+5||void 0!==b.folder_id?void a.$broadcast(kzi.constant.event_names.on_pastefile_to_folder,g):void 0;switch(d.xtype){case"tasks":a.$broadcast(kzi.constant.event_names.on_pastefile_to_task,g);break;case"events":a.$broadcast(kzi.constant.event_names.on_pastefile_to_event,g);break;case"files":a.$broadcast(kzi.constant.event_names.on_pastefile_to_file,g);break;case"posts":a.$broadcast(kzi.constant.event_names.on_pastefile_to_post,g)}}}})}}}function b(a,b){return{link:function(d,e,f){var g=a(f.wtPasteFile);e.bind("paste",function(a){var e=c(a,b.global.me);e&&e.length>0&&g(d,{$files:e})})}}}var c=function(a,b){var c=[],d=null;d=a.originalEvent?a.originalEvent.clipboardData:a.clipboardData;for(var e=d&&d.items?d.items:[],f=0;f<e.length;f++)if("file"==e[f].kind&&"image/png"==e[f].type){var g=e[f].getAsFile();g.name="["+b.display_name+"] 粘贴上传 - "+moment().format("YYYY-MM-DD HH:mm")+".png",c.push(g),a.preventDefault();break}return c};angular.module("wt.directive.pastefile",["wt.locator"]).directive("wtRootPasteFile",a).directive("wtPasteFile",b),a.$inject=["$rootScope","$stateParams","locator","$location"],b.$inject=["$parse","$rootScope"]}(),function(){"use strict";function a(a,b,c,d,e,f){var g=d.pid,h=e.team_id||"",i=e.save_success;b.popbox=c,b.step=0,b.is_team_calendar=e.is_team_calendar||!1,b.repeat_intervals=kzi.constant.event_repeat_intervals;var j=moment().format("HH"),k=moment().format("mm"),l=kzi.constant.all_hour_sections,m=kzi.constant.all_minute_sections,n=e.start_date?moment(e.start_date):moment(),o=e.start_date?moment(e.start_date):moment();o._d.setHours(o._d.getHours()+1);var p=function(){b.start_hour_sections=l,b.start_minute_sections=m;var a=k.substring(0,1)+"0";b.new_event.start_minute=a,b.new_event.end_minute=a,b.new_event.repeat_interval=b.repeat_intervals[0]},q=function(a){var c=a;c?null:c={isChangeStartDate:!1};var d=b.new_event.start_date,e=b.new_event.start_hour,f=b.new_event.start_minute,g=b.new_event.end_date,h=b.new_event.end_hour;if(d>=g?(b.new_event.end_date=d,e>=h?(b.new_event.end_hour=e,b.new_event.end_minute<=f&&(b.new_event.end_minute=f),b.end_minute_sections=_.filter(m,function(a){return a>=f})):b.end_minute_sections=m,b.end_hour_sections=_.filter(l,function(a){return a>=e})):(b.end_hour_sections=l,b.end_minute_sections=m),c.isChangeStartDate){if(1*b.new_event.start_hour+1>=1*b.new_event.end_hour&&(b.new_event.end_hour=1*b.new_event.start_hour+1+"",1==b.new_event.end_hour.length?"0"+b.new_event.end_hour:null,b.new_event.end_hour>"23"&&(b.new_event.end_hour="00")),"23"==b.new_event.start_hour&&b.new_event.start_date==b.new_event.end_date){var i=moment(b.new_event.start_date);i._d.setDate(i._d.getDate()+1),b.new_event.end_date=i.format("YYYY-MM-DD"),b.new_event.end_hour="00",b.new_event.end_minute="00",b.end_hour_sections=l}b.end_minute_sections=m}};b.new_event={start_date:n.format("YYYY-MM-DD"),end_date:o.format("YYYY-MM-DD"),start_hour:j,start_minute:k,end_hour:o.format("HH"),end_minute:k,attendees:[a.global.me]},g?(b.new_event.pid=g,b.show_project_select=!1):(b.selected_projects=f.getPacketProjects(),b.is_team_calendar&&(b.selected_projects=_.filter(b.selected_projects,function(a){return a.team_id===h})),_.isEmpty(b.selected_projects)||(b.new_event.pid=b.selected_projects[0].pid,b.new_event.original_pid=b.new_event.pid),b.show_project_select=!0),p(),b.$watch("[new_event.start_date,new_event.start_hour,new_event.start_minute]",function(a){q({isChangeStartDate:!0})},!0),q(),b.js_to_set_date=function(a){b.current_date_type=a,"start_date"===a?(b.current_date=b.new_event.start_date,b.min_date=null,b.set_date_title="设置开始时间"):(b.current_date=b.new_event.end_date,b.min_date=b.new_event.start_date,b.set_date_title="设置结束时间"),b.js_step(1)},b.js_set_date=function(a){a=moment(a).format("YYYY-MM-DD"),"start_date"===b.current_date_type?(b.new_event.start_date=a,p(moment(a))):(b.new_event.end_date=a,q()),b.js_step(0)},b.js_change_end_hour=function(){q()},b.js_change_project=function(){b.new_event.pid!==b.new_event.original_pid&&(b.new_event.original_pid=b.new_event.pid,b.new_event.attendees=[a.global.me])},b.js_to_attendee=function(){b.members=[],b.loading_members=!0,f.loadProjectMembers(b.new_event.pid,function(a){var c=[];_.each(a,function(a){if(1===a.status&&a.role!==kzi.constant.role.guest){var d=_.findWhere(b.new_event.attendees,{uid:a.uid});d?a.assigned=1:a.assigned=0,c.push(a)}}),b.members=c,b.loading_members=!1}),b.js_step(2)},b.js_toggle_member=function(a){a.setting_toggle_member!==!0&&(a.setting_toggle_member=!0,wt.bus.member.set_event_attendees_toggle(g,b.new_event,a,function(){},null,function(){a.setting_toggle_member=!1}))},b.js_save_event=function(a){if(!_.isEmpty(b.new_event.name)){b.new_event.is_saving=!0;var c=_.pluck(b.new_event.attendees,"uid"),d=b.new_event.end_date,e=b.new_event.end_hour+":"+b.new_event.end_minute,f=b.new_event.location,g=b.new_event.start_hour+":"+b.new_event.start_minute;wt.data.event.add(b.new_event.pid,b.new_event.name,f,c,b.new_event.start_date,g,d,e,b.new_event.repeat_interval.key,function(a){b.js_close(),_.isFunction(i)&&i(a.data)},function(a){},function(){b.new_event.is_saving=!1})}},b.js_add_all=function(){_.each(b.members,function(a){a.assigned=1,_.findWhere(b.new_event.attendees,{uid:a.uid})||b.new_event.attendees.push(a)}),b.js_step(0)},b.js_close=function(){c.close()},b.js_step=function(a){b.step=a}}function b(a,b){return{restrict:"A",replace:!0,link:function(c,d,e){var f=a(e.wtPopNewEvent);d.bind("click",function(a){b.popbox({target:a,templateUrl:"/ycjs/directive/event/pop_add_event.html",controller:"newEventCtrl",resolve:{pop_data:function(){return{save_success:function(a){f(c,{events:a})},scope:c}}}}).open()})}}}function c(){return{restrict:"E",replace:!0,scope:{startDate:"=",startTime:"=",endDate:"=",endTime:"=",defaultStartDatetime:"&",defaultEndDatetime:"&",displayMode:"@"},templateUrl:"/ycjs/directive/event/start_end_datatime.html",link:function(a,b,c){var d=c.defaultStartDatetime?moment(a.defaultStartDatetime):moment(),e=c.defaultEndDatetime?moment(a.defaultEndDatetime):moment();23==e._d.getHours()&&e._d.setMinutes(0),e._d.setHours(e._d.getHours()+1);var f=a.vm={startHour:d.format("HH"),startMinute:d.format("mm"),endHour:e.format("HH"),endMinute:e.format("mm"),allHourSections:kzi.constant.all_hour_sections,allMinuteSections:kzi.constant.all_minute_sections,displayMode:a.displayMode||"row"},g=function(){f.startHourSections=kzi.constant.all_hour_sections,f.startMinuteSections=kzi.constant.all_minute_sections,f.startMinute=f.startMinute.substring(0,1)+"0",f.endMinute=f.endMinute.substring(0,1)+"0"};f.changeDatetime=function(b){var c=b;if(c?null:c={isChangeStartDate:!1},a.startDate>=a.endDate?(a.endDate=a.startDate,f.startHour>=f.endHour?(f.endHour=f.startHour,f.endMinute<=f.startMinute&&(f.endMinute=f.startMinute),f.endMinuteSections=_.filter(kzi.constant.all_minute_sections,function(a){return a>=f.startMinute})):f.endMinuteSections=kzi.constant.all_minute_sections,f.endHourSections=_.filter(kzi.constant.all_hour_sections,function(a){return a>=f.startHour})):(f.endHourSections=kzi.constant.all_hour_sections,f.endMinuteSections=kzi.constant.all_minute_sections),c.isChangeStartDate){if(1*f.startHour+1>=1*f.endHour&&(f.endHour=1*f.startHour+1+"",1==f.endHour.length?"0"+f.endHour:null,f.endHour>"23"&&(f.endHour="00")),"23"==f.startHour&&a.startDate==a.endDate){var d=moment(a.endDate);d._d.setDate(d._d.getDate()+1),a.endDate=d.format("YYYY-MM-DD"),f.endHour="00",f.endMinute="00",f.endHourSections=kzi.constant.all_hour_sections}f.endMinuteSections=kzi.constant.all_minute_sections}a.startTime=f.startHour+":"+f.startMinute,a.endTime=f.endHour+":"+f.endMinute};var h=function(){a.startDate=d.format("YYYY-MM-DD"),a.endDate=e.format("YYYY-MM-DD"),a.startTime=f.startHour+":"+f.startMinute,a.endTime=f.endHour+":"+f.endMinute,g(),f.changeDatetime(),f.startDateOptions={default_date:a.startDate,set_date:function(b){a.startDate=moment(b).format("YYYY-MM-DD"),f.startDateOptions.default_date=a.startDate,f.endDateOptions.min_date=moment(a.startDate).format("YYYY-MM-DD"),f.changeDatetime()}},f.endDateOptions={default_date:moment(a.endDate).format("YYYY-MM-DD"),min_date:moment(a.startDate).format("YYYY-MM-DD"),set_date:function(b){a.endDate=moment(b).format("YYYY-MM-DD"),f.endDateOptions.default_date=a.endDate,f.changeDatetime()}}};h()}}}angular.module("wt.directive.event",[]).controller("newEventCtrl",a).directive("wtPopNewEvent",b).directive("startEndDatetime",c),a.$inject=["$rootScope","$scope","popbox","$stateParams","pop_data","globalDataContext"],b.$inject=["$parse","$popbox"],c.$inject=[]}(),function(){"use strict";function a(){return{restrict:"E",scope:{title:"@",size:"@",number:"=",color:"@",bgcolor:"@"},template:"<div></div>",link:function(a,b,c){var d=parseInt(a.number,10),e=a.bgcolor?a.bgcolor:"#EEE";_.isNaN(d)&&(d=0),$(b).children().eq(0).highcharts(Highcharts.merge(f,g,{chart:{height:a.size},pane:{background:{backgroundColor:e}},series:[{data:[{color:a.color,y:d}],dataLabels:{format:'<div style="text-align:center"><span style="font-size:16px;color:'+a.color+'">{y}<small>%</small></span>'}}]})),a.$watch("number",function(a,c){var d,e=$(b.children()[0]).highcharts();e&&(d=e.series[0].points[0],d&&(_.isNaN(a)&&(a=0),a=~~a,d.update(a)))})}}}function b(){return{restrict:"E",scope:{name:"@",height:"@",data:"="},template:"<div></div>",link:function(a,b,c){var d=a.height?parseInt(a.height,10):240,e=Highcharts.merge(f,h,{chart:{height:d},plotOptions:{pie:{showInLegend:!0,innerSize:"60%",dataLabels:{distance:-25,style:{color:"#ffffff",textShadow:"0px 1px 2px black"},formatter:function(){return~~this.percentage+"%"}}}},series:[{name:a.name,data:a.data}]});$(b).children().eq(0).highcharts(e)}}}function c(){return{restrict:"E",scope:{config:"="},template:"<div></div>",link:function(a,b,c){var d="#e1e1e1",e="#fbfbfb",g={chart:{animation:!1,type:"column",backgroundColor:"#ffffff"},legend:{align:"right",verticalAlign:"bottom"},title:{text:""},colors:[kzi.constant.graph_color.todo,kzi.constant.graph_color.done],
xAxis:{title:{text:""},tickInterval:1,lineColor:d,tickColor:d,tickWidth:0},yAxis:{title:{text:""},lineWidth:1,minTickInterval:1,lineColor:d,gridLineColor:e,gridLineWidth:0,minRange:4,min:0,floor:0}};g=Highcharts.merge(f,g,a.config),$(b).children().eq(0).highcharts(g)}}}function d(){return{restrict:"E",scope:{config:"="},template:"<div></div>",link:function(a,b,c){var d=(a.vm={part_loading_done:!1},"#e1e1e1"),e="#e1e1e1",g={chart:{type:"column",inverted:!0},legend:{margin:0,align:"right",verticalAlign:"bottom"},title:{text:""},xAxis:{title:{text:""},tickInterval:1,tickColor:d,lineColor:d,tickWidth:0},yAxis:{title:{text:""},lineWidth:1,minTickInterval:1,lineColor:d,gridLineColor:e,tickWidth:0,min:0,floor:0,minRange:4},colors:[kzi.constant.graph_color.todo,kzi.constant.graph_color.done]};g=Highcharts.merge(f,g,a.config),$(b).children().eq(0).highcharts(g)}}}function e(){return{restrict:"E",scope:{config:"="},template:"<div></div>",link:function(a,b,c){var d=(a.vm={},"#e1e1e1"),e="#fbfbfb",g={chart:{type:"line",margin:[10,1,66,30]},legend:{align:"right",verticalAlign:"bottom"},title:{text:""},xAxis:a.xaxis,plotOptions:{line:{enabled:!0}},yAxis:[{title:{text:""},lineWidth:0,minTickInterval:1,lineColor:d,gridLineColor:e,minRange:4,min:0,floor:0},{title:{text:""},lineWidth:0,minTickInterval:1,opposite:!0,lineColor:d,gridLineColor:e,minRange:4,min:0,floor:0}],series:a.series,colors:[kzi.constant.graph_color.done,kzi.constant.graph_color.addnew]},h=Highcharts.merge(f,g,a.config);1===h.series.length&&(h.chart.margin=null,h.legend={enabled:!1}),$(b).children().eq(0).highcharts(h)}}}angular.module("wt.directive.graph",[]).directive("wtGraphGauge",a).directive("wtGraphPie",b).directive("wtGraphColumn",c).directive("wtGraphBar",d).directive("wtGraphLine",e);var f={credits:{enabled:!1}},g={chart:{type:"solidgauge",margin:[0,0,0,0]},title:null,pane:{center:["50%","50%"],size:"100%",startAngle:0,endAngle:360,background:{innerRadius:"60%",outerRadius:"100%",shape:"arc",borderWidth:0}},tooltip:{enabled:!1},yAxis:{min:0,max:100,borderWidth:0,lineWidth:0,minorTickInterval:null,tickPixelInterval:400,tickWidth:0,title:{y:0},labels:{enabled:!1}},plotOptions:{solidgauge:{dataLabels:{y:-15,borderWidth:0,useHTML:!0}}}},h={chart:{type:"pie",margin:[0,0,0,0]},legend:{padding:5,margin:15,borderRadius:0,align:"right",verticalAlign:"middle",layout:"vertical",symbolWidth:7,backgroundColor:"#f9f9fb",itemMarginTop:6,itemMarginBottom:6,x:0},title:{text:null}};a.$inject=[],b.$inject=[],c.$inject=[],d.$inject=[],e.$inject=[]}(),function(){"use strict";function a(a,b,c,d){return{restrict:"E",replace:!1,templateUrl:"/ycjs/directive/comment/new_comment.html",scope:{vmPid:"=pid",vmXid:"=xid",vmSave:"&save",vmNewComment:"=newComment",vmAtMembers:"=atMembers"},link:function(a,e,f){var g=a.vm={save:a.vmSave},h=e.find("textarea")[0],i=function(a){var b=e.find("textarea")[0];c(function(){b.focus(),b.select(),b.selectionStart=b.selectionEnd=a})},j=function(a,b,d){if("number"==typeof b.selectionStart&&"number"==typeof b.selectionEnd){var e=b.selectionStart,f=b.selectionEnd,g=e+d.length;_.isUndefined(a.message)&&(a.message=""),c(function(){a.message=a.message.substring(0,e)+d+a.message.substring(f)}),i(g)}else c(function(){a.message=a.message+d,h.focus()})};g.js_metion_member=function(c){var d=e.find("textarea")[0];b.popbox({target:c,templateUrl:"/tpl/common/pop_new_comment_metion.html",controller:["$scope","popbox","pop_data",function(a,b,c){var e=a.vm={metion_members:c.members};a.popbox=b,e.js_metion_member=function(a,e){c.new_comment.message||(c.new_comment.message=""),j(c.new_comment,d," @"+e.name+" "),b.close()},e.js_metion_all=function(a){c.new_comment.message||(c.new_comment.message="");var f="";_.each(e.metion_members,function(a){f+=" @"+a.name+" "}),j(c.new_comment,d,f),b.close()},e.js_close=function(){b.close()},e.js_mousedown=function(a){a.stopPropagation()}}],resolve:{pop_data:function(){return{scope:a,new_comment:a.vmNewComment,members:a.vmAtMembers}}}}).open()},g.parse_save=function(a){g.save({new_comment:a})},g.js_files_select=function(b){if(0!==b.length){var c=[],e={target:"prj",type:"comment",pid:a.vmPid,xid:a.vmXid};_.forEach(b,function(a){c.push({original:a,data:e})}),a.vmNewComment.uploading_files=c,d.addFiles(a.vmPid,c,function(b,c,d){d.success=!0,a.vmNewComment.uploading_files.splice(a.vmNewComment.uploading_files.indexOf(d),1),b||c&&c.file&&"comment"===c.type&&(_.isArray(a.vmNewComment.files)?a.vmNewComment.files.push(c.file):a.vmNewComment.files=[c.file])})}},g.js_del_attachment_comment=function(b,c){var d=_.findWhere(a.vmNewComment.files,{fid:c.fid});d&&(a.vmNewComment.files=_.reject(a.vmNewComment.files,function(a){return a.fid===c.fid}))},g.js_pop_emojis=function(c){b.popbox({target:c,templateUrl:"/tpl/common/pop_new_comment_emojis.html",controller:["$scope","popbox","pop_data",function(a,b,c){var d=a.vm={emojis:[],emoji_groups:[],current_page:0},f=c.scope.vmNewComment;a.popbox=b,d.emojis=[];var g=72,h=[],i=[];$.each(kzi.emojis,function(a){0!==a&&a%g===0&&(i.push(h),h=[]),h.push(this)}),i.push(h),d.emoji_groups=i,d.emojis=i[0],d.js_to_page=function(a){d.current_page=a,d.emojis=i[a]},d.js_insert_emoji=function(a){var c=e.find("textarea")[0];j(f,c," :"+a+": "),b.close()},d.js_close=function(){b.close()},d.js_mousedown=function(a){a.stopPropagation(),a.preventDefault()}}],resolve:{pop_data:function(){return{scope:a}}}}).open()}}}}function b(a,b,c,d,e,f,g){var h=a.parent_vm=a.$parent.vm,i=a.vm={pid:"",comments_loading_done:!1,comments:[],isArchived:h.task&&1===h.task.archived||a.project&&1===a.project.archived,new_comment:{message:"",uploading_files:[],files:[]},at_members:[]};a.is_add_comment=!1,a.permission=0;var j,k,l,m,n=function(a){var b=[];_.each(a,function(a){a.files=_.each(a.files,function(a){a.icon=kzi.helper.build_file_icon(a)}),2===a.type&&f.xtype===kzi.constant.xtype.task?(h.task.creator=a.owner,h.task.created_at=a.create_date):3===a.type&&f.xtype===kzi.constant.xtype.task?(h.task.completer=a.owner,h.task.completed_at=a.create_date):b.push(a)}),i.comments=b},o=function(c){a.permission=c&&c.permission?c.permission:a.entity.permission,c&&(j=i.pid=c.pid,k=c.xtype,l=i.xid=c.xid,m=c.comment_id),e.comment&&e.comment.xid===l?i.new_comment=e.comment:i.new_comment=e.comment={xid:l},i.comments_loading_done=!1,g.find(".comment-item").removeClass("comment-focus-animate"),i.comments=[],wt.data.comment.get_list(j,k,l,function(c){if(n(c.data),i.comments_loading_done=!0,a.project){var e=_.filter(a.project.members,function(a){return a.uid!==b.global.me.uid&&1===a.status});i.at_members=e}d(function(){$("#atwho-container").bind("mousedown",function(a){a.stopPropagation(),a.preventDefault()})})},function(){i.comments_loading_done=!0})};a.$on(kzi.constant.event_names.load_comments,function(a,b){o(b)}),a.$on(kzi.constant.event_names.on_task_complete,function(a,c){c&&c.tid===l&&(0===c.completed?(h.task.completer=null,h.task.completed_at=""):1===c.completed&&(h.task.completer=b.global.me,h.task.completed_at=(new Date).getTime()))}),a.$on(kzi.constant.event_names.on_comment_new,function(a,b){j===b.pid&&k===b.xtype&&l===b.xid&&(b.comment.files=_.each(b.comment.files,function(a){a.icon=kzi.helper.build_file_icon(a)}),i.comments.push(b.comment))}),a.$on(kzi.constant.event_names.clear_comments,function(){i.comments=[]}),i.js_repeat_done=function(){if(!_.isEmpty(i.comments)&&1==b.global.is_scroll_comment){b.global.is_scroll_comment=!1;var a=i.comments[i.comments.length-1];m&&d(function(){var b=$(".new-comment").parents(".mCustomScrollbar").eq(0).mCustomScrollbar("update"),c=_.findIndex(i.comments,{cid:m});m===a.cid?b.mCustomScrollbar("scrollTo","bottom"):b.mCustomScrollbar("scrollTo",".comment-item:eq("+c+")"),g.find(".comment-item:eq("+c+")").addClass("comment-focus-animate")},250)}},i.js_save_comment=function(c){var d=c;if(d.uploading_files&&d.uploading_files.length>0)return void kzi.msg.warn("评论文件正在上传中...");var e=_.where(d.files,{pid:a.project.pid});d.fids=_.pluck(e,"fid"),_.isEmpty(d.message)&&_.isEmpty(d.fids)||d.is_saving||(d.is_saving=!0,_.isEmpty(d.message)&&(d.message=e.length+"个附件，"+_.pluck(e,"name")),wt.data.comment.publish(f.pid,f.xtype,f.xid,d.message,d.fids||"",function(a){var c=a.data;if(_.isEmpty(c.files)||_.each(c.files,function(a){a.icon=kzi.helper.build_file_icon(a)}),i.comments.push(c),"tasks"===f.xtype)b.$broadcast(kzi.constant.event_names.on_task_comment,{tid:f.xid});else if("posts"===f.xtype){var d={};d.post_id=f.xid,d.last_reply_user=b.global.me,d.last_reply_date=(new Date).getTime(),b.$broadcast(kzi.constant.event_names.on_post_comment,d)}},null,function(){d.is_saving=!1,a.is_add_comment=!1}),d.message="",d.files&&(e.length===d.files.length?d.files=[]:d.files=_.reject(d.files,function(b){return b.pid===a.pid})),d.fids=[])},i.js_reply_comment=function(a){var b="回复 @"+a.owner.name+" : ",c=b.length,e="";e=a.raw_message.indexOf(">")>=0?a.raw_message.replace(/\n *>/i,"\n >>"):a.raw_message,e=e.length>60?"\n\n\n >"+e.substr(0,60)+"...":"\n\n\n >"+e,i.new_comment.message=b+e;var f=".new-comment";$(f).parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",f),d(function(){var a=$(f).find("textarea")[0];if(a.focus(),document.selection){var b=a.createTextRange();b.moveStart("character",c),b.collapse(),b.select()}else"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd&&(a.select(),a.selectionStart=a.selectionEnd=c)}),d(function(){$(f).find("textarea").scrollTop(0)},100)},i.js_pop_delete_comment=function(b,d){c.popbox({target:b,templateUrl:"/tpl/common/pop_comment_delete.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var e=a.vm={},g=c.scope.$parent.vm;e.js_sure_delete=function(){c.scope.vm.comments=_.reject(c.scope.vm.comments,function(a){return a.cid===d.cid}),wt.data.comment.del(f.pid,d.cid,f.xtype,f.xid,function(a){"tasks"===f.xtype&&g.task&&(g.task.badges.comment_count-=1)}),b.close()},e.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{scope:a}}}}).open()}}function c(){return{restrict:"E",controller:"commentListCtrl",templateUrl:"/ycjs/directive/comment/comment_list.html"}}angular.module("wt.directive.comment",[]).directive("wtNewComment",a).controller("commentListCtrl",b).directive("commentList",c),a.$inject=["$parse","$popbox","$timeout","$wtUploadFile"],b.$inject=["$scope","$rootScope","$popbox","$timeout","tempData","locator","$element"],c.$inject=[]}(),function(){"use strict";function a(a){return{restrict:"A",link:function(b,c,d){c.bind("click",function(c){var e=b.$eval(d.wtEntityShare);_.isEmpty(e)&&4!==e.length||a.popbox({target:c,templateUrl:"/ycjs/directive/entity/pop_share_entity.html",controller:["$scope","popbox",function(a,b){a.popbox=b,a.share={},a.share.email_address="";var c=e[1],d=e[2],f=e[3],g="",h="";d===kzi.constant.xtype.task?(a.entity="任务",g=f.tid,h="tasks"):d===kzi.constant.xtype.post?(a.entity="话题",g=f.post_id,h="posts"):d===kzi.constant.xtype.page?(a.entity="文档",g=f.page_id,h="pages"):d===kzi.constant.xtype.event?(a.entity="日程",g=f.event_id,h="events"):d===kzi.constant.xtype.file&&(a.entity="文件",g=f.fid,h="files"),a.step="select_share_method",f.share_id?(a.showing_link=!0,a.share_link=window.location.origin+"/share/"+h+"/"+f.share_id,a.input_link_focus=!0):a.showing_link=!1;var i=function(){wt.data.task.share(c,g,a.share.email_address,function(){a.send_success=!0},null,function(){a.is_sharing=!1})},j=function(){wt.data.file.share(c,g,a.share.email_address,function(){a.send_success=!0},null,function(){a.is_sharing=!1})},k=function(){wt.data.post.share(c,g,a.share.email_address,function(){a.send_success=!0},null,function(){a.is_sharing=!1})},l=function(){wt.data.page.share(c,g,a.share.email_address,function(){a.send_success=!0},null,function(){a.is_sharing=!1})},m=function(){wt.data.event.share(c,g,a.share.email_address,function(){a.send_success=!0},null,function(){a.is_sharing=!1})};a.js_step=function(b){a.step=b},a.js_close=function(){b.close()},a.js_share_entity=function(){switch(a.is_sharing=!0,d){case kzi.constant.xtype.task:i();break;case kzi.constant.xtype.file:j();break;case kzi.constant.xtype.page:l();break;case kzi.constant.xtype.post:k();break;case kzi.constant.xtype.event:m()}},a.toggle_share_link=function(){a.showing_link?wt.data.share.disable_share_link(c,h,g,function(){a.showing_link=!a.showing_link,f.share_id="",a.share_link=""},function(){kzi.msg.error("关闭共享链接失败")},function(){}):wt.data.share.enable_share_link(c,h,g,function(b){a.share_link=window.location.protocol+"//"+window.location.host+"/share/"+h+"/"+b.data,a.showing_link=!a.showing_link,f.share_id=b.data,a.input_link_focus=!0},function(){kzi.msg.error("打开共享链接失败")},function(){})}}]}).open()})}}}function b(){return{restrict:"A",link:function(a,b,c){b.click(function(a){$(this).parents("ul.dropdown-menu").parent("li").removeClass("open");var b=$(".slide-content:visible").html(),c=document.getElementById("printFrame");$(c.contentWindow.document).find(".ng-scope").html(b);var d=$(c.contentWindow.document).find(".mCS_img_loaded");if(d.length>0){var e=d.length,f=1;d.bind("load",function(){f===e?(c.contentWindow.do_print(),setTimeout(function(){$(c.contentWindow.document).find(".ng-scope").html("")},500)):f++})}else setTimeout(function(){c.contentWindow.do_print()},200),setTimeout(function(){$(c.contentWindow.document).find(".ng-scope").html("")},500)})}}}function c(){return{restrict:"A",link:function(a,b,c){b.click(function(a){$(this).parents("ul.dropdown-menu").parent("li").removeClass("open");var b=$("[class$='-detail']").html(),c=document.getElementById("printFrame");$(c.contentWindow.document).find(".ng-scope").html(b),setTimeout(function(){c.contentWindow.do_print()},200),setTimeout(function(){$(c.contentWindow.document).find(".ng-scope").html("")},500)})}}}function d(a){return{restrict:"A",link:function(b,c,d){c.bind("click",function(c){var e=b.$eval(d.popMember),f=b.$eval(d.wtPopMember);_.isEmpty(f)||("true"===d.stopPropagation&&c.stopPropagation(),a.popbox({target:c,templateUrl:"/tpl/directive/pop_member.html",controller:["$scope","popbox",function(a,c){a.popbox=c,a.member=e,a.action_name=f[0].name,a.ongoing=f[0].ongoing,a.js_action_member=function(e){if(!a.pop_member_actioning){var g=b.$eval(d.popExtendedAttr);a.pop_member_actioning=!0,f[0].click(a,c,e,function(){a.pop_member_actioning=!1,c.close()},g)}},a.js_close=function(){c.close()}}]}).open())})}}}function e(a,b,c){return{restrict:"A",link:function(d,e,f){var g=a(f.wtPopToggleMembers),h=a(f.allMemberClick);e.bind("click",function(a){var e=d.$eval(f.pid),i=d.$eval(f.entity),j=f.type;return e?void b.popbox({target:a,templateUrl:"/tpl/directive/toggle_members.html",controller:["$rootScope","$scope","popbox",function(a,b,f){b.popbox=f,b.js_close=function(){f.close()},b.type=j,b.xEntity=i,b.search_user_input="",b.title="","member"===j?b.title="分配任务":"watch"===j?b.title="添加关注":"attendee"===j&&(b.title="参与人");var k=function(a){var c=null;"member"===j?c=wt.bus.member.get_scope_members_for_assigned(a,i.members):"watch"===j?c=wt.bus.watch.get_scope_watcher_members(a,i.watchers):"attendee"===j&&(c=wt.bus.member.get_scope_members_for_assigned(a,i.attendees)),b.members=c};d.project&&d.project.members?k(d.project.members):c.loadProjectMembers(e,function(a){k(a)}),b.js_toggle_member_inner=function(a,c){_.isFunction(g)&&g(d,{$event:a,member:c,xEntity:b.xEntity})},b.js_watch_all_member_inner=function(a,c){h(d,{$event:a,members:c,xEntity:b.xEntity}),f.close()},b.js_all_member_inner=function(a,c){h(d,{$event:a,members:c,xEntity:b.xEntity}),f.close()}}]}).open():void kzi.msg.info("请先选择所属项目，再选择人员！")})}}}function f(a){return{restrict:"E",templateUrl:"/tpl/directive/toggle_members.html",link:function(b,c,d){var e=a(d.toggleClick),f=a(d.allMemberClick),g=(b.$eval(d.pid),b.$eval(d.entity)),h=d.type;b.type=h,b.xEntity=g,b.search_user_input="",b.title="",b.show_to_step=!0,"member"===h?b.title="分配任务":"watch"===h?b.title="添加关注":"attendee"===h&&(b.title="参与人");var i=null;"member"===h?i=wt.bus.member.get_scope_members_for_assigned(b.project.members,g.members):"watch"===h?i=wt.bus.watch.get_scope_watcher_members(b.project.members,g.watchers):"attendee"===h&&(i=wt.bus.member.get_scope_members_for_assigned(b.project.members,g.attendees)),b.members=i,b.js_toggle_member_inner=function(a,c){_.isFunction(e)&&e(b,{$event:a,member:c,xEntity:b.xEntity})},b.js_watch_all_member_inner=function(a,c){_.isFunction(f)&&f(b,{$event:a,members:c,xEntity:b.xEntity})}}}}function g(a){return{restrict:"E",templateUrl:"/tpl/directive/item_comment_activity.html",link:function(b,c,d){b.tab_active={};var e=null;b.select_tab_comment=function(){b.tab_active.activity=!1,b.tab_active.comment=!0,b.$broadcast(kzi.constant.event_names.clear_item_activities)},b.select_tab_activity=function(){b.tab_active.activity=!0,b.tab_active.comment=!1,b.$broadcast(kzi.constant.event_names.reload_item_activities,e||b.locator)},b.$on(kzi.constant.event_names.select_comment_tab,function(c,d){b.select_tab_comment(),e=d,a(function(){b.$broadcast(kzi.constant.event_names.load_comments,e||b.locator)})}),b.$on(kzi.constant.event_names.clear_comment_activity,function(a,c){b.$broadcast(kzi.constant.event_names.clear_item_activities),b.$broadcast(kzi.constant.event_names.clear_comments)})}}}function h(){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/entity_item_deny.html"}}angular.module("wt.directive").directive("wtEntityShare",a).directive("wtEntityPrint",b).directive("wtDetailPrint",c).directive("wtPopMember",d).directive("wtPopToggleMembers",e).directive("wtToggleMembers",f).directive("wtItemCommentActivity",g).directive("wtEntityDeny",h),a.$inject=["$popbox"],b.inject=[],c.$inject=[],d.$inject=["$popbox"],e.$inject=["$parse","$popbox","globalDataContext"],f.$inject=["$parse"],g.$inject=["$timeout"]}(),function(){"use strict";function a(a){return{restrict:"E",replace:!0,scope:!0,controller:["$scope","locator","globalDataContext",function(b,c,d){b.locator=c,b.entity={data:null};var e=function(){a(function(){switch(c.xtype){case kzi.constant.xtype.task:b.$broadcast(kzi.constant.event_names.load_entity_task,b.locator);break;case kzi.constant.xtype.file:b.$broadcast(kzi.constant.event_names.load_entity_file,b.locator);break;case kzi.constant.xtype.page:b.$broadcast(kzi.constant.event_names.load_entity_page,b.locator);break;case kzi.constant.xtype.post:b.$broadcast(kzi.constant.event_names.load_entity_post,b.locator);break;case kzi.constant.xtype.event:b.$broadcast(kzi.constant.event_names.load_entity_event,b.locator);break;case kzi.constant.xtype.email:b.$broadcast(kzi.constant.event_names.load_entity_mail,b.locator)}},200)};b.loadData=function(){return b.entity.loading_done=!1,b.entity.permission=0,c.pid?void d.loadFullProject(c.pid,!1,function(a){b.project=a,e()},function(){b.entity.loading_done=!0,b.entity.permission=0}):void e()},b.clearData=function(){b.entity.loading_done=!1,b.entity.permission=0,b.project=null}}],templateUrl:"/ycjs/directive/entity/entity.html",link:function(b,c,d){var e=500,f=0,g=700,h=function(c){$(c.target).hasClass("slide-content")||$(c.target).parents(".slide-content").length>0||$(c.target).hasClass("slide-trigger")||$(c.target).parents(".slide-trigger").length>0||$(c.target).hasClass("atwho-container")||$(c.target).parents(".atwho-container").length>0||$(c.target).hasClass("popbox")||$(c.target).parents(".popbox").length>0||$(c.target).parents(".notifications").length>0||$(c.target).hasClass("fancybox-overlay")||$(c.target).parents(".fancybox-overlay").length>0||$(c.target).hasClass("layout_right_sidebar")||$(c.target).parents(".layout_right_sidebar").length>0||"fancybox-buttons"===$(c.target).attr("id")||$(c.target).parents("#fancybox-buttons").length>0||$(c.target).hasClass("fancybox-overlay")||$(c.target).parents(".fancybox-overlay").length>0||"fancybox-thumbs"===$(c.target).attr("id")||$(c.target).parents("#fancybox-thumbs").length>0||$(c.target).hasClass("fancybox-wrap")||$(c.target).parents(".fancybox-wrap").length>0||$(c.target).hasClass("right_click_trigger")||$(c.target).parents(".right_click_trigger").length>0||$(c.target).parents(".line-item").length>0||$(c.target).hasClass("line-item")||$(c.target).parents(".file-upload-process").length>0||$(c.target).hasClass("file-upload-process")||a(function(){b.locator.close()})};b.locator.onStartOpen(function(a){c.animate({right:f+"px","max-width":g,width:"100%",overflow:"visible"},e,function(){$("html").addClass("js_wt_slideing_show"),a||b.loadData()}),$(document).bind("mousedown.wtSlideBodyClose drag",h),a&&b.loadData()}),b.locator.onStartClose(function(){c.find("div:visible").first().css({"max-width":g}),c.animate({"max-width":"0",right:"0"},e,function(){$("html").removeClass("js_wt_slideing_show")}),b.clearData(),$(document).unbind("mousedown.wtSlideBodyClose drag")})}}}angular.module("wt.directive.slide",[]).directive("wtSlideBody",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a){return{restrict:"A",replace:!1,controller:[function(){}],link:function(b,c,d){b.show=function(b){a.popbox({target:b,templateUrl:"/tpl/directive/team_visibility_options.html",controller:["$scope","popbox",function(a,b){a.visibilityArr=[{visibility:kzi.constant.team_visibility["private"],desc:"私有团队",icon:"icon-private",intro:"只有成员可以访问团队主页和团队可见项目"},{visibility:kzi.constant.team_visibility["public"],desc:"公开团队",icon:"icon-public",intro:"注册用户可以访问团队主页和公开项目"}],a.js_close=function(){b.close()}}]}).open()}}}}function b(a){return{restrict:"E",scope:{team:"=team"},templateUrl:"/ycjs/directive/team/team_member_add_by_link.html",link:function(a,b,c){var d=a.dm={};d.join_team_link=window.location.origin+"/team/link/join?code="+a.team.link_join_code,d.toggle_join_team_link=function(){a.team.link_join_code?wt.data.team.join_link_close(a.team.team_id,function(){a.team.link_join_code="",d.join_team_link=""},function(){}):wt.data.team.join_link_open(a.team.team_id,function(b){a.team.link_join_code=b.data,d.join_team_link=window.location.origin+"/team/link/join?code="+a.team.link_join_code},function(){kzi.msg.error("生成加入团队链接错误")})}}}}function c(a){return{restrict:"E",scope:{team:"=team"},controller:"teamMemberInviteCtrl",templateUrl:"/ycjs/directive/team/team_member_add_by_email.html"}}angular.module("wt.directive").directive("showTeamVisibilityOptions",a).directive("addTeamMemberByLink",b).directive("addTeamMemberByEmail",c),a.$inject=["$popbox"],b.$inject=["$rootScope"],c.$inject=["$rootScope"]}(),function(){"use strict";function a(){return{restrict:"E",scope:{teamId:"=",data:"="},replace:!0,templateUrl:"/ycjs/directive/team/team_dashboard_overview.html",link:function(a){var b=a.vm={team_id:a.teamId,percent_complete:0,percent_delay:0};a.$watch("data",function(c,d){c&&(b.percent_complete=a.data.completed/(a.data.completed+a.data.uncompleted)*100,_.isNaN(b.percent_complete)?b.percent_complete=0:b.percent_complete=~~b.percent_complete,b.percent_delay=a.data.expired/a.data.uncompleted*100,_.isNaN(b.percent_delay)?b.percent_delay=0:b.percent_delay=~~b.percent_delay)})}}}angular.module("wt.directive").directive("wtTeamDashboardOverview",a),a.$inject=[]}(),function(){"use strict";function a(a){return{restrict:"E",replace:!0,scope:{stats:"="},templateUrl:"/ycjs/directive/team/team_dashboard_stats.html",link:function(b,c,d){var e=b.vm={};e.js_remove_stats=function(b){wt.data.team.del_team_stats(b.pid,b.type,function(c){200===c.code&&a.$broadcast(kzi.constant.event_names.team_remove_stats,{pid:b.pid,type:b.type})})}}}}function b(){return{restrict:"E",scope:{data:"="},templateUrl:"/ycjs/directive/team/team_dashboard_stats_overview.html",link:function(a,b,c){function d(a){e.percent_complete=a.completed/(a.completed+a.uncompleted)*100,e.percent_todo=a.uncompleted/(a.completed+a.uncompleted)*100,e.percent_delay=a.expired/a.uncompleted*100;var c={name:"任务数",colorByPoint:!0,data:[{name:"完成",color:kzi.constant.graph_color.done,y:a.completed},{name:"待做",color:kzi.constant.graph_color.todo,y:a.uncompleted}]};0===a.completed&&0===a.uncompleted&&(c={name:" ",data:[{name:"请先创建任务",color:"#EEE",y:.01}]}),$(b).find(".left-pie-chart").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",margin:[50,0,0,0]},credits:{enabled:!1},title:null,tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1}}},series:[c]})}var e=a.vm={percent_complete:0,percent_todo:0,percent_delay:0};d(a.data),a.$watch("data",function(a){d(a)})}}}function c(){return{restrict:"E",scope:{data:"="},templateUrl:"/ycjs/directive/team/team_dashboard_stats_entry.html",link:function(a,b,c){var d=a.vm={part_loading_done:!1,config:{chart:{height:240},xAxis:{categories:[]},series:[{data:[],name:"未完成",stacking:"normal"},{data:[],name:"已完成",stacking:"normal"}]}},e=a.data;e=_.sortBy(e,function(a){return a.completed+a.uncompleted}),e=Array.prototype.slice.call(e).reverse(),e.forEach(function(a,b){d.config.xAxis.categories.push(a.name),d.config.series[0].data.push(a.uncompleted),d.config.series[1].data.push(a.completed)}),d.part_loading_done=!0}}}function d(){return{restrict:"E",scope:{data:"="},templateUrl:"/ycjs/directive/team/team_dashboard_stats_member.html",link:function(a,b,c){var d=a.vm={part_loading_done:!1,config:{chart:{height:240},xAxis:{categories:[]},series:[{data:[],name:"未完成",stacking:"normal"},{data:[],name:"已完成",stacking:"normal"}]}};a.data=_.sortBy(a.data,function(a){return a.completed}),a.data=Array.prototype.slice.call(a.data).reverse();for(var e=0;e<a.data.length;e++)d.config.xAxis.categories.push(a.data[e].display_name),d.config.series[0].data.push(parseInt(a.data[e].uncompleted)),d.config.series[1].data.push(parseInt(a.data[e].completed));d.part_loading_done=!0}}}function e(){return{restrict:"E",scope:{data:"="},templateUrl:"/ycjs/directive/team/team_dashboard_stats_5day.html",link:function(a,b,c){var d=a.vm={part_loading_done:!1,xCategories:[],completed:[],config:{chart:{height:240},xAxis:[],series:[]}};a.data.forEach(function(a,b){d.xCategories.push(moment(a.datetime).format("MM-DD")),d.completed.push(a.completed)}),d.config.xAxis=[{title:{text:""},categories:d.xCategories}],d.config.series=[{data:d.completed,name:"完成"}],d.part_loading_done=!0}}}angular.module("wt.directive").filter("teamStatsType",[function(){return function(a){return kzi.constant.stats_type[a-1].desc}}]).directive("wtDashboardStats",a).directive("wtDashboardStatsOverview",b).directive("wtDashboardStatsEntry",c).directive("wtDashboardStatsMember",d).directive("wtDashboardStats5day",e),a.$inject=["$rootScope"],b.$inject=[],c.$inject=[],d.$inject=[],e.$inject=[]}(),function(){"use strict";function a(a,b,c){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"/tpl/directive/editor.html",scope:{pid:"=pid"},link:function(a,d,e,f,g){var h=d.find("textarea");h.addClass("help-block form-control gollum-editor-body");var i=function(a){h.val(a).trigger("change")};d.GollumEditor({AfterClickFunBar:function(a){i(a)}});var j=d.find(".function-link"),k=null;d.find(".editor-wrap").bind("click",function(a){null!==k&&(k.close(),k=null)}),j.bind("click",function(c){c.stopPropagation(),c.preventDefault(),a.$apply(function(){return null!=k?(k.close(),void(k=null)):void b.popbox({target:c,templateUrl:"/tpl/common/pop_add_link.html",controller:["$scope","popbox",function(a,b){a.popbox=b,k=b,a.js_close=function(){b.close()};var c=$.GollumEditor.FunctionBar.getFieldSelection(h);_.isEmpty(c)||(c=$.trim(c),/^\[.+\]\(.+\)$/gi.test(c)===!0?(a.link_text=c.substring(1,c.indexOf("](")),a.link_address=c.substring(c.indexOf("](")+2,c.length-1)):(a.link_text=c,a.link_address="")),a.js_insert_link=function(c){$.GollumEditor.FunctionBar.replaceFieldSelection(h,"["+a.link_text+"]("+a.link_address+")"),b.close(),i(h.val())},a.js_mousedown=function(a){a.stopPropagation(),a.preventDefault()}}]}).open().then(function(){k=null})})});var l=d.find(".function-image"),m=null;d.find(".editor-wrap").bind("click",function(a){m&&(m.close(),m=null)}),l.bind("click",function(d){d.stopPropagation(),d.preventDefault();var e=a.pid;a.$apply(function(){return m?(m.close(),void(m=null)):void b.popbox({target:d,templateUrl:"/tpl/common/pop_add_image.html",controller:["$rootScope","$scope","$filter","$stateParams","popbox","$sce",function(a,b,d,f,g,j){b.popbox=g,m=g,b.step=0,b.js_step=function(a){b.step=a},b.js_close=function(){g.close()},b.pid=e,b.js_show_images=function(){b.step=1,_.isEmpty(b.images)&&(b.images_loading_done=!1,b.images=null,wt.data.file.get_image_list(e,function(a){b.images=a.data},null,function(){b.images_loading_done=!0}))},b.js_select_image=function(a){b.step=0,b.image_address=kzi.config.wtprj_url+a.path,b.js_insert_image(null)},b.js_insert_image=function(a){$.GollumEditor.FunctionBar.replaceFieldSelection(h,"![]("+b.image_address+")"),g.close(),i(h.val())},b.js_files_select=function(a){if(a&&0!=a.length){b.uploading_file=!0;var d=[{original:a[0],data:{target:"prj",type:"entity",pid:e}}];c.addFiles(e,d,function(a,c){c&&c.file&&"entity"===c.type&&(_.isEmpty(b.images)||b.images.push(c.file),b.image_address=kzi.config.wtprj_url+c.file.path,b.js_insert_image(null),b.uploading_file=!1)})}}}]}).open().then(function(){m=null})})}),a.$on("$destroy",function(a){})}}}angular.module("wt.directive").directive("wtEditor",a),a.$inject=["$rootScope","$popbox","$wtUploadFile"]}(),function(){"use strict";function a(a,b){return{restrict:"A",scope:!0,link:function(c,d,e){var f=a(e.atwhoKeydown),g={emojis:!0,member:!0};e.wtAtwho&&(g=$.extend(g,c.$eval(e.wtAtwho))),d.bind("keydown.atwho-ext",function(a){var b=a.which||a.keyCode;(b===kzi.constant.keyASCIIs.ESC||b===kzi.constant.keyASCIIs.ENTER)&&$(".atwho-view:visible").length>0&&a.stopPropagation()}),$(document).on("mousedown",".atwho-container",function(a){a.stopPropagation(),a.preventDefault()}),g.emojis&&d.atwho({at:":",data:kzi.emojis,show_the_at:!0,displayTpl:'<li data-value=":${name}:"><img src="/img/emoji/${name}.png" class="emoji" /> ${name}</li>',insertTpl:":${name}:",callbacks:{}}),e.atwhoMembers&&g.member&&c.$watch(e.atwhoMembers,function(a,e){if(_.isEmpty(a))return void d.atwho({at:"@",data:[]});var g=['<li data-value="@${name}">','<a href title="${display_name}" class="avatar avatar-30">','<span class="avatar-face"><span class="avatar-text">${firstText}</span></span>',"</a>&nbsp; ",'<span class="avatar-name">${display_name}</span></span> <small>(${name})</small>',"</li>"].join("");d.atwho({at:"@",limit:5,show_the_at:!0,data:a,displayTpl:['<li data-value="@${name}"><a href title="${display_name}"',' class="avatar avatar-30"><span class="avatar-face">','<img src="'+kzi.config.wtavatar_url+'40/${avatar}"/></a>&nbsp; ','<span class="avatar-name">${display_name}</span></span> <small>(${name})</small>',"</li>"].join(""),searchKey:"display_name",insertTpl:"@${name}",callbacks:{keydown:function(a,b){f&&!b&&c.$apply(function(){f(c,{$event:a})})},filter:function(a,b,c){return _.isEmpty(a)?b:_.isEmpty(b)?b:_.filter(b,function(b){return b.display_name.toLowerCase().indexOf(a.toLowerCase())>-1||b.name.toLowerCase().indexOf(a.toLowerCase())>-1})},sorter:function(a,b,c){return b},tplEval:function(a,c){var d="";if(a===this.setting.insertTpl||null!==c.avatar&&"default_avatar.png"!==c.avatar)d=a.replace(/\$\{([^\}]*)\}/g,function(a,b,d){return c[b]});else{var e=b("firstText")(c.display_name);c.firstText=e,d=g.replace(/\$\{([^\}]*)\}/g,function(a,b,d){return c[b]})}return d}}})})}}}angular.module("wt.directive").directive("wtAtwho",a),a.$inject=["$parse","$filter"]}(),angular.module("wt.directive.post_item",[]).directive("wtPostItem",[function(){"use strict";return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/post_item.html",link:function(a,b,c){}}}]),function(){"use strict";function a(a,b){return{restrict:"A",link:function(c,d,e){var f=b(e.wtPageDelete);d.bind("click",function(b){var d=e.pid,g=e.pageId;a.popbox({target:b,templateUrl:"/ycjs/directive/page/pop_delete_page.html",controller:["$scope","popbox",function(a,b){a.popbox=b,a.js_close=function(){b.close()},a.js_delete=function(){
a.deleting=!0,wt.data.page.trash(d,g,function(){a.js_close(),f(c,{$event:event,$popbox:b})},null,function(){a.deleting=!1})}}]}).open()})}}}angular.module("wt.directive.page",[]).directive("wtPageDelete",a),a.$inject=["$popbox","$parse"]}(),function(){"use strict";function a(a,b){return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/page_item.html",scope:!0,link:function(c,d,e){var f=c.dm={view_type:"tree"===e.viewType?"tree":"list"};_.isEmpty(e.viewType)||c.$watch(e.viewType,function(a,b){_.isEmpty(a)||(f.view_type="tree"===a?"tree":"list")}),f.open_page_detail=function(c,d){e.changeRoute?a.path("/project/"+d.pid+"/page/"+d.page_id):b.openPage(d.pid,d.page_id)}}}}angular.module("wt.directive.page_item",[]).directive("wtPageItem",a),a.$inject=["$location","locator"]}(),function(){"use strict";function a(a,b){return{restrict:"E",replace:!0,templateUrl:"/ycjs/directive/archive/archiveentry_item.html",scope:!0,link:function(c,d,e){var f=c.dm={};_.isEmpty(e.viewType)||c.$watch(e.viewType,function(a,b){_.isEmpty(a)||(f.view_type="tree"===a?"tree":"list")}),f.open_page_detail=function(c,d){e.changeRoute?a.path("/project/"+d.pid+"/page/"+d.page_id):b.openPage(d.pid,d.page_id)}}}}angular.module("wt.directive.archiveentry_item",[]).directive("wtArchiveEntryItem",a),a.$inject=["$location","locator"]}(),angular.module("wt.directive.project",[]).directive("wtProjectGridBoardItem",["$parse","$popbox","$rootScope","globalDataContext",function(a,b,c,d){"use strict";return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/project_grid_board_item.html",scope:{project:"=project",team:"=team",fprojects:"=fprojects"},link:function(a,b,c){a.icon=c.icon,a.js_star_toggle=function(a,b){wt.bus.project.set_star_toggle(b,function(){d.cache.project.set_star(b.pid,b.is_star)}),a.preventDefault(),a.stopPropagation()},a.js_favorite_toggle=function(b,c){wt.bus.project.set_fav_toggle(c,function(){d.cache.project.set_favorite(c.pid,c.is_favorite),_.remove(a.fprojects,function(a){return a.pid===c.pid})})}}}}]).directive("wtProjectGridItem",["$parse","$popbox","$state","globalDataContext",function(a,b,c,d){"use strict";return{restrict:"E",replace:!0,templateUrl:"/tpl/directive/project_grid_item.html",scope:{project:"=project"},link:function(a,b,e){var f=a.vm={icon:"star"!==e.like?"heart":"star",type:"star"!==e.like?"favorite":"star"};f.js_toggle_star=function(b){1!=a.project.archived&&(a.project.is_star=1===a.project.is_star?0:1,wt.data.project.set_prefs(a.project.pid,"is_star",a.project.is_star,function(b){d.cache.project.set_star(a.project.pid,a.project.is_star)},null,null))},f.js_toggle_favorite=function(b){var c=a.project.is_favorite?0:1;a.project.is_favorite=c,wt.data.project.set_favorite(a.project.pid,c,function(b){d.cache.project.set_favorite(a.project.pid,a.project.is_favorite)},null,null)},f.js_toggle_like=function(a){return"star"===f.type?f.js_toggle_star(a):f.js_toggle_favorite(a)},f.go_project=function(){c.go("project",{pid:a.project.pid})}}}}]).directive("showProjectVisibilityOptions",["$popbox",function(a){"use strict";return{restrict:"A",replace:!1,controller:[function(){}],link:function(b,c,d){b.show=function(b){a.popbox({target:b,templateUrl:"/tpl/directive/project_visibility_options.html",controller:["$scope","popbox",function(a,b){a.visibilityArr=[{visibility:kzi.constant.prj_visibility["private"],desc:"私有项目",icon:"icon-private",intro:"只有加入项目的成员才能看到该项目内容"},{visibility:kzi.constant.prj_visibility["protected"],desc:"团队可见",icon:"icon-protected",intro:"项目所属的团队成员都可以访问该项目内容"},{visibility:kzi.constant.prj_visibility["public"],desc:"公开项目",icon:"icon-public",intro:"所有注册用户都可以访问该项目内容"}],a.js_close=function(){b.close()}}]}).open()}}}}]),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"/ycjs/directive/project/set_team_labels.html",scope:{backfn:"&",closefn:"&",team:"="},link:function(b,c,d){var e=b.vm={cancelFn:b.cancelfn,backFn:b.backfn,closeFn:b.closefn,project:b.project,team:b.team,task:b.team,type:d.type,isBack:d.backfn?!0:!1,isClose:d.closefn?!0:!1,labels:kzi.constant.labels,isLabelCheck:!1,currentLabel:null};e.labels=b.team.default_labels,e.js_popup_false=function(a,b,c){},e.js_popup_true=function(c,d,f){d?e.currentLabel={name:d,desc:f}:e.currentLabel=null,a.popbox({target:c,template:'<wt-set-labels-add type="team" team="vm.team"  currentlabel="vm.currentLabel" isback="false" isclose="true" isnewpopup="true" isnewheader="true"></wt-set-labels-add>',controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var d=a.vm={type:c.type,project:c.project,team:c.team,task:c.task,backFn:c.backFn,closeFn:c.closeFn,isNewPopup:c.isNewPopup,currentLabel:c.currentLabel,isNewHeader:!0};d.js_step=function(a){d.step=a},d.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{$scope:b,type:e.type,project:e.project,team:e.team,task:e.task,backFn:e.backFn,closeFn:e.closeFn,currentLabel:e.currentLabel,isNewPopup:e.isNewPopup}}}}).open()},e.js_step=function(a){b.step=a}}}}function b(){return{restrict:"E",scope:{backfn:"&",closefn:"&",project:"="},templateUrl:"/ycjs/directive/project/set_project_labels.html",link:function(a,b,c){var d=a.vm={currentLabel:null,isHeader:!0};"false"===c.header&&(d.isHeader=!1),c.backfn&&(d.isBack=!0),a.js_step=function(b){1===b&&(d.currentLabel=null),a.step=b},a.js_close=function(){a.$parent.popbox.close()},a.js_new_label=function(b){d.currentLabel=null,a.step=b},a.js_edit_label=function(b,c,e){d.currentLabel={name:b,desc:c},a.step=e},a.task_labels=a.project.labels}}}function c(a){return{restrict:"E",scope:{backfn:"&",closefn:"&",project:"=",task:"=",batchsetlabelfn:"="},templateUrl:"/ycjs/directive/project/set_task_labels.html",link:function(b,c,d){var e=b.vm={currentLabel:null,isHeader:!0};"false"===d.header&&(e.isHeader=!1),d.backfn&&(e.isBack=!0),b.js_step=function(a){1===a&&(e.currentLabel=null),b.step=a},b.js_close=function(){b.$parent.popbox.close()},b.js_new_label=function(a){e.currentLabel=null,b.step=a},b.js_edit_label=function(a,c,d){e.currentLabel={name:a,desc:c},b.step=d},b.task_labels=wt.bus.project.label.load(b.task,b.project.labels),b.js_toggle_label=function(c){b.batchsetlabelfn?(c.assigned=1===c.assigned?0:1,b.batchsetlabelfn(c)):b.task&&(wt.bus.task.set_toggle_label(b.project.pid,b.task,c),a.$broadcast(kzi.constant.event_names.on_task_update,b.task)),b.setLabel&&b.setLabel({label:c})}}}}function d(a,b){return{restrict:"E",scope:{backfn:"&",closefn:"&",project:"=",team:"=",task:"=",currentlabel:"="},templateUrl:"/ycjs/directive/project/set_labels_add.html",link:function(c,d,e){var f=c.vm={cancelFn:c.cancelfn,backFn:c.backfn,closeFn:c.closefn,project:c.project,team:c.team,task:c.task,type:e.type,isNewPopup:c.$eval(e.isnewpopup),isNewHeader:c.$eval(e.isnewheader),isBack:c.$eval(e.isback),isClose:c.$eval(e.isclose),currentLabel:c.currentlabel,isEdit:!1,labels:kzi.constant.labels,step_setlables:0,newLabel:{name:"blue",desc:""}};if(f.currentLabel)f.isEdit=!0,f.newLabel=f.currentLabel;else{f.isEdit=!1,f.newLabel={name:"",desc:""};var g=[],h=[],i=[];"project"===f.type||"task"===f.type?g=f.project.labels:"team"===f.type&&(g=f.team.default_labels),$(g).each(function(a,b){h.push(b.name)}),$(f.labels).each(function(a,b){-1===h.indexOf(b.name)&&i.push(b)}),f.labels=i,f.labels.length>0&&(f.newLabel.name=f.labels[0].name)}f.js_select_color=function(a){f.newLabel.name=a},f.js_save_label=function(){if(f.isEdit){if("project"===f.type||"task"===f.type)wt.data.project.label_update(c.project.pid,f.newLabel.name,f.newLabel.desc,function(b){200===b.code&&($(f.project.labels).each(function(a,b){b.name===f.newLabel.name&&(b.desc=f.newLabel.desc)}),a.cache.project.label_rename(c.project.pid,f.newLabel),f.isNewPopup?c.$parent.popbox.close():f.isNewHeader&&f.isBack&&f.backFn())},null,null);else if("team"===f.type){var b=_.findWhere(f.team.default_labels,{name:f.newLabel.name});b.desc=f.newLabel.desc,c.$parent.popbox.close()}}else"project"===f.type||"task"===f.type?wt.data.project.label_add(f.project.pid,f.newLabel.name,f.newLabel.desc,function(a){200===a.code&&(c.project.labels.push(f.newLabel),f.isNewPopup?c.$parent.popbox.close():f.isNewHeader&&f.isBack&&f.backFn())},null,null):"team"===f.type&&(f.team.default_labels.push(f.newLabel),c.$parent.popbox.close())},f.js_del_label=function(){"project"===f.type||"task"===f.type?wt.data.project.label_remove(c.project.pid,f.newLabel.name,function(b){200===b.code&&(c.project&&(_.remove(c.project.labels,function(a){return a.name===f.newLabel.name}),a.cache.project.label_remove(c.project.pid,f.newLabel.name)),"task"===f.type&&c.task&&(_.remove(c.task.labels,function(a){return a.name===f.newLabel.name}),a.cache.project.label_remove(c.task.pid,f.newLabel.name)),f.js_close())},null,null):"team"===f.type&&(_.remove(f.team.default_labels,function(a){return a.name===f.newLabel.name}),f.js_close())},f.js_close=function(){f.isNewPopup?c.$parent.popbox.close():f.isNewHeader&&f.isBack&&f.backFn()},f.js_back=function(){f.isBack&&f.backFn()},f.js_step=function(a){f.step_setlables=a},f.pop_del_label=function(a){b.popbox({target:a,templateUrl:"/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox","pop_data",function(a,b,c,d){b.popbox=c,b.js_close=function(){c.close()},b.delete_message="确认删除标签吗？",b.delete_title="删除标签",b.delete_button="确认删除",b.js_sure_delete=function(){b.is_deleting=!0;var a=d.target_scope.vm.project.pid,c=d.target_scope.vm.newLabel.name;wt.data.project.label_remove(a,c,function(a){b.js_close(),d.target_scope.vm.js_del_label(),d.target_scope.vm.js_back()})}}],resolve:{pop_data:function(){return{target_scope:c}}}}).open()}}}}angular.module("wt.directive.project").directive("wtTeamLabels",a).directive("wtSetProjectLabels",b).directive("wtSetTaskLabels",c).directive("wtSetLabelsAdd",d),a.$inject=["$popbox"],b.$inject=[],c.$inject=["$rootScope"],d.$inject=["globalDataContext","$popbox"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){var h=b.vm={loading_team_projects_done:!1,team_projects:[],showTeamSetting:g.showTeamSetting},i=g.team||{},j=g.project||{},k=g.member||{},l=i.team_id,m=j.pid,n=g.mood;b.current_team=i,b.project=j,b.mood=n,b.popbox=f,b.selected_member=k,b.step=0,b.js_close=function(){f.close()},b.js_step=function(a){2===a&&(b.loading_unique_admin_prjs_done=!1,wt.data.project.get_unique_admin_prjs(l,b.selected_member.uid,function(a){b.unique_admin_prjs=a.data},null,function(){b.loading_unique_admin_prjs_done=!0})),8===a&&(h.loading_team_projects_done=!1,wt.data.team.get_member_projects(l,b.selected_member.uid,!0,function(a){200===a.code&&(h.team_projects=a.data.projects,h.loading_team_projects_done=!0)})),b.step=a},b.js_set_group=function(a,b){};var o=function(){var a=_.filter(j.members,function(a){return a.role===kzi.constant.role.admin});k.role===kzi.constant.role.admin&&1===a.length?b.can_change=!1:b.can_change=!0};o();var p=function(f){b.is_deleting=!0,wt.data.project.del_member(m,f.uid,function(){e.cache.user.remove(f.uid),d.triggerEvent(kzi.constant.event_names.project_member_role_change,_.extend(b.selected_member,{role:kzi.constant.role.deleted})),f.uid===a.global.me.uid&&(e.cache.project.remove(h.pid),c.go("dashboard.default")),b.js_close()},null,function(){b.is_deleting=!1})},q=function(c){a.is_deleting_member=!0,wt.data.team.del_member(l,c.uid,function(){d.triggerEvent(kzi.constant.event_names.team_member_role_change,_.extend(c,{role:kzi.constant.role.deleted})),b.js_close(),_.findWhere(e.teams,{team_id:l}).member_count-=1},function(){kzi.msg.error("删除成员出错，请重新再试！")},function(){a.is_deleting_member=!1})};"project"===n?b.js_delete_member=p:b.js_delete_member=q,b.js_cancel_invite=function(c){a.is_canceling_invite=!0,wt.data.team.uninvite_member(l,c.uid,function(){d.triggerEvent(kzi.constant.event_names.team_member_role_change,_.extend(c,{role:kzi.constant.role.deleted})),b.js_close()},function(){kzi.msg.error("取消成员邀请出错，请重新再试！")},function(){a.is_canceling_invite=!1})};var r=function(c){wt.data.team.set_role(l,b.selected_member.uid,c,function(e){b.selected_member.role=c,d.triggerEvent(kzi.constant.event_names.team_member_role_change,_.extend(b.selected_member,{role:c})),b.selected_member.uid===a.global.me.uid&&(b.current_team.curr_role=c)},null,function(){b.js_close()})},s=function(a){wt.data.project.set_member_role(m,b.selected_member.uid,a,function(c){b.selected_member.role=a,d.triggerEvent(kzi.constant.event_names.project_member_role_change,_.extend(b.selected_member,{role:a}))},null,function(){b.js_close()})},t=null;if(t="project"===n?s:r,b.js_set_user_as_admin=function(){t(kzi.constant.role.admin)},b.js_set_user_as_member=function(){t(kzi.constant.role.member)},b.js_set_user_as_guest=function(){t(kzi.constant.role.guest)},b.selected_member.status===kzi.constant.status.pending&&_.isEmpty(b.selected_member.invite_url)&&i.curr_role===kzi.constant.role.admin){var u=kzi.config.root_url+"/join?code=";wt.data.invite.get_invite_code(l,b.selected_member.uid,function(a){b.selected_member.invite_url=u+a.data.invite_id})}b.js_view_invite_code=function(){b.js_step(6)},h.js_toggle_join=function(a){a.checked=!a.checked},h.add_member2projects=function(){var a=_.pluck(_.filter(h.team_projects,{checked:!0}),"pid");0===a.length?kzi.msg.warn("至少选择一个项目"):wt.data.team.member_join_projects(l,b.selected_member.uid,a,function(a){200===a.code&&(h.team_projects=_.reject(h.team_projects,{checked:!0}),kzi.msg.success("添加成功"))})}}function b(a){return{restrict:"A",replace:!0,scope:{member:"=",team:"=",showTeamSetting:"=",project:"="},link:function(b,c,d){var e=null,f=b.showTeamSetting?b.showTeamSetting:!1;e=_.isEmpty(b.team)?"project":"team",c.on("click",function(c){a.popbox({target:c,templateUrl:"/ycjs/directive/member_control/member_control.html",controller:"memberControlCtl",resolve:{pop_data:function(){return{mood:e,member:b.member,team:b.team,showTeamSetting:f,project:b.project}}}}).open()})}}}angular.module("wt.directive.member_control",["ui.bootstrap.popbox"]).controller("memberControlCtl",a).directive("wtMemberControl",b),a.$inject=["$rootScope","$scope","$state","bus","globalDataContext","popbox","pop_data"],b.$inject=["$popbox"]}(),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c={get:function(a){return d[b].get.apply(this,[a])},set:function(a,c){var e,f=parseInt(a),g=parseInt(c);return"undefined"==typeof a?f=0:0>a&&(f=this[0].value.length+f),"undefined"!=typeof c&&(e=c>=0?f+g:this[0].value.length+g),d[b].set.apply(this,[f,e]),this},setcursor:function(a){return this.textrange("set",a,0)},replace:function(a){return d[b].replace.apply(this,[String(a)]),this},insert:function(a){return this.textrange("replace",a)}},d={xul:{get:function(a){var b={position:this[0].selectionStart,start:this[0].selectionStart,end:this[0].selectionEnd,length:this[0].selectionEnd-this[0].selectionStart,text:this.val().substring(this[0].selectionStart,this[0].selectionEnd)};return"undefined"==typeof a?b:b[a]},set:function(a,b){"undefined"==typeof b&&(b=this[0].value.length),this[0].selectionStart=a,this[0].selectionEnd=b},replace:function(a){var b=this[0].selectionStart,c=this[0].selectionEnd,d=this.val();this.val(d.substring(0,b)+a+d.substring(c,d.length)),this[0].selectionStart=b,this[0].selectionEnd=b+a.length}},msie:{get:function(a){var b=document.selection.createRange();if("undefined"==typeof b){var c={position:0,start:0,end:this.val().length,length:this.val().length,text:this.val()};return"undefined"==typeof a?c:c[a]}var d=0,e=0,f=this[0].value.length,g=this[0].value.replace(/\r\n/g,"\n"),h=this[0].createTextRange(),i=this[0].createTextRange();h.moveToBookmark(b.getBookmark()),i.collapse(!1),-1===h.compareEndPoints("StartToEnd",i)?(d=-h.moveStart("character",-f),d+=g.slice(0,d).split("\n").length-1,-1===h.compareEndPoints("EndToEnd",i)?(e=-h.moveEnd("character",-f),e+=g.slice(0,e).split("\n").length-1):e=f):(d=f,e=f);var c={position:d,start:d,end:e,length:f,text:b.text};return"undefined"==typeof a?c:c[a]},set:function(a,b){var c=this[0].createTextRange();if("undefined"!=typeof c){"undefined"==typeof b&&(b=this[0].value.length);var d=a-(this[0].value.slice(0,a).split("\r\n").length-1),e=b-(this[0].value.slice(0,b).split("\r\n").length-1);c.collapse(!0),c.moveEnd("character",e),c.moveStart("character",d),c.select()}},replace:function(a){document.selection.createRange().text=a}}};a.fn.textrange=function(d){return"undefined"==typeof this[0]?this:("undefined"==typeof b&&(b="selectionStart"in this[0]?"xul":document.selection?"msie":"unknown"),"unknown"===b?this:(document.activeElement!==this[0]&&this[0].focus(),"undefined"==typeof d||"string"!=typeof d?c.get.apply(this):"function"==typeof c[d]?c[d].apply(this,Array.prototype.slice.call(arguments,1)):void a.error("Method "+d+" does not exist in jQuery.textrange")))}});var Markdown;Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function a(a){return a}function b(a){return!1}function c(){}function d(){}c.prototype={chain:function(b,c){var d=this[b];if(!d)throw new Error("unknown hook "+b);d===a?this[b]=c:this[b]=function(a){var b=Array.prototype.slice.call(arguments,0);return b[0]=d.apply(null,b),c.apply(null,b)}},set:function(a,b){if(!this[a])throw new Error("unknown hook "+a);this[a]=b},addNoop:function(b){this[b]=a},addFalse:function(a){this[a]=b}},Markdown.HookCollection=c,d.prototype={set:function(a,b){this["s_"+a]=b},get:function(a){return this["s_"+a]}},Markdown.Converter=function(b){function e(a){return a=a.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,b,c,d,e,f){return b=b.toLowerCase(),K.set(b,z(c)),e?d:(f&&L.set(b,f.replace(/"/g,"&quot;")),"")})}function f(a){return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,h),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,h),a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h),a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,h),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h)}function g(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(M.push(a)-1)+"K\n\n"}function h(a,b){return g(b)}function i(a,b){a=J.preBlockGamut(a,Q),a=q(a);var c="<hr />\n";return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,c),a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,c),a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,c),a=r(a),a=t(a),a=x(a),a=J.postBlockGamut(a,Q),a=f(a),a=y(a,b)}function j(a){return a=J.preSpanGamut(a),a=u(a),a=k(a),a=A(a),a=n(a),a=l(a),a=C(a),a=a.replace(/~P/g,"://"),a=z(a),a=w(a),a=a.replace(/  +\n/g," <br>\n"),a=J.postSpanGamut(a)}function k(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=H(b,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function l(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,m),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,m),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,m)}function m(a,b,c,d,e,f,g,h){void 0==h&&(h="");var i=b,j=c.replace(/:\/\//g,"~P"),k=d.toLowerCase(),l=e,m=h;if(""==l)if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),l="#"+k,void 0!=K.get(k))l=K.get(k),void 0!=L.get(k)&&(m=L.get(k));else{if(!(i.search(/\(\s*\)$/m)>-1))return i;l=""}l=G(l),l=H(l,"*_");var n='<a href="'+l+'"';return""!=m&&(m=o(m),m=H(m,"*_"),n+=' title="'+m+'"'),n+=">"+j+"</a>"}function n(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p)}function o(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function p(a,b,c,d,e,f,g,h){var i=b,j=c,k=d.toLowerCase(),l=e,m=h;if(m||(m=""),""==l){if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),l="#"+k,void 0==K.get(k))return i;l=K.get(k),void 0!=L.get(k)&&(m=L.get(k))}j=H(o(j),"*_[]()"),l=H(l,"*_");var n='<img src="'+l+'" alt="'+j+'"';return m=o(m),m=H(m,"*_"),n+=' title="'+m+'"',n+=" />"}function q(a){return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"<h1>"+j(b)+"</h1>\n\n"}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return"<h2>"+j(b)+"</h2>\n\n"}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){var d=b.length;return"<h"+d+">"+j(c)+"</h"+d+">\n\n"})}function r(a,b){a+="~0";var c=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return N?a=a.replace(c,function(a,c,d){var e=c,f=d.search(/[*+-]/g)>-1?"ul":"ol",g=s(e,f,b);return g=g.replace(/\s+$/,""),g="<"+f+">"+g+"</"+f+">\n"}):(c=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(c,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",h=s(f,g);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")}function s(a,b,c){N++,a=a.replace(/\n{2,}$/,"\n"),a+="~0";var d=R[b],e=new RegExp("(^[ \\t]*)("+d+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+d+")[ \\t]+))","gm"),f=!1;return a=a.replace(e,function(a,b,d,e){var g=e,h=/\n\n$/.test(g),k=h||g.search(/\n{2,}/)>-1;return k||f?g=i(E(g),!0):(g=r(E(g),!0),g=g.replace(/\n$/,""),c||(g=j(g))),f=h,"<li>"+g+"</li>\n"}),a=a.replace(/~0/g,""),N--,a}function t(a){return a+="~0",a=a.replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=v(E(d)),d=F(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>","\n\n"+d+"\n\n"+e}),a=a.replace(/~0/,"")}function u(a){return a=a.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){var f=d;return f=f.replace(/^([ \t]*)/g,""),f=f.replace(/[ \t]*$/g,""),f=v(f),f=f.replace(/:\/\//g,"~P"),b+"<code>"+f+"</code>"})}function v(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=H(a,"*_{}[]\\",!1)}function w(a){return a=O(a),a=a.replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>"),a=a.replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),P(a)}function x(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=i(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),g("<blockquote>\n"+c+"\n</blockquote>")})}function y(a,b){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var c=a.split(/\n{2,}/g),d=[],e=/~K(\d+)K/,f=c.length,g=0;f>g;g++){var h=c[g];e.test(h)?d.push(h):/\S/.test(h)&&(h=j(h),h=h.replace(/^([ \t]*)/g,"<p>"),h+="</p>",d.push(h))}if(!b){f=d.length;for(var g=0;f>g;g++)for(var i=!0;i;)i=!1,d[g]=d[g].replace(/~K(\d+)K/g,function(a,b){return i=!0,M[b]})}return d.join("\n\n")}function z(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function A(a){return a=a.replace(/\\(\\)/g,I),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,I)}function B(a,b,c,d){if(b)return a;if(")"!==d.charAt(d.length-1))return"<"+c+d+">";for(var e=d.match(/[()]/g),f=0,g=0;g<e.length;g++)"("===e[g]?0>=f?f=1:f++:f--;var h="";if(0>f){var i=new RegExp("\\){1,"+-f+"}$");d=d.replace(i,function(a){return h=a,""})}if(h){var j=d.charAt(d.length-1);V.test(j)||(h=j+h,d=d.substr(0,d.length-1))}return"<"+c+d+">"+h}function C(a){a=a.replace(U,B);var b=function(a,b){var c=G(b);return c=H(c,"*_"),'<a href="'+c+'">'+J.plainLinkText(b)+"</a>"};return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,b)}function D(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function E(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")}function F(a){if(!/\t/.test(a))return a;var b,c=["    ","   ","  "," "],d=0;return a.replace(/[\n\t]/g,function(a,e){return"\n"===a?(d=e+1,a):(b=(e-d)%4,d=e+1,c[b])})}function G(a){if(!a)return"";var b=a.length;return a.replace(W,function(c,d){return"~D"==c?"%24":":"!=c||d!=b-1&&!/[0-9\/]/.test(a.charAt(d+1))?"%"+c.charCodeAt(0).toString(16):":"})}function H(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,I)}function I(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}var J=this.hooks=new c;J.addNoop("plainLinkText"),J.addNoop("preConversion"),J.addNoop("postNormalization"),J.addNoop("preBlockGamut"),J.addNoop("postBlockGamut"),J.addNoop("preSpanGamut"),J.addNoop("postSpanGamut"),J.addNoop("postConversion");var K,L,M,N;b=b||{};var O=a,P=a;b.nonAsciiLetters&&!function(){var a=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,b="Q".charCodeAt(0),c="A".charCodeAt(0),d="Z".charCodeAt(0),e="a".charCodeAt(0)-d-1;O=function(f){return f.replace(a,function(a){for(var f,g=a.charCodeAt(0),h="";g>0;)f=g%51+c,f>=b&&f++,f>d&&(f+=e),h=String.fromCharCode(f)+h,g=g/51|0;return"Q"+h+"Q"})},P=function(a){return a.replace(/Q([A-PR-Za-z]{1,3})Q/g,function(a,f){for(var g,h=0,i=0;i<f.length;i++)g=f.charCodeAt(i),g>d&&(g-=e),g>b&&g--,g-=c,h=51*h+g;return String.fromCharCode(h)})}}(),this.makeHtml=function(a){if(K)throw new Error("Recursive call to converter.makeHtml");return K=new d,L=new d,M=[],N=0,a=J.preConversion(a),a=a.replace(/~/g,"~T"),a=a.replace(/\$/g,"~D"),a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n"),a="\n\n"+a+"\n\n",a=F(a),a=a.replace(/^[ \t]+$/gm,""),a=J.postNormalization(a),a=f(a),a=e(a),a=i(a),a=D(a),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~"),a=J.postConversion(a),M=L=K=null,a};var Q=function(a){return i(a)},R={ol:"\\d+[.]",ul:"[*+-]"},S="[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]",T="[-A-Z0-9+&@#/%=~_|[\\])]",U=new RegExp('(="|<)?\\b(https?|ftp)(://'+S+"*"+T+")(?=$|\\W)","gi"),V=new RegExp(T,"i"),W=/(?:["'*()[\]:]|~D)/g}}(),function(){function a(a){return a.replace(/<[^>]*>?/gi,b)}function b(a){return a.match(f)||a.match(g)||a.match(h)?a:""}function c(a){if(""==a)return"";var b=/<\/?\w+[^>]*(\s|$|>)/g,c=a.toLowerCase().match(b),d=(c||[]).length;if(0==d)return a;for(var e,f,g,h="<p><img><br><li><hr>",i=[],j=[],k=!1,l=0;d>l;l++)if(e=c[l].replace(/<\/?(\w+).*/,"$1"),!(i[l]||h.search("<"+e+">")>-1)){if(f=c[l],g=-1,!/^<\//.test(f))for(var m=l+1;d>m;m++)if(!i[m]&&c[m]=="</"+e+">"){g=m;break}-1==g?k=j[l]=!0:i[g]=!0}if(!k)return a;var l=0;return a=a.replace(b,function(a){var b=j[l]?"":a;return l++,b})}var d,e;"object"==typeof exports&&"function"==typeof require?(d=exports,e=require("./Markdown.Converter.js").Converter):(d=window.Markdown,e=d.Converter),d.getSanitizingConverter=function(){var b=new e;return b.hooks.chain("postConversion",a),b.hooks.chain("postConversion",c),b};var f=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,g=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,h=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}(),function(){function a(a){return a.replace(/^\s+|\s+$/g,"")}function b(a){return a.replace(/\s+$/g,"")}function c(a){return a.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function d(a,b){return-1!=a.indexOf(b)}function e(a,b){return a.replace(/<[^>]*>?/gi,function(a){return a.match(b)?a:""})}function f(a,b){for(var c={},d=0;d<a.length;d++)c[a[d]]=a[d];for(d=0;d<b.length;d++)c[b[d]]=b[d];var e=[];for(var f in c)c.hasOwnProperty(f)&&e.push(c[f]);return e}function g(a){return""!=a.charAt(0)&&(a=""+a),""!=a.charAt(a.length-1)&&(a+=""),a}
function h(a){return""==a.charAt(0)&&(a=a.substr(1)),""==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),a}function i(a,b){return e(j(a,b),p)}function j(a,b){var c=b.blockGamutHookCallback(a);return c=m(c),c=c.replace(/~D/g,"$$").replace(/~T/g,"~"),c=b.previousPostConversion(c)}function k(a){return a.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function l(a){return a.replace(/~I/g,"|").replace(/~i/g,":")}function m(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function n(a){return a.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function o(a,b){var c=b;return c=c.replace(/&\#8220;/g,'"'),c=c.replace(/&\#8221;/g,'"'),c=c.replace(/&\#8216;/g,"'"),c=c.replace(/&\#8217;/g,"'"),c=c.replace(/&\#8212;/g,"---"),c=c.replace(/&\#8211;/g,"--"),c=c.replace(/&\#8230;/g,"...")}var p=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1}),Markdown.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},Markdown.Extra.init=function(a,b){var c=new Markdown.Extra,e=[],f=[],g=[],h=["unHashExtraBlocks"];return b=b||{},b.extensions=b.extensions||["all"],d(b.extensions,"all")&&(b.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","strikethrough","newlines"]),f.push("wrapHeaders"),d(b.extensions,"attr_list")&&(e.push("hashFcbAttributeBlocks"),f.push("hashHeaderAttributeBlocks"),h.push("applyAttributeBlocks"),c.attributeBlocks=!0),d(b.extensions,"fenced_code_gfm")&&(f.push("fencedCodeBlocks"),e.push("fencedCodeBlocks")),d(b.extensions,"tables")&&f.push("tables"),d(b.extensions,"def_list")&&f.push("definitionLists"),d(b.extensions,"footnotes")&&(e.push("stripFootnoteDefinitions"),f.push("doFootnotes"),h.push("printFootnotes")),d(b.extensions,"smartypants")&&h.push("runSmartyPants"),d(b.extensions,"strikethrough")&&g.push("strikethrough"),d(b.extensions,"newlines")&&g.push("newlines"),a.hooks.chain("postNormalization",function(a){return c.doTransform(e,a)+"\n"}),a.hooks.chain("preBlockGamut",function(a,b){return c.blockGamutHookCallback=b,a=k(a),a=c.doTransform(f,a)+"\n",a=l(a)}),a.hooks.chain("postSpanGamut",function(a){return c.doTransform(g,a)}),c.previousPostConversion=a.hooks.postConversion,a.hooks.chain("postConversion",function(a){return a=c.doTransform(h,a),c.hashBlocks=[],c.footnotes={},c.usedFootnotes=[],a}),"highlighter"in b&&(c.googleCodePrettify="prettify"===b.highlighter,c.highlightJs="highlight"===b.highlighter),"table_class"in b&&(c.tableClass=b.table_class),c.converter=a,c},Markdown.Extra.prototype.doTransform=function(a,b){for(var c=0;c<a.length;c++)b=this[a[c]](b);return b},Markdown.Extra.prototype.hashExtraBlock=function(a){return"\n<p>~X"+(this.hashBlocks.push(a)-1)+"X</p>\n"},Markdown.Extra.prototype.hashExtraInline=function(a){return"~X"+(this.hashBlocks.push(a)-1)+"X"},Markdown.Extra.prototype.unHashExtraBlocks=function(a){function b(){var d=!1;a=a.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(a,b){d=!0;var e=parseInt(b,10);return c.hashBlocks[e]}),d===!0&&b()}var c=this;return b(),a},Markdown.Extra.prototype.wrapHeaders=function(a){function b(a){return"\n"+a+"\n"}return a=a.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,b),a=a.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,b),a=a.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,b)};var q="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",r=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+q+"[ \\t]*(?:\\n|0x03)","gm"),s=new RegExp("^(.*)[ \\t]+"+q+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),t=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+q+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");Markdown.Extra.prototype.hashHeaderAttributeBlocks=function(a){function b(a,b,d){return"<p>~XX"+(c.hashBlocks.push(d)-1)+"XX</p>\n"+b+"\n"}var c=this;return a=a.replace(r,b),a=a.replace(s,b)},Markdown.Extra.prototype.hashFcbAttributeBlocks=function(a){function b(a,b,d){return"<p>~XX"+(c.hashBlocks.push(d)-1)+"XX</p>\n"+b+"\n"}var c=this;return a.replace(t,b)},Markdown.Extra.prototype.applyAttributeBlocks=function(a){var b=this,c=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return a=a.replace(c,function(a,c,d,e,g){if(!d)return"";for(var h=parseInt(c,10),i=b.hashBlocks[h],j=i.match(/#[^\s#.]+/g)||[],k=j[0]?' id="'+j[0].substr(1,j[0].length-1)+'"':"",l=i.match(/\.[^\s#.]+/g)||[],m=0;m<l.length;m++)l[m]=l[m].substr(1,l[m].length-1);var n="";return e&&(l=f(l,[e])),l.length>0&&(n=' class="'+l.join(" ")+'"'),"<"+d+k+n+g})},Markdown.Extra.prototype.tables=function(b){function c(b,c,e,f,g,h){c=c.replace(/^ *[|]/m,""),e=e.replace(/^ *[|]/m,""),f=f.replace(/^ *[|]/gm,""),c=c.replace(/[|] *$/m,""),e=e.replace(/[|] *$/m,""),f=f.replace(/[|] *$/gm,""),alignspecs=e.split(/ *[|] */),align=[];for(var j=0;j<alignspecs.length;j++){var k=alignspecs[j];k.match(/^ *-+: *$/m)?align[j]=' align="right"':k.match(/^ *:-+: *$/m)?align[j]=' align="center"':k.match(/^ *:-+ *$/m)?align[j]=' align="left"':align[j]=""}var l=c.split(/ *[|] */),m=l.length,n=d.tableClass?' class="'+d.tableClass+'"':"",o=["<table",n,">\n","<thead>\n","<tr>\n"].join("");for(j=0;m>j;j++){var p=i(a(l[j]),d);o+=["  <th",align[j],">",p,"</th>\n"].join("")}o+="</tr>\n</thead>\n";var q=f.split("\n");for(j=0;j<q.length;j++)if(!q[j].match(/^\s*$/)){for(var r=q[j].split(/ *[|] */),s=m-r.length,t=0;s>t;t++)r.push("");for(o+="<tr>\n",t=0;m>t;t++){var u=i(a(r[t]),d);o+=["  <td",align[t],">",u,"</td>\n"].join("")}o+="</tr>\n"}return o+="</table>\n",d.hashExtraBlock(o)}var d=this,e=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),f=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return b=b.replace(e,c),b=b.replace(f,c)},Markdown.Extra.prototype.stripFootnoteDefinitions=function(a){var b=this;return a=a.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(a,c,d){return c=n(c),d+="\n",d=d.replace(/^[ ]{0,3}/g,""),b.footnotes[c]=d,"\n"})},Markdown.Extra.prototype.doFootnotes=function(a){var b=this;if(b.isConvertingFootnote===!0)return a;var c=0;return a=a.replace(/\[\^(.+?)\]/g,function(a,d){var e=n(d),f=b.footnotes[e];if(void 0===f)return a;c++,b.usedFootnotes.push(e);var g='<a href="#fn:'+e+'" id="fnref:'+e+'" title="See footnote" class="footnote">'+c+"</a>";return b.hashExtraInline(g)})},Markdown.Extra.prototype.printFootnotes=function(a){var b=this;if(0===b.usedFootnotes.length)return a;a+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var c=0;c<b.usedFootnotes.length;c++){var d=b.usedFootnotes[c],e=b.footnotes[d];b.isConvertingFootnote=!0;var f=i(e,b);delete b.isConvertingFootnote,a+='<li id="fn:'+d+'">'+f+' <a href="#fnref:'+d+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return a+="</ol>\n</div>"},Markdown.Extra.prototype.fencedCodeBlocks=function(a){function b(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~")}var c=this;return a=a.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(a,d,e){var f=d,g=e,h=c.googleCodePrettify?' class="prettyprint"':"",i="";f&&(i=c.googleCodePrettify||c.highlightJs?' class="language-'+f+'"':' class="'+f+'"');var j=["<pre",h,"><code",i,">",b(g),"</code></pre>"].join("");return c.hashExtraBlock(j)})},Markdown.Extra.prototype.educatePants=function(a){var b=this,c="",d=0;a.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(e,f,g,h,i,j,k){var l=a.substring(d,k);return c+=b.applyPants(l),b.smartyPantsLastChar=c.substring(c.length-1),d=k+e.length,f?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(g)?b.smartyPantsLastChar=i.substring(i.length-1):i=b.educatePants(i),void(c+=f+g+h+i+j)):void(c+=e)});var e=a.substring(d);return c+=b.applyPants(e),b.smartyPantsLastChar=c.substring(c.length-1),c},Markdown.Extra.prototype.applyPants=function(a){return a=a.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),a=a.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),a=a.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(a)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(a)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(a=a.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),a=a.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),a=a.replace(/"'(?=\w)/g,"&#8220;&#8216;"),a=a.replace(/'"(?=\w)/g,"&#8216;&#8220;"),a=a.replace(/'(?=\d{2}s)/g,"&#8217;"),a=a.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),a=a.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),a=a.replace(/'(?=\s|s\b)/g,"&#8217;"),a=a.replace(/'/g,"&#8216;"),a=a.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),a=a.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),a=a.replace(/"(?=\s)/g,"&#8221;"),a=a.replace(/"/gi,"&#8220;"))},Markdown.Extra.prototype.runSmartyPants=function(a){return this.smartyPantsLastChar="",a=this.educatePants(a),a=a.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,o)},Markdown.Extra.prototype.definitionLists=function(b){var c=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),d=this;return b=g(b),b=b.replace(c,function(b,c,e){var f=a(d.processDefListItems(e));return f="<dl>\n"+f+"\n</dl>",c+d.hashExtraBlock(f)+"\n\n"}),h(b)},Markdown.Extra.prototype.processDefListItems=function(d){var e=this,f=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),k=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return d=g(d),d=d.replace(/\n{2,}(?=\\x03)/,"\n"),d=d.replace(f,function(b,c,d){for(var f=a(d).split("\n"),g="",h=0;h<f.length;h++){var j=f[h];j=i(a(j),e),g+="\n<dt>"+j+"</dt>"}return g+"\n"}),d=d.replace(k,function(a,d,f,g){return d||g.match(/\n{2,}/)?(g=Array(f.length+1).join(" ")+g,g=c(g)+"\n\n",g="\n"+j(g,e)+"\n"):(g=b(g),g=i(c(g),e)),"\n<dd>"+g+"</dd>\n"}),h(d)},Markdown.Extra.prototype.strikethrough=function(a){return a.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},Markdown.Extra.prototype.newlines=function(a){return a.replace(/(<(?:br|\/li)>)?\n/g,function(a,b){return b?a:" <br>\n"})}}(),function(){"use strict";function a(a,b,c,d){return{restrict:"E",replace:!0,scope:{title:"=editTitle",content:"=editContent",pid:"=pid",mode:"@mode",entity_id:"=entityId",entity_type:"@entityType",watchers:"=watchers",page_message:"=message",page_parent_id:"=parentId",page_is_notify:"=pageIsNotify"},transclude:!0,templateUrl:"/tpl/directive/wt_new_editor.html",link:function(e,f){function g(a){var b,c,f="1m1m1m1m1m1m",g=e.content,h=g.substr(0,a.start-1),i=g.substr(a.start,g.length-a.start-1);g=h+"\n\n1. "+f+i,b=o.makeHtml(g),c=d(b);var j=$("<div>"+c+"</div>"),k=j.find('li:contains("'+f+'")');return 0===k.length&&(k=j.find('p:contains("'+f+'")').closest("li")),k.index()+1}function h(){a(function(){if(e.content){var a=o.makeHtml(e.content),b=d(a);e.html=b}_.isEmpty(e.content)&&(e.html="")}),q=void 0}function i(){q?(clearTimeout(q),q=setTimeout(h,500)):q=setTimeout(h,500)}var j=e.$parent;e.hideMini=!1,e.inPreview=!1,e.isFullscreen=!1;var k=!1,l=!1;"mini"===e.mode?e.isMini=!0:e.isMini=!1,f.find(".fullscreen-mk-content-textarea").on("scroll",function(){if(!l){k=!0;var b=f.find(".right-side"),c=f.find(".fullscreen-mk-content-textarea"),d=c.scrollTop(),e=b.prop("scrollHeight")-b.prop("clientHeight"),g=c.prop("scrollHeight")-c.prop("clientHeight"),h=d/g*e;b.scrollTop(h),a(function(){k=!1},200)}}),f.find(".right-side").on("scroll",function(){if(!k){l=!0;var b=f.find(".right-side"),c=f.find(".fullscreen-mk-content-textarea"),d=b.scrollTop(),e=b.prop("scrollHeight")-b.prop("clientHeight"),g=c.prop("scrollHeight")-c.prop("clientHeight"),h=d/e*g;c.scrollTop(h),a(function(){l=!1},200)}});var m=f.find(".wnd-content-textarea"),n=f.find(".fullscreen-mk-content-textarea"),o=new Markdown.Converter;Markdown.Extra.init(o),Markdown.Extra.init(o);var p={"cmd-bold":{search:/([^\n]+)([\n\s]*)/g,replace:"**$1**$2",defaultText:"加粗的文字",select:{leftOmit:2,rightOmit:2}},"cmd-italic":{search:/([^\n]+)([\n\s]*)/g,replace:"_$1_$2",defaultText:"倾斜的文字",select:{leftOmit:1,rightOmit:1}},"cmd-code":{search:/([^\n]+)([\n\s]*)/g,replace:"\n```\n$1\n```$2",defaultText:"代码放这里",select:{leftOmit:5,rightOmit:4}},"cmd-horizontal-line":{append:"\n***\n",select:{leftOmit:5,rightOmit:0}},"cmd-unorder-list":{search:/(.+)([\n]?)/g,replace:"\n* $1",defaultText:"无序列表",select:{leftOmit:3,rightOmit:0}},"cmd-order-list":{search:/(.+)([\n]?)/g,replace:"\n1. $1",defaultText:"有序列表",select:{leftOmit:4,rightOmit:0}},"cmd-blockquote":{search:/(.+)([\n]?)/g,replace:"\n> $1\n",defaultText:"引用的文字",select:{leftOmit:3,rightOmit:1}},"cmd-h1":{search:/(.+)([\n]?)/g,replace:"\n# $1$2",defaultText:"一级标题",select:{leftOmit:3,rightOmit:0}},"cmd-h2":{search:/(.+)([\n]?)/g,replace:"\n## $1$2",defaultText:"二级标题",select:{leftOmit:4,rightOmit:0}},"cmd-h3":{search:/(.+)([\n]?)/g,replace:"\n### $1$2",defaultText:"三级标题",select:{leftOmit:5,rightOmit:0}},"cmd-insert-link":{exec:function(b,d){c.popbox({target:b,placement:"bottom",templateUrl:"/tpl/common/pop_add_link_2.html",controller:["$scope","popbox",function(b,c){b.popbox=c,b.link_address="http://",b.insert=function(){var f=d.textrange("get");0===f.length&&(f.text="输入超链接描述",f.length=f.text.length);var g="["+f.text+"]("+b.link_address+")";d.textrange("replace",g);var h=f.start+1,i=f.text.length;a(function(){d.textrange("set",h,i)}),e.content=d.val(),c.close()}}]}).open()}},"cmd-insert-image":{exec:function(b,d){c.popbox({target:b,placement:"bottom",templateUrl:"/tpl/common/pop_add_image2.html",controller:["$rootScope","$scope","$filter","$stateParams","popbox","$sce","$wtUploadFile",function(b,c,f,g,h,i,j){c.popbox=h,c.step=0,c.pid=e.pid,c.js_step=function(a){c.step=a},c.js_close=function(){h.close()},c.js_show_images=function(){c.step=1,_.isEmpty(c.images)&&(c.images_loading_done=!1,c.images=null,wt.data.file.get_image_list(c.pid,function(a){c.images=a.data},null,function(){c.images_loading_done=!0}))},c.js_select_image=function(a){c.step=0,c.image_address=kzi.config.wtprj_url+a.path,c.js_insert_image(null)},c.js_insert_image=function(){var b=d.textrange("get");d.textrange("replace","![替代文字]("+c.image_address+")"),a(function(){d.textrange("set",b.start+2,4)}),e.content=d.val(),h.close()},c.js_upload_image=function(a){if(c.uploading_done!==!0){c.uploading_done=!1,c.error_msg=null;var b=[];_.forEach(a,function(a){b.push({original:a,data:{target:"prj",pid:c.pid}})}),j.addFiles(c.pid,b,function(a,b){b&&b.file&&"project"===b.type&&(b.file.icon=kzi.helper.build_file_icon(b.file),_.isEmpty(c.images)||c.images.push(b.file),c.image_address=kzi.config.wtprj_url+b.file.path,c.js_insert_image(),c.uploading_done=!0)}),h.close()}},c.token=kzi.get_cookie("sid"),c.action_url=b.global.config.box_url()+"?pid="+c.pid+"&token="+c.token,i.trustAsUrl(c.action_url)}]}).open()}},"cmd-save":{exec:function(c,d){switch(e.entity_type){case"vm.post":if(_.isEmpty(e.title))return void kzi.msg.error("标题不能为空");if(_.isEmpty(e.entity_id)){var g=_.pluck(e.watchers,"uid");e.is_saving=!0,wt.data.post.add(e.pid,e.title,e.content,g,function(a){b.$broadcast(kzi.constant.event_names.post_created_by_editor,a.data),e.entity_id=a.data.post_id,kzi.msg.success("保存新话题成功"),e.cancelFullscreen(),_.isFunction(j.js_cancel_edit_post)&&j.js_cancel_edit_post()},function(){kzi.msg.error("保存新话题失败")},function(){e.is_saving=!1,a(function(){f.closest("[wt-scroll]").mCustomScrollbar("disable")},200)})}else e.is_saving=!0,wt.data.post.update(e.pid,e.entity_id,e.title,e.content,function(a){kzi.msg.success("更新话题成功"),e.cancelFullscreen(),_.isFunction(j.vm.js_cancel_editor)&&j.vm.js_cancel_editor(),b.$broadcast(kzi.constant.event_names.post_updated_by_editor,{name:e.title,content:e.content,pid:e.pid,post_id:e.entity_id})},function(){kzi.msg.error("更新话题失败")},function(){e.is_saving=!1});break;case"vm.page":if(_.isEmpty(e.title))return void kzi.msg.error("标题不能为空");_.isEmpty(e.entity_id)?(e.is_saving=!0,wt.data.page.add(e.pid,e.title,e.content,e.page_message,e.page_parent_id,[],function(a){kzi.msg.success("添加文档成功!"),e.entity_id=a.data.page_id,b.$broadcast(kzi.constant.event_names.page_created_by_editor,a.data),e.cancelFullscreen(),j.vm.js_cancel_edit()},null,function(){e.is_saving=!1})):(e.is_saving=!0,wt.data.page.update(e.pid,e.entity_id,e.title,e.content,e.page_message,e.page_parent_id,e.page_is_notify,0,function(){kzi.msg.success("更新文档成功!"),b.$broadcast(kzi.constant.event_names.page_updated_by_editor,{page_id:e.entity_id,parent_id:e.page_parent_id,name:e.title,content:e.content,message:e.page_message}),e.cancelFullscreen(),j.vm.js_cancel_edit()},null,function(){e.is_saving=!1}));break;default:kzi.msg.warn("entity type error")}}},"cmd-preview":{}},q=void 0;e.$watch("content",function(a,b){a!==b&&i()}),e.execEditorCmd=function(b,c){var d;if(d=e.isFullscreen?n:e.isMini?f.find(".mini-content-textarea"):m,p[c].search&&p[c].replace){var h=d.textrange("get"),i=null;"cmd-order-list"===c&&(i=g(h)),0===h.length&&(p[c].defaultText&&(h.text=p[c].defaultText),h.length=h.text.length);var j="";if(i>0&&"cmd-order-list"===c){var k=h.text.split("\n");_.each(k,function(a,b){a.length>0&&(k[b]=a.replace(p[c].search,"\n"+i++ +". $1")),j=k.join("")})}else j=h.text.replace(p[c].search,p[c].replace);d.textrange("replace",j),e.content=d.val(),a(function(){if(p[c].select){var a=h.start;a+=p[c].select.leftOmit;var b=j.length;b=b-p[c].select.rightOmit-p[c].select.leftOmit,d.textrange("set",a,b)}})}if(p[c].append&&(d.textrange("replace",p[c].append),e.content=d.val(),p[c].select)){var l=d.textrange("get"),o=l.start;o+=p[c].select.leftOmit,d.textrange("set",o,0)}p[c].exec&&p[c].exec(b,d)},e.flipPreview=function(){h();var a=m.closest(".flip-container");if(e.inPreview===!1){var b=a.find(".wnd-content-textarea"),c=b.prop("scrollHeight")-b.prop("clientHeight"),d=b.scrollTop();e.inPreview=!e.inPreview,a.addClass("flipped");var f=a.find(".wnd-content-html"),g=f.prop("scrollHeight")-f.prop("clientHeight"),i=d/c*g;f.scrollTop(i),a.find(".front").css("z-index",1),a.find(".back").css("z-index",2)}else a.removeClass("flipped"),e.inPreview=!e.inPreview,a.find(".front").css("z-index",2),a.find(".back").css("z-index",1)},e.goFullscreen=function(){h(),e.isFullscreen=!0,b.isFullscreen=!0,e.isMini===!0&&(e.hideMini=!0);var a=f.closest(".slide-content");a.css("overflow","visible"),e.isMini&&f.find(".left-right-container").css("top","48px");var c=f.closest("[wt-scroll]");c.mCustomScrollbar("disable")},e.cancelFullscreen=function(){e.isFullscreen=!1,b.isFullscreen=!1,e.isMini===!0&&(e.hideMini=!1);var a=f.closest(".slide-content");a.css("overflow","hidden");var c=f.closest("[wt-scroll]");c.mCustomScrollbar("update")}}}}angular.module("wt.new.editor",[]).directive("wtNewEditor",a),a.$inject=["$timeout","$rootScope","$popbox","sanitize"]}(),function(){"use strict";function a(a){this.init=function(){a.$on(kzi.constant.event_names.autosave_cancel,function(a,b){kzi.localData.remove(b.key)})}}function b(a){return{replace:!0,templateUrl:"/ycjs/directive/autosave/autosave.html",restrict:"E",scope:{key:"=",content:"=",control:"@"},link:function(a,b,e){function f(){var b=kzi.localData.get(a.key);null!=b&&(g.save_time=moment(parseInt(b.split("|||")[0],10)).format("YYYY-MM-DD HH:mm:ss"),d(b.split("|||")[1])===a.content?g.show_tip=!1:g.show_tip=!0)}var g=a.vm={first_init:!0,show_tip:!1,save_time:0};a.$watch("content",function(b,e){if(""!==b&&!g.first_init){g.show_tip=!1;var f=kzi.localData.get(a.key);null!==f&&b!==d(f.split("|||")[1])&&$(a.control).unbind("keydown.autosave"),kzi.localData.set(a.key,moment().valueOf()+"|||"+c(b))}g.first_init&&(g.first_init=!g.first_init)}),g.revert_save=function(){g.show_tip=!1;var b=kzi.localData.get(a.key),c=a.content;a.content=d(b.split("|||")[1]),$(a.control).focus(),$(a.control).bind("keydown.autosave",function(b){(b.ctrlKey||b.metaKey)&&90===b.keyCode&&$(a.control).get(0)===b.target&&a.$apply(function(){a.content=c,$(a.control).unbind("keydown.autosave")})})},g.cancel_save=function(){g.show_tip=!1,kzi.localData.remove(a.key)},f()}}}angular.module("wt.autosave",[]).service("wtAutosaveService",a).directive("wtAutosave",b),a.$inject=["$rootScope"];var c=function(a){return btoa(encodeURIComponent(a))},d=function(a){return decodeURIComponent(atob(a))};b.$inject=["$rootScope"]}(),function(){function a(){var a=m.Window.open(location.protocol+"//"+location.host+"/ycjs/nw-plugins/nw-desktop-notifications.html",{frame:!1,toolbar:!1,width:l,height:0,"always-on-top":!0,show:!1,resizable:!1});window.LOCAL_NW.DesktopNotificationsWindow=a,window.LOCAL_NW.DesktopNotificationsWindowIsLoaded=!1,a.on("loaded",function(){window.LOCAL_NW.DesktopNotificationsWindowIsLoaded=!0,$(a.window.document.body).find("#closer").click(function(){g()})})}function b(){return m?void(window.LOCAL_NW.DesktopNotificationsWindow&&(window.LOCAL_NW.DesktopNotificationsWindow.close(!0),window.LOCAL_NW.DesktopNotificationsWindow=null)):!1}function c(b,c,d,g){if(!m)return!1;window.LOCAL_NW.DesktopNotificationsWindow||a();var h=function(){e(b,c,d,g),f(),$(window.LOCAL_NW.DesktopNotificationsWindow.window.document.body).find("#shouldstart").text("true")};return window.LOCAL_NW.DesktopNotificationsWindowIsLoaded?h():window.LOCAL_NW.DesktopNotificationsWindow.on("loaded",h),!0}function d(a,b,c,d){return"<li id='"+d+"'><div class='icon'><img src='"+a+"' /></div><div class='title'>"+j(b,35)+"</a></div><div class='description'>"+j(c,37)+"</div></li>"}function e(a,b,c,e){var f=i(),g=d(a,b,c,f),h=$(window.LOCAL_NW.DesktopNotificationsWindow.window.document.body);h.find("#notifications").append(g),h.find("#"+f).click(e)}function f(){function a(){setTimeout(function(){60>c&&(b.resizeTo(d,c),c+=10,a())},5)}var b=window.LOCAL_NW.DesktopNotificationsWindow;if(!b.NOTIFICATION_IS_SHOWING){var c=screen.availTop,d=l;b.moveTo(h(b),c),b.show(),b.NOTIFICATION_IS_SHOWING=!0,document.hasFocus(),a()}}function g(a){function b(){setTimeout(function(){d>-10?(c.resizeTo(e,d),d-=10,b()):(c.hide(),a&&a())},5)}var c=window.LOCAL_NW.DesktopNotificationsWindow,d=c.height,e=l;b(),c.NOTIFICATION_IS_SHOWING=!1}function h(a){return screen.availLeft+screen.availWidth-(l+10)}function i(){return+new Date+"-"+n++}function j(a,b){return a=$.trim(a),a.length>b?$.trim(a.substr(0,b))+"...":a}var k=window.require,l=290,m=null,n=0;k&&(m=k("nw.gui")),window.LOCAL_NW||(window.LOCAL_NW={}),window.LOCAL_NW.desktopNotifications={notify:c,closeAnyOpenNotificationWindows:b}}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){e&&e.permission!=kzi.constant.team_permission.guest?(b.team=e,a.global.loading_done=!0,i.user_is_team_owner=b.team.permission==kzi.constant.team_permission.owner,i.user_is_team_admin=b.team.permission==kzi.constant.team_permission.owner||b.team.permission==kzi.constant.team_permission.admin,b.$on(kzi.constant.event_names.team_member_role_change,function(a,d){b.team&&b.team.team_id===d.team_id&&(b.team.permission=d.team_permission,kzi.constant.team_module.view_base&d.team_permission||c.go("dashboard.default"))})):wt.data.team.get_full(i.team_id,function(b){i.public_team=b.data,a.global.title="主页 | "+i.public_team.info.name,a.global.loading_done=!0},function(a){c.go("not_found",{type:"team"})})}var i=b.vm={state:c,user_is_team_admin:!1,display_team_setting:!1,user_is_team_owner:!1,teamCalendarFilterData:f,team_id:d.team_id,public_team:null};h(),i.js_view_team_info=function(a){g.popbox({target:a,$scope:b,templateUrl:"/tpl/team/pop_team_info.html",controller:["$scope","popbox",function(a,b){a.popbox=b,i.js_close=function(){b.close()}}]}).open()},i.js_toggle_team_filter=function(){f.team_calendar_filter_status=!f.team_calendar_filter_status}}function b(a,b,c){var d=(b.parent_vm=b.$parent.vm,b.vm={part_loading_done:!1,overview:{completed:null,uncompleted:null,expired:null,today_pending:null,total:null},stats_list:[]});if(b.team){a.global.title="主页 | "+b.team.name,d.part_loading_done=!1;var e=function(a){var b=[];return _.each(a,function(a){_.each(a.stats,function(c){c.pid=a.pid,c.name=a.name,c.bg=a.bg,c.pic=a.pic,b.push(c)})}),b},f=function(a,b,c,e){if(c||e){var f=wt.bus.team.calculate_stats_pos(c,e),g=_.findWhere(d.stats_list,{pid:a,type:b});g.pos=f,wt.data.team.update_team_stats_pos(a,b,f,function(a){200===a.code&&(d.stats_list=_.sortBy(d.stats_list,function(a){return a.pos}))})}};wt.data.team.get_team_stats(b.team.team_id,function(a){200===a.code&&a.data.length>0&&(d.stats_list=e(a.data),d.stats_list=_.sortBy(d.stats_list,"pos"))},null,function(){wt.data.team.get_tasks_overview(b.team.team_id,function(a){200===a.code&&(d.overview=a.data)}),a.global.loading_done=!0,d.part_loading_done=!0}),d.js_pop_add_stats=function(a){c.popbox({target:a,templateUrl:"/tpl/team/pop_add_team_stats.html",controller:["$scope","popbox","pop_data","globalDataContext","$rootScope",function(a,b,c,d,e){function f(){_.each(g.stats_type,function(a){a.disable=!1})}a.popbox=b;var g=a.vm={projects:_.findWhere(d.teams,{team_id:c.team_id}).projects,project_not_select:!1,project_select:void 0,stats_type_select:[],stats_type:kzi.constant.stats_type,pop_add_loading:!1};f(),g.js_close=function(){b.close()},g.js_select_click=function(){g.project_not_select=!1},g.js_select_project=function(){var a=_.pluck(_.filter(c.stats_list,{pid:g.project_select}),"type");_.each(g.stats_type,function(b){_.indexOf(a,b.value)>=0?(b.disable=!0,g.stats_type_select=_.reject(g.stats_type_select,function(a){return a===b.value})):b.disable=!1})},g.js_select_stats=function(a,b){$(a.target).parents("li").hasClass("disable")||(_.indexOf(g.stats_type_select,b)<0?g.stats_type_select.push(b):g.stats_type_select=_.reject(g.stats_type_select,function(a){return a===b}))},g.js_add_stats=function(){return g.project_select?_.filter(g.stats_type,{disable:!0}).length===kzi.constant.stats_type.length?void kzi.msg.warn("当前项目统计类型都已添加"):void 0===g.stats_type_select?void kzi.msg.warn("请选择统计类型"):(g.pop_add_loading=!0,void wt.data.team.add_team_stats(g.project_select,g.stats_type_select,function(a){200===a.code&&(kzi.msg.success("添加统计成功"),e.$broadcast(kzi.constant.event_names.team_add_stats,a.data),g.js_close())},null,function(){g.pop_add_loading=!1})):(g.project_not_select=!0,void kzi.msg.warn("请选择统计项目"))}}],resolve:{pop_data:function(){return{team_id:b.team.team_id,stats_list:b.vm.stats_list}}}}).open()},d.stats_sort_options={containment:".team-dashboard",placeholder:"portlet-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",accept:".portlet-item",cancel:".ui-sortable-cancel",start:function(a,b){b.helper.addClass("portlet-picked-up"),$(".portlet-placeholder").css({height:b.item.css("height")})},stop:function(a,b){var c=b.item.scope().stats,d=void 0;b.item.prev().scope()&&b.item.prev().scope().stats&&(d=b.item.prev().scope().stats.pos);var e=void 0;b.item.next().scope()&&b.item.next().scope().stats&&(e=b.item.next().scope().stats.pos),f(c.pid,c.type,d,e)}},b.$on(kzi.constant.event_names.team_add_stats,function(a,b){d.stats_list=d.stats_list.concat(e([b])),d.stats_list=_.sortBy(d.stats_list,"pos")}),b.$on(kzi.constant.event_names.team_remove_stats,function(a,b){d.stats_list=_.reject(d.stats_list,{pid:b.pid,type:b.type})})}}function c(a,b,c,d){var e=a.$parent.vm;e.display_team_setting=!0,b.global.title="团队设置 | "+a.team.name,b.global.loading_done=!0,a.part_loading_done=!0,a.active_team_admin_nav_tab="admin",a.quit_team_step=1,a.js_set_current_menu=function(b){a.current_menu=b},a.js_quit_team_step=function(b){a.quit_team_step=b},a.js_quit_team=function(){a.is_quiting!==!0&&(a.is_quiting=!0,wt.data.team.leave(a.team.team_id,function(){kzi.msg.success("退出团队成功！"),d.cache.team.dismiss(a.team.team_id),c.go("dashboard.default")},null,function(){a.is_quiting=!1}))}}angular.module("wt.team.ctrl",[]).controller("teamCtrl",a).controller("teamDashboardCtrl",b).controller("teamSettingCtrl",c),a.$inject=["$rootScope","$scope","$state","$stateParams","team","teamCalendarFilterData","$popbox"],b.$inject=["$rootScope","$scope","$popbox"],c.$inject=["$scope","$rootScope","$state","globalDataContext"]}(),angular.module("wt.team.ctrl").controller("team_tasks_ctrl",["$rootScope","$scope","$state","$popbox","globalDataContext","locator",function(a,b,c,d,e,f){if(!b.team)return c.go("dashboard.default");a.global.title="任务 | "+b.team.name,a.global.loading_done=!0,b.loading_tasks=!1;var g=b.team.team_id;b.part_loading_done=!1;var h=b.vm={filter_type_reg:"uncompleted",filter_project_reg:"all",filter_user_reg:"all",is_has_more_task:!0},i=1;b.locator=f,b.tasks=[];var j=b.load_tasks=function(){b.loading_tasks=!0,wt.data.team.get_tasks(g,h.filter_user_reg,h.filter_project_reg,h.filter_type_reg,i,function(a){_.each(a.data,function(a){a.project=e.getProject(a.pid),b.tasks.push(a)}),a.data.length>0?(i+=1,h.is_has_more_task=!0):h.is_has_more_task=!1},function(){kzi.msg.error("获取团队任务信息失败")},function(){b.loading_tasks=!1})};wt.data.team.get_team_members(g,function(a){b.team.members=_.filter(a.data.members,function(a){return a.role!=kzi.constant.role.guest&&a.status==kzi.constant.user_status.ok})},null,function(){b.part_loading_done=!0}),j(),b.js_reset_filter_type=function(a){h.filter_type_reg!==a&&(h.filter_type_reg=a,i=1,b.tasks=[],j())},b.js_toggle_filter_user=function(a){h.filter_user_reg===a?h.filter_user_reg="all":h.filter_user_reg=a,i=1,b.tasks=[],j()}}]),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){var a={url:l.invite_link,desc:"["+wt.me.display_name+"] 邀请你加入团队: "+l.team_name+" \nWorktile 是一个简单好用的团队协作工具，我们团队使用它来跟踪任务进展情况，讨论问题，共享文件和文档，安排团队的日程，大家赶快加入吧。",title:"Worktile 邀请团队成员",summary:"",site:"Worktile",style:"201"},b=[];for(var c in a)b.push(c+"="+encodeURIComponent(a[c]||""));l.invite_qq_link+=b.join("&")}a.global.title="邀请成员 | "+b.team.name,a.global.loading_done=!0;var k=d.team_id,l=b.vm={team_id:d.team_id,team_name:"",invite_link:"",invite_qq_link:"http://connect.qq.com/widget/shareqq/index.html?",invite_type:0,invite_email_batch:"",invite_email_batch_error:"",invite_members:[],invite_message:"Worktile是一个简单好用的团队协作工具，我们团队使用它来跟踪任务进展情况，讨论问题，共享文件和文档，安排团队的日程，大家赶快加入吧。",invite_link_open:!1},m=function(){l.team_name=_.findWhere(g.teams,{team_id:l.team_id}).name,wt.data.team.get_full(l.team_id,function(a){var b=a.data.info.link_join_code;""==b?l.invite_link_open=!1:(l.invite_link_open=!0,l.invite_link=window.location.origin+"/team/link/join?code="+b)})};l.js_invite_email_batch=function(){if(l.invite_email_batch_error="",0==l.invite_email_batch.length)return void(l.invite_email_batch_error=" 您还没有输入邮箱地址！");var d=l.invite_email_batch.split("\n"),e=[];_.each(d,function(a){return kzi.validator.isEmail(a)?void e.push({email:a,role:2}):void(l.invite_email_batch_error=" 邮箱格式错误！")}),""==l.invite_email_batch_error&&(a.global.loading_done=!1,wt.data.team.invite_member(k,e,l.invite_message,[],function(b){a.global.loading_done=!0,kzi.msg.success("邀请成功!"),c.reload()},function(a){kzi.msg.error("邀请失败，请重新再试")},function(){b.is_sending=!1;
}))},l.js_invite_contact_modal=function(){var b=i.open({windowClass:"dialog-w680",templateUrl:"/tpl/team/dialog_team_invite_contact.html",controller:["$scope","modal_data",function(d,e){function f(){var a=[];_.each(i.contact_members,function(b){1==b.selected&&a.push(b)}),i.contact_members_selected=a}var h=e.target_vm,i=d.vm={contact_members:[],contact_members_selected:[],part_loading_done:!1},j=function(){wt.data.account.get_contacts(function(a){var b=a.data,c=_.map(a.data,"uid");wt.data.team.get_team_members(k,function(a){var d=_.map(a.data.members,"uid"),e=_.intersection(c,d);_.remove(b,function(a){return-1!=e.indexOf(a.uid)}),i.contact_members=b,i.part_loading_done=!0},function(a){ycUtil.msg.error("获取联系人列表失败，请重试!")})},function(a){ycUtil.msg.error("获取联系人列表失败，请重试!")},null)};i.js_contact_selected_toggle=function(a){_.filter(i.contact_members,function(b){b.uid==a&&(b.selected===!0?b.selected=!1:b.selected=!0)}),f()},i.js_send_invite=function(){if(0==i.contact_members_selected.length)return void kzi.msg.error("您还没有选择，要邀请的联系人！");a.global.loading_done=!1;var b=[];_.each(i.contact_members_selected,function(a){b.push({email:a.email,role:2})}),wt.data.team.invite_member(h.team_id,b,h.invite_message,[],function(a){kzi.msg.success("邀请成功！"),d.js_close(),c.reload(),_.findWhere(g.teams,{team_id:h.team_id}).member_count+=b.length},function(a){kzi.msg.error("邀请失败，请重新邀请！")},function(){i.saving=!1})},d.js_close=function(){b.close()},j()}],resolve:{modal_data:function(){return{target_vm:l}}}})},l.js_invite_link_open=function(){wt.data.team.join_link_open(l.team_id,function(a){l.invite_link_open=!0,l.invite_link=window.location.origin+"/team/link/join?code="+a.data},function(){kzi.msg.error("打开链接失败！")})},l.js_invite_share_qq=function(){j(),window.open(l.invite_qq_link)},l.js_invite_share_weixin=function(a){var b="";$.ajax({url:"/api/qr/code?text="+l.invite_link,context:document.body}).done(function(c){b=c.split('"')[1],h.popbox({target:a,popboxClass:"popbox min-w50",placement:"bottom",align:"left",templateUrl:"/tpl/team/pop_team_invite_qr_code.html",controller:["$scope","popbox","$window","$rootScope",function(a,c,d,e){a.popbox=c,a.url=b}]}).open()})},l.js_invite_link_close=function(){wt.data.team.join_link_close(l.team_id,function(){l.invite_link_open=!1},function(){kzi.msg.error("关闭链接失败！")})},b.team_id=k,b.active_team_admin_nav_tab="member",b.current_menu=k,b.invite_members=[],b.invite_member_roles=kzi.constant.get_member_roles();var n={role:kzi.constant.role.member,email:""};_.each([1,2,3],function(a){var c=angular.copy(n);c.input_name="member_email"+a,b.invite_members.push(c)}),b.js_add_invite_member=function(){var a=angular.copy(n);a.input_name="member_email"+(b.invite_members.length+1),b.invite_members.push(a)},b.js_delete_member=function(a,c){a.preventDefault(),b.invite_members=_.reject(b.invite_members,function(a){return a.index===c.index})},b.js_email_focus=function(a){a.$errors=[]},b.js_invite_members=function(d){if(_.findWhere(b.invite_members,{email:void 0}))return void d.$errors.unshift("邮箱格式输入不正确");var e=_.filter(b.invite_members,function(a){return a.email&&""!==a.email}),f="",h=0;if(_.each(e,function(a){var b=a.email.toLowerCase()+",";f.indexOf(b)>=0?(d.$errors.unshift("邀请邮箱地址不能重复"),h=1):f+=b}),!h){if(_.isEmpty(e))return void d.$errors.unshift("请至少输入一个邀请成员");var i=!1;if(_.each(e,function(a){return kzi.validator.isEmail(a.email)?void 0:(d.$errors.unshift("邮箱格式输入不正确"),void(i=!0))}),!i){b.is_sending=!0;var j=b.invite_message,l=[];wt.data.team.invite_member(k,e,j,l,function(b){a.global.loading_done=!0,kzi.msg.success("邀请成功"),c.reload(),_.findWhere(g.teams,{team_id:k}).member_count+=e.length},function(){d.$errors.unshift("邀请失败，请重新再试")},function(){b.is_sending=!1})}}},b.js_invite_enter=function(a,c){b.js_invite_members(c)},b.js_cancel_invite=function(){e.path("/teams/"+k)},wt.data.team.get_team_members(k,function(a){b.pending_members=_.filter(a.data.members,function(a){return a.status==kzi.constant.status.pending})},null,function(){a.global.loading_done=!0}),l.js_pending_members_del=function(a){b.pending_members=_.filter(b.pending_members,function(b){return a.uid!==b.uid})},f.addListener(kzi.constant.event_names.team_member_role_change,l.js_pending_members_del,b),m()}function b(a,b,c,d){if(!b.team)return c.go("dashboard.default");a.global.title="成员 | "+b.team.name,a.global.loading_done=!0;var e=(b.vm={},b.parent_vm=b.$parent.vm,b.team.team_id);b.part_loading_done=!1,b.members={},b.filter_type="normals";var f=function(){b.members.normals=_.filter(b.team.members,function(a){return a.role>0&&a.role<=kzi.constant.role.member&&a.status==kzi.constant.user_status.ok}),b.members.inviteds=_.filter(b.team.members,function(a){return a.status==kzi.constant.user_status.pending}),b.members.guests=_.filter(b.team.members,function(a){return a.role==kzi.constant.role.guest})};wt.data.team.get_team_members_with_stats(e,function(a){b.team.members=a.data.members,f()},null,function(){b.part_loading_done=!0});var g=function(a){if(a.role!=kzi.constant.role.deleted){var c=_.findWhere(b.team.members,{uid:a.uid});c.role=a.role}else{var d=_.findIndex(b.team.members,{uid:a.uid});d>=0&&b.team.members.splice(d,1)}f()};d.addListener(kzi.constant.event_names.team_member_role_change,g,b),b.$on(kzi.constant.event_names.member_state_change,function(c,d){if(d.uid!==a.global.me.uid){var e=_.findWhere(b.team.members,{uid:d.uid});e&&(e.online=d.state),f()}}),b.js_reset_filter_type=function(a){b.filter_type=a}}angular.module("wt.team.ctrl").controller("teamMemberInviteCtrl",a).controller("teamMembersCtrl",b),a.$inject=["$rootScope","$scope","$state","$stateParams","$location","bus","globalDataContext","$popbox","$modal"],b.$inject=["$rootScope","$scope","$state","bus"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){return b.team?(a.global.title="项目 | "+b.team.name,_.each(e.projects,function(a){g.me_pids.push(a.pid)}),a.global.loading_done=!0,g.part_loading_done=!1,void wt.data.team.get_team_projects(b.team.team_id,function(a){b.team.projects=a.data,h()},null,function(){g.part_loading_done=!0})):c.go("dashboard.default")}var g=b.vm={part_loading_done:!1,me_pids:[],filter_type:"me",projects:{participateds:[],teampublics:[]}};b.parent_vm=b.$parent.vm;f();var h=function(){g.projects.participateds=_.filter(b.team.projects,function(a){return _.includes(g.me_pids,a.pid)}),g.projects.teampublics=_.filter(b.team.projects,function(a){return!_.includes(g.me_pids,a.pid)&&(a.visibility===kzi.constant.prj_visibility["protected"]||a.visibility===kzi.constant.prj_visibility["public"])})};g.js_reset_filter_type=function(a){g.filter_type=a},g.js_new_project=function(a){d.showAdd(b.team?b.team.team_id:"")}}angular.module("wt.team.ctrl").controller("team_projects_ctrl",a),a.$inject=["$rootScope","$scope","$state","projectService","globalDataContext"]}(),function(){"use strict";function a(){this.myCalendar={},this.team_calendar_filter_status=!1,this.filter_only_task=!1,this.filter_only_schedule=!1,this.team_calendar_filter_type=0,this.team_calendar_filter_pids="",this.team_all_projects=[],this.team_calendar_filter_member_uids="",this.team_all_member=[],this.clear_filter=function(){this.filter_only_schedule=!1,this.filter_only_task=!1,this.team_calendar_filter_type=0,this.team_calendar_filter_pids="",_.each(this.team_all_projects,function(a){a.is_checked=!0}),this.team_calendar_filter_member_uids="",_.each(this.team_all_member,function(a){a.is_checked=!1}),this.removeEvents(),this.refetchEvents()},this.removeEvents=function(){this.myCalendar.fullCalendar("removeEvents")},this.refetchEvents=function(){this.myCalendar.fullCalendar("refetchEvents")}}function b(a,b,c,d,e,f,g){function h(){var a=g.myCalendar.fullCalendar("getView");$("#calendar_title").html(a.title);var b=new Date(a.start).getTime(),c=new Date(a.end).getTime(),d=(new Date).getTime();b>d||d>c?$("#calendar_today").css("visibility","visible"):$("#calendar_today").css("visibility","hidden")}function i(){0!=$("#calendar").find(".fc-agendaWeek-view").size()&&($("#calendar").find(".fc-agendaWeek-view tbody td:eq(0)").css({height:kzi.util.winHeight()-k.header_height-40,overflow:"auto",display:"block"}),$("#calendar").find(".fc-agendaWeek-view tbody td:eq(0)").find(".fc-time-grid-container").css({height:"",overflow:"auto"}))}function j(){}var k=b.vm={header_height:150,calendar_view:"month",show_my_task:!0,team_id:b.team.team_id,cache_calendar:null};a.global.title="日历 | "+b.team.name;var l,m,n=null,o=null;j();var p=function(a,c,d,e,f){if(_.isEmpty(n)||l!==a||m!==c){var g=_.pluck(b.projects,"pid");wt.data.calendar.get_list(g,1,a,c,function(a){n=a.data,_.isFunction(d)&&d(n)},e,f)}else _.isFunction(d)&&d(n),_.isFunction(f)&&f()};b.js_new_event_success=function(c){c.forEach(function(c){if(c.end.date>=l&&c.start.date<=m){var d=_.findWhere(b.projects,{pid:c.pid});if(d){var e=wt.bus.event.event_to_calEvent(c,d.bg);c.attendees&&c.attendees.indexOf(a.global.me.uid)>=0?e.extend.i_attended=1:e.extend.i_attended=0,d.is_calendar||(d.is_calendar=1,_.defaults(d,{is_checked:!0}),b.calendar_projects.push(d),b.calendar_projects=_.sortBy(b.calendar_projects,function(a){return a.pos})),n&&(n.push(e),g.removeEvents(),g.refetchEvents())}else n=null,g.removeEvents(),g.refetchEvents()}})},b.onEventClick=function(a,b,c){b.preventDefault(),b.stopPropagation(),a.extend&&a.extend.xtype===kzi.constant.xtype.event?f.openEvent(a.extend.pid,a.id):f.openTask(a.extend.pid,a.id)},b.onDayClick=function(d,e,f){if(a.global.loading_done){var g=kzi.helper.mouse_position(e);$(e.currentTarget).attr("data-placement","right"),$(e.currentTarget).attr("data-align","top"),$(e.currentTarget).addClass("js-popbox"),$(e.currentTarget).attr("data-auto-adapt","true"),c.popbox({target:e,templateUrl:"/ycjs/directive/event/pop_add_event.html",controller:"newEventCtrl",top:g.y,left:g.x,resolve:{pop_data:function(){return{save_success:function(a){b.js_new_event_success(a)},start_date:d,is_team_calendar:!0,team_id:k.team_id}}}}).open()}},k.calendarEventSources=[{events:function(a,b,c,d){function f(a){var b,c=a.data.events,d=a.data.tasks;switch(c=_.filter(c,function(a){return a.extend.recurrence_id&&(a.editable=!1),a.start.length<25&&(a.start=moment.unix(a.start).format(),a.end=moment.unix(a.end).format()),0==g.team_calendar_filter_member_uids.length||0!=_.intersection(a.attendees,g.team_calendar_filter_member_uids).length}),d=_.filter(d,function(a){return a.borderColor=e.getProject(a.extend.pid).bg,1===a.extend.completed?a.className="cal_task cal_task_completed slide-trigger":a.className="cal_task cal_task_uncompleted slide-trigger",a.start.length<25&&(a.start=moment.unix(a.start).startOf("day").format()),"agendaWeek"===g.myCalendar.fullCalendar("getView").name&&(a.editable=!1,a.allDay=!0),0==g.team_calendar_filter_member_uids.length||0!=_.intersection(a.members,g.team_calendar_filter_member_uids).length}),g.team_calendar_filter_type){case 0:b=k.cache_calendar=c.concat(d);break;case 1:b=k.cache_calendar=c;break;case 2:b=k.cache_calendar=d}return b}var h=moment(a.format()).unix()+"000",i=moment(b.format()).unix()+"000";null==k.cache_calendar?wt.data.calendar.get_teams_events_and_tasks(k.team_id,0,g.team_calendar_filter_pids,h,i,function(a){f(a),d(k.cache_calendar),l=h,m=i},null,null):(d(k.cache_calendar),wt.data.calendar.get_teams_events_and_tasks(k.team_id,0,g.team_calendar_filter_pids,h,i,function(a){f(a),g.removeEvents(),g.myCalendar.fullCalendar("addEventSource",k.cache_calendar),l=h,m=i},null,null))}}],k.calendarConfig={header:!1,height:kzi.util.winHeight()-k.header_height,editable:!0,droppable:!0,nextDayThreshold:"00:00:00",titleFormat:{month:"YYYY年M月",week:"YYYY年M月D日",day:"YYYY年M月D日"},firstDay:0,weekMode:"liquid",allDayText:"全天",axisFormat:"HH:mm",timeFormat:"✓",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],buttonText:{today:"今天",month:"月",agendaWeek:"周",agendaDay:"日"},defaultView:k.calendar_view,dayClick:b.onDayClick,loading:function(b){g.myCalendar=d.calendars.myCalendar,h(),b?a.global.loading_done=!1:a.global.loading_done=!0,i()},eventClick:function(a,c,d){b.onEventClick(a,c,d)},eventDrop:function(a,b,c,d,f,g){if(0!==b){var h=a.extend.pid;if(a.extend.xtype===kzi.constant.xtype.task){var i=a.id,j=a.extend.expire_date,k=moment(j).add(b,"days").endOf("day").valueOf();wt.data.task.set_expire(h,i,k,function(){a.extend.expire_date=k,a.extend.badges.expire_date=k,e.cache.task.set_expire(i,k)})}else if(a.extend.xtype===kzi.constant.xtype.event){var l=moment(a.start),m=moment(a.end||a.start);e.cache.event.update_date(h,a.id,l.format("YYYY-MM-DD"),l.format("HH:mm"),m.format("YYYY-MM-DD"),m.format("HH:mm"),function(){a.extend.end=m.valueOf()})}}},eventResize:function(a,b,c){if("month"===k.calendar_view){var d=moment(a.start._i).format("HH"),f=moment(a.start._i).format("mm");a.extend.end=a.end.valueOf();var g=moment(a.end._i).format("HH"),h=moment(a.end._i).format("mm");e.cache.event.update_date(a.extend.pid,a.id,a.start.format("YYYY-MM-DD"),d+":"+f,a.end.format("YYYY-MM-DD"),g+":"+h,function(){angular.noop()})}if("agendaWeek"===k.calendar_view){var d=a.start.format("HH"),f=a.start.format("mm");a.extend.end=a.end.valueOf();var g=a.end.format("HH"),h=a.end.format("mm");e.cache.event.update_date(a.extend.pid,a.id,a.start.format("YYYY-MM-DD"),d+":"+f,a.end.format("YYYY-MM-DD"),g+":"+h,function(){angular.noop()})}},windowResize:function(){$(this).fullCalendar("option","height",kzi.util.winHeight()-k.header_height),i()},viewRender:function(a,b){if("agendaWeek"===a.name)for(var c,d=b.find(".fc-axis span"),e=0;e<d.length;e++)c=$(d[e]).text(),c=c.replace(/(AM|PM)/,function(a,b){return"AM"===a?"上午":"PM"===a?"下午":void 0}),e>0&&$(d[e]).text(c+"时")},eventRender:function(a,b){b.attr("title",b.find(".fc-title").text())},views:{agendaWeek:{axisFormat:"Ah"}}},b.changeView=function(a){g.myCalendar.fullCalendar("changeView",a),k.calendar_view=a,kzi.localData.set("calendar_view",a),h(),g.removeEvents(),g.refetchEvents()},b.prev=function(){g.myCalendar.fullCalendar("prev"),h()},b.next=function(){g.myCalendar.fullCalendar("next"),h()},b.today=function(){g.myCalendar.fullCalendar("today"),h()},b.$on(kzi.constant.event_names.on_task_update,function(a,b){var c=_.findWhere(o,{id:b.tid});c&&(c.title=b.name,c.start=b.expire_date.toString().substring(0,10)),g.removeEvents(),g.refetchEvents()}),b.$on(kzi.constant.event_names.on_task_trash,function(a,b){var c=_.findWhere(o,{id:b.tid});c&&(o=_.reject(o,function(a){return a.id===b.tid})),g.removeEvents(),g.refetchEvents()}),b.$on(kzi.constant.event_names.on_task_complete,function(a,b){var c=_.findWhere(o,{id:b.tid});c&&(b.completed?(c.className="cal_task cal_task_completed slide-trigger",c.extend.completed=1):(c.className="cal_task cal_task_uncompleted slide-trigger",c.extend.completed=0)),g.removeEvents(),g.refetchEvents()}),b.$on(kzi.constant.event_names.on_event_update,function(b,c,d,e){if(n){var f=_.findWhere(n,{id:c.event_id});if(d===kzi.constant.event_update_type.one&&f&&(f.title=c.name,f.start=moment(c.start.date).valueOf().toString().substring(0,10),f.end=moment(c.end.date).valueOf().toString().substring(0,10),_.findWhere(c.attendees,{uid:a.global.me.uid})?f.extend.i_attended=1:f.extend.i_attended=0,g.removeEvents(),g.refetchEvents()),d===kzi.constant.event_update_type.follow_up){var h=new Date(c.start.date)-new Date(f.start),i=new Date(c.end.date)-new Date(c.start.date),j=new Date(f.start);h>0?(n.forEach(function(a){var b=new Date(a.start);a.extend.recurrence_id===c.recurrence_id&&b>=j&&(a.start=moment(a.start).add(h,"milliseconds"),a.end=moment(a.start).add(i,"milliseconds"),a.start=a.start.valueOf().toString().substring(0,10),a.end=a.end.valueOf().toString().substring(0,10),e&&(a.extend.recurrence_id=e))}),g.removeEvents(),g.refetchEvents()):(n=[],p(l,m,function(){g.removeEvents(),g.refetchEvents()},null,function(){}))}}}),b.$on(kzi.constant.event_names.on_event_trash,function(a,c,d){if(n){var e=parseInt(d);switch(e){case kzi.constant.event_trash_type.one:n=_.reject(n,function(a){return a.id===c.event_id});break;case kzi.constant.event_trash_type.follow_up:n=_.reject(n,function(a){var b=new Date(a.start).getTime();return b>=c.start.date&&a.extend.recurrence_id===c.recurrence_id});break;case kzi.constant.event_trash_type.all:n=_.reject(n,function(a){return a.extend.recurrence_id===c.recurrence_id})}}b.calendar_projects=_.filter(b.projects,function(a){return 1===a.is_calendar}),g.removeEvents(),g.refetchEvents()})}function c(a,b,c){function d(){wt.data.team.get_team_projects(b.team.team_id,function(a){c.team_all_projects=a.data,_.each(c.team_all_projects,function(a){a.is_checked=!0})}),wt.data.team.get_team_members(b.team.team_id,function(b){c.team_all_member=_.filter(b.data.members,function(b){return b.role==kzi.constant.role.admin&&b.uid==a.global.me.uid&&(e.user_is_team_admin=!0),(b.role==kzi.constant.role.admin||b.role==kzi.constant.role.member)&&b.status==kzi.constant.user_status.ok})})}var e=b.vm={teamCalendarFilterData:c,is_filter_action:!1};d(),e.js_close_filter=function(){c.team_calendar_filter_status=!1},e.js_clear_filter=function(){c.clear_filter()},e.js_filter_type=function(a){switch(a){case"task":c.filter_only_task=!0,c.filter_only_schedule=!1,c.team_calendar_filter_type=2;break;case"schedule":c.filter_only_schedule=!0,c.filter_only_task=!1,c.team_calendar_filter_type=1;break;default:c.filter_only_schedule=!1,c.filter_only_task=!1,c.team_calendar_filter_type=0}c.removeEvents(),c.refetchEvents()},e.js_calendar_filter_project_toggle=function(a){a.is_checked===!0?a.is_checked=!1:a.is_checked=!0,c.team_calendar_filter_pids=_.pluck(_.filter(c.team_all_projects,{is_checked:!0}),"pid").toString()||"",c.removeEvents(),c.refetchEvents()},e.js_calendar_filter_member_toggle=function(a){void 0==a.is_checked?a.is_checked=!1:null,0==a.is_checked?a.is_checked=!0:a.is_checked=!1,c.team_calendar_filter_member_uids=_.pluck(_.filter(c.team_all_member,{is_checked:!0}),"uid"),c.removeEvents(),c.refetchEvents()},b.$on("$destroy",function(){e.js_close_filter()})}angular.module("wt.team.ctrl").service("teamCalendarFilterData",a).controller("teamCalendarCtrl",b).controller("teamCalendarSidebarCtrl",c),b.$inject=["$rootScope","$scope","$popbox","uiCalendarConfig","globalDataContext","locator","teamCalendarFilterData"],c.$inject=["$rootScope","$scope","teamCalendarFilterData"]}(),function(){"use strict";function a(a,b,c){"team.admin"===b.current.name&&c(function(){a.$parent.vm.user_is_team_owner?b.go(".basic",null,{location:"replace"}):b.go(".members",null,{location:"replace"})})}function b(a,b,c,d,e,f,g){if(!b.team)return c.go("not_found");var h=b.team.team_id;a.global.title="团队设置 | "+b.team.name,a.global.loading_done=!0,b.part_loading_done=!0,b.is_set_team_tag=!1,b.is_set_team_project=!1,b.is_set_team_template=!1,b.curent_edit_template={};var i=b.vm={labels:[],default_labels_clone:[],defaultProjects:[],projects:[],defaultTplId:{},defaultTpl:{},templates:[]},j=b.$parent.vm;j.display_team_setting=!0,i.labels=b.team.default_labels,i.default_labels_clone=_.cloneDeep(b.team.default_labels),b.js_toggle_team_tag=function(a){b.is_set_team_tag=!b.is_set_team_tag,i.labels=[];var c=b.team.default_labels;$(c).each(function(a,b){"string"==typeof b.desc&&i.labels.push(b)}),"cancel"===a?(b.team.default_labels=i.default_labels_clone,i.labels=i.default_labels_clone):"save"===a&&wt.data.team.set_labels(b.team.team_id,b.team.default_labels,function(){i.default_labels_clone=b.team.default_labels},null,null)};var k=b.team.default_pids,l=function(){wt.data.team.projects_get(h,function(a){200===a.code&&a.data.length>0&&(i.projects=a.data,$(i.projects).each(function(a,b){var c=b.pid;-1!==k.indexOf(c)&&(b.checked=!0,i.defaultProjects.push(b))}))},null,null)};l(),b.save_project=function(){var a=[],c=[];$(i.projects).each(function(b,d){var e=d.pid;d.checked&&(a.push(e),c.push(d))}),wt.data.team.set_default_project(h,a,function(a){200===a.code&&(i.defaultProjects=c,b.is_set_team_project=!b.is_set_team_project)},null,null)},b.js_toggle_team_project=function(){b.is_set_team_project=!b.is_set_team_project},b.js_toggle_team_project_create=function(){g.showAdd(b.team.team_id,function(a){i.projects.push(a)})},i.defaultTplId=b.team.template_id,b.setDefaultTemplat=function(){$(i.templates).each(function(a,b){b.template_id===i.defaultTplId&&(i.defaultTpl=b)})};var m=function(){wt.data.team.get_project_templates(h,function(a){200===a.code&&(i.templates=a.data,i.defaultTplId&&b.setDefaultTemplat())},null,null)};m(),b.save_templates=function(){wt.data.team.set_default_template(h,i.defaultTplId,function(a){200===a.code&&(b.setDefaultTemplat(),b.is_set_team_template=!b.is_set_team_template)},null,null)},b.js_toggle_team_template=function(){b.is_set_team_template=!b.is_set_team_template},b.js_edit_team_template=function(a,c){$(i.templates).each(function(c,d){d.template_id===a&&(b.curent_edit_template=d,b.curent_edit_template_index=c)}),e.popbox({target:c,templateUrl:"/tpl/team/team_admin_custom_edite_template.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var d=a.pm={tpl:c._tpl,tplIndex:c._tplIndex,vm:c._vm};a.js_do_save_template=function(){var a=angular.copy(d.tpl),e=[];$(a.entries).each(function(a,b){b.name&&e.push(b.name)}),a.entries=e,a.is_default=!1,wt.data.team.update_project_template(c.teamId,a.template_id,a,function(a){200===a.code&&b.close()},null,null)},a.js_do_del_template=function(){wt.data.team.delete_project_template(c.teamId,d.tpl.template_id,function(a){200===a.code&&(d.vm.templates.splice(d.tplIndex,1),b.close(),d.tpl.template_id==i.defaultTplId&&(i.defaultTplId=i.templates[0].template_id))},null,null)},a.js_add_more_template=function(){d.tpl.entries.push({name:""})},a.js_remove_a_template=function(a){1!==d.tpl.entries.length&&d.tpl.entries.splice(a,1)},d.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{$scope:b,teamId:h,_vm:i,_tpl:b.curent_edit_template,_tplIndex:b.curent_edit_template_index}}}}).open()},b.js_toggle_team_template_create=function(a){e.popbox({target:a,templateUrl:"/tpl/team/team_admin_custom_add_template.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var d=a.pm={is_loading:!1};a.newTpl={name:"",is_default:!1,entries:[{name:""}]},a.js_do_new_template=function(){if(!d.is_loading){d.is_loading=!0;var e=a.newTpl,f=e.entries,g=[];$(f).each(function(a,b){b.name&&g.push(b.name)}),e.entries=g,wt.data.team.add_project_template(c.teamId,e,function(c){200===c.code&&(a.newTpl.is_default&&(i.defaultTplId=c.data.template_id,i.defaultTpl=c.data),i.templates.push(c.data),b.close())},null,function(){d.is_loading=!1})}},a.js_add_more_template=function(){a.newTpl.entries.push({name:""})},a.js_remove_a_template=function(b){1!==a.newTpl.entries.length&&a.newTpl.entries.splice(b,1)},d.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{$scope:b,teamId:h}}}}).open()}}function c(a,b,c,d,e){if(!b.team)return c.go("not_found");var f=b.team.team_id;a.global.loading_done=!0,b.industries=_.clone(kzi.constant.team_industries),delete b.industries[0],b.industry_keys=_.map(_.keys(b.industries),function(a){return parseInt(a)}),b.industry=null,b.editing_team_info=!1,b.editing_team_visibility=!1,b.saving_team_info=!1,b.saving_visibility=!1,b.dismiss_step=1,b.transfer_step=1,b.visibility_step=1,b.visibilities=[{value:kzi.constant.team_visibility["public"],description:"公开团队"},{value:kzi.constant.team_visibility["private"],description:"私有团队"}],a.global.loading_done=!0,a.global.title="团队设置 | "+b.team.name;var g=b.vm={visibility:b.team.visibility,name:b.team.name,desc:b.team.desc,industry:b.team.industry},h=b.$parent.vm;h.display_team_setting=!0,b.part_loading_done=!0,b.js_toggle_edit_team_info=function(){b.editing_team_info=!b.editing_team_info},b.js_toggle_edit_visibility=function(){b.editing_visibility=!b.editing_visibility},b.js_set_team=function(a,c,d,e){return b.team.name===g.name&&b.team.desc===g.desc&&b.team.industry===g.industry?(b.saving_team_info=!1,void(b.editing_team_info=!1)):(b.saving_team_info=!0,void wt.data.team.update(f,g.name,g.desc||"","",g.industry,function(a){b.team.name=g.name,b.team.desc=g.desc,b.team.industry=g.industry,kzi.msg.success("修改团队基本信息成功！")},function(){kzi.msg.error("修改团队基本信息失败！")},function(){b.saving_team_info=!1,b.editing_team_info=!1}))},b.js_transfer_pop=function(c){d.popbox({target:c,placement:"bottom",templateUrl:"/tpl/team/pop_transfer_team.html",controller:["$scope","popbox","pop_data",function(b,c,d){b.popbox=c,b.step=0,b.js_step=function(a){b.step=a},b.team_members=null,wt.data.team.get_team_members(d.scope.team.team_id,function(c){b.team_members=_.reject(c.data.members,function(b){return b.uid===a.global.me.uid||b.status===kzi.constant.status.pending||b.role==kzi.constant.role.guest}),b.members_loading_done=!0}),b.js_to_transfer_confirm=function(a){b.selected_member=a,d.scope.selected_member=a,d.scope.js_transfer_step(2),c.close()},b.js_close=function(){c.close()}}],resolve:{pop_data:function(){return{scope:b}}}}).open()},b.js_dismiss_step=function(a){b.dismiss_step=a},b.js_transfer_step=function(a){b.transfer_step=a},b.js_dismiss=function(a,d){b.is_dismissing!==!0&&d===a&&(b.is_dismissing=!0,wt.data.team.dismiss(f,function(){e.cache.team.dismiss(f),b.team=null,c.go("dashboard.default")},null,function(){b.is_dismissing=!1,b.dismiss_step=1}))},b.js_transfer=function(){b.is_transferring=!0,wt.data.team.transfer(f,b.selected_member.uid,function(){b.team.is_owner=0,b.team.owner=b.selected_member,e.cache.team.sync(f,b.team),c.go("team.dashboard")},null,function(){b.is_transferring=!1,b.transfer_step=1})},b.js_visibility_step=function(a){return b.team.visibility==g.visibility?(b.saving_visibility=!1,void(b.editing_visibility=!1)):void(b.visibility_step=a)},b.js_update_visibility=function(){function a(){b.team.visibility=g.visibility,e.cache.team.sync(f,b.team),b.visibility_step=1}function d(){kzi.msg.error("setting team visibility error"),c.go("team.dashboard")}function h(){b.saving_visibility=!1,b.editing_visibility=!1}return b.saving_visibility=!0,b.team.visibility==g.visibility?h():void wt.data.team.set_visibility(f,g.visibility,a,d,h)},b.js_visibility_cancel=function(){b.visibility=b.team.visibility,b.editing_visibility=!1,b.saving_visibility=!1}}function d(a,b,c,d,e,f,g,h,i){var j=b.$parent.vm;j.display_team_setting=!0,b.active_team_admin_nav_tab="admin",b.current_menu="members";var k=c.team_id;if(b.team_id=k,a.global.loading_done=!0,b.team.team_id&&!b.team.faked){a.global.title="团队设置 | "+b.team.name;var l=100*b.team.member_count/(b.team.member_count+b.team.invite_count),m=100*b.team.invite_count/(b.team.member_count+b.team.invite_count);b.stacked=[{value:l,type:"success"},{value:m,type:"warning"}],b.current_team=b.team,wt.data.team.get_team_members(k,function(a){b.account_members=a.data.members},null,function(){b.part_loading_done=!0})}else d.path("/teams/"+k);var n=function(a){if(a.role!==kzi.constant.role.deleted){var c=_.findWhere(b.account_members,{uid:a.uid});c.role=a.role}else b.account_members=_.reject(b.account_members,function(b){return b.uid===a.uid})};i.addListener(kzi.constant.event_names.team_member_role_change,n,b)}function e(a,b,c,d,e){var f=b.vm={};a.global.loading_done=!0;var g=b.$parent.vm;g.display_team_setting=!0,b.active_team_admin_nav_tab="admin",b.current_menu="projects";var h=c.team_id;if(b.team_id=h,b.team.team_id&&!b.team.faked){a.global.title="团队设置 | "+b.team.name;var i=100*b.team.active_count/b.team.project_count,j=100*b.team.archived_count/b.team.project_count;b.stacked=[{value:i,type:"success"},{value:j,type:"info"}],b.current_team=b.team,wt.data.team.get_account_projects(h,function(a){_.each(a.data,function(a){var c=_.pluck(a.admins,"uid"),d=_.indexOf(c,b.team.owner.uid);a.is_teamOwnerHandler=d>=0||0===c.length}),b.account_projects=a.data},null,function(){b.part_loading_done=!0})}else d.path("/teams/"+h);f.js_pop_project_setting=function(a,b){e.popbox({target:a,templateUrl:"/tpl/team/pop_team_project_setting.html",controller:["$scope","popbox",function(a,c){var d=a.vm={step:0,project:b,loading_project_members_done:!1,project_members:[],loading_team_members_done:!1,unassigned_team_visitors:[],unassigned_team_members:[]};d.js_close=function(){c.close()},d.js_step=function(a){if(1===a){d.loading_project_members_done=!1;var c=function(a){var c=_.pluck(b.admins,"uid");200===a.code&&(d.project_members=[],_.each(c,function(b){a.data=_.reject(a.data,{uid:b})}),a.data=_.reject(a.data,{status:kzi.constant.status.pending}),d.project_members=a.data,d.loading_project_members_done=!0)};0==b.admins.length?wt.data.team.get_account_project_members(b.team_id,b.pid,c):wt.data.project.get_members(b.pid,c)}if(2===a){d.loading_team_members_done=!1;var c=function(a){if(200===a.code){d.unassigned_team_visitors=[],d.unassigned_team_members=[];var c=_.pluck(a.data,"uid");wt.data.team.get_team_members(b.team_id,function(a){a.data.members=_.reject(a.data.members,{status:kzi.constant.status.pending}),_.each(a.data.members,function(a){c.indexOf(a.uid)<0&&(a.role===kzi.constant.role.guest?d.unassigned_team_visitors.push(a):d.unassigned_team_members.push(a))}),d.loading_team_members_done=!0})}};0==b.admins.length?wt.data.team.get_account_project_members(b.team_id,b.pid,c):wt.data.project.get_members(b.pid,c)}d.step=a},d.js_toggle_project_member=function(a){a.checked=!a.checked},d.set_project_admin=function(){var a=_.pluck(_.filter(d.project_members,{checked:!0}),"uid");a.length?_.each(a,function(a){var c=function(){var c=_.findWhere(d.project_members,{uid:a});kzi.msg.success("成功添加 "+c.display_name+" 为管理员"),b.admins.push(c),d.project_members=_.reject(d.project_members,{uid:a})};0===b.admins.length?wt.data.team.set_account_project_role(b.team_id,b.pid,a,kzi.constant.role.admin,c):wt.data.project.set_member_role(b.pid,a,kzi.constant.role.admin,c)}):kzi.msg.warn("请至少选择一个用户")},d.add_project_members=function(){var a=_.pluck(_.filter(d.unassigned_team_members,{checked:!0}),"uid"),c=_.pluck(_.filter(d.unassigned_team_visitors,{checked:!0}),"uid");a=a.concat(c),a.length?_.each(a,function(a){var c=function(c){var e=_.findWhere(d.unassigned_team_members,{uid:a});e||(e=_.findWhere(d.unassigned_team_visitors,{uid:a})),kzi.msg.success("成功添加 "+e.display_name+" 为项目成员"),b.member_count++,d.unassigned_team_members=_.reject(d.unassigned_team_members,{uid:a}),d.unassigned_team_visitors=_.reject(d.unassigned_team_visitors,{uid:a})};0==b.admins.length?wt.data.team.add_account_project_member(b.team_id,b.pid,a,kzi.constant.role.member,c):wt.data.project.add_member(b.pid,a,kzi.constant.role.member,c)}):kzi.msg.warn("请至少选择一个用户")}}]}).open()}}function f(a,b,c){a.global.loading_done=!0;var d=b.$parent.vm;if(d.display_team_setting=!0,b.part_loading_done=!1,!b.team)return c.go("not_found");var e=b.team.team_id,f=function(a){_.isEmpty(a)||_.each(a,function(a){switch(a.template){case"team_member_add":a.verb_display="添加团队成员 ( "+a.member.display_name+" )";break;case"team_member_remove":a.verb_display="移除团队成员 ( "+a.member.display_name+" )";break;case"team_upgrade":a.verb_display="升级团队到商业版";break;case"team_degrade":a.verb_display="降级团队到免费版";break;case"project_member_add":a.verb_display="添加项目成员 ( "+a.project.name+" | "+a.member.display_name+" )";break;case"project_member_remove":a.verb_display="移除项目成员 ( "+a.project.name+" | "+a.member.display_name+" )";break;case"project_add":a.verb_display="添加项目 ("+a.project.name+" )";break;case"project_delete":a.verb_display="删除项目 ("+a.project.name+" )"}})},g=function(a){b.security_histories=null,b.loading_histories_done=!1,wt.data.team.get_security_histories(e,a,function(c){f(c.data.histories),b.histories=c.data.histories,(1===a||"1"===a)&&(b.totalCount=c.data.totalCount,b.security_pagination_opts={totalCount:c.data.total_count,opts:{callback:function(a){g(a+1)}}})},null,function(){b.loading_histories_done=!0,b.part_loading_done=!0;
})};b.team.team_id?(a.global.title="团队设置 | "+b.team.name,g(1)):c.go("team.dashboard")}function g(a,b,c,d){b.current_menu="consultant";var e=c.team_id;b.team_id=e,a.global.loading_done=!0,b.team.team_id&&!b.team.faked?(a.global.title="团队设置 | "+b.team.name,b.part_loading_done=!0):d.path("/teams/"+e)}angular.module("wt.team.admin.ctrl",[]).controller("teamAdminHomeCtrl",a).controller("teamAdminCustomCtrl",b).controller("teamAdminBasicCtrl",c).controller("teamAdminMembersCtrl",d).controller("teamAdminProjectsCtrl",e).controller("teamAdminSecurityCtrl",f),a.$inject=["$scope","$state","$timeout"],b.$inject=["$rootScope","$scope","$state","$location","$popbox","globalDataContext","projectService"],c.$inject=["$rootScope","$scope","$state","$popbox","globalDataContext"],d.$inject=["$rootScope","$scope","$stateParams","$location","$http","$popbox","$q","globalDataContext","bus"],e.$inject=["$rootScope","$scope","$stateParams","$location","$popbox"],f.$inject=["$rootScope","$scope","$state"],g.$inject=["$rootScope","$scope","$stateParams","$location"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){var i=d.pid,j=function(a){if(a&&"project"===c.current.name){var b=".task";if(!_.isEmpty(a.navs)){var d=parseInt(a.navs[0],10),f=_.findWhere(kzi.constant.prj_navigations,{id:d});f&&(b="."+f.name)}".page"===b&&(b=".page.list"),e(function(){c.go(b,null,{location:"replace"})})}},k=g;k?(b.project=k,b.project.navigations=wt.bus.project.get_navs(k.navs),j(k)):e(function(){c.go("project_not_found",{pid:i},{location:"replace"})}),k&&!k._is_full&&e(function(){f.loadFullProject(i,!0,function(a){b.project&&b.project.navigations?a.navigations=b.project.navigations:a.navigations=wt.bus.project.get_navs(a.navs),b.project=a,j(a)},function(){return c.go("not_found")})}),b.task_filters={texts:[],labels:[],members:[],date:"",hide_completed:!1,turn_on:!1,type:""};var l=kzi.localData.get("project_sidebar_status");b.sidebar={status:"members"===l?"members":"",sub_status:"",change_status:function(b,c){e(function(){h.update()},100),b===this.status&&c===this.sub_status?(this.status="",this.sub_status=""):(this.status=b,this.sub_status=c),kzi.localData.set("project_sidebar_status",this.status),a.$broadcast(kzi.constant.event_names.show_project_sidebar,{status:this.status,sub_status:this.sub_status})},close:function(){this.change_status("","")}}}function b(a,b,c){var d=a.vm={};d.js_pop_more=function(b){c.popbox({target:b,$scope:a,templateUrl:"/tpl/project/pop_project_more.html",controller:["$scope","popbox","$rootScope","pop_data","$stateParams",function(a,b,c,e,f){a.popbox=b,a.js_close=function(){b.close()},d.change_sidebar_status=function(c,d){a.sidebar.change_status(c,d),b.close()}}],resolve:{pop_data:function(){return{$scope:a}}}}).open()},d.js_show_setting_step0=function(a){b.$broadcast(kzi.constant.event_names.show_project_setting_step0)}}function c(a,b,c){b.global.loading_done=!0,a.part_loading_done=!1,b.global.title="我的归档项目",a.top_tab="archive",a.view_type="grid",wt.data.project.get_all("archive",function(b){a.archived_projects=b.data},angular.noop,function(){a.part_loading_done=!0}),a.js_goto_project=function(a,b){c.path("/project/"+b.pid)}}function d(a,b){b.global.loading_done=!0,a.part_loading_done=!1,a.top_tab="fav",b.global.title="我收藏的项目",wt.data.project.get_favorite(function(b){a.favorite_projects=b.data},angular.noop,function(){a.part_loading_done=!0}),a.js_favorite_toggle=function(a,b){var c=b.is_favorite?0:1;b.is_favorite=c,wt.data.project.set_favorite(b.pid,c,function(a){},function(){b.is_favorite=c?0:1})}}function e(a,b,c,d){a.js_view_prj_info=function(b){c.popbox({target:b,$scope:a,templateUrl:"/tpl/project/pop_project_info.html",controller:["$rootScope","$scope","popbox",function(a,b,c){b.popbox=c,b.js_close=function(){c.close()},b.js_goto_prj_setting=function(){b.project.curr_role!==kzi.constant.role.visitor&&(b.sidebar.change_status("setting",""),c.close())}}],resolve:{pop_data:function(){return{$scope:a}}}}).open()},a.js_star_toggle=function(a,b){wt.bus.project.set_star_toggle(b,function(){d.cache.project.set_star(b.pid,b.is_star)})},a.js_favorite_toggle=function(a,b){var c=b.is_favorite?0:1;b.is_favorite=c,wt.data.project.set_favorite(b.pid,c,function(a){d.cache.project.set_favorite(b.pid,b.is_favorite)},function(){b.is_favorite=c?0:1})}}function f(a){a.global.title="项目不存在"}angular.module("wt.project.ctrl",[]).controller("projectHomeCtrl",a).controller("projectPopMoreCtrl",b).controller("projectsArchiveCtrl",c).controller("projectInfoCtrl",e).controller("projectsFavCtrl",d).controller("projectNotfoundCtrl",f),a.$inject=["$rootScope","$scope","$state","$stateParams","$timeout","globalDataContext","fastProject","wtScrollService"],b.$inject=["$scope","$rootScope","$popbox"],c.$inject=["$scope","$rootScope","$location"],d.$inject=["$scope","$rootScope"],e.$inject=["$scope","$rootScope","$popbox","globalDataContext"],f.$inject=["$rootScope"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b=null;return _.isEmpty(A.entries)?null:(_.each(A.entries,function(c){c.entry_id===a&&(b=c)}),b)}function n(a){if(0===a.length)return null;var b=a.attr("entry-id");return null==b||""===b?null:m(b)}function o(a,b,c,d){a.pos=d,b.entry_id!==c.entry_id&&(a.entry_id=c.entry_id,a.entry_name=c.name,_.isEmpty(c.tasks)?c.tasks=[a]:c.tasks.push(a),b.tasks=_.reject(b.tasks,function(b){return b.tid===a.tid}),b.tasks=_.sortBy(b.tasks,function(a){return a.pos})),c.tasks=_.sortBy(c.tasks,function(a){return a.pos})}function p(a,b,c,d,e,f){o(b,c,d,e),wt.data.task.change_entry(a,b.tid,c.entry_id,d.entry_id,e,function(a){_.isFunction(f)&&f()})}function q(a,b,c,d,e,f){_.each(b,function(a){var b=_.findWhere(c.tasks,{tid:a});b&&o(b,c,d,e)}),wt.data.task.change_entry_for_batch_task(a,b,c.entry_id,d.entry_id,e,function(a){_.isFunction(f)&&f()})}function r(){A.pop_member_options=[{name:"从任务移除",ongoing:"移除中...",click:function(b,d,e,f,g){g&&(e.assigned=!0,wt.bus.member.set_task_member_toggle(A.pid,g,e,function(){e.setting_toggle_member=!1,c.$broadcast(kzi.constant.event_names.on_task_update,a.task),e.assigned=!1,l.update()},null,f))}}]}function s(a,b){var c=a.pageX,d=$(".entries_panel_sortarea").parents(".mCustomScrollbar").width(),e=$(".entries_panel_sortarea").parents(".mCustomScrollbar").offset().left;$(document).bind("mousemove.wtTaskEntryMove",function(a){a.pageX<c&&a.pageX<e+190&&$(".entries_panel_sortarea").parents(".mCustomScrollbar").mCustomScrollbar("scrollTo","+=20",{scrollInertia:0}),a.pageX+200>e+d&&$(".entries_panel_sortarea").parents(".mCustomScrollbar").mCustomScrollbar("scrollTo","-=20",{scrollInertia:0})})}function t(){A.entries_sort_options={appendTo:".layout_content_main:last",containment:".layout_content_main",placeholder:"wt-entry-placeholder",helper:"clone",revert:15,dropOnEmpty:!0,tolerance:"pointer",distance:8,delay:0,handle:".entry_header",disabled:!1,accept:".entry",start:function(a,b){s(a,b),b.item.addClass("picked-up"),$(".wt-entry-placeholder").css({height:b.item.css("height"),width:b.item.outerWidth()})},stop:function(a,b){b.item.removeClass("picked-up"),$(document).unbind("mousemove.wtTaskEntryMove");var c=n(b.item),d=b.item.attr("entry-id"),e=n(b.item.prev()),f=n(b.item.next()),g=0;g=null==e?f.pos/2:null==f?e.pos+kzi.config.default_pos:(f.pos+e.pos)/2,c.pos!==g&&(c.pos=g,wt.data.entry.change_pos(A.pid,d,g,function(a){A.entries=j.cache.entry.move(A.pid,d,g)}))}}}function u(){$(document).unbind("mousemove.sort_scroll"),$(".mCSB_scrollTools_vertical").css("visibility",""),ja=null,g.cancel(ia),ia=void 0}function v(){$(document).bind("mousemove.sort_scroll",function(a){ja=a.pageY}),ia=g(function(){null!==ja&&$(".wt-task-placeholder").parents(".mCSB_container").not(".mCS_no_scrollbar_y")&&$.each($(".wt-task-placeholder").parents(".mCustomScrollbar"),function(){if(!$(this).data("mCS").opt.horizontalScroll){$(this).find(".mCSB_scrollTools_vertical").css("visibility","visible");var a=$(this).offset().top,b=$(this).height(),c=$(this).find(".wt-task-placeholder").height();if(c>ja-a)return void $(this).mCustomScrollbar("scrollTo","+=20",{scrollInertia:0});if(c>a+b-ja)return void $(this).mCustomScrollbar("scrollTo","-=20",{scrollInertia:0})}})},100)}function w(){A.tasks_sort_options={appendTo:".layout_content_main:last",helper:"clone",revert:15,containment:".layout_content_main",connectWith:".entry-tasks",placeholder:"wt-task-placeholder",tolerance:"pointer",dropOnEmpty:!0,distance:8,delay:0,sort:function(a,b){},start:function(a,b){s(a,b),$(".wt-task-placeholder").css({height:b.item.outerHeight()}),b.item.addClass("picked-up"),ia||v(a,b)},stop:function(a,b){b.item.removeClass("picked-up"),$(document).unbind("mousemove.wtTaskEntryMove"),u()},update:function(b,c){a.$apply(function(){var a=c.item.attr("task-id"),b=_.findWhere(A.tasks,{tid:a}),d=0,e=c.item.prev().attr("task-id"),f=c.item.next().attr("task-id");if(_.isEmpty(e)&&_.isEmpty(f))d=kzi.config.default_pos;else if(_.isEmpty(e)){var g=_.findWhere(A.tasks,{tid:f});d=g.pos/2}else if(_.isEmpty(f)){var h=_.findWhere(A.tasks,{tid:e});d=h.pos+kzi.config.default_pos}else{var g=_.findWhere(A.tasks,{tid:f}),h=_.findWhere(A.tasks,{tid:e});d=(g.pos+h.pos)/2}var i=c.item.parents(".entry").attr("entry-id"),j=_.findWhere(A.entries,{entry_id:i}),k=_.findWhere(A.entries,{entry_id:b.entry_id});(i!==k.entry_id||d!==b.pos)&&j&&(i!==k.entry_id&&c.item.remove(),p(A.pid,b,k,j,d))})}}}function x(){A.member_drop_options={accept:".avatar",over:function(a,b){},out:function(a,b){},hoverClass:"task-state-member-over",drop:function(b,c){var d=b.pageX;if(!(d>$(".slide-content").offset().left||d>$(".layout_right_sidebar").offset().left)){var e=$(b.target).attr("task-id");a.$apply(function(){_.each(A.entries,function(b){_.each(b.tasks,function(b){if(b.tid===e){var d=(c.helper.context.title,$(c.helper.context).attr("member-id"));if(_.isArray(b.members)&&b.members.length>0){var f=_.findWhere(b.members,{uid:d});if(!_.isUndefined(f))return}else b.members=[];var g=_.findWhere(a.project.members,{uid:d});b.members.push(g),wt.data.task.assign(A.pid,b.tid,d,function(a){})}})})})}}}}function y(){$(".ui-sortable").sortable("option","disabled",!1)}function z(){$(".ui-sortable").sortable("option","disabled",!0)}if(a.project){var A=a.vm={task_menu_default_step:0,currentEntry:null,currentTask:null,entryIndex:0,taskIndex:0,part_loaeding_done:!1,pid:b.pid,new_task:{members:[],expire_date:0,labels:[]},entries:[],tasks:[],entries_sort_options:{},tasks_sort_options:{},project_archived:!1,entry_maxheight:h("permission")(c.global.prj_module.crud,a.project.permission)?220:180,entry_name:"",is_show_add_entry:!1,is_adding_entry:!1,entry_input_focus:!1},B=b.tid,C=!1,D=null,E=null,F=!1;c.global.title="任务 | "+a.project.name;var G=function(a){f(function(){var b="#task_main_"+a;$(b).parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",b)})},H=function(a){f(function(){var b="#entry_main_"+a;$(b).parents(".mCustomScrollbar").last().mCustomScrollbar("scrollTo",b)})},I=function(){f(function(){$(".task-selected").parents(".mCustomScrollbar").eq(0).mCustomScrollbar("scrollTo",".task-selected")},100)},J=function(){f(function(){$(".entry-selected").parents(".mCustomScrollbar").last().mCustomScrollbar("scrollTo",".entry-selected")})},K=function(){},L=function(a,b){var c=!0;if(b&&b.texts.length>0&&(c=!1,_.each(b.texts,function(b){b.length>0&&a.name.toLowerCase().indexOf(b.trim())>-1&&(c=!0)})),c&&b.labels.length>0&&(_.isEmpty(a.labels)?c=!1:(c=!1,_.each(b.labels,function(b){var d=_.any(a.labels,function(a){return a.name===b});d&&(c=!0)}))),c&&b.members.length>0&&(_.isEmpty(a.members)?c=b.members.indexOf(-1)>=0?!0:!1:(c=!1,_.each(b.members,function(b){var d=[];d=-1===b?_.isEmpty(a.members):_.any(a.members,function(a){return a.uid===b}),d&&(c=!0)}))),c){var d=moment(),e=moment(a.expire_date);if("today"===b.date){var f=e.isSame(d,"day");c=f?!0:!1}else if("tomorrow"===b.date){var g=e.isSame(d.add(1,"days"),"day");c=g?!0:!1}else if("week"===b.date){var h=moment().endOf("week").add(1,"days"),i=moment().startOf("week").add(1,"days");c=e>=i&&h>=e?!0:!1}else if("nextweek"===b.date){var h=moment().endOf("week").add(8,"days"),i=moment().startOf("week").add(8,"days");c=e>=i&&h>=e?!0:!1}else if("month"===b.date){var j=moment().endOf("month"),k=moment().startOf("month");c=e>=k&&j>=e?!0:!1}else if("due"===b.date){var f=e.isSame(d,"day");c=!f&&a.expire_date&&d>e&&e>0?!0:!1}else"noset"===b.date&&(c=a.expire_date?!1:!0)}c&&b.hide_completed&&(c=!a.completed),c?a.is_filter=!1:a.is_filter=!0},M=function(){_.isEmpty(A.entries)||(a.task_filters.texts.length>0||a.task_filters.labels.length>0||a.task_filters.members.length>0||a.task_filters.date.length>0||a.task_filters.hide_completed?a.task_filters.turn_on=!0:a.task_filters.turn_on=!1,_.each(A.entries,function(b){_.isEmpty(b.tasks)||_.each(b.tasks,function(b){L(b,a.task_filters)})}),f(function(){l.update()},400))};a.$on(kzi.constant.event_names.on_project_tasks_filter,function(a,b){M()}),a.$on(kzi.constant.event_names.project_clear_task_filter,function(b,c){R(),a.task_filters.type=""});var N=function(b,c){if(_.isEmpty(a.task_filters.turn_on)){var d=!0;if("assign_me"===a.task_filters.type)d=_.any(b.members,function(a){return a.uid===c.uid});else if("my_watch"===a.task_filters.type)d=_.any(b.watchers,function(a){return a.uid===c.uid});else if("my_create"===a.task_filters.type)d=c.uid===b.uid;else if(a.task_filters.texts.length>0||a.task_filters.labels.length>0||a.task_filters.members.length>0||a.task_filters.date.length>0||a.task_filters.hide_completed)return void L(b,a.task_filters);d?b.is_filter=!1:b.is_filter=!0}},O=function(a){_.isEmpty(A.entries)||_.each(A.entries,function(b){_.isEmpty(b.tasks)||_.each(b.tasks,function(b){var c=!0;_.isEmpty(a)||(c=_.any(b.members,function(b){return b.uid==a.uid})),c?b.is_filter=!1:b.is_filter=!0})})},P=function(a){_.isEmpty(A.entries)||_.each(A.entries,function(b){_.isEmpty(b.tasks)||_.each(b.tasks,function(b){var c=!0;_.isEmpty(a)||(c=_.any(b.watchers,function(b){return b.uid===a.uid})),c?b.is_filter=!1:b.is_filter=!0})})},Q=function(a){_.isEmpty(A.entries)||_.each(A.entries,function(b){_.isEmpty(b.tasks)||_.each(b.tasks,function(b){var c=!0;_.isEmpty(a)||(c=a.uid===b.uid),c?b.is_filter=!1:b.is_filter=!0})})},R=function(){a.task_filters.texts=[],a.task_filters.labels=[],a.task_filters.members=[],a.task_filters.hide_completed=!1,a.task_filters.date="",M()},S=function(){f(function(){j.loadEntriesAndTasks(A.pid,function(a){T(a)},function(a){a.code===kzi.statuses.prj_error.not_found.code?e.path("/project/"+A.pid+"/notfound"):a.code===kzi.statuses.error.permission_deny.code?e.path("/project/"+A.pid+"/notfound"):wt.data.error(a)})})},T=function(b){var d=null;_.each(b.tasks,function(a){a.is_filter=!1,a.selected=!1,B===a.tid&&(d=a)}),_.each(b.entries,function(a){var c=_.where(b.tasks,{entry_id:a.entry_id});a.batch_action_flag=0,a.selected_tasks=[],a.tasks=c}),A.entries=b.entries,A.tasks=b.tasks,_.each(A.entries,function(a){a.tasks=_.sortBy(a.tasks,function(a){return a.pos})}),_.isEmpty(a.task_filters.turn_on)&&("assign_me"===a.task_filters.type?O(c.global.me):"my_watch"===a.task_filters.type?P(c.global.me):"my_create"===a.task_filters.type?Q(c.global.me):(a.task_filters.texts.length>0||a.task_filters.labels.length>0||a.task_filters.members.length>0||a.task_filters.date.length>0)&&M()),A.part_loading_done=!0,c.global.prj_module.crud&a.project.permission?(t(),w(),x(),r()):(A.project_archived=!0,A.entries_sort_options=A.tasks_sort_options={disabled:!0},A.member_drop_options=null,A.pop_member_options=null),ea()},U=function(){A.new_task.temp_name="",A.new_task.members=[],A.new_task.labels=[],A.new_task.expire_date=null},V=function(b,c,d){if(!_.isUndefined(b)&&!_.isUndefined(b.temp_name)&&!_.isEmpty(b.temp_name)){a.is_task_adding=!0;var e=c.entry_id,g=(wt.bus.task.calculate_task_pos(c,d),[]),h=[],i=function(){var b=$("#entry_main_"+c.entry_id).eq(0).find(".mCSB_container"),e=$("#entry_main_"+c.entry_id).eq(0).find(".mCSB_dragger");d===!0?f(function(){b.css("top",0),e.css("top",0)},10):f(function(){b.css("top","-"+Math.abs(b.parent().height()-b.outerHeight(!1))+"px"),e.css("top",e.parent().height()-e.height()+"px")},70),a.is_task_adding=!1};_.isEmpty(b.members)||(g=_.pluck(b.members,"uid")),_.isEmpty(b.labels)||(h=_.pluck(b.labels,"name"));var k=kzi.helper.split_line(b.temp_name),l=d?"top":"bottom";wt.data.task.batch_add(A.pid,e,l,k,g,h,b.expire_date,function(a){200===a.code&&j.cache.task.batch_add(a.data)},null,function(){i()}),U()}},W=function(a,b){b?A.tasks=j.cache.task.archive(a.tid):A.tasks=j.cache.task.del(a.tid)},X=function(a,b){b.tasks=_.reject(b.tasks,function(b){return _.contains(a,b.tid)}),kzi.console.log("remove batch task ...")},Y=function(a){_.each(a.tasks,function(a,b){1===a.completed&&j.cache.task.archive(a.tid)}),a.tasks=_.reject(a.tasks,function(a){return 1===a.completed}),A.tasks=_.reject(A.tasks,function(b){return b.completed&&b.entry_id===a.entry_id})},Z=function(a){var b=_.findWhere(A.entries,{entry_id:a.entry_id});if(b){var d=_.findWhere(b.tasks,{tid:a.tid});d||b.tasks.push(a),N(a,c.global.me),b.tasks=_.sortBy(b.tasks,function(a){return a.pos})}_.findWhere(A.tasks,{tid:a.tid})||A.tasks.push(a)},aa=function(a){A.entries=j.cache.entry.del(A.pid,a.entry_id),f(function(){l.update()},50)};a.$on("socket_message_entry_list",function(a,b){T(j.project)}),a.$on(kzi.constant.event_names.on_task_move,function(a,b){T(j.project)}),a.$on(kzi.constant.event_names.on_task_add,function(a,b){Z(b.task)}),a.$on("socket_message_project_member_remove",function(a,b){_.each(A.entries,function(a){a.tasks&&a.tasks.length>0&&_.each(a.tasks,function(a){a.members&&a.members.length>0&&(a.members=_.reject(a.members,function(a){return a.uid==b.uid}))})})});var ba=function(){if(!_.isEmpty(A.entries)){A.entryIndex=0;for(var a=0;a<A.entries.length;a++)if(!_.isEmpty(A.entries[a].tasks)){A.entryIndex=a,A.currentEntry=A.entries[a],A.currentTask=A.currentEntry.tasks[0],A.taskIndex=0,A.currentTask.selected=!0;break}}},ca=function(a){_.isEmpty(A.currentEntry)||(A.currentEntry.selected=!1),A.currentEntry=a,A.currentEntry.selected=!0},da=function(a){_.isEmpty(A.currentTask)||(A.currentTask.selected=!1),A.currentTask=a,A.currentTask.selected=!0},ea=function(){_.isEmpty(A.currentEntry)||(A.currentEntry.selected=!1,A.entryIndex=0,A.currentEntry=null),_.isEmpty(A.currentTask)||(A.currentTask.selected=!1,A.taskIndex=0,A.currentTask=null)},fa=function(a){if(A.entries.length>a+1){var b=A.entries[a+1];_.isEmpty(b.tasks)?fa(a+1):(A.entryIndex=a+1,ca(b),A.taskIndex=0,da(b.tasks[0]),J(),I())}},ga=function(a,b){if(a>0){var c=A.entries[a-1];_.isEmpty(c.tasks)?ga(a-1):(A.entryIndex=a-1,ca(c),b===!0?A.taskIndex=c.tasks.length-1:A.taskIndex=0,da(c.tasks[A.taskIndex]),J(),I())}},ha=function(a){var b=0;A.currentEntry&&A.currentEntry.entry_id===a.entry_id||_.each(A.entries,function(c){c.entry_id===a.entry_id&&(ca(c),A.entryIndex=b),b++}),null!=A.currentEntry&&(b=0,_.each(A.currentEntry.tasks,function(c){c.tid===a.tid&&(da(c),A.taskIndex=b),b++}))};a.$on(kzi.constant.event_names.shortcut_key_to_task,function(b,d){if(c.global.prj_module.crud&a.project.permission){F=!0;var e=[kzi.constant.keyASCIIs.A,kzi.constant.keyASCIIs.L,kzi.constant.keyASCIIs.D,kzi.constant.keyASCIIs.W,kzi.constant.keyASCIIs.M];if(!(C===!0&&$.inArray(d,e)<0))switch(d){case kzi.constant.keyASCIIs.VK_DOWN:case kzi.constant.keyASCIIs.J:_.isEmpty(A.currentTask)?ba():A.currentEntry.tasks.length>A.taskIndex+1?(A.taskIndex++,da(A.currentEntry.tasks[A.taskIndex]),I()):_.isEmpty(A.currentEntry)?ba():fa(A.entryIndex);break;case kzi.constant.keyASCIIs.VK_UP:case kzi.constant.keyASCIIs.K:_.isEmpty(A.currentTask)?ba():A.taskIndex>0?(A.taskIndex--,da(A.currentEntry.tasks[A.taskIndex]),I()):_.isEmpty(A.currentEntry)?ba():ga(A.entryIndex,!0);break;case kzi.constant.keyASCIIs.VK_LEFT:_.isEmpty(A.currentEntry)?ba():ga(A.entryIndex,!1);break;case kzi.constant.keyASCIIs.VK_RIGHT:_.isEmpty(A.currentEntry)?ba():fa(A.entryIndex);break;case kzi.constant.keyASCIIs.ENTER:_.isEmpty(A.currentTask)||k.openTask(A.pid,A.currentTask.tid);break;case kzi.constant.keyASCIIs.I:$("#btn_new_task").click();break;case kzi.constant.keyASCIIs.E:$("#btn_new_entry").click();break;case kzi.constant.keyASCIIs.M:if(!_.isEmpty(A.currentTask)){var f="icon_action_task_"+A.currentTask.tid;A.task_menu_default_step=1,$("#"+f).click()}break;case kzi.constant.keyASCIIs.L:if(!_.isEmpty(A.currentTask)){var f="icon_action_task_"+A.currentTask.tid;A.task_menu_default_step=2,$("#"+f).click()}break;case kzi.constant.keyASCIIs.D:if(!_.isEmpty(A.currentTask)){var f="icon_action_task_"+A.currentTask.tid;A.task_menu_default_step=3,$("#"+f).click()}break;case kzi.constant.keyASCIIs.W:if(!_.isEmpty(A.currentTask)){var f="icon_action_task_"+A.currentTask.tid;A.task_menu_default_step=4,$("#"+f).click()}break;case kzi.constant.keyASCIIs.A:if(!_.isEmpty(A.currentTask)){var f="icon_action_task_"+A.currentTask.tid;A.task_menu_default_step=40,$("#"+f).click()}break;case kzi.constant.keyASCIIs.C:if(!_.isEmpty(A.currentTask)){var f="task_check_"+A.currentTask.tid;$("#"+f).click()}break;case kzi.constant.keyASCIIs.VK_SPACE:if(!_.isEmpty(A.currentTask)){var g=_.findWhere(A.currentTask.members,{uid:c.global.me.uid});g?(g.assigned=1,wt.bus.member.set_task_member_toggle(A.pid,A.currentTask,g)):wt.bus.member.set_task_member_toggle(A.pid,A.currentTask,_.clone(c.global.me))}break;case kzi.constant.keyASCIIs.VK_LessThan:if(!_.isEmpty(A.currentEntry)&&!_.isEmpty(A.currentTask)&&A.entryIndex>0){var h=A.entries[A.entryIndex-1],i=kzi.config.default_pos;_.isEmpty(h.tasks)||(i=_.max(h.tasks,function(a){return a.pos}).pos+kzi.config.default_pos+1),delete A.currentTask.$$hashKey,p(A.pid,A.currentTask,A.currentEntry,h,i,function(){A.entryIndex=A.entryIndex-1,ca(h),A.taskIndex=h.tasks.length-1,J(),I()})}break;case kzi.constant.keyASCIIs.VK_GreaterThan:if(!_.isEmpty(A.currentEntry)&&!_.isEmpty(A.currentTask)&&A.entries.length>A.entryIndex+1){var h=A.entries[A.entryIndex+1],i=kzi.config.default_pos;_.isEmpty(h.tasks)||(i=_.max(h.tasks,function(a){return a.pos}).pos+kzi.config.default_pos+1),delete A.currentTask.$$hashKey,p(A.pid,A.currentTask,A.currentEntry,h,i,function(){A.entryIndex=A.entryIndex+1,ca(h),A.taskIndex=h.tasks.length-1,J(),I()})}}}}),A.js_mouseover_entries_panel=function(a){if(F!==!0&&!C){var b=$(a.target),c="";if(b.length>0&&(c=b.attr("task-id"),_.isEmpty(c)&&(b=b.parents(".task_style"),c=b.attr("task-id")),!_.isEmpty(c))){var d=_.findWhere(A.tasks,{tid:c});ha(d)}}},A.js_mousemove_entries_panel=function(a){F===!0&&(F=!1)},A.js_mouseleave_task=function(a,b,c){if(!_.isEmpty(A.currentTask)&&A.currentTask.tid===b.tid){if(C)return;ea()}},A.js_add_entry_pop=function(b){d.popbox({target:b,templateUrl:"/tpl/project/task/pop_add_entry.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var d=a.vm={pid:c.scope.vm.pid,is_save_ing:!1};d.js_add_entry=function(a,e){if(d.is_save_ing!==!0){d.is_save_ing=!0;var g=wt.bus.entry.calculate_entry_pos(c.entries,!0);wt.data.entry.add(d.pid,e,g,function(a){a.data.tasks=[],c.entries.unshift(a.data),b.close(),f(function(){H(a.data.entry_id)},100)},null,function(){d.is_save_ing=!1})}},d.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{scope:a,entries:a.vm.entries}}}}).open()},A.js_add_entry=function(a){if(!_.isEmpty(a)&&A.is_adding_entry!==!0){A.is_adding_entry=!0;var b=wt.bus.entry.calculate_entry_pos(A.entries,!1);wt.data.entry.add(A.pid,a,b,function(a){_.isEmpty(A.entries)&&(A.entries=[]),a.data.tasks=[],A.entries.push(a.data),A.entry_name="";var b=$(".entries_panel").find(".mCSB_container").eq(0),c=$(".entries_panel").find(".mCSB_scrollTools_horizontal").find(".mCSB_dragger");b.css("left",b.position().left-310),f(function(){c.css("left",b.parent().width()-c.width())},100),j.cache.entry.add(a.data)},null,function(){A.is_adding_entry=!1,A.entry_input_focus=!0})}},A.js_add_task=function(a,b,c,d){V(b,c,d)},A.js_batch_select_all=function(a,b){var c=[];_.each(b.tasks,function(a){void 0===a.is_filter&&(a.is_filter=!1),0==a.is_filter&&(a.selected_batch=!0,c.push(a.tid))}),b.selected_tasks=c},A.js_batch_close_action=function(a,b){var c=$("#entry_"+b.entry_id+"_scroll");c.attr("data-maxheight",parseInt(c.attr("data-maxheight"),10)-60),l.update("#entry_"+b.entry_id+"_scroll"),b.batch_action_flag=!1,b.selected_tasks=[],_.each(b.tasks,function(a){a.selected_batch=!1}),y()},A.js_batch_select_reverse=function(a,b){var c=[],d=[];_.each(b.tasks,function(a){0==a.is_filter&&(a.selected_batch&&d.push(a.tid),c.push(a.tid),a.selected_batch=!a.selected_batch)}),b.selected_tasks=_.difference(c,d)},A.js_batch_set_expiredate=function(b,c,e,f){d.popbox({target:b,top:e,left:f,templateUrl:"/tpl/project/task/pop_batch_set_expiredate.html",controller:["$rootScope","$scope","popbox","pop_data",function(a,b,d,e){b.popbox=d;var f=b.vm={expire_date:moment().format("YYYY-MM-DD"),has_set_expire_task:!1},g=e.scope.vm;_.each(c.selected_tasks,function(a){f.has_set_expire_task||0!==_.find(c.tasks,{tid:a}).expire_date&&(f.has_set_expire_task=!0)}),f.js_close=function(){d.close()},f.js_set_expire=function(a){var b=moment(a).endOf("day").valueOf();wt.data.entry.batch_set_expire(g.pid,c.entry_id,c.selected_tasks,b,function(a){_.each(c.tasks,function(a){var d=_.any(c.selected_tasks,function(b){return b===a.tid});d&&(a.expire_date=b)})}),f.js_close()},f.js_set_expire_date=function(a){switch(a){case"today":f.expire_date=moment().format("YYYY-MM-DD");break;case"tomorrow":f.expire_date=moment().add(1,"days").format("YYYY-MM-DD");break;case"week":f.expire_date=moment().endOf("week").add(1,"days").format("YYYY-MM-DD");break;case"next_week":f.expire_date=moment().add(7,"days").endOf("week").add(1,"days").format("YYYY-MM-DD");break;case"month":f.expire_date=moment().endOf("month").format("YYYY-MM-DD")}f.js_set_expire(f.expire_date)},f.js_cancel_expire=function(){var a=0;wt.data.entry.batch_set_expire(g.pid,c.entry_id,c.selected_tasks,a,function(b){_.each(c.tasks,function(b){var d=_.any(c.selected_tasks,function(a){return a===b.tid});d&&(b.expire_date=a)})}),d.close()}}],resolve:{pop_data:function(){return{scope:a}}}}).open()},A.js_batch_move_task=function(b,c,e,f){c.entry_id;d.popbox({target:b,top:e,left:f,templateUrl:"/tpl/project/task/pop_move_task.html",controller:["$rootScope","$scope","popbox","pop_data",function(a,b,d,e){b.popbox=d,b.project=e.scope.project,b.entry_name=c.name,b.entry=c,b.pid=A.pid,b.task_move={},b.task_move.move_to_prj="",b.entries=e.scope.vm.entries,b.js_close=function(){d.close()},b.is_task_moving=!1,b.task_move.projects=j.getPacketProjects(),b.task_move.move_to_prj=_.find(b.task_move.projects,function(a){return a.pid===A.pid});var f=!0;b.$watch("task_move.move_to_prj",function(a,d){a&&wt.data.entry.get_list(a.pid,!0,function(a){b.task_move.entries=a.data.entries,f?(f=!1,b.task_move.move_to_entry=_.find(b.task_move.entries,function(a){return a.entry_id===c.entry_id})):b.task_move.move_to_entry=b.task_move.entries[0]})}),b.move_task=function(){if(_.each(e.entry.tasks,function(a){a.selected_batch=!1}),b.task_move.move_to_prj.pid===A.pid){var a=kzi.config.default_pos;b.task_move.move_to_entry.tasks&&(a=_.max(b.task_move.move_to_entry.tasks,function(a){return a.pos}).pos+kzi.config.default_pos+1);var d=_.find(b.entries,function(a){return a.entry_id===b.task_move.move_to_entry.entry_id});q(A.pid,c.selected_tasks,c,d,a,function(){c.selected_tasks=[],b.js_close()})}else b.is_task_moving=!0,wt.data.task.batch_move(A.pid,b.entry.selected_tasks,b.task_move.move_to_prj.pid,b.task_move.move_to_entry.entry_id,function(){X(b.entry.selected_tasks,b.entry)},function(){kzi.msg.error("移动任务失败")},function(){b.is_task_moving=!1,b.js_close()})}}],resolve:{pop_data:function(){return{scope:a,entries:a.vm.entries,entry:c}}}}).open()},A.js_batch_set_assignee=function(b,c,e,f){c.entry_id;d.popbox({target:b,top:e,left:f,templateUrl:"/tpl/project/task/pop_batch_assignee.html",controller:["$rootScope","$scope","popbox","pop_data",function(a,b,d,e){var f=b.pm={selected_member_intersection:null};b.project=e.scope.project,b.popbox=d,b.entry_name=c.name,b.entry=c,_.each(c.selected_tasks,function(a){null===f.selected_member_intersection?f.selected_member_intersection=_.pluck(_.find(c.tasks,{tid:a}).members,"uid"):f.selected_member_intersection=_.intersection(f.selected_member_intersection,_.pluck(_.find(c.tasks,{tid:a}).members,"uid"))}),b.task={members:_.map(f.selected_member_intersection,function(a){return{uid:a}})},b.js_close=function(){d.close()},b.js_toggle_member=function(a){wt.bus.entry.batch_toggle_member(A.pid,c,a)};var g=function(){var a=wt.bus.member.get_normal_members(b.project.members);_.each(a,function(a){-1!==_.indexOf(f.selected_member_intersection,a.uid)?a.assigned_all=1:a.assigned_all=0}),b.members=a};g()}],resolve:{pop_data:function(){return{scope:a,entries:a.vm.entries,entry:c}}}}).open()},A.js_batch_set_labels=function(b,c){var e=a;d.popbox({target:b,template:'<wt-set-task-labels task="task" batchsetlabelfn="set_label" project="project"></wt-set-task-labels>',controller:["$scope","popbox",function(a,b){var d=a.pm={batch_assigned_labe:[],selected_labels_intersection:null};a.popbox=b,a.project=e.project,_.each(c.selected_tasks,function(a){null===d.selected_labels_intersection?d.selected_labels_intersection=_.pluck(_.find(c.tasks,{tid:a}).labels,"name"):d.selected_labels_intersection=_.intersection(d.selected_labels_intersection,_.pluck(_.find(c.tasks,{tid:a}).labels,"name"))}),a.task={labels:_.map(d.selected_labels_intersection,function(a){return{name:a}})},a.set_label=function(a){_.isEmpty(c.selected_tasks)||wt.bus.entry.batch_toggle_label(A.pid,c,c.selected_tasks,a)}}]}).open()},A.js_show_entry_menu=function(b,c,e,f){var g=c.entry_id;d.popbox({target:b,top:e,left:f,templateUrl:"/tpl/project/task/pop_entry_menu.html",controller:["$rootScope","$scope","popbox","pop_data","wtScrollService",function(a,b,d,e,f){var h=b.vm={pid:e.scope.project.pid};b.project=e.scope.project,b.popbox=d,b.entry_name=c.name,b.entry=c,b.step=0,b.entry_move={},b.entry_move.dest_project={},b.js_step=function(a){b.step=a},b.js_close=function(){d.close()},h.js_show_batch_action=function(){var a=$("#entry_"+c.entry_id+"_scroll");a.attr("data-maxheight",parseInt(a.attr("data-maxheight"),10)+60),f.update("#entry_"+c.entry_id+"_scroll"),c.batch_action_flag=1,d.close(),z()},h.js_change_name=function(a,c){b.is_save_ing=!0,wt.data.entry.update(h.pid,g,c,function(a){e.entry.name=c},null,function(){b.is_save_ing=!1,d.close()})},h.js_archive_entry=function(){wt.data.entry.archive(h.pid,g,function(){aa(c)}),d.close()},h.js_del_entry=function(){wt.data.entry.trash(h.pid,g,function(a){aa(c)}),d.close()},h.js_archived_all=function(){wt.data.task.archived_all(h.pid,g,function(a){Y(c)}),d.close()},h.js_top_open_add_task_composer=function(a){c.task_top_enabled=!0,d.close()},h.js_watcher_entry_toggle=function(){c.watched?wt.data.entry.unwatch_entry(h.pid,c.entry_id,function(a){}):wt.data.entry.watch_entry(h.pid,c.entry_id,function(a){}),c.watched=!c.watched},h.js_to_copy_entry=function(){b.new_entry={name:c.name,entry_id:c.entry_id,pos:c.pos},b.js_step(12)},h.js_to_move_entry=function(){b.entry_move_to_prjs=j.getPacketProjects(),b.entry_move.dest_project=_.find(b.entry_move_to_prjs,function(a){return a.pid===h.pid}),b.js_step(13)},h.js_move_entry=function(){return h.pid===b.entry_move.dest_project.pid?void b.js_close():void wt.data.entry.move(h.pid,c.entry_id,b.entry_move.dest_project.pid,function(){j.cache.entry.del(c.pid,c.entry_id),e.scope.vm.entries=_.reject(e.scope.vm.entries,function(a){return a.entry_id===c.entry_id})},function(){kzi.msg.error("移动列表失败")},function(){b.js_close()})},h.js_move_entry_cancel=function(){b.js_close()},h.js_copy_entry=function(a){if(!_.isEmpty(a.name)){var c=wt.bus.entry.calculate_copy_entry_pos(e.entries,a);b.is_copying=!0,wt.data.entry.copy_entry(h.pid,a.entry_id,a.name,c,function(a){e.entries.push(a.data),j.reloadEntriesAndTasks(h.pid,function(a){T(a)}),b.js_close()},null,function(){
b.is_copying=!1})}}}],resolve:{pop_data:function(){return{scope:a,entries:a.vm.entries,entry:c}}}}).open()},A.js_show_task_menu=function(b,c,e,f,g){if(1!=c.batch_action_flag){if(b.stopPropagation(),C&&e.tid===D)return void E.close();e.tid&&ha(e),E=d.popbox({target:b,top:f,left:g,autoAdapt:!0,templateUrl:"/tpl/project/task/pop_task_menu.html",controller:["$scope","popbox","pop_data","$rootScope","$wtUploadFile","bus",function(a,b,d,f,g,h){a.popbox=b;var i=a.vm={new_task:null,pid:d.scope.vm.pid,step:d.scope.vm.task_menu_default_step};a.project=d.scope.project,a.entries=d.entries,C=!0,D=e.tid,a.prj_files_loading=!1,a.task_move={},a.task_move.move_to_prj="",a.js_step=function(a){i.step=a},a.js_close=function(){b.close()};var l=!1;_.isEmpty(e.tid)&&(l=!0),f.global.me.watched=_.pluck(e.watchers,"uid").indexOf(f.global.me.uid)>=0,a.is_add_task=l,i.js_toggle_member=function(a,b,c){wt.bus.member.set_task_member_toggle(i.pid,c,b,function(){f.$broadcast(kzi.constant.event_names.on_task_update,c)})},i.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(i.pid,c,kzi.constant.xtype.task,c.tid,b)},i.js_watch_all=function(a,c,d,e){wt.bus.watch.watch_all(i.pid,d,kzi.constant.xtype.task,d.tid,c,null,null,e),b.close()},e.expire_date?e.expire_date_temp=moment(e.expire_date).format("YYYY-MM-DD"):e.expire_date_temp=moment().format("YYYY-MM-DD"),a.task=e,a.js_close=function(){b.close()},i.js_today=function(){e.expire_date=moment().format("YYYY-MM-DD"),i.set_expire(e.expire_date)},i.js_tomorrow=function(){e.expire_date=moment().add(1,"days").format("YYYY-MM-DD"),i.set_expire(e.expire_date)},i.js_week=function(){e.expire_date=moment().endOf("week").add(1,"days").format("YYYY-MM-DD"),i.set_expire(e.expire_date)},i.js_next_week=function(){e.expire_date=moment().add(7,"days").endOf("week").add(1,"days").format("YYYY-MM-DD"),i.set_expire(e.expire_date)},i.js_month=function(){e.expire_date=moment().endOf("month").format("YYYY-MM-DD"),i.set_expire(e.expire_date)},i.js_set_expire=function(a){i.set_expire(a)},i.js_cancel_expire=function(){l?(e.expire_date=null,e.expire_date_temp=null):(e.expire_date_temp=null,e.expire_date=0,e.badges.expire_date=0,wt.data.task.set_expire(i.pid,e.tid,0,function(a){})),b.close()},i.set_expire=function(c){var d=moment(c).endOf("day").valueOf();l?(e.expire_date=d,a.js_step(0)):(wt.data.task.set_expire(i.pid,e.tid,d,function(a){}),e.badges.expire_date=d,e.expire_date=d,0!==i.task_menu_default_step?b.close():a.js_step(0))},i.js_show_task_move=function(){a.js_step(5),a.task_move.projects=j.getPacketProjects(),a.task_move.project=_.find(a.task_move.projects,function(a){return a.pid===i.pid}),i.js_change_project()},i.move_task=function(){if(a.task_move.project.pid===i.pid){if(a.task_move.entry.entry_id===e.entry_id)return;var b=kzi.config.default_pos;a.task_move.entry.tasks.length>0&&(b=_.max(a.task_move.entry.tasks,function(a){return a.pos}).pos+kzi.config.default_pos+1);var d=_.find(a.task_move.entries,function(b){return b.entry_id===a.task_move.entry.entry_id});p(i.pid,e,c,d,b,function(){a.js_close()})}else a.is_task_moving=!0,wt.data.task.move(i.pid,e.tid,a.task_move.project.pid,a.task_move.entry.entry_id,function(){W(e)},function(){kzi.msg.error("移动任务失败")},function(){a.is_task_moving=!1,a.js_close()})},i.js_change_project=function(){j.loadEntries(a.task_move.project.pid,function(b){if(b&&0!==b.length){a.task_move.entries=b;var c=_.findWhere(b,{entry_id:e.entry_id});a.task_move.entry=c?c:a.task_move.entries[0]}})},i.js_del_task=function(){wt.data.task.trash(i.pid,e.tid,function(a){W(e),k.isOpened&&k.xid===e.tid&&k.close()}),b.close()},i.js_archive_task=function(){wt.data.task.archive(i.pid,e.tid,function(){f.$broadcast(kzi.constant.event_names.on_task_archive,e.tid)}),b.close()},i.js_to_copy_task=function(){i.new_task=wt.bus.task.get_copy_task(e),a.js_step(31)},i.js_copy_task=function(b,c){if(!_.isEmpty(c.name)){a.is_copying=!0;var d=m(c.entry_id),e=wt.bus.task.calculate_copy_task_pos(d,c);wt.data.task.copy_task(i.pid,c.tid,c.name,e,c.keep_comments,c.keep_members,c.keep_labels,c.keep_attachments,c.keep_todos,c.keep_watchers,function(b){a.js_close(),Z(b.data)},null,function(){a.is_copying=!1})}},i.file_upload_option={url:[kzi.config.box_url(),"?pid="+e.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:{target:"prj",type:"task",pid:e.pid,tid:e.tid},addCallback:function(){a.js_close()}},i.uploadlink_option={url:[kzi.config.box_url(),"uploadbylink","?pid="+e.pid,"&token="+kzi.get_cookie("sid")].join(""),formData:i.file_upload_option.formData},i.js_uploadbylink_uploading=!1,i.js_uploadbylink=function(b){if(_.isEmpty(i.uploadlink_url)||!kzi.validator.isUrl(i.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),void $(b.target).prev().focus();i.js_uploadbylink_uploading=!0;var c=_.extend({link:escape(i.uploadlink_url)},i.uploadlink_option.formData);wt.data.file.uploadlink(i.uploadlink_option.url,c,function(b){8100===b.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200===b.code&&h.file.new_upload(b,function(b){e.files?e.files.push(b.data):e.files=[b.data],e.badges.file_count=e.files.length,kzi.msg.info("链接文件上传成功"),i.uploadlink_url="",i.js_uploadbylink_uploading=!1,a.js_close()})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){i.js_uploadbylink_uploading=!1})},i.js_files_select=function(b){if(0!==b.length){a.js_close();var c=[];_.forEach(b,function(a){c.push({original:a,data:{target:"prj",type:"task",pid:e.pid,tid:e.tid}})}),g.addFiles(e.pid,c,function(a,b){b&&b.file&&"task"===b.type&&(_.isArray(e.files)?e.files.push(b.file):e.files=[b.file],e.badges.file_count=e.files.length)})}}}],resolve:{pop_data:function(){return{scope:a,entries:A.entries,entry:c}}}}),E.open().then(function(){A.task_menu_default_step=0,C=!1,D=null})}},A.js_open_task_detail=function(a,b,c){if(c.batch_action_flag){b.selected_batch=!b.selected_batch;for(var d=-1,f=0,g=0;f<c.selected_tasks.length;f++)c.selected_tasks[f]!=b.tid?c.selected_tasks[g++]=c.selected_tasks[f]:d=f;-1!=d?c.selected_tasks.length-=1:c.selected_tasks.push(b.tid)}else e.path("/project/"+b.pid+"/task/"+b.tid)},i.$on("addTaskSuccessEvent",function(a){Z(a),G(a.tid),H(a.entry_id)},a),i.$on("showAddEntryPopEvent",function(a){A.js_add_entry_pop(a)},a),i.$on("filterTasksAssignMeEvent",function(b){R(),"assign_me"===a.task_filters.type?(O(null),a.task_filters.turn_on=!1,a.task_filters.type=null):(a.task_filters.type="assign_me",a.task_filters.turn_on=!0,O(c.global.me))},a),i.$on("filterTasksMyWatchEvent",function(b){R(),"my_watch"===a.task_filters.type?(P(null),a.task_filters.turn_on=!1,a.task_filters.type=null):(a.task_filters.type="my_watch",a.task_filters.turn_on=!0,P(c.global.me))},a),i.$on("filterTasksMyCreateEvent",function(b){R(),"my_create"===a.task_filters.type?(Q(null),a.task_filters.turn_on=!1,a.task_filters.type=null):(a.task_filters.type="my_create",a.task_filters.turn_on=!0,Q(c.global.me))},a),i.$on("showTasksFilterDetailEvent",function(b){a.task_filters.turn_on&&(R(),a.task_filters.type=""),a.sidebar.change_status("filter_tasks")},a),A.js_open_add_task_composer=function(b,c){this.task_name="",c.task_bottom_enabled=!0,a.$$phase||a.$apply()},A.js_cancel_composer=function(a,b,c){b.task_bottom_enabled=!1,b.task_top_enabled=!1,c&&U()},a.js_complete_task=function(b,d,e){if(1!=d.batch_action_flag&&c.global.prj_module.crud&a.project.permission){b.stopPropagation();var f=e.tid;e.completed?(e.completed=0,wt.data.task.uncomplete(A.pid,f,function(){})):(e.completed=1,wt.data.task.complete(A.pid,f,function(){}))}},a.$on(kzi.constant.event_names.on_task_complete,function(a,b){b.pid===A.pid&&j.cache.task.complete(b.tid,b.completed)}),a.$on(kzi.constant.event_names.on_task_trash,function(a,b){b&&W(b)}),a.$on(kzi.constant.event_names.on_task_archive,function(a,b){if(b){var c=_.findWhere(A.tasks,{tid:b});c&&W(c,!0)}}),a.$on(kzi.constant.event_names.on_right_menu,function(b,d){if(c.global.prj_module.watch&a.project.permission){var e=kzi.helper.mouse_position(d),f=null,g=null;if($(d.target).hasClass("task")?f=$(d.target).attr("task-id"):$(d.target).parents(".task").length>0?f=$(d.target).parents(".task").attr("task-id"):$(d.target).parents(".entry").length>0&&(g=$(d.target).parents(".entry").attr("entry-id")),f){var h=_.findWhere(A.tasks,{tid:f}),g=h.entry_id,i=_.findWhere(A.entries,{entry_id:g});A.js_show_task_menu(d,i,h,e.y,e.x)}else{var i=_.findWhere(A.entries,{entry_id:g});A.js_show_entry_menu(d,i,e.y,e.x)}}}),a.$on("sidebarToggleSuccess",function(a){K()});var ia,ja=null;S()}}function b(a,b,c,d){var e=b.tid;d.openTask(b.pid,e),a.$on(kzi.constant.event_names.on_slide_hide,function(){c.path("/project/"+b.pid+"/task")})}function c(a,b){var c=a.vm={};c.add_tasks_success=function(a){_.each(a,function(a){b.$execute("addTaskSuccessEvent",a)})},c.trigger_add_entry_pop=function(){$("#btn_new_entry").click()},c.show_add_entry_pop=function(a){b.$execute("showAddEntryPopEvent",a)},c.filter_tasks_assign_me=function(a){b.$execute("filterTasksAssignMeEvent",a)},c.filter_tasks_my_watch=function(a){b.$execute("filterTasksMyWatchEvent",a)},c.filter_tasks_my_create=function(a){b.$execute("filterTasksMyCreateEvent",a)},c.show_tasks_filter_detail=function(a){b.$execute("showTasksFilterDetailEvent",a)}}function d(a,b,c,d,e){e.global.loading_done=!0,e.global.title="归档任务 | "+a.project.name;var f=a.vm={pid:b.pid,entries:[],tasks:[],page:1,archived_view:"task",part_loading_done:!1,last_date:"0000-00-00"},g=function(){_.isEmpty(f.entries)&&(f.part_loading_done=!1,wt.data.entry.get_archived_list(f.pid,function(a){f.entries=a.data},null,function(){f.part_loading_done=!0}))},h=function(){f.part_loading_done=!1,wt.data.task.get_archived_list(f.pid,f.page,kzi.config.default_count,function(b){f.last_date=wt.bus.task.set_is_show_data(b.data,f.last_date),_.isEmpty(b.data)||(f.page=f.page+1,_.isEmpty(f.tasks)?f.tasks=b.data:f.tasks=f.tasks.concat(b.data)),b.data.length<kzi.config.default_count&&(a.has_no_more=!0)},null,function(){f.part_loading_done=!0})},i=function(){"task"!==f.archived_view&&g()};f.js_archive_view_toggle=function(a){f.archived_view=a,i()},f.load_archived_tasks_more=function(){h()},a.$on(kzi.constant.event_names.on_task_unarchived,function(a,b){var c=_.findWhere(f.tasks,{tid:b.tid});f.tasks=_.reject(f.tasks,function(a){return a.tid===c.tid}),c.is_show_date&&(f.last_date=wt.bus.task.set_is_show_data(f.tasks,f.last_date))}),a.js_unarchive_entry=function(a,b){wt.data.entry.unarchive(f.pid,b,function(a){f.entries=_.reject(f.entries,function(a){return a.entry_id===b}),d.clearEntries()})},f.js_show_entry_menu=function(b,d){b.stopPropagation(),c.popbox({target:b,templateUrl:"/tpl/project/task/pop_unarchive_task.html",controller:"popUnarchiveTaskCtrl",resolve:{pop_data:function(){return{scope:a,task:d,fnSuccess:function(a){f.tasks=_.reject(f.tasks,function(b){return b.tid===a.tid}),a.is_show_date&&(f.last_date=wt.bus.task.set_is_show_data(f.tasks,f.last_date))}}}}}).open()},h()}function e(a,b,c,d){a.popbox=b;var e=a.vm={part_loading_done:!1,pid:c.scope.vm.pid,entries:[]};e.js_close=function(){b.close()},d.loadEntries(e.pid,function(a){e.part_loading_done=!0,e.entries=a,_.each(e.entries,function(a){a.selected=0})}),e.js_unarchive_task=function(a){_.each(e.entries,function(a){a.selected=0}),a.selected=1,wt.data.task.unarchive(e.pid,c.task.tid,a.entry_id,function(a){d.clearEntries(),_.isFunction(c.fnSuccess)&&c.fnSuccess(c.task)}),b.close()}}angular.module("wt.project.ctrl").controller("projectTasksCtrl",a).controller("projectTaskDetailCtrl",b).controller("projectTasksToolbarCtrl",c).controller("projectArchiveTasksCtrl",d).controller("popUnarchiveTaskCtrl",e),a.$inject=["$scope","$stateParams","$rootScope","$popbox","$location","$timeout","$interval","$filter","bus","globalDataContext","locator","wtScrollService"],b.$inject=["$scope","$stateParams","$location","locator"],c.$inject=["$scope","bus"],d.$inject=["$scope","$stateParams","$popbox","globalDataContext","$rootScope"],e.$inject=["$scope","popbox","pop_data","globalDataContext"]}(),function(){"use strict";function a(){this.calendar_view="",this.filter_type=0,this.init=function(){this.calendar_view="month";var a=kzi.localData.get("events_filter_type");a&&(this.filter_type=parseInt(a,10))},this.set_filter_type=function(a){this.filter_type!==a&&(this.filter_type=a,kzi.localData.set("events_filter_type",a))}}function b(a,b,c,d){var e=a.vm={pid:c.pid,events_filter:d};d.init(),a.add_tasks_success=function(a){_.each(a,function(a){b.$execute("addTaskSuccessEvent",a)})},a.js_new_event_success=function(a){b.$execute("addEventSuccessEvent",a)},e.set_filter_type=function(a){d.set_filter_type(a),b.$execute("setEventsFilterTypeEvent",null)}}function c(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var b=a.myCalendar.fullCalendar("getView");$("#calendar_title").html(b.title);var c=new Date(b.start).getTime(),d=new Date(b.end).getTime(),e=(new Date).getTime();c>e||e>d?$("#calendar_today").css("visibility","visible"):$("#calendar_today").css("visibility","hidden")}function n(){0!==$("#calendar").find(".fc-agendaWeek-view").size()&&($("#calendar").find(".fc-agendaWeek-view tbody td:eq(0)").css({height:kzi.util.winHeight()-o.header_height-40,overflow:"auto",display:"block"}),$("#calendar").find(".fc-agendaWeek-view tbody td:eq(0)").find(".fc-time-grid-container").css({height:"",overflow:"auto"}))}var o=a.vm={events:[],header_height:148,events_filter:h,pid:b.pid};a.member_id="all",a.myCalendar={};var p="",q=function(){a.myCalendar.fullCalendar("refetchEvents")},r=function(){a.myCalendar.fullCalendar("removeEvents"),p=""},s=function(b,c,d,e){var f=[];(0===h.filter_type||2===h.filter_type)&&k.loadEntriesAndTasks(b,function(b){var g=_.filter(b.tasks,function(a){return a.expire_date=kzi.util.dateToTimestamp(a.expire_date),a.expire_date>=c&&a.expire_date<=d}),h=!1;_.each(g,function(b){if("all"!==a.member_id){var c=_.findWhere(b.members,{uid:a.member_id});h=c?!0:!1}else h=!0;if(h){var d={id:b.tid,title:b.name,allDay:!0,start:b.expire_date,url:"",editable:!0,durationEditable:!1,textColor:"#333",extend:{expire_date:b.expire_date,badges:b.badges,pid:b.pid,xtype:kzi.constant.xtype.task}};1===b.completed?(d.className="cal_task cal_task_completed slide-trigger",1===a.project.show_completed&&f.push(d)):(d.className="cal_task cal_task_uncompleted slide-trigger",f.push(d))}}),_.isFunction(e)&&e(f)})};c.global.title="日历 | "+a.project.name,a.calendarEventSources=[{events:function(a,b,c,d){var e=moment(a.format()).unix()+"000",f=moment(b.format()).unix()+"000";o.events=[],0===h.filter_type&&s(o.pid,e,f,function(a){k.loadCalEvents(o.pid,e,f,function(b){"month"===h.calendar_view&&_.each(b,function(a){a.allDay=!1}),"agendaWeek"===h.calendar_view&&_.each(b,function(a){a.allDay=!1}),o.events=a.concat(b),d(o.events)})}),1===h.filter_type&&k.loadCalEvents(o.pid,e,f,function(a){o.events=a,d(o.events)}),2===h.filter_type&&s(o.pid,e,f,function(a){o.events=a,d(o.events)})}}],a.calendarConfig={header:!1,height:kzi.util.winHeight()-o.header_height,editiable:!0,droppable:!0,nextDayThreshold:"00:00:00",titleFormat:{month:"YYYY年M月",week:"YYYY年M月D日",day:"YYYY年M月D日"},firstDay:0,weekMode:"liquid",allDayText:"全天",axisFormat:"HH:mm",timeFormat:"✓",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],buttonText:{today:"今天",month:"月",agendaWeek:"周",agendaDay:"日"},defaultView:o.events_filter.calendar_view,dayClick:function(b,c,d){kzi.constant.prj_module.crud&a.project.permission&&a.onDayClick(b,c,d)},loading:function(b){a.myCalendar=g.calendars.myCalendar,m(),b?c.global.loading_done=!1:c.global.loading_done=!0,n()},eventClick:function(b,c,d){a.onEventClick(b,c,d)},eventDrop:function(a,b,c,d,e,f){if(a.extend.xtype===kzi.constant.xtype.task&&a.allDay===!1)return a.allDay=!0,void c();if(a.extend.xtype===kzi.constant.xtype.event&&a.allDay===!0)return a.allDay=!1,void c();var g=_.findIndex(_.valuesIn(b._data),function(a){return 0!==a});if(-1!==g){var h=a.extend.pid;if(a.extend.xtype===kzi.constant.xtype.task&&a.allDay===!0){var i=a.id,j=a.extend.expire_date,l=moment(j).add(b._data.days,"days").endOf("day").valueOf();wt.data.task.set_expire(h,i,l,function(b){a.extend.expire_date=l,a.extend.badges.expire_date=l,k.cache.task.set_expire(i,l)})}if(a.extend.xtype===kzi.constant.xtype.event&&a.allDay===!1){var m=moment(a.start),n=moment(a.end||a.start);k.cache.event.update_date(h,a.id,m.format("YYYY-MM-DD"),m.format("HH:mm"),n.format("YYYY-MM-DD"),n.format("HH:mm"),function(){a.extend.end=n.valueOf()})}}},eventResize:function(a,b,c){if("month"===h.calendar_view){var d=moment(a.start._i).format("HH"),e=moment(a.start._i).format("mm");a.extend.end=a.end.valueOf();var f=moment(a.end._i).format("HH"),g=moment(a.end._i).format("mm");k.cache.event.update_date(o.pid,a.id,a.start.format("YYYY-MM-DD"),d+":"+e,a.end.format("YYYY-MM-DD"),f+":"+g,function(){angular.noop()})}if("agendaWeek"===h.calendar_view){var d=a.start.format("HH"),e=a.start.format("mm");a.extend.end=a.end.valueOf();var f=a.end.format("HH"),g=a.end.format("mm");k.cache.event.update_date(o.pid,a.id,a.start.format("YYYY-MM-DD"),d+":"+e,a.end.format("YYYY-MM-DD"),f+":"+g,function(){angular.noop()})}},windowResize:function(a){$(this).fullCalendar("option","height",kzi.util.winHeight()-o.header_height),n()},viewRender:function(a,b){if("agendaWeek"===a.name)for(var c,d=b.find(".fc-axis span"),e=0;e<d.length;e++)c=$(d[e]).text(),c=c.replace(/(AM|PM)/,function(a,b){return"AM"===a?"上午":"PM"===a?"下午":void 0}),e>0&&$(d[e]).text(c+"时")},eventRender:function(a,b){b.attr("title",b.find(".fc-title").text())},views:{agendaWeek:{axisFormat:"Ah"}}},a.onEventClick=function(a,b,c){b.preventDefault(),b.stopPropagation(),a.extend.xtype===kzi.constant.xtype.task?j.openTask(a.extend.pid,a.id):a.extend.xtype===kzi.constant.xtype.event&&e(function(){f.path("/project/"+a.extend.pid+"/event/"+a.id)})},a.onDayClick=function(b,e,f){if(c.global.loading_done){var g=kzi.helper.mouse_position(e);$(e.currentTarget).attr("data-placement","right"),$(e.currentTarget).attr("data-align","bottom"),$(e.currentTarget).addClass("js-popbox"),$(e.currentTarget).attr("data-auto-adapt","true"),d.popbox({target:e,templateUrl:"/ycjs/directive/event/pop_add_event.html",controller:"newEventCtrl",top:g.y,left:g.x,resolve:{pop_data:function(){return{save_success:function(b){a.js_new_event_success(b)},start_date:b}}}}).open()}},i.$on("eventsCalendarViewChangeEvent",function(){a.myCalendar.fullCalendar("changeView",o.events_filter.calendar_view),m(),r(),q()},a),i.$on("addTaskSuccessEvent",function(a){r(),q()},a),i.$on("addEventSuccessEvent",function(b){a.js_new_event_success(b)},a),i.$on("setEventsFilterTypeEvent",function(){r(),q()},a),o.prev=function(){a.myCalendar.fullCalendar("prev"),m()},o.next=function(){a.myCalendar.fullCalendar("next"),m()},o.today=function(){a.myCalendar.fullCalendar("today"),m()},o.set_calendar_view=function(a){o.events_filter.calendar_view!==a&&(o.events_filter.calendar_view=a,i.$execute("eventsCalendarViewChangeEvent"))},a.$on(kzi.constant.event_names.on_task_update,function(a,b){r(),q(),k.cache.task.update_full(b)}),a.$on(kzi.constant.event_names.on_task_trash,function(){r(),q()}),a.$on(kzi.constant.event_names.on_task_complete,function(){r(),q()}),a.$on(kzi.constant.event_names.on_task_archive,function(){r(),q()}),a.$on(kzi.constant.event_names.shortcut_key_to_task,function(b,d){if(c.global.prj_module.crud&a.project.permission)switch(d){case kzi.constant.keyASCIIs.I:case kzi.constant.keyASCIIs.N:$("#btn_new_event").click()}}),a.$on(kzi.constant.event_names.on_event_add,function(b,c){a.js_new_event_success(c),r(),q()}),a.$on(kzi.constant.event_names.on_event_update,function(a,b,c,d){k.cache.event.update(b,c,d),r(),q()}),a.$on(kzi.constant.event_names.on_event_trash,function(a,b,c){k.cache.event.trash(b,c),e(function(){r(),q()},1e3)}),a.js_new_event_success=function(a){a.forEach(function(a){if(a.end.date>=k.project.cal_events_start&&a.start.date<=k.project.cal_events_end){var b=_.findWhere(k.projects,{pid:a.pid});if(b){var c=wt.bus.event.event_to_calEvent(a,b.bg);k.project.cal_events&&(k.project.cal_events.push(c),r(),q()),b.is_calendar||(b.is_calendar=1)}else k.project.cal_events=[],r(),q()}})}}function d(a,b,c,d){d.openEvent(b.pid,b.event_id),a.$on(kzi.constant.event_names.on_slide_hide,function(){c.path("/project/"+b.pid+"/event")})}angular.module("wt.project.ctrl").service("eventsFilterData",a).controller("projectEventsToolbarCtrl",b).controller("projectEventsCtrl",c).controller("eventDetailCtrl",d),b.$inject=["$scope","bus","$stateParams","eventsFilterData"],c.$inject=["$scope","$stateParams","$rootScope","$popbox","$timeout","$location","uiCalendarConfig","eventsFilterData","bus","locator","globalDataContext","$q"],d.$inject=["$scope","$stateParams","$location","locator"]}(),function(){"use strict";function a(){}function b(a,b,c,d,e){function f(a){function b(){$(window).trigger("resize")}var a=a?a:50;e(b,a)}function g(){c.global.title="简报 | "+a.project.name,c.global.loading_done=!0,"-1"!==a.project.team_id?1===parseInt(a.project.archived)?a.permission=kzi.constant.permission.project_archived:a.permission=kzi.constant.permission.ok:1===parseInt(a.project.archived)?a.permission=kzi.constant.permission.project_archived:a.permission=kzi.constant.permission.ok,h.part_loading_done=!1,wt.data.graph.overview(h.pid,function(a){if(200===a.code){if(h.overview=a.data.overview,h.overview_project_schedule=(h.overview.completed-h.overview.archived)/(h.overview.completed-h.overview.archived+h.overview.uncompleted)*100,h.overview_delay_rate=h.overview.expired/h.overview.uncompleted*100,h.overview_completed=h.overview.completed-h.overview.archived,h.overview_all=h.overview.uncompleted+h.overview.completed,h.columnConfig.xAxis.categories=[],h.columnConfig.series[0].data=[],h.columnConfig.series[1].data=[],!_.isEmpty(a.data.entries)){var b=a.data.entries;b=_.sortBy(b,function(a){return a.completed+a.uncompleted}),b=Array.prototype.slice.call(b).reverse(),b.forEach(function(a,b){h.columnConfig.xAxis.categories.push(a.name),h.columnConfig.series[0].data.push(a.uncompleted),h.columnConfig.series[1].data.push(a.completed)})}a.data.labels&&_.each(a.data.labels,function(a){var b=_.findWhere(kzi.constant.labels,{name:a.label_name});void 0===b?(a.label_desc="未设置标签",b="#d9dde4"):b=b.color,h.labels.push({name:a.label_desc,y:a.total,color:b})}),h.members=_.sortBy(a.data.members,function(a){return a.completed}),h.members=Array.prototype.slice.call(h.members).reverse();for(var c=0;c<h.members.length;c++)h.barConfig.xAxis.categories.push(h.members[c].display_name),h.barConfig.series[0].data.push(parseInt(h.members[c].uncompleted)),h.barConfig.series[1].data.push(parseInt(h.members[c].completed));h.today=a.data.today}},null,function(){h.part_loading_done=!0,a.js_to_pulse()})}var h=a.vm={part_loading_done:!1,pid:b.pid,overview:null,overview_project_schedule:0,overview_delay_rate:0,labels:[],today:null,columnConfig:{chart:{height:250},xAxis:{categories:[]},series:[{data:[],name:"未完成",stacking:"normal"},{data:[],name:"已完成",stacking:"normal"}]},barConfig:{chart:{height:250},xAxis:{categories:[]},series:[{data:[],name:"未完成",stacking:"normal"},{data:[],name:"已完成",stacking:"normal"}]},pulse_graph_date:"0000.00.00 - 00.00",disable_pulse_next:!0};moment.locale(kzi.config.lang);var i=function(a){var b=["周日","周一","周二","周三","周四","周五","周六"],c=[],d=[];a.forEach(function(a,b){c.push(a.completed),d.push(a.created)});var e="#e1e1e1",g="#fbfbfb";g=_.max(c)>0||_.max(d)>0?"#e1e1e1":"#fbfbfb";var h={chart:{renderTo:"pulse_weekly_graph",type:"line",backgroundColor:"#ffffff",height:250},legend:{align:"right",verticalAlign:"bottom"},credits:{enabled:!1},title:{text:""},xAxis:[{title:{text:""},categories:b,lineColor:e,tickColor:e},{title:{text:""},opposite:!0,categories:b,lineColor:e,tickColor:e}],plotOptions:{line:{enabled:!0}},yAxis:[{title:{text:""},lineWidth:0,minTickInterval:1,lineColor:e,gridLineColor:g,minRange:4,min:0,floor:0},{title:{text:""},lineWidth:0,minTickInterval:1,opposite:!0,lineColor:e,gridLineColor:g,minRange:4,min:0,floor:0}],series:[{data:c,name:"完成",animation:!1},{data:d,name:"新增",animation:!1}],colors:[kzi.constant.graph_color.done,kzi.constant.graph_color.addnew]};new Highcharts.Chart(h),f()},j=function(){a.pulse_end>moment()?h.disable_pulse_next=!0:h.disable_pulse_next=!1,h.pulse_graph_date=a.pulse_start.format("YYYY.MM.DD")+" - "+a.pulse_end.format("MM.DD"),wt.data.graph.get_pulse(h.pid,a.pulse_start.valueOf(),a.pulse_end.valueOf(),function(b){a.weekly_overview=b.data.overview,i(b.data.weekly)})};a.js_to_pulse=function(){a.pulse_start=moment().startOf("week").add(-1,"day"),a.pulse_end=moment().endOf("week").add(-1,"day"),j()},h.to_pulse_next_week=function(){a.pulse_end>moment()||h.part_loading_done&&(a.pulse_start=a.pulse_start.add(7,"days"),a.pulse_end=a.pulse_end.add(7,"days"),j())},h.to_pulse_prev_week=function(){h.part_loading_done&&(a.pulse_start=a.pulse_start.add(-7,"days"),a.pulse_end=a.pulse_end.add(-7,"days"),j())},d.$on("changeGraphTypeEvent",function(){g()},a),g(),a.$on(kzi.constant.event_names.on_task_update,function(a,b){}),a.$on(kzi.constant.event_names.on_task_trash,function(a,b){}),a.$on(kzi.constant.event_names.on_task_complete,function(a,b){}),a.$on(kzi.constant.event_names.show_project_sidebar,function(a){f(200)})}angular.module("wt.project.ctrl").controller("projectGraphToolbarCtrl",a).controller("projectGraphCtrl",b),a.$injecto=[],b.$inject=["$scope","$stateParams","$rootScope","bus","$timeout"]}(),function(){"use strict";function a(){var a=this;this.view_type="",this.sort="",this.filter_type=0,this.set_view_type=function(a){this.view_type=a,kzi.localData.set("files_view_type",a)},this.set_sort=function(a){this.sort!==a&&(this.sort=a,kzi.localData.set("files_sort_type",a))},this.init=function(){this.filter_type=0;var b=kzi.localData.get("files_view_type");"list"===b?a.view_type="list":a.view_type="icon";var c=kzi.localData.get("files_sort_type");c?a.sort=c:a.sort="default"}}function b(a,b,c,d,e,f,g){var h=a.vm={part_loading_done:!1,has_more:!1,pid:b.pid,folder_id:b.folder_id||"",page:1,folders:[],files:[],files_filter:g},i={"default":0,name:1,create_date:2,update_date:3,undefined:0};a.files_filter=g,c.global.loading_done=!0,c.global.title="文件 | "+a.project.name;var j=function(){h.part_loading_done=!1,wt.data.file.get_list(h.pid,h.folder_id,h.page,i[g.sort],g.filter_type,function(a){h.folders=a.data.folders,h.folders.length>0&&(c.global.title="文件 | "+h.folders[h.folders.length-1].name),_.each(a.data.files,function(a){a.icon=kzi.helper.build_file_icon(a)}),h.has_more=!1,a.data.files.length>=kzi.config.default_count&&(h.has_more=!0),_.isEmpty(h.files)?h.files=a.data.files:h.files=h.files.concat(a.data.files),h.part_loading_done=!0})},k=function(a,b){wt.data.file.move(h.pid,a.fid,a.folder_id,b.fid,function(){a.folder_id=b.fid,h.files=_.reject(h.files,function(b){return b.fid===a.fid})})},l=function(a){h.files=_.reject(h.files,function(b){return b.fid===a.fid||b.folder_id===a.fid})};j(),h.js_files_select=function(b){var c=[];_.forEach(b,function(b){c.push({original:b,data:{target:"prj",type:"project",pid:a.project.pid,folder_id:h.folder_id}})}),d.addFiles(a.project.pid,c,function(a,b){b&&b.file&&h.files.unshift(b.file)})},e.$on("setFilesFilterTypeEvent",function(){h.page=1,h.files=[],j()},a),e.$on("setFilesSortTypeEvent",function(){h.page=1,h.files=[],j()},a),e.$on("selectFileUploadEvent",function(a){h.js_files_select(a)},a),e.$on("showAddFolderPopEvent",function(b){f.popbox({target:b,templateUrl:"/tpl/project/file/pop_add_folder.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var d=a.vm={pid:c.scope.vm.pid,folder_id:c.scope.vm.folder_id,folder_icons:kzi.constant.get_folder_icons,name:"",ext:0,dropmenu_isopen:!1,is_save_ing:!1};d.js_close=function(){b.close()},d.js_add_folder=function(a,e,f){_.isEmpty(e)||(d.save_ing=!0,wt.data.file.add_folder(d.pid,e,f,d.folder_id,function(a){a.data.icon=kzi.helper.build_file_icon(a.data),c.scope.vm.files.unshift(a.data),b.close()},function(){kzi.msg.error("创建文件夹失败")},function(){d.save_ing=!1}))},d.js_set_folder_icon=function(a){d.ext=a.ext,d.dropmenu_isopen=!1}}],resolve:{pop_data:function(){return{scope:a}}}}).open()},a),h.load_more_files=function(){h.page++,j()},h.js_show_menu=function(b,c,e,g){b.stopPropagation(),1===c.type?f.popbox({target:b,top:e,left:g,templateUrl:"/tpl/project/file/pop_folder_menu.html",controller:["$scope","popbox","pop_data",function(a,b,d){a.project=d.scope.project,a.popbox=b,a.folder=c,a.folder_name=c.name,a.folder_icons=kzi.constant.get_folder_icons,a.data={},a.data.selected_move_to_node="",wt.data.file.get_folders(h.pid,function(b){a.folder_structure={},a.folder_structure.name="根目录",a.folder_structure.fid="",a.folder_structure.children=b.data},function(){kzi.msg.error("读取目录错误")},function(){}),a.js_step=function(b){a.step=b},a.js_close=function(){b.close()},a.js_change_name=function(d,e){wt.data.file.update(h.pid,c.fid,e,"",function(){},null,function(){a.is_save_ing=!1}),c.name=e,b.close()},a.js_set_folder_icon=function(b){wt.data.file.update_ext(h.pid,c.fid,b.ext,function(){}),a.folder.ext=b.ext,a.folder.icon=b.path},a.js_del_folder=function(){d.remove_file_and_refresh(c),wt.data.file.trash(h.pid,c.fid,function(){}),b.close()},a.move=function(){return _.isEmpty(a.data.selected_move_to_node)?void b.close():c.folder_id===a.data.selected_move_to_node.fid?void b.close():(k(c,a.data.selected_move_to_node),void b.close())}}],resolve:{pop_data:function(){return{scope:a,remove_file_and_refresh:l}}}}).open():f.popbox({target:b,top:e,left:g,templateUrl:"/tpl/project/file/pop_file_menu.html",controller:["$scope","popbox","pop_data",function(a,b,e){var f=a.vm={pid:e.scope.vm.pid,file:c};a.project=e.scope.project,a.popbox=b,a.data={},a.data.selected_move_to_node="",wt.data.file.get_folders(a.project.pid,function(b){a.folder_structure={},a.folder_structure.name="根目录",a.folder_structure.fid="",a.folder_structure.children=b.data},function(){kzi.msg.error("读取目录错误")},function(){}),a.js_step=function(b){a.step=b},a.js_close=function(){b.close()},a.js_del_file_success_done=function(b){e.remove_file_and_refresh(b),a.js_close()},f.js_files_select=function(b){var e=[];_.forEach(b,function(a){e.push({original:a,data:{target:"prj",type:"file",pid:f.file.pid,fid:f.file.fid}})}),d.addFiles(a.project.pid,e,function(a,b){b&&b.file&&"file"===b.type&&c.fid===b.file.formData.fid&&(c.icon=b.file.icon,c.path=b.file.path,c.size=b.file.size,c.update_date=b.file.update_date,c.update_user=b.file.update_user,c.dt=(new Date).getTime())}),a.js_close()},a.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(f.pid,c,kzi.constant.xtype.file,c.fid,b)},a.js_watch_all=function(a,c,d){wt.bus.watch.watch_all(f.pid,d,kzi.constant.xtype.file,d.fid,c,null,null,function(){}),b.close()},a.move=function(){return _.isEmpty(a.data.selected_move_to_node)?void b.close():c.folder_id===a.data.selected_move_to_node.fid?void b.close():(k(c,a.data.selected_move_to_node),void b.close())}}],resolve:{pop_data:function(){return{scope:a,remove_file_and_refresh:l}}}}).open()},h.set_view_type=function(a){g.set_view_type(a)},h.set_sort=function(a){g.set_sort(a),e.$execute("setFilesSortTypeEvent",null)},a.file_draggable_options={accept:".js-dragdropable",hoverClass:"file-state-on-draggable",containment:".centerpanel",helper:"clone",opacity:.85,zIndex:2e3,delay:300,start:function(a,b){b.helper.addClass("file-state-on-draggable")},stop:function(a,b){},drag:function(a,b){}},a.folder_droppable_options={accept:".js-dragdropable",over:function(a,b){var c=$(a.target).attr("file-type");"1"!==c||$(a.target).hasClass("folder-state-file-over")||$(a.target).addClass("folder-state-file-over")},out:function(a,b){$(a.target).removeClass("folder-state-file-over")},drop:function(b,c){var d=$(b.target).attr("file-type");c.draggable.attr("file-type"),$(b.target).attr("file-id"),
c.draggable.attr("file-id");if("0"!==d){var e=$(b.target).attr("file-id"),f=c.helper.attr("file-id");_.isEmpty(e)||_.isEmpty(f)||(a.$apply(function(){var a=_.findWhere(h.files,{fid:f}),b=_.findWhere(h.files,{fid:e});k(a,b)}),$(b.target).removeClass("folder-state-file-over"))}}},a.$on(kzi.constant.event_names.on_pastefile_to_folder,function(a,b){h.js_files_select(b)}),a.$on(kzi.constant.event_names.on_file_trash,function(a,b){b&&(h.files=_.reject(h.files,function(a){return a.fid===b.fid}))}),a.$on(kzi.constant.event_names.on_file_move,function(a,b){b&&(h.files=_.reject(h.files,function(a){return a.fid===b.fid}))}),a.$on(kzi.constant.event_names.on_file_update,function(a,b){if(b){var c=_.findWhere(h.files,{fid:b.fid});c.name=b.name,c.desc=b.desc}}),a.$on(kzi.constant.event_names.on_right_menu,function(b,d){var e=kzi.helper.mouse_position(d),f=null,g="file-item-mark";if($(d.target).hasClass(g))f=$(d.target).attr("file-id");else{if(!($(d.target).parents("."+g).length>0))return;f=$(d.target).parents("."+g).attr("file-id")}if(f){var i=_.findWhere(h.files,{fid:f});i&&(i.type===kzi.constant.file_type.file&&c.global.prj_module.watch&a.project.permission?h.js_show_menu(d,i,e.y,e.x):c.global.prj_module.crud&a.project.permission&&h.js_show_menu(d,i,e.y,e.x))}}),a.$on(kzi.constant.event_names.on_uploadfile_add,function(a,b){h.files.push(b.file)})}function c(a,b,c,d){var e=b.folder_id,f=b.fid;d.openFile(b.pid,f),a.$on(kzi.constant.event_names.on_slide_hide,function(){e?c.path("/project/"+b.pid+"/folder/"+e):c.path("/project/"+b.pid+"/file")})}function d(a,b,c){var d=a.vm={files_filter:c};d.set_filter_type=function(a){c.filter_type=a,b.$execute("setFilesFilterTypeEvent",null)},d.show_add_folder_pop=function(a){b.$execute("showAddFolderPopEvent",a)},d.file_select=function(a){b.$execute("selectFileUploadEvent",a)},d.js_trigger_upload=function(a){$(a.target).parents(".btn-group").eq(0).find(".btn--fancy").click()},c.init()}angular.module("wt.file.ctrl",[]).service("filesFilterData",a).controller("projectFilesCtrl",b).controller("projectFileDetailCtrl",c).controller("projectFilesToolbarCtrl",d),b.$inject=["$scope","$stateParams","$rootScope","$wtUploadFile","bus","$popbox","filesFilterData"],c.$inject=["$scope","$stateParams","$location","locator"],d.$inject=["$scope","bus","filesFilterData"]}(),function(){"use strict";function a(){var a=this;this.view_type="",this.sort="",this.filter_type=0,this.set_view_type=function(a){this.view_type=a,kzi.localData.set("pages_view_type",a)},this.set_sort=function(a){this.sort!==a&&(this.sort=a,kzi.localData.set("pages_sort_type",a))},this.init=function(){this.filter_type=0;var b=kzi.localData.get("pages_view_type");b?a.view_type=b:a.view_type="tree";var c=kzi.localData.get("pages_sort_type");c?a.sort=c:a.sort="default"}}function b(a){var b=a.vm={cached_pages:[]};b.load_all_pages=function(a,c,d,e){return _.isEmpty(b.cached_pages)?void wt.data.page.get_all(a,function(a){b.cached_pages=a.data,c()},d,e):(c(),void(e&&e()))},a.$on(kzi.constant.event_names.on_page_trash,function(a,c){_.isEmpty(c)||(b.cached_pages=_.reject(b.cached_pages,function(a){return a.page_id===c.page_id}))}),a.$on(kzi.constant.event_names.on_page_update,function(a,c){_.isEmpty(c)||_.each(b.cached_pages,function(a){return a.page_id==c.page.page_id?(_.assign(a,c.page),!0):void 0})}),a.$on(kzi.constant.event_names.page_updated_by_editor,function(a,c){_.isEmpty(c)||_.each(b.cached_pages,function(a){return a.page_id==c.page.page_id?(_.assign(a,c.page),!0):void 0})}),a.$on(kzi.constant.event_names.page_created_by_editor,function(a,c){b.cached_pages.push(c)})}function c(a,b,c,d){d.openPage(b.pid,b.page_id),a.$on(kzi.constant.event_names.on_slide_hide,function(){c.path("/project/"+b.pid+"/page")})}function d(a,b,c){var d=a.vm={pages_filter:b};b.init(),d.set_filter_type=function(a){b.filter_type!==a&&(b.filter_type=a,c.$execute("pagesFilterTypeChangeEvent"))},d.show_add_subpage_pop=function(a){c.$execute("pagesShowAddSubPagePopEvent",a)}}function e(a,b,c,d,e,f){var g=a.vm={pages:[],pages_filter:e,pid:b.pid,part_loading_done:!1},h=a.parent_vm=a.$parent.vm,i=function(){"tree"===e.view_type?(g.pages=_.where(h.cached_pages,{parent_id:""}),_.each(g.pages,function(a){var b=[],c=_.where(h.cached_pages,{parent_id:a.page_id});_.each(c,function(a){b.push(a)}),a.sub_pages=_.sortBy(b,function(a){return a.create_date})})):g.pages=h.cached_pages,"default"===e.sort?(_.each(g.pages,function(a){a.sub_pages&&a.sub_pages.length>1&&(a.sub_pages=_.sortBy(a.sub_pages,"name"))}),g.pages=_.sortBy(g.pages,"name")):"create_date"===e.sort?(_.each(g.pages,function(a){a.sub_pages&&a.sub_pages.length>1&&(a.sub_pages=_.sortBy(a.sub_pages,"create_date").reverse())}),g.pages=_.sortBy(g.pages,"create_date").reverse()):"update_date"===e.sort&&(_.each(g.pages,function(a){a.sub_pages&&a.sub_pages.length>1&&(a.sub_pages=_.sortBy(a.sub_pages,"update_date").reverse())}),g.pages=_.sortBy(g.pages,"update_date").reverse())},j=function(a){h.cached_pages=_.reject(h.cached_pages,function(b){return b.page_id===a}),i()},k=function(){g.part_loading_done=!1,c.global.title="文档 | "+a.project.name,h.load_all_pages(g.pid,function(){i()},null,function(){g.part_loading_done=!0})};f.$on("pagesViewTypeChangeEvent",function(){i()},a),f.$on("pagesFilterTypeChangeEvent",function(){switch(e.filter_type){case 0:_.each(h.cached_pages,function(a){a.is_hide=!1});break;case 1:_.each(h.cached_pages,function(a){a.owner.uid===c.global.me.uid?a.is_hide=!1:a.is_hide=!0});break;case 2:_.each(h.cached_pages,function(a){var b=_.findWhere(a.watchers,{uid:c.global.me.uid});b?a.is_hide=!1:a.is_hide=!0})}},a),f.$on("setPagesSortTypeEvent",function(){g.pages=[],i()},a),f.$on("pagesShowAddSubPagePopEvent",function(b){b.stopPropagation(),d.popbox({target:b,templateUrl:"/tpl/project/page/pop_parents_page.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var d=a.vm={pid:c.scope.vm.pid,pages:_.where(c.scope.parent_vm.cached_pages,{parent_id:""})};d.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{scope:a}}}}).open()},a),g.js_show_menu=function(b,c,e,f){b.stopPropagation(),d.popbox({target:b,top:e,left:f,templateUrl:"/tpl/project/page/pop_page_action.html",controller:["$scope","popbox","pop_data","$rootScope",function(a,b,d,e){a.popbox=b,a.project=d.scope.project,a.step=0,a.pid=g.pid,a.js_step=function(b){a.step=b},a.page=c,""===c.parent_id&&(a.show_sub_menu=!0),a.js_delete_page=function(b){a.is_deleting=!0,wt.data.page.trash(g.pid,b.page_id,function(c){a.is_deleting=!1,e.$broadcast(kzi.constant.event_names.autosave_cancel,{key:"autosave:page:uid_"+e.global.me.uid+":xid_"+b.page_id}),a.js_close(),j(b.page_id)})},a.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(g.pid,c,kzi.constant.xtype.page,c.page_id,b)},a.js_watch_all=function(a,c,d){wt.bus.watch.watch_all(g.pid,d,kzi.constant.xtype.page,d.page_id,c,null,null,function(){}),b.close()},a.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{scope:a}}}}).open()},g.set_view_type=function(a){e.view_type!==a&&(e.set_view_type(a),f.$execute("pagesViewTypeChangeEvent"))},g.set_sort=function(a){e.set_sort(a),f.$execute("setPagesSortTypeEvent",null)},a.$on(kzi.constant.event_names.on_page_trash,function(a,b){_.isEmpty(b)||j(b)}),a.$on(kzi.constant.event_names.on_right_menu,function(b,d){if(c.global.prj_module.watch&a.project.permission){var e=kzi.helper.mouse_position(d),f=null,i="page-item-mark";if($(d.target).hasClass(i))f=$(d.target).attr("page-id");else{if(!($(d.target).parents("."+i).length>0))return;f=$(d.target).parents("."+i).attr("page-id")}if(f){var j=_.findWhere(h.cached_pages,{page_id:f});j&&g.js_show_menu(d,j,e.y,e.x)}}}),k()}angular.module("wt.page.ctrl",[]).service("pagesFilterData",a).controller("projectPagesHomeCtrl",b).controller("pagesDetailCtrl",c).controller("projectPagesToolbarCtrl",d).controller("projectPagesCtrl",e),a.$inject=[],b.$inject=["$scope"],c.$inject=["$scope","$stateParams","$location","locator"],d.$inject=["$scope","pagesFilterData","bus"],e.$inject=["$scope","$stateParams","$rootScope","$popbox","pagesFilterData","bus"]}(),function(){"use strict";function a(){var a=this;this.sort="",this.filter_type=0,this.set_sort=function(a){this.sort!==a&&(this.sort=a,kzi.localData.set("posts_sort_type",a))};var b=function(){a.filter_type=0;var b=kzi.localData.get("posts_sort_type");b?a.sort=b:a.sort="last_reply_date"};this.init=b}function b(a,b,c){var d=a.vm={posts_filter:b};b.init(),d.set_sort=function(a){b.set_sort(a),c.$execute("postsSortOrFilterChangeEvent")},d.set_filter_type=function(a){b.filter_type=a,c.$execute("postsSortOrFilterChangeEvent")},d.show_add_post=function(){c.$execute("postsShowAddPostEvent")}}function c(a,b,c,d,e,f,g,h,i){var j=b.vm={posts_filter:g,pid:c.pid,part_loading_done:!1,show_add_post:!1,posts:[]},k=0,l=_.clone(a.global.me);l.watched=!0,a.global.loading_done=!0,b.edit_post={name:"",content:"",watchers:[l]};var m=function(a){j.part_loading_done=!1,b.set_pop_watcher_options(),wt.data.post.get_list(j.pid,k,kzi.config.default_count,g.sort,1,g.filter_type,function(b){b.data.length>0&&(k=b.data[b.data.length-1][g.sort]),_.isEmpty(j.posts)?j.posts=b.data:j.posts=j.posts.concat(b.data),b.data.length===kzi.config.default_count?j.has_more=!0:j.has_more=!1,angular.isFunction(a)&&a(b.data)},null,function(){j.part_loading_done=!0})};h.$on("postsShowAddPostEvent",function(){j.show_add_post=!j.show_add_post,b.edit_post.post_id=""},b),h.$on("postsSortOrFilterChangeEvent",function(){k=0,j.posts=[],m()},b),j.set_sort=function(a){g.set_sort(a),h.$execute("postsSortOrFilterChangeEvent")},b.js_cancel_edit_post=function(){j.show_add_post=!1,b.edit_post.name="",b.edit_post.content="",b.edit_post.watchers=[l]},b.js_save_post=function(a){if(b.edit_post.name=b.edit_post.name.trim(),_.isEmpty(b.edit_post.name))return void kzi.msg.error("请输入标题");b.is_saving=!0;var c=_.pluck(b.edit_post.watchers,"uid");wt.data.post.add(j.pid,b.edit_post.name,b.edit_post.content,c,function(a){b.is_saving=!1,j.posts.unshift(a.data)},null,function(){b.js_cancel_edit_post()})},b.js_show_post_menu=function(c,e,f,g){c.stopPropagation(),d.popbox({target:c,top:f,left:g,templateUrl:"/tpl/project/post/pop_post_action.html",controller:["$scope","popbox","pop_data",function(b,c,d){b.popbox=c,b.project=d.scope.project,b.step=0,b.js_step=function(a){b.step=a},b.edit_post=e,b.pid=j.pid,a.global.me.watched=_.pluck(e.watchers,"uid").indexOf(a.global.me.uid)>=0,b.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(j.pid,c,kzi.constant.xtype.post,c.post_id,b)},b.js_watch_all=function(a,b,d,e){wt.bus.watch.watch_all(j.pid,d,kzi.constant.xtype.post,d.post_id,b,null,null,e),c.close()},b.js_delete_post=function(a){b.is_deleting=!0,wt.data.post.trash(j.pid,a.post_id,function(c){b.is_deleting=!1,b.js_close(),j.posts=_.reject(j.posts,function(b){return b.post_id===a.post_id})})},b.js_close=function(){c.close()}}],resolve:{pop_data:function(){return{scope:b}}}}).open()},b.set_pop_watcher_options=function(){a.global.prj_module.watch&b.project.permission&&(b.pop_watcher_options=[{name:"取消关注",ongoing:"取消中...",click:function(a,c,d,e){d.watched=!0,wt.bus.watch.set_watcher_toggle(j.pid,b.edit_post,kzi.constant.xtype.post,null,d),e()}}])},b.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(j.pid,c,kzi.constant.xtype.post,null,b)},b.js_watch_all=function(a,b,c,d){wt.bus.watch.watch_all(j.pid,c,kzi.constant.xtype.post,null,b,null,null,d)},a.global.title="话题 | "+b.project.name,m(),b.js_load_more=function(){m()},b.show_post_entity=function(a,b){f.path("/project/"+a+"/post/"+b)},b.$on(kzi.constant.event_names.on_post_comment,function(a,b){if(!_.isEmpty(b)){var c=_.findWhere(j.posts,{post_id:b.post_id});c&&(c.comment_count++,c.last_reply_user=b.last_reply_user,c.last_reply_date=b.last_reply_date)}}),b.$on(kzi.constant.event_names.on_post_trash,function(a,b){_.isEmpty(b)||(j.posts=_.reject(j.posts,function(a){return a.post_id===b.post_id}))}),b.$on(kzi.constant.event_names.on_post_update,function(a,b){if(!_.isEmpty(b)){var c=_.findWhere(j.posts,{post_id:b.post_id});c&&(c.name=b.name,c.summary=kzi.helper.substr(b.content,60))}}),b.$on(kzi.constant.event_names.on_right_menu,function(c,d){if(a.global.prj_module.watch&b.project.permission){var e=kzi.helper.mouse_position(d),f=null,g="post-item";if($(d.target).hasClass(g))f=$(d.target).attr("post-id");else{if(!($(d.target).parents("."+g).length>0))return;f=$(d.target).parents("."+g).attr("post-id")}if(f){var h=_.findWhere(j.posts,{post_id:f});h&&b.js_show_post_menu(d,h,e.y,e.x)}}}),b.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){/\/project\/.*\/post$/.test(location.pathname)&&!i.isOpened&&!wt.bus.mkEditor.checkClose()}),b.$on(kzi.constant.event_names.post_created_by_editor,function(a,b){j.posts.unshift(b)}),b.$on(kzi.constant.event_names.post_updated_by_editor,function(a,b){var c=_.find(j.posts,function(a){return a.post_id===b.post_id});c&&(c.name=b.name,c.content=b.content)}),b.$on(kzi.constant.event_names.on_file_add,function(a,b){if(b&&"post"===b.type&&j.pid===b.file.pid){var c=_.findWhere(j.posts,{post_id:b.ext.post_id});c&&c.post_id===b.ext.post_id&&(_.isArray(c.files)?c.files.push(b.file):c.files=[b.file],c.attachments_count=c.files.length)}}),b.$on(kzi.constant.event_names.on_uploadfile_add_to_post,function(a,b){var c=b.post_id,d=b.files||[1],e=_.findWhere(j.posts,{post_id:c});e.attachments_count?e.attachments_count=1*e.attachments_count+1*d.length:e.attachments_count=d.length}),b.$on(kzi.constant.event_names.on_uploadfile_del_to_post,function(a,b){var c=b.post_id,d=_.findWhere(j.posts,{post_id:c});d.attachments_count||1*d.attachments_count>1?d.attachments_count=d.attachments_count-1:d.attachments_count=0})}function d(a,b,c,d){d.openPost(b.pid,b.post_id),a.$on(kzi.constant.event_names.on_slide_hide,function(){c.path("/project/"+b.pid+"/post")})}angular.module("wt.project.ctrl").service("postsFilterData",a).controller("projectPostsCtrl",c).controller("projectPostsToolbarCtrl",b).controller("projectPostDetailCtrl",d),b.$inject=["$scope","postsFilterData","bus"],c.$inject=["$rootScope","$scope","$stateParams","$popbox","$timeout","$location","postsFilterData","bus","locator"],d.$inject=["$scope","$stateParams","$location","locator"]}(),function(){"use strict";function a(a,b,c,d,e,f){var g=a.vm={pid:b.pid,wtobjs:[],cached_wtobjs:[]};a.filter_type=0,a.filter_type_text="全部",a.part_loading_done=!1,a.filter_is_open=!0;var h=function(){return c.global.prj_module.crud&a.project.permission?void wt.data.project.get_trash(g.pid,function(b){c.global.title="项目回收站",c.global.loading_done=!0,g.wtobjs=b.data,g.cached_wtobjs=b.data,a.part_loading_done=!0}):void e.path("/project/"+a.project.pid)};h(),g.js_filter=function(b){0===b?(g.wtobjs=g.cached_wtobjs,a.filter_type=0,a.filter_type_text="全部"):1===b?(g.wtobjs=_.filter(g.cached_wtobjs,function(a){return"task"===a.entity.etype||"entry"===a.entity.etype}),a.filter_type=1,a.filter_type_text="任务"):2===b?(g.wtobjs=_.filter(g.cached_wtobjs,function(a){return"post"===a.entity.etype}),a.filter_type=2,a.filter_type_text="话题"):3===b?(g.wtobjs=_.filter(g.cached_wtobjs,function(a){return"file"===a.entity.etype||"folder"===a.entity.etype}),a.filter_type=3,a.filter_type_text="文件"):4===b&&(g.wtobjs=_.filter(g.cached_wtobjs,function(a){return"page"===a.entity.etype}),a.filter_type=4,a.filter_type_text="文档")},g.js_show_trash_menu=function(b,c,e,h){d.popbox({target:b,top:e,left:h,placement:"bottom",templateUrl:"/tpl/project/trash/pop_trash_menu.html",controller:["$scope","popbox","pop_data",function(a,b,d){var e=a.pm={};a.popbox=b,a.entity=c.entity,a.project=d.scope.project,a.permission=d.scope.permission,a.step=0,e.js_step=function(b){a.step=b},e.js_close=function(){b.close()},f.loadEntries(g.pid,function(b){a.entries=b,_.each(a.entries,function(a){a.selected=0})}),e.js_restore=function(){if("entry"===c.entity.etype){var a=c.entity.eid;wt.data.entry.untrash(g.pid,a,function(b){f.clearEntries(),d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(b){return b.entity.eid===a})})}else if("folder"===c.entity.etype||"file"===c.entity.etype){var e=c.entity.eid;wt.data.file.untrash(g.pid,e,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===e})})}else if("post"===c.entity.etype){var h=c.entity.eid;wt.data.post.untrash(g.pid,h,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===h})})}else if("page"===c.entity.etype){var i=c.entity.eid;wt.data.page.untrash(g.pid,i,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===i})})}else if("event"===c.entity.etype){var j=c.entity.eid;wt.data.event.untrash(g.pid,j,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===j})})}b.close()},e.js_restore_task=function(e){if(_.each(a.entries,function(a){a.selected=0}),e.selected=1,e){var h=c.entity.eid;wt.data.task.untrash(g.pid,e.entry_id,h,function(a){f.clearEntries(),d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===h}),g.cached_wtobjs=d.scope.vm.wtobjs}),b.close()}},e.js_destory=function(){if("task"===c.entity.etype){var a=c.entity.eid;wt.data.task.del(g.pid,a,function(b){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(b){return b.entity.eid===a}),g.cached_wtobjs=d.scope.vm.wtobjs})}else if("entry"===c.entity.etype){var e=c.entity.eid;wt.data.entry.del(g.pid,e,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===e}),g.cached_wtobjs=d.scope.vm.wtobjs})}else if("folder"===c.entity.etype||"file"===c.entity.etype){var f=c.entity.eid;wt.data.file.del(g.pid,f,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid==f}),g.cached_wtobjs=d.scope.vm.wtobjs})}else if("post"===c.entity.etype){var h=c.entity.eid;wt.data.post.del(g.pid,h,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===h}),g.cached_wtobjs=d.scope.vm.wtobjs})}else if("page"===c.entity.etype){var i=c.entity.eid;wt.data.page.del(g.pid,i,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===i}),g.cached_wtobjs=d.scope.vm.wtobjs})}else if("event"===c.entity.etype){var j=c.entity.eid;wt.data.event.del(g.pid,j,function(a){d.scope.vm.wtobjs=_.reject(d.scope.vm.wtobjs,function(a){return a.entity.eid===j}),g.cached_wtobjs=d.scope.vm.wtobjs})}b.close()}}],resolve:{pop_data:function(){return{scope:a}}}}).open()},g.js_clear_trash=function(b){d.popbox({target:b,templateUrl:"/tpl/project/trash/pop_empty_trash.html",controller:["$scope","popbox","pop_data",function(a,b,d){a.popbox=b;var e=a.pm={};e.js_close=function(){b.close()},e.js_empty_trash=function(){c.global.loading_done=!1,wt.data.project.clear_trash(g.pid,function(a){c.global.loading_done=!0,d.scope.vm.wtobjs=[],g.cached_wtobjs=[]}),b.close()}}],resolve:{pop_data:function(){return{scope:a}}}}).open()},a.$on(kzi.constant.event_names.on_right_menu,function(a,b){var c=kzi.helper.mouse_position(b),d="x-item-mark",e=null;if($(b.target).hasClass(d))e=$(b.target).attr("x-id");else{if(!($(b.target).parents("."+d).length>0))return;e=$(b.target).parents("."+d).attr("x-id")}if(e){var f=_.findWhere(g.wtobjs,{entity:{eid:e}});g.js_show_trash_menu(b,f,c.y,c.x)}})}angular.module("wt.project.ctrl").controller("projectTrashCtrl",a),a.$inject=["$scope","$stateParams","$rootScope","$popbox","$location","globalDataContext"]}(),function(){"use strict";function a(){this.detail={}}function b(a,b,c,d){var e=a.page=c;a.deletePageSuccess=function(){b.$broadcast(kzi.constant.event_names.on_page_trash,e.detail),d.path("/project/"+e.detail.pid+"/page")}}function c(a,b,c,d,e){function f(){g.autosave_init_done=!1,_.isEmpty(g.page_id)?(g.page.has_children=!1,g.original_page=angular.copy(g.page),e.detail=g.page,g.autosave_key="autosave:page:uid_"+a.global.me.uid,g.autosave_init_done=!0):(g.is_add=!1,wt.data.page.get(g.pid,g.page_id,function(d){g.page=d.data,g.page.has_parent=g.page.parent_id?1:0,void 0!==g.page.sub_pages&&g.page.sub_pages.length>0?g.page.has_children=!0:g.page.has_children=!1,e.detail=g.page,g.page.placeholder="此次修改的简短说明（可选）",g.page.message="",g.original_page=angular.copy(g.page),a.global.loading_done=!0,a.global.title="编辑文档 | "+g.page.name,wt.data.page.locked(g.pid,g.page_id),g.autosave_key="autosave:page:uid_"+a.global.me.uid+":xid_"+g.page_id,g.autosave_init_done=!0,b.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){var a="/project/"+g.pid+"/page";wt.bus.mkEditor.checkClose()||c.path(a)})})),h.load_all_pages(g.pid,function(){g.root_pages=_.filter(h.cached_pages,function(a){return""===a.parent_id&&a.page_id!==g.page_id})})}var g=b.vm={pid:d.pid,page_id:d.page_id,parent_page_id:d.parent_page_id?d.parent_page_id:"",root_pages:[],is_saving:!1,is_add:d.page_id?!1:!0,has_children:!0,original_page:null,autosave_init_done:!1,autosave_key:"",page:{name:"",content:"",message:"",parent_id:d.parent_page_id?d.parent_page_id:"",watchers:[a.global.me],has_parent:d.parent_page_id?1:0,has_children:!0,placeholder:"新建文档的简短说明（可选）"}},h=b.$parent.vm;a.global.loading_done=!1,f(),g.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(g.pid,c,kzi.constant.xtype.page,c.page_id,b)},g.js_watch_all=function(a,b,c,d){wt.bus.watch.watch_all(g.pid,c,kzi.constant.xtype.page,c.page_id,b,null,null,d)},b.$on("$stateChangeStart",function(a){if(g.save_success!==!0){_.isEmpty(g.page.name)&&(g.page.name=""),_.isEmpty(g.page.content)&&(g.page.content=""),_.isEmpty(g.page.message)&&(g.page.message="");var b=!1;(g.original_page.name!==g.page.name||g.original_page.content!==g.page.content||g.original_page.message!==g.page.message)&&(b=!0),b&&(window.confirm("当前文档还没有保存,确定要退出编辑页面么？")||a.preventDefault()),wt.data.page.unlocked(g.pid,g.page_id)}}),g.js_save_page=function(b,d){if(g.page.name=g.page.name.trim(),_.isEmpty(g.page.name))return void kzi.msg.error("请输入文档标题");if(!_.isEmpty(g.page)&&!b.$invalid){g.page.parent_id=g.page.parent_id?g.page.parent_id:"",g.is_saving=!0;var e=_.pluck(g.page.watchers,"uid");if(g.is_add)g.page.parent_id=null!=g.page.parent_id?g.page.parent_id:"",wt.data.page.add(g.pid,g.page.name,g.page.content,g.page.message,g.page.parent_id,e,function(b){h.cached_pages.unshift(b.data),kzi.msg.success("添加文档成功!"),a.$broadcast(kzi.constant.event_names.autosave_cancel,{key:g.autosave_key}),d?(g.is_add=!1,g.page=b.data,g.page.placeholder="此次修改的简短说明（可选）",g.page.message="",g.original_page=angular.copy(g.page),a.global.title="编辑文档 | "+g.page.name):(g.save_success=!0,c.path("/project/"+g.pid+"/page"))},null,function(){g.is_saving=!1});else{_.isUndefined(g.page.is_notify)&&(g.page.is_notify=!1);var f=1;d&&(f=0),wt.data.page.update(g.pid,g.page.page_id,g.page.name,g.page.content,g.page.message,g.page.parent_id,g.page.is_notify,f,function(b){_.assign(g.page,b.data),a.$broadcast(kzi.constant.event_names.on_page_update,{page:g.page}),a.$broadcast(kzi.constant.event_names.autosave_cancel,{key:g.autosave_key}),kzi.msg.success("更新文档成功!"),d?(g.page.message="",g.original_page=angular.copy(g.page),a.global.title="编辑文档 | "+g.page.name):(g.save_success=!0,c.path("/project/"+g.pid+"/page"))},null,function(){g.is_saving=!1})}}},g.js_cancel_edit=function(){a.$broadcast(kzi.constant.event_names.autosave_cancel,{key:g.autosave_key}),g.is_add?history.go(-1):c.path("/project/"+g.pid+"/page")},g.is_add&&(a.global.loading_done=!0,a.global.title="添加文档 | "+b.project.name),b.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){if(/\/project\/.*\/page\/add/.test(location.pathname)){var a="/project/"+g.pid+"/page";wt.bus.mkEditor.checkClose()||c.path(a)}}),b.$on(kzi.constant.event_names.page_created_by_editor,function(a,b){g.is_add=!1,g.page_id=b.page_id,g.parent_page_id=b.parent_page_id,g.original_page=angular.copy(b),g.original_page.message=b.message?b.message:""}),b.$on(kzi.constant.event_names.page_updated_by_editor,function(a,b){g.original_page=angular.copy(b)})}function d(a,b,c,d,e,f){var g=a.vm={pid:c.pid,page_id:c.page_id,page_vers:[],show_compare_result:!1,current_page:{},breadcrumbs:[],checked_versions:[]};b.global.loading_done=!1,a.diff_result_html="",b.global.title="历史版本 | "+a.project.name,wt.data.page.get_versions(g.pid,g.page_id,function(a){g.page_vers=a.data,wt.data.page.get(g.pid,g.page_id,function(a){g.current_page=a.data,g.breadcrumbs.push(d.trustAsHtml('<a href="javascript:;" data-click="vm.goto_page()">'+d.getTrustedHtml(g.current_page.name)+"</a>")),g.breadcrumbs.push("历史版本")},function(){kzi.msg.error("加载版本失败")},function(){b.global.loading_done=!0})},function(){kzi.msg.error("加载项目失败")},function(){}),g.show_diff=function(){b.global.loading_done=!1,wt.data.page.get_version_page(g.pid,g.page_id,g.checked_versions[0],g.checked_versions[1],function(b){var c=difflib.stringAsLines(_.findWhere(b.data,{version:g.checked_versions[0]}).content),e=difflib.stringAsLines(_.findWhere(b.data,{version:g.checked_versions[1]}).content),f=new difflib.SequenceMatcher(c,e),h=f.get_opcodes();a.diff_result_html=d.trustAsHtml(diffview.buildView({baseTextLines:c,newTextLines:e,opcodes:h,baseTextName:"# "+g.checked_versions[0],newTextName:"# "+g.checked_versions[1],contextSize:null,viewType:0}).outerHTML)},function(){},function(){b.global.loading_done=!0,g.breadcrumbs.pop(),g.breadcrumbs.push(d.trustAsHtml('<a href="javascript:;" data-click="hide_diff()">历史版本</a>')),g.breadcrumbs.push("比对结果"),g.show_compare_result=!0})},g.goto_page=function(){f.openPage(g.pid,g.page_id)},a.hide_diff=function(){g.breadcrumbs.pop(),g.breadcrumbs.pop(),g.breadcrumbs.push("历史版本"),g.show_compare_result=!1},g.child_event_handler=function(b){var c=$(b.currentTarget.innerHTML).data("click");c&&a.$eval(c)},g.toggle_sel_version=function(a,b){var c=$(a.target).parents(".page-version-row").find(":checkbox");if(b.selected)b.selected=!1,g.checked_versions=_.without(g.checked_versions,b.version);else{if(2===g.checked_versions.length)return;b.selected=!0,g.checked_versions.push(b.version)}e(function(){c.prop("checked",b.selected)},30)},g.preventDefault=function(a){a.preventDefault()}}angular.module("wt.page.ctrl").service("pageDetailData",a).controller("projectPageAddToolbarCtrl",b).controller("projectPageAddEditCtrl",c).controller("projectPageVerDiffCtrl",d),b.$inject=["$scope","$rootScope","pageDetailData","$location"],c.$inject=["$rootScope","$scope","$location","$stateParams","pageDetailData"],d.$inject=["$scope","$rootScope","$stateParams","$sce","$timeout","locator"]}(),function(){"use strict";function a(a,b,c,d){a.global.title="日历订阅",a.global.loading_done=!0;var e=b.vm={qrcode:"",suburl:""},f=function(a){e.suburl=["webcal://",c.$$host,"80"==c.$$port||"443"==c.$$port?"":":"+c.$$port,"/api/calendar/subscribe/",a].join(""),wt.data.utils.get_qrcode(e.suburl,6,null,function(a){e.qrcode=a})};wt.data.user.caltoken(a.global.me.uid,function(a){200===a.code&&f(a.data)}),b.reset_token=function(a){d.popbox({target:a,templateUrl:"/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox",function(a,b,c){b.popbox=c,b.js_close=function(){c.close()},b.delete_message="重置订阅地址后，以前订阅的设备会失效，<br/>需要从新的地址重新订阅。确定重置订阅地址吗？",b.delete_title="确认重置订阅地址",b.delete_button="确认重置",b.js_sure_delete=function(){b.is_deleting=!0,wt.data.user.caltoken_reset(a.global.me.uid,function(a){200===a.code&&(f(a.data),kzi.msg.info("重置成功"),b.js_close())},null,function(){b.is_deleting=!1})}}]}).open()}}angular.module("wt.calendar.ctrl",["ui.calendar"]).controller("calendarSubscribeCtrl",a),a.$inject=["$rootScope","$scope","$location","$popbox"]}(),function(){"use strict";function a(a,b){var c=null,d=null;b.tpl_prefix="item_";var e=0,f=function(){b.loading_activity=!0,wt.data.activity.get_for_item(d,c,e,kzi.config.default_count,function(a){a.data.length>0&&(e=a.data[a.data.length-1].published);var c=[];c=_.isEmpty(b.activities)?a.data:b.activities.concat(a.data),b.has_more=a.data.length===kzi.config.default_count,wt.bus.activity.set_activities_show_date(c),b.activities=c},null,function(){b.loading_activity=!1})};b.js_load_more=function(){f()},b.$on(kzi.constant.event_names.reload_item_activities,function(a,g){e=0,d=g.xtype,c=g.xid,b.activities=null,f()}),b.$on(kzi.constant.event_names.clear_item_activities,function(){e=0,b.activities=[]})}function b(a,b,c,d){var e=b.pid;a.pid=e,a.tpl_prefix="project_";var f=0,g="all",h=function(){a.loading_activity=!0,wt.data.activity.get_for_project(e,g,f,kzi.config.default_count,function(b){b.data.length>0&&(f=b.data[b.data.length-1].published);var c=[];c=_.isEmpty(a.activities)?b.data:a.activities.concat(b.data),a.has_more=b.data.length===kzi.config.default_count,wt.bus.activity.set_activities_show_date(c),a.activities=c},null,function(){a.loading_activity=!1})};a.js_to_graph=function(a){kzi.localData.set("prj_graph_view_type",a),d.path("/project/"+e+"/graph")},c.global.title="活动 | "+a.project.name,c.global.loading_done=!0,h(),a.js_load_more=function(b){a.eventTarget=b.target,h()},a.$on(kzi.constant.event_names.filter_activity_by_type,function(b,c){g=c.data,f=0,a.activities=null,h()})}function c(a,b){b.filter_is_open=!0,b.filter_items=[{type:"all",display_name:"全部",selected:!0},{type:"task",display_name:"任务"},{type:"post",display_name:"话题"},{type:"file",display_name:"文件"},{type:"page",display_name:"文档"},{type:"event",display_name:"日程"}],b.selected_item=b.filter_items[0],b.js_select_filter_item=function(a){a.type!==b.selected_item.type&&(b.selected_item.selected=!1,a.selected=!0,b.selected_item=a,b.$emit(kzi.constant.event_names.emit_filter_activity_by_type,b.selected_item.type))}}angular.module("wt.activity.ctrl",[]).controller("itemActivityCtrl",a).controller("projectActivityCtrl",b).controller("filterActivityCtrl",c),a.$inject=["$rootScope","$scope"],b.$inject=["$scope","$stateParams","$rootScope","$location"],c.$inject=["$rootScope","$scope"]}(),function(){"use strict";function a(a,b,c,d,e){b.account=e,a.global.me.desc=e.desc,a.global.loading_done=!0,"account"==c.current.name&&d.path("/account/settings")}function b(a,b,c,d,e,f,g,h,i){a.global.title="基本设置";var j=b.vm={part_loading_done:!0,is_bind_weixin:1*a.global.me.is_bind_weixin,weixin_nick_name:a.global.me.weixin_nick_name||null,pop_weixin:null,pop_worktile_weixin:null};b.email_step=1,b.sending_email=!1,b.send_success=!1,b.send_fail=!1,b.avatar={selection:[100,100,200,200,100,100],thumbnail:!0},b.base_info={name:a.global.me.display_name,desc:a.global.me.desc},b.password={};var k=null;b.time_zone_all=[];for(var l in kzi.constant.moment_timezone_meta.zones){var m=kzi.constant.moment_timezone_meta.zones[l],n=m.name.split("/");m.show_name=n[2]||n[1],m.GMT=moment().tz(m.name).format("Z").trim(),b.time_zone_all.push(m)}b.js_user_change_email=function(c,d){return d===a.global.me.email?void c.$errors.unshift("新邮箱地址和原来的邮箱地址一样"):(b.is_sending_email=!0,void wt.data.user.email_change_apply(d,function(){b.send_success=!0},function(a){a.code===kzi.statuses.user_error.email_has_exist.code&&c.$errors.unshift("该邮箱地址已经存在，请重新输入")},function(){b.is_sending_email=!1}))},b.send_activation_email=function(a){a.preventDefault(),b.sending_email=!0,wt.data.user.resend_activation_email(function(){b.send_success=!0,b.sending_email=!1},function(){b.send_fail=!0,b.sending_email=!1})},b.js_change_email_step=function(a){b.email_step=a},b.js_file_select=function(a){if(0!=a.length){var c=a[0],d=new FileReader;d.onload=function(a){g(function(){b.avatar.file=c,b.avatar.src=a.target.result})},d.readAsDataURL(c)}},b.js_save_avatar=function(){var c=($(".ng-jcrop-image")[0],b.avatar.selection[4]+"x"+b.avatar.selection[5]+"+"+b.avatar.selection[0]+"+"+b.avatar.selection[1]);b.avatar.uploading=!0,h.uploadAvatar({original:b.avatar.file,data:{target:"avatar",type:"avatar",cropArgs:c}},function(c,d){!c&&d?wt.data.user.set_avatar(d.url,function(){a.global.me.avatar=d.url,b.cancel_upload_avatar(),b.avatar.uploading=!1,e.cache.user.avatar(a.global.me.uid,d.url)}):(b.avatar.uploading=!1,kzi.msg.error("上传头像失败"))})},b.cancel_upload_avatar=function(){b.avatar.src="",
b.avatar.file=null,b.avatar.selection=[100,100,200,200,100,100]},b.js_user_update=function(){var c=b.base_info;(c.name!==a.global.me.display_name||c.desc!=a.global.me.desc||c.title!==k.title||c.phone!==k.phone)&&(c.updating=!0,(void 0===c.desc||null===c.desc)&&(c.desc=""),wt.data.user.update(c.name,c.title,c.phone,c.desc,function(){e.cache.user.update(a.global.me.uid,c.name,c.desc),k.title=c.title,k.phone=c.phone,kzi.msg.success("修改个人资料成功！"),c.is_edit=!1},function(){kzi.msg.error("修改个人资料失败！")},function(){b.updating=!1}))},b.js_cancel_base_info_edit=function(){b.base_info={name:a.global.me.display_name,desc:a.global.me.desc,title:k.title,phone:k.phone}},b.js_user_change_pwd=function(){b.password.updating=!0,wt.data.user.change_pwd(b.password.old,b.password["new"],function(a){b.password.is_edit=!1,kzi.msg.success("修改密码成功！")},function(){form.$errors.unshift("原密码输入错误")},function(){b.password.updating=!1})},b.js_cancel_pwd_edit=function(){b.password={}},b.js_time_zone_change=function(){wt.data.user.set_user_prefs(a.global.me.uid,"time_zone",b.time_zone,function(a){kzi.msg.success("设置时区成功")})},wt.data.account.get_basic(function(a){k=a.data,b.base_info.title=k.title,b.base_info.phone=k.phone,b.time_zone=_.find(a.data.prefs,function(a){return"time_zone"===a.key}).value}),j.js_bind_weixin=function(a){j.pop_weixin=i.popbox({target:a,popboxClass:"popbox min-w50",placement:"top",align:"left",templateUrl:"/tpl/account/pop_weixin_qrcode.html",controller:["$scope","popbox",function(a,b){var c=a.vm={feed_bind_success:0};a.popbox=b,a.$on(kzi.constant.event_names.on_weixin_bind,function(a,b){c.feed_bind_success=b.data}),a.js_close=function(){b.close()}}]}),j.pop_weixin.open()},j.js_unbind_weixin=function(a){i.popbox({target:a,templateUrl:"/tpl/account/pop_weixin_unbind_confirm.html",controller:["$rootScope","$scope","popbox","pop_data",function(a,b,c,d){b.popbox=c,b.js_close=function(){c.close()},b.js_ok=function(){b.is_doing=!0,wt.data.user.weixin_unbind(function(b){kzi.msg.success("解绑成功！"),d.target_scope.vm.is_bind_weixin=0,a.global.me.is_bind_weixin=0},function(a){kzi.msg.error("解绑失败！")},function(){c.close(),b.is_doing=!1})}}],resolve:{pop_data:function(){return{target_scope:b}}}}).open()},j.js_show_worktile_weixin=function(a){j.pop_worktile_weixin=i.popbox({target:a,placement:"right",popboxClass:"popbox min-w50",templateUrl:"/tpl/common/pop_weixin_qrcode.html",controller:["$scope","popbox",function(a,b){a.popbox=b,a.js_close=function(){b.close()}}]}),j.pop_worktile_weixin.open()},j.js_close_worktile_weixin=function(){j.pop_worktile_weixin.close()},b.$on(kzi.constant.event_names.on_weixin_bind,function(a,b){j.is_bind_weixin=b.data})}function c(a,b){var c=b.vm={part_loading_done:!0,comment_auto_watch:"1",create_task_assign_me:"0"};a.global.title="个性化设置",b.current_menu="individuation",a.global.loading_done=!0,b.js_toggle_comment_auto_watch=function(){c.comment_auto_watch="1"===c.comment_auto_watch?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"comment_auto_watch",c.comment_auto_watch,function(a){kzi.msg.success("更改设置成功")})},b.js_toggle_create_task_assign_me=function(){c.create_task_assign_me="1"===c.create_task_assign_me?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"create_task_assign_me",c.create_task_assign_me,function(a){kzi.msg.success("更改设置成功")})},wt.data.account.get_basic(function(a){c.comment_auto_watch=_.find(a.data.prefs,function(a){return"comment_auto_watch"===a.key}).value,c.create_task_assign_me=_.find(a.data.prefs,function(a){return"create_task_assign_me"===a.key}).value},null,function(){c.part_loading_done=!0})}function d(a,b,c,d,e,f){function g(){wt.data.account.get_basic(function(a){h.notice_by_email=_.find(a.data.prefs,function(a){return"notice_by_email"===a.key}).value,h.notice_by_weixin=_.find(a.data.prefs,function(a){return"notice_for_weixin"===a.key}).value,h.notice_by_mobile=_.find(a.data.prefs,function(a){return"notice_for_client"===a.key}).value,h.notice_for_smart=_.find(a.data.prefs,function(a){return"notice_for_smart"===a.key}).value,h.notice_for_express=_.find(a.data.prefs,function(a){return"notice_for_express"===a.key}).value,h.notice_for_daily_mail=_.find(a.data.prefs,function(a){return"notice_for_daily_mail"===a.key}).value,h.notice_for_weekly_mail=_.find(a.data.prefs,function(a){return"notice_for_weekly_mail"===a.key}).value,"express"===d.$$hash&&$(".center-panel-container").hasClass("mCustomScrollbar")&&c(function(){$(".center-panel-container").mCustomScrollbar("scrollTo","bottom")},300)},null,function(){h.part_loading_done=!0}),wt.data.webhook.get_person_webhooks(function(a){200===a.code&&(h.webhook_list=a.data)},null,null)}var h=b.vm={part_loading_done:!1,notice_by_email:"1",notice_by_weixin:"1",notice_by_mobile:"1",notice_for_smart:"1",notice_for_express:"1",notice_for_daily_mail:"1",notice_for_weekly_mail:"1",desk_notice:a.global.me.notice_for_desktop,webhook_list:[],is_notify_not_set:f.notSetPermission,is_notify_enabled:!f.needsPermission,is_setting_notify:!1,is_setting_notice_by_email:!1,is_setting_notice_by_weixin:!1,is_setting_notice_by_mobile:!1,is_setting_notice_by_email_onload:!1,is_setting_notice_by_weixin_onload:!1,is_setting_notice_by_mobile_onload:!1,check_list_notice_by_email:{},check_list_notice_by_weixin:{},check_list_notice_by_mobile:{}};a.global.title="消息设置",b.current_menu="message",a.global.loading_done=!0,b.js_toggle_email_notice=function(){h.notice_by_email="1"===h.notice_by_email?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_by_email",h.notice_by_email,function(a){kzi.msg.success("更改设置成功")})},h.js_set_notice_by_email_open=function(){h.is_setting_notice_by_email=!0,wt.data.account.get_notice_settings(function(a){var b=a.data;h.check_list_notice_by_email={is_check_task:b.email_notice.assign_task,is_check_at:b.email_notice.at_metion,is_check_calendar:b.email_notice.attendee_event,is_check_watcher:b.email_notice.follows,is_check_comment:b.email_notice.comments,is_check_other:b.email_notice.others},h.is_setting_notice_by_email_onload=!0},function(){kzi.msg.error("获取用户信息失败，请重试！"),h.js_set_notice_by_email_close()})},h.js_set_notice_by_email_close=function(){h.is_setting_notice_by_email=!1,h.is_setting_notice_by_email_onload=!1},h.js_save_notice_by_email=function(){var a={assign_task:1*h.check_list_notice_by_email.is_check_task,at_metion:1*h.check_list_notice_by_email.is_check_at,attendee_event:1*h.check_list_notice_by_email.is_check_calendar,follows:1*h.check_list_notice_by_email.is_check_watcher,comments:1*h.check_list_notice_by_email.is_check_comment,others:1*h.check_list_notice_by_email.is_check_other};wt.data.account.update_email_notice(a,function(a){kzi.msg.success("设置成功！")},function(a){kzi.msg.error("设置失败，请重试！")}),h.js_set_notice_by_email_close()},h.js_toggle_weixin_notice=function(){h.notice_by_weixin="1"===h.notice_by_weixin?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_for_weixin",h.notice_by_weixin,function(a){kzi.msg.success("更改设置成功")})},h.js_set_notice_by_weixin_open=function(){h.is_setting_notice_by_weixin=!0,wt.data.account.get_notice_settings(function(a){var b=a.data;h.check_list_notice_by_weixin={is_check_task:b.weixin_notice.assign_task,is_check_at:b.weixin_notice.at_metion,is_check_calendar:b.weixin_notice.attendee_event,is_check_watcher:b.weixin_notice.follows,is_check_comment:b.weixin_notice.comments,is_check_other:b.weixin_notice.others},h.is_setting_notice_by_weixin_onload=!0},function(){kzi.msg.error("获取用户信息失败，请重试！"),h.js_set_notice_by_weixin_close()})},h.js_set_notice_by_weixin_close=function(){h.is_setting_notice_by_weixin=!1},h.js_save_notice_by_weixin=function(){var a={assign_task:1*h.check_list_notice_by_weixin.is_check_task,at_metion:1*h.check_list_notice_by_weixin.is_check_at,attendee_event:1*h.check_list_notice_by_weixin.is_check_calendar,follows:1*h.check_list_notice_by_weixin.is_check_watcher,comments:1*h.check_list_notice_by_weixin.is_check_comment,others:1*h.check_list_notice_by_weixin.is_check_other};wt.data.account.update_weixin_notice(a,function(a){kzi.msg.success("设置成功！")},function(a){kzi.msg.error("设置失败，请重试！")}),h.js_set_notice_by_weixin_close()},h.js_toggle_mobile_notice=function(){h.notice_by_mobile="1"===h.notice_by_mobile?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_for_client",h.notice_by_mobile,function(a){kzi.msg.success("更改设置成功")})},h.js_set_notice_by_mobile_open=function(){h.is_setting_notice_by_mobile=!0,wt.data.account.get_notice_settings(function(a){var b=a.data;h.check_list_notice_by_mobile={is_check_task:b.client_notice.assign_task,is_check_at:b.client_notice.at_metion,is_check_calendar:b.client_notice.attendee_event,is_check_watcher:b.client_notice.follows,is_check_comment:b.client_notice.comments,is_check_other:b.client_notice.others},h.is_setting_notice_by_mobile_onload=!0},function(){kzi.msg.error("获取用户信息失败，请重试！"),h.is_setting_notice_by_weixin=!1})},h.js_set_notice_by_mobile_close=function(){h.is_setting_notice_by_mobile=!1},h.js_save_notice_by_mobile=function(){var a={assign_task:1*h.check_list_notice_by_mobile.is_check_task,at_metion:1*h.check_list_notice_by_mobile.is_check_at,attendee_event:1*h.check_list_notice_by_mobile.is_check_calendar,follows:1*h.check_list_notice_by_mobile.is_check_watcher,comments:1*h.check_list_notice_by_mobile.is_check_comment,others:1*h.check_list_notice_by_mobile.is_check_other};wt.data.account.update_mobile_notice(a,function(a){kzi.msg.success("设置成功！")},function(a){kzi.msg.error("设置失败，请重试！")}),h.js_set_notice_by_mobile_close()},h.js_toggle_desk_notice=function(){h.desk_notice="1"===h.desk_notice?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_for_desktop",h.desk_notice,function(){a.global.me.notice_for_desktop=h.desk_notice,kzi.msg.success("更改设置成功"),"1"===h.desk_notice?f.notify({title:"提醒",body:'你"打开"了桌面提醒功能'}):f.notify({title:"提醒",body:'你"关闭"了桌面提醒功能'})})},h.js_enabled_notify=function(){h.is_notify_not_set=!1,h.is_setting_notify=!0,f.checkPermission(function(){b.$apply(function(){h.is_notify_enabled=!0,h.is_setting_notify=!1})},function(){b.$apply(function(){h.is_notify_enabled=!1,h.is_setting_notify=!1})})},h.sendNotifyTest=function(){f.notify({title:"Worktile 提醒 Test",body:"Hey, 我在这里!"})},b.js_toggle_smart_notice=function(){h.notice_for_smart="1"===h.notice_for_smart?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_for_smart",h.notice_for_smart,function(a){kzi.msg.success("更改设置成功")})},b.js_toggle_change_express=function(){h.notice_for_express="1"===h.notice_for_express?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_for_express",h.notice_for_express,function(a){kzi.msg.success("更改设置成功")})},b.js_toggle_daily_email=function(){h.notice_for_daily_mail="1"===h.notice_for_daily_mail?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_for_daily_mail",h.notice_for_daily_mail,function(a){kzi.msg.success("更改设置成功")})},b.js_toggle_weekly_email=function(){h.notice_for_weekly_mail="1"===h.notice_for_weekly_mail?"0":"1",wt.data.user.set_user_prefs(a.global.me.uid,"notice_for_weekly_mail",h.notice_for_weekly_mail,function(a){kzi.msg.success("更改设置成功")})},b.js_add_webhook=function(a,c,d,f,g){var i={wid:c,name:d,web_hook_url:f,secret:g};e.popbox({target:a,templateUrl:"/tpl/account/pop_webhook.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;var d=a.vm={step:0,webHookList:c.webhookList,currentWebHook:c.currentWebHook,isEdit:!1,webhook:{name:"",web_hook_url:"",secret:"",type:1}};d.currentWebHook.wid&&(d.isEdit=!0,d.webhook=d.currentWebHook),d.js_save_webhook=function(){d.isEdit?wt.data.webhook.update_person_webhook(d.webhook,function(a){var c=_.findIndex(d.webHookList,function(a){return a.wid===d.webhook.wid});d.webHookList.splice(c,1,d.webhook),b.close()},null,null):wt.data.webhook.add_person_webhook(d.webhook,function(a){200===a.code&&(d.webHookList.push(a.data),b.close())},null,null)},d.js_del_webhook=function(){wt.data.webhook.delete_person_webhook(d.webhook.wid,function(a){200===a.code&&(_.remove(d.webHookList,function(a){return a.wid===d.webhook.wid}),b.close())},null,null)},d.js_step=function(a){d.step=a},d.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{$scope:b,webhookList:h.webhook_list,currentWebHook:i}}}}).open()},g()}function e(a,b){var c=b.vm={part_loading_done:!1,account_show_recovery_code:!1,recovery_codes:null};a.global.title="安全日志",a.global.loading_done=!0,b.current_menu="security",b.from_index=1,b.two_step=0,b.input={};var d=function(a){b.account_histories=[],c.part_loading_done=!1,wt.data.account.get_security(a,function(c){b.account_histories=c.data.histories,b.from_index=(a-1)*kzi.config.default_count+1,(1===a||"1"===a)&&(b.totalCount=c.data.totalCount,b.security_pagination_opts={totalCount:c.data.total_count,opts:{callback:function(a){d(a+1)}}})},null,function(){c.part_loading_done=!0})},e=function(){c.recovery_codes=null,wt.data.account.get_recovery_codes(function(a){c.recovery_codes=a.data})};b.js_two_step=function(a){b.two_step!==a&&(b.two_step=a,3===a&&(b.twofactor_secret||(b.twofactor_secret=null,b.qrcode_html=null,b.loading_twofactor_secret_done=!1,wt.data.account.get_twofactor_secret(function(a){b.twofactor_secret=a.data},null,function(){b.loading_twofactor_secret_done=!0}))))},b.js_user_change_pwd=function(a,c,d,e){b.is_changing_pwd=!0,wt.data.user.change_pwd(c,d,function(a){b.change_pwd_success=!0},function(){a.$errors.unshift("原密码输入错误")},function(){b.is_changing_pwd=!1})},b.js_enable_twofactor=function(){return _.isEmpty(b.input.factor)?void(b.input.enable_twofactor_errors="动态验证码不能为空"):(b.is_enable_twofactoring=!0,void wt.data.account.enable_twofactor(b.input.factor,function(a){b.account.twofactor_enabled=1,e(),b.js_two_step(0),b.twofactor_secret=null,b.input.enable_twofactor_errors=""},function(a){a.code===kzi.statuses.user_error.twofactor_match_error.code?b.input.enable_twofactor_errors="输入动态验证码不正确,请重新再试！":b.input.enable_twofactor_errors="开启验证失败,请重新再试！"},function(){b.is_enable_twofactoring=!1}))},b.js_twofactor_focus=function(){b.input.enable_twofactor_errors=""},b.js_disable_twofactor=function(){b.is_disable_twofactoring=!0,wt.data.account.disable_twofactor(function(){b.account.twofactor_enabled=0},function(){b.input.enable_twofactor_errors="关闭两步验证失败,请重新再试！"},function(){b.is_disable_twofactoring=!1})},e(),d(1)}function f(a,b,c,d,e,f){var g=b.vm={part_loading_done:!1};a.global.title="应用中心",b.current_menu="apps",a.global.loading_done=!0,wt.data.account.get_apps(function(a){b.account_apps=a.data},null,function(){g.part_loading_done=!0});var h=function(a){b.account_apps=_.reject(b.account_apps,function(b){return b.app_id===a.app_id})};b.js_pop_decommissioning=function(a,b){f.popbox({target:a,templateUrl:"/tpl/account/pop_decommissioning_confirm.html",controller:["$rootScope","$scope","popbox",function(a,c,d){c.popbox=d,c.js_close=function(){d.close()},c.js_decommissioning=function(){c.is_decommissioning=!0,wt.data.account.decommissioning_app(b,function(){h(b),d.close()},null,function(){c.is_decommissioning=!1})}}]}).open()}}angular.module("wt.account.ctrl",[]).controller("accountSettingsCtrl",a).controller("accountProfileCtrl",b).controller("accountIndividuationCtrl",c).controller("accountMessageCtrl",d).controller("accountSecurityCtrl",e).controller("accountAppsCtrl",f),a.$inject=["$rootScope","$scope","$state","$location","account"],b.$inject=["$rootScope","$scope","$stateParams","$location","globalDataContext","$sce","$timeout","$wtUploadFile","$popbox"],c.$inject=["$rootScope","$scope"],d.$inject=["$rootScope","$scope","$timeout","$location","$popbox","$wtNotify"],e.$inject=["$rootScope","$scope"],f.$inject=["$rootScope","$scope","$stateParams","$location","$http","$popbox"]}(),function(){"use strict";function a(a,b,c){var d=b.vm={my_referrals:[],recommend_url:[c.$$protocol+"://",c.$$host,80===c.$$port||443===c.$$port?"":":"+c.$$port,"/"+a.global.me.name+"/recommend"].join(""),qrcode:"",show_send_email:!1};a.global.title="推荐给好友",b.qrcode="",wt.data.utils.get_qrcode(d.recommend_url,6,null,function(a){d.qrcode=a}),wt.data.referrals(function(a){200===a.code&&(d.my_referrals=_.filter(a.data,function(a){return 1===a.status}))}),_.isEmpty(a.global.me.name)?b.share_link=kzi.config.root_url:b.share_link=kzi.config.root_url+"?by="+a.global.me.name,b.share_desc="Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。",b.js_show_send_email=function(){d.show_send_email=!d.show_send_email},b.js_cancel_send_email=function(){d.show_send_email=!1},b.js_send_share_email=function(a){b.is_sending=!0,wt.data.share.recommand(b.share_email,b.share_desc,function(a){b.share_email="",b.share_desc="Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。",kzi.msg.success("邮件发送成功")},null,function(){b.is_sending=!1})}}angular.module("wt.share.ctrl",[]).controller("shareCtrl",a),a.$inject=["$rootScope","$scope","$location"]}(),function(){"use strict";function a(a,b,c){b.global.loading_init=!1,b.global.title="404";c.vm={type:a.type}}angular.module("wt.not_found.ctrl",[]).controller("notFoundCtrl",a),a.$inject=["$stateParams","$rootScope","$scope"]}(),function(){"use strict";function a(a){var b={"default":0,members:1,setting:2,add_member:3,filter_tasks:4,setting_base_info:5,setting_preferences:6,setting_webhook:7,setting_notify:8,setting_archive:9,setting_activate:10,setting_del:11,setting_quit:12,setting_transfer:13,export_data:20,create_by_mail:21,project_copy:22,setting_timing_tasks:23,setting_label:24},c=a.vm={step:0,mail_domain:kzi.constant.mail.domain,prj_permission_admin:kzi.constant.prj_permission.admin,prj_permission_member:kzi.constant.prj_permission.member};a.steps=b,"members"===a.sidebar.status&&(c.step=b.members),a.$on(kzi.constant.event_names.show_project_sidebar,function(a,d){"members"===d.status?c.step=b.members:"filter_tasks"===d.status?c.step=b.filter_tasks:"setting"===d.status?d.sub_status?"base_info"===d.sub_status?c.step=b.setting_base_info:"labels"===d.sub_status&&(c.step=b.setting_label):c.step=b.setting:"timing_tasks"===d.status?c.step=b.setting_timing_tasks:"project_copy"===d.status?c.step=b.project_copy:"export_data"===d.status?c.step=b.export_data:"create_by_mail"===d.status?c.step=b.create_by_mail:c.step=b["default"]}),c.to_add_member=function(){c.step=b.add_member,a.sidebar.status="add_member",a.sidebar.sub_status=""},c.to_members=function(){c.step=b.members,a.sidebar.status="members",a.sidebar.sub_status=""},a.to_step=function(d){switch(d){case b.setting:a.sidebar.sub_status="";break;case b.setting_base_info:a.sidebar.sub_status="base_info";break;default:a.sidebar.sub_status=d}c.step=d}}angular.module("wt.project.ctrl").controller("prjSidebarCtrl",a),a.$inject=["$scope"]}(),function(){"use strict";function a(a,b){var c=b.vm={},d=b.task_filters,e=function(){b.labels=b.project.labels,_.isArray(b.task_filters.texts)?b.task_filter_text=b.task_filters.texts.join(" "):b.task_filter_text="";var a=wt.bus.member.get_normal_members(b.project.members);a=_.clone(a),a.push({uid:-1}),b.members=a};e(),c.js_filter_text=function(){if(_.isEmpty(b.task_filter_text))d.texts="",a.$broadcast(kzi.constant.event_names.on_project_tasks_filter);else{var c=b.task_filter_text.toLowerCase().replace("，",",").replace("　",",").replace(" ",",").replace("  ",",");d.texts=c.split(","),a.$broadcast(kzi.constant.event_names.on_project_tasks_filter)}},c.clear_text=function(){b.task_filter_text="",d.texts=[],a.$broadcast(kzi.constant.event_names.on_project_tasks_filter)},c.js_filter_member=function(b){d.members.indexOf(b.uid)<0?(-1==b.uid?d.members=[b.uid]:(d.members.indexOf("-1")>=0&&d.members.splice(d.members.indexOf("-1"),1),d.members.push(b.uid)),b.filter=!0):(d.members.splice(d.members.indexOf(b.uid),1),b.filter=!1),a.$broadcast(kzi.constant.event_names.on_project_tasks_filter,{})},c.member_is_filter=function(a){return d.members.indexOf(a)>=0?!0:void 0},c.js_filter_label=function(b){var c=d.labels.indexOf(b.name);0>c?(d.labels.push(b.name),b.filter=!0):(b.filter=!1,d.labels.splice(c,1)),a.$broadcast(kzi.constant.event_names.on_project_tasks_filter)},c.label_is_filter=function(a){return d.labels.indexOf(a)>=0?!0:void 0},c.toggle_hide_completed=function(){b.task_filters.hide_completed=!b.task_filters.hide_completed,a.$broadcast(kzi.constant.event_names.on_project_tasks_filter)},c.js_filter_date=function(b){d.date===b?d.date="":d.date=b,a.$broadcast(kzi.constant.event_names.on_project_tasks_filter,{})},c.clear_task_filters=function(){b.task_filter_text="",a.$broadcast(kzi.constant.event_names.project_clear_task_filter,null)},c.close_sidebar=function(){c.clear_task_filters(),b.sidebar.close()}}angular.module("wt.project.ctrl").controller("sidebarFilterTasksCtrl",a),a.$inject=["$rootScope","$scope"]}(),function(){"use strict";function a(a,b,c){b.pid;a.draggable_options={appendTo:$("#main"),helper:"clone",zIndex:2e3,delay:300,start:function(a,b){b.helper.find("span.avatar-name").remove(),b.helper.find(".avatar-face > i").remove(),b.helper.addClass("member-state-on-drag")},stop:function(a,b){},drag:function(a,b){}},a.isMemberFilter=function(){return function(a){return a.status===kzi.constant.status.ok&&(a.role===kzi.constant.role.admin||a.role===kzi.constant.role.member)}},a.isGuestFilter=function(){return function(a){return a.status===kzi.constant.status.ok&&a.role===kzi.constant.role.guest}},a.isOnlineFilter=function(){return function(a){return a.status===kzi.constant.status.ok&&(1===a.online||"1"==a.online)}},a.isStatusPendingFilter=function(){return function(a){return a.status===kzi.constant.status.pending}}}function b(a){var b=a.project.pid,c=_.pluck(a.project.members,"uid"),d=function(){if(a.project.link_join_code&&(a.link_to_join=window.location.origin+"/project/link/join?code="+a.project.link_join_code),-1!=a.project.team_id){var b=[],d=[];a.loading_team_members=!0,wt.data.team.get_team_members(a.project.team_id,function(e){e.data.members=_.reject(e.data.members,{status:kzi.constant.status.pending}),_.each(e.data.members,function(a){c.indexOf(a.uid)<0&&(a.role===kzi.constant.role.guest?b.push(a):d.push(a))}),a.unassigned_team_visitors=b,a.unassigned_team_members=d},null,function(){a.loading_team_members=!1})}};d(),a.js_add_prj_member=function(c,d){d||(d=kzi.constant.role.member),wt.data.project.add_member(b,c.uid,d,function(b){kzi.msg.success("添加成员成功！"),a.project.members.push(b.data),a.unassigned_team_members=_.reject(a.unassigned_team_members,function(a){return a.uid===c.uid}),a.unassigned_team_visitors=_.reject(a.unassigned_team_visitors,function(a){return a.uid===c.uid})})},a.js_add_user_as_member=function(b){a.js_add_prj_member(b,kzi.constant.role.member)},a.js_invite_member=function(c){_.isEmpty(c)||a.member_inviting||(a.member_inviting=!0,wt.data.project.invite_member(b,c,function(b){_.findWhere(a.project.members,{uid:b.data.uid})||a.project.members.push(b.data),a.invite_email="",b.data.status===kzi.constant.status.ok&&(a.unassigned_team_members=_.reject(a.unassigned_team_members,function(a){return a.uid===b.data.uid})),kzi.msg.success("添加成员成功！")},null,function(){a.member_inviting=!1}))},a.toggle_join_project_link=function(){a.project.link_join_code?wt.data.project.join_link_close(b,function(b){a.project.link_join_code=""},function(){kzi.msg.error("关闭加入项目链接失败")}):wt.data.project.join_link_open(b,function(b){a.project.link_join_code=b.data,a.link_to_join=window.location.origin+"/project/link/join?code="+a.project.link_join_code},function(){kzi.msg.error("打开加入项目链接失败")},function(){})}}angular.module("wt.project.ctrl").controller("sidebarMembersCtrl",a).controller("sidebarAddMemberCtrl",b),a.$inject=["$scope","$stateParams","globalDataContext"],b.$inject=["$scope"]}(),function(){"use strict";function a(a,b){a.temp_prj=_.clone(a.project),a.visibilities=wt.bus.project.get_visibilities(a.project.team_id),a.prj_colors=kzi.constant.prj_colors,a.prj_icons=kzi.constant.prj_icons,a.js_color_select=function(b){a.temp_prj.bg=b},a.js_icon_select=function(b){a.temp_prj.pic=b},a.js_prj_update=function(c){(a.temp_prj.name!==a.project.name||a.temp_prj.bg!==a.project.bg||a.temp_prj.pic!==a.project.pic||a.temp_prj.desc!==a.project.desc||a.temp_prj.visibility!==a.project.visibility)&&(a.is_prj_saveing=!0,_.isEmpty(a.project.desc)&&(a.project.desc=""),wt.data.project.update(a.project.pid,a.temp_prj.name,a.temp_prj.bg,a.temp_prj.pic,a.temp_prj.desc,a.temp_prj.visibility,function(){b.cache.project.update(a.project.pid,a.temp_prj.name,a.temp_prj.bg,a.temp_prj.pic,a.temp_prj.desc,a.temp_prj.visibility),kzi.msg.success("修改项目基本信息成功")},function(){kzi.msg.error("修改项目基本信息失败")},function(){a.is_prj_saveing=!1}))}}angular.module("wt.project.ctrl").controller("sidebarSettingBaseInfoCtrl",a),a.$inject=["$scope","globalDataContext"]}(),function(){"use strict";function a(a,b,c,d){var e=a.vm={pid:a.project.pid,start_sort_nav:!1};a.prj_navigations_all=kzi.constant.prj_navigations,a.prj_navigations_navids=_.clone(a.project.navs)||[],a.prj_navigations=wt.bus.project.get_navs(a.project.navs),a.un_prj_navigations=wt.bus.project.get_un_navs(a.project.navs);var f=_.clone(a.prj_navigations_navids);a.js_navid_is_changed=function(a){return!_.isEqual(a,f)},a.js_nav_is_enabled=function(a){return _.contains(f,a)},a.js_toggle_autoarchive=function(){var b=1;b=1===a.project.auto_archived?0:1,a.project.auto_archived=b,wt.data.project.set_prefs(e.pid,"auto_archived",b,function(){var a=_.findWhere(c.projects,{pid:e.pid});a.auto_archived=b})},a.js_toggle_show_done_task_in_event=function(){var b=1;b=1===a.project.show_completed?0:1,a.project.show_completed=b,wt.data.project.set_prefs(e.pid,"show_completed",b,function(){})},a.js_toggle_nav=function(g){if(!e.start_sort_nav){var h=_.indexOf(_.pluck(a.prj_navigations,"id"),g.id),i=_.indexOf(_.pluck(a.un_prj_navigations,"id"),g.id);0===a.prj_navigations_navids.length&&(a.prj_navigations_navids=_.pluck(a.prj_navigations_all,"id"));var j=_.indexOf(a.prj_navigations_navids,g.id);if(g=_.omit(g,"$$hashKey","__proto__"),0>h)a.prj_navigations_navids.push(g.id),a.prj_navigations.push(g),a.un_prj_navigations.splice(i,1);else{if(1===a.prj_navigations.length)return void kzi.msg.warn("必须保留一个应用");if(a.prj_navigations_navids.splice(j,1),a.un_prj_navigations.push(g),a.prj_navigations.splice(h,1),b.global.project_iconmenu===g.name){var k="project."+_.pluck(a.prj_navigations,"name")[0];"project.page"===k&&(k="project.page.list"),d.go(k)}}wt.data.project.change_navs(e.pid,a.prj_navigations_navids,function(b){c.cache.project.change_navs(e.pid,a.prj_navigations_navids),f=_.clone(a.prj_navigations_navids)})}},a.nav_sortable_options={containment:".sidebar_body",placeholder:"prj-nav-placeholder",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",connectWith:".js_sortable",start:function(a,b){e.start_sort_nav=!0,b.item.addClass("picked-up"),$(".prj-nav-placeholder").css({height:b.item.css("height"),width:b.item.width()})},stop:function(b,d){e.start_sort_nav=!1,d.item.removeClass("picked-up");var g=_.pluck(a.prj_navigations,"id");a.js_navid_is_changed(g)===!0&&wt.data.project.change_navs(e.pid,g,function(a){f=g,c.cache.project.change_navs(e.pid,g)})}}}angular.module("wt.project.ctrl").controller("sidebarSettingPreferencesCtrl",a),a.$inject=["$scope","$rootScope","globalDataContext","$state"]}(),function(){"use strict";function a(a,b,c){var d=b.vm={is_add:!1,pid:b.project.pid},e=function(){d.part_loading_done=!1,b.prj_webhooks=[],wt.data.webhook.get_webhooks(b.project.pid,function(a){var c=_.map(a.data,function(a){if(1==a.is_every)return a;var b=(a.actions.join(","),a.actions);a.actions=_.map(kzi.constant.actions,function(b){return a.actions.indexOf(b.action)>-1?b.action:""});var c=_.map(b,function(a){var b=_.findWhere(kzi.constant.actions,{action:a});return b?b.desc:""});return a.actionsStr="("+c.join(",")+")",a});b.prj_webhooks=c},null,function(){d.part_loading_done=!0})};e(),b.webhook_action=kzi.constant.actions,b.to_edit_webhook=function(a){d.is_add=!0,b.edit_webhook=_.clone(a)},b.to_add_webhook=function(){d.is_add=!0,b.edit_webhook={actions:[]},b.edit_webhook.is_every=1},b.cancel_edit=function(){d.is_add=!1},b.js_webhook_add_edit=function(){if(b.edit_webhook.is_every=parseInt(b.edit_webhook.is_every),1!==b.edit_webhook.is_every){if(b.edit_webhook.actions=_.without(b.edit_webhook.actions,""),0==b.edit_webhook.actions.length)return void kzi.msg.warn("添加 Webhook 错误，至少选一个通知事件");b.edit_webhook.actions=_.uniq(b.edit_webhook.actions)}else b.edit_webhook.actions=[];b.edit_webhook.wid?wt.data.webhook.change_webhook(d.pid,b.edit_webhook,function(a){kzi.msg.info("Webhook 修改成功"),d.is_add=!1,e()}):wt.data.webhook.add_webhook(d.pid,b.edit_webhook,function(a){kzi.msg.info("Webhook 添加成功"),d.is_add=!1,e()})},b.js_webhook_del=function(a,f){c.popbox({target:a,templateUrl:"/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox","pop_data",function(a,b,c,g){b.popbox=c,b.js_close=function(){c.close()},b.delete_message="Webhook 删除后，通知事件将不会在通知到 Webhook 地址，确认删除吗？",b.delete_title="删除Webhook",b.delete_button="确认删除",b.js_sure_delete=function(){b.is_deleting=!0,wt.data.webhook.del_webhook(d.pid,f.wid,function(a){200==a.code&&(kzi.msg.info("Webhook 删除成功"),g.scope.vm.is_add=!1,e(),b.js_close())},null,function(){b.is_deleting=!1})}}],resolve:{pop_data:function(){return{scope:b}}}}).open()}}angular.module("wt.project.ctrl").controller("sidebarSettingWebhookCtrl",a),a.$inject=["$rootScope","$scope","$popbox"]}(),function(){"use strict";function a(a,b){b.toggle_email_notify=function(){var a=b.project.is_notify?0:1;wt.data.project.set_prefs(b.project.pid,"is_notify",a,function(c){1===a?kzi.msg.success("邮件通知已开启"):kzi.msg.success("邮件通知已关闭"),b.project.is_notify=a},function(){})}}angular.module("wt.project.ctrl").controller("sidebarSettingNotifyCtrl",a),a.$inject=["$rootScope","$scope"]}(),function(){"use strict";function a(a){a.vm={pid:a.project.pid,export_type:"json"}}angular.module("wt.project.ctrl").controller("sidebarExportDataCtrl",a),a.$inject=["$scope"]}(),function(){"use strict";function a(a,b,c,d){var e=b.project.pid,f=b.vm={is_prj_copying:!1,visibility_options:[{id:kzi.constant.prj_visibility["private"],name:"私有项目"},{id:kzi.constant.prj_visibility["protected"],name:"团队可见"},{id:kzi.constant.prj_visibility["public"],name:"公开项目"}],visibility_options2:[{id:kzi.constant.prj_visibility["private"],name:"私有项目"},{id:kzi.constant.prj_visibility["public"],name:"公开项目"}]};b.prj_copy={name:"",teams:c.getTeamsInCharge(),dest_team:null,keepTasks:!0,keepFiles:!0,keepPosts:!0,keepPages:!0,visibility_options:f.visibility_options,selected_visibility:null},b.is_prj_copying=!1,b.js_prj_copy=function(){var a="";b.vm.is_prj_copying=!0,wt.data.project.copy_project(e,b.prj_copy.dest_team.team_id,b.prj_copy.name,b.prj_copy.keepTasks,b.prj_copy.keepFiles,b.prj_copy.keepPosts,b.prj_copy.keepPages,b.prj_copy.selected_visibility.id,function(b){a=b.data.pid,c.cache.project.add(b.data),kzi.msg.success("拷贝项目成功")},function(a){kzi.msg.error("拷贝项目失败")},function(){b.vm.is_prj_copying=!1,b.sidebar.close(),d.path("/project/"+a)})},f.js_target_team_change=function(a){-1==a.team_id?b.prj_copy.visibility_options=f.visibility_options2:b.prj_copy.visibility_options=f.visibility_options}}angular.module("wt.project.ctrl").controller("sidebarProjectCopyCtrl",a),a.$inject=["$rootScope","$scope","globalDataContext","$location"]}(),function(){"use strict";function a(a,b,c){var d=b.project.pid;b.teams=wt.bus.team.get_add_prj_teams(c.teams),b.to_team_id=b.project.team_id,b.set_transfer_to=function(a){b.to_team_id=a},b.transfer=function(){_.isEmpty(b.to_team_id)||(b.is_transfering=!0,wt.data.project.transfer(d,b.to_team_id,function(){c.cache.project.shift(d,b.to_team_id),kzi.msg.success("项目移动成功")},function(){kzi.msg.error("项目移动失败")},function(){b.is_transfering=!1}))}}function b(a,b){var c=b.project.pid;b.js_prj_archive=function(){b.is_archiving=!0,wt.data.project.archive(c,function(){b.project.archived=1,b.project.permission=kzi.constant.prj_module.view,a.cache.project.remove(c),kzi.msg.success("归档项目成功"),b.to_step(b.steps.setting)},null,function(){
b.is_archiving=!1})}}function c(a,b){var c=b.project.pid;b.js_prj_unarchive=function(){b.is_unarchiving=!0,wt.data.project.unarchive(c,function(){b.project.archived=0,kzi.msg.success("激活项目成功"),b.to_step(b.steps.setting),a.reloadProjects(function(a){var d=_.findWhere(a,{pid:c});d&&(b.project.permission=d.permission)})},null,function(){b.is_unarchiving=!1})}}function d(a,b,c){var d=b.project.pid;b.js_prj_del=function(e){e===b.project.name?(b.is_deleting=!0,wt.data.project.del(d,function(){a.cache.project.remove(d),c.path("/dashboard")},null,function(){b.is_deleting=!1})):kzi.msg.warn("输入项目名字错误！请确认你要删除的项目！")}}function e(a,b,c,d){var e=c.project.pid,f=_.filter(c.project.members,function(a){return a.uid!==b.global.me.uid&&a.role===kzi.constant.role.admin});c.has_other_admin=f.length>0,c.js_prj_quit=function(b){b===c.project.name?(c.is_quiting=!0,wt.data.project.member_leave(e,function(){a.cache.project.remove(e),d.path("/dashboard")},null,function(){c.is_quiting=!1})):kzi.msg.warn("输入项目名字错误！请确认你要退出的项目！")}}angular.module("wt.project.ctrl").controller("sidebarSettingTransferCtrl",a).controller("sidebarSettingArchiveCtrl",b).controller("sidebarSettingActiveCtrl",c).controller("sidebarSettingDelCtrl",d).controller("sidebarSettingQuiteCtrl",e),a.$inject=["$rootScope","$scope","globalDataContext"],b.$inject=["globalDataContext","$scope"],c.$inject=["globalDataContext","$scope"],d.$inject=["globalDataContext","$scope","$location"],e.$inject=["globalDataContext","$rootScope","$scope","$location"]}(),function(){"use strict";function a(a,b,c,d){function e(){d.loadEntries(f.pid,function(a){b.entries=a})}var f=b.vm={pid:b.project.pid};b.is_edit=!1,b.loading_prj_timingtasks=!0,e(),b.to_edit_mode=function(a){b.is_edit=!0,b.temp_timingtask=_.clone(a)},b.to_timingtask_list=function(){b.is_edit=!1},b.loadTimingTasks=function(){wt.data.timingtask.get_timingtasks(f.pid,function(a){b.loading_prj_timingtasks=!1,b.prj_timingtasks=a.data})},b.loadTimingTasks(),b.js_timingtask_del=function(a,d){c.popbox({target:a,templateUrl:"/tpl/common/pop_delete_confirm.html",controller:["$rootScope","$scope","popbox","pop_data",function(a,b,c,e){b.popbox=c,b.js_close=function(){c.close()},b.delete_message="循环任务删除后，将停止创建任务，确认删除吗？",b.delete_title="删除循环任务",b.delete_button="确认删除",b.js_sure_delete=function(){b.is_deleting=!0,wt.data.timingtask.del_timingtask(f.pid,d.ttid,function(a){200==a.code&&(kzi.msg.info("循环任务 删除成功"),e.scope.to_timingtask_list(),e.scope.loadTimingTasks(),b.js_close())},null,function(){b.is_deleting=!1})}}],resolve:{pop_data:function(){return{scope:b}}}}).open()},b.update_timingtask=function(a){wt.data.timingtask.update_timingtask(a.ttid,f.pid,a,function(a){kzi.msg.success("修改该成功"),b.to_timingtask_list(),b.loadTimingTasks()},function(a){kzi.msg.error("修改失败, code: "+a.code)},null)},b.$on(kzi.constant.event_names.show_project_setting_timingtask,function(){b.loadTimingTasks()})}angular.module("wt.project.ctrl").controller("sidebarTimingTaskctrl",a),a.$inject=["$rootScope","$scope","$popbox","globalDataContext"]}(),function(){"use strict";angular.module("wt.dashboard.ctrl",[])}(),function(){"use strict";function a(a,b,c,d){function e(){a.global.title="我的邮件 | 工作台",b.loadingDone=!1,wt.data.mail.get_list(b.emailData.currentPage,"all",function(a){_.isEmpty(a.data)?b.emailData.emails=b.emailData.emails||[]:(b.emailData.currentPage++,_.isEmpty(b.emailData.emails)?b.emailData.emails=a.data:b.emailData.emails=b.emailData.emails.concat(a.data)),a.data.length<kzi.config.default_count?b.emailData.hasMore=!1:b.emailData.hasMore=!0},null,function(){b.loadingDone=!0})}b.loadingDone=!0,b.emailData={},b.emailData.currentPage=1,b.emailData.emails=[],b.emailData.hasMore=!0,e(),b.loadMoreEmails=function(){e()},b.js_pop_showhelp=function(a){d.popbox({target:a,templateUrl:"/tpl/dashboard/pop_dashboard_mailhelp.html",controller:["$scope","popbox","pop_data",function(a,b,c){a.popbox=b;a.pm={};a.js_close=function(){b.close()}}],resolve:{pop_data:function(){return{$scope:b}}}}).open()},b.showEmailDetail=function(a){c.openMail(a.mail_id),wt.data.mail.set_read(a.mail_id,function(){a.is_read=!0})},b.$on(kzi.constant.event_names.on_mail_trash,function(a,c){b.emailData.emails&&(b.emailData.emails=_.reject(b.emailData.emails,function(a){return a.mail_id===c.mail_id}))})}angular.module("wt.dashboard.ctrl").controller("dashboardEmailCtrl",a),a.$inject=["$rootScope","$scope","locator","$popbox"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){var a=j.myCalendar.fullCalendar("getView");$("#calendar_title").html(a.title);var b=new Date(a.start).getTime(),c=new Date(a.end).getTime(),d=(new Date).getTime();b>d||d>c?$("#calendar_today").css("visibility","visible"):$("#calendar_today").css("visibility","hidden")}function i(){0!=$("#calendar").find(".fc-agendaWeek-view").size()&&($("#calendar").find(".fc-agendaWeek-view tbody td:eq(0)").css({height:kzi.util.winHeight()-j.header_height-40,overflow:"auto",display:"block"}),$("#calendar").find(".fc-agendaWeek-view tbody td:eq(0)").find(".fc-time-grid-container").css({height:"",overflow:"auto"}))}var j=b.vm={myCalendar:{},header_height:150,calendar_view:"month",show_my_task:!0,show_all_events:1,calendar_project_filter_status:null,cache_calendar_events:null};j.js_toggle_filter=function(){"setting"===j.calendar_project_filter_status?j.calendar_project_filter_status=null:j.calendar_project_filter_status="setting"},a.global.title="我的日程 | 工作台",b.project_ids=[],b.filter_type="all",b.show_task_uid=a.global.me.uid,b.show_task_team_id=null,b.current_team={},b.show_completed_tasks=1,b.filterColumnFold=!0;var k,l,m=null,n=null,o=function(){b.show_completed_tasks=0===kzi.localData.get("cale_show_completed_tasks")?0:1,j.show_all_events=0===kzi.localData.get("cale_show_all_events")?0:1;var a=kzi.localData.get("calendar_checked_project_ids");null!=a?"none"===a?b.project_ids=[]:b.project_ids=a.split(","):b.project_ids=null,kzi.localData.get("calendar_view")?j.calendar_view=kzi.localData.get("calendar_view"):kzi.localData.set("calendar_view",j.calendar_view),kzi.localData.get("calendar_sidebar_view")?b.calendar_sidebar_view=kzi.localData.get("calendar_sidebar_view"):b.calendar_sidebar_view="event",b.calendar_sidebar_view="event"},p=function(){var a=_.filter(b.projects,function(a){return a.is_checked}),c=_.pluck(a,"pid");b.project_ids=c,_.isEmpty(c)?kzi.localData.set("calendar_checked_project_ids","none"):kzi.localData.set("calendar_checked_project_ids",b.project_ids)};o();var q=function(){j.myCalendar.fullCalendar("refetchEvents")},r=function(){j.myCalendar.fullCalendar("removeEvents")},s=function(a,c,d,e,f){if(_.isEmpty(m)||k!==a||l!==c){var g=_.pluck(b.projects,"pid");wt.data.calendar.get_list(g,1,a,c,function(a){if(m=a.data,_.isFunction(d))if(j.show_all_events)d(m);else{var b=[];_.each(m,function(a){a.extend.i_attended&&b.push(a)}),d(b)}},e,f)}else{if(_.isFunction(d))if(j.show_all_events)d(m);else{var h=[];_.each(m,function(a){a.extend.i_attended&&h.push(a)}),d(h)}_.isFunction(f)&&f()}};b.js_new_event_success=function(c){c.forEach(function(c){if(c.end.date>=k&&c.start.date<=l){var d=_.findWhere(b.projects,{pid:c.pid});if(d){var e=wt.bus.event.event_to_calEvent(c,d.bg);c.attendees&&c.attendees.indexOf(a.global.me.uid)>=0?e.extend.i_attended=1:e.extend.i_attended=0,d.is_calendar||(d.is_calendar=1,_.defaults(d,{is_checked:!0}),b.calendar_projects.push(d),b.calendar_projects=_.sortBy(b.calendar_projects,function(a){return a.pos})),m&&(m.push(e),r(),q())}else m=null,r(),q()}})},b.onEventClick=function(a,b,c){b.preventDefault(),b.stopPropagation(),a.extend&&a.extend.xtype===kzi.constant.xtype.event?g.openEvent(a.extend.pid,a.id):g.openTask(a.extend.pid,a.id)},b.onDayClick=function(c,e,f){if(a.global.loading_done){var g=kzi.helper.mouse_position(e);$(e.currentTarget).attr("data-placement","right"),$(e.currentTarget).attr("data-align","top"),$(e.currentTarget).addClass("js-popbox"),$(e.currentTarget).attr("data-auto-adapt","true"),d.popbox({target:e,templateUrl:"/ycjs/directive/event/pop_add_event.html",controller:"newEventCtrl",top:g.y,left:g.x,resolve:{pop_data:function(){return{save_success:function(a){b.js_new_event_success(a)},start_date:c}}}}).open()}},b.calendarEventSources=[{events:function(a,b,c,d){function e(a){var b=a.data.events,c=a.data.tasks;_.each(b,function(a){a.extend.recurrence_id&&(a.editable=!1),a.start.length<25&&(a.start=moment.unix(a.start).format(),a.end=moment.unix(a.end).format())}),_.each(c,function(a){a.borderColor=f.getProject(a.extend.pid).bg,1===a.extend.completed?a.className="cal_task cal_task_completed slide-trigger":a.className="cal_task cal_task_uncompleted slide-trigger",a.start.length<25&&(a.start=moment.unix(a.start).startOf("day").format()),"agendaWeek"===j.myCalendar.fullCalendar("getView").name&&(a.editable=!1,a.allDay=!0)}),j.cache_calendar_events=b.concat(c)}var g=moment(a.format()).unix()+"000",h=moment(b.format()).unix()+"000";null==j.cache_calendar_events?wt.data.calendar.get_events_and_tasks(g,h,function(a){e(a),d(j.cache_calendar_events),k=g,l=h},null,null):(d(j.cache_calendar_events),wt.data.calendar.get_events_and_tasks(g,h,function(a){e(a),j.myCalendar.fullCalendar("removeEvents"),j.myCalendar.fullCalendar("addEventSource",j.cache_calendar_events),k=g,l=h},null,null))}}],b.calendarConfig={header:!1,height:kzi.util.winHeight()-j.header_height,editable:!0,droppable:!0,nextDayThreshold:"00:00:00",titleFormat:{month:"YYYY年M月",week:"YYYY年M月D日",day:"YYYY年M月D日"},firstDay:0,weekMode:"liquid",allDayText:"全天",axisFormat:"HH:mm",timeFormat:"✓",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],buttonText:{today:"今天",month:"月",agendaWeek:"周",agendaDay:"日"},defaultView:j.calendar_view,dayClick:b.onDayClick,loading:function(b){j.myCalendar=e.calendars.myCalendar,h(),b?a.global.loading_done=!1:a.global.loading_done=!0,i()},eventClick:function(a,c,d){b.onEventClick(a,c,d)},eventDrop:function(a,b,c,d,e,g){if(a.extend.xtype===kzi.constant.xtype.task&&a.allDay===!1)return a.allDay=!0,void c();if(a.extend.xtype===kzi.constant.xtype.event&&a.allDay===!0)return a.allDay=!1,void c();if(0!==b){var h=a.extend.pid;if(a.extend.xtype===kzi.constant.xtype.task){var i=a.id,j=a.extend.expire_date,k=moment(j).add(b,"days").endOf("day").valueOf();wt.data.task.set_expire(h,i,k,function(){a.extend.expire_date=k,a.extend.badges.expire_date=k,f.cache.task.set_expire(i,k)})}else if(a.extend.xtype===kzi.constant.xtype.event){var l=moment(a.start),m=moment(a.end||a.start);f.cache.event.update_date(h,a.id,l.format("YYYY-MM-DD"),l.format("HH:mm"),m.format("YYYY-MM-DD"),m.format("HH:mm"),function(){a.extend.end=m.valueOf()})}}},eventResize:function(a,b,c){if("month"===j.calendar_view){var d=moment(a.start._i).format("HH"),e=moment(a.start._i).format("mm");a.extend.end=a.end.valueOf();var g=moment(a.end._i).format("HH"),h=moment(a.end._i).format("mm");f.cache.event.update_date(a.extend.pid,a.id,a.start.format("YYYY-MM-DD"),d+":"+e,a.end.format("YYYY-MM-DD"),g+":"+h,function(){angular.noop()})}if("agendaWeek"===j.calendar_view){var d=a.start.format("HH"),e=a.start.format("mm");a.extend.end=a.end.valueOf();var g=a.end.format("HH"),h=a.end.format("mm");f.cache.event.update_date(a.extend.pid,a.id,a.start.format("YYYY-MM-DD"),d+":"+e,a.end.format("YYYY-MM-DD"),g+":"+h,function(){angular.noop()})}},windowResize:function(){$(this).fullCalendar("option","height",kzi.util.winHeight()-j.header_height),i()},viewRender:function(a,b){if("agendaWeek"===a.name)for(var c,d=b.find(".fc-axis span"),e=0;e<d.length;e++)c=$(d[e]).text(),c=c.replace(/(AM|PM)/,function(a,b){return"AM"===a?"上午":"PM"===a?"下午":void 0}),e>0&&$(d[e]).text(c+"时")},eventRender:function(a,b){b.attr("title",b.find(".fc-title").text())},views:{agendaWeek:{axisFormat:"Ah"}}},b.changeView=function(a){j.myCalendar.fullCalendar("changeView",a),j.calendar_view=a,kzi.localData.set("calendar_view",a),h(),r(),q()},b.prev=function(){j.myCalendar.fullCalendar("prev"),h()},b.next=function(){j.myCalendar.fullCalendar("next"),h()},b.today=function(){j.myCalendar.fullCalendar("today"),h()},b.js_filter_calendar_toggle=function(a){a.is_checked?a.is_checked=!1:a.is_checked=!0,p(),r(),q()},b.js_toggle_showall=function(){1==j.show_all_events?j.show_all_events=0:j.show_all_events=1,kzi.localData.set("cale_show_all_events",j.show_all_events),r(),q()},b.js_team_members_toggle=function(a){b.current_team.team_id===a.team_id?b.current_team.expand=!b.current_team.expand:(b.current_team.expand=!1,b.current_team=a,b.current_team.expand=!0,_.isEmpty(a.members)&&(b.members_loading_done=!1,wt.data.team.get_team_members(a.team_id,function(b){a.members=wt.bus.member.get_normal_members(b.data.members),_.each(a.members,function(b){b.team_id=a.team_id})},null,function(){b.members_loading_done=!0})))},b.js_view_member_tasks=function(a,c){b.show_task_uid=a.uid,b.show_task_team_id=c.team_id,j.show_my_task=!1,n=null,r(),q()},b.js_view_my_tasks=function(){b.show_task_uid=a.global.me.uid,j.show_my_task=!0,b.show_task_team_id=null,n=null,r(),q()},b.js_show_completed_tasks=function(){b.show_completed_tasks=b.show_completed_tasks?0:1,kzi.localData.set("cale_show_completed_tasks",b.show_completed_tasks),r(),q()},b.js_toggle_right=function(){b.filterColumnFold=!b.filterColumnFold,c(function(){$("#calendar").fullCalendar("render")},320)},b.js_change_calendar_siderview=function(a){b.calendar_sidebar_view!==a&&(b.calendar_sidebar_view=a,kzi.localData.set("calendar_sidebar_view",b.calendar_sidebar_view),r(),q())},b.$on(kzi.constant.event_names.on_task_update,function(a,b){var c=_.findWhere(n,{id:b.tid});c&&(c.title=b.name,c.start=b.expire_date.toString().substring(0,10)),r(),q()}),b.$on(kzi.constant.event_names.on_task_trash,function(a,b){var c=_.findWhere(n,{id:b.tid});c&&(n=_.reject(n,function(a){return a.id===b.tid})),r(),q()}),b.$on(kzi.constant.event_names.on_task_complete,function(a,b){var c=_.findWhere(n,{id:b.tid});c&&(b.completed?(c.className="cal_task cal_task_completed slide-trigger",c.extend.completed=1):(c.className="cal_task cal_task_uncompleted slide-trigger",c.extend.completed=0)),r(),q()}),b.$on(kzi.constant.event_names.on_event_update,function(b,c,d,e){if(m){var f=_.findWhere(m,{id:c.event_id});if(d===kzi.constant.event_update_type.one&&f&&(f.title=c.name,f.start=moment(c.start.date).valueOf().toString().substring(0,10),f.end=moment(c.end.date).valueOf().toString().substring(0,10),_.findWhere(c.attendees,{uid:a.global.me.uid})?f.extend.i_attended=1:f.extend.i_attended=0,r(),q()),d===kzi.constant.event_update_type.follow_up){var g=new Date(c.start.date)-new Date(f.start),h=new Date(c.end.date)-new Date(c.start.date),i=new Date(f.start);g>0?(m.forEach(function(a){var b=new Date(a.start);a.extend.recurrence_id===c.recurrence_id&&b>=i&&(a.start=moment(a.start).add(g,"milliseconds"),a.end=moment(a.start).add(h,"milliseconds"),a.start=a.start.valueOf().toString().substring(0,10),a.end=a.end.valueOf().toString().substring(0,10),e&&(a.extend.recurrence_id=e))}),r(),q()):(m=[],s(k,l,function(){r(),q()},null,function(){}))}}r(),q()}),b.$on(kzi.constant.event_names.on_event_trash,function(a,c,d){if(m){var e=parseInt(d);switch(e){case kzi.constant.event_trash_type.one:m=_.reject(m,function(a){return a.id===c.event_id});break;case kzi.constant.event_trash_type.follow_up:m=_.reject(m,function(a){var b=new Date(a.start).getTime();return b>=c.start.date&&a.extend.recurrence_id===c.recurrence_id});break;case kzi.constant.event_trash_type.all:m=_.reject(m,function(a){return a.extend.recurrence_id===c.recurrence_id})}}b.calendar_projects=_.filter(b.projects,function(a){return 1===a.is_calendar}),r(),q()})}function b(a,b,c,d){d.openEvent(b.pid,b.event_id),a.$on(kzi.constant.event_names.on_slide_hide,function(){c.path("/dashboard/calendar")})}angular.module("wt.dashboard.ctrl").controller("dashboardCalendarCtrl",a).controller("dashboardCalendarDetailCtrl",b),a.$inject=["$rootScope","$scope","$timeout","$popbox","uiCalendarConfig","globalDataContext","locator"],b.$inject=["$scope","$stateParams","$location","locator"]}(),function(){"use strict";function a(a,b){function c(){a.global.title="工作台 - 最新动态",d.loadingDone=!1,wt.data.activity.get_feeds("all",0,d.feedData.currentPage,kzi.config.default_count,function(a){_.isEmpty(a.data)?d.feedData.feeds=d.feedData.feeds||[]:(d.feedData.currentPage++,_.isEmpty(d.feedData.feeds)?d.feedData.feeds=a.data:d.feedData.feeds=d.feedData.feeds.concat(a.data)),a.data.length<kzi.config.default_count?d.feedData.hasMore=!1:d.feedData.hasMore=!0},null,function(){d.loadingDone=!0})}var d=b.vm={loadingDone:!0,feedData:{currentPage:1,feeds:[],hasMore:!0}};c(),d.js_loadMoreActivityFeeds=function(){c()},d.js_refresh_feed=function(){d.feedData.feeds=[],d.feedData.currentPage=1,c()}}angular.module("wt.dashboard.ctrl").controller("dashboardActivityFeedCtrl",a),a.$inject=["$rootScope","$scope"]}(),function(){"use strict";function dashboardTaskCtrl($rootScope,$scope,$location,locator,globalDataContext,$timeout){function loadAllBoardList(){vm.part_loading_done=!1,wt.data.task.get_dashboard_task(function(a){resortTasksForBoard(a.data)},null,function(){vm.loaded=!0,vm.part_loading_done=!0,vm.isBoarded=!0})}function group_tasks(a){var b={today:[],tomorrow:[],week:[],nextweek:[],month:[],due:[],other:[]},c=moment(),d=moment().add(1,"days"),e=moment().endOf("week").add(1,"days"),f=moment().add(7,"days").endOf("week").add(1,"days"),g=moment().endOf("month");_.each(a,function(a){var h=moment(a.expire_date);h.isSame(c,"day")?b.today.push(a):h.isSame(d,"day")?b.tomorrow.push(a):h>c&&e>h?b.week.push(a):h>c&&f>h?b.month.push(a):h>c&&g>h?b.month.push(a):c>h&&h>0?b.due.push(a):b.other.push(a)});var h=[];return _.isEmpty(b.today)||h.push({phase:"今天",tasks:b.today}),_.isEmpty(b.tomorrow)||h.push({phase:"明天",tasks:b.tomorrow}),_.isEmpty(b.week)||h.push({phase:"本周",tasks:b.week}),_.isEmpty(b.month)||h.push({phase:"本月",tasks:b.month}),_.isEmpty(b.due)||h.push({phase:"已过期",tasks:b.due}),_.isEmpty(b.other)||h.push({phase:"其它",tasks:b.other}),h}function load_my_uncompleted_task(){_.isEmpty(vm.uncompleted_tasks)&&(vm.part_loading_done=!1,wt.data.task.get_for_uncompleted(function(a){resortTasksForGroup(a.data)},null,function(){vm.loaded=!0,vm.part_loading_done=!0,vm.isListed=!0}))}function load_my_completed_task(){vm.part_loading_done=!1,wt.data.task.get_for_completed(vm.page,function(a){vm.page++,_.isEmpty(a.data)||(_.isEmpty(vm.completed_tasks)?vm.completed_tasks=a.data:vm.completed_tasks=vm.completed_tasks.concat(a.data)),a.data.length<kzi.config.default_count&&(vm.has_more_completed_tasks=!1)},null,function(){vm.part_loading_done=!0})}function init(){vm.isTaskList?loadAllBoardList():load_my_uncompleted_task()}var vm=$scope.vm={loaded:!1,taskAll:[],taskArrays:[[],[],[],[]],currentTask:{},isTaskList:null!==kzi.localData.get("isTaskList")?eval(kzi.localData.get("isTaskList")):!0,task_tab:"uncompleted",page:1,has_more_completed_tasks:!0,isBoarded:!1,isListed:!1};$rootScope.global.title="我的任务 | 工作台";var resortTasksForBoard=function(a){if(vm.taskAll=a.sort(wt.bus.task.compare_task),vm.taskArrays=[[],[],[],[]],$(vm.taskAll).each(function(a,b){var c=b.mark;c>0&&vm.taskArrays[c-1].push(b)}),vm.taskArrays[0].length>0){vm.sortArray=group_tasks(vm.taskArrays[0]);var b=[];vm.sortArray.length>0&&($(vm.sortArray).each(function(a,c){$(c.tasks).each(function(a,c){b.push(c)})}),vm.taskArrays.splice(0,1,b))}},resortTasksForGroup=function(a){vm.uncompleted_tasks=a.sort(wt.bus.task.compare_task),vm.group_tasks=group_tasks(vm.uncompleted_tasks)},updateTask=function(a,b){a.name=b.name,a.desc=b.desc,a.pos=b.pos,a.completed=b.completed,a.is_expire=b.is_expire,a.expire_date=b.expire_date,a.badges=b.badges,a.labels=b.labels,a.members=b.members,a.watchers=b.watchers,a.todos=b.todos};vm.remove_task=function(a){if(a){var b,c=a.tid;if($(vm.taskAll).each(function(c,d){d.tid===a.tid&&(b=d)}),!_.isUndefined(b)){var d=b.mark;_.remove(vm.taskArrays[d-1],function(a){return a.tid===c})}_.remove(vm.taskAll,function(a){return a.tid===c})}if(a){var c=a.tid;_.each(vm.group_tasks,function(a){a.tasks=_.filter(a.tasks,function(a){return a.tid!=c})})}},vm.tasks_sort_options={appendTo:".layout_content_main:last",helper:"clone",revert:10,containment:".layout_content_main",connectWith:".entry-tasks",placeholder:"wt-task-placeholder",tolerance:"pointer",dropOnEmpty:!0,delay:"75",over:function(a,b){},start:function(a,b){$(".wt-task-placeholder").css({height:b.item.outerHeight()}),b.item.addClass("picked-up");var c=b.item.attr("task-id");vm.currentTask=_.findWhere(vm.taskAll,{tid:c})},stop:function(a,b){$scope.$apply(function(){var a=b.item,c=parseInt(a.parent().attr("mark")),d=vm.currentTask.mark;if(vm.currentTask.mark=c,_.remove(vm.taskArrays[d-1],function(a){return a.tid===vm.currentTask.tid}),c!==d){var e=a.parent().find(".task");e.length>0&&(vm.taskArrays[c-1]=[],$(e).each(function(a,b){var d=$(b).attr("task-id"),e=_.findWhere(vm.taskAll,{tid:d});vm.taskArrays[c-1].push(e)})),wt.data.task.drop_dashboard_task(vm.currentTask.pid,vm.currentTask.tid,c,function(a){200===a.code},null,null)}else{var f=b.item.next().attr("task-id");if(f){var g=_.findIndex(vm.taskArrays[c-1],function(a){return a.tid==f});vm.taskArrays[c-1].splice(g,0,vm.currentTask)}else vm.taskArrays[c-1].push(vm.currentTask)}}),b.item.removeClass("picked-up")},update:function(a,b){}},$scope.js_open_task_detail=function(a,b,c){locator.openTask(b.pid,b.tid,null)},$scope.js_complete_task=function(a,b,c){if($rootScope.global.prj_module.crud){a.stopPropagation();var d=c.tid,e=c.pid;0===c.completed&&wt.data.task.complete(e,d,function(a){200===a.code&&(c.completed=1,$timeout(function(){vm.remove_task(c)},300))})}},$scope.js_toggle_tasklist=function(a){vm.isTaskList=a,kzi.localData.set("isTaskList",a),vm.isTaskList?vm.isBoarded||loadAllBoardList():vm.isListed||load_my_uncompleted_task()},vm.change_top_tab=function(a){vm.task_tab=a,"completed"===vm.task_tab&&(vm.page=1,vm.has_more_completed_tasks=!0,vm.completed_tasks=[],load_my_completed_task()),"uncompleted"===vm.task_tab&&load_my_uncompleted_task()},$scope.load_more_completed_tasks=function(){load_my_completed_task()},$scope.$on(kzi.constant.event_names.on_task_trash,function(a,b){vm.remove_task(b)}),$scope.$on(kzi.constant.event_names.on_task_complete,function(a,b,c){b.completed&&vm.remove_task(b)}),$scope.$on(kzi.constant.event_names.on_task_move,function(a,b){}),$scope.$on(kzi.constant.event_names.on_task_update,function(a,b,c){var d=_.find(b.members,{uid:$rootScope.global.me.uid});if(vm.isTaskList){var e=_.find(vm.taskAll,{tid:b.tid});e&&!d?(_.remove(vm.taskAll,{tid:b.tid}),resortTasksForBoard(vm.taskAll)):!e&&d?(b.mark=1,vm.taskAll.push(b),resortTasksForBoard(vm.taskAll)):e&&d&&updateTask(e,b)}else{var e=_.find(vm.uncompleted_tasks,{tid:b.tid});e&&!d?(_.remove(vm.uncompleted_tasks,{tid:b.tid}),resortTasksForGroup(vm.uncompleted_tasks)):!e&&d?(b.mark=1,vm.uncompleted_tasks.push(b),resortTasksForGroup(vm.uncompleted_tasks)):e&&d&&updateTask(e,b)}}),$scope.$on(kzi.constant.event_names.on_task_assign,function(a,b){vm.isTaskList?_.find(vm.taskArrays[0],{tid:b.tid})||vm.taskArrays[0].push(b):_.find(vm.uncompleted_tasks,{tid:b.tid})||(vm.uncompleted_tasks.push(b),vm.group_tasks=group_tasks(vm.uncompleted_tasks))}),init()}angular.module("wt.dashboard.ctrl").controller("dashboardTaskCtrl",dashboardTaskCtrl),dashboardTaskCtrl.$inject=["$rootScope","$scope","$location","locator","globalDataContext","$timeout"]}(),function(){"use strict";function a(a,b,c,d,e){var f=b.vm={teams:e.teams,projects:e.projects,archived_projects:[],fav_projects:[],isFav:!1,isArchive:!1};a.global.title="项目",a.global.loading_done=!0,b.part_loading_done=!1,wt.data.project.get_all("archive",function(a){200===a.code&&(f.archived_projects=a.data)},angular.noop,function(){b.part_loading_done=!0}),wt.data.project.get_favorite(function(a){200===a.code&&(f.fav_projects=a.data)},angular.noop,function(){b.part_loading_done=!0});var g=function(a,b,c,d,g){var h=f.projects;if("0"===a)h=f.projects;else if("1"===a){var i=_.findWhere(f.teams,{team_id:g});h=i.projects}var j=null,k=null;if(_.isEmpty(d)||(j=_.findWhere(h,{pid:d})),_.isEmpty(c)||(k=_.findWhere(h,{pid:c})),j||k){var l=wt.bus.project.calculate_prj_pos(k,j),m=_.findWhere(h,{pid:b});m.pos=l,wt.data.project.prj_position(b,l,function(a){f.projects=_.sortBy(f.projects,function(a){return a.pos}),e.resortProjects()})}};b.project_sort_options={containment:".projects-panel",placeholder:"project-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",disabled:!1,accept:".project-item",start:function(a,b){b.helper.addClass("project-picked-up"),$(".project-placeholder").css({height:b.item.css("height"),width:b.item.css("width")})},stop:function(a,b){var c=b.item.attr("pid"),d=b.item.attr("tid"),e=b.item.attr("type"),f=b.item.prev().attr("pid"),h=b.item.next().attr("pid");g(e,c,f,h,d)}},b.toogleFaver=function(a,b){f.isFav=a},b.toogleArchive=function(a,b){f.isArchive=a,setTimeout(function(){a&&$(".mCustomScrollbar").mCustomScrollbar("scrollTo","bottom")},50)}}angular.module("wt.dashboard.ctrl").controller("dashboardProjectsCtrl",a),a.$inject=["$rootScope","$scope","$location","locator","globalDataContext"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){return b.global.prj_module.crud&a.entity.permission?void(a.pop_member_options=[{name:"从任务移除",ongoing:"移除中...",click:function(a,c,d,e){d.assigned=!0,wt.bus.member.set_task_member_toggle(o.pid,o.task,d,function(){d.setting_toggle_member=!1,b.$broadcast(kzi.constant.event_names.on_task_update,o.task),d.assigned=!1},null,e)}}]):void(a.pop_member_options=null)}function l(){b.global.prj_module.crud&a.entity.permission?a.pop_watcher_options=[{name:"取消关注",ongoing:"取消中...",click:function(a,b,c,d){wt.bus.watch.unwatch(o.pid,o.task,kzi.constant.xtype.task,o.task.tid,c,function(){},null,d)}}]:a.pop_watcher_options=null}var m,n,o=a.vm={pid:"",task:{},temp:{},new_todo:{temp_name:"",is_saving:!1},todo_atwho_members:[],uploadlink_url:"",uploadlink_option:{url:function(){return[kzi.config.box_url(),"uploadbylink","?pid="+o.pid,"&token="+kzi.get_cookie("sid")].join("")}}},p=function(c){o.task={},a.entity_not_found_msg="",m=c.xid,o.pid=c.pid,g.loadTask(o.pid,c.xid,function(c){return o.task=c,c?($(".slide-content > :visible").find("a").blur(),i.task.tid===c.tid?o.temp=i.task:o.temp=i.task={tid:o.task.tid,name:o.task.name,desc:o.task.desc,is_edit:!1},a.project&&(o.todo_atwho_members=_.filter(a.project.members,function(a){return 1===a.status})),a.entity.permission=a.project.permission,b.global.prj_module.view&a.entity.permission&&(c.archived||c.is_deleted)&&(a.entity.permission=kzi.constant.prj_permission.viewer),kzi.constant.prj_module.crud&a.entity.permission&&t(),kzi.constant.prj_module.crud&a.entity.permission&&t(),l(),k(),b.global.me.watched=_.pluck(o.task.watchers,"uid").indexOf(b.global.me.uid)>=0,e(function(){o.task=r(o.task),s(),a.$broadcast(kzi.constant.event_names.select_comment_tab)}),e(function(){$(document.body).on("mousedown",".atwho-container",function(a){a.stopPropagation(),a.preventDefault()})}),void wt.data.file.get_attach_list(o.pid,"tasks",o.task.tid,function(a){a.data&&a.data.length>0&&(_.each(a.data,function(a){a.icon=kzi.helper.build_file_icon(a)}),o.task.files=a.data)})):(a.entity.loading_done=!0,void(a.entity.permission=kzi.constant.prj_permission.deny))},function(b){b.code===kzi.statuses.task_error.not_found.code?(a.entity.permission=kzi.constant.prj_permission.deny,a.entity.not_found_msg="你访问的任务不存在或者被彻底删除。"):a.entity.permission=kzi.constant.prj_permission.deny},function(){a.entity.loading_done=!0})};a.$on("$destroy",function(){$(document.body).off("mousedown",".atwho-container")});var q=function(a,c,d){var e=0;_.isEmpty(a.todos)||(e=_.max(a.todos,function(a){return a.pos}).pos);var f=c.temp_name.split(/\n/),g=0;f.forEach(function(c){e+=kzi.config.default_pos,""!==c&&wt.data.task.add_todo(o.pid,m,c,e,function(b){a.todos.push(b.data),a.todos=_.sortBy(a.todos,function(a){return a.pos})},null,function(){g++,g===f.length&&_.isFunction(d)&&(a=r(a),b.$broadcast(kzi.constant.event_names.on_task_update,a),d())})}),c.temp_name=""},r=function(a){a.todos||(a.todos=[]);var b=_.size(a.todos),c=_.size(_.where(a.todos,{checked:1}));return b>0?(a.percentage=parseInt(c/b*100,10),a.status=c+"/"+b):a.percentage=0,a.badges||(a.badges={}),a.badges.todo_checked_count=c,a.badges.todo_count=b,a},s=function(){_.isEmpty(o.task.todos)||(o.task.todos=_.sortBy(o.task.todos,function(a){return a.pos}))},t=function(){a.todo_sort_options={containment:".task-todos",placeholder:"todo-placeholder",helper:"clone",revert:10,dropOnEmpty:!0,tolerance:"pointer",distance:"4",delay:"75",disabled:!1,start:function(a,b){$(".todo-placeholder").css({height:b.item.outerHeight()+10})},stop:function(a,b){var c=b.item.attr("todo-id"),d=_.findWhere(o.task.todos,{todo_id:c}),e=b.item.prev().attr("todo-id"),f=b.item.next().attr("todo-id"),g=0;if(_.isEmpty(e)){var h=_.findWhere(o.task.todos,{todo_id:f});g=h.pos/2+1}else if(_.isEmpty(f)){var i=_.findWhere(o.task.todos,{todo_id:e});g=i.pos+kzi.config.default_pos+1}else{var h=_.findWhere(o.task.todos,{todo_id:f}),i=_.findWhere(o.task.todos,{todo_id:e});g=(h.pos+i.pos)/2+1}d.pos!==g&&(d.pos=g,wt.data.task.update_todo_pos(o.pid,o.task.tid,d.todo_id,g,function(a){s()}))}}};o.show_task_move_dialog=function(a,c){d.popbox({target:a,templateUrl:"/tpl/project/task/pop_move_task.html",controller:["$scope","popbox","task","globalDataContext",function(a,c,d,e){a.popbox=c,a.task_move={},a.task_move.move_to_prj={},a.task_move.from_entry={},a.is_task_moving=!1,a.task_move.projects=e.getPacketProjects(),a.task_move.move_to_prj=_.find(a.task_move.projects,function(a){return a.pid===o.pid}),a.handle_move_to_prj_change=function(){e.loadEntries(a.task_move.move_to_prj.pid,function(b){a.task_move.entries=b,a.task_move.move_to_prj.pid==d.pid?(a.task_move.move_to_entry=_.find(a.task_move.entries,function(a){return a.entry_id===d.entry_id}),a.task_move.from_entry=_.find(a.task_move.entries,function(a){return a.entry_id===d.entry_id})):a.task_move.move_to_entry=a.task_move.entries[0]})},a.handle_move_to_prj_change(),a.js_close=function(){c.close()},a.move_task=function(){if(a.task_move.move_to_prj.pid===o.pid){if(a.task_move.move_to_entry.entry_id==a.task_move.from_entry.entry_id)return;a.is_task_moving=!0;var c=0;a.task_move.move_to_entry.tasks&&a.task_move.move_to_entry.tasks.length>0&&(c=_.max(a.task_move.move_to_entry.tasks,function(a){return a.pos}).pos+kzi.config.default_pos+1),wt.data.task.change_entry(o.pid,d.tid,a.task_move.from_entry.entry_id,a.task_move.move_to_entry.entry_id,c,function(){a.is_task_moving=!1,d.entry_id=a.task_move.move_to_entry.entry_id,d.entry_name=a.task_move.move_to_entry.name,b.$broadcast(kzi.constant.event_names.on_task_move,{task:d,from_entry_id:a.task_move.from_entry.entry_id}),a.js_close()})}else{if(a.is_task_moving=!0,_.isEmpty(a.task_move.move_to_entry))return void(a.is_task_moving=!1);wt.data.task.move(o.pid,d.tid,a.task_move.move_to_prj.pid,a.task_move.move_to_entry.entry_id,function(){e.cache.task.del(d.tid),b.$broadcast(kzi.constant.event_names.on_task_trash,d),h.close()},function(){kzi.msg.error("移动任务失败")},function(){a.is_task_moving=!1,a.js_close()})}}}],resolve:{task:function(){return c}}}).open()},o.js_timingtask=function(a,b){d.popbox({target:a,template:'<wt-add-timingtask close="vm.js_close()" isback="false" entries="vm.entries" task="vm.task"></wt-add-timingtask>',controller:["$scope","popbox",function(a,c){a.popbox=c;var d=a.vm={task:b,entries:null};g.loadEntries(b.pid,function(a){d.entries=a}),d.js_close=function(){c.close()}}]}).open()},o.js_show_copy=function(a,c){d.popbox({target:a,templateUrl:"/tpl/project/task/pop_copy_task.html",controller:["$scope","popbox",function(a,d){a.popbox=d,a.new_task=wt.bus.task.get_copy_task(c),
a.js_copy_task=function(c){_.isEmpty(c.name)||(a.is_copying=!0,wt.data.task.copy_task(o.pid,c.tid,c.name,0,c.keep_comments,c.keep_members,c.keep_labels,c.keep_attachments,c.keep_todos,c.keep_watchers,function(c){a.js_close(),g.cache.task.add(c.data),b.$broadcast(kzi.constant.event_names.on_task_add,{task:c.data})},null,function(){a.is_copying=!1}))},a.js_close=function(){d.close()}}]}).open()},o.js_trash=function(a,c){d.popbox({target:a,templateUrl:"/tpl/project/task/pop_delete_task.html",controller:["$scope","popbox",function(a,d){a.popbox=d,a.js_close=function(){d.close()},a.js_delete_task=function(){wt.data.task.trash(o.pid,m,function(){c.is_deleted=1,g.cache.task.del(c.tid),b.$broadcast(kzi.constant.event_names.on_task_trash,c),h.close(),d.close()})}}]}).open()},o.js_archive=function(){wt.data.task.archive(o.pid,m,function(){g.cache.task.archive(m),b.$broadcast(kzi.constant.event_names.on_task_archive,m),h.close()})},o.js_complete_task=function(c){b.global.prj_module.crud&a.entity.permission&&(c.completed?(c.completed=0,wt.data.task.uncomplete(o.pid,m,function(){b.$broadcast(kzi.constant.event_names.on_task_complete,c)})):(c.completed=1,wt.data.task.complete(o.pid,m,function(){b.$broadcast(kzi.constant.event_names.on_task_complete,c)})))},a.$on(kzi.constant.event_names.load_entity_task,function(a,b){p(b)}),a.$on(kzi.constant.event_names.on_task_complete,function(a,b){b.tid===o.task.tid&&(o.task.completed=b.completed)}),a.$on(kzi.constant.event_names.on_task_archive,function(b,c){c==m&&(o.task.archived=1,a.entity.permission=kzi.constant.prj_permission.viewer)}),a.$on(kzi.constant.event_names.on_task_trash,function(b,c){c.tid===o.task.tid&&(o.task.is_deleted=1,a.entity.permission=kzi.constant.prj_permission.viewer)}),a.$on(kzi.constant.event_names.on_task_comment,function(a,c){c.tid===o.task.tid&&(o.task.badges.comment_count+=1,b.$broadcast(kzi.constant.event_names.on_task_update,o.task))}),a.$on(kzi.constant.event_names.on_task_badges_file,function(a,b){o.task.tid===b.file.formData.tid&&(_.isArray(o.task.files)?o.task.files.push(b.file):o.task.files=[b.file],_.isArray(o.task.files)&&(o.task.badges.file_count=o.task.files.length))}),a.$on(kzi.constant.event_names.on_task_badges_check,function(a,b){o.task&&b.tid===o.task.tid&&r(o.task)}),a.$on(kzi.constant.event_names.shortcut_key_to_edit,function(a){_.isEmpty(o.task)||o.js_show_editor(o.task)}),a.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(a){o.temp.is_edit?o.js_cancel_editor(o.task):h.isOpened&&h.close()}),o.js_show_editor=function(c){b.global.prj_module.crud&a.entity.permission&&(o.temp.is_edit=!0,_.isEmpty(o.temp.name)&&(o.temp.name=c.name),_.isEmpty(o.temp.desc)&&(o.temp.desc=c.desc))},o.js_cancel_editor=function(a){o.temp.is_edit=!1,a.shouldBeOpen=!1,o.temp.name="",o.temp.desc=""},o.js_set_update=function(a,c){if(c.is_saving!==!0){if(_.isEmpty(o.temp.name))return void(o.temp.name=c.name);c.is_saving=!0,wt.data.task.update(o.pid,m,o.temp.name,o.temp.desc,function(){o.temp.is_edit=!1,c.name=o.temp.name,c.desc=o.temp.desc,o.temp.name="",o.temp.desc="",b.$broadcast(kzi.constant.event_names.on_task_update,c)},function(a){switch(1*a.code){case 7045:kzi.msg.error("任务名称超过了限制长度");break;case 7046:kzi.msg.error("任务描述超过了限制长度");break;default:kzi.msg.error("保存失败")}},function(){c.is_saving=!1})}},o.js_show_datepicker=function(c,e){a.project&&1===a.project.archived||1!==e.archived&&d.popbox({target:c,templateUrl:"/tpl/common/pop_datepicker.html",controller:["$scope","popbox",function(a,c){a.popbox=c,e.expire_date?e.expire_date_temp=moment(e.expire_date).format("YYYY-MM-DD"):e.expire_date_temp=moment().format("YYYY-MM-DD"),a.task=e,a.js_close=function(){c.close()},a.js_today=function(){var b=moment().format("YYYY-MM-DD");a.set_expire(b)},a.js_tomorrow=function(){var b=moment().add(1,"days").format("YYYY-MM-DD");a.set_expire(b)},a.js_week=function(){var b=moment().endOf("week").format("YYYY-MM-DD");a.set_expire(b)},a.js_next_week=function(){var b=moment().add(7,"days").endOf("week").format("YYYY-MM-DD");a.set_expire(b)},a.js_month=function(){var b=moment().endOf("month").format("YYYY-MM-DD");a.set_expire(b)},a.js_set_expire=function(b){a.set_expire(b)},a.js_cancel_expire=function(){e.expire_date=0,e.badges.expire_date=0,wt.data.task.set_expire(o.pid,m,0,function(a){}),b.$broadcast(kzi.constant.event_names.on_task_update,e),c.close()},a.set_expire=function(a){var d=moment(a).endOf("day").valueOf();wt.data.task.set_expire(o.pid,m,d,function(a){e.expire_date=d,b.$broadcast(kzi.constant.event_names.on_task_update,e),c.close()})}}]}).open()},o.js_show_todo=function(a){a.is_todo_edit=!0,a.is_add_todo_edit=!0},o.js_cancel_todo_editor=function(a){a.is_todo_edit=!1},o.js_show_todo_editor=function(c){b.global.prj_module.crud&a.entity.permission&&(c.is_todo_edit=!0,n=c.name)},o.js_show_add_todo_editor=function(a){a.is_add_todo_edit=!0},o.js_cancel_add_todo_editor=function(a){a.is_todo_edit=!1,a.is_add_todo_edit=!1},o.js_add_todo=function(a,b){return _.isUndefined(b)||_.isUndefined(b.temp_name)||_.isEmpty(b.temp_name)?void(a.is_add_todo_edit=!1):(b.is_saving=!0,void q(a,b,function(){$(".new-todo-control").find("textarea").focus(),b.is_saving=!1}))},o.js_save_todo=function(a,b){return _.isEmpty(b.name)?(b.is_todo_edit=!1,void(b.name=n)):n===b.name?void(b.is_todo_edit=!1):(b.is_saving=!0,void wt.data.task.update_todo(o.pid,m,b.todo_id,b.name,b.pos,function(a){b.name=a.data.name},null,function(){b.is_saving=!1,b.is_todo_edit=!1}))},o.js_keydown_edit_todo=function(a,b,c){if(!a.isPropagationStopped()){var d=a.which||a.keyCode;d===kzi.constant.keyASCIIs.ESC?(o.js_cancel_todo_editor(c),a.stopPropagation()):d===kzi.constant.keyASCIIs.ENTER&&o.js_save_todo(a,c),a.preventDefault()}},o.js_keydown_add_todo=function(a,b,c){if(!a.isPropagationStopped()){var d=a.which||a.keyCode;d===kzi.constant.keyASCIIs.ESC?(o.js_cancel_add_todo_editor(b),a.stopPropagation()):d===kzi.constant.keyASCIIs.ENTER&&o.js_add_todo(b,c),a.preventDefault()}},o.js_remove_label=function(a){o.task.labels=_.reject(o.task.labels,function(b){return b.name===a.name}),wt.data.task.del_labels(o.pid,m,a.name,function(){})},o.js_del_todo=function(a,c){a.todos=_.reject(a.todos,function(a){return a.todo_id===c.todo_id}),wt.data.task.del_todo(o.pid,m,c.todo_id,function(a){}),a=r(a),0===a.todos.length&&(a.is_todo_edit=!1),c.is_todo_edit=!1,0===a.todos.length&&(a.is_todo_edit=!1),b.$broadcast(kzi.constant.event_names.on_task_update,a)},o.js_complete_todo=function(c,d){if(b.global.prj_module.crud&a.entity.permission){var e=d.todo_id;d.checked?(d.checked=0,wt.data.task.uncomplete_todo(o.pid,m,e,function(a){})):(d.checked=1,wt.data.task.complete_todo(o.pid,m,e,function(a){})),c=r(c),b.$broadcast(kzi.constant.event_names.on_task_update,c)}},o.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(o.pid,c,kzi.constant.xtype.task,c.tid,b)},o.js_watch_all=function(a,b,c,d){wt.bus.watch.watch_all(o.pid,c,kzi.constant.xtype.task,c.tid,b,null,null,d)},o.js_toggle_member=function(a,c,d){wt.bus.member.set_task_member_toggle(o.pid,d,c,function(){b.$broadcast(kzi.constant.event_names.on_task_update,d)})},o.js_assign_label=function(b,c){var e=a;d.popbox({target:b,template:'<wt-set-task-labels task="task" project="project"></wt-set-task-labels>',controller:["$scope","popbox",function(a,b){a.popbox=b,a.task=c,a.project=e.project}]}).open()},o.js_show_entry_menu=function(c,e){c.stopPropagation(),d.popbox({target:c,templateUrl:"/tpl/project/task/pop_unarchive_task.html",controller:"popUnarchiveTaskCtrl",resolve:{pop_data:function(){return{scope:a,task:e,fnSuccess:function(a){b.$broadcast(kzi.constant.event_names.on_task_unarchived,a),h.close()}}}}}).open()},a.$on(kzi.constant.event_names.on_pastefile_to_task,function(a,b){o.js_files_select(b)}),a.$on(kzi.constant.event_names.on_file_add,function(a,b){b&&"task"===b.type&&b.ext.tid===o.task.tid&&(_.isArray(o.task.files)?o.task.files.push(b.file):o.task.files=[b.file],o.task.badges.file_count=o.task.files.length)}),o.js_uploadbylink_uploading=!1,o.js_uploadbylink=function(a){if(_.isEmpty(o.uploadlink_url)||!kzi.validator.isUrl(o.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),void $(a.target).prev().focus();o.js_uploadbylink_uploading=!0;var b=_.extend({link:escape(o.uploadlink_url)},{target:"prj",type:"task",pid:o.pid,tid:o.task.tid});wt.data.file.uploadlink(o.uploadlink_option.url(),b,function(b){8100===b.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200===b.code&&f.file.new_upload(b,function(){o.uploadlink_url="",$(a.target).parents(".open").removeClass("open"),kzi.msg.info("链接文件上传成功")})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){o.js_uploadbylink_uploading=!1})},o.js_go_to_file=function(a,b){c.path("/project/"+a+"/task"),h.openFile(a,b)},o.js_del_attachment=function(a,c){o.task.badges.file_count--;var d=_.findWhere(o.task.files,{fid:c.fid});d&&(o.task.files=_.reject(o.task.files,function(a){return a.fid===c.fid})),wt.data.file.detach(o.pid,"tasks",m,c.fid),b.$broadcast(kzi.constant.event_names.on_task_update,o.task)},o.js_go_to_tasks=function(){b.global.leftmenu_current_expand="",h.close(),c.path("/project/"+o.pid+"/task",{reload:!0})},o.js_files_select=function(b){if(0!==b.length){var c=[];_.forEach(b,function(b){c.push({original:b,data:{target:"prj",type:"task",pid:a.project.pid,tid:o.task.tid}})}),j.addFiles(a.project.pid,c,function(a,b){b&&b.file&&"task"===b.type&&(_.isArray(o.task.files)?o.task.files.push(b.file):o.task.files=[b.file],o.task.badges.file_count=o.task.files.length)})}}}angular.module("wt.task.ctrl",[]).controller("entityTaskCtrl",a),a.$inject=["$scope","$rootScope","$location","$popbox","$timeout","bus","globalDataContext","locator","tempData","$wtUploadFile"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j=a.vm={pid:"",event_id:"",event:{},temp_event:{},eventTitleInputFocus:!1,repeat_intervals:kzi.constant.event_repeat_intervals,update:{options_for_recurring_event:[{key:kzi.constant.event_update_type.one,desc:"只应用于当前日程"},{key:kzi.constant.event_update_type.follow_up,desc:"应用于当前和之后所有日程"}]},uploadlink_url:"",uploadlink_option:{url:function(){return[kzi.config.box_url(),"uploadbylink","?pid="+j.pid,"&token="+kzi.get_cookie("sid")].join("")}}};j.update.option=j.update.options_for_recurring_event[0];var k=function(){j.tempEvent.start_date=moment(j.event.start.date).format("YYYY-MM-DD"),j.tempEvent.end_date=moment(j.event.end.date).format("YYYY-MM-DD"),j.tempEvent.start_hour=moment(j.event.start.date).format("HH"),j.tempEvent.start_minute=moment(j.event.start.date).format("mm"),j.tempEvent.end_hour=moment(j.event.end.date).format("HH"),j.tempEvent.end_minute=moment(j.event.end.date).format("mm")};j.js_files_select=function(b){if(b&&0!==b.length){var c=[];_.forEach(b,function(a){c.push({original:a,data:{target:"prj",type:"event",pid:j.pid,event_id:j.event.event_id}})}),g.addFiles(a.project.pid,c,function(a,b){b&&b.file&&"event"===b.type&&(_.isArray(j.event.files)?j.event.files.push(b.file):j.event.files=[b.file])})}};var l=function(){j.tempEvent=angular.copy(e.event)},m=function(){j.event.show_start_date=kzi.util.datetimeToDTW(j.event.start.date),j.event.show_end_date=kzi.util.datetimeToDTW(j.event.end.date)};a.$on(kzi.constant.event_names.on_event_update_date,function(a,b){j.event.show_start_date=kzi.util.datetimeToDTW(b.start_date),j.event.show_end_date=kzi.util.datetimeToDTW(b.end_date)}),a.$on(kzi.constant.event_names.on_slide_hide,function(){b.locator.type===kzi.constant.entity_type.event&&(a.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:j.pid,xid:j.event_id,xtype:kzi.constant.xtype.event}),j.event.is_edit?j.event={is_edit:j.event.is_edit,event_id:j.event.event_id}:j.event={})}),a.$on(kzi.constant.event_names.load_entity_event,function(c,d){_.isEmpty(d.pid)||_.isEmpty(d.xid)||(j.pid=d.pid,j.event_id=d.xid,j.temp_event.event_id!==d.event_id&&(j.temp_event.name=""),h.loadEvent(j.pid,j.event_id,function(c){j.event=c,e.event.event_id===c.event_id?(j.tempEvent=e.event,k()):(j.tempEvent=e.event=angular.copy(c),k()),j.new_repeat_interval=_.findWhere(j.repeat_intervals,{key:j.tempEvent.recurrence}),a.part_loading_done=!0,a.entity.permission=a.project.permission,b.global.prj_module.view&a.entity.permission&&j.tempEvent.is_deleted&&(a.entity.permission=kzi.constant.prj_permission.viewer),m(),j.set_pop_attendee_options(),j.start_date_options={default_date:moment(j.tempEvent.start_date).format("YYYY-MM-DD"),set_date:function(a){j.tempEvent.start_date=moment(a).format("YYYY-MM-DD"),j.start_date_options.default_date=j.tempEvent.start_date,j.end_date_options.min_date=moment(j.tempEvent.start_date).format("YYYY-MM-DD")}},j.end_date_options={default_date:moment(j.tempEvent.end_date).format("YYYY-MM-DD"),min_date:moment(j.tempEvent.start_date).format("YYYY-MM-DD"),set_date:function(a){j.tempEvent.end_date=moment(a).format("YYYY-MM-DD"),j.end_date_options.default_date=j.tempEvent.end_date,n()}},a.$broadcast(kzi.constant.event_names.select_comment_tab),j.event.is_edit===!0&&(j.eventTitleInputFocus=!0)},function(b){b.code===kzi.statuses.event_error.not_found.code?(a.entity.not_found_msg="你访问的日程不存在或者被彻底删除。",a.entity.permission=kzi.constant.prj_permission.deny):a.entity.permission=kzi.constant.prj_permission.deny},function(){a.entity.loading_done=!0}))}),a.$on(kzi.constant.event_names.shortcut_key_to_edit,function(a){f.xtype!==kzi.constant.xtype.event||_.isEmpty(j.event)||j.js_show_editor()}),a.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(a){f.xtype===kzi.constant.xtype.event&&(j.tempEvent.is_edit===!0?j.js_cancel_editor():f.isOpened&&f.close())}),j.js_show_trash=function(a,d){c.popbox({target:a,templateUrl:"/tpl/project/event/pop_delete_event.html",controller:["$scope","popbox",function(a,c){a.popbox=c,a.is_repeat_event=0!==d.recurrence,a.del={},a.del.del_option=1,a.js_close=function(){c.close()},a.js_delete_event=function(){a.is_deleting=!0,wt.data.event.trash(j.pid,d.event_id,a.del.del_option,function(e){f.close(),d.is_deleted=1;var g=_.findWhere(h.projects,{pid:d.pid});g&&(g.is_calendar=e.data.is_calendar),b.$broadcast(kzi.constant.event_names.on_event_trash,d,a.del.del_option),c.close()},null,function(){a.is_deleting=!1})}}]}).open()};var n=function(){var a=j.tempEvent.start_date,b=j.tempEvent.start_minute,c=j.tempEvent.start_hour;j.tempEvent.end_date<=a?(j.tempEvent.end_date=j.tempEvent.start_date,j.tempEvent.start_hour>=j.tempEvent.end_hour?(j.tempEvent.end_hour=j.tempEvent.start_hour,j.tempEvent.end_minute<=j.tempEvent.start_minute&&(j.tempEvent.end_minute=j.tempEvent.start_minute),j.end_minute_sections=_.filter(kzi.constant.all_minute_sections,function(a){return a>=b}),j.end_hour_sections=_.filter(kzi.constant.all_hour_sections,function(a){return a>=c})):(j.end_hour_sections=_.filter(kzi.constant.all_hour_sections,function(a){return a>=c}),j.end_minute_sections=kzi.constant.all_minute_sections)):(j.end_hour_sections=kzi.constant.all_hour_sections,j.end_minute_sections=kzi.constant.all_minute_sections)};j.start_hour_sections=kzi.constant.all_hour_sections,j.start_minute_sections=kzi.constant.all_minute_sections,a.$watch("[vm.tempEvent.start_date, vm.tempEvent.start_hour, vm.tempEvent.start_minute]",function(a){_.isEmpty(j.tempEvent)||(n(),j.start_date_options.default_date=moment(j.tempEvent.start_date).format("YYYY-MM-DD"),j.end_date_options.default_date=moment(j.tempEvent.end_date).format("YYYY-MM-DD"),j.end_date_options.min_date=moment(j.tempEvent.start_date).format("YYYY-MM-DD"))},!0),a.$watch("vm.tempEvent.end_hour",function(a){_.isEmpty(j.tempEvent)||n()},!0),j.js_show_editor=function(){b.global.prj_module.crud&a.entity.permission&&(j.tempEvent.is_edit=!0,j.eventTitleInputFocus=!0)},j.js_cancel_editor=function(a){j.tempEvent.is_edit=!1,l(),k()},j.js_set_update=function(a,c,d){if(c.is_saving!==!0){if(_.isEmpty(d.name))return void(d.name=c.name);c.is_saving=!0,wt.data.event.update(j.pid,c.event_id,d.name,d.summary,d.location,d.start_date,d.start_hour+":"+d.start_minute,d.end_date,d.end_hour+":"+d.end_minute,j.update.option.key,function(a){d.is_edit=!1,c.name=d.name,c.summary=d.summary,c.location=d.location,c.start.date=d.start_date+" "+d.start_hour+":"+d.start_minute,c.end.date=d.end_date+" "+d.end_hour+":"+d.end_minute,c.recurrence_id&&j.update.option.key===kzi.constant.event_update_type.one&&(c.recurrence_id="",c.recurrence=0,j.new_repeat_interval=_.findWhere(j.repeat_intervals,{key:c.recurrence})),l(),k();var e=a.data&&a.data.recurrence_id?a.data.recurrence_id:null;b.$broadcast(kzi.constant.event_names.on_event_update,c,j.update.option.key,e),m()},null,function(){c.is_saving=!1})}},j.js_toggle_member=function(a,b,c){b.setting_toggle_member!==!0&&(b.setting_toggle_member=!0,wt.bus.member.set_event_attendees_toggle(j.pid,c,b,function(){},null,function(){b.setting_toggle_member=!1}))},j.js_attendee_all=function(a,b,c,d){wt.bus.member.event_attend_all(j.pid,c,b,null,null,d)},j.set_pop_attendee_options=function(){b.global.prj_module.crud&a.entity.permission?j.pop_attendee_options=[{name:"移除",ongoing:"移除中...",click:function(a,b,c,d){c.assigned=!0,wt.bus.member.set_event_attendees_toggle(j.pid,j.event,c,function(){c.assigned=!1},null,function(){c.setting_toggle_member=!1,d()})}}]:j.pop_attendee_options=null},a.$on(kzi.constant.event_names.on_pastefile_to_event,function(a,b){j.js_files_select(b)}),j.js_uploadbylink_uploading=!1,j.js_uploadbylink=function(a){if(_.isEmpty(j.uploadlink_url)||!kzi.validator.isUrl(j.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),void $(a.target).prev().focus();j.js_uploadbylink_uploading=!0;var b=_.extend({link:escape(j.uploadlink_url)},{target:"prj",type:"event",pid:j.pid,event_id:j.event.event_id});wt.data.file.uploadlink(j.uploadlink_option.url(),b,function(b){8100===b.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200===b.code&&d.file.new_upload(b,function(){j.uploadlink_url="",$(a.target).parents(".open").removeClass("open"),kzi.msg.info("链接文件上传成功")})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){j.js_uploadbylink_uploading=!1})},a.$on(kzi.constant.event_names.on_file_add,function(a,b){b&&"event"===b.type&&b.ext.event_id===j.event.event_id&&(_.isArray(j.event.files)?j.event.files.push(b.file):j.event.files=[b.file])}),j.js_go_to_file=function(a,b){i.path("/project/"+a+"/event"),f.openFile(a,b)},j.js_del_attachment=function(a,b){var c=_.findWhere(j.event.files,{fid:b.fid});c&&(j.event.files=_.reject(j.event.files,function(a){return a.fid===b.fid})),wt.data.file.detach(j.pid,kzi.constant.xtype.event,j.event.event_id,b.fid)}}angular.module("wt.event.ctrl",[]).controller("entityEventCtrl",a),a.$inject=["$scope","$rootScope","$popbox","bus","tempData","locator","$wtUploadFile","globalDataContext","$location"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){var i=a.vm={pid:"",post_id:"",token:kzi.get_cookie("sid"),post:{},temp:{},entity_not_found_msg:"",postEditFocus:!1,uploadlink_url:"",uploadlink_option:{url:function(){return[kzi.config.box_url(),"uploadbylink","?pid="+i.pid,"&token="+kzi.get_cookie("sid")].join("")}}},j=function(c){_.isEmpty(c.pid)||_.isEmpty(c.xid)||(i.pid=c.pid,i.post_id=g.xid,i.entity_not_found_msg="",i.post={},wt.data.post.get(i.pid,i.post_id,function(c){i.post=c.data,f.post.post_id===i.post_id?i.temp=f.post:i.temp=f.post={post_id:i.post.post_id,name:i.post.name,content:i.post.content,is_edit:!1},b.global.me.watched=_.pluck(i.post.watchers,"uid").indexOf(b.global.me.uid)>=0,i.post.is_edit===!0&&(i.postEditFocus=!0),a.entity.permission=a.project.permission,b.global.prj_module.view&a.entity.permission&&i.post.is_deleted&&(a.entity.permission=kzi.constant.prj_permission.viewer),a.$broadcast(kzi.constant.event_names.select_comment_tab),i.set_pop_watcher_options()},function(b){b.code===kzi.statuses.post_error.not_found.code?(a.entity.permission=kzi.constant.prj_permission.deny,a.entity.not_found_msg="你访问的话题不存在或者被彻底删除。"):a.entity.permission=kzi.constant.prj_permission.deny},function(){a.entity.loading_done=!0}))};a.$on(kzi.constant.event_names.load_entity_post,function(a,b){j(b)}),a.$on(kzi.constant.event_names.on_slide_hide,function(){a.locator.xtype===kzi.constant.xtype.post&&a.$broadcast(kzi.constant.event_names.clear_comment_activity)}),i.js_show_editor=function(){b.global.prj_module.crud&a.entity.permission&&(i.temp.is_edit=!0,i.postEditFocus=!0,_.isEmpty(i.temp.name)&&(i.temp.name=i.post.name),_.isEmpty(i.temp.content)&&(i.temp.content=i.post.content))},i.js_cancel_editor=function(a){i.temp.is_edit=!1,i.temp.name="",i.temp.content=""},i.js_update_post=function(a){i.is_setting_content=!0,_.isEmpty(i.temp.name)&&(i.temp.name=a.name),wt.data.post.update(i.pid,a.post_id,i.temp.name,i.temp.content,function(b){a.name=i.temp.name,a.content=i.temp.content,i.temp.is_edit=!1},null,function(){i.is_setting_content=!1,b.$broadcast(kzi.constant.event_names.on_post_update,a)})},i.js_trash=function(a,c){d.popbox({target:a,templateUrl:"/tpl/project/post/pop_delete_post.html",controller:["$scope","popbox",function(a,d){a.popbox=d,a.post=c,a.js_close=function(){d.close()},a.js_del_post=function(){wt.data.post.trash(i.pid,c.post_id,function(d){a.js_close(),g.close(),b.$broadcast(kzi.constant.event_names.on_post_trash,{post_id:c.post_id})})}}]}).open()},i.set_pop_watcher_options=function(){return b.global.prj_module.watch&a.entity.permission?void(i.pop_watcher_options=[{name:"取消关注",ongoing:"取消中...",click:function(a,b,c,d){wt.bus.watch.unwatch(i.pid,i.post,kzi.constant.xtype.post,i.post.post_id,c,function(){},null,d)}}]):void(i.pop_watcher_options=null)},i.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(i.pid,c,kzi.constant.xtype.post,c.post_id,b)},i.js_watch_all=function(a,b,c,d){wt.bus.watch.watch_all(i.pid,c,kzi.constant.xtype.post,c.post_id,b,null,null,d)},a.$on(kzi.constant.event_names.on_pastefile_to_post,function(a,b){i.js_files_select(b)}),a.$on(kzi.constant.event_names.on_post_comment,function(a,b){_.isEmpty(b)||b.post_id===i.post.post_id&&i.post.comment_count++}),a.$on(kzi.constant.event_names.shortcut_key_to_edit,function(){g.xtype!==kzi.constant.xtype.post||_.isEmpty(i.post)||i.js_show_editor(i.post)}),a.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(){g.xtype===kzi.constant.xtype.post&&(_.isEmpty(i.post)||i.temp.is_edit!==!0?g.isOpened&&g.close():wt.bus.mkEditor.checkClose()||i.js_cancel_editor(i.post))}),a.$on(kzi.constant.event_names.post_updated_by_editor,function(a,b){i.post.content=b.content,i.post.name=b.name}),i.js_uploadbylink_uploading=!1,i.js_uploadbylink=function(a){if(_.isEmpty(i.uploadlink_url)||!kzi.validator.isUrl(i.uploadlink_url))return kzi.msg.warn("链接错误，请检查链接有效性"),void $(a.target).prev().focus();i.js_uploadbylink_uploading=!0;var b=_.extend({link:escape(i.uploadlink_url)},{target:"prj",type:"post",pid:i.pid,post_id:i.post.post_id});wt.data.file.uploadlink(i.uploadlink_option.url(),b,function(b){8100===b.code&&kzi.msg.warn("链接上传失败，链接文件太大"),200===b.code&&e.file.new_upload(b,function(){i.uploadlink_url="",$(a.target).parents(".open").removeClass("open"),kzi.msg.info("链接文件上传成功")})},function(){kzi.msg.warn("链接上传失败，请检查链接有效性")},function(){i.js_uploadbylink_uploading=!1})},a.$on(kzi.constant.event_names.on_file_add,function(a,b){b&&"post"===b.type&&b.ext.post_id===i.post.post_id&&(_.isArray(i.post.files)?i.post.files.push(b.file):i.post.files=[b.file],i.post.attachments_count=i.post.files.length)}),i.js_go_to_posts=function(){g.close(),c.path("/project/"+i.pid+"/post",{reload:!0})},i.js_go_to_file=function(a,b){c.path("/project/"+a+"/post"),g.openFile(a,b)},i.js_del_attachment=function(a,c){var d=_.findWhere(i.post.files,{fid:c.fid});d&&(i.post.files=_.reject(i.post.files,function(a){return a.fid===c.fid})),wt.data.file.detach(i.pid,"posts",i.post_id,c.fid),b.$broadcast(kzi.constant.event_names.on_uploadfile_del_to_post,{post_id:i.post_id,file:c})},i.js_files_select=function(c){var d=[];_.forEach(c,function(a){d.push({original:a,data:{target:"prj",type:"post",pid:i.post.pid,post_id:i.post.post_id}})}),h.addFiles(a.project.pid,d,function(a,b){b&&b.file&&"post"===b.type&&(_.isArray(i.post.files)?i.post.files.push(b.file):i.post.files=[b.file])}),b.$broadcast(kzi.constant.event_names.on_uploadfile_add_to_post,{post_id:i.post_id,files:d})}}angular.module("wt.post.ctrl",[]).controller("entityPostCtrl",a),a.$inject=["$scope","$rootScope","$location","$popbox","bus","tempData","locator","$wtUploadFile"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){var h=a.vm={pid:"",fid:"",tokein:kzi.get_cookie("sid"),version_loading_done:!0,fileNameInputFocus:!1,file:{},tmpFile:{},pop_watcher_options:null};h.to_project=function(a){c.path("/project/"+a+"/file"),e.close()},a.$on(kzi.constant.event_names.on_slide_hide,function(){e.xtype===kzi.constant.xtype.file&&a.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:h.pid,xid:h.fid,xtype:kzi.constant.xtype.file}),h.file={}}),a.$on(kzi.constant.event_names.load_entity_file,function(c,d){if(!_.isEmpty(d.pid)&&!_.isEmpty(d.xid)){h.pid=d.pid,h.fid=d.xid,h.tmpFile=g.checkout("file",h.fid)||{},h.is_show_version=!1,h.entity_not_found_msg="";var e=function(c){wt.data.file.get(h.pid,h.fid,function(d){var e=d.data;e.in_edit=!1,e.icon=kzi.helper.build_file_icon(e),e.is_img="-1"===kzi.constant.get_file_icon(e),h.file=e,a.entity.permission=a.project.permission,kzi.constant.prj_module.view&a.entity.permission&&e.is_deleted&&(a.entity.permission=kzi.constant.prj_permission.viewer),a.$broadcast(kzi.constant.event_names.select_comment_tab),h.set_pop_watcher_options(),b.global.me.watched=_.pluck(e.watchers,"uid").indexOf(b.global.me.uid)>=0,wt.data.file.get_target(h.pid,h.fid,function(a){h.file.link_count=0,_.isEmpty(a.data.tasks)||(h.file.link_count=a.data.tasks.length),_.isEmpty(a.data.posts)||(h.file.link_count+=a.data.posts.length),_.isEmpty(a.data.events)||(h.file.link_count+=a.data.events.length),h.file.tasks=a.data.tasks,h.file.posts=a.data.posts,h.file.events=a.data.events,h.file.in_edit===!0&&(h.fileNameInputFocus=!0)},null,function(){c()})},function(b){b.code===kzi.statuses.file_error.not_found.code?(a.entity.permission=kzi.constant.prj_permission.deny,a.entity.not_found_msg="你访问的文件不存在或者被彻底删除。"):a.entity.permission=kzi.constant.prj_permission.deny},function(){a.entity.loading_done=!0})};e(function(){_.isEmpty(h.tmpFile)||!h.tmpFile.in_edit?(g.purge("file",h.fid),h.tmpFile={}):h.file.in_edit=!0})}}),h.js_files_select=function(b){var c=[];_.forEach(b,function(a){c.push({original:a,data:{target:"prj",type:"file",pid:h.file.pid,fid:h.file.fid}})}),f.addFiles(a.project.pid,c,function(a,b){b&&b.file&&"file"===b.type&&h.file.fid===b.file.formData.fid&&(h.file.icon=b.file.icon,h.file.path=b.file.path,h.file.size=b.file.size,h.file.update_date=b.file.update_date,h.file.update_user=b.file.update_user,h.file.dt=(new Date).getTime())})},a.$on(kzi.constant.event_names.on_pastefile_to_file,function(a,b){h.js_files_select(b)}),h.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(h.pid,c,kzi.constant.xtype.file,c.fid,b)},h.js_watch_all=function(a,b,c,d){wt.bus.watch.watch_all(h.pid,c,kzi.constant.xtype.file,c.fid,b,null,null,d)},h.set_pop_watcher_options=function(){b.global.prj_module.watch&a.entity.permission?h.pop_watcher_options=[{name:"取消关注",ongoing:"取消中...",click:function(a,b,c,d){wt.bus.watch.unwatch(h.pid,h.file,kzi.constant.xtype.file,h.file.fid,c,function(){},null,d)}}]:h.pop_watcher_options=null},h.js_show_move_to_dialog=function(a,c){d.popbox({target:a,templateUrl:"/tpl/project/file/pop_move_file.html",controller:["$scope","popbox",function(a,d){a.popbox=d,a.file=c,a.pid=c.pid;var e=function(a,c){wt.data.file.move(h.pid,a.fid,a.folder_id,c.fid,function(){a.folder_id=c.fid,b.$broadcast(kzi.constant.event_names.on_file_move,a)})};a.folder_structure_loading=!0,a.data={},a.data.selected_move_to_node="",wt.data.file.get_folders(h.pid,function(b){a.folder_structure={},a.folder_structure.name="根目录",a.folder_structure.fid="",a.folder_structure.children=b.data},function(){kzi.msg.error("读取目录错误")},function(){a.folder_structure_loading=!1}),a.move=function(){return _.isEmpty(a.data.selected_move_to_node)?void d.close():c.folder_id===a.data.selected_move_to_node.fid?void d.close():(e(c,a.data.selected_move_to_node),void d.close())},a.js_close=function(){d.close()}}]}).open()},h.js_show_trash_dialog=function(a,b){d.popbox({target:a,templateUrl:"/tpl/project/file/pop_delete_file.html",controller:["$scope","popbox",function(a,c){var d=a.vm={file:b};a.popbox=c,d.js_close=function(){c.close()},d.js_success_done=function(){e.close(),c.close()}}]}).open()},h.js_show_versions=function(a,b){d.popbox({target:a,templateUrl:"/tpl/project/file/pop_show_versions.html",controller:["$scope","popbox",function(a,c){a.popbox=c,a.file=b,a.js_close=function(){c.close()},a.file_version_loaded=!1,wt.data.file.get_versions(b.pid,b.fid,function(b){_.each(b.data,function(a){a.icon=kzi.helper.build_file_icon(a),a.fid=h.fid,a.pid=h.pid}),b.data.reverse(),a.file_version_loaded=!0,a.versions=b.data})}]}).open()},a.$on(kzi.constant.event_names.shortcut_key_to_edit,function(a){e.xtype!==kzi.constant.xtype.file||_.isEmpty(h.file)||h.js_show_editor(h.file)}),a.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(a){e.xtype===kzi.constant.xtype.file&&(_.isEmpty(h.file)||h.file.in_edit!==!0?e.isOpened===!0&&e.close():h.js_cancel_editor(h.file))}),h.js_show_editor=function(c){h.file.in_edit!==!0&&b.global.prj_module.crud&a.entity.permission&&(h.file.in_edit=!0,h.tmpFile=g.ensure("file",c.fid,_.pick(h.file,["name","desc","fid","in_edit"])),h.fileNameInputFocus=!0)},h.js_cancel_editor=function(a){h.file.in_edit=!1,g.purge("file",h.file.fid)},h.js_set_update=function(a,c){h.file.in_edit=!1,_.isEmpty(h.tmpFile.name)||wt.data.file.update(h.pid,h.fid,h.tmpFile.name,h.tmpFile.desc,function(a){h.file.name=h.tmpFile.name,h.file.desc=h.tmpFile.desc,g.purge("file",h.fid),b.$broadcast(kzi.constant.event_names.on_file_update,h.file)})}}angular.module("wt.file.ctrl").controller("entityFileCtrl",a),a.$inject=["$scope","$rootScope","$location","$popbox","locator","$wtUploadFile","tempData"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){$(".entity-well--pages").find(".mCustomScrollbar").mCustomScrollbar("scrollTo","-=100")}function i(){$(".entity-well--pages").find(".mCustomScrollbar").mCustomScrollbar("scrollTo","+=100")}var j=a.vm={pid:void 0,page_id:void 0,token:kzi.get_cookie("sid"),is_saving:!1,is_fullscreen:!1};a.page={},a.$on(kzi.constant.event_names.on_slide_hide,function(){e.xtype===kzi.constant.xtype.page&&(a.$broadcast(kzi.constant.event_names.clear_comment_activity,{pid:j.pid,xid:j.page_id,xtype:kzi.constant.xtype.page}),a.page={})}),a.$on(kzi.constant.event_names.load_entity_page,function(c,d){if(!_.isEmpty(d.pid)&&!_.isEmpty(d.xid)){k=0,j.pid=d.pid,j.page_id=d.xid;var e=function(){wt.data.page.get(j.pid,j.page_id,function(c){a.page=c.data,a.page.in_edit=!1,a.entity.permission=a.project.permission,b.global.prj_module.view&a.entity.permission&&a.page.is_deleted&&(a.entity.permission=kzi.constant.prj_permission.viewer),a.$broadcast(kzi.constant.event_names.select_comment_tab),a.set_pop_watcher_options(),b.global.me.watched=_.pluck(a.page.watchers,"uid").indexOf(b.global.me.uid)>=0},function(b){b.code===kzi.statuses.page_error.not_found.code?(a.entity.permission=kzi.constant.prj_permission.deny,a.entity.not_found_msg="你访问的文档不存在或者被彻底删除。"):a.entity.permission=kzi.constant.prj_permission.deny},function(){a.entity.loading_done=!0})};a.page=f.checkout("page",j.page_id),(_.isEmpty(a.page)||!a.page.in_edit)&&e()}}),a.set_pop_watcher_options=function(){kzi.constant.prj_module.watch&a.entity.permission?a.pop_watcher_options=[{name:"取消关注",ongoing:"取消中...",click:function(b,c,d,e){wt.bus.watch.unwatch(j.pid,a.page,kzi.constant.xtype.page,a.page.page_id,d,function(){},null,e)}}]:a.pop_watcher_options=null},j.js_toggle_watch=function(a,b,c){wt.bus.watch.set_watcher_toggle(j.pid,c,kzi.constant.xtype.page,c.page_id,b)},j.js_watch_all=function(a,b,c,d){wt.bus.watch.watch_all(j.pid,c,kzi.constant.xtype.page,c.page_id,b,null,null,d);
},j.js_go_to_pages=function(){e.close(),c.path("/project/"+j.pid+"/page",{reload:!0})},j.js_show_trash=function(b){var e=a.page;d.popbox({target:b,templateUrl:"/tpl/project/page/pop_delete_page.html",controller:["$scope","popbox","pop_data","$rootScope","locator",function(a,b,d,f,g){a.popbox=b,a.js_close=function(){b.close()},a.js_delete=function(){wt.data.page.trash(j.pid,e.page_id,function(b){a.js_close(),g.close(),f.$broadcast(kzi.constant.event_names.on_page_trash,{page_id:e.page_id}),f.$broadcast(kzi.constant.event_names.autosave_cancel,{key:"autosave:page:uid_"+f.global.me.uid+":xid_"+e.page_id})}),c.path("/project/"+j.pid+"/page")}}],resolve:{pop_data:function(){return{scope:a}}}}).open()},a.$on(kzi.constant.event_names.shortcut_key_to_edit,function(d){if(b.global.prj_module.crud&a.entity.permission&&b.locator.type===kzi.constant.entity_type.page){var e="/project/"+j.pid+"/page/"+j.page_id+"/edit";c.path(e)}}),a.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(a){b.locator.type===kzi.constant.entity_type.page&&b.locator.show_slide===!0&&b.locator.hide_slide()});var k=0;a.$on(kzi.constant.event_names.scroll_down,function(a){h()}),a.$on(kzi.constant.event_names.scroll_page_down,function(a){h()}),a.$on(kzi.constant.event_names.scroll_up,function(a){i()}),a.$on(kzi.constant.event_names.scroll_page_up,function(a){i()}),a.$on(kzi.constant.event_names.page_go_full_screen,function(a){j.is_fullscreen=!j.is_fullscreen}),a.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(a){j.is_fullscreen?j.is_fullscreen=!1:e.close()}),a.js_got_page_ver_diff=function(){var a="/project/"+j.pid+"/pages/"+j.page_id+"/versions";c.path(a)},j.js_toggle_fullscreen=function(a){j.is_fullscreen=!j.is_fullscreen,g(function(){var b="I"===a.target.tagName?$(a.target).parent():$(a.target);b.blur()},40)}}angular.module("wt.page.ctrl").controller("entityPageCtrl",a),a.$inject=["$scope","$rootScope","$location","$popbox","locator","tempData","$timeout"]}(),function(){"use strict";function a(a,b,c,d){var e,f,g=a.vm={mail:{}};a.part_loading_done=!0,a.$on(kzi.constant.event_names.load_entity_mail,function(b,c){a.upload_enabled=!0,_.isEmpty(c.xid)||(f=c.xid,wt.data.mail.get(f,function(a){g.mail=a.data},null,function(){a.entity.loading_done=!0}))}),a.$on(kzi.constant.event_names.shortcut_key_to_cancel,function(a){d.xtype===kzi.constant.xtype.email&&d.isOpened&&d.close()}),g.js_pop_trash=function(a,e){c.popbox({target:a,templateUrl:"/tpl/common/pop_delete_confirm.html",controller:["$scope","popbox",function(a,c){a.popbox=c,a.mail=e,a.delete_message="确认删除该邮件？",a.js_close=function(){c.close()},a.js_sure_delete=function(){a.is_deleting=!0,wt.data.mail.trash(e.mail_id,function(){b.$broadcast(kzi.constant.event_names.on_mail_trash,{mail_id:e.mail_id}),a.js_close(),d.close()},null,function(){a.is_deleting=!1})}}]}).open()},g.js_pop_move=function(a,d){c.popbox({target:a,templateUrl:"/tpl/mail/pop_convert_to_post.html",controller:["$scope","popbox","globalDataContext",function(a,c,f){a.popbox=c,a.mail=d,a.step=0,a.new_post={watchers:[b.global.me]},a.js_step=function(b){a.step=b},a.js_to_watchers=function(){a.members=[],a.loading_members=!0,wt.data.project.get_members(a.new_post.pid,function(b){a.members=wt.bus.watch.get_scope_watcher_members(b.data,a.new_post.watchers),a.loading_members=!1},function(){a.loading_members=!1}),a.js_step(1)},a.js_change_project=function(){a.new_post.pid!==a.new_post.original_pid&&(a.new_post.watchers=[b.global.me],a.new_post.original_pid=a.new_post.pid)},a.js_toggle_member=function(b){b.setting_toggle_member!==!0&&(b.setting_toggle_member=!0,wt.bus.watch.mail_convert_post_watch_toggle(e,a.new_post,b,function(){},null,function(){b.setting_toggle_member=!1}))},a.js_add_all=function(){_.each(a.members,function(b){b.watched=!0,_.findWhere(a.new_post.watchers,{uid:b.uid})||a.new_post.watchers.push(b)}),a.js_step(0)},a.selected_projects=f.getPacketProjects(),_.isEmpty(a.selected_projects)||(a.new_post.pid=a.selected_projects[0].pid,a.new_post.original_pid=a.new_post.pid),a.js_close=function(){c.close()},a.js_convert_to_post=function(b,c){var e=_.pluck(c.watchers,"uid");c.is_saving=!0,wt.data.mail.convert(c.pid,d.mail_id,"post",e,function(){a.convert_success=!0},null,function(){c.is_saving=!1})}}]}).open()}}angular.module("wt.mail.ctrl",[]).controller("entityMailCtrl",a),a.$inject=["$scope","$rootScope","$popbox","locator"]}(),function(){"use strict";var a=window.wt||{};a.version="2.0",angular.module("wtApp",["ngSanitize","ngAnimate","ui.bootstrap","ui.router","ui.event","ui.keypress","ui.calendar","ui.select","w5c.validator","ngFileUpload","ngJcrop","ycConstantXSSWhiteList","shared.config","app.config","wt.directive.tpls","wt.activity.ctrl","wt.project.ctrl","wt.team.ctrl","wt.team.admin.ctrl","wt.calendar.ctrl","wt.dashboard.ctrl","wt.account.ctrl","wt.task.ctrl","wt.event.ctrl","wt.post.ctrl","wt.file.ctrl","wt.page.ctrl","wt.share.ctrl","wt.mail.ctrl","wt.not_found.ctrl","wt.globalDataContext","wt.feed","wt.service.data","wt.locator","wt.service.project","wt.service.team","wt.service.task","wt.service.event","wt.service.file","wt.service.shortcutKey","wt.temp_data","wt.bus","wt.directive","wt.directive.comment","wt.directive.avatar","wt.directive.task","wt.directive.badges","wt.directive.attachment","wt.directive.markdown","wt.directive.notice","wt.directive.leftmenu","wt.directive.dropwindow","wt.directive.scroll","wt.directive.feed","wt.directive.uploadfile","wt.directive.activity","wt.directive.dragfile","wt.directive.pastefile","wt.directive.event","wt.directive.graph","wt.directive.post_item","wt.directive.page","wt.directive.page_item","wt.directive.file_item","wt.directive.slide","wt.directive.project","wt.directive.archiveentry_item","wt.directive.member_control","wt.directive.notice_panel","wt.directive.search_panel","wt.filter","ui.bootstrap.popbox","ui.sortable","wt.directive.file","sf.treeRepeat","pasvaz.bindonce","wt.genius","wt.new.editor","wt.autosave","wt.service.upgrade"])}(),function(){"use strict";function a(a,b,c,d,e,f,g){delete a.defaults.headers.common["X-Requested-With"],b.options({appendToBody:!0}),f.setJcropConfig({bgColor:"black",bgOpacity:.4,aspectRatio:1,maxHeight:299.9}),c.resourceUrlWhitelist([kzi.config.box_url_regex(),kzi.config.wtbox_url,"self"]),d.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|webcal):/),g.config({title:"Worktile 桌面通知",icon:"/img/wt-logo.png"})}angular.module("app.config",["w5c.validator","ui.bootstrap","wt.genius"]).config(a),a.$inject=["$httpProvider","$tooltipProvider","$sceDelegateProvider","$compileProvider","w5cValidatorProvider","ngJcropConfigProvider","$wtNotifyProvider"]}(),function(){"use strict";function a(a,b,c){b.otherwise("/dashboard"),a.state("home",{url:"",template:"<ui-view></ui-view>",controller:["$rootScope","global",function(a,b){a.global.loading_init=!1}],resolve:{global:["globalDataContext",function(a){return a.loadAll()}]}}).state("share",{url:"/share",templateUrl:"/tpl/single_page/share.html",controller:"shareCtrl",header_menu:"",parent:"home",need_load:!1}).state("dashboard",{url:"/dashboard",template:"<ui-view></ui-view>",header_menu:"dashboard",need_load:!0,"abstract":!0,parent:"home"}).state("dashboard.email",{url:"/email",templateUrl:"/tpl/dashboard/dashboardEmail.html",controller:"dashboardEmailCtrl",header_menu:"dashboard",need_load:"true"}).state("dashboard.calendar",{url:"/calendar",templateUrl:"/tpl/dashboard/dashboardCalendar.html",controller:"dashboardCalendarCtrl",header_menu:"dashboard",need_load:"true"}).state("dashboard.calendar.detail",{url:"/:pid/:event_id",header_menu:"dashboard",need_load:!1,template:"",controller:"dashboardCalendarDetailCtrl"}).state("dashboard.feed",{url:"/feed",templateUrl:"/tpl/dashboard/dashboardActivityFeed.html",controller:"dashboardActivityFeedCtrl",header_menu:"dashboard",need_load:"true"}).state("dashboard.default",{url:"",templateUrl:"/tpl/dashboard/dashboardTask.html",controller:"dashboardTaskCtrl",header_menu:"dashboard",need_load:"true"}).state("calendar_subscribe",{url:"/calendar/subscribe",templateUrl:"/tpl/calendar/calendar_subscribe.html",controller:"calendarSubscribeCtrl",header_menu:"dashboard",parent:"home",need_load:!0}).state("search",{url:"/search?{keywords:string}&{team_id:string}&{qpattern:string}&{noquery:string}",templateUrl:"/ycjs/directive/search/search_panel.html",controller:"wtSearchPanelCtl",header_menu:"search",parent:"home",need_load:!1}).state("projects",{url:"/projects",templateUrl:"/tpl/dashboard/projects.html",controller:"dashboardProjectsCtrl",header_menu:"",parent:"home",need_load:!0}).state("projects_archive",{url:"/projects/archive",templateUrl:"/tpl/dashboard/projects_archive.html",controller:"projectsArchiveCtrl",header_menu:"projects",parent:"home",need_load:!0}).state("projects_fav",{url:"/projects/fav",templateUrl:"/tpl/dashboard/projects_fav.html",controller:"projectsFavCtrl",header_menu:"projects",parent:"home",need_load:!0}).state("project_not_found",{url:"/project/:pid/notfound",templateUrl:"/tpl/project/prj_not_found.html",controller:"projectNotfoundCtrl",header_menu:"project",parent:"home",need_load:!1}).state("project",{url:"/project/:pid",templateUrl:"/tpl/project/project.html",controller:"projectHomeCtrl",resolve:{fastProject:["$stateParams","globalDataContext",function(a,b){var c=b.getProject(a.pid);return c?(c._is_full=!1,c):b.loadFullProject(a.pid,!0)}]},header_menu:"project",project_iconmenu:"task",need_load:!0,parent:"home"}).state("project.task",{url:"/task",header_menu:"project",project_iconmenu:"task",need_load:!1,views:{"":{templateUrl:"/tpl/project/task/tasks.html",controller:"projectTasksCtrl"},toolbar:{templateUrl:"/tpl/project/task/toolbar.html",controller:"projectTasksToolbarCtrl"}}}).state("project.task.detail",{url:"/:tid",header_menu:"project",project_iconmenu:"task",need_load:!1,template:"",controller:"projectTaskDetailCtrl"}).state("project.post",{url:"/post",header_menu:"project",project_iconmenu:"post",need_load:!1,views:{toolbar:{templateUrl:"/tpl/project/post/toolbar.html",controller:"projectPostsToolbarCtrl"},"":{templateUrl:"/tpl/project/post/posts.html",controller:"projectPostsCtrl"}}}).state("project.post.detail",{url:"/:post_id",header_menu:"project",project_iconmenu:"post",need_load:!1,template:"",controller:"projectPostDetailCtrl"}).state("project.file",{url:"/file",header_menu:"project",project_iconmenu:"file",need_load:!1,views:{toolbar:{templateUrl:"/tpl/project/file/toolbar.html",controller:"projectFilesToolbarCtrl"},"":{templateUrl:"/tpl/project/file/files.html",controller:"projectFilesCtrl"}}}).state("project.file.detail",{url:"/:fid",header_menu:"project",project_iconmenu:"file",need_load:!1,template:"",controller:"projectFileDetailCtrl"}).state("project.folder",{url:"/folder/:folder_id",header_menu:"project",project_iconmenu:"file",need_load:!1,views:{"":{templateUrl:"/tpl/project/file/files.html",controller:"projectFilesCtrl"},toolbar:{templateUrl:"/tpl/project/file/toolbar.html",controller:"projectFilesToolbarCtrl"}}}).state("project.folder.fileDetail",{url:"/:fid",header_menu:"project",project_iconmenu:"file",need_load:!1,template:"",controller:"projectFileDetailCtrl"}).state("project.page",{url:"/page",header_menu:"project",project_iconmenu:"page",views:{toolbar:{template:'<ui-view name="toolbar"></ui-view>'},"":{template:"<ui-view></ui-view>",controller:"projectPagesHomeCtrl"}},need_load:!1,"abstract":!0}).state("project.page.list",{url:"",header_menu:"project",project_iconmenu:"page",need_load:!1,views:{toolbar:{templateUrl:"/tpl/project/page/toolbar.html",controller:"projectPagesToolbarCtrl"},"":{templateUrl:"/tpl/project/page/pages.html",controller:"projectPagesCtrl"}}}).state("project.page.add",{url:"/add",header_menu:"project",project_iconmenu:"page",need_load:!1,views:{toolbar:{templateUrl:"/tpl/project/page/add_toolbar.html",controller:"projectPageAddToolbarCtrl"},"":{templateUrl:"/tpl/project/page/add_or_edit_page.html",controller:"projectPageAddEditCtrl"}}}).state("project.page.children_add",{url:"/add/:parent_page_id",header_menu:"project",project_iconmenu:"page",need_load:!1,views:{toolbar:{templateUrl:"/tpl/project/page/add_toolbar.html",controller:"projectPageAddToolbarCtrl"},"":{templateUrl:"/tpl/project/page/add_or_edit_page.html",controller:"projectPageAddEditCtrl"}}}).state("project.page.list.detail",{url:"/:page_id",header_menu:"project",project_iconmenu:"page",need_load:!1,controller:"pagesDetailCtrl",template:""}).state("project.page.edit",{url:"/:page_id/edit",header_menu:"project",project_iconmenu:"page",need_load:!0,views:{toolbar:{templateUrl:"/tpl/project/page/add_toolbar.html",controller:"projectPageAddToolbarCtrl"},"":{templateUrl:"/tpl/project/page/add_or_edit_page.html",controller:"projectPageAddEditCtrl"}}}).state("project.page.diff",{url:"/:page_id/versions",templateUrl:"/tpl/project/page/version_diff.html",controller:"projectPageVerDiffCtrl",header_menu:"project",project_iconmenu:"page",need_load:!0}).state("project.event",{url:"/event",header_menu:"project",project_iconmenu:"event",need_load:!1,views:{"":{templateUrl:"/tpl/project/event/events.html",controller:"projectEventsCtrl"},toolbar:{templateUrl:"/tpl/project/event/toolbar.html",controller:"projectEventsToolbarCtrl"}}}).state("project.event.detail",{url:"/:event_id",header_menu:"project",project_iconmenu:"event",need_load:!1,template:"",controller:"eventDetailCtrl"}).state("project.graph",{url:"/graph",header_menu:"project",project_iconmenu:"graph",need_load:!1,views:{toolbar:{templateUrl:"/tpl/project/graph/toolbar.html",controller:"projectGraphToolbarCtrl"},"":{templateUrl:"/tpl/project/graph/graphs.html",controller:"projectGraphCtrl"}}}).state("project.activity",{url:"/activity",templateUrl:"/tpl/activity/project_activities.html",controller:"projectActivityCtrl",header_menu:"project",project_iconmenu:"graph",need_load:!0}).state("project.trash",{url:"/trash",templateUrl:"/tpl/project/trash/project_trash.html",controller:"projectTrashCtrl",header_menu:"project",project_iconmenu:"trash",need_load:!0}).state("project.archive",{url:"/archive",templateUrl:"/tpl/project/task/project_archive_tasks.html",controller:"projectArchiveTasksCtrl",header_menu:"project",project_iconmenu:"task_archive",need_load:!1}).state("team",{url:"/teams/:team_id",templateUrl:"/tpl/team/team.html","abstract":!0,header_menu:"team",parent:"home",need_load:!0,controller:"teamCtrl",resolve:{team:["$stateParams",function(a){return wt.data.team.get_basic(a.team_id,null,function(a){}).then(function(a){return a.data.data},function(a){return null})}]}}).state("team.dashboard",{url:"",templateUrl:"/tpl/team/team_dashboard.html",controller:"teamDashboardCtrl",header_menu:"team",need_load:!0}).state("team.members",{url:"/members",templateUrl:"/tpl/team/team_members.html",controller:"teamMembersCtrl",header_menu:"team",need_load:!0}).state("team.members_invite",{url:"/invite",templateUrl:"/tpl/team/team_members_invite.html",controller:"teamMemberInviteCtrl",header_menu:"team",need_load:!0}).state("team.projects",{url:"/projects",templateUrl:"/tpl/team/team_projects.html",controller:"team_projects_ctrl",header_menu:"team",need_load:!0}).state("team.tasks",{url:"/tasks",templateUrl:"/tpl/team/team_tasks.html",controller:"team_tasks_ctrl",header_menu:"team",parent:"team",need_load:!0}).state("team.calendar",{url:"/calendar",header_menu:"team",parent:"team",need_load:!0,views:{"":{templateUrl:"/tpl/team/team_calendar.html",controller:"teamCalendarCtrl"},sidebar:{templateUrl:"/tpl/team/team_calendar_sidebar.html",controller:"teamCalendarSidebarCtrl"}}}).state("team.setting",{url:"/setting",templateUrl:"/tpl/team/team_setting.html",controller:"teamSettingCtrl",header_menu:"team",need_load:!0}).state("team.admin",{url:"/admin",templateUrl:"/tpl/team/team_admin.html",header_menu:"team",parent:"team",need_load:!0,controller:"teamAdminHomeCtrl"}).state("team.admin.custom",{url:"/custom",templateUrl:"/tpl/team/team_admin_custom.html",controller:"teamAdminCustomCtrl",header_menu:"team",need_load:!0}).state("team.admin.basic",{url:"/basic",templateUrl:"/tpl/team/team_admin_basic.html",controller:"teamAdminBasicCtrl",header_menu:"team",need_load:!0}).state("team.admin.members",{url:"/members",templateUrl:"/tpl/team/team_admin_members.html",controller:"teamAdminMembersCtrl",header_menu:"team",need_load:!0}).state("team.admin.projects",{url:"/projects",templateUrl:"/tpl/team/team_admin_projects.html",controller:"teamAdminProjectsCtrl",header_menu:"team",need_load:!0}).state("team.admin.security",{url:"/security",templateUrl:"/tpl/team/team_admin_security.html",controller:"teamAdminSecurityCtrl",header_menu:"team",need_load:!0}).state("team.create",{url:"/security",templateUrl:"/tpl/team/pop_team_create.html",controller:"team_create_ctrl",header_menu:"team",need_load:!0}).state("team.join",{url:"/security",templateUrl:"/tpl/team/team_join.html",controller:"team_join_ctrl",header_menu:"team",need_load:!0}).state("account",{url:"/account",templateUrl:"/tpl/account/account_settings.html",controller:"accountSettingsCtrl",header_menu:"",parent:"home",need_load:!1,resolve:{account:[function(){return wt.data.account.get_basic().then(function(a){return a.data.data},function(){return null})}]}}).state("account.settings",{url:"/settings",templateUrl:"/tpl/account/account_profile.html",controller:"accountProfileCtrl",header_menu:"",need_load:!1}).state("account.individuation",{url:"/individuation",templateUrl:"/tpl/account/account_individuation.html",controller:"accountIndividuationCtrl",header_menu:"",need_load:!1}).state("account.message",{url:"/message",templateUrl:"/tpl/account/account_message.html",controller:"accountMessageCtrl",header_menu:"",need_load:!0}).state("account.security",{url:"/security",templateUrl:"/tpl/account/account_security.html",controller:"accountSecurityCtrl",header_menu:"",need_load:!0}).state("account.apps",{url:"/apps",templateUrl:"/tpl/account/account_apps.html",controller:"accountAppsCtrl",header_menu:"",need_load:!0}).state("not_found",{url:"/not_found/:type",templateUrl:"/tpl/404.html",need_load:!1,header_menu:"index",controller:"notFoundCtrl",parent:"home",is_outter:!0}),c.html5Mode(!0)}angular.module("wtApp").config(a),a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f){wt.log=e,wt.data=b,wt.bus=c,wt.cache=d("wtApp"),a.global={config:kzi.config,title:"",me:wt.me,is_login:!_.isUndefined(wt.me)&&!_.isEmpty(wt.me.uid),loading_init:!0,loading_done:!1,header_menu:"index",leftmenu_current_expand:"",is_first_landing:wt.me&&"1"===wt.me.is_new,is_outter:!1,show_msg:!1,project_iconmenu:"",project_sidebar_status:kzi.localData.get("project_sidebar_status")?kzi.localData.get("project_sidebar_status"):"",project_sidebar_view:"member",project_sidebar_foldview:"member",calendar_fold:!0,wohoo_show:!1,tour_version:"00",team_module:kzi.constant.team_module,prj_module:kzi.constant.prj_module,unread_count:0,dragfile_elements:[],is_scroll_comment:!0},f.init()}angular.module("wtApp").run(a),a.$inject=["$rootScope","data","bus","$cacheFactory","$log","wtAutosaveService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l){a.locator=i,a.returnToSignin=function(){a.global.is_login=!1,i.close(),e.location.href="/signin?return_url="+e.location.pathname},a.login=function(b,d,e,f,h,i){wt.data.signin(b,d,function(b){a.global.me=b.data.session,a.global.is_login=!0,kzi.config.feed_turn_on&&g.connect(),null!==e&&c.path(e),angular.isFunction(f)&&f(b)},h,i)},a.logout=function(b){g.close(),delete a.global.me,a.global.is_login=!1,wt.data.signout(function(a){b||(e.location.href="/",kzi.localData.clear())})},a.auth=function(b,c){wt.data.auth(function(d){200===d.code?(a.global.me=d.data.session,a.global.me.role="1",a.global.is_login=!0,null!==b&&"function"==typeof b&&b()):(delete a.global.me,a.global.is_login=!1,null!==c&&"function"==typeof c&&c())})},a.$on(kzi.constant.event_names.emit_filter_activity_by_type,function(b,c){a.$broadcast(kzi.constant.event_names.filter_activity_by_type,{data:c})}),a.$on(kzi.constant.event_names.emit_filter_watch_by_type,function(b,c){a.$broadcast(kzi.constant.event_names.filter_watch_by_type,{data:c})}),a.$on("$stateChangeStart",function(b,d,f,g,h){null==d.need_load||d.need_load===!0?a.global.loading_done=!1:a.global.loading_done=!0,a.global.is_outter=!!d.is_outter,a.global.header_menu=d.header_menu,d.project_iconmenu&&(a.global.project_iconmenu=d.project_iconmenu),a.global.is_login||d.is_outter===!0?d.is_outter===!0&&angular.noop():/^\/signin/g.test(c.$$path)||(e.location.href="/signin?return_url="+c.$$path)}),a.$on("$stateChangeSuccess",function(a,b,c,d,e){}),a.$on("$stateChangeError",function(a,b,c,d,e,g){f.debug(g)}),a.$on("$locationChangeSuccess",function(b,d,e,f,g){a.actualLocation=c.path()});var m={notice_new:function(b){if(a.global.unread_count++,a.$broadcast(kzi.constant.event_names.notice_new,b.notice),"1"==a.global.me.notice_for_desktop&&b&&b.notice){var c=b.notice;if("task_assign"===c.template)k.notify({title:"新任务",body:c.sender.display_name+" 给你分配了新的任务 "+c.data.entity.name,notifyClick:function(){i.openTask(c.filter.prj,c.data.entity.eid)}});else if("task_complete"===c.template)k.notify({title:"任务完成",body:c.sender.display_name+" 完成了任务 "+c.data.entity.name,notifyClick:function(){i.openTask(c.filter.prj,c.data.entity.eid)}});else if("metion_at_comment"===c.template){var d="";"task"===c.data.target.etype?(d="任务",k.notify({title:"提到你",body:c.sender.display_name+" 在"+d+c.data.target.name+" 提到你 "+c.data.entity.name,notifyClick:function(){i.openTask(c.filter.prj,c.data.target.eid)}})):"file"===c.data.target.etype?(d="文件",k.notify({title:"提到你",body:c.sender.display_name+" 在"+d+c.data.target.name+" 提到你 "+c.data.entity.name,notifyClick:function(){i.openFile(c.filter.prj,c.data.target.eid)}})):"post"===c.data.target.etype?(d="话题",k.notify({title:"提到你",body:c.sender.display_name+" 在"+d+c.data.target.name+" 提到你 "+c.data.entity.name,notifyClick:function(){i.openPost(c.filter.prj,c.data.target.eid,!1)}})):"page"===c.data.target.etype?(d="文档",k.notify({title:"提到你",body:c.sender.display_name+" 在"+d+c.data.target.name+" 提到你 "+c.data.entity.name,notifyClick:function(){i.openPage(c.filter.prj,c.data.target.eid,!1)}})):"event"===c.data.target.etype&&(d="日程",k.notify({title:"提到你",body:c.sender.display_name+" 在"+d+c.data.target.name+" 提到你 "+c.data.entity.name,notifyClick:function(){i.openEvent(c.filter.prj,c.data.target.eid,!1)}}))}}},project_list:function(b){b.uid!==a.global.me.uid&&(b.owner===a.global.me.uid&&"remove_member"===b.action||"delete_project"===b.action?(h.cache.project.remove(b.pid),h.project.info&&h.project.pid===b.pid&&c.path("/projects")):(h.project.info&&b.pid===h.project.pid&&"archive_project"===b.action&&(h.project.info.permission=kzi.constant.prj_module.view,h.project.info.archived=1,a.$broadcast(kzi.constant.event_names.project_permission_change,b)),h.reloadProjects(function(a){if(h.project.info){var c=_.findWhere(a,{pid:b.pid});c&&(h.project.info.permission=c.permission,h.project.info.archived=c.archived)}})))},project_single:function(b){var c=_.findWhere(h.projects,{pid:b.pid});c&&b.uid!==a.global.me.uid&&wt.data.project.get(b.pid,function(a){h.project&&a.pid===h.project.info.pid,h.cache.project.updateFull(a.data.info)})},team_list:function(b){if(b.owner===a.global.me.uid&&b.uid!==a.global.me.uid){var e=_.findWhere(h.teams,{team_id:b.team_id});if(e&&"remove_member"===b.action){h.cache.team.leave(b.team_id);var f=d.team_id;f&&f===b.team_id&&(kzi.constant.team_module.view_base&b.team_permission?a.$broadcast(kzi.constant.event_names.team_member_role_change,b):c.path("/projects"))}else h.reloadTeams(function(){})}},team_member_remove:function(a){},team_member_leave:function(a){_.findWhere(h.teams,{team_id:a.team_id})},project_members:function(b){h.project.info&&b.pid===h.project.info.pid&&b.uid!==a.global.me.uid&&wt.data.project.get_members(b.pid,function(a){h.project.info.members=a.data})},project_member_remove:function(b){(b.uid!=a.global.me.uid||b.owner!=a.global.me.uid)&&(b.owner==a.global.me.uid?(h.cache.project.remove(b.pid),b.pid==h.project.pid&&c.path("/dashboard")):h.cache.project.member_remove(b.pid,b.owner))},project_member_role:function(b){h.project.info&&b.pid===h.project.info.pid&&b.owner===a.global.me.uid&&(h.project.info.permission=b.permission,d.pid!==b.pid||kzi.constant.prj_module.view&b.permission||c.path("/projects"),a.$broadcast(kzi.constant.event_names.project_permission_change,b));var e=_.findWhere(h.projects,{pid:b.pid});e&&b.owner===a.global.me.uid&&(e.permission=b.permission,a.$broadcast(kzi.constant.event_names.project_permission_change,b))},entry_list:function(b){h.project&&b.pid==h.project.info.pid&&b.uid!=a.global.me.uid&&h.reloadEntriesAndTasks(b.pid,function(){a.$broadcast("socket_message_entry_list")})},task_single:function(b){if(h.project&&h.project.info&&b.pid==h.project.info.pid)var c=_.findWhere(h.project.tasks,{tid:b.tid});wt.data.task.get(b.pid,b.tid,function(d){if(a.$broadcast(kzi.constant.event_names.on_task_update,d.data),c){if(h.cache.task.update_full(d.data),a.$broadcast(kzi.constant.event_names.on_task_badges_check,{tid:c.tid}),b.moved){var e=c.entry_id;c.entry_id=d.data.entry_id,a.$broadcast(kzi.constant.event_names.on_task_move,{task:d.data,from_entry_id:e})}}else h.cache.task.add(d.data),a.$broadcast(kzi.constant.event_names.on_task_add,{task:d.data})})},task_delete:function(b){h.project&&h.project.pid==b.pid&&h.cache.task.del(b.tid),b.uid!==a.global.me.uid&&a.$broadcast(kzi.constant.event_names.on_task_trash,{tid:b.tid})},task_complete:function(b){h.project&&h.project.pid==b.pid&&h.cache.task.complete(b.tid,b.completed),b.uid!==a.global.me.uid&&a.$broadcast(kzi.constant.event_names.on_task_complete,b)},task_archive:function(b){h.project&&h.project.pid==b.pid&&h.cache.task.archive(b.tid),b.uid!==a.global.me.uid&&a.$broadcast(kzi.constant.event_names.on_task_archive,b.tid)},team_member_role:function(b){if(b.owner===a.global.me.uid){var c=_.findWhere(h.teams,{team_id:b.team_id});c&&kzi.constant.team_module.view&b.team_permission?(c.permission=b.team_permission,a.$broadcast(kzi.constant.event_names.team_member_role_change,b)):c&&(h.cache.team.leave(b.team_id),a.$broadcast(kzi.constant.event_names.team_member_role_change,b))}},comment_new:function(b){a.global.me.uid!==b.uid&&a.$broadcast(kzi.constant.event_names.on_comment_new,b)},notice_read:function(b){b.owner===a.global.me.uid&&("all"===b.nid?a.global.unread_count=0:a.global.unread_count=a.global.unread_count>0?a.global.unread_count-1:0)},weixin_bind:function(b){b.owner!==a.global.me.uid||b.error?kzi.msg.error("绑定失败,可能您的微信已经绑定Worktile其他账户!"):(a.global.me.is_bind_weixin=!0,a.$broadcast(kzi.constant.event_names.on_weixin_bind,{data:!0}))}};a.global.me&&("1"===wt.me.is_new&&(a.global.is_first_landing=!0,j(function(){b.showAdd()},2e3),wt.data.user.set_user_old(function(b){a.global.is_first_landing=!1})),g.onMessage(function(b){var c=(b.getAttribute("to"),b.getAttribute("from"),b.getAttribute("type"),b.getElementsByTagName("body")),d=JSON.parse(c[0].textContent);return m[d.args]&&a.$apply(function(){m[d.args](d.data)}),!0}),g.onPresence(function(b){var c=b.getAttribute("from"),d=b.getAttribute("type"),e=b.getElementsByTagName("show"),f=c.substr(0,c.indexOf("@im.worktile.com")),g=0,i=a.global.me.uid;if("unavailable"===d&&i!==f)g=kzi.constant.state.offline;else if(e.length>0&&i!=f){e[0].textContent;g=kzi.constant.state.leave}else g=kzi.constant.state.online;return a.$apply(function(){h.cache.user.change_state(f,g)}),!0}),kzi.config.feed_turn_on&&g.connect(a.global.me.uid,a.global.me.sid),"true"==wt.me.wizard&&l.show())}angular.module("wtApp").run(a),a.$inject=["$rootScope","teamService","$location","$stateParams","$window","$log","feed","globalDataContext","locator","$timeout","$wtNotify","upgradeService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l){var m=null;e.onblur=function(){m||(m=setTimeout(function(){a.global.me.online=kzi.constant.state.leave,g.leave(),clearTimeout(m),m=null},9e5))},e.onfocus=function(){g.getStatus()!==Strophe.Status.CONNECTED&&g.getStatus()!==Strophe.Status.CONNECTING&&kzi.config.feed_turn_on&&g.connect(a.global.me.uid,a.global.me.sid),parseInt(a.global.me.online,10)!==kzi.constant.state.online&&g.online(),j.cache.user.change_state(a.global.me.uid,kzi.constant.state.online),clearTimeout(m),m=null},"undefined"!=typeof Heyoffline&&new Heyoffline({text:{title:"掉线了?",content:"请确认网络是否连通,否则会造成当前工作丢失.",button:"好的,我知道了."}}),l.init(),$(window).on("resize",_.throttle(function(){f(function(){i.update()},50)},150)),e.onbeforeunload=function(){return k.uploadQueueFiles&&k.uploadQueueFiles.length>0?"您的上传队列中还有文件，退出该页面将丢失上传进度。":void(g&&g.close())},$(document.body).bind("drop dragover",function(a){a.preventDefault()}),$(document.body).bind("blur.dragfile",function(){$(".dragfile-hover").removeClass("dragfile-hover")});var n=["right_click_trigger","entry_header"];document.oncontextmenu=function(b){b=b||window.event;var c=!0;return _.each(n,function(d){($(b.target).hasClass(d)||$(b.target).parents("."+d).length>0)&&(a.$broadcast(kzi.constant.event_names.on_right_menu,b),c=!1)}),c},$(document.body).bind("selectstart",function(a){var b=!0;return _.each(n,function(c){($(a.target).hasClass(c)||$(a.target).parents("."+c).length>0)&&(b=!1)}),b})}angular.module("wtApp").run(a),a.$inject=["$rootScope","$location","$stateParams","$modal","$window","$timeout","feed","locator","wtScrollService","globalDataContext","$wtUploadFile","shortcutKey"]}(),!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["moment"],b):"object"==typeof exports?module.exports=b(require("moment")):b(a.moment)}(this,function(a){"use strict";function b(a){return a>96?a-87:a>64?a-29:a-48}function c(a){var c,d=0,e=a.split("."),f=e[0],g=e[1]||"",h=1,i=0,j=1;for(45===a.charCodeAt(0)&&(d=1,j=-1),d;d<f.length;d++)c=b(f.charCodeAt(d)),i=60*i+c;for(d=0;d<g.length;d++)h/=60,c=b(g.charCodeAt(d)),i+=c*h;return i*j}function d(a){for(var b=0;b<a.length;b++)a[b]=c(a[b])}function e(a,b){for(var c=0;b>c;c++)a[c]=Math.round((a[c-1]||0)+6e4*a[c]);a[b-1]=1/0}function f(a,b){var c,d=[];for(c=0;c<b.length;c++)d[c]=a[b[c]];return d}function g(a){var b=a.split("|"),c=b[2].split(" "),g=b[3].split(""),h=b[4].split(" ");return d(c),d(g),d(h),e(h,g.length),{name:b[0],abbrs:f(b[1].split(" "),g),offsets:f(c,g),untils:h}}function h(a){a&&this._set(g(a))}function i(a){return(a||"").toLowerCase().replace(/\//g,"_")}function j(a){var b,c,d;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)c=a[b].split("|")[0],d=i(c),v[d]=a[b],x[d]=c}function k(a,b){a=i(a);var c,d=v[a];return d instanceof h?d:"string"==typeof d?(d=new h(d),v[a]=d,d):w[a]&&b!==k&&(c=k(w[a],k))?(d=v[a]=new h,d._set(c),d.name=x[a],d):null}function l(){var a,b=[];for(a in x)x.hasOwnProperty(a)&&(v[a]||v[w[a]])&&x[a]&&b.push(x[a]);return b.sort()}function m(a){var b,c,d,e;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)c=a[b].split("|"),d=i(c[0]),e=i(c[1]),w[d]=e,x[d]=c[0],w[e]=d,x[e]=c[1]}function n(a){j(a.zones),m(a.links),r.dataVersion=a.version}function o(a){return o.didShowError||(o.didShowError=!0,q("moment.tz.zoneExists('"+a+"') has been deprecated in favor of !moment.tz.zone('"+a+"')")),!!k(a)}function p(a){return!(!a._a||void 0!==a._tzm)}function q(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}function r(b){var c=Array.prototype.slice.call(arguments,0,-1),d=arguments[arguments.length-1],e=k(d),f=a.utc.apply(null,c);return e&&!a.isMoment(b)&&p(f)&&f.add(e.parse(f),"minutes"),f.tz(d),f}function s(a){return function(){return this._z?this._z.abbr(this):a.call(this)}}function t(a){return function(){return this._z=null,a.apply(this,arguments)}}if(void 0!==a.tz)return q("Moment Timezone "+a.tz.version+" was already loaded "+(a.tz.dataVersion?"with data from ":"without any data")+a.tz.dataVersion),a;var u="0.4.0",v={},w={},x={},y=a.version.split("."),z=+y[0],A=+y[1];
(2>z||2===z&&6>A)&&q("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com"),h.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets},_index:function(a){var b,c=+a,d=this.untils;for(b=0;b<d.length;b++)if(c<d[b])return b},parse:function(a){var b,c,d,e,f=+a,g=this.offsets,h=this.untils,i=h.length-1;for(e=0;i>e;e++)if(b=g[e],c=g[e+1],d=g[e?e-1:e],c>b&&r.moveAmbiguousForward?b=c:b>d&&r.moveInvalidForward&&(b=d),f<h[e]-6e4*b)return g[e];return g[i]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return this.offsets[this._index(a)]}},r.version=u,r.dataVersion="",r._zones=v,r._links=w,r._names=x,r.add=j,r.link=m,r.load=n,r.zone=k,r.zoneExists=o,r.names=l,r.Zone=h,r.unpack=g,r.unpackBase60=c,r.needsOffset=p,r.moveInvalidForward=!0,r.moveAmbiguousForward=!1;var B=a.fn;a.tz=r,a.defaultZone=null,a.updateOffset=function(b,c){var d,e=a.defaultZone;void 0===b._z&&(e&&p(b)&&!b._isUTC&&(b._d=a.utc(b._a)._d,b.utc().add(e.parse(b),"minutes")),b._z=e),b._z&&(d=b._z.offset(b),Math.abs(d)<16&&(d/=60),void 0!==b.utcOffset?b.utcOffset(-d,c):b.zone(d,c))},B.tz=function(b){return b?(this._z=k(b),this._z?a.updateOffset(this):q("Moment Timezone has no data for "+b+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},B.zoneName=s(B.zoneName),B.zoneAbbr=s(B.zoneAbbr),B.utc=t(B.utc),a.tz.setDefault=function(b){return(2>z||2===z&&9>A)&&q("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=b?k(b):null,a};var C=a.momentProperties;return"[object Array]"===Object.prototype.toString.call(C)?(C.push("_z"),C.push("_a")):C&&(C._z=null),n({version:"2015d",zones:["Africa/Abidjan|GMT|0|0|","Africa/Addis_Ababa|EAT|-30|0|","Africa/Algiers|CET|-10|0|","Africa/Bangui|WAT|-10|0|","Africa/Blantyre|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0","Africa/Ceuta|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Johannesburg|SAST|-20|0|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0","America/Adak|HST HDT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|AST|40|0|","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|EST|50|0|","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Belem|BRT|30|0|","America/Belize|CST|60|0|","America/Boa_Vista|AMT|40|0|","America/Bogota|COT|50|0|","America/Boise|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Cancun|CST CDT EST|60 50 50|010101010102|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0","America/Caracas|VET|4u|0|","America/Cayenne|GFT|30|0|","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Creston|MST|70|0|","America/Dawson|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|AMT ACT|40 50|01|1KLE0","America/Glace_Bay|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|EST EDT AST|50 40 40|0101010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guayaquil|ECT|50|0|","America/Guyana|GYT|40|0|","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/La_Paz|BOT|40|0|","America/Lima|PET|50|0|","America/Merida|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Metlakatla|PST|80|0|","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Montevideo|UYST UYT|20 30|01010101010101010101010|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Noronha|FNT|20|0|","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0|","America/Port-au-Prince|EST EDT|50 40|0101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|PST PDT|80 70|01010101010101010101010|1C1m0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santiago|CLST CLT CLT|30 40 30|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0","Antarctica/DumontDUrville|DDUT|-a0|0|","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140","Antarctica/Mawson|MAWT|-50|0|","Antarctica/McMurdo|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Rothera|ROTT|30|0|","Antarctica/Syowa|SYOT|-30|0|","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|VOST|-60|0|","Asia/Aden|AST|-30|0|","Asia/Almaty|ALMT|-60|0|","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Aqtau|AQTT|-50|0|","Asia/Ashgabat|TMT|-50|0|","Asia/Baku|AZT AZST|-40 -50|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|ICT|-70|0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|KGT|-60|0|","Asia/Brunei|BNT|-80|0|","Asia/Calcutta|IST|-5u|0|","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|01023|1BWh0 1qM0 WM0 8Hz0","Asia/Choibalsan|CHOT CHOST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Chongqing|CST|-80|0|","Asia/Dacca|BDT|-60|0|","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0","Asia/Dili|TLT|-90|0|","Asia/Dubai|GST|-40|0|","Asia/Dushanbe|TJT|-50|0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hong_Kong|HKT|-80|0|","Asia/Hovd|HOVT HOVST|-70 -80|0101010101010|1O8H0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0","Asia/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|WIB|-70|0|","Asia/Jayapura|WIT|-90|0|","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT|-4u|0|","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Karachi|PKT|-50|0|","Asia/Kashgar|XJT|-60|0|","Asia/Kathmandu|NPT|-5J|0|","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|MYT|-80|0|","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Makassar|WITA|-80|0|","Asia/Manila|PHT|-80|0|","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|KRAT NOVST NOVT NOVT|-70 -70 -60 -70|01230|1BWj0 1qN0 WM0 8Hz0","Asia/Novosibirsk|NOVT NOVST NOVT|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Oral|ORAT|-50|0|","Asia/Pyongyang|KST|-90|0|","Asia/Qyzylorda|QYZT|-60|0|","Asia/Rangoon|MMT|-6u|0|","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Samarkand|UZT|-50|0|","Asia/Singapore|SGT|-80|0|","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Tbilisi|GET|-40|0|","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|BTT|-60|0|","Asia/Tokyo|JST|-90|0|","Asia/Ulaanbaatar|ULAT ULAST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Canary|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|CVT|10|0|","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10","Australia/ACT|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST|-a0|0|","Australia/Darwin|ACST|-9u|0|","Australia/Eucla|ACWST|-8J|0|","Australia/LHI|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Perth|AWST|-80|0|","Chile/EasterIsland|EASST EAST EAST|50 60 50|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","Eire|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Belfast|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","HST|HST|a0|0|","Indian/Chagos|IOT|-60|0|","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|TFT|-50|0|","Indian/Mahe|SCT|-40|0|","Indian/Maldives|MVT|-50|0|","Indian/Mauritius|MUT|-40|0|","Indian/Reunion|RET|-40|0|","Kwajalein|MHT|-c0|0|","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","NZ-CHAT|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|VUT|-b0|0|","Pacific/Enderbury|PHOT|-d0|0|","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|GALT|60|0|","Pacific/Gambier|GAMT|90|0|","Pacific/Guadalcanal|SBT|-b0|0|","Pacific/Guam|ChST|-a0|0|","Pacific/Kiritimati|LINT|-e0|0|","Pacific/Kosrae|KOST|-b0|0|","Pacific/Marquesas|MART|9u|0|","Pacific/Midway|SST|b0|0|","Pacific/Nauru|NRT|-c0|0|","Pacific/Niue|NUT|b0|0|","Pacific/Norfolk|NFT|-bu|0|","Pacific/Noumea|NCT|-b0|0|","Pacific/Palau|PWT|-90|0|","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT|a0|0|","Pacific/Tahiti|TAHT|a0|0|","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT|-d0|0|","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Juba","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Khartoum","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Algiers|Africa/Tunis","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Ndjamena","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Ceuta|Arctic/Longyearbyen","Africa/Ceuta|Atlantic/Jan_Mayen","Africa/Ceuta|CET","Africa/Ceuta|Europe/Amsterdam","Africa/Ceuta|Europe/Andorra","Africa/Ceuta|Europe/Belgrade","Africa/Ceuta|Europe/Berlin","Africa/Ceuta|Europe/Bratislava","Africa/Ceuta|Europe/Brussels","Africa/Ceuta|Europe/Budapest","Africa/Ceuta|Europe/Busingen","Africa/Ceuta|Europe/Copenhagen","Africa/Ceuta|Europe/Gibraltar","Africa/Ceuta|Europe/Ljubljana","Africa/Ceuta|Europe/Luxembourg","Africa/Ceuta|Europe/Madrid","Africa/Ceuta|Europe/Malta","Africa/Ceuta|Europe/Monaco","Africa/Ceuta|Europe/Oslo","Africa/Ceuta|Europe/Paris","Africa/Ceuta|Europe/Podgorica","Africa/Ceuta|Europe/Prague","Africa/Ceuta|Europe/Rome","Africa/Ceuta|Europe/San_Marino","Africa/Ceuta|Europe/Sarajevo","Africa/Ceuta|Europe/Skopje","Africa/Ceuta|Europe/Stockholm","Africa/Ceuta|Europe/Tirane","Africa/Ceuta|Europe/Vaduz","Africa/Ceuta|Europe/Vatican","Africa/Ceuta|Europe/Vienna","Africa/Ceuta|Europe/Warsaw","Africa/Ceuta|Europe/Zagreb","Africa/Ceuta|Europe/Zurich","Africa/Ceuta|Poland","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Aruba","America/Anguilla|America/Barbados","America/Anguilla|America/Blanc-Sablon","America/Anguilla|America/Curacao","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Kralendijk","America/Anguilla|America/Lower_Princes","America/Anguilla|America/Marigot","America/Anguilla|America/Martinique","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/Puerto_Rico","America/Anguilla|America/Santo_Domingo","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Atikokan|America/Cayman","America/Atikokan|America/Coral_Harbour","America/Atikokan|America/Jamaica","America/Atikokan|America/Panama","America/Atikokan|EST","America/Atikokan|Jamaica","America/Belem|America/Fortaleza","America/Belem|America/Maceio","America/Belem|America/Recife","America/Belem|America/Santarem","America/Belize|America/Costa_Rica","America/Belize|America/El_Salvador","America/Belize|America/Guatemala","America/Belize|America/Managua","America/Belize|America/Regina","America/Belize|America/Swift_Current","America/Belize|America/Tegucigalpa","America/Belize|Canada/East-Saskatchewan","America/Belize|Canada/Saskatchewan","America/Boa_Vista|America/Manaus","America/Boa_Vista|America/Porto_Velho","America/Boa_Vista|Brazil/West","America/Boise|America/Cambridge_Bay","America/Boise|America/Denver","America/Boise|America/Edmonton","America/Boise|America/Inuvik","America/Boise|America/Ojinaga","America/Boise|America/Shiprock","America/Boise|America/Yellowknife","America/Boise|Canada/Mountain","America/Boise|MST7MDT","America/Boise|Navajo","America/Boise|US/Mountain","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Creston|America/Dawson_Creek","America/Creston|America/Hermosillo","America/Creston|America/Phoenix","America/Creston|MST","America/Creston|US/Arizona","America/Dawson|America/Ensenada","America/Dawson|America/Los_Angeles","America/Dawson|America/Tijuana","America/Dawson|America/Vancouver","America/Dawson|America/Whitehorse","America/Dawson|Canada/Pacific","America/Dawson|Canada/Yukon","America/Dawson|Mexico/BajaNorte","America/Dawson|PST8PDT","America/Dawson|US/Pacific","America/Dawson|US/Pacific-New","America/Detroit|America/Fort_Wayne","America/Detroit|America/Indiana/Indianapolis","America/Detroit|America/Indiana/Marengo","America/Detroit|America/Indiana/Petersburg","America/Detroit|America/Indiana/Vevay","America/Detroit|America/Indiana/Vincennes","America/Detroit|America/Indiana/Winamac","America/Detroit|America/Indianapolis","America/Detroit|America/Iqaluit","America/Detroit|America/Kentucky/Louisville","America/Detroit|America/Kentucky/Monticello","America/Detroit|America/Louisville","America/Detroit|America/Montreal","America/Detroit|America/Nassau","America/Detroit|America/New_York","America/Detroit|America/Nipigon","America/Detroit|America/Pangnirtung","America/Detroit|America/Thunder_Bay","America/Detroit|America/Toronto","America/Detroit|Canada/Eastern","America/Detroit|EST5EDT","America/Detroit|US/East-Indiana","America/Detroit|US/Eastern","America/Detroit|US/Michigan","America/Eirunepe|America/Porto_Acre","America/Eirunepe|America/Rio_Branco","America/Eirunepe|Brazil/Acre","America/Glace_Bay|America/Halifax","America/Glace_Bay|America/Moncton","America/Glace_Bay|America/Thule","America/Glace_Bay|Atlantic/Bermuda","America/Glace_Bay|Canada/Atlantic","America/Havana|Cuba","America/Merida|America/Mexico_City","America/Merida|America/Monterrey","America/Merida|Mexico/General","America/Metlakatla|Pacific/Pitcairn","America/Noronha|Brazil/DeNoronha","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Asia/Aden|Asia/Baghdad","Asia/Aden|Asia/Bahrain","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Qatar","Asia/Aden|Asia/Riyadh","Asia/Aqtau|Asia/Aqtobe","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Colombo","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Macao","Asia/Chongqing|Asia/Macau","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|Asia/Taipei","Asia/Chongqing|PRC","Asia/Chongqing|ROC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|EET","Asia/Nicosia|Europe/Athens","Asia/Nicosia|Europe/Bucharest","Asia/Nicosia|Europe/Chisinau","Asia/Nicosia|Europe/Helsinki","Asia/Nicosia|Europe/Kiev","Asia/Nicosia|Europe/Mariehamn","Asia/Nicosia|Europe/Nicosia","Asia/Nicosia|Europe/Riga","Asia/Nicosia|Europe/Sofia","Asia/Nicosia|Europe/Tallinn","Asia/Nicosia|Europe/Tiraspol","Asia/Nicosia|Europe/Uzhgorod","Asia/Nicosia|Europe/Vilnius","Asia/Nicosia|Europe/Zaporozhye","Asia/Pyongyang|Asia/Seoul","Asia/Pyongyang|ROK","Asia/Samarkand|Asia/Tashkent","Asia/Singapore|Singapore","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Canary|Atlantic/Faeroe","Atlantic/Canary|Atlantic/Faroe","Atlantic/Canary|Atlantic/Madeira","Atlantic/Canary|Europe/Lisbon","Atlantic/Canary|Portugal","Atlantic/Canary|WET","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/Currie","Australia/ACT|Australia/Hobart","Australia/ACT|Australia/Melbourne","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/ACT|Australia/Tasmania","Australia/ACT|Australia/Victoria","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/LHI|Australia/Lord_Howe","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Moscow|Europe/Volgograd","Europe/Moscow|W-SU","HST|Pacific/Honolulu","HST|Pacific/Johnston","HST|US/Hawaii","Kwajalein|Pacific/Kwajalein","Kwajalein|Pacific/Majuro","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),a}),function(){"use strict";kzi.constant=kzi.constant||{},kzi.constant.moment_timezone_meta={countries:{AD:{name:"Andorra",abbr:"AD",zones:["Europe/Andorra"]},AE:{name:"United Arab Emirates",abbr:"AE",zones:["Asia/Dubai"]},AF:{name:"Afghanistan",abbr:"AF",zones:["Asia/Kabul"]},AG:{name:"Antigua & Barbuda",abbr:"AG",zones:["America/Port_of_Spain"]},AI:{name:"Anguilla",abbr:"AI",zones:["America/Port_of_Spain"]},AL:{name:"Albania",abbr:"AL",zones:["Europe/Tirane"]},AM:{name:"Armenia",abbr:"AM",zones:["Asia/Yerevan"]},AO:{name:"Angola",abbr:"AO",zones:["Africa/Lagos"]},AQ:{name:"Antarctica",abbr:"AQ",zones:["Antarctica/Rothera","Antarctica/Palmer","Antarctica/Mawson","Antarctica/Davis","Antarctica/Casey","Antarctica/Vostok","Antarctica/DumontDUrville","Antarctica/Syowa","Antarctica/Troll","Pacific/Auckland"]},AR:{name:"Argentina",abbr:"AR",zones:["America/Argentina/Buenos_Aires","America/Argentina/Cordoba","America/Argentina/Salta","America/Argentina/Jujuy","America/Argentina/Tucuman","America/Argentina/Catamarca","America/Argentina/La_Rioja","America/Argentina/San_Juan","America/Argentina/Mendoza","America/Argentina/San_Luis","America/Argentina/Rio_Gallegos","America/Argentina/Ushuaia"]},AS:{name:"Samoa (American)",abbr:"AS",zones:["Pacific/Pago_Pago"]},AT:{name:"Austria",abbr:"AT",zones:["Europe/Vienna"]},AU:{name:"Australia",abbr:"AU",zones:["Australia/Lord_Howe","Antarctica/Macquarie","Australia/Hobart","Australia/Currie","Australia/Melbourne","Australia/Sydney","Australia/Broken_Hill","Australia/Brisbane","Australia/Lindeman","Australia/Adelaide","Australia/Darwin","Australia/Perth","Australia/Eucla"]},AW:{name:"Aruba",abbr:"AW",zones:["America/Curacao"]},AX:{name:"Aaland Islands",abbr:"AX",zones:["Europe/Helsinki"]},AZ:{name:"Azerbaijan",abbr:"AZ",zones:["Asia/Baku"]},BA:{name:"Bosnia & Herzegovina",abbr:"BA",zones:["Europe/Belgrade"]},BB:{name:"Barbados",abbr:"BB",zones:["America/Barbados"]},BD:{name:"Bangladesh",abbr:"BD",zones:["Asia/Dhaka"]},BE:{name:"Belgium",abbr:"BE",zones:["Europe/Brussels"]},BF:{name:"Burkina Faso",abbr:"BF",zones:["Africa/Abidjan"]},BG:{name:"Bulgaria",abbr:"BG",zones:["Europe/Sofia"]},BH:{name:"Bahrain",abbr:"BH",zones:["Asia/Qatar"]},BI:{name:"Burundi",abbr:"BI",zones:["Africa/Maputo"]},BJ:{name:"Benin",abbr:"BJ",zones:["Africa/Lagos"]},BL:{name:"St Barthelemy",abbr:"BL",zones:["America/Port_of_Spain"]},BM:{name:"Bermuda",abbr:"BM",zones:["Atlantic/Bermuda"]},BN:{name:"Brunei",abbr:"BN",zones:["Asia/Brunei"]},BO:{name:"Bolivia",abbr:"BO",zones:["America/La_Paz"]},BQ:{name:"Caribbean Netherlands",abbr:"BQ",zones:["America/Curacao"]},BR:{name:"Brazil",abbr:"BR",zones:["America/Noronha","America/Belem","America/Fortaleza","America/Recife","America/Araguaina","America/Maceio","America/Bahia","America/Sao_Paulo","America/Campo_Grande","America/Cuiaba","America/Santarem","America/Porto_Velho","America/Boa_Vista","America/Manaus","America/Eirunepe","America/Rio_Branco"]},BS:{name:"Bahamas",abbr:"BS",zones:["America/Nassau"]},BT:{name:"Bhutan",abbr:"BT",zones:["Asia/Thimphu"]},BW:{name:"Botswana",abbr:"BW",zones:["Africa/Maputo"]},BY:{name:"Belarus",abbr:"BY",zones:["Europe/Minsk"]},BZ:{name:"Belize",abbr:"BZ",zones:["America/Belize"]},CA:{name:"Canada",abbr:"CA",zones:["America/St_Johns","America/Halifax","America/Glace_Bay","America/Moncton","America/Goose_Bay","America/Blanc-Sablon","America/Toronto","America/Nipigon","America/Thunder_Bay","America/Iqaluit","America/Pangnirtung","America/Resolute","America/Atikokan","America/Rankin_Inlet","America/Winnipeg","America/Rainy_River","America/Regina","America/Swift_Current","America/Edmonton","America/Cambridge_Bay","America/Yellowknife","America/Inuvik","America/Creston","America/Dawson_Creek","America/Vancouver","America/Whitehorse","America/Dawson"]
},CC:{name:"Cocos (Keeling) Islands",abbr:"CC",zones:["Indian/Cocos"]},CD:{name:"Congo (Dem. Rep.)",abbr:"CD",zones:["Africa/Maputo","Africa/Lagos"]},CF:{name:"Central African Rep.",abbr:"CF",zones:["Africa/Lagos"]},CG:{name:"Congo (Rep.)",abbr:"CG",zones:["Africa/Lagos"]},CH:{name:"Switzerland",abbr:"CH",zones:["Europe/Zurich"]},CI:{name:"Cote d'Ivoire",abbr:"CI",zones:["Africa/Abidjan"]},CK:{name:"Cook Islands",abbr:"CK",zones:["Pacific/Rarotonga"]},CL:{name:"Chile",abbr:"CL",zones:["America/Santiago","Pacific/Easter"]},CM:{name:"Cameroon",abbr:"CM",zones:["Africa/Lagos"]},CN:{name:"China",abbr:"CN",zones:["Asia/Shanghai","Asia/Urumqi"]},CO:{name:"Colombia",abbr:"CO",zones:["America/Bogota"]},CR:{name:"Costa Rica",abbr:"CR",zones:["America/Costa_Rica"]},CU:{name:"Cuba",abbr:"CU",zones:["America/Havana"]},CV:{name:"Cape Verde",abbr:"CV",zones:["Atlantic/Cape_Verde"]},CW:{name:"Curacao",abbr:"CW",zones:["America/Curacao"]},CX:{name:"Christmas Island",abbr:"CX",zones:["Indian/Christmas"]},CY:{name:"Cyprus",abbr:"CY",zones:["Asia/Nicosia"]},CZ:{name:"Czech Republic",abbr:"CZ",zones:["Europe/Prague"]},DE:{name:"Germany",abbr:"DE",zones:["Europe/Zurich","Europe/Berlin"]},DJ:{name:"Djibouti",abbr:"DJ",zones:["Africa/Nairobi"]},DK:{name:"Denmark",abbr:"DK",zones:["Europe/Copenhagen"]},DM:{name:"Dominica",abbr:"DM",zones:["America/Port_of_Spain"]},DO:{name:"Dominican Republic",abbr:"DO",zones:["America/Santo_Domingo"]},DZ:{name:"Algeria",abbr:"DZ",zones:["Africa/Algiers"]},EC:{name:"Ecuador",abbr:"EC",zones:["America/Guayaquil","Pacific/Galapagos"]},EE:{name:"Estonia",abbr:"EE",zones:["Europe/Tallinn"]},EG:{name:"Egypt",abbr:"EG",zones:["Africa/Cairo"]},EH:{name:"Western Sahara",abbr:"EH",zones:["Africa/El_Aaiun"]},ER:{name:"Eritrea",abbr:"ER",zones:["Africa/Nairobi"]},ES:{name:"Spain",abbr:"ES",zones:["Europe/Madrid","Africa/Ceuta","Atlantic/Canary"]},ET:{name:"Ethiopia",abbr:"ET",zones:["Africa/Nairobi"]},FI:{name:"Finland",abbr:"FI",zones:["Europe/Helsinki"]},FJ:{name:"Fiji",abbr:"FJ",zones:["Pacific/Fiji"]},FK:{name:"Falkland Islands",abbr:"FK",zones:["Atlantic/Stanley"]},FM:{name:"Micronesia",abbr:"FM",zones:["Pacific/Chuuk","Pacific/Pohnpei","Pacific/Kosrae"]},FO:{name:"Faroe Islands",abbr:"FO",zones:["Atlantic/Faroe"]},FR:{name:"France",abbr:"FR",zones:["Europe/Paris"]},GA:{name:"Gabon",abbr:"GA",zones:["Africa/Lagos"]},GB:{name:"Britain (UK)",abbr:"GB",zones:["Europe/London"]},GD:{name:"Grenada",abbr:"GD",zones:["America/Port_of_Spain"]},GE:{name:"Georgia",abbr:"GE",zones:["Asia/Tbilisi"]},GF:{name:"French Guiana",abbr:"GF",zones:["America/Cayenne"]},GG:{name:"Guernsey",abbr:"GG",zones:["Europe/London"]},GH:{name:"Ghana",abbr:"GH",zones:["Africa/Accra"]},GI:{name:"Gibraltar",abbr:"GI",zones:["Europe/Gibraltar"]},GL:{name:"Greenland",abbr:"GL",zones:["America/Godthab","America/Danmarkshavn","America/Scoresbysund","America/Thule"]},GM:{name:"Gambia",abbr:"GM",zones:["Africa/Abidjan"]},GN:{name:"Guinea",abbr:"GN",zones:["Africa/Abidjan"]},GP:{name:"Guadeloupe",abbr:"GP",zones:["America/Port_of_Spain"]},GQ:{name:"Equatorial Guinea",abbr:"GQ",zones:["Africa/Lagos"]},GR:{name:"Greece",abbr:"GR",zones:["Europe/Athens"]},GS:{name:"South Georgia & the South Sandwich Islands",abbr:"GS",zones:["Atlantic/South_Georgia"]},GT:{name:"Guatemala",abbr:"GT",zones:["America/Guatemala"]},GU:{name:"Guam",abbr:"GU",zones:["Pacific/Guam"]},GW:{name:"Guinea-Bissau",abbr:"GW",zones:["Africa/Bissau"]},GY:{name:"Guyana",abbr:"GY",zones:["America/Guyana"]},HK:{name:"Hong Kong",abbr:"HK",zones:["Asia/Hong_Kong"]},HN:{name:"Honduras",abbr:"HN",zones:["America/Tegucigalpa"]},HR:{name:"Croatia",abbr:"HR",zones:["Europe/Belgrade"]},HT:{name:"Haiti",abbr:"HT",zones:["America/Port-au-Prince"]},HU:{name:"Hungary",abbr:"HU",zones:["Europe/Budapest"]},ID:{name:"Indonesia",abbr:"ID",zones:["Asia/Jakarta","Asia/Pontianak","Asia/Makassar","Asia/Jayapura"]},IE:{name:"Ireland",abbr:"IE",zones:["Europe/Dublin"]},IL:{name:"Israel",abbr:"IL",zones:["Asia/Jerusalem"]},IM:{name:"Isle of Man",abbr:"IM",zones:["Europe/London"]},IN:{name:"India",abbr:"IN",zones:["Asia/Kolkata"]},IO:{name:"British Indian Ocean Territory",abbr:"IO",zones:["Indian/Chagos"]},IQ:{name:"Iraq",abbr:"IQ",zones:["Asia/Baghdad"]},IR:{name:"Iran",abbr:"IR",zones:["Asia/Tehran"]},IS:{name:"Iceland",abbr:"IS",zones:["Atlantic/Reykjavik"]},IT:{name:"Italy",abbr:"IT",zones:["Europe/Rome"]},JE:{name:"Jersey",abbr:"JE",zones:["Europe/London"]},JM:{name:"Jamaica",abbr:"JM",zones:["America/Jamaica"]},JO:{name:"Jordan",abbr:"JO",zones:["Asia/Amman"]},JP:{name:"Japan",abbr:"JP",zones:["Asia/Tokyo"]},KE:{name:"Kenya",abbr:"KE",zones:["Africa/Nairobi"]},KG:{name:"Kyrgyzstan",abbr:"KG",zones:["Asia/Bishkek"]},KH:{name:"Cambodia",abbr:"KH",zones:["Asia/Bangkok"]},KI:{name:"Kiribati",abbr:"KI",zones:["Pacific/Tarawa","Pacific/Enderbury","Pacific/Kiritimati"]},KM:{name:"Comoros",abbr:"KM",zones:["Africa/Nairobi"]},KN:{name:"St Kitts & Nevis",abbr:"KN",zones:["America/Port_of_Spain"]},KP:{name:"Korea (North)",abbr:"KP",zones:["Asia/Pyongyang"]},KR:{name:"Korea (South)",abbr:"KR",zones:["Asia/Seoul"]},KW:{name:"Kuwait",abbr:"KW",zones:["Asia/Riyadh"]},KY:{name:"Cayman Islands",abbr:"KY",zones:["America/Panama"]},KZ:{name:"Kazakhstan",abbr:"KZ",zones:["Asia/Almaty","Asia/Qyzylorda","Asia/Aqtobe","Asia/Aqtau","Asia/Oral"]},LA:{name:"Laos",abbr:"LA",zones:["Asia/Bangkok"]},LB:{name:"Lebanon",abbr:"LB",zones:["Asia/Beirut"]},LC:{name:"St Lucia",abbr:"LC",zones:["America/Port_of_Spain"]},LI:{name:"Liechtenstein",abbr:"LI",zones:["Europe/Zurich"]},LK:{name:"Sri Lanka",abbr:"LK",zones:["Asia/Colombo"]},LR:{name:"Liberia",abbr:"LR",zones:["Africa/Monrovia"]},LS:{name:"Lesotho",abbr:"LS",zones:["Africa/Johannesburg"]},LT:{name:"Lithuania",abbr:"LT",zones:["Europe/Vilnius"]},LU:{name:"Luxembourg",abbr:"LU",zones:["Europe/Luxembourg"]},LV:{name:"Latvia",abbr:"LV",zones:["Europe/Riga"]},LY:{name:"Libya",abbr:"LY",zones:["Africa/Tripoli"]},MA:{name:"Morocco",abbr:"MA",zones:["Africa/Casablanca"]},MC:{name:"Monaco",abbr:"MC",zones:["Europe/Monaco"]},MD:{name:"Moldova",abbr:"MD",zones:["Europe/Chisinau"]},ME:{name:"Montenegro",abbr:"ME",zones:["Europe/Belgrade"]},MF:{name:"St Martin (French part)",abbr:"MF",zones:["America/Port_of_Spain"]},MG:{name:"Madagascar",abbr:"MG",zones:["Africa/Nairobi"]},MH:{name:"Marshall Islands",abbr:"MH",zones:["Pacific/Majuro","Pacific/Kwajalein"]},MK:{name:"Macedonia",abbr:"MK",zones:["Europe/Belgrade"]},ML:{name:"Mali",abbr:"ML",zones:["Africa/Abidjan"]},MM:{name:"Myanmar (Burma)",abbr:"MM",zones:["Asia/Rangoon"]},MN:{name:"Mongolia",abbr:"MN",zones:["Asia/Ulaanbaatar","Asia/Hovd","Asia/Choibalsan"]},MO:{name:"Macau",abbr:"MO",zones:["Asia/Macau"]},MP:{name:"Northern Mariana Islands",abbr:"MP",zones:["Pacific/Guam"]},MQ:{name:"Martinique",abbr:"MQ",zones:["America/Martinique"]},MR:{name:"Mauritania",abbr:"MR",zones:["Africa/Abidjan"]},MS:{name:"Montserrat",abbr:"MS",zones:["America/Port_of_Spain"]},MT:{name:"Malta",abbr:"MT",zones:["Europe/Malta"]},MU:{name:"Mauritius",abbr:"MU",zones:["Indian/Mauritius"]},MV:{name:"Maldives",abbr:"MV",zones:["Indian/Maldives"]},MW:{name:"Malawi",abbr:"MW",zones:["Africa/Maputo"]},MX:{name:"Mexico",abbr:"MX",zones:["America/Mexico_City","America/Cancun","America/Merida","America/Monterrey","America/Matamoros","America/Mazatlan","America/Chihuahua","America/Ojinaga","America/Hermosillo","America/Tijuana","America/Santa_Isabel","America/Bahia_Banderas"]},MY:{name:"Malaysia",abbr:"MY",zones:["Asia/Kuala_Lumpur","Asia/Kuching"]},MZ:{name:"Mozambique",abbr:"MZ",zones:["Africa/Maputo"]},NA:{name:"Namibia",abbr:"NA",zones:["Africa/Windhoek"]},NC:{name:"New Caledonia",abbr:"NC",zones:["Pacific/Noumea"]},NE:{name:"Niger",abbr:"NE",zones:["Africa/Lagos"]},NF:{name:"Norfolk Island",abbr:"NF",zones:["Pacific/Norfolk"]},NG:{name:"Nigeria",abbr:"NG",zones:["Africa/Lagos"]},NI:{name:"Nicaragua",abbr:"NI",zones:["America/Managua"]},NL:{name:"Netherlands",abbr:"NL",zones:["Europe/Amsterdam"]},NO:{name:"Norway",abbr:"NO",zones:["Europe/Oslo"]},NP:{name:"Nepal",abbr:"NP",zones:["Asia/Kathmandu"]},NR:{name:"Nauru",abbr:"NR",zones:["Pacific/Nauru"]},NU:{name:"Niue",abbr:"NU",zones:["Pacific/Niue"]},NZ:{name:"New Zealand",abbr:"NZ",zones:["Pacific/Auckland","Pacific/Chatham"]},OM:{name:"Oman",abbr:"OM",zones:["Asia/Dubai"]},PA:{name:"Panama",abbr:"PA",zones:["America/Panama"]},PE:{name:"Peru",abbr:"PE",zones:["America/Lima"]},PF:{name:"French Polynesia",abbr:"PF",zones:["Pacific/Tahiti","Pacific/Marquesas","Pacific/Gambier"]},PG:{name:"Papua New Guinea",abbr:"PG",zones:["Pacific/Port_Moresby","Pacific/Bougainville"]},PH:{name:"Philippines",abbr:"PH",zones:["Asia/Manila"]},PK:{name:"Pakistan",abbr:"PK",zones:["Asia/Karachi"]},PL:{name:"Poland",abbr:"PL",zones:["Europe/Warsaw"]},PM:{name:"St Pierre & Miquelon",abbr:"PM",zones:["America/Miquelon"]},PN:{name:"Pitcairn",abbr:"PN",zones:["Pacific/Pitcairn"]},PR:{name:"Puerto Rico",abbr:"PR",zones:["America/Puerto_Rico"]},PS:{name:"Palestine",abbr:"PS",zones:["Asia/Gaza","Asia/Hebron"]},PT:{name:"Portugal",abbr:"PT",zones:["Europe/Lisbon","Atlantic/Madeira","Atlantic/Azores"]},PW:{name:"Palau",abbr:"PW",zones:["Pacific/Palau"]},PY:{name:"Paraguay",abbr:"PY",zones:["America/Asuncion"]},QA:{name:"Qatar",abbr:"QA",zones:["Asia/Qatar"]},RE:{name:"Reunion",abbr:"RE",zones:["Indian/Reunion"]},RO:{name:"Romania",abbr:"RO",zones:["Europe/Bucharest"]},RS:{name:"Serbia",abbr:"RS",zones:["Europe/Belgrade"]},RU:{name:"Russia",abbr:"RU",zones:["Europe/Kaliningrad","Europe/Moscow","Europe/Simferopol","Europe/Volgograd","Europe/Samara","Asia/Yekaterinburg","Asia/Omsk","Asia/Novosibirsk","Asia/Novokuznetsk","Asia/Krasnoyarsk","Asia/Irkutsk","Asia/Chita","Asia/Yakutsk","Asia/Khandyga","Asia/Vladivostok","Asia/Sakhalin","Asia/Ust-Nera","Asia/Magadan","Asia/Srednekolymsk","Asia/Kamchatka","Asia/Anadyr"]},RW:{name:"Rwanda",abbr:"RW",zones:["Africa/Maputo"]},SA:{name:"Saudi Arabia",abbr:"SA",zones:["Asia/Riyadh"]},SB:{name:"Solomon Islands",abbr:"SB",zones:["Pacific/Guadalcanal"]},SC:{name:"Seychelles",abbr:"SC",zones:["Indian/Mahe"]},SD:{name:"Sudan",abbr:"SD",zones:["Africa/Khartoum"]},SE:{name:"Sweden",abbr:"SE",zones:["Europe/Stockholm"]},SG:{name:"Singapore",abbr:"SG",zones:["Asia/Singapore"]},SH:{name:"St Helena",abbr:"SH",zones:["Africa/Abidjan"]},SI:{name:"Slovenia",abbr:"SI",zones:["Europe/Belgrade"]},SJ:{name:"Svalbard & Jan Mayen",abbr:"SJ",zones:["Europe/Oslo"]},SK:{name:"Slovakia",abbr:"SK",zones:["Europe/Prague"]},SL:{name:"Sierra Leone",abbr:"SL",zones:["Africa/Abidjan"]},SM:{name:"San Marino",abbr:"SM",zones:["Europe/Rome"]},SN:{name:"Senegal",abbr:"SN",zones:["Africa/Abidjan"]},SO:{name:"Somalia",abbr:"SO",zones:["Africa/Nairobi"]},SR:{name:"Suriname",abbr:"SR",zones:["America/Paramaribo"]},SS:{name:"South Sudan",abbr:"SS",zones:["Africa/Khartoum"]},ST:{name:"Sao Tome & Principe",abbr:"ST",zones:["Africa/Abidjan"]},SV:{name:"El Salvador",abbr:"SV",zones:["America/El_Salvador"]},SX:{name:"St Maarten (Dutch part)",abbr:"SX",zones:["America/Curacao"]},SY:{name:"Syria",abbr:"SY",zones:["Asia/Damascus"]},SZ:{name:"Swaziland",abbr:"SZ",zones:["Africa/Johannesburg"]},TC:{name:"Turks & Caicos Is",abbr:"TC",zones:["America/Grand_Turk"]},TD:{name:"Chad",abbr:"TD",zones:["Africa/Ndjamena"]},TF:{name:"French Southern & Antarctic Lands",abbr:"TF",zones:["Indian/Reunion","Indian/Kerguelen"]},TG:{name:"Togo",abbr:"TG",zones:["Africa/Abidjan"]},TH:{name:"Thailand",abbr:"TH",zones:["Asia/Bangkok"]},TJ:{name:"Tajikistan",abbr:"TJ",zones:["Asia/Dushanbe"]},TK:{name:"Tokelau",abbr:"TK",zones:["Pacific/Fakaofo"]},TL:{name:"East Timor",abbr:"TL",zones:["Asia/Dili"]},TM:{name:"Turkmenistan",abbr:"TM",zones:["Asia/Ashgabat"]},TN:{name:"Tunisia",abbr:"TN",zones:["Africa/Tunis"]},TO:{name:"Tonga",abbr:"TO",zones:["Pacific/Tongatapu"]},TR:{name:"Turkey",abbr:"TR",zones:["Europe/Istanbul"]},TT:{name:"Trinidad & Tobago",abbr:"TT",zones:["America/Port_of_Spain"]},TV:{name:"Tuvalu",abbr:"TV",zones:["Pacific/Funafuti"]},TW:{name:"Taiwan",abbr:"TW",zones:["Asia/Taipei"]},TZ:{name:"Tanzania",abbr:"TZ",zones:["Africa/Nairobi"]},UA:{name:"Ukraine",abbr:"UA",zones:["Europe/Kiev","Europe/Uzhgorod","Europe/Zaporozhye"]},UG:{name:"Uganda",abbr:"UG",zones:["Africa/Nairobi"]},UM:{name:"US minor outlying islands",abbr:"UM",zones:["Pacific/Pago_Pago","Pacific/Wake","Pacific/Honolulu"]},US:{name:"United States",abbr:"US",zones:["America/New_York","America/Detroit","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Indiana/Indianapolis","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Vevay","America/Chicago","America/Indiana/Tell_City","America/Indiana/Knox","America/Menominee","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/North_Dakota/Beulah","America/Denver","America/Boise","America/Phoenix","America/Los_Angeles","America/Metlakatla","America/Anchorage","America/Juneau","America/Sitka","America/Yakutat","America/Nome","America/Adak","Pacific/Honolulu"]},UY:{name:"Uruguay",abbr:"UY",zones:["America/Montevideo"]},UZ:{name:"Uzbekistan",abbr:"UZ",zones:["Asia/Samarkand","Asia/Tashkent"]},VA:{name:"Vatican City",abbr:"VA",zones:["Europe/Rome"]},VC:{name:"St Vincent",abbr:"VC",zones:["America/Port_of_Spain"]},VE:{name:"Venezuela",abbr:"VE",zones:["America/Caracas"]},VG:{name:"Virgin Islands (UK)",abbr:"VG",zones:["America/Port_of_Spain"]},VI:{name:"Virgin Islands (US)",abbr:"VI",zones:["America/Port_of_Spain"]},VN:{name:"Vietnam",abbr:"VN",zones:["Asia/Bangkok","Asia/Ho_Chi_Minh"]},VU:{name:"Vanuatu",abbr:"VU",zones:["Pacific/Efate"]},WF:{name:"Wallis & Futuna",abbr:"WF",zones:["Pacific/Wallis"]},WS:{name:"Samoa (western)",abbr:"WS",zones:["Pacific/Apia"]},YE:{name:"Yemen",abbr:"YE",zones:["Asia/Riyadh"]},YT:{name:"Mayotte",abbr:"YT",zones:["Africa/Nairobi"]},ZA:{name:"South Africa",abbr:"ZA",zones:["Africa/Johannesburg"]},ZM:{name:"Zambia",abbr:"ZM",zones:["Africa/Maputo"]},ZW:{name:"Zimbabwe",abbr:"ZW",zones:["Africa/Maputo"]}},zones:{"Europe/Andorra":{name:"Europe/Andorra",lat:42.5,"long":1.5167,countries:["AD"],comments:""},"Asia/Dubai":{name:"Asia/Dubai",lat:25.3,"long":55.3,countries:["AE","OM"],comments:""},"Asia/Kabul":{name:"Asia/Kabul",lat:34.5167,"long":69.2,countries:["AF"],comments:""},"Europe/Tirane":{name:"Europe/Tirane",lat:41.3333,"long":19.8333,countries:["AL"],comments:""},"Asia/Yerevan":{name:"Asia/Yerevan",lat:40.1833,"long":44.5,countries:["AM"],comments:""},"Antarctica/Rothera":{name:"Antarctica/Rothera",lat:-66.4333,"long":-67.8667,countries:["AQ"],comments:"Rothera Station, Adelaide Island"},"Antarctica/Palmer":{name:"Antarctica/Palmer",lat:-63.2,"long":-63.9,countries:["AQ"],comments:"Palmer Station, Anvers Island"},"Antarctica/Mawson":{name:"Antarctica/Mawson",lat:-66.4,"long":62.8833,countries:["AQ"],comments:"Mawson Station, Holme Bay"},"Antarctica/Davis":{name:"Antarctica/Davis",lat:-67.4167,"long":77.9667,countries:["AQ"],comments:"Davis Station, Vestfold Hills"},"Antarctica/Casey":{name:"Antarctica/Casey",lat:-65.7167,"long":110.5167,countries:["AQ"],comments:"Casey Station, Bailey Peninsula"},"Antarctica/Vostok":{name:"Antarctica/Vostok",lat:-77.6,"long":106.9,countries:["AQ"],comments:"Vostok Station, Lake Vostok"},"Antarctica/DumontDUrville":{name:"Antarctica/DumontDUrville",lat:-65.3333,"long":140.0167,countries:["AQ"],comments:"Dumont-d'Urville Station, Adélie Land"},"Antarctica/Syowa":{name:"Antarctica/Syowa",lat:-68.9939,"long":39.59,countries:["AQ"],comments:"Syowa Station, E Ongul I"},"Antarctica/Troll":{name:"Antarctica/Troll",lat:-71.9886,"long":2.535,countries:["AQ"],comments:"Troll Station, Queen Maud Land"},"America/Argentina/Buenos_Aires":{name:"America/Argentina/Buenos_Aires",lat:-33.4,"long":-57.55,countries:["AR"],comments:"Buenos Aires (BA, CF)"},"America/Argentina/Cordoba":{name:"America/Argentina/Cordoba",lat:-30.6,"long":-63.8167,countries:["AR"],comments:"most locations (CB, CC, CN, ER, FM, MN, SE, SF)"},"America/Argentina/Salta":{name:"America/Argentina/Salta",lat:-23.2167,"long":-64.5833,countries:["AR"],comments:"(SA, LP, NQ, RN)"},"America/Argentina/Jujuy":{name:"America/Argentina/Jujuy",lat:-23.8167,"long":-64.7,countries:["AR"],comments:"Jujuy (JY)"},"America/Argentina/Tucuman":{name:"America/Argentina/Tucuman",lat:-25.1833,"long":-64.7833,countries:["AR"],comments:"Tucumán (TM)"},"America/Argentina/Catamarca":{name:"America/Argentina/Catamarca",lat:-27.5333,"long":-64.2167,countries:["AR"],comments:"Catamarca (CT), Chubut (CH)"},"America/Argentina/La_Rioja":{name:"America/Argentina/La_Rioja",lat:-28.5667,"long":-65.15,countries:["AR"],comments:"La Rioja (LR)"},"America/Argentina/San_Juan":{name:"America/Argentina/San_Juan",lat:-30.4667,"long":-67.4833,countries:["AR"],comments:"San Juan (SJ)"},"America/Argentina/Mendoza":{name:"America/Argentina/Mendoza",lat:-31.1167,"long":-67.1833,countries:["AR"],comments:"Mendoza (MZ)"},"America/Argentina/San_Luis":{name:"America/Argentina/San_Luis",lat:-32.6833,"long":-65.65,countries:["AR"],comments:"San Luis (SL)"},"America/Argentina/Rio_Gallegos":{name:"America/Argentina/Rio_Gallegos",lat:-50.3667,"long":-68.7833,countries:["AR"],comments:"Santa Cruz (SC)"},"America/Argentina/Ushuaia":{name:"America/Argentina/Ushuaia",lat:-53.2,"long":-67.7,countries:["AR"],comments:"Tierra del Fuego (TF)"},"Pacific/Pago_Pago":{name:"Pacific/Pago_Pago",lat:-13.7333,"long":-169.3,countries:["AS","UM"],comments:"Samoa, Midway"},"Europe/Vienna":{name:"Europe/Vienna",lat:48.2167,"long":16.3333,countries:["AT"],comments:""},"Australia/Lord_Howe":{name:"Australia/Lord_Howe",lat:-30.45,"long":159.0833,countries:["AU"],comments:"Lord Howe Island"},"Antarctica/Macquarie":{name:"Antarctica/Macquarie",lat:-53.5,"long":158.95,countries:["AU"],comments:"Macquarie Island"},"Australia/Hobart":{name:"Australia/Hobart",lat:-41.1167,"long":147.3167,countries:["AU"],comments:"Tasmania - most locations"},"Australia/Currie":{name:"Australia/Currie",lat:-38.0667,"long":143.8667,countries:["AU"],comments:"Tasmania - King Island"},"Australia/Melbourne":{name:"Australia/Melbourne",lat:-36.1833,"long":144.9667,countries:["AU"],comments:"Victoria"},"Australia/Sydney":{name:"Australia/Sydney",lat:-32.1333,"long":151.2167,countries:["AU"],comments:"New South Wales - most locations"},"Australia/Broken_Hill":{name:"Australia/Broken_Hill",lat:-30.05,"long":141.45,countries:["AU"],comments:"New South Wales - Yancowinna"},"Australia/Brisbane":{name:"Australia/Brisbane",lat:-26.5333,"long":153.0333,countries:["AU"],comments:"Queensland - most locations"},"Australia/Lindeman":{name:"Australia/Lindeman",lat:-19.7333,"long":149,countries:["AU"],comments:"Queensland - Holiday Islands"},"Australia/Adelaide":{name:"Australia/Adelaide",lat:-33.0833,"long":138.5833,countries:["AU"],comments:"South Australia"},"Australia/Darwin":{name:"Australia/Darwin",lat:-11.5333,"long":130.8333,countries:["AU"],comments:"Northern Territory"},"Australia/Perth":{name:"Australia/Perth",lat:-30.05,"long":115.85,countries:["AU"],comments:"Western Australia - most locations"},"Australia/Eucla":{name:"Australia/Eucla",lat:-30.2833,"long":128.8667,countries:["AU"],comments:"Western Australia - Eucla area"},"Asia/Baku":{name:"Asia/Baku",lat:40.3833,"long":49.85,countries:["AZ"],comments:""},"America/Barbados":{name:"America/Barbados",lat:13.1,"long":-58.3833,countries:["BB"],comments:""},"Asia/Dhaka":{name:"Asia/Dhaka",lat:23.7167,"long":90.4167,countries:["BD"],comments:""},"Europe/Brussels":{name:"Europe/Brussels",lat:50.8333,"long":4.3333,countries:["BE"],comments:""},"Europe/Sofia":{name:"Europe/Sofia",lat:42.6833,"long":23.3167,countries:["BG"],comments:""},"Atlantic/Bermuda":{name:"Atlantic/Bermuda",lat:32.2833,"long":-63.2333,countries:["BM"],comments:""},"Asia/Brunei":{name:"Asia/Brunei",lat:4.9333,"long":114.9167,countries:["BN"],comments:""},"America/La_Paz":{name:"America/La_Paz",lat:-15.5,"long":-67.85,countries:["BO"],comments:""},"America/Noronha":{name:"America/Noronha",lat:-2.15,"long":-31.5833,countries:["BR"],comments:"Atlantic islands"},"America/Belem":{name:"America/Belem",lat:-.55,"long":-47.5167,countries:["BR"],comments:"Amapá, E Pará"},"America/Fortaleza":{name:"America/Fortaleza",lat:-2.2833,"long":-37.5,countries:["BR"],comments:"NE Brazil (MA, PI, CE, RN, PB)"},"America/Recife":{name:"America/Recife",lat:-7.95,"long":-33.1,countries:["BR"],comments:"Pernambuco"},"America/Araguaina":{name:"America/Araguaina",lat:-6.8,"long":-47.8,countries:["BR"],comments:"Tocantins"},"America/Maceio":{name:"America/Maceio",lat:-8.3333,"long":-34.2833,countries:["BR"],comments:"Alagoas, Sergipe"},"America/Bahia":{name:"America/Bahia",lat:-11.0167,"long":-37.4833,countries:["BR"],comments:"Bahia"},"America/Sao_Paulo":{name:"America/Sao_Paulo",lat:-22.4667,"long":-45.3833,countries:["BR"],comments:"S & SE Brazil (GO, DF, MG, ES, RJ, SP, PR, SC, RS)"},"America/Campo_Grande":{name:"America/Campo_Grande",lat:-19.55,"long":-53.3833,countries:["BR"],comments:"Mato Grosso do Sul"},"America/Cuiaba":{name:"America/Cuiaba",lat:-14.4167,"long":-55.9167,countries:["BR"],comments:"Mato Grosso"},"America/Santarem":{name:"America/Santarem",lat:-1.5667,"long":-53.1333,countries:["BR"],comments:"W Pará"},"America/Porto_Velho":{name:"America/Porto_Velho",lat:-7.2333,"long":-62.1,countries:["BR"],comments:"Rondônia"},"America/Boa_Vista":{name:"America/Boa_Vista",lat:2.8167,"long":-59.3333,countries:["BR"],comments:"Roraima"},"America/Manaus":{name:"America/Manaus",lat:-2.8667,"long":-59.9833,countries:["BR"],comments:"E Amazonas"},"America/Eirunepe":{name:"America/Eirunepe",lat:-5.3333,"long":-68.1333,countries:["BR"],comments:"W Amazonas"},"America/Rio_Branco":{name:"America/Rio_Branco",lat:-8.0333,"long":-66.2,countries:["BR"],comments:"Acre"},"America/Nassau":{name:"America/Nassau",lat:25.0833,"long":-76.65,countries:["BS"],comments:""},"Asia/Thimphu":{name:"Asia/Thimphu",lat:27.4667,"long":89.65,countries:["BT"],comments:""},"Europe/Minsk":{name:"Europe/Minsk",lat:53.9,"long":27.5667,countries:["BY"],comments:""},"America/Belize":{name:"America/Belize",lat:17.5,"long":-87.8,countries:["BZ"],comments:""},"America/St_Johns":{name:"America/St_Johns",lat:47.5667,"long":-51.2833,countries:["CA"],comments:"Newfoundland Time, including SE Labrador"},"America/Halifax":{name:"America/Halifax",lat:44.65,"long":-62.4,countries:["CA"],comments:"Atlantic Time - Nova Scotia (most places), PEI"},"America/Glace_Bay":{name:"America/Glace_Bay",lat:46.2,"long":-58.05,countries:["CA"],comments:"Atlantic Time - Nova Scotia - places that did not observe DST 1966-1971"},"America/Moncton":{name:"America/Moncton",lat:46.1,"long":-63.2167,countries:["CA"],comments:"Atlantic Time - New Brunswick"},"America/Goose_Bay":{name:"America/Goose_Bay",lat:53.3333,"long":-59.5833,countries:["CA"],comments:"Atlantic Time - Labrador - most locations"},"America/Blanc-Sablon":{name:"America/Blanc-Sablon",lat:51.4167,"long":-56.8833,countries:["CA"],comments:"Atlantic Standard Time - Quebec - Lower North Shore"},"America/Toronto":{name:"America/Toronto",lat:43.65,"long":-78.6167,countries:["CA"],comments:"Eastern Time - Ontario & Quebec - most locations"},"America/Nipigon":{name:"America/Nipigon",lat:49.0167,"long":-87.7333,countries:["CA"],comments:"Eastern Time - Ontario & Quebec - places that did not observe DST 1967-1973"},"America/Thunder_Bay":{name:"America/Thunder_Bay",lat:48.3833,"long":-88.75,countries:["CA"],comments:"Eastern Time - Thunder Bay, Ontario"},"America/Iqaluit":{name:"America/Iqaluit",lat:63.7333,"long":-67.5333,countries:["CA"],comments:"Eastern Time - east Nunavut - most locations"},"America/Pangnirtung":{name:"America/Pangnirtung",lat:66.1333,"long":-64.2667,countries:["CA"],comments:"Eastern Time - Pangnirtung, Nunavut"},"America/Resolute":{name:"America/Resolute",lat:74.6956,"long":-93.1708,countries:["CA"],comments:"Central Time - Resolute, Nunavut"},"America/Atikokan":{name:"America/Atikokan",lat:48.7586,"long":-90.3783,countries:["CA"],comments:"Eastern Standard Time - Atikokan, Ontario and Southampton I, Nunavut"},"America/Rankin_Inlet":{name:"America/Rankin_Inlet",lat:62.8167,"long":-91.9169,countries:["CA"],comments:"Central Time - central Nunavut"},"America/Winnipeg":{name:"America/Winnipeg",lat:49.8833,"long":-96.85,countries:["CA"],comments:"Central Time - Manitoba & west Ontario"},"America/Rainy_River":{name:"America/Rainy_River",lat:48.7167,"long":-93.4333,countries:["CA"],comments:"Central Time - Rainy River & Fort Frances, Ontario"},"America/Regina":{name:"America/Regina",lat:50.4,"long":-103.35,countries:["CA"],comments:"Central Standard Time - Saskatchewan - most locations"},"America/Swift_Current":{name:"America/Swift_Current",lat:50.2833,"long":-106.1667,countries:["CA"],comments:"Central Standard Time - Saskatchewan - midwest"},"America/Edmonton":{name:"America/Edmonton",lat:53.55,"long":-112.5333,countries:["CA"],comments:"Mountain Time - Alberta, east British Columbia & west Saskatchewan"},"America/Cambridge_Bay":{name:"America/Cambridge_Bay",lat:69.1139,"long":-104.9472,countries:["CA"],comments:"Mountain Time - west Nunavut"},"America/Yellowknife":{name:"America/Yellowknife",lat:62.45,"long":-113.65,countries:["CA"],comments:"Mountain Time - central Northwest Territories"},"America/Inuvik":{name:"America/Inuvik",lat:68.3497,"long":-132.2833,countries:["CA"],comments:"Mountain Time - west Northwest Territories"},"America/Creston":{name:"America/Creston",lat:49.1,"long":-115.4833,countries:["CA"],comments:"Mountain Standard Time - Creston, British Columbia"},"America/Dawson_Creek":{name:"America/Dawson_Creek",lat:59.7667,"long":-119.7667,countries:["CA"],comments:"Mountain Standard Time - Dawson Creek & Fort Saint John, British Columbia"},"America/Vancouver":{name:"America/Vancouver",lat:49.2667,"long":-122.8833,countries:["CA"],comments:"Pacific Time - west British Columbia"},"America/Whitehorse":{name:"America/Whitehorse",lat:60.7167,"long":-134.95,countries:["CA"],comments:"Pacific Time - south Yukon"},"America/Dawson":{name:"America/Dawson",lat:64.0667,"long":-138.5833,countries:["CA"],comments:"Pacific Time - north Yukon"},"Indian/Cocos":{name:"Indian/Cocos",lat:-11.8333,"long":96.9167,countries:["CC"],comments:""},"Europe/Zurich":{name:"Europe/Zurich",lat:47.3833,"long":8.5333,countries:["CH","DE","LI"],comments:"Swiss time"},"Africa/Abidjan":{name:"Africa/Abidjan",lat:5.3167,"long":-3.9667,countries:["CI","BF","GM","GN","ML","MR","SH","SL","SN","ST","TG"],comments:""},"Pacific/Rarotonga":{name:"Pacific/Rarotonga",lat:-20.7667,"long":-158.2333,countries:["CK"],comments:""},"America/Santiago":{name:"America/Santiago",lat:-32.55,"long":-69.3333,countries:["CL"],comments:"most locations"},"Pacific/Easter":{name:"Pacific/Easter",lat:-26.85,"long":-108.5667,countries:["CL"],comments:"Easter Island"},"Asia/Shanghai":{name:"Asia/Shanghai",lat:31.2333,"long":121.4667,countries:["CN"],comments:"Beijing Time"},"Asia/Urumqi":{name:"Asia/Urumqi",lat:43.8,"long":87.5833,countries:["CN"],comments:"Xinjiang Time"},"America/Bogota":{name:"America/Bogota",lat:4.6,"long":-73.9167,countries:["CO"],comments:""},"America/Costa_Rica":{name:"America/Costa_Rica",lat:9.9333,"long":-83.9167,countries:["CR"],comments:""},"America/Havana":{name:"America/Havana",lat:23.1333,"long":-81.6333,countries:["CU"],comments:""},"Atlantic/Cape_Verde":{name:"Atlantic/Cape_Verde",lat:14.9167,"long":-22.4833,countries:["CV"],comments:""},"America/Curacao":{name:"America/Curacao",lat:12.1833,"long":-69,countries:["CW","AW","BQ","SX"],comments:""},"Indian/Christmas":{name:"Indian/Christmas",lat:-9.5833,"long":105.7167,countries:["CX"],comments:""},"Asia/Nicosia":{name:"Asia/Nicosia",lat:35.1667,"long":33.3667,countries:["CY"],comments:""},"Europe/Prague":{name:"Europe/Prague",lat:50.0833,"long":14.4333,countries:["CZ","SK"],comments:""},"Europe/Berlin":{name:"Europe/Berlin",lat:52.5,"long":13.3667,countries:["DE"],comments:"Berlin time"},"Europe/Copenhagen":{name:"Europe/Copenhagen",lat:55.6667,"long":12.5833,countries:["DK"],comments:""},"America/Santo_Domingo":{name:"America/Santo_Domingo",lat:18.4667,"long":-68.1,countries:["DO"],comments:""},"Africa/Algiers":{name:"Africa/Algiers",lat:36.7833,"long":3.05,countries:["DZ"],comments:""},"America/Guayaquil":{name:"America/Guayaquil",lat:-1.8333,"long":-78.1667,countries:["EC"],comments:"mainland"},"Pacific/Galapagos":{name:"Pacific/Galapagos",lat:.9,"long":-88.4,countries:["EC"],comments:"Galápagos Islands"},"Europe/Tallinn":{name:"Europe/Tallinn",lat:59.4167,"long":24.75,countries:["EE"],comments:""},"Africa/Cairo":{name:"Africa/Cairo",lat:30.05,"long":31.25,countries:["EG"],comments:""},"Africa/El_Aaiun":{name:"Africa/El_Aaiun",lat:27.15,"long":-12.8,countries:["EH"],comments:""},"Europe/Madrid":{name:"Europe/Madrid",lat:40.4,"long":-2.3167,countries:["ES"],comments:"mainland"},"Africa/Ceuta":{name:"Africa/Ceuta",lat:35.8833,"long":-4.6833,countries:["ES"],comments:"Ceuta & Melilla"},"Atlantic/Canary":{name:"Atlantic/Canary",lat:28.1,"long":-14.6,countries:["ES"],comments:"Canary Islands"},"Europe/Helsinki":{name:"Europe/Helsinki",lat:60.1667,"long":24.9667,countries:["FI","AX"],comments:""},"Pacific/Fiji":{name:"Pacific/Fiji",lat:-17.8667,"long":178.4167,countries:["FJ"],comments:""},"Atlantic/Stanley":{name:"Atlantic/Stanley",lat:-50.3,"long":-56.15,countries:["FK"],comments:""},"Pacific/Chuuk":{name:"Pacific/Chuuk",lat:7.4167,"long":151.7833,countries:["FM"],comments:"Chuuk (Truk) and Yap"},"Pacific/Pohnpei":{name:"Pacific/Pohnpei",lat:6.9667,"long":158.2167,countries:["FM"],comments:"Pohnpei (Ponape)"},"Pacific/Kosrae":{name:"Pacific/Kosrae",lat:5.3167,"long":162.9833,countries:["FM"],comments:"Kosrae"},"Atlantic/Faroe":{name:"Atlantic/Faroe",lat:62.0167,"long":-5.2333,countries:["FO"],comments:""},"Europe/Paris":{name:"Europe/Paris",lat:48.8667,"long":2.3333,countries:["FR"],comments:""},"Europe/London":{name:"Europe/London",lat:51.5083,"long":.1253,countries:["GB","GG","IM","JE"],comments:""},"Asia/Tbilisi":{name:"Asia/Tbilisi",lat:41.7167,"long":44.8167,countries:["GE"],comments:""},"America/Cayenne":{name:"America/Cayenne",lat:4.9333,"long":-51.6667,countries:["GF"],comments:""},"Africa/Accra":{name:"Africa/Accra",lat:5.55,"long":.2167,countries:["GH"],comments:""},"Europe/Gibraltar":{name:"Europe/Gibraltar",lat:36.1333,"long":-4.65,countries:["GI"],comments:""},"America/Godthab":{name:"America/Godthab",lat:64.1833,"long":-50.2667,countries:["GL"],comments:"most locations"},"America/Danmarkshavn":{name:"America/Danmarkshavn",lat:76.7667,"long":-17.3333,countries:["GL"],comments:"east coast, north of Scoresbysund"},"America/Scoresbysund":{name:"America/Scoresbysund",lat:70.4833,"long":-20.0333,countries:["GL"],comments:"Scoresbysund / Ittoqqortoormiit"},"America/Thule":{name:"America/Thule",lat:76.5667,"long":-67.2167,countries:["GL"],comments:"Thule / Pituffik"},"Europe/Athens":{name:"Europe/Athens",lat:37.9667,"long":23.7167,countries:["GR"],comments:""},"Atlantic/South_Georgia":{name:"Atlantic/South_Georgia",lat:-53.7333,"long":-35.4667,countries:["GS"],comments:""},"America/Guatemala":{name:"America/Guatemala",lat:14.6333,"long":-89.4833,countries:["GT"],comments:""},"Pacific/Guam":{name:"Pacific/Guam",lat:13.4667,"long":144.75,countries:["GU","MP"],comments:""},"Africa/Bissau":{name:"Africa/Bissau",lat:11.85,"long":-14.4167,countries:["GW"],comments:""},"America/Guyana":{name:"America/Guyana",lat:6.8,"long":-57.8333,countries:["GY"],comments:""},"Asia/Hong_Kong":{name:"Asia/Hong_Kong",lat:22.2833,"long":114.15,countries:["HK"],comments:""},"America/Tegucigalpa":{name:"America/Tegucigalpa",lat:14.1,"long":-86.7833,countries:["HN"],comments:""},"America/Port-au-Prince":{name:"America/Port-au-Prince",lat:18.5333,"long":-71.6667,countries:["HT"],comments:""},"Europe/Budapest":{name:"Europe/Budapest",lat:47.5,"long":19.0833,countries:["HU"],comments:""},"Asia/Jakarta":{name:"Asia/Jakarta",lat:-5.8333,
"long":106.8,countries:["ID"],comments:"Java & Sumatra"},"Asia/Pontianak":{name:"Asia/Pontianak",lat:.0333,"long":109.3333,countries:["ID"],comments:"west & central Borneo"},"Asia/Makassar":{name:"Asia/Makassar",lat:-4.8833,"long":119.4,countries:["ID"],comments:"east & south Borneo, Sulawesi (Celebes), Bali, Nusa Tengarra, west Timor"},"Asia/Jayapura":{name:"Asia/Jayapura",lat:-1.4667,"long":140.7,countries:["ID"],comments:"west New Guinea (Irian Jaya) & Malukus (Moluccas)"},"Europe/Dublin":{name:"Europe/Dublin",lat:53.3333,"long":-5.75,countries:["IE"],comments:""},"Asia/Jerusalem":{name:"Asia/Jerusalem",lat:31.7806,"long":35.2239,countries:["IL"],comments:""},"Asia/Kolkata":{name:"Asia/Kolkata",lat:22.5333,"long":88.3667,countries:["IN"],comments:""},"Indian/Chagos":{name:"Indian/Chagos",lat:-6.6667,"long":72.4167,countries:["IO"],comments:""},"Asia/Baghdad":{name:"Asia/Baghdad",lat:33.35,"long":44.4167,countries:["IQ"],comments:""},"Asia/Tehran":{name:"Asia/Tehran",lat:35.6667,"long":51.4333,countries:["IR"],comments:""},"Atlantic/Reykjavik":{name:"Atlantic/Reykjavik",lat:64.15,"long":-20.15,countries:["IS"],comments:""},"Europe/Rome":{name:"Europe/Rome",lat:41.9,"long":12.4833,countries:["IT","SM","VA"],comments:""},"America/Jamaica":{name:"America/Jamaica",lat:17.9681,"long":-75.2067,countries:["JM"],comments:""},"Asia/Amman":{name:"Asia/Amman",lat:31.95,"long":35.9333,countries:["JO"],comments:""},"Asia/Tokyo":{name:"Asia/Tokyo",lat:35.6544,"long":139.7447,countries:["JP"],comments:""},"Africa/Nairobi":{name:"Africa/Nairobi",lat:-.7167,"long":36.8167,countries:["KE","DJ","ER","ET","KM","MG","SO","TZ","UG","YT"],comments:""},"Asia/Bishkek":{name:"Asia/Bishkek",lat:42.9,"long":74.6,countries:["KG"],comments:""},"Pacific/Tarawa":{name:"Pacific/Tarawa",lat:1.4167,"long":173,countries:["KI"],comments:"Gilbert Islands"},"Pacific/Enderbury":{name:"Pacific/Enderbury",lat:-2.8667,"long":-170.9167,countries:["KI"],comments:"Phoenix Islands"},"Pacific/Kiritimati":{name:"Pacific/Kiritimati",lat:1.8667,"long":-156.6667,countries:["KI"],comments:"Line Islands"},"Asia/Pyongyang":{name:"Asia/Pyongyang",lat:39.0167,"long":125.75,countries:["KP"],comments:""},"Asia/Seoul":{name:"Asia/Seoul",lat:37.55,"long":126.9667,countries:["KR"],comments:""},"Asia/Almaty":{name:"Asia/Almaty",lat:43.25,"long":76.95,countries:["KZ"],comments:"most locations"},"Asia/Qyzylorda":{name:"Asia/Qyzylorda",lat:44.8,"long":65.4667,countries:["KZ"],comments:"Qyzylorda (Kyzylorda, Kzyl-Orda)"},"Asia/Aqtobe":{name:"Asia/Aqtobe",lat:50.2833,"long":57.1667,countries:["KZ"],comments:"Aqtobe (Aktobe)"},"Asia/Aqtau":{name:"Asia/Aqtau",lat:44.5167,"long":50.2667,countries:["KZ"],comments:"Atyrau (Atirau, Gur'yev), Mangghystau (Mankistau)"},"Asia/Oral":{name:"Asia/Oral",lat:51.2167,"long":51.35,countries:["KZ"],comments:"West Kazakhstan"},"Asia/Beirut":{name:"Asia/Beirut",lat:33.8833,"long":35.5,countries:["LB"],comments:""},"Asia/Colombo":{name:"Asia/Colombo",lat:6.9333,"long":79.85,countries:["LK"],comments:""},"Africa/Monrovia":{name:"Africa/Monrovia",lat:6.3,"long":-9.2167,countries:["LR"],comments:""},"Europe/Vilnius":{name:"Europe/Vilnius",lat:54.6833,"long":25.3167,countries:["LT"],comments:""},"Europe/Luxembourg":{name:"Europe/Luxembourg",lat:49.6,"long":6.15,countries:["LU"],comments:""},"Europe/Riga":{name:"Europe/Riga",lat:56.95,"long":24.1,countries:["LV"],comments:""},"Africa/Tripoli":{name:"Africa/Tripoli",lat:32.9,"long":13.1833,countries:["LY"],comments:""},"Africa/Casablanca":{name:"Africa/Casablanca",lat:33.65,"long":-6.4167,countries:["MA"],comments:""},"Europe/Monaco":{name:"Europe/Monaco",lat:43.7,"long":7.3833,countries:["MC"],comments:""},"Europe/Chisinau":{name:"Europe/Chisinau",lat:47,"long":28.8333,countries:["MD"],comments:""},"Pacific/Majuro":{name:"Pacific/Majuro",lat:7.15,"long":171.2,countries:["MH"],comments:"most locations"},"Pacific/Kwajalein":{name:"Pacific/Kwajalein",lat:9.0833,"long":167.3333,countries:["MH"],comments:"Kwajalein"},"Asia/Rangoon":{name:"Asia/Rangoon",lat:16.7833,"long":96.1667,countries:["MM"],comments:""},"Asia/Ulaanbaatar":{name:"Asia/Ulaanbaatar",lat:47.9167,"long":106.8833,countries:["MN"],comments:"most locations"},"Asia/Hovd":{name:"Asia/Hovd",lat:48.0167,"long":91.65,countries:["MN"],comments:"Bayan-Ölgii, Govi-Altai, Hovd, Uvs, Zavkhan"},"Asia/Choibalsan":{name:"Asia/Choibalsan",lat:48.0667,"long":114.5,countries:["MN"],comments:"Dornod, Sükhbaatar"},"Asia/Macau":{name:"Asia/Macau",lat:22.2333,"long":113.5833,countries:["MO"],comments:""},"America/Martinique":{name:"America/Martinique",lat:14.6,"long":-60.9167,countries:["MQ"],comments:""},"Europe/Malta":{name:"Europe/Malta",lat:35.9,"long":14.5167,countries:["MT"],comments:""},"Indian/Mauritius":{name:"Indian/Mauritius",lat:-19.8333,"long":57.5,countries:["MU"],comments:""},"Indian/Maldives":{name:"Indian/Maldives",lat:4.1667,"long":73.5,countries:["MV"],comments:""},"America/Mexico_City":{name:"America/Mexico_City",lat:19.4,"long":-98.85,countries:["MX"],comments:"Central Time - most locations"},"America/Cancun":{name:"America/Cancun",lat:21.0833,"long":-85.2333,countries:["MX"],comments:"Eastern Standard Time - Quintana Roo"},"America/Merida":{name:"America/Merida",lat:20.9667,"long":-88.3833,countries:["MX"],comments:"Central Time - Campeche, Yucatán"},"America/Monterrey":{name:"America/Monterrey",lat:25.6667,"long":-99.6833,countries:["MX"],comments:"Mexican Central Time - Coahuila, Durango, Nuevo León, Tamaulipas away from US border"},"America/Matamoros":{name:"America/Matamoros",lat:25.8333,"long":-96.5,countries:["MX"],comments:"US Central Time - Coahuila, Durango, Nuevo León, Tamaulipas near US border"},"America/Mazatlan":{name:"America/Mazatlan",lat:23.2167,"long":-105.5833,countries:["MX"],comments:"Mountain Time - S Baja, Nayarit, Sinaloa"},"America/Chihuahua":{name:"America/Chihuahua",lat:28.6333,"long":-105.9167,countries:["MX"],comments:"Mexican Mountain Time - Chihuahua away from US border"},"America/Ojinaga":{name:"America/Ojinaga",lat:29.5667,"long":-103.5833,countries:["MX"],comments:"US Mountain Time - Chihuahua near US border"},"America/Hermosillo":{name:"America/Hermosillo",lat:29.0667,"long":-109.0333,countries:["MX"],comments:"Mountain Standard Time - Sonora"},"America/Tijuana":{name:"America/Tijuana",lat:32.5333,"long":-116.9833,countries:["MX"],comments:"US Pacific Time - Baja California near US border"},"America/Santa_Isabel":{name:"America/Santa_Isabel",lat:30.3,"long":-113.1333,countries:["MX"],comments:"Mexican Pacific Time - Baja California away from US border"},"America/Bahia_Banderas":{name:"America/Bahia_Banderas",lat:20.8,"long":-104.75,countries:["MX"],comments:"Mexican Central Time - Bahía de Banderas"},"Asia/Kuala_Lumpur":{name:"Asia/Kuala_Lumpur",lat:3.1667,"long":101.7,countries:["MY"],comments:"peninsular Malaysia"},"Asia/Kuching":{name:"Asia/Kuching",lat:1.55,"long":110.3333,countries:["MY"],comments:"Sabah & Sarawak"},"Africa/Maputo":{name:"Africa/Maputo",lat:-24.0333,"long":32.5833,countries:["MZ","BI","BW","CD","MW","RW","ZM","ZW"],comments:"Central Africa Time (UTC+2)"},"Africa/Windhoek":{name:"Africa/Windhoek",lat:-21.4333,"long":17.1,countries:["NA"],comments:""},"Pacific/Noumea":{name:"Pacific/Noumea",lat:-21.7333,"long":166.45,countries:["NC"],comments:""},"Pacific/Norfolk":{name:"Pacific/Norfolk",lat:-28.95,"long":167.9667,countries:["NF"],comments:""},"Africa/Lagos":{name:"Africa/Lagos",lat:6.45,"long":3.4,countries:["NG","AO","BJ","CD","CF","CG","CM","GA","GQ","NE"],comments:"West Africa Time (UTC+1)"},"America/Managua":{name:"America/Managua",lat:12.15,"long":-85.7167,countries:["NI"],comments:""},"Europe/Amsterdam":{name:"Europe/Amsterdam",lat:52.3667,"long":4.9,countries:["NL"],comments:""},"Europe/Oslo":{name:"Europe/Oslo",lat:59.9167,"long":10.75,countries:["NO","SJ"],comments:""},"Asia/Kathmandu":{name:"Asia/Kathmandu",lat:27.7167,"long":85.3167,countries:["NP"],comments:""},"Pacific/Nauru":{name:"Pacific/Nauru",lat:.5167,"long":166.9167,countries:["NR"],comments:""},"Pacific/Niue":{name:"Pacific/Niue",lat:-18.9833,"long":-168.0833,countries:["NU"],comments:""},"Pacific/Auckland":{name:"Pacific/Auckland",lat:-35.1333,"long":174.7667,countries:["NZ","AQ"],comments:"New Zealand time"},"Pacific/Chatham":{name:"Pacific/Chatham",lat:-42.05,"long":-175.45,countries:["NZ"],comments:"Chatham Islands"},"America/Panama":{name:"America/Panama",lat:8.9667,"long":-78.4667,countries:["PA","KY"],comments:""},"America/Lima":{name:"America/Lima",lat:-11.95,"long":-76.95,countries:["PE"],comments:""},"Pacific/Tahiti":{name:"Pacific/Tahiti",lat:-16.4667,"long":-148.4333,countries:["PF"],comments:"Society Islands"},"Pacific/Marquesas":{name:"Pacific/Marquesas",lat:-9,"long":-138.5,countries:["PF"],comments:"Marquesas Islands"},"Pacific/Gambier":{name:"Pacific/Gambier",lat:-22.8667,"long":-133.05,countries:["PF"],comments:"Gambier Islands"},"Pacific/Port_Moresby":{name:"Pacific/Port_Moresby",lat:-8.5,"long":147.1667,countries:["PG"],comments:"most locations"},"Pacific/Bougainville":{name:"Pacific/Bougainville",lat:-5.7833,"long":155.5667,countries:["PG"],comments:"Bougainville"},"Asia/Manila":{name:"Asia/Manila",lat:14.5833,"long":121,countries:["PH"],comments:""},"Asia/Karachi":{name:"Asia/Karachi",lat:24.8667,"long":67.05,countries:["PK"],comments:""},"Europe/Warsaw":{name:"Europe/Warsaw",lat:52.25,"long":21,countries:["PL"],comments:""},"America/Miquelon":{name:"America/Miquelon",lat:47.05,"long":-55.6667,countries:["PM"],comments:""},"Pacific/Pitcairn":{name:"Pacific/Pitcairn",lat:-24.9333,"long":-129.9167,countries:["PN"],comments:""},"America/Puerto_Rico":{name:"America/Puerto_Rico",lat:18.4683,"long":-65.8939,countries:["PR"],comments:""},"Asia/Gaza":{name:"Asia/Gaza",lat:31.5,"long":34.4667,countries:["PS"],comments:"Gaza Strip"},"Asia/Hebron":{name:"Asia/Hebron",lat:31.5333,"long":35.095,countries:["PS"],comments:"West Bank"},"Europe/Lisbon":{name:"Europe/Lisbon",lat:38.7167,"long":-8.8667,countries:["PT"],comments:"mainland"},"Atlantic/Madeira":{name:"Atlantic/Madeira",lat:32.6333,"long":-15.1,countries:["PT"],comments:"Madeira Islands"},"Atlantic/Azores":{name:"Atlantic/Azores",lat:37.7333,"long":-24.3333,countries:["PT"],comments:"Azores"},"Pacific/Palau":{name:"Pacific/Palau",lat:7.3333,"long":134.4833,countries:["PW"],comments:""},"America/Asuncion":{name:"America/Asuncion",lat:-24.7333,"long":-56.3333,countries:["PY"],comments:""},"Asia/Qatar":{name:"Asia/Qatar",lat:25.2833,"long":51.5333,countries:["QA","BH"],comments:""},"Indian/Reunion":{name:"Indian/Reunion",lat:-19.1333,"long":55.4667,countries:["RE","TF"],comments:"Réunion, Crozet Is, Scattered Is"},"Europe/Bucharest":{name:"Europe/Bucharest",lat:44.4333,"long":26.1,countries:["RO"],comments:""},"Europe/Belgrade":{name:"Europe/Belgrade",lat:44.8333,"long":20.5,countries:["RS","BA","HR","ME","MK","SI"],comments:""},"Europe/Kaliningrad":{name:"Europe/Kaliningrad",lat:54.7167,"long":20.5,countries:["RU"],comments:"Moscow-01 - Kaliningrad"},"Europe/Moscow":{name:"Europe/Moscow",lat:55.7558,"long":37.6178,countries:["RU"],comments:"Moscow+00 - west Russia"},"Europe/Simferopol":{name:"Europe/Simferopol",lat:44.95,"long":34.1,countries:["RU"],comments:"Moscow+00 - Crimea"},"Europe/Volgograd":{name:"Europe/Volgograd",lat:48.7333,"long":44.4167,countries:["RU"],comments:"Moscow+00 - Caspian Sea"},"Europe/Samara":{name:"Europe/Samara",lat:53.2,"long":50.15,countries:["RU"],comments:"Moscow+00 (Moscow+01 after 2014-10-26) - Samara, Udmurtia"},"Asia/Yekaterinburg":{name:"Asia/Yekaterinburg",lat:56.85,"long":60.6,countries:["RU"],comments:"Moscow+02 - Urals"},"Asia/Omsk":{name:"Asia/Omsk",lat:55,"long":73.4,countries:["RU"],comments:"Moscow+03 - west Siberia"},"Asia/Novosibirsk":{name:"Asia/Novosibirsk",lat:55.0333,"long":82.9167,countries:["RU"],comments:"Moscow+03 - Novosibirsk"},"Asia/Novokuznetsk":{name:"Asia/Novokuznetsk",lat:53.75,"long":87.1167,countries:["RU"],comments:"Moscow+03 (Moscow+04 after 2014-10-26) - Kemerovo"},"Asia/Krasnoyarsk":{name:"Asia/Krasnoyarsk",lat:56.0167,"long":92.8333,countries:["RU"],comments:"Moscow+04 - Yenisei River"},"Asia/Irkutsk":{name:"Asia/Irkutsk",lat:52.2667,"long":104.3333,countries:["RU"],comments:"Moscow+05 - Lake Baikal"},"Asia/Chita":{name:"Asia/Chita",lat:52.05,"long":113.4667,countries:["RU"],comments:"Moscow+06 (Moscow+05 after 2014-10-26) - Zabaykalsky"},"Asia/Yakutsk":{name:"Asia/Yakutsk",lat:62,"long":129.6667,countries:["RU"],comments:"Moscow+06 - Lena River"},"Asia/Khandyga":{name:"Asia/Khandyga",lat:62.6564,"long":135.5539,countries:["RU"],comments:"Moscow+06 - Tomponsky, Ust-Maysky"},"Asia/Vladivostok":{name:"Asia/Vladivostok",lat:43.1667,"long":131.9333,countries:["RU"],comments:"Moscow+07 - Amur River"},"Asia/Sakhalin":{name:"Asia/Sakhalin",lat:46.9667,"long":142.7,countries:["RU"],comments:"Moscow+07 - Sakhalin Island"},"Asia/Ust-Nera":{name:"Asia/Ust-Nera",lat:64.5603,"long":143.2267,countries:["RU"],comments:"Moscow+07 - Oymyakonsky"},"Asia/Magadan":{name:"Asia/Magadan",lat:59.5667,"long":150.8,countries:["RU"],comments:"Moscow+08 (Moscow+07 after 2014-10-26) - Magadan"},"Asia/Srednekolymsk":{name:"Asia/Srednekolymsk",lat:67.4667,"long":153.7167,countries:["RU"],comments:"Moscow+08 - E Sakha, N Kuril Is"},"Asia/Kamchatka":{name:"Asia/Kamchatka",lat:53.0167,"long":158.65,countries:["RU"],comments:"Moscow+08 (Moscow+09 after 2014-10-26) - Kamchatka"},"Asia/Anadyr":{name:"Asia/Anadyr",lat:64.75,"long":177.4833,countries:["RU"],comments:"Moscow+08 (Moscow+09 after 2014-10-26) - Bering Sea"},"Asia/Riyadh":{name:"Asia/Riyadh",lat:24.6333,"long":46.7167,countries:["SA","KW","YE"],comments:""},"Pacific/Guadalcanal":{name:"Pacific/Guadalcanal",lat:-8.4667,"long":160.2,countries:["SB"],comments:""},"Indian/Mahe":{name:"Indian/Mahe",lat:-3.3333,"long":55.4667,countries:["SC"],comments:""},"Africa/Khartoum":{name:"Africa/Khartoum",lat:15.6,"long":32.5333,countries:["SD","SS"],comments:""},"Europe/Stockholm":{name:"Europe/Stockholm",lat:59.3333,"long":18.05,countries:["SE"],comments:""},"Asia/Singapore":{name:"Asia/Singapore",lat:1.2833,"long":103.85,countries:["SG"],comments:""},"America/Paramaribo":{name:"America/Paramaribo",lat:5.8333,"long":-54.8333,countries:["SR"],comments:""},"America/El_Salvador":{name:"America/El_Salvador",lat:13.7,"long":-88.8,countries:["SV"],comments:""},"Asia/Damascus":{name:"Asia/Damascus",lat:33.5,"long":36.3,countries:["SY"],comments:""},"America/Grand_Turk":{name:"America/Grand_Turk",lat:21.4667,"long":-70.8667,countries:["TC"],comments:""},"Africa/Ndjamena":{name:"Africa/Ndjamena",lat:12.1167,"long":15.05,countries:["TD"],comments:""},"Indian/Kerguelen":{name:"Indian/Kerguelen",lat:-48.6472,"long":70.2175,countries:["TF"],comments:"Kerguelen, St Paul I, Amsterdam I"},"Asia/Bangkok":{name:"Asia/Bangkok",lat:13.75,"long":100.5167,countries:["TH","KH","LA","VN"],comments:"most of Indochina"},"Asia/Dushanbe":{name:"Asia/Dushanbe",lat:38.5833,"long":68.8,countries:["TJ"],comments:""},"Pacific/Fakaofo":{name:"Pacific/Fakaofo",lat:-8.6333,"long":-170.7667,countries:["TK"],comments:""},"Asia/Dili":{name:"Asia/Dili",lat:-7.45,"long":125.5833,countries:["TL"],comments:""},"Asia/Ashgabat":{name:"Asia/Ashgabat",lat:37.95,"long":58.3833,countries:["TM"],comments:""},"Africa/Tunis":{name:"Africa/Tunis",lat:36.8,"long":10.1833,countries:["TN"],comments:""},"Pacific/Tongatapu":{name:"Pacific/Tongatapu",lat:-20.8333,"long":-174.8333,countries:["TO"],comments:""},"Europe/Istanbul":{name:"Europe/Istanbul",lat:41.0167,"long":28.9667,countries:["TR"],comments:""},"America/Port_of_Spain":{name:"America/Port_of_Spain",lat:10.65,"long":-60.4833,countries:["TT","AG","AI","BL","DM","GD","GP","KN","LC","MF","MS","VC","VG","VI"],comments:""},"Pacific/Funafuti":{name:"Pacific/Funafuti",lat:-7.4833,"long":179.2167,countries:["TV"],comments:""},"Asia/Taipei":{name:"Asia/Taipei",lat:25.05,"long":121.5,countries:["TW"],comments:""},"Europe/Kiev":{name:"Europe/Kiev",lat:50.4333,"long":30.5167,countries:["UA"],comments:"most locations"},"Europe/Uzhgorod":{name:"Europe/Uzhgorod",lat:48.6167,"long":22.3,countries:["UA"],comments:"Ruthenia"},"Europe/Zaporozhye":{name:"Europe/Zaporozhye",lat:47.8333,"long":35.1667,countries:["UA"],comments:"Zaporozh'ye, E Lugansk / Zaporizhia, E Luhansk"},"Pacific/Wake":{name:"Pacific/Wake",lat:19.2833,"long":166.6167,countries:["UM"],comments:"Wake Island"},"America/New_York":{name:"America/New_York",lat:40.7142,"long":-73.9936,countries:["US"],comments:"Eastern Time"},"America/Detroit":{name:"America/Detroit",lat:42.3314,"long":-82.9542,countries:["US"],comments:"Eastern Time - Michigan - most locations"},"America/Kentucky/Louisville":{name:"America/Kentucky/Louisville",lat:38.2542,"long":-84.2406,countries:["US"],comments:"Eastern Time - Kentucky - Louisville area"},"America/Kentucky/Monticello":{name:"America/Kentucky/Monticello",lat:36.8297,"long":-83.1508,countries:["US"],comments:"Eastern Time - Kentucky - Wayne County"},"America/Indiana/Indianapolis":{name:"America/Indiana/Indianapolis",lat:39.7683,"long":-85.8419,countries:["US"],comments:"Eastern Time - Indiana - most locations"},"America/Indiana/Vincennes":{name:"America/Indiana/Vincennes",lat:38.6772,"long":-86.4714,countries:["US"],comments:"Eastern Time - Indiana - Daviess, Dubois, Knox & Martin Counties"},"America/Indiana/Winamac":{name:"America/Indiana/Winamac",lat:41.0514,"long":-85.3969,countries:["US"],comments:"Eastern Time - Indiana - Pulaski County"},"America/Indiana/Marengo":{name:"America/Indiana/Marengo",lat:38.3756,"long":-85.6553,countries:["US"],comments:"Eastern Time - Indiana - Crawford County"},"America/Indiana/Petersburg":{name:"America/Indiana/Petersburg",lat:38.4919,"long":-86.7214,countries:["US"],comments:"Eastern Time - Indiana - Pike County"},"America/Indiana/Vevay":{name:"America/Indiana/Vevay",lat:38.7478,"long":-84.9328,countries:["US"],comments:"Eastern Time - Indiana - Switzerland County"},"America/Chicago":{name:"America/Chicago",lat:41.85,"long":-86.35,countries:["US"],comments:"Central Time"},"America/Indiana/Tell_City":{name:"America/Indiana/Tell_City",lat:37.9531,"long":-85.2386,countries:["US"],comments:"Central Time - Indiana - Perry County"},"America/Indiana/Knox":{name:"America/Indiana/Knox",lat:41.2958,"long":-85.375,countries:["US"],comments:"Central Time - Indiana - Starke County"},"America/Menominee":{name:"America/Menominee",lat:45.1078,"long":-86.3858,countries:["US"],comments:"Central Time - Michigan - Dickinson, Gogebic, Iron & Menominee Counties"},"America/North_Dakota/Center":{name:"America/North_Dakota/Center",lat:47.1164,"long":-100.7008,countries:["US"],comments:"Central Time - North Dakota - Oliver County"},"America/North_Dakota/New_Salem":{name:"America/North_Dakota/New_Salem",lat:46.845,"long":-100.5892,countries:["US"],comments:"Central Time - North Dakota - Morton County (except Mandan area)"},"America/North_Dakota/Beulah":{name:"America/North_Dakota/Beulah",lat:47.2642,"long":-100.2222,countries:["US"],comments:"Central Time - North Dakota - Mercer County"},"America/Denver":{name:"America/Denver",lat:39.7392,"long":-103.0158,countries:["US"],comments:"Mountain Time"},"America/Boise":{name:"America/Boise",lat:43.6136,"long":-115.7975,countries:["US"],comments:"Mountain Time - south Idaho & east Oregon"},"America/Phoenix":{name:"America/Phoenix",lat:33.4483,"long":-111.9267,countries:["US"],comments:"Mountain Standard Time - Arizona (except Navajo)"},"America/Los_Angeles":{name:"America/Los_Angeles",lat:34.0522,"long":-117.7572,countries:["US"],comments:"Pacific Time"},"America/Metlakatla":{name:"America/Metlakatla",lat:55.1269,"long":-130.4236,countries:["US"],comments:"Pacific Standard Time - Annette Island, Alaska"},"America/Anchorage":{name:"America/Anchorage",lat:61.2181,"long":-148.0997,countries:["US"],comments:"Alaska Time"},"America/Juneau":{name:"America/Juneau",lat:58.3019,"long":-133.5803,countries:["US"],comments:"Alaska Time - Alaska panhandle"},"America/Sitka":{name:"America/Sitka",lat:57.1764,"long":-134.6981,countries:["US"],comments:"Alaska Time - southeast Alaska panhandle"},"America/Yakutat":{name:"America/Yakutat",lat:59.5469,"long":-138.2728,countries:["US"],comments:"Alaska Time - Alaska panhandle neck"},"America/Nome":{name:"America/Nome",lat:64.5011,"long":-164.5936,countries:["US"],comments:"Alaska Time - west Alaska"},"America/Adak":{name:"America/Adak",lat:51.88,"long":-175.3419,countries:["US"],comments:"Aleutian Islands"},"Pacific/Honolulu":{name:"Pacific/Honolulu",lat:21.3069,"long":-156.1417,countries:["US","UM"],comments:"Hawaii time"},"America/Montevideo":{name:"America/Montevideo",lat:-33.1167,"long":-55.8167,countries:["UY"],comments:""},"Asia/Samarkand":{name:"Asia/Samarkand",lat:39.6667,"long":66.8,countries:["UZ"],comments:"west Uzbekistan"},"Asia/Tashkent":{name:"Asia/Tashkent",lat:41.3333,"long":69.3,countries:["UZ"],comments:"east Uzbekistan"},"America/Caracas":{name:"America/Caracas",lat:10.5,"long":-65.0667,countries:["VE"],comments:""},"Asia/Ho_Chi_Minh":{name:"Asia/Ho_Chi_Minh",lat:10.75,"long":106.6667,countries:["VN"],comments:"south Vietnam"},"Pacific/Efate":{name:"Pacific/Efate",lat:-16.3333,"long":168.4167,countries:["VU"],comments:""},"Pacific/Wallis":{name:"Pacific/Wallis",lat:-12.7,"long":-175.8333,countries:["WF"],comments:""},"Pacific/Apia":{name:"Pacific/Apia",lat:-12.1667,"long":-170.2667,countries:["WS"],comments:""},"Africa/Johannesburg":{name:"Africa/Johannesburg",lat:-25.75,"long":28,countries:["ZA","LS","SZ"],comments:""}}}}(),angular.module("wt.directive.tpls").run(["$templateCache",function(a){"use strict";a.put("/tpl/404.html",'<div class=layout_content><div class=layout_content_main ng-switch=vm.type><dl class=frame data-minheight=28 ng-switch-when=team><dt><span class=title>出错啦</span></dt><dd><div class=error-panel><i class="wtfont wtf-team"></i><br><span>团队不存在或者你没有权限访问</span><br></div></dd></dl><dl class=frame data-minheight=28 ng-switch-when=project><dt><span class=title>出错啦</span></dt><dd><div class=error-panel><i class=icon-inbox></i><br><span>项目不存在或者你没有权限访问当前项目</span><br></div></dd></dl><dl class=frame data-minheight=90 ng-switch-default><dt><span class=title>出错啦</span></dt><dd><div class="mt_180 w_50p mlr-auto"><div class="alert alert-danger">很抱歉！页面没有找到。<br><p ng-hide=global.is_login>该页可能是私有页。请登录，并再次尝试访问。 <a class=js-real-link href=/signin>登录</a>.<br></p></div></div></dd></dl></div></div>'),a.put("/tpl/account/account_apps.html",'<dd class=frame-dd><div ng-hide=vm.part_loading_done class="part-loading mt_20"></div><div ng-show=vm.part_loading_done class=table-list><p class=color-text-grayer>你已授权以下应用访问你的帐户:</p><table class="table table--fancy"><thead><tr><th>应用名称</th><th>授权时间</th><th>过期时间</th><th>设置</th></tr></thead><tbody><tr ng-repeat="app in account_apps"><td>&nbsp;&nbsp;{{app | appClientName}} <span class="edition ng-binding edition-free" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]">{{app | GetClientEdition}}</span></td><td>{{app.create_date | timeFullFormatZHCN}}</td><td>永不过期</td><td><a href=javascript:; class=btn data-placement=bottom ng-click=js_pop_decommissioning($event,app)>解除授权</a></td></tr><tr><td colspan=4 ng-show="account_apps.length == 0"><span class=color-text-light>&nbsp;&nbsp;没有授权应用</span></td></tr></tbody></table></div></dd>'),a.put("/tpl/account/account_individuation.html","<dd class=frame-dd><div ng-hide=vm.part_loading_done class=\"part-loading mt_20\"></div><div ng-show=vm.part_loading_done><dl class=dl-form><dt>自动关注 <span class=dl-form-desc>发表评论后是否自动加入关注</span></dt><dd><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_comment_auto_watch() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.comment_auto_watch]\"></a> <span>开启自动关注</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.comment_auto_watch]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.comment_auto_watch]\"></ins></div></dd></dl><dl class=dl-form><dt>任务自动分配自己 <span class=dl-form-desc>创建任务时默认分配给自己</span></dt><dd><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_create_task_assign_me() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.create_task_assign_me]\"></a> <span>开启自动分配</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.create_task_assign_me]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.create_task_assign_me]\"></ins></div></dd></dl></div></dd>"),a.put("/tpl/account/account_level.html",""),a.put("/tpl/account/account_message.html","<dd class=frame-dd><div ng-hide=vm.part_loading_done class=\"part-loading mt_20\"></div><div ng-show=vm.part_loading_done><dl class=dl-form><dt>免打扰设置 <span class=dl-form-desc>当你Web版是在线状态时，你的邮箱、微信和移动端将不会接收消息提醒，避免重复消息的打扰</span></dt><dd><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_smart_notice() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.notice_for_smart]\"></a> <span>免打扰开启</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.notice_for_smart]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.notice_for_smart]\"></ins></div></dd></dl><dl class=dl-form><dt>邮件通知 <span class=dl-form-desc>当有重要操作时，会发送提醒邮件给你</span></dt><dd ng-if=!vm.is_setting_notice_by_email><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_email_notice() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.notice_by_email]\"></a> <span>开启邮件通知</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.notice_by_email]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.notice_by_email]\"></ins></div><div ng-if=vm.notice_by_email><button class=btn ng-click=vm.js_set_notice_by_email_open()>设置邮件通知类型</button></div></dd><dd ng-if=vm.is_setting_notice_by_email><wt-notice-panel ng-if=vm.is_setting_notice_by_email_onload checklist=vm.check_list_notice_by_email onsave=vm.js_save_notice_by_email() oncancel=vm.js_set_notice_by_email_close()></wt-notice-panel></dd></dl><dl class=dl-form><dt>微信通知 <span class=dl-form-desc>当有重要操作时，会通过 Worktile 微信服务号发送提醒消息给你</span></dt><dd ng-if=!vm.is_setting_notice_by_weixin><div class=\"alert alert-info w-400\" ng-if=\"$root.global.me.is_bind_weixin==0\"><i class=\"fa fa-info-circle mr-5\"></i>您的账号还没有绑定微信，请先去 <u ui-sref=account.settings ui-sref-active=active class=clickable>\"绑定\"</u>。</div><div ng-if=\"$root.global.me.is_bind_weixin==1\"><div class=radio--fancy><a href=javascript:; class=fa ng-click=vm.js_toggle_weixin_notice() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.notice_by_weixin]\"></a> <span>开启微信通知</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.notice_by_weixin]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.notice_by_weixin]\"></ins></div><div ng-if=vm.notice_by_weixin><button class=btn ng-click=vm.js_set_notice_by_weixin_open()>设置微信通知类型</button></div></div></dd><dd ng-if=vm.is_setting_notice_by_weixin><wt-notice-panel ng-if=vm.is_setting_notice_by_weixin_onload checklist=vm.check_list_notice_by_weixin onsave=vm.js_save_notice_by_weixin() oncancel=vm.js_set_notice_by_weixin_close()></wt-notice-panel></dd></dl><dl class=dl-form><dt>移动端通知 <span class=dl-form-desc>当有重要操作时，会自动将消息推送到 Worktile移动客户端</span></dt><dd ng-if=!vm.is_setting_notice_by_mobile><div class=radio--fancy><a href=javascript:; class=fa ng-click=vm.js_toggle_mobile_notice() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.notice_by_mobile]\"></a> <span>开启移动端通知</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.notice_by_mobile]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.notice_by_mobile]\"></ins></div><div ng-if=vm.notice_by_mobile><button class=btn ng-click=vm.js_set_notice_by_mobile_open()>设置移动端通知类型</button></div></dd><dd ng-if=vm.is_setting_notice_by_mobile><wt-notice-panel ng-if=vm.is_setting_notice_by_mobile_onload checklist=vm.check_list_notice_by_mobile onsave=vm.js_save_notice_by_mobile() oncancel=vm.js_set_notice_by_mobile_close()></wt-notice-panel></dd></dl><dl class=dl-form><dt>桌面通知 <span class=dl-form-desc>当有重要操作或者有成员@你时，系统会弹出气泡提示，只对Chrome和Safari有效</span></dt><dd><div ng-if=vm.is_notify_not_set><button class=\"btn btn-success\" ng-click=vm.js_enabled_notify()>设置桌面通知</button></div><div ng-if=!vm.is_notify_not_set><div class=w_550 ng-if=!vm.is_notify_enabled><div class=\"alert alert-warning\" ng-if=vm.is_setting_notify>请 “<strong>允许</strong>” 浏览器的 “通知” 功能，你将能收到 Worktile 发送的桌面通知。</div><div class=\"alert alert-danger\" ng-if=!vm.is_setting_notify>你 “<strong>禁止</strong>” 了浏览器的 “通知” 功能，请到浏览器中修改 <u title=\"设置 -> 显示高级设置 -> 隐私设置 -> 内容设置 -> 通知 -> 管理例外情况 -> 删除worktile网址规则项\">“设置”</u> ，然后刷新页面。</div></div><div class=radio--fancy ng-if=vm.is_notify_enabled><a href=javascript:; class=fa ng-click=vm.js_toggle_desk_notice() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.desk_notice]\"></a> <span>开启桌面通知 <a href=javascript:; class=color_link_text ng-click=vm.sendNotifyTest()>(测试桌面通知)</a></span><br><ins ng-class=\"{1:'on',0:'off'}[vm.desk_notice]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.desk_notice]\"></ins></div></div></dd></dl><dl class=dl-form><dt>每月速递 <span class=dl-form-desc>是否接收每个月关于Worktile产品最新动态、用户故事、最佳实践的邮件</span></dt><dd><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_change_express() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.notice_for_express]\"></a> <span>接收每月速递</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.notice_for_express]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.notice_for_express]\"></ins></div></dd></dl><dl class=dl-form><dt>每日邮件提醒 <span class=dl-form-desc>是否接收每日未完成任务，过期任务的邮件</span></dt><dd><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_daily_email() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.notice_for_daily_mail]\"></a> <span>接收每日邮件提醒</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.notice_for_daily_mail]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.notice_for_daily_mail]\"></ins></div></dd></dl><dl class=dl-form><dt>每周邮件提醒 <span class=dl-form-desc>是否接收上周任务完成情况的邮件</span></dt><dd><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_weekly_email() ng-class=\"{1:'fa-toggle-on', 0:'fa-toggle-off' }[vm.notice_for_weekly_mail]\"></a> <span>接收每周邮件提醒</span><br><ins ng-class=\"{1:'on',0:'off'}[vm.notice_for_weekly_mail]\" ng-bind=\"{1:'已开启',0:'已关闭'}[vm.notice_for_weekly_mail]\"></ins></div></dd></dl><dl class=dl-form><dt>设置 Webhook <span class=dl-form-desc>当你收到新的消息时，可以通过Webhook接受新消息</span></dt><dd><table class=\"table table--fancy\"><thead><tr><th>Webhook 名称</th><th>通知 URL</th><th>URL 密钥</th><th></th></tr></thead><tbody><tr ng-repeat=\"webhook in vm.webhook_list\"><td>&nbsp;&nbsp;{{webhook.name}}</td><td>&nbsp;&nbsp;{{webhook.web_hook_url}}</td><td>&nbsp;&nbsp;{{webhook.secret}} <span ng-if=!webhook.secret class=color-text-light>未填写</span></td><td><a data-placement=bottom data-align=right href=javascript: class=js-popbox ng-click=js_add_webhook($event,webhook.wid,webhook.name,webhook.web_hook_url,webhook.secret)><i class=\"fa fa-pencil\"></i></a></td></tr><tr><td colspan=4 class=text-gray ng-show=\"vm.webhook_list.length == 0\"><span class=color-text-light>&nbsp;&nbsp;未添加Webhook!</span></td></tr></tbody></table><div><button class=\"btn js-popbox\" data-placement=bottom data-align=left ng-click=js_add_webhook($event,null,null,null,null)>添&nbsp;&nbsp;加</button></div></dd></dl></div></dd>"),a.put("/tpl/account/account_profile.html",'<dd class=frame-dd><div ng-hide=vm.part_loading_done class="part-loading mt_20"></div><div ng-show=vm.part_loading_done><dl class=dl-form><dt>头像 <span class=dl-form-desc>选择一张个人正面照片作为头像，<br>让其他成员更容易认识你。</span></dt><dd><div ng-if=!avatar.src><wt-avatar member=global.me size=80 wt-disable-drag class=mr_15></wt-avatar><button ngf-multiple=false ngf-select ngf-change=js_file_select($files) ngf-accept="\'.png,.jpg\'" class="btn btn-local-upload mt_28">设置头像</button></div><div ng-if=avatar.src><div class="avatar-ngjcrop min-h150" ng-jcrop=avatar.src selection=avatar.selection thumbnail=avatar.thumbnail></div><div class=mt_28><button class="btn btn-default mr_14" ng-disabled=avatar.uploading ngf-multiple=false ngf-select ngf-change=js_file_select($files) ng-accept="\'.png,.jpg\'">重新选择</button> <button class="btn btn-success mr_14" wt-loading-status=avatar.uploading data-loading-text=上传中... ng-click=js_save_avatar()>保&nbsp; 存</button> <button class="btn btn-link btn-cancel mr_14" ng-disabled=avatar.uploading ng-click=cancel_upload_avatar()>取&nbsp; 消</button></div></div></dd></dl><dl class=dl-form><dt>个人资料</dt><dd><div ng-if=!base_info.is_edit><ul class=dl-form-ul><li><span class=dl-form-li-title>姓&nbsp;名：</span> {{base_info.name}}</li><li><span class=dl-form-li-title>职&nbsp;位：</span> {{base_info.title || \'未填写\'}}</li><li><span class=dl-form-li-title>电&nbsp;话：</span> {{base_info.phone || \'未填写\'}}</li><li><span class=dl-form-li-title>个性签名：</span> <span ng-bind="base_info.desc||\'未填写\'"></span></li></ul><button class="btn btn-default mt_28" ng-click="base_info.is_edit = true">编辑个人资料</button></div><div ng-if=base_info.is_edit><form name=user_update_form w5c-form-validate="" class="form-horizontal wt-form w_660" novalidate><div class=form-group><label class=sr-only>姓名：</label><div class=col-xs-4><input wt-autofocus="" name=display_name type=text class=form-control ng-model=base_info.name placeholder=姓名 required wt-regex="^([\\u4e00-\\u9fa5]|[0-9a-zA-Z!@#$%^&*()_\\-\\+=\\s]){1,100}$"></div></div><div class=form-group><label class=sr-only>职位：</label><div class=col-xs-4><input name=user_title type=text class=form-control ng-model=base_info.title placeholder=职位 wt-regex="^([\\u4e00-\\u9fa5]|[0-9a-zA-Z!@#$%^&*()_\\-\\+=\\s]){1,300}$"></div></div><div class=form-group><label class=sr-only>电话：</label><div class=col-xs-4><input name=phone type=text class=form-control ng-model=base_info.phone placeholder="电话"></div></div><div class=form-group><label class="sr-only control-label p_0">个性签名：</label><div class=col-xs-10><textarea class=form-control rows=2 ng-model=base_info.desc placeholder=个性签名（可空></textarea></div></div><div class=form-group><div class=col-xs-10><button w5c-form-submit=js_user_update() class="btn btn-success mr_14 mt_13" wt-loading-status=base_info.updating data-loading-text=保存中...>保&nbsp; 存</button> <button ng-click=js_cancel_base_info_edit() class="btn mt_13 btn-link btn-cancel">取&nbsp; 消</button></div></div></form></div></dd></dl><dl class=dl-form><dt>绑定微信 <span class=dl-form-desc>绑定后，可直接使用微信扫描二维码登录 Worktile，还可以通过 Worktile 微信服务号接收消息通知。</span></dt><dd><ul class=dl-form-ul><li><span class=dl-form-li-title>当前状态：</span> <span ng-if=!vm.is_bind_weixin>未绑定</span> <span ng-if=vm.is_bind_weixin ng-class="{true:\'color-text-act-green\'}[vm.weixin_nick_name!=null]">已绑定<span ng-if="vm.weixin_nick_name!=null">: {{vm.weixin_nick_name}}</span> <a href=javascript:; class=pl-30 ng-mouseenter=vm.js_show_worktile_weixin($event) ng-mouseleave=vm.js_close_worktile_weixin()><i class="fa fa-qrcode"></i> Worktile 服务号</a></span></li></ul><div class=mt_28><button ng-if=!vm.is_bind_weixin class=btn ng-click=vm.js_bind_weixin($event)>绑定微信</button> <button ng-if=vm.is_bind_weixin class=btn ng-click=vm.js_unbind_weixin($event)>解除绑定</button></div></dd></dl><dl class=dl-form><dt>设置时区</dt><dd><div class=w_660><div><select class=form-control name=time_zone id=time_zone ng-change=js_time_zone_change() ng-model=time_zone required=""><option value={{obj.name}} ng-repeat="obj in time_zone_all | orderBy:\'GMT\'">{{\'(GMT\' + obj.GMT + \') \' + obj.show_name}}</option></select></div></div></dd></dl><dl class="dl-form account_password_wrap"><dt>登录密码 <span class=dl-form-desc>修改密码时需要输入当前密码；新密码长度要大于6位，建议您定期更换密码，确保帐号安全。</span></dt><dd><button ng-if=!password.is_edit class=btn ng-click="password.is_edit = true" wt-scroll-foucs=.account_password_wrap>设置登录密码</button><div ng-if=password.is_edit><form name=user_pwd_form w5c-form-validate="" class="form-horizontal wt-form w_660" novalidate><div class=form-group><label class=sr-only>原密码：</label><div class=col-xs-10><input name=pwd_old autofocus="" type=password class=form-control ng-model=password.old placeholder=原密码 required></div></div><div class=form-group><label class=sr-only>新密码：</label><div class=col-xs-10><input name=pwd_new type=password class=form-control ng-model=password.new placeholder=新密码 ng-minlength=6 required></div></div><div class=form-group><label class=sr-only>重复密码：</label><div class=col-xs-10><input name=pwd_again type=password class=form-control ng-model=password.repeat wt-repeat-password=pwd_new placeholder="再输入一次"></div></div><div class=form-group ng-show="user_pwd_form.$errors.length > 0"><div class=col-xs-10><div class="alert alert-danger mb_0"><i class=icon-remove-sign></i> {{user_pwd_form.$errors[0]}}</div></div></div><div class=form-group><div class=col-xs-10><button w5c-form-submit=js_user_change_pwd() class="btn btn-success mr_14 mt_13" data-loading-text=保存中... wt-loading-status=password.updating>确认修改</button> <button ng-click=js_cancel_pwd_edit() class="btn btn-link btn-cancel mt_13">取&nbsp; 消</button></div></div></form></div></dd></dl><dl class="dl-form account_email_wrap"><dt>邮箱地址 <span class=dl-form-desc>修改邮箱时 Worktile 会发送一封邮件到新的邮箱地址，请按照邮箱中的链接重置你的邮箱。</span></dt><dd><div ng-if="email_step == 1"><div><span class="mr_10 color-text-grayer">当前邮箱地址为：</span> {{global.me.email}}</div><button class="btn mt_28" ng-click=js_change_email_step(2) wt-scroll-foucs=.account_email_wrap>修改邮箱地址</button></div><div ng-if="email_step == 2"><wt-confirm-password class=w_360 confirm-cancel=js_change_email_step(1) confirm-success=js_change_email_step(3)></wt-confirm-password></div><div ng-if="email_step == 3"><form name=user_new_email_form w5c-form-validate="" class="wt-form w_660" novalidate><p>当前邮箱地址为：{{global.me.email}}</p><input name=new_email autofocus="" type=email class=form-control ng-model=new_email placeholder=新邮箱地址 required wt-remote-unique-check="{url:\'/api/user/email/check?email={{new_email | encodeURIComponent}}\'}"><div class="alert alert-danger mt_10" ng-show="user_new_email_form.$errors.length > 0"><i class=icon-remove-sign></i> {{user_new_email_form.$errors[0]}}</div><div class="alert alert-info mt_20" ng-hide=send_success><i class="icon-info-sign mr_5"></i> 系统会发送确认邮件到您的新邮箱中，请查收后点击邮件中的地址完成修改。</div><div class="alert alert-success" ng-show=send_success><i class="icon-ok mr_5"></i> 系统已经成功发送邮件到您的新邮箱中，请查收后点击邮件中的地址完成修改。</div><div class=mt_5><button w5c-form-submit="js_user_change_email(user_new_email_form, new_email)" class="btn btn-success mr_15" data-loading-text=发送中... wt-loading-status=is_sending_email>发送确认邮件</button> <button type=button ng-click=js_change_email_step(1) class="btn btn-link btn-cancel mr_15">取&nbsp; 消</button></div></form></div></dd></dl></div></dd>'),
a.put("/tpl/account/account_projects.html",""),a.put("/tpl/account/account_security.html",'<dd class=frame-dd><dl class="dl-form account_twofactor_warp"><dt>两步验证 <span class=dl-form-desc><span ng-hide="account.twofactor_enabled == 1">两步验证使用你的手机生成动态口令，为您的帐户添加一份额外的安全保障， <a href=/guide/advance/two-factor target=_blank>点击了解更多。</a></span> <span ng-show="account.twofactor_enabled == 1">您已经开启了两步验证，请妥善保存您的安全码，如果移动设备丢失，请使用安全码登录。</span></span></dt><dd><div class=navigate-step ng-show="two_step > 1"><div class=line><div ng-class="{true:\'active\'}[two_step >= 3]"></div><div ng-class="{true:\'active\'}[two_step >= 4]"></div></div><ol><li ng-class="{true:\'active\'}[two_step >= 2]"><span class=step-title>安装身份验证器</span><br><span class=number>1</span></li><li ng-class="{true:\'active\'}[two_step >= 3]"><span class=step-title>添加帐户</span><br><span class=number>2</span></li><li ng-class="{true:\'active\'}[two_step >= 4]"><span class=step-title>验证并开启</span><br><span class=number>3</span></li></ol></div><div ng-switch=two_step><div ng-switch-when=0><div class=form-group><div class=account_status ng-class="{1:\'on\',0:\'off\'}[account.twofactor_enabled]">当前状态：<b ng-class="{1:\'color-text-act-green\',0:\'color-text-act-red\'}[account.twofactor_enabled]" ng-bind="{1:\'开启\',0:\'关闭\'}[account.twofactor_enabled]"></b></div><dl class=recovery_code ng-show="account.twofactor_enabled == 1"><dt><a href=javascript:; ng-click="vm.account_show_recovery_code=!vm.account_show_recovery_code"><i class=icon-ticket></i> 点击查看安全码</a></dt><dd ng-if=vm.account_show_recovery_code><ul><li ng-repeat="recovery_code in vm.recovery_codes">{{recovery_code}}</li></ul></dd></dl></div><div class=form-group><button class="btn btn-default mt_13" ng-show="account.twofactor_enabled == 0" ng-click=js_two_step(1) wt-scroll-foucs=.account_twofactor_warp>开启两步验证</button> <button class="btn btn-default mt_13" data-loading-text=关闭两步验证中... wt-loading-status=is_disable_twofactoring ng-show="account.twofactor_enabled == 1" ng-click=js_disable_twofactor()>关闭两步验证</button></div></div><div class=text-center ng-switch-when=1><wt-confirm-password confirm-cancel=js_two_step(0) confirm-success=js_two_step(2)></wt-confirm-password></div><div class="col-xs-10 text-center" ng-switch-when=2><div class=clearfix><div class="col-xs-5 pull-left"><img src=/img/inner/account/install.png alt="安装到你的手机"></div><div class="col-xs-7 text-left pull-right"><h5>在移动设备上安装身份验证器</h5><p>Google身份验证器是谷歌开发的开源应用，可动态生成验证码，并且不会耗费手机流量。</p><div class=account-marketplace><i class="icon-android icon-3x"></i> <strong>Android 手机</strong><br>在各大应用市场搜索：身份验证器<br>或者直接访问：<a href=http://www.wandoujia.com/apps/com.google.android.apps.authenticator2 target=_blank>豌豆荚</a></div><div class=account-marketplace><i class="icon-apple icon-3x"></i> <strong>iPhone 手机</strong><br>在 AppStore 搜索：<br><a href="https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8" target=_blank>Google Authenticator</a></div>其他智能设备的安装<a href=/guide/advance/two-factor target=_blank>查看这里</a></div></div><div class="form-group col-xs-10 p_20"><button class="btn float_left mr_45" ng-click=js_two_step(1)><i class=icon-caret-left></i> 上一步</button> <button class="btn btn-success" ng-click=js_two_step(3)>下一步 <i class=icon-caret-right></i></button></div></div><div class="col-xs-10 text-center" ng-switch-when=3><div class=clearfix><div class="col-xs-5 pull-left"><img src=/img/inner/account/account-qrcode.png alt="安装到你的手机"></div><div class="col-xs-7 text-left pull-right"><h5>在身份验证器里添加帐户</h5><p>打开身份验证器应用，扫描条形码添加帐户</p><div class="part-loading mt_60" wt-loading-done=loading_twofactor_secret_done></div><div ng-show=loading_twofactor_secret_done><p ng-bind-html=twofactor_secret.qrcode></p><p class="alert alert-info col-xs-8"><i class="icon-info-sign mr_5"></i> 身份验证器不能扫描验证码？ 手动添加以下帐户：<br><b>帐户 ：</b>{{twofactor_secret.name}}<br><b>密钥 ：</b>{{twofactor_secret.secret}}</p></div></div></div><div class="form-group col-xs-10 p_20"><button class="btn mr_45" ng-click=js_two_step(2)><i class=icon-caret-left></i> 上一步</button> <button class="btn btn-success" ng-click=js_two_step(4)>下一步 <i class=icon-caret-right></i></button></div></div><div class="col-xs-10 text-center" ng-switch-when=4><div class=clearfix><div class="col-xs-5 pull-left"><img src=/img/inner/account/account-code.png alt="填写动态验证码"></div><div class="col-xs-7 text-left pull-right"><h5>开启动态身份验证</h5><p>输入身份验证器自动生成的动态验证码</p><div class="input-group w_300"><input type=text class=form-control wt-enter=js_enable_twofactor() ui-event="{ focus : \'js_twofactor_focus()\' }" ng-model=input.factor> <span class=input-group-btn><button class="btn btn-success" type=button data-loading-text=正在开启... wt-loading-status=is_enable_twofactoring ng-click=js_enable_twofactor()>验证并开启</button></span></div><div class="form-group w_300 mt_12" ng-show="input.enable_twofactor_errors.length > 0"><div class="alert alert-danger"><i class=icon-remove-sign></i> {{input.enable_twofactor_errors}}</div></div></div></div><div class="form-group col-xs-10 p_20"><button class=btn ng-click=js_two_step(3)><i class=icon-caret-left></i> 上一步</button></div></div></div></dd></dl><dl class=dl-form><dt>访问日志</dt><dd><div ng-hide=vm.part_loading_done class="part-loading mt_20"></div><div class=table-list ng-show=vm.part_loading_done><table class="table table-hover table--fancy"><thead><tr><th>&nbsp;应 &nbsp;用 &nbsp;</th><th>访问日期</th><th>IP地址</th></tr></thead><tbody><tr ng-repeat="history in account_histories"><td>&nbsp; &nbsp;{{history.source | clientName}}</td><td><span class=mr_15>{{history.create_date | timeFormatZHCN}}</span> {{history.create_date | fromNow}}</td><td>{{history.location + \'（\'+ history.ipaddress + \'）\'}}</td></tr><tr><td colspan=4 ng-show="account_histories.length == 0">还没有任何登录记录</td></tr></tbody></table><div class=pull-right wt-pagination=security_pagination_opts></div></div></dd></dl></dd>'),a.put("/tpl/account/account_settings.html",'<div class=layout_content><div class=layout_content_main><div class=mod-navbar><div class=main><div class=title><h3><i class="wtfont wtf-user"></i>帐户设置</h3></div></div><div class=sub><ul class=mod_subnav><li><a ui-sref-active=active href ui-sref=account.settings>基本设置</a></li><li><a ui-sref-active=active href ui-sref=account.individuation>个性化设置</a></li><li><a ui-sref-active=active href ui-sref=account.security>帐户安全</a></li><li><a ui-sref-active=active href ui-sref=account.message>消息设置</a></li><li><a ui-sref-active=active href ui-sref=account.apps>应用管理</a></li></ul></div></div><div class=height-nonav wt-scroll><dl class="frame frame--account-setting" data-minheight=112 ng-show=global.loading_done><ui-view></ui-view></dl></div></div></div>'),a.put("/tpl/account/account_trophies.html",""),a.put("/tpl/account/account_twofactor.html",""),a.put("/tpl/account/pop_decommissioning_confirm.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>解除授权</h3></div><div class="popbox-body w_300"><span>解除后该应用将不能进入Worktile，必须重新授权才可以进入。</span></div><div class=popbox-footer><button ng-click=js_decommissioning() data-loading-text=解除中... wt-loading-status=is_decommissioning class="btn btn-danger mr_15">确定解除</button> <a ng-click=js_close() class="btn btn-link btn-cancel">取消</a></div>'),a.put("/tpl/account/pop_webhook.html",'<div class=label-setter><ul class=popbox-step ng-switch on=vm.step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3 ng-if=!vm.isEdit>添加 Webhook</h3><h3 ng-if=vm.isEdit>编辑 Webhook</h3></div><form w5c-form-validate="" name=webhookform class=wt-form novalidate role=form><div class=popbox-body><div class=form-group><label>Webhook 名称</label><input type=text ng-model=vm.webhook.name name=name wt-autofocus="" class=form-control placeholder="Webhook 名称"></div><div class=form-group><label>通知URL</label><input type=url required="" name=url ng-model=vm.webhook.web_hook_url class=form-control placeholder=https://example.com></div><div class=form-group><label>URL密钥</label><input type=text name=secret ng-model=vm.webhook.secret class=form-control placeholder=(选填)></div></div><div class=popbox-footer><button type=submit w5c-form-submit=vm.js_save_webhook() class="btn btn-success mr_10" data-loading-text=保存中... wt-loading-status=is_saving>保 &nbsp;存</button> <a ng-if=!vm.isEdit ng-click=vm.js_close() class="btn btn-link btn-cancel">取 &nbsp;消</a> <button ng-if=vm.isEdit ng-click=vm.js_step(1) class=btn>删 &nbsp;除</button></div></form></li><li ng-switch-when=1><div class=popbox-header><button class="back icon-chevron-left" ng-click=vm.js_step(0)></button> <button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>删除Webhook</h3></div><div class=popbox-body><span>确定要删除Webhook吗?</span></div><div class=popbox-footer><button ng-click=vm.js_del_webhook() class="btn btn-danger">确定删除</button></div></li></ul></div>'),a.put("/tpl/account/pop_weixin_qrcode.html",'<div class=popbox-header ng-mousedown=vm.js_mousedown($event)><button class="cancel icon-remove" ng-click=js_close()></button><h3>绑定微信</h3></div><div class=popbox-bodywrapper wt-scroll ng-mousedown=vm.js_mousedown($event)><div class=popbox-body><div class=al-c ng-if=!vm.feed_bind_success><img width=200 src="/api/weixin/qrcode{{global.me.uid?\'?uid=\' + global.me.uid:\'\'}}" alt="Worktile 官方微信"><div class=al_c>请使用微信扫描二维码，完成绑定</div></div><div class=w_300 ng-if=vm.feed_bind_success><div class=al_c><i class="fa fa-check-circle fs-28 color-text-act-green"></i> <span class=fs-18>您的帐号已成功绑定微信！</span></div><div class=mt-20>绑定后，您不仅可以使用微信登录，还可通过 Worktile 微信服务号接收消息通知。</div><div class="mt-30 al-c color-text-gray">你已成功关注 Worktile 微信服务号；<br>为了您的使用便捷，请勿取消关注。</div></div></div></div>'),a.put("/tpl/account/pop_weixin_unbind_confirm.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>解除微信绑定</h3></div><div class="popbox-body w_350"><div class="alert alert-info"><div><i class="icon icon-info-sign mr_5"></i> 解除绑定后，您将：</div><div><span class="pl-20 pr-10">•</span>不能使用微信扫描二维码登录 Worktile</div><div><span class="pl-20 pr-10">•</span>不能通过 Worktile 服务号接收消息通知</div></div><div class=mt-20>确定要解除绑定微信吗？</div></div><div class=popbox-footer><button ng-click=js_ok() data-loading-text=解绑中... wt-loading-status=is_doing class="btn btn-danger mr_15">确定解绑</button> <button class="btn btn-link btn-cancel ml-10" ng-click=js_close()>取 &nbsp;消</button></div>'),a.put("/tpl/activity/activity_feed_template.html",'<script type=text/ng-template id=task_create><div class="feed-item-inner slide-trigger">\n        <div class="feed-item-header">\n            <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar>\n            <span class="actor">新建了任务</span>\n        </div>\n        <div class="feed-item-body">\n            <i class="icon-check-empty"></i>\n            <span class="entity">\n                {{feed.data.entity.name}}\n            </span>\n            <br/>\n        </div>\n        <span class="datetime">{{feed.published | fromNow}}</span>\n    </div></script><script type=text/ng-template id=task_complete><div class="feed-item-inner slide-trigger">\n        <div class="feed-item-header">\n            <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar>\n            <span class="actor">完成了任务</span>\n\n        </div>\n        <div class="feed-item-body">\n            <i class="icon-check-sign"></i>\n            <span class="entity">\n                {{feed.data.entity.name}}\n            </span>\n            <br/>\n        </div>\n        <span class="datetime">{{feed.published | fromNow}}</span>\n    </div></script><script type=text/ng-template id=task_comment_add><div class="feed-item-inner slide-trigger">\n        <div class="feed-item-header">\n            <wt-avatar member="feed.actor" name="true" size="30"></wt-avatar>\n            <span class="actor">评论了任务</span>\n\n        </div>\n        <div class="feed-item-body">\n            <i class="icon-comment-alt"></i>\n            <span class="comment">\n                {{feed.data.entity.name}}\n            </span>\n            <br/>\n            <span class="entity">\n                {{feed.data.target.name}}\n            </span>\n        </div>\n        <span class="datetime">{{feed.published | fromNow}}</span>\n    </div></script>'),a.put("/tpl/activity/activity_filter.html","<div class=btn-group ng-controller=filterActivityCtrl><button class=btn>{{selected_item.display_name}}</button> <a class=\"btn dropdown-toggle\" data-toggle=dropdown href=javascript:;><i class=icon-caret-down></i></a><ul class=\"dropdown-menu pull-right\"><li ng-class=\"{true:'divider',false:''}[item.type=='divider']\" ng-repeat=\"item in filter_items\"><a href=javascript:; ng-show=\"type.type!='divider'\" ng-click=js_select_filter_item(item)><i ng-class=\"{true:'icon-ok',false:'icon-xx'}[item.selected == true]\" class=color_gray></i> {{item.display_name}}</a></li></ul></div>"),a.put("/tpl/activity/activity_list.html",'<div class=empty-panel ng-show="activities != null && activities.length == 0"><i class=icon-time></i><br><span>还没有任何活动</span></div><div class="activity-list m_15" ng-if="activities && activities.length > 0" ng-cloak><ul class=activities><li class=activity-item bindonce="" ng-repeat="activity in activities" bo-class="{true:\'activity-item-day\'}[activity.is_show_date]"><div class=activity-day ng-show=activity.is_show_date><span class=year bo-html="([activity.published,\'YYYY\'] | momentFormat) +\'年<br>\'"></span> <strong bo-text="[activity.published,\'MM/DD\'] | momentFormat"></strong> <span class=weekday bo-text="[activity.published,\'ddd\'] | momentFormat"></span></div><div class=activity-icon><i bo-class="activity.verb | activityIcon"></i></div><div class=activity-meta><span class=date bo-title="[activity.published,\'HH:mm\'] | momentFormat" bo-text="[activity.published,\'HH:mm\'] | momentFormat"></span></div><wt-avatar member=activity.actor size=30 class=activity-avatar></wt-avatar><div class=activity-itemwarp><span class=activity><wt-include src="tpl_prefix + activity.template"></wt-include></span></div></li></ul></div><div class=loading-more-panel><div class=part-loading ng-show=loading_activity></div><button class=btn ng-show="has_more && (global.loading_done && loading_activity != true)" ng-click=js_load_more($event);>加载更多...</button></div>'),a.put("/tpl/activity/pop_filter_activity.html","<div class=popbox-header><button class=\"cancel icon-remove\" ng-click=js_close()></button><h3>筛选选项</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click=\"js_select_type('all')\"><i ng-class=\"{false: 'icon-xx', true: 'icon-ok'}[selected_type=='all']\" class=color_gray></i> 全部</a></li><li class=divider></li><li ng-repeat=\"filter_type in filter_types\"><a href=javascript:; ng-click=js_select_type(filter_type)><span class=color_gray ng-class=\"{true:'icon-ok',false:'icon-xx'}[filter_type.name == selected_type]\"></span> {{filter_type.display_name}}</a></li></ul></div>"),a.put("/tpl/activity/project_activities.html",'<div class=height-nonav wt-scroll><dl data-minheight=112 class="frame activity-panel"><dt class="frame-dt frame-dt--margin-lr-right"><span class=title>活动记录</span></dt><dd class=frame-dd><div class=frame-lr-right><ng-include src="\'/tpl/activity/project_activity_filter.html\'"></ng-include></div><div class=frame-lr-left><section ng-include="\'/tpl/activity/activity_list.html\'"></section></div></dd></dl></div>'),a.put("/tpl/activity/project_activity_filter.html",'<dl class=dl-filter><dt><span class=title>按类型筛选</span></dt><dd><ul class=checkable ng-controller=filterActivityCtrl><li ng-class="{true: \'selected\'}[item.selected]" ng-repeat="item in filter_items" ng-click=js_select_filter_item(item)><a href=javascript:;>{{item.display_name}}</a></li></ul></dd></dl>'),a.put("/tpl/calendar/calendar.html",'<div class=layout_content><div class="layout_content_main calendar"><div class=mod-navbar><div class=main><div class=title><h3><i class="wtfont wtf-calendar"></i>日 历</h3><a href=javascript:; class="fa fa-info-circle"></a></div><div class=main_toolbar><div href=javascript:; class="btn-group js-popbox mr_5"><a class="btn btn-success btn--fancy" wt-pop-new-event=js_new_event_success(events)>新建日程</a></div><a href=javascript:; class="btn btn--fancy mr_5" ng-click=vm.js_toggle_filter()>筛选</a> <a href=javascript:; class="btn btn--fancy" wt-go-to=/calendar/subscribe>订阅</a></div></div></div><div class=calendar-body><div class=margin_inner><div class=calendar-command-panel><div class=command-penal><div id=calendar-range-wrapper><a href=javascript:; ng-click=prev()><i class="fa fa-angle-left"></i></a><h4 id=calendar_title class=range-text></h4><a href=javascript:; ng-click=next()><i class="fa fa-angle-right"></i></a> <button id=calendar_today class="btn btn-today" ng-click=today()>今天</button></div><div class=month-week-wrapper><button class="btn month-btn" ng-class="{true: \'active\'}[vm.calendar_view==\'month\']" ng-click="changeView(\'month\')">月</button> <button class="btn week-btn" ng-class="{true: \'active\'}[vm.calendar_view==\'agendaWeek\']" ng-click="changeView(\'agendaWeek\')">周</button></div><div class=about-me-wrapper><div class=checkbox><span ng-click=js_toggle_showall() ng-class="{\'active\':!vm.show_all_events}"><i class="fa fa-dot-circle-o" ng-show=!vm.show_all_events></i> <i class="fa fa-circle-o" ng-show=vm.show_all_events></i> 与我有关</span></div></div></div><div class=calendar-panel ng-class="{\'agendaWeek\': \'week\'}[vm.calendar_view]"><div id=calendar calendar=myCalendar ui-calendar=calendarConfig ng-model=calendarEventSources></div></div></div></div></div></div><div class="layout_right_sidebar layout_right_sidebar--calender"><ng-include src="\'/tpl/calendar/calendar_project_filter.html\'"></ng-include></div></div>'),a.put("/tpl/calendar/calendar_project_filter.html",'<dl class="prj_sidebar h_100p" wt-sidebar-toggle=vm.calendar_project_filter_status><dd><div class=sidebar_header><a href=javascript:; ng-click=vm.js_toggle_filter()><button class="cancel wtfont wtf-close"></button><h3>日历筛选</h3></a></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><h3 class=sidebar_body_header>按项目筛选</h3><br><ul class=project-list-container><li class="project-item clickable" ng-class="{false: \'unchecked\', true: \'checked\'}[project.is_checked]" ng-repeat="project in calendar_projects" ng-click=js_filter_calendar_toggle(project)><div class=project-check><i ng-class="{false: \'icon-check-empty\', true: \'icon-check-sign\'}[project.is_checked]" ng-style="{true:{\'color\':project.bg}}[project.is_checked]"></i></div><a href=javascript:;><span class="project-icon {{project.pic}}" ng-style="{\'color\':project.bg}"></span> {{project.name}}</a></li></ul></div></div></dd></dl>'),a.put("/tpl/calendar/calendar_subscribe.html",'<div class=layout_content id=calendar-rss><div class=mod-navbar><div class="main main-clickable" wt-go-to=dashboard/calendar><div class=title><h3><i class="wtfont wtf-calendar"></i>日历订阅</h3></div><div class=main_toolbar><span class=main-clickable>返 &nbsp;回</span></div></div></div><div class="height-nonav height-nonav--notab" wt-scroll><dl class=frame data-minheight=112><dd class=frame-dd><div class="row mt_20"><div class="col-md-5 col-md-offset-1 p_20"><h3><strong>在 iPad 和 iPhone 上订阅</strong></h3><div><br><p class="fs-16 color-text-gray">扫描下方的二维码即可订阅我的日程，推荐使用 QQ 浏览器扫描</p><br></div><div class=help-inlineblock><p id=qrcode_wrap ng-bind-html=vm.qrcode></p></div></div><div class="col-md-4 col-md-offset-1 p_20"><h3><strong>在其他日程管理软件中订阅</strong></h3><div><br><p class="fs-16 color-text-gray">点击下方地址直接订阅，或者复制到日历软件中手动添加</p><br></div><div><p class="alert alert-info text-break p_20"><a href={{vm.suburl}} class="color-text-dark fs_15" target=_blank>{{vm.suburl}}</a></p></div><div class=text-left><button class="btn ml_15 js-popbox" data-align=right ng-click=reset_token($event)>重置订阅链接</button></div></div></div><p class="color-text-light pl_15 mt_20"><br>通过订阅功能，在手机、平板电脑或者其他日历软件中查看我的日程</p></dd></dl></div></div>'),a.put("/tpl/common/pay_dialog.html",'<div class=modal-dialog><div class=modal-content><div class=modal-header><h4>等待支付完成</h4></div><div class="modal-body min-h400"><button class="btn btn-success" ng-click=js_pay_complete()>支付完成</button> <button class="btn btn-success" ng-click=js_pay_exception()>支付出现问题</button></div></div></div>'),a.put("/tpl/common/pop_add_image.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>插入图片</h3></div><div class=popbox-body><ul class=popbox-menu><li><a ng-click=js_show_images()><i class=mr_5></i>选择已有图片</a></li><li><a ngf-select accept=image/* ngf-change=js_files_select($files)><i class=mr_5></i>{{{true:"正在上传中...",false:"本地上传"}[!!uploading_file]}}</a></li><li ng-show="error_msg.length > 0"><div class="alert alert-danger">{{error_msg}}</div></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>选择已有图片</h3></div><div class="popbox-bodywrapper max-h300 w_300" wt-scroll><div class=popbox-body><ul class=popbox-menu><div class="part-loading mt_12" wt-loading-done=images_loading_done></div><li ng-repeat="image in images" ng-click=js_select_image(image) class=ng-scope><a class="file-item-li-menu file-picfile ellipsis" href=javascript:;><img ng-src="{{image.path | wtBox}}" alt={{image.name}}> <span class="file-name ng-binding">{{image.name}}</span></a></li><li class=empty-menu ng-show="images.length == 0">本地没有任何图片</li></ul></div></div></li></ul>'),a.put("/tpl/common/pop_add_image2.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>选择已有图片</h3></div><div class="popbox-bodywrapper max-h300 w_300" wt-scroll><div class=popbox-body><ul class=popbox-menu><div class="part-loading mt_12" wt-loading-done=images_loading_done></div><li ng-repeat="image in images" ng-click=js_select_image(image) class=ng-scope><a class="file-item-li-menu file-picfile ellipsis" href=javascript:;><img ng-src="{{image.path | wtBox}}" alt={{image.name}}> <span class="file-name ng-binding">{{image.name}}</span></a></li><li class=empty-menu ng-show="images.length == 0">本地没有任何图片</li></ul></div></div></li><li ng-switch-default class=popbox-step-li><div class=popbox-body><ul class=popbox-menu><li><a ng-click=js_show_images()><i class=mr_5></i>选择已有图片</a></li><li><a href=javascript:; ngf-accept="\'image/*\'" ngf-select ngf-change=js_upload_image($files)><i class=mr_5></i>本地上传</a></li><li ng-show="error_msg.length > 0"><div class="alert alert-danger">{{error_msg}}</div></li></ul></div></li></ul>'),a.put("/tpl/common/pop_add_link.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>插入链接</h3></div><div class="popbox-body w_300"><form class=wt-form w5c-form-validate="" name=insert_link_form role=form novalidate><div class=form-group><label class=control-label>文字：</label><input type=text wt-focus="" autofocus="" class=form-control name=link_text ng-model=link_text placeholder=链接文字 required=""></div><div class=form-group><label class=control-label>地址：</label><input type=text class=form-control name=link_address ng-model=link_address placeholder=链接地址 required=""></div><div class=form-group><button w5c-form-submit=js_insert_link(insert_link_form) type=button class="btn btn-success">插入</button></div></form></div>'),a.put("/tpl/common/pop_add_link_2.html",'<div class="form-group link-input-wrapper"><div class=input-group><input type=text class=form-control name=link_address ng-model=link_address placeholder=输入链接地址 wt-enter=insert() wt-focus required> <span class=input-group-btn><a class="btn btn-default" ng-click=insert()>插入</a></span></div></div>'),a.put("/tpl/common/pop_comment_delete.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>确认删除</h3></div><div class="popbox-body w_300"><span>确认要删除此评论吗？</span></div><div class=popbox-footer><button ng-click=vm.js_sure_delete() data-loading-text=删除中... wt-loading-status=is_deleting class="btn btn-danger mr_15">确定删除</button> <button ng-click=vm.js_close() class="btn btn-link btn-cancel">取&nbsp; 消</button></div>'),a.put("/tpl/common/pop_datepicker.html",'<div class=popbox-header><button class=close ng-click=js_close()>&times;</button><h3>设置截止日期</h3></div><div class=popbox-body><input ng-model=task.expire_date type="hidden"><ul class="list-inline text-center m_0 pb_10"><li><a href=javascript:; ng-click=js_today()>今天</a></li><li>|</li><li><a href=javascript:; ng-click=js_tomorrow()>明天</a></li><li>|</li><li><a href=javascript:; ng-click=js_week()>本周</a></li><li>|</li><li><a href=javascript:; ng-click=js_next_week()>下周</a></li><li>|</li><li><a href=javascript:; ng-click=js_month()>本月</a></li></ul><div wt-datepicker=task.expire_date_temp></div></div><div class=popbox-footer><a class="btn btn-success mr_15" ng-click=js_set_expire(task.expire_date_temp)>&nbsp;&nbsp;确 定&nbsp;&nbsp;</a> <a class="btn btn--warning" ng-if="task.expire_date!=0" ng-click=js_cancel_expire()>移除截止日期</a><div class="text-muted mt_13">设置了截止日期的任务将在分配者的日程中<br>显示</div></div>'),a.put("/tpl/common/pop_delete_confirm.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>{{ delete_title || "确认删除"}}</h3></div><div class="popbox-body w_300"><span ng-bind-html="delete_message || \'确认要删除此选项吗？\'"></span></div><div class=popbox-footer><button ng-click=js_sure_delete() ng-bind-html="delete_button || \'确定删除\'" data-loading-text=删除中... wt-loading-status=is_deleting class="btn btn-danger mr_15"></button></div>'),a.put("/tpl/common/pop_new_comment_emojis.html",'<div class="popbox-body emoji-box" ng-mousedown=vm.js_mousedown($event) style="max-height: 250px"><ul class=popbox-item><li ng-click=vm.js_insert_emoji(emoji) ng-repeat="emoji in vm.emojis"><a href=javascript:><img class=emoji ng-src="/img/emoji/{{ emoji }}.png"></a></li></ul><ul class="pagination pagination-sm"><li ng-repeat="emoji_group in vm.emoji_groups" ng-class="{true:\'active\'}[vm.current_page == $index]"><a href=javascript:; ng-click=vm.js_to_page($index)>{{$index+1 }}</a></li></ul></div>'),a.put("/tpl/common/pop_new_comment_metion.html",'<div class=popbox-header ng-mousedown=vm.js_mousedown($event)><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>发送通知</h3></div><div class=popbox-bodywrapper wt-scroll ng-mousedown=vm.js_mousedown($event)><div class=popbox-body><input type=text autofocus="" wt-focus="" ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br><ul class=popbox-menu><li class=member-item ng-repeat="member in vm.metion_members | filterMembers:search_user_input"><wt-avatar member=member size=30 name=true atname=true faceclass=plr_5 click=vm.js_metion_member($event,member)></wt-avatar></li></ul></div></div><div class="popbox-footer top-divider"><a class=action-item href=javascript:; ng-click=vm.js_metion_all($event)><span class=fs_15>@</span> 全部成员({{vm.metion_members.length}})</a></div>'),a.put("/tpl/common/pop_weixin_qrcode.html",'<div><img width=200 src="/api/weixin/qrcode{{global.me.uid?\'?uid=\' + global.me.uid:\'\'}}" alt="Worktile 官方微信"><div class="w_200 plr_10 pb_7">关注后，可直接在服务号中接收消息通知</div></div>'),a.put("/tpl/common/watch_filter.html",'<ul class="nav nav-pills" ng-controller=filter_watch_ctrl><li ng-class="{true:\'active\'}[item.selected == true]" ng-repeat="item in filter_items"><a href=javascript:; ng-click=js_select_filter_item(item)>{{item.display_name}}</a></li></ul>'),a.put("/tpl/dashboard/broadcast_widget.html",'<div class="box-panel broadcast" ng-if=is_show><div class=box-panel-header><h4><i class="icon-signal mr_10"></i> 广播 <a href=javascript:; class=pull-right wt-track=dashboard|broadcastClose ng-click=js_close() tooltip=不再显示>&times</a></h4></div><div class=box-panel-body><a href={{broadcast_msg.url}} wt-track=dashboard|broadcast|broadcast_id|{{broadcast_msg.broadcast_id}} target=_blank><img class="w_100p h_180" ng-src={{broadcast_msg.cover}} ng-if=broadcast_msg.cover title={{broadcast_msg.title}} alt={{broadcast_msg.title}}><h5>{{broadcast_msg.title}}</h5></a> <span class=broadcast_desc>{{broadcast_msg.desc}}</span></div></div>'),a.put("/tpl/dashboard/dashboard.html",'<div class=layout_content><div class="layout_content_main dashboard"><div class=mod-navbar><div class=main><div class=title><h3><i class="wtfont wtf-dashboard"></i>工作台</h3><a href=javascript:; class="fa fa-info-circle" tooltip=辅助提示 tooltip-placement=bottom></a></div></div></div><div class="height-nonav height-nonav--notab dashboard-body" wt-scroll><div class=margin_inner><div class=fix-left-col><div class="widget widget-hello"><div class=body><div class=greeting><div><span class=name>{{global.me.display_name}},</span> <span class=greeting-text>{{hi_greetings}}</span></div><div class=date>{{show_date}}</div></div><div class=stats><div class="col uncompleted" ng-click="goToTask(\'uncompleted\')"><div class=number><i class="fa fa-refresh" ng-if=!overview></i> {{overview.uncompleted}}</div><div class=text>待完成</div></div><div class="col expired" ng-click="goToTask(\'expired\')"><div class=number><i class="fa fa-refresh" ng-if=!overview></i> {{overview.expired}}</div><div class=text>已过期</div></div><div class="col completed" ng-click="goToTask(\'completed\')"><div class=number><i class="fa fa-refresh" ng-if=!overview></i> {{overview.completed}}</div><div class=text>已完成</div></div></div></div></div><div class="widget widget-itinerary"><div class=header>今天日程</div><div class=body><div class="empty-panel empty-panel-small" ng-if="today_events.length == 0"><i class=icon-calendar-empty></i><br><span>今天没有日程</span></div><ul class=line-item-container ng-show="today_events.length > 0"><li class=line-item ng-repeat="event in today_events"><div class=time>{{event.start.date | timeFormat}}</div><div class=title><a href=javascript:; ng-click="locator.openEvent(event.pid, event.event_id);">{{event.name}}</a></div></li></ul></div></div><div class="widget widget-email"><div class=header>我的邮件<div class=more><a ui-sref=dashboard.email>更多 <i class=icon-double-angle-right></i></a></div></div><div class=body><div class="empty-panel empty-panel-small" ng-if="mails.length == 0"><i class=icon-envelope-alt></i><br><span>还没邮件</span></div><ul class=line-item-container><li class=line-item ng-repeat="mail in mails"><div class=icon-title><div class=icon><a href=javascript:; ng-click="js_set_mail_read($event, mail)" ng-class="{true: \'non-visible\', false: \'yellow\'}[mail.is_read == 1]" class=yellow><i class=icon-envelope></i></a></div><div class=title><a href=javascript:; ng-click=js_open_mail_detail(mail)>{{mail.subject}}</a></div></div><div class=meta><span class=mail-from>{{mail.from}}</span> <span class=mail-create>&nbsp;{{mail.create_date | fromNow}}</span></div></li></ul></div></div><div class="widget widget-broadcast" ng-controller=broadcastWidgetCtrl><div class=header>广播<div class=more><a href=https://worktile.com/club/ycbar>更多 <i class=icon-double-angle-right></i></a></div></div><div class=body><a href={{broadcast_msg.url}} wt-track=dashboard|broadcast|broadcast_id|{{broadcast_msg.broadcast_id}} target=_blank><img class="w_100p h_180" ng-src={{broadcast_msg.cover}} ng-if=broadcast_msg.cover title={{broadcast_msg.title}} alt={{broadcast_msg.title}}></a></div></div></div><div class=elastic-right-col><div class="widget widget-mytask"><div class=header>我的任务<div class=more><a ui-sref=dashboard.task>更多 <i class=icon-double-angle-right></i></a></div></div><div class=body><div class="part-loading mt_20" ng-hide=tasks_loading_done></div><div class=empty-panel ng-show="uncompleted_tasks.length == 0"><i class=icon-check></i><br><span>还没有未完成的任务</span></div><div class="line-item-container slide-trigger" ng-show=tasks_loading_done><wt-task view-type=item show-project=true ng-repeat="task in uncompleted_tasks" ng-click="js_open_task(task.pid, task.tid)"></wt-task></div></div></div><div class="widget widget-activity-feed"><div class=header>最新动态<div class=more><a ui-sref=dashboard.feed>更多 <i class=icon-double-angle-right></i></a></div></div><div class="body feed-list"><div class="part-loading mt_20" ng-hide=feeds_loading_done></div><div class=empty-panel ng-show="feeds.length == 0 && feeds_loading_done"><i class=icon-time></i><br><span>没有最新动态</span></div><div class="line-item wt-row feed-item" bindonce="" ng-repeat="feed in feeds"><wt-feed></wt-feed></div></div></div></div></div></div></div></div>'),
a.put("/tpl/dashboard/dashboardActivityFeed.html",'<div class=layout_content><div class="layout_content_main dashboard"><div class=mod-navbar><div class="main main-clickable" wt-go-to=/dashboard><div class=title><h3><i class=icon-xx></i>最新动态</h3></div><div class=main_toolbar><span class=main-clickable-text>返回工作台</span></div></div></div><div class="height-nonav height-nonav--notab dashboard-body" wt-scroll><dl class=frame data-minheight=108><div class=right-fix-col><div class=button-container><button class=btn ng-click=vm.js_refresh_feed($event)><i class="fa fa-refresh"></i>&nbsp;&nbsp;刷新动态</button></div></div><div class=left-elastic-col><div class="empty-panel noborder" ng-show="vm.feedData.feeds.length == 0 && vm.loadingDone"><i class=icon-time></i><br><span>没有最新动态</span></div><ul class="activity-list-container feed-list" bindonce=""><li class="line-item wt-row feed-item" ng-repeat="feed in vm.feedData.feeds"><wt-feed></wt-feed></li><div class=loading-more-panel><div class=part-loading ng-hide=vm.loadingDone></div><button class="btn more-btn" ng-if="vm.feedData.hasMore && vm.loadingDone" data-loading-text=加载中... wt-loading-status=!vm.loadingDone ng-click=vm.js_loadMoreActivityFeeds();>加载更多...</button></div></ul></div></dl></div></div></div>'),a.put("/tpl/dashboard/dashboardCalendar.html",'<div class=layout_content><div class="layout_content_main calendar"><div class=mod-navbar><div class=main><div class=title><h3><i class="wtfont wtf-dashboard"></i>工作台</h3></div><div class=main_toolbar></div></div><div class=sub><ul class=mod_subnav><li><a href=/dashboard>我的任务</a></li><li><a href=/dashboard/calendar class=active>我的日程</a></li><li><a href=/dashboard/email>我的邮件</a></li></ul><div class=sub_toolbar><div href=javascript:; class="btn-group js-popbox mr_5"><a class="btn btn-success btn--fancy" wt-pop-new-event=js_new_event_success(events)>新建日程</a></div><a href=javascript:; class="btn btn--fancy" wt-go-to=/calendar/subscribe>订阅</a></div></div></div><div class=calendar-body><div class=margin_inner><div class=calendar-command-panel><div class=command-penal><div id=calendar-range-wrapper><a href=javascript:; ng-click=prev()><i class="fa fa-angle-left"></i></a><h4 id=calendar_title class=range-text></h4><a href=javascript:; ng-click=next()><i class="fa fa-angle-right"></i></a> <button id=calendar_today class="btn btn-today" ng-click=today()>今天</button></div><div class=month-week-wrapper><button class="btn month-btn" ng-class="{true: \'active\'}[vm.calendar_view==\'month\']" ng-click="changeView(\'month\')">月</button> <button class="btn week-btn" ng-class="{true: \'active\'}[vm.calendar_view==\'agendaWeek\']" ng-click="changeView(\'agendaWeek\')">周</button></div><div class=about-me-wrapper></div></div><div class=calendar-panel ng-class="{\'agendaWeek\': \'week\'}[vm.calendar_view]"><div id=calendar calendar=myCalendar ui-calendar=calendarConfig ng-model=calendarEventSources></div></div></div></div></div></div><div class="layout_right_sidebar layout_right_sidebar--calender"><ng-include src="\'/tpl/calendar/calendar_project_filter.html\'"></ng-include></div></div><ui-view></ui-view>'),a.put("/tpl/dashboard/dashboardEmail.html",'<div class="layout_content dashboard"><div class=layout_content_main><div class=mod-navbar><div class=main><div class=title><h3><i class="wtfont wtf-dashboard"></i>工作台</h3></div><div class=main_toolbar></div></div><div class=sub><ul class=mod_subnav><li><a href=/dashboard>我的任务</a></li><li><a href=/dashboard/calendar>我的日程</a></li><li><a href=/dashboard/email class=active>我的邮件</a></li></ul><div class=sub_toolbar><div class="btn-group mr_5"><a href=javascript:; class="js-popbox openpop" data-placement=bottom data-align=right ng-click=js_pop_showhelp($event);><i class=icon-info-sign></i></a></div></div></div></div><div class=height-nonav wt-scroll><dl class="frame dashboard-body" data-minheight=108><dt class="frame-dt frame--dt" ng-if="emailData.emails.length != 0 && loadingDone"><span class="title title--breadcrumb"><a ng-href=/dashboard/email>我的邮件</a></span></dt><div class="empty-panel noborder empty-panel-mt-10" ng-if="emailData.emails == 0 && loadingDone"><i class=icon-envelope-alt></i><br><br><p class=fs_17>你可以把重要邮件、微博、微信、网盘、Evernote等应用中的内容，转发到邮箱 <strong class=color_main>{{global.me.name}}@inbox.worktile.com</strong><br>以便收集到Worktile，或者通过话题与团队成员分享。</p></div><ul class=email-list-container><li class="email-item slide-trigger" ng-repeat="email in emailData.emails" ng-click=showEmailDetail(email)><div class="column right"><div class=date>{{email.create_date | dateFormatZHCN}}</div></div><div class="column center"><div class=subject ng-class="{bold: !email.is_read, pale:email.is_read }">{{email.subject}}</div></div><div class="column left"><div class=icon ng-class="{bold: !email.is_read, pale:email.is_read }"><a href=javascript:; ng-click="js_set_mail_read($event, email)" ng-class="{\'yellow\': !email.is_read, \'gray\':email.is_read}"><i class=icon-envelope></i></a></div><div class=from title={{email.from}} ng-class="{bold: !email.is_read, pale:email.is_read }">{{email.from}}</div></div></li><div class=loading-more-panel><div class=part-loading ng-hide=loadingDone></div><button class=btn ng-show="emailData.hasMore && loadingDone" data-loading-text=加载中... wt-loading-status=!loadingDone ng-click=loadMoreEmails();>加载更多...</button></div></ul></dl></div></div></div>'),a.put("/tpl/dashboard/dashboardTask.html",'<div class=layout_content><div class="layout_content_main dashboardTask"><div class=mod-navbar><div class=main><div class=title><h3><i class="wtfont wtf-dashboard"></i>工作台</h3></div><div class=main_toolbar></div></div><div class=sub><ul class=mod_subnav><li><a href=/dashboard class=active>我的任务</a></li><li><a href=/dashboard/calendar>我的日程</a></li><li><a href=/dashboard/email>我的邮件</a></li></ul><div class=sub_toolbar><a ng-if="vm.task_tab === \'uncompleted\'" ng-click=js_toggle_tasklist(true) href=javascript:; class=mr_15 tooltip=看板视图 tooltip-placement=bottom><i class="fa fa-th-large vl-middle" ng-class="{true:\'\',false:\'color-text-gray\'}[vm.isTaskList]"></i></a> <a ng-if="vm.task_tab === \'uncompleted\'" ng-click=js_toggle_tasklist(false) href=javascript:; tooltip=列表视图 tooltip-placement=bottom><i class="fa fa-list-ul" ng-class="{false:\'\',true:\'color-text-gray\'}[vm.isTaskList]"></i></a> <span ng-if="vm.task_tab === \'uncompleted\'" class="divider-vertical m_20"></span> <a href=javascript:; ng-if="vm.task_tab === \'uncompleted\'" ng-click="vm.change_top_tab(\'completed\')">查看已完成任务</a> <a href=javascript:; ng-if="vm.task_tab === \'completed\'" ng-click="vm.change_top_tab(\'uncompleted\')">查看待完成任务</a></div></div></div><div ng-if="vm.task_tab === \'uncompleted\' && vm.isTaskList" class=height-nonav><div class=part-loading ng-if=!vm.part_loading_done></div><div ng-show=vm.loaded class="h_100p entries_panel js-sortable" wt-scroll={&quot;horizontalScroll&quot;:true,&quot;keyboard&quot;:{&quot;enable&quot;:false},&quot;advanced&quot;:{&quot;autoExpandHorizontalScroll&quot;:true,&quot;autoScrollOnFocus&quot;:false,&quot;updateOnSelectorChange&quot;:&quot;.entry&quot;}}><div class=entries_panel_sortarea><div id=entry_main_{{$index+1}} class=entry ng-repeat="taskarry in vm.taskArrays"><div class="entry_header entry_header--dashboard clearfix"><div class="entry_header_title pull-left"><h2 ng-if="$index === 0">分配给我的任务</h2><h2 ng-if="$index === 1">今天要做</h2><h2 ng-if="$index === 2">下一步要做</h2><h2 ng-if="$index === 3">以后再做</h2></div><div class="entry_header_title entry_header_title--dashboard pull-right"><h2 ng-if="taskarry.length>0">{{taskarry.length}}</h2></div></div><div class=entry-task-panel wt-scroll={&quot;axis&quot;:&quot;y&quot;,&quot;mouseWheel&quot;:{&quot;preventDefault&quot;:true},&quot;advanced&quot;:{&quot;updateOnSelectorChange&quot;:&quot;.task&quot;}} data-maxheight=175><div class="entry-tasks js-sortable min-h20" sortable=vm.tasks_sort_options mark={{$index+1}}><div class=entry-task-empty-dashboard wt-disable-drag ng-if=!taskarry.length><span ng-if="$index === 0">分配给你的任务都会显示在这里</span> <span ng-if="$index === 1">今天要做的任务放到这里</span> <span ng-if="$index === 2">接下来会做的任务放到这里</span> <span ng-if="$index === 3">以后再考虑的任务放到这里</span></div><wt-task ng-repeat="task in taskarry track by task.tid" task=task ng-hide=task.is_filter show-project=true class="right_click_trigger slide-trigger js-popbox task--dashboard" data-placement=bottom data-align=left ng-click=js_open_task_detail($event,task,entry)></wt-task></div></div></div><div ng-hide=vm.loaded class="part-loading mt_20"></div><ui-view></ui-view></div></div></div><div ng-if="vm.task_tab === \'uncompleted\' && !vm.isTaskList" class="height-nonav dashboard-body" wt-scroll><dl class=frame data-minheight=112 ng-if=vm.loaded><dt class="frame-dt frame--dt"><span class="title title--breadcrumb"><div class=help-inlineblock><a ng-href=/dashboard>待完成任务</a></div></span></dt><hr class="m_0"><div ng-show=vm.part_loading_done><div class=empty-panel ng-show="vm.group_tasks.length == 0"><i class=icon-check></i><br><span>没有未完成的任务</span></div><div class="widget widget-mytask"><div class="body expired no-min-height no-border" ng-show="vm.group_tasks.length > 0"><div class="line-item-container slide-trigger" ng-repeat="group in vm.group_tasks"><div class=task-header ng-click="group.collapse = !group.collapse"><div class=text>{{group.phase}}</div><span class=number>{{group.tasks.length}}</span><div class=toggle-handle><a href=javascript:;><i class=icon-chevron-down ng-show=group.collapse></i> <i class=icon-chevron-up ng-show=!group.collapse></i></a></div></div><div ng-init="group.collapse = false" collapse=group.collapse><wt-task view-type=item show-project=true disable-checkbox=true ng-repeat="task in group.tasks" ng-click="locator.openTask(task.pid, task.tid)"></wt-task></div></div></div></div></div><div class="part-loading mt_20" ng-if=!vm.part_loading_done></div></dl></div><div ng-if="vm.task_tab === \'completed\'" class="height-nonav dashboard-body" wt-scroll><dl class=frame data-minheight=112 ng-if=vm.loaded><dt class="frame-dt frame--dt"><span class="title title--breadcrumb"><div class=help-inlineblock><a ng-href=/dashboard>已完成任务</a></div></span></dt><hr class="m_0"><div ng-show=vm.part_loading_done><div class="empty-panel noborder" ng-show="vm.completed_tasks.length == 0 && vm.part_loading_done"><i class=icon-check></i><br><span>没有已经完成的任务</span></div><div class="widget widget-mytask"><div class="body completed no-min-height no-border" ng-show="vm.completed_tasks.length > 0"><div class="line-item-container slide-trigger"><wt-task view-type=item ng-repeat="task in vm.completed_tasks" ng-click="locator.openTask(task.pid, task.tid)"></wt-task></div><div class=loading-more-panel ng-if="vm.part_loading_done && vm.has_more_completed_tasks"><button class=btn ng-click=load_more_completed_tasks();>加载更多...</button></div></div></div></div><div class="part-loading mt_20" ng-if=!vm.part_loading_done></div></dl></div></div></div>'),a.put("/tpl/dashboard/pop_dashboard_mailhelp.html",'<ul class="pop_dashboard_mailhelp popbox-step w_300" wt-stop-propagation><li class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>提示</h3></div><div class=popbox-body>你可以把重要邮件、微博、微信、网盘、 Evernote等应用中的内容， 转发到邮箱<br><br><blockquote><strong class="color_main text-break">{{global.me.name}}@inbox.worktile.com</strong></blockquote>以便收集到Worktile，或者通过话题与 团队成员分享。</div></li></ul>'),a.put("/tpl/dashboard/projects.html",'<div class=layout_content><div class=layout_content_main><div class=mod-navbar><div class=main><div class=title><h3><i class=icon-inbox></i>项&nbsp;&nbsp;目</h3></div><div class=main_toolbar></div></div></div><div class=height-nonav wt-scroll style=top:55px><div class="part-loading mt_20" ng-hide=part_loading_done></div><div class=projects-panel ng-show=part_loading_done><div class=project-grid-panel><div class=projects-panel-header ng-hide="(vm.projects | filter:{is_star:1}).length==0"><i class=icon-star></i> 常用项目 <span class="color-text-act-red ml_5 mr_5">{{(vm.projects | filter:{is_star:1}).length}}</span>个</div><div class="project-grid ui-sortable" sortable=project_sort_options ng-hide="(vm.projects | filter:{is_star:1}).length==0"><wt-project-grid-board-item ng-repeat="project in vm.projects | filter:{is_star:1}" project=project icon=star type=0></wt-project-grid-board-item></div><div ng-repeat="team in vm.teams"><div class=projects-panel-header><a ng-if="team.team_id && team.team_id != \'-1\'" href=/teams/{{team.team_id}}><i class=icon-sitemap></i>&nbsp;&nbsp;{{team.name}}</a> <span ng-if="team.team_id && team.team_id != \'-1\'" class="color-text-act-red ml_5">{{team.projects.length}}</span> <span ng-if="team.team_id && team.team_id == \'-1\'"><i class="icon-user mr_5"></i>&nbsp;&nbsp;{{team.name}}</span> <span class="color-text-act-red ml_5" ng-if="team.team_id && team.team_id == \'-1\'">{{team.projects.length}}</span> 个</div><div class=project-grid ng-class="{\'ui-sortable\':team.projects.length!=0}" sortable="{true:project_sort_options}[team.projects.length!=0]"><wt-project-grid-board-item ng-repeat="project in team.projects" project=project icon=star team=team type=1></wt-project-grid-board-item><div class="project-item projects-empty" ng-show="team.projects.length==0"><a class=center href=javascript:; wt-disable-drag><i class=icon-inbox></i><h4>还没有参与任何项目</h4></a></div></div></div><div class=empty-panel ng-show="vm.projects.length == 0 && vm.teams.length == 0 && part_loading_done" ng-cloak><i class=icon-inbox></i><br><span>还没有任何参与项目</span></div><div class=projects-panel-header ng-class="{true:\'noboard\',false:\'\'}[!vm.isFav]" ng-hide="vm.fav_projects.length == 0"><i class="fa fa-heart fs-16"></i> 收藏项目 <span class="color-text-act-red ml_5 mr_5">{{vm.fav_projects.length}}</span>个 <a href=javascript:; class="toggle_link ml_10" ng-if=!vm.isFav ng-click=toogleFaver(true,$event)>显示</a> <a href=javascript:; class="toggle_link ml_10" ng-if=vm.isFav ng-click=toogleFaver(false,$event)>隐藏</a></div><div id=fav_div class="project-grid ui-sortable" ng-hide="(!vm.isFav || vm.fav_projects.length === 0)"><wt-project-grid-board-item ng-repeat="project in vm.fav_projects" fprojects=vm.fav_projects project=project icon=heart></wt-project-grid-board-item></div><div class=projects-panel-header ng-class="{true:\'noboard\',false:\'\'}[!vm.isArchive]" ng-hide="vm.archived_projects.length == 0"><i class="fa fa-archive"></i> 归档项目 <span class="color-text-act-red ml_5 mr_5">{{vm.archived_projects.length}}</span>个 <a href=javascript:; class="toggle_link ml_10" ng-if=!vm.isArchive ng-click="toogleArchive(true, $even)">显示</a> <a href=javascript:; class="toggle_link ml_10" ng-if=vm.isArchive ng-click="toogleArchive(false, $even)">隐藏</a></div><div class="project-grid ui-sortable" ng-hide="(vm.archived_projects.length==0 || !vm.isArchive)"><wt-project-grid-board-item ng-repeat="project in vm.archived_projects" project=project icon=star></wt-project-grid-board-item></div></div></div></div></div></div>'),a.put("/tpl/dashboard/projects_archive.html",'<div class=layout_content><div class="layout_content_main no_sidebar"><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-inbox mr_10"></i>项目</h3></div><div class=pull-right><ul class=tabs><li><a href=/projects ng-class="{true: \'active\'}[top_tab == \' \']">我参与的</a></li><li><a href=/projects/fav ng-class="{true: \'active\'}[top_tab == \'fav\']">我收藏的</a></li><li><a href=/projects/archive ng-class="{true: \'active\'}[top_tab == \'archive\']">归档项目</a></li></ul></div></div></div><div class="layout_content_main no_sidebar height-nonav" wt-scroll><div class=project-list><div class="part-loading mt_20" ng-hide=part_loading_done></div><dl class=frame data-minheight=112 ng-show=part_loading_done><dt><span class=title>归档项目</span></dt><dd><div class=empty-panel ng-show="archived_projects.length === 0"><i class=icon-archive></i><br><span>没有任何归档项目</span></div><div class=wt-row ng-repeat="project in archived_projects" wt-go-to=/project/{{project.pid}}><div class="column column-star">&nbsp;</div><div class="column column-icon"><i ng-class=project.pic ng-style={color:project.bg}></i></div><div class="column column-name"><h4>{{project.name}}</h4></div><div class="column column-admin"><wt-avatar ng-repeat="member in project.admins" class="js-popbox member mr_5" member=member size=30></wt-avatar></div><div class="column column-member"><i class="icon-user mr_5"></i>{{project.member_count}}</div></div></dd></dl></div></div></div></div>'),a.put("/tpl/dashboard/projects_fav.html",'<div class=layout_content><div class="layout_content_main no_sidebar"><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-inbox mr_10"></i>项目</h3></div><div class=pull-right><ul class=tabs><li><a href=/projects ng-class="{true: \'active\'}[top_tab == \' \']">我参与的</a></li><li><a href=/projects/fav ng-class="{true: \'active\'}[top_tab == \'fav\']">我收藏的</a></li><li><a href=/projects/archive ng-class="{true: \'active\'}[top_tab == \'archive\']">归档项目</a></li></ul></div></div></div><div class="layout_content_main no_sidebar height-nonav" wt-scroll><div class=project-list><div class="part-loading mt_20" ng-hide=part_loading_done></div><dl class=frame data-minheight=112 ng-show=part_loading_done><dt><span class=title>我收藏的项目</span></dt><dd><div class=empty-panel ng-if="favorite_projects.length === 0"><i class=icon-inbox></i><br><span>没有收藏任何项目</span></div><div class=wt-row ng-repeat="project in favorite_projects"><div class="column column-star"><a class=star ng-class="{1: \'star-started\', 0: \'\'}[project.is_favorite]" href=javascript:; tooltip-placement=bottom ng-click=js_favorite_toggle($event,project) tooltip="{{{1:\'取消收藏\',0:\'收藏\'}[project.is_favorite]}}"><i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_favorite]" class=icon-star></i></a></div><div class="column column-icon" wt-go-to=/project/{{project.pid}}><i ng-class=project.pic ng-style={color:project.bg}></i></div><div class="column column-name" wt-go-to=/project/{{project.pid}}><h4>{{project.name}}</h4></div><div class="column column-admin"><wt-avatar ng-repeat="member in project.admins" class="js-popbox member mr_5" member=member size=30></wt-avatar></div><div class="column column-member"><i class="icon-user mr_5"></i>{{project.member_count}}</div></div></dd></dl></div></div></div></div>'),a.put("/tpl/directive/activity.html","<div><div class=activity-day ng-show=activity.is_show_date><span class=year>{{[activity.published,'YYYY'] | momentFormat}}年<br></span> <strong>{{[activity.published,'MM/DD'] | momentFormat}}<br></strong> <span class=weekday>{{[activity.published,'ddd'] | momentFormat}}</span></div><div class=activity-icon><i ng-class=\"activity.verb | activityIcon\"></i></div><div class=activity-meta><span class=date wt-title=\"[activity.published,'HH:mm'] | momentFormat\">{{[activity.published,'HH:mm'] | momentFormat}}</span></div><wt-avatar member=activity.actor size=30 class=activity-avatar></wt-avatar><div class=activity-itemwarp><span class=activity><span class=actor>{{activity.actor.display_name}}</span> <span class=verb ng-bind-html-unsafe=verb></span> <a class=target title={{display_entity.name}} href=javascript:; ng-click=js_to_entity(display_entity)>{{display_entity.name}}</a></span></div></div>"),a.put("/tpl/directive/add_pop_attachment_from_file.html",'<ul class=popbox-step wt-stop-propagation=""><li class=popbox-step-li><div class=popbox-header><button ng-if="folder_ids.length > 0" class="back icon-chevron-left" ng-click=go_back()></button> <button ng-if="folder_ids.length == 0 && has_go_further_back" class="back icon-chevron-left" ng-click=go_back_further()></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>从项目文件选择</h3></div><div class="popbox-bodywrapper w_300" wt-scroll><div class=popbox-body><ul class=popbox-menu><li ng-repeat="file in files_controls.files" ng-click=js_attach(file)><a class="file-item-li-menu ellipsis" ng-class="{0:\'file-picfile\', 1:\'file-picfolder\'}[file.type]" href=javascript:;><img ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"> <span>{{file.name}}</span></a></li><li ng-show="files_controls.files.length == 0 && files_controls.loading_done"><div class=empty-menu>没有文件</div></li></ul></div><div class="popbox-footer top-divider" ng-show=files_controls.has_more_files><div class=loading-more-panel><div class=part-loading ng-hide=files_controls.loading_done></div><a class=action-item href=javascript:; ng-click=load_more(); data-loading-text=加载中... ng-show=files_controls.loading_done><span>加载更多...</span></a></div></div></div></li></ul>'),a.put("/tpl/directive/avatar_pop.html",'<div class=popbox-avatar><div class=avatar-body><button class="cancel icon-remove" ng-click=js_close()></button><wt-avatar member=member size=56></wt-avatar><div class=avatar-right><h4 class=avatar-heading>{{member.display_name}}</h4><p>@{{member.name}}</p></div></div><div class=avatar-footer><button class="btn btn-danger">DD</button></div></div>'),a.put("/tpl/directive/confirm_password.html",'<div class=confirm-password><span class=caption>输入帐号密码</span><form class=wt-form w5c-form-validate="" name=confirm_password_form role=form novalidate><wt-avatar member=global.me name=true namebr=true atname=true size=80></wt-avatar><br><span class=text>确认是您本人操作，请输入当前帐户密码并继续</span><div class=form-group><input name=confirm_password ng-model=confirm_password class=form-control type=password autofocus=autofocus required="" placeholder="输入当前帐户密码"></div><div class=form-group ng-show="confirm_password_form.$errors.length > 0"><div class="alert alert-danger"><i class=icon-remove-sign></i> {{confirm_password_form.$errors[0]}}</div></div><div class=form-group><a class="btn btn-success btn-block" w5c-form-submit=js_confirm_password(confirm_password_form) data-loading-text=确认中... wt-loading-status=confirming>确认并继续</a></div><div class="form-group clearfix"><a ng-click=js_forgot_password() href=javascript:; class=pull-left>忘记密码?</a> <a ng-click=js_cancel_option() href=javascript:; class=pull-right>取消</a></div></form></div>'),a.put("/tpl/directive/datepicker.html",'<div><ul class="list-inline text-center m_0"><li><a href=javascript:; ng-click="vm.js_set_date_inner(\'today\')">今天</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_date_inner(\'tomorrow\')">明天</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_date_inner(\'week\')">本周</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_date_inner(\'next_week\')">下周</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_date_inner(\'month\')">本月</a></li></ul><div class=wtdate></div></div>'),a.put("/tpl/directive/editor.html",'<div class=gollum-editor-wrap><div class=gollum-editor><div class="gollum-editor-function-bar active"><div class=gollum-editor-function-buttons><div class="btn-group mr_10"><a class="btn btn-min function-button function-bold" title=粗体><span>粗体</span></a> <a class="btn btn-min function-button function-italic" title=斜体><span>斜体</span></a></div><div class="btn-group mr_10"><a class="btn btn-min function-button js-popbox function-link" data-placement=bottom title=链接 ng-click=$popInsertLink($event)><span>插入链接</span></a> <a class="btn btn-min function-button js-popbox function-image" data-placement=bottom title=图片 ng-click=$popInsertImage($event)><span>插入图片</span></a></div><div class=btn-group><a class="btn btn-min function-button function-ul" title=无序列表><span>无序列表</span></a> <a class="btn btn-min function-button function-ol" title=有序列表><span>有序列表</span></a> <a class="btn btn-min function-button function-blockquote" title=引用><span>引用</span></a> <a class="btn btn-min function-button function-hr" title=水平分割线><span>水平分割线</span></a></div></div></div><div class=ng-transclude ng-transclude></div></div></div>'),a.put("/tpl/directive/entity_item_deny.html",'<div class=empty-panel ng-show="entity.loading_done && !(global.prj_module.view | permission:entity.permission) && (locator.xtype!=\'emails\')"><i class=icon-ban-circle></i><br><span ng-if=!entity.not_found_msg>你没有权限访问该项目<br>该项目被删除或者你不是该项目的成员。</span> <span ng-show="entity.not_found_msg.length > 0">{{entity.not_found_msg}}</span></div>'),a.put("/tpl/directive/feed.html",'<div class="feed-item-inner slide-trigger" ng-click=js_click_feed()><div class="column column-actor"><wt-avatar member=feed.actor name=true size=40></wt-avatar></div><div class="column column-action"><h4><span bo-text=actionTitle></span> <span class=action-text bo-text=actionText></span></h4><span class=entity><i bo-class=type_icon.icon></i> <span class=grey-text bo-html=display_entity.name></span></span><div class=project-name bo-text=feed.project_name></div></div><div class="column column-datetime"><span bo-text="feed.published | fromNow"></span></div></div>'),a.put("/tpl/directive/file_item.html",'<div ng-hide=file.is_hide file-id={{file.fid}} class="js-popbox file-item-mark right_click_trigger" ng-class="{\'wt-row file-item-list\':dm.view_type==\'list\',\'file-item file-item-icon\':dm.view_type==\'icon\',\'file-item-preview\':(file|isPreviewFile)==0||(file|isPreviewFile)==2}"><div ng-if="dm.view_type==\'list\'" file-id={{file.fid}} ng-click=dm.js_open_file($event,file) data-placement=bottom data-align=left ng-class="{\'active\':file.fid == locator.show_detail_file_id}"><div class="column column-name slide-trigger" ng-class="{\'column-name--folder\':(file.type|isFolder)}"><img class=pic ng-src="{{file.icon | wtBox}}" alt="{{ file.name }}"> <a class=name href=javascript:; ng-bind=file.name></a> <ins>{{(file.size | fileSize) || ""}}</ins></div><div class="column column-meta">{{file.update_user.display_name}} 更新于 <span class=date>{{file.update_date | fromNow}}</span></div></div><div ng-if="dm.view_type==\'icon\'" file-id={{file.fid}} file-type={{file.type}} droppable=folder_droppable_options draggable=file_draggable_options class=js-dragdropable data-placement=bottom data-align=left ng-click=dm.js_open_file($event,file) wt-title="{0:file.name + \'\\n大小：\' + (file.size | fileSize) + \'\\n修改时间：\' +\n    (file.update_date | timeFormatZHCN), 1:file.name + \'\\n修改时间：\' +\n    (file.update_date | timeFormatZHCN)}[file.type]"><a href=javascript:; class="file-menu js-popbox" ng-if=(((file.type|isFolder)&&(global.prj_module.crud|permission:project.permission))||(file.type|isFile)&&(global.prj_module.watch|permission:project.permission)) data-placement=right data-align=auto ng-click="vm.js_show_menu($event, file)"><i class=icon-play-circle></i></a> <a class=file-pic ng-class="{0:\'file-picfile fancybox-file\',1:\'file-picfolder\',2:\'file-preview\'}[(file|isPreviewFile)]" ng-href="{{{2:\'/files/\'+file.fid+\'/preview\'}[(file|isPreviewFile)]}}" target=_blank data-fancybox-group=filegroup-files data-fancybox-href="{{file | wtBoxView}}" data-fancybox-type=image title={{file.name}}><img ng-src="{{file.icon | wtBox}}" alt="{{file.name}}"></a><div class=file-name><a class=slide-trigger ng-bind=file.name></a></div></div></div>'),a.put("/tpl/directive/files_breadcrumb.html",'<div class=help-inlineblock ng-repeat="folder in folders" ng-if="folders.length > 0"><i class="icon-angle-right ml_10 mr_10"></i> <a ng-href=/project/{{pid}}/folder/{{folder.fid}}>{{folder.name}}</a></div>'),a.put("/tpl/directive/item_comment_activity.html","<tabset class=tabbable><tab heading=评论 active=tab_active.comment select=select_tab_comment()><comment-list></comment-list></tab><tab heading=活动 active=tab_active.activity select=select_tab_activity()><ng-include ng-controller=itemActivityCtrl src=\"'/tpl/activity/activity_list.html'\"></ng-include></tab></tabset>"),a.put("/tpl/directive/page_item.html",'<div class="wt-row page-item page-item-mark js-popbox right_click_trigger slide-trigger" data-placement=bottom data-align=left ng-class="{\'active\':page.page_id == locator.show_detail_page_id,\'page-item-tree\':dm.view_type==\'tree\',\'page-item-list\':dm.view_type==\'list\'}" page-id={{page.page_id}} ng-hide=page.is_hide ng-click=dm.open_page_detail($event,page)><div class="column column-main"><h4><a class=name href=javascript:; title={{page.name}}&#10;创建时间:{{page.create_date|fromNow}}&#10;更新时间:{{page.update_date|fromNow}} ng-bind=page.name></a></h4><ul class=sub-item-view ng-if="dm.view_type==\'tree\' && page.sub_pages"><li ng-repeat="sub_page in page.sub_pages"><a class="slide-trigger right_click_trigger page-item-mark" wt-stop-propagation=click page-id={{sub_page.page_id}} title={{sub_page.name}}&#10;创建时间:{{sub_page.create_date|fromNow}}&#10;更新时间:{{sub_page.update_date|fromNow}} ng-click=dm.open_page_detail($event,sub_page) href=javascript:; ng-bind=sub_page.name></a></li></ul></div><div class="column column-meta">{{page.last_updator.display_name}} 更新于 <span class=date>{{page.update_date|fromNow}}</span></div></div>'),a.put("/tpl/directive/pop_datepicker.html",'<div class=popbox-body><wt-full-datepicker default-date=default_date set-date=js_set_date(date) min-date=min_date></wt-full-datepicker></div><div class=popbox-footer ng-show=need_sure><a class="btn btn-success mr_15" ng-click=js_set_date()>确定</a> <a class=btn ng-click=js_cancel()>取消</a></div>'),a.put("/tpl/directive/pop_member.html",'<div class=popbox-avatar><div class=avatar-body><button class="cancel icon-remove" ng-click=js_close()></button><wt-avatar member=member size=56></wt-avatar><div class=avatar-right><h4 class=avatar-heading>{{member.display_name}}</h4><p>@{{member.name}}</p></div></div><div class=avatar-footer><button ng-click=js_action_member(member) data-loading-text={{ongoing}} wt-loading-status=pop_member_actioning class="btn btn-danger">{{action_name}}</button></div></div>'),a.put("/tpl/directive/post_item.html",'<div class="wt-row post-item right_click_trigger slide-trigger js-popbox" data-placement=bottom data-align=left ng-class="{\'active\':post.post_id == locator.show_detail_post_id}" post-id={{post.post_id}}><div class="column column-main"><wt-avatar member=post.owner size=42 class=post-avatar name=true></wt-avatar><h4><a href=javascript:;><span ng-bind=post.name></span> <i class=icon-paper-clip ng-if="post.attachments_count > 0"></i></a></h4><span class=total-comment title="话题有{{ post.comment_count }}个评论">{{post.comment_count}}</span><div class=info>发表于 <strong>{{post.create_date | fromNowZHCN}}</strong> <span ng-if=post.last_reply_user class=ml_10><span class=color-text-lightgray>|</span> &nbsp; {{post.last_reply_user.display_name}} 最后回复于 <strong>{{post.last_reply_date | fromNow}}</strong></span></div></div></div>'),a.put("/tpl/directive/project_grid_board_item.html",'<div class=project-item pid="{{ project.pid }}" tid={{team.team_id}}><a href=javascript:; ng-if="icon==\'star\'" ng-class="{1: \'star star-started\', 0: \'star\'}[project.is_star]" ng-click=js_star_toggle($event,project) class=js-popbox tooltip="{{ {1: \'从常用项目移除\', 0: \'设置为常用项目\'}[project.is_star] }}" tooltip-placement=right tooltip-animation=false data-placement=bottom ng-hide="project.archived == \'1\'"><i class=fa ng-class="{1: \'fa-star\', 0: \'fa-star-o\'}[project.is_star]"></i></a> <a href=javascript:; ng-click=js_favorite_toggle($event,project) ng-if="icon==\'heart\'" class="heart js-popbox" tooltip-placement=right tooltip-animation=false tooltip=取消收藏 data-placement=bottom ng-hide="project.archived == \'1\'"><i class="fa color-text-act-red" ng-class="{1: \'fa-heart\', 0: \'fa-heart-o\'}[project.is_favorite]"></i></a> <a class="center team-link" href=/project/{{project.pid}}><i ng-class=project.pic ng-style={color:project.bg}></i><h4>{{[project.name,38] | cutstr}}</h4></a> <a href=javascript:; class=members><i class="fa fa-user"></i> <span ng-bind=project.member_count></span></a></div>'),a.put("/tpl/directive/project_grid_item.html",'<li class="item flex_row"><a class="flex_se1 ml_20 color-text-dark" href=javascript:; ng-click=vm.go_project()><span class=project_icon><i ng-class=project.pic ng-style={color:project.bg}></i></span> <span ng-bind=[project.name,40]|cutstr></span></a> <span class="flex_row w_252 mr_20"><div class="project_status flex_row"><span class="pending {{project.overview.uncompleted==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=待完成>{{project.overview.uncompleted}}</span> <span class="expired {{project.overview.expired==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=过期>{{project.overview.expired}}</span> <span class="complete {{project.overview.completed==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=完成>{{project.overview.completed}}</span></div></span></li>'),
a.put("/tpl/directive/project_visibility_options.html",'<ul class=popbox-step wt-stop-propagation><li class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>项目公开性</h3></div><div class=popbox-body><ul class=popbox-menu><li><div class=p_5><i class="{{visibilityArr[0].icon}} mr_5"></i> {{visibilityArr[0].desc}}<br><span class=text-muted>{{visibilityArr[0].intro}}</span></div></li><li class=divider></li><li><div class=p_5><i class="{{visibilityArr[1].icon}} mr_5"></i> {{visibilityArr[1].desc}}<br><span class=text-muted>{{visibilityArr[1].intro}}</span></div></li><li class=divider></li><li><div class=p_5><i class="{{visibilityArr[2].icon}} mr_5"></i> {{visibilityArr[2].desc}}<br><span class=text-muted>{{visibilityArr[2].intro}}</span></div></li></ul></div></li></ul>'),a.put("/tpl/directive/set_project_logo.html",""),a.put("/tpl/directive/task.html",'<div id=task_main_{{task.tid}} task-id={{task.tid}} class="task task_style" ng-class-odd="{\'task-item\':dm.viewType==\'item\'}" ng-class-even="{\'task-item\':dm.viewType==\'item\'}"><div class=entry-task-main ng-class="{1:\'task-completed-style\'}[task.completed]"><a class=entry-task-check id=task_check_{{task.tid}} ng-if=!dm.disableCheckbox wt-click="js_complete_task($event, entry, task)"><i ng-class="{0:\'icon-check-empty\',1:\'icon-check-sign\'}[task.completed]"></i></a> <a class="entry-task-check entry-task-check-noHover" id=task_check_{{task.tid}} ng-if=dm.disableCheckbox><i ng-class="{0:\'icon-check-empty\',1:\'icon-check-sign\'}[task.completed]"></i></a> <a class=entry-task-title href=javascript:; ng-bind=task.name></a><div ng-if=!hide_action><a href=javascript:; id=icon_action_task_{{task.tid}} class="js-popbox entry-task-menu" ng-if=global.prj_module.watch|permission:project.permission data-placement=right data-align=middle data-auto-adapt=true wt-click=vm.js_show_task_menu($event,entry,task)><i class="fa fa-play-circle-o"></i></a></div></div><wt-badges task=task show-labels=true show-project={{dm.showProject}}></wt-badges><div class=entry-task-members ng-show="task.members!=null&&task.members.length>0"><wt-avatar ng-repeat="member in task.members.slice(0,7)|arrReverse" class="js-popbox member" pop-member=member stop-propagation=true wt-pop-member=vm.pop_member_options pop-extended-attr=task member=member size=28></wt-avatar><a class=entry-task-members-more ng-if="task.members.length>6&&dm.viewType==\'item\'" href=javascript:;>查看全部{{task.members.length}}人</a></div></div>'),a.put("/tpl/directive/task_composer.html",'<div class=entry-task-composer><div class="composer-body composer-body-focus" ng-click=vm.focus_textarea($event)><div class=entry-task-labels><div ng-repeat="label in vm.new_task.labels" class="task-label {{label.name}}-label"></div></div><textarea class="form-control help-block mb_0" ng-model=vm.new_task.temp_name placeholder=请输入任务内容 wt-enter="vm.parse_save($event, vm.new_task, vm.entry, 0)" wt-enter-not-shift></textarea><div class=composer-body-footer><div class=task-badges task=task><span ng-if="vm.new_task.expire_date !=null && vm.new_task.expire_date!=0" class="task-badge icon icon-time" title="截止日期：{{vm.new_task.expire_date | shortTimeFormat}}">{{vm.new_task.expire_date | shortTimeFormat}}</span></div><div class=entry-task-members ng-if="vm.new_task.members !=null && vm.new_task.members.length > 0"><wt-avatar ng-repeat="member in vm.new_task.members" class="js-popbox member" member=member size=30></wt-avatar></div></div></div><div class=composer-footer><button ng-click="vm.parse_save($event, vm.new_task);" class="btn btn-success btn--big confirm mr_10" data-loading-text=保存中... wt-loading-status=is_task_adding>保&nbsp; 存</button> <button ng-click=vm.parse_cancel($event,vm.new_task) class="btn btn-link btn-cancel">取&nbsp; 消</button> <a href=javascript:; class="js-popbox icon-play-circle action-icon" data-placement=right data-align=middle ng-click="vm.parse_show_task_menu($event, vm.entry, vm.new_task)"></a></div></div>'),a.put("/tpl/directive/team_visibility_options.html",'<ul class=popbox-step wt-stop-propagation=""><li class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>团队公开性</h3></div><div class=popbox-body><ul class=popbox-menu><li><div class=p_5><i class="{{visibilityArr[0].icon}} mr_5"></i> {{visibilityArr[0].desc}}<br><span class=text-muted>{{visibilityArr[0].intro}}</span></div></li><li class=divider></li><li><div class=p_5><i class="{{visibilityArr[1].icon}} mr_5"></i> {{visibilityArr[1].desc}}<br><span class=text-muted>{{visibilityArr[1].intro}}</span></div></li></ul></div></li></ul>'),a.put("/tpl/directive/toggle_members.html",'<div class=popbox-header><button ng-if=show_to_step class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>{{title}}</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><input type=text autofocus="" wt-focus name=search_user_input ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br><ul class="popbox-menu checkable checkable--popboxmenu"><li class=member-item ng-repeat="member in members | filterMembers:search_user_input" ng-class="{\'selected\':(!!member.assigned || !!member.watched)}"><wt-avatar tabindex=-1 ng-click=js_toggle_member_inner($event,member) member=member name="[member.display_name,16] | cutstr" faceclass=plr_5 atname=true size=28></wt-avatar></li></ul></div></div><div class="popbox-footer top-divider" ng-if="type == \'watch\'"><button ng-click=js_watch_all_member_inner($event,members) class="action-item btn btn-block"><span ng-bind="{true:\'添加全部成员\',false:\'所有成员已关注\'}[xEntity.watchers.length < members.length]"></span> ({{ xEntity.watchers.length }}/{{ members.length }})</button></div><div class="popbox-footer top-divider" ng-if="type == \'attendee\'"><button ng-click=js_all_member_inner($event,members) class="action-item btn btn-block"><span ng-bind="{true:\'添加全部成员\',false:\'所有成员已参与\'}[xEntity.attendees.length < members.length]"></span> ({{ xEntity.attendees.length }}/{{ members.length }})</button></div>'),a.put("/tpl/directive/wt-folder-tree.html",'<li sf-treepeat="node in children of folder_structure"><zippy><ul><li sf-treecurse>This should be replaced.</li></ul></zippy></li><li ng-show="folder_structure==0"><div class=empty-menu>没有其它文件夹</div></li>'),a.put("/tpl/directive/wt_new_editor.html",'<div class=wt-new-editor><div ng-transclude></div><div ng-show="!isFullscreen && !isMini"><div class=wne-title><input type=text class=wne-title-input placeholder=标题 ng-model=title tabindex=1 wt-autofocus wt-autofocus-time=300><div class=title-seperator-line></div></div><div class="wne-toolbar js-popbox" role=toolbar><a class=icon-bold ng-click="execEditorCmd($event, \'cmd-bold\')" ng-show=!inPreview href=javascript:;></a> <a class=icon-italic ng-click="execEditorCmd($event, \'cmd-italic\')" ng-show=!inPreview href=javascript:;></a> <a class=icon-quote-left ng-click="execEditorCmd($event, \'cmd-blockquote\')" ng-show=!inPreview href=javascript:;></a> <a class=icon-list-ul ng-click="execEditorCmd($event, \'cmd-unorder-list\')" ng-show=!inPreview href=javascript:;></a> <a class=icon-list-ol ng-click="execEditorCmd($event, \'cmd-order-list\')" ng-show=!inPreview href=javascript:;></a> <a class=icon-link ng-click="execEditorCmd($event, \'cmd-insert-link\')" ng-show=!inPreview href=javascript:;></a> <a class=icon-picture ng-click="execEditorCmd($event, \'cmd-insert-image\')" ng-show=!inPreview href=javascript:;></a> <a class=icon-minus ng-click="execEditorCmd($event, \'cmd-horizontal-line\')" ng-show=!inPreview href=javascript:;></a> <a class="fa fa-question-circle" href=https://worktile.com/blog/skills/markdown target=_blank></a> <a ng-class="{false:\'icon-eye-open\', true:\'icon-eye-close\'}[inPreview]" ng-click=flipPreview() href=javascript:;></a> <a></a> <a class=icon-fullscreen ng-click=goFullscreen() href=javascript:;></a></div><div class=toolbar-content-container><div class=fullscreeen-btn-container><button class=fullscreen-btn ng-click=goFullscreen()><i class=icon-double-angle-left></i></button></div><div class=flip-container><div class=flipper><div class="wnd-content front"><textarea class=wnd-content-textarea name="" ng-model=content tabindex=2>\n\n                        </textarea></div><div class="wnd-content-html markdown back"><div ng-bind-html-unsafe=html class=back-background></div></div></div></div></div></div><div ng-show=isFullscreen><div class=fullscreen-editing><div class=wne-title><input type=text class=fullscreen-title-input placeholder=标题 ng-model=title tabindex=1 wtautofocus><div class=title-seperator-line></div></div><div class=wne-toolbar><ul class="tool-btn-group js-popbox"><li ng-click=cancelFullscreen()><a>返</a></li></ul><ul class="tool-btn-group js-popbox"><li ng-click="execEditorCmd($event, \'cmd-h1\')"><a href=javascript:;>h1</a></li><li ng-click="execEditorCmd($event, \'cmd-h2\')"><a href=javascript:;>h2</a></li><li ng-click="execEditorCmd($event, \'cmd-h3\')"><a href=javascript:;>h3</a></li></ul><ul class="tool-btn-group js-popbox"><li ng-click="execEditorCmd($event, \'cmd-bold\')"><a class=icon-bold href=javascript:;></a></li><li ng-click="execEditorCmd($event, \'cmd-italic\')"><a class=icon-italic href=javascript:;></a></li><li ng-click="execEditorCmd($event, \'cmd-blockquote\')"><a class=icon-quote-left href=javascript:;></a></li><li ng-click="execEditorCmd($event, \'cmd-code\')"><a href=javascript:;>{&nbsp }</a></li></ul><ul class="tool-btn-group js-popbox"><li ng-click="execEditorCmd($event, \'cmd-unorder-list\')"><a class=icon-list-ul href=javascript:;></a></li><li ng-click="execEditorCmd($event, \'cmd-order-list\')"><a class=icon-list-ol href=javascript:;></a></li><li ng-click="execEditorCmd($event, \'cmd-horizontal-line\')"><a class=icon-minus href=javascript:;></a></li></ul><ul class="tool-btn-group js-popbox"><li ng-click="execEditorCmd($event, \'cmd-insert-link\')"><a class=icon-link href=javascript:;></a></li><li ng-click="execEditorCmd($event, \'cmd-insert-image\')"><a class=icon-picture href=javascript:;></a></li></ul><ul class="tool-btn-group js-popbox"><li><a class="fa fa-question-circle" href=https://worktile.com/blog/skills/markdown target=_blank></a></li></ul><ul class=tool-btn-group><li class=save-command><button class="btn btn-success" ng-click="execEditorCmd($event, \'cmd-save\')" data-loading-text=保存中... wt-loading-status=is_saving>保存</button></li></ul></div><div class=left-right-container><div class=left-side><textarea ng-model=content tabindex=2 class=fullscreen-mk-content-textarea></textarea></div><div class=right-side><div class=html-box><div class="result markdown" ng-bind-html-unsafe=html></div></div></div></div></div></div></div>'),a.put("/tpl/directive/zippy.html","<li ng-if=\"node.fid !== folder.fid\"><a href=javascript:; ng-click=toggleContent() ng-class=\"{'selected':data.selected_move_to_node==node}\"><i ng-class=\"{true:'icon-folder-open-alt', false: ' icon-folder-close-alt'}[isSubFolderVisible]\"></i> {{node.name}}</a><div ng-show=isSubFolderVisible ng-transclude></div></li>"),a.put("/tpl/explore/explore.html",""),a.put("/tpl/explore/explore_files.html",""),a.put("/tpl/explore/explore_filter.html",""),a.put("/tpl/explore/explore_pages.html",""),a.put("/tpl/explore/explore_posts.html",""),a.put("/tpl/explore/explore_tasks.html",""),a.put("/tpl/mail/pop_convert_to_post.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>转成话题并分享给</h3></div><div class=popbox-body ng-if="selected_projects.length == 0"><div class="alert alert-warning">你还没有参与任何项目。</div></div><div class=popbox-body ng-if=convert_success><div class="alert alert-success">该邮件已经成功分享到项目话题中，<a href=/project/{{new_post.pid}}/post ng-click=locator.close()>现在去看看</a></div></div><form ng-if="!convert_success && selected_projects.length > 0" name=convert_form w5c-form-validate="" class=wt-form novalidate role=form><div class="popbox-body pop-add-event"><div class=section-group><div class=row><div class=col-md-2><lable>项目：</lable></div><div class=col-md-10><ui-select ng-change=js_change_project() ng-model=new_post.pid theme=select2 append-to-body=false><ui-select-match placeholder=请选择项目：>{{$select.selected.name}}</ui-select-match><ui-select-choices group-by="\'team_name\'" repeat="project.pid as project in selected_projects | propsFilter: {name: $select.search}"><div class=text-overflow ng-bind-html="project.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div></div><div class=section-group><div class=row><div class=col-md-2><lable>关注：</lable></div><div class=col-md-10><ul class=entity-members><li ng-repeat="member in new_post.watchers"><a href=javascript:;><wt-avatar member=member faceclass=plr_5 size=40></wt-avatar></a></li><li><a class="avatar-add js-popbox" href=javascript:; ng-click=js_to_watchers() data-placement=left><span class=o><i class=icon-plus></i></span></a></li></ul></div></div></div><div class=section-group><button w5c-form-submit=js_convert_to_post(convert_form,new_post) data-loading-text=保存中... class="btn btn-success btn--big mr_15" wt-loading-status=new_post.is_saving>确定</button> <button ng-click=js_close() class="btn btn-link btn-cancel w_120">取消</button></div></div></form></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>关注</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><input type=text ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br><div class=part-loading ng-show=loading_members></div><ul class=popbox-menu ng-hide=loading_members><li class=member-item ng-repeat="member in members | filterMembers:search_user_input" ng-class="{\'selected\':member.watched==true}"><wt-avatar member=member tabindex=-1 ng-click=js_toggle_member(member) name=true faceclass=plr_5 atname=true size=30></wt-avatar></li></ul></div></div><div class=hr ng-show=!loading_members></div><div class="popbox-footer popbox-footer-splite" ng-show=!loading_members><a class="action-item popbox-footer-splite-left" href=javascript:; ng-click=js_add_all(0)><span>全部添加</span></a> <a class="action-item popbox-footer-splite-right" href=javascript:; ng-click=js_step(0)><span>确定</span> ({{ new_post.watchers.length }}/{{ members.length }})</a></div></li></ul>'),a.put("/tpl/project/event/events.html",'<div class="margin_inner height-nonav"><div class=calendar-command-panel><div class=command-penal><div id=calendar-range-wrapper><a href=javascript:; ng-click=vm.prev()><i class=icon-chevron-left></i></a><h4 id=calendar_title class=range-text></h4><a href=javascript:; ng-click=vm.next()><i class=icon-chevron-right></i></a> <button id=calendar_today class="btn btn-today" ng-click=vm.today()>今天</button></div><div class=month-week-wrapper><button class="btn month-btn" ng-class="{\'active\':vm.events_filter.calendar_view==\'month\'}" ng-click="vm.set_calendar_view(\'month\')">月</button> <button class="btn week-btn" ng-class="{\'active\':vm.events_filter.calendar_view==\'agendaWeek\'}" ng-click="vm.set_calendar_view(\'agendaWeek\')">周</button></div></div><div class=event-panel><div id=calendar calendar=myCalendar ui-calendar=calendarConfig ng-model=calendarEventSources></div><ui-view></ui-view></div></div></div>'),a.put("/tpl/project/event/pop_delete_event.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>删除日程</h3></div><div class=popbox-body ng-if=!is_repeat_event><span>日程删除后无法恢复，确认要删除该日程吗？</span></div><div class=popbox-body ng-if=is_repeat_event><span class="alert alert-info help-block mtb_10">您正在删除重复日程</span><ul class=popbox-menu><li><label><input type=radio name=optionsRadios id=optionsRadios1 value=1 checked=checked ng-model=del.del_option>&nbsp;只删除当前的日程</label></li><li><label><input type=radio name=optionsRadios id=optionsRadios3 value=2 ng-model=del.del_option>&nbsp;删除当前日程和之后的此重复日程</label></li><li><label><input type=radio name=optionsRadios id=optionsRadios2 value=3 ng-model=del.del_option>&nbsp;删除所有此重复日程</label></li></ul></div><div class=popbox-footer><button ng-click=js_delete_event() data-loading-text=删除中... wt-loading-status=is_deleting class="btn btn-danger">确定删除</button></div>'),a.put("/tpl/project/event/toolbar.html",'<div class=sub_toolbar><div class="btn-group mr_5 js-popbox" data-placement=bottom data-align=right ng-if="global.prj_module.crud | permission:project.permission"><button class="btn btn-success btn--fancy" id=btn_new_event wt-pop-new-event=js_new_event_success(events)>新建日程</button> <a class="btn btn-success btn--fancy dropdown-toggle" data-toggle=dropdown><i class=icon-caret-down></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; wt-pop-new-event=js_new_event_success(events)><i class=icon-xx></i> 新建日程</a></li><li><a href=javascript:; id=btn_new_task pop-new-tasks=add_tasks_success(tasks) expire-date=true pid=project.pid><i class=icon-xx></i> 新建任务</a></li></ul></div><div class=btn-group><a href=javascript:; type=button class="btn btn--fancy dropdown-toggle" data-toggle=dropdown><sapn class=plr_10>{{{0:\'&nbsp;全部&nbsp;\',1:\'只显示日程\',2:\'只显示任务\'}[vm.events_filter.filter_type]}}</sapn><i class=icon-caret-down></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; ng-click=vm.set_filter_type(0)>全部</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(1)>只显示日程</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(2)>只显示任务</a></li></ul></div></div>'),a.put("/tpl/project/file/files.html","<div class=height-nonav wt-scroll wt-dragfile=vm.js_files_select($files) wt-dragfile-enable=\"($root.global.prj_module.crud | permission:project.permission)\"><dl class=\"frame dragfile-hover-placeholder\"><i class=\"icon-upload-alt mr_10\"></i> <span>松开上传文件</span></dl><dl class=frame data-minheight=112 ng-show=$root.global.loading_done><dt class=frame-dt><span class=\"title title--breadcrumb\"><div class=help-inlineblock><a ng-href=/project/{{vm.pid}}/file>文件</a></div><wt-files-breadcrumb pid={{project.pid}} folders=vm.folders></wt-files-breadcrumb></span><div class=pull-right><a href=javascript:; tooltip=图标视图 tooltip-placement=bottom ng-click=\"vm.set_view_type('icon')\"><i class=\"fa fa-th-large\" ng-class=\"{'color-text-lightgray':vm.files_filter.view_type!='icon'}\"></i></a> &nbsp; &nbsp; <a href=javascript:; tooltip=列表视图 tooltip-placement=bottom ng-click=\"vm.set_view_type('list')\"><i class=\"fa fa-list-ul\" ng-class=\"{'color-text-lightgray':vm.files_filter.view_type!='list'}\"></i></a> <span class=\"color-text-lightgray plr_10\">|</span><div class=\"btn-group btn-group-link\"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown><span>{{ {'default':'按默认方式','name':'按文件名称','create_date':'按创建时间','update_date':'按修改时间'}[vm.files_filter.sort] }}</span> &nbsp;<i class=\"fa fa-caret-down\"></i></a><ul class=\"dropdown-menu pull-right\"><li><a href=javascript:; ng-click=\"vm.set_sort('default')\"><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.files_filter.sort == 'default']}}\"></i>按默认方式</a></li><li><a href=javascript:; ng-click=\"vm.set_sort('name')\"><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.files_filter.sort == 'name']}}\"></i>按文件名称</a></li><li><a href=javascript:; ng-click=\"vm.set_sort('create_date')\"><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.files_filter.sort == 'create_date']}}\"></i>按创建时间</a></li><li><a href=javascript:; ng-click=\"vm.set_sort('update_date')\"><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.files_filter.sort == 'update_date']}}\"></i>按修改时间</a></li></ul></div></div></dt><dd class=frame-dd><div class=empty-panel ng-show=\"vm.files.length == 0 && vm.part_loading_done\"><i class=\"fa fa-file-o\"></i><br><span>还没有任何文件</span></div><div class=file-panel ng-class=\"{'mt_21':(files_filter.view_type=='icon'),'mt_sub1':(files_filter.view_type=='list')}\"><div class=file-list ng-if=\"vm.files.length > 0\"><wt-file-item route-change=true ng-repeat=\"file in vm.files track by file.fid\" view-type=files_filter.view_type></wt-file-item></div><div class=loading-more-panel><div class=part-loading ng-hide=vm.part_loading_done></div><button class=btn ng-show=\"vm.has_more && vm.part_loading_done\" data-loading-text=加载中... ng-click=vm.load_more_files($event);>加载更多...</button></div></div></dd></dl></div><ui-view></ui-view>"),a.put("/tpl/project/file/pop_add_folder.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>新建文件夹</h3></div><form name=add_folder_form w5c-form-validate="" class=w5c-form novalidate><div class=popbox-body><div><input name=file_name wt-focus required ng-model=vm.name placeholder=文件夹名 class="form-control help-block" type="text"></div><div class=form-group><label class=control-label>文件夹颜色</label><div><input type=hidden ng-model="vm.ext"><div class=btn-group dropdown is-open=vm.dropmenu_isopen><button type=button class="btn dropdown-toggle" dropdown-toggle ng-repeat="folder_icon in vm.folder_icons" ng-if="folder_icon.ext == vm.ext"><img ng-src="{{folder_icon.path | wtBox}}" height="18"> <span class=caret></span></button><ul class=dropdown-menu role=menu><li ng-repeat="folder_icon in vm.folder_icons" ng-click=vm.js_set_folder_icon(folder_icon)><a class=folder-item-li-menu href=javascript:;><img ng-src="{{folder_icon.path | wtBox}}"></a></li></ul></div></div></div></div><div class=popbox-footer><button w5c-form-submit="vm.js_add_folder(add_folder_form, vm.name,vm.ext)" data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=vm.save_ing>确&nbsp; 定</button> <button ng-click=vm.js_close(result) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></form>'),a.put("/tpl/project/file/pop_attachment_menu.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>附件选项</h3></div><div class=popbox-body><ul class=popbox-menu><li><a ng-href="{{file.path | wtBox}}" target=_blank><i class=icon-xx></i> 下载</a></li><li><a href=/project/{{file.pid}}/file/{{file.fid}}><i class=icon-xx></i> 查看</a></li><li class=divider></li><li><a href=javascript:; ng-click=js_del_file()><i class=icon-xx></i> 移除附件</a></li></ul></div>'),a.put("/tpl/project/file/pop_delete_file.html","<wt-file-delete close=vm.js_close() success-done=vm.js_success_done() file=vm.file></wt-file-delete>"),a.put("/tpl/project/file/pop_file_menu.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>文件选项</h3></div><div class=popbox-body><ul class=popbox-menu ng-if="(global.prj_module.crud | permission:project.permission)"><li><a href=javascript:; ng-click=js_step(1)><i class="fa fa-eye"></i> 添加关注</a></li><li><a ng-href="{{vm.file | wtBoxDownload}}"><i class="fa fa-download"></i> 下载</a></li><li><a href=javascript:; ngf-multiple=false ngf-select ngf-change=vm.js_files_select($files)><i class="fa fa-refresh"></i> 更新</a></li><li class=divider></li><li><a ng-click=js_step(2) href=javascript:;><i class="fa fa-share"></i> 移动到...</a></li><li><a ng-click=js_step(3) href=javascript:;><i class="fa fa-trash-o"></i> 删除</a></li></ul><ul class=popbox-menu ng-if="!(global.prj_module.crud | permission:project.permission)"><li><a ng-click=js_toggle_watch($event,global.me,vm.file) href=javascript:;><i class=icon-xx></i> 关注 <span class="text-muted small-tip ng-scope" ng-if=global.me.watched><i class="color_gray icon-ok"></i></span></a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><wt-toggle-members toggle-click="js_toggle_watch($event, member, xEntity)" pid=vm.pid type=watch entity=vm.file all-member-click="js_watch_all($event, members, xEntity)"></li><li ng-switch-when=2 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>移动文件到</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu"><wt-folder-tree></wt-folder-tree></ul></div></div><div class="popbox-footer top-divider"><a class=action-item href=javascript:; ng-click=move()><span class="ml_20 pl_10">移动到文件夹</span></a></div></li><li ng-switch-when=3 class=popbox-step-li><wt-file-delete file=vm.file close=js_close() back=js_step(0) success-done=js_del_file_success_done(vm.file)></wt-file-delete></li></ul>'),a.put("/tpl/project/file/pop_folder_menu.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>文件夹选项</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click=js_step(1)><i class=icon-xx></i> 重命名</a></li><li><a href=javascript:; ng-click=js_step(3)><i class=icon-xx></i> 设置图标</a></li><li class=divider></li><li><a ng-href="{{$root.global.config.box_url()}}folder/{{folder.fid}}/zip/download?pid={{folder.pid}}&token={{$root.global.me.sid}}" target=_blank><i class=icon-folder-close-alt></i> 打包下载</a></li><li class=divider></li><li><a href=javascript:; ng-click=js_step(4)><i class=icon-share-alt></i>移动到...</a></li><li><a ng-click=js_step(2) href=javascript:;><i class=icon-trash></i> 删除</a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>重命名文件夹</h3></div><form name=edit_folder_form w5c-form-validate="" class=wt-form novalidate><div class=popbox-body><input name=folder_name type=text class="form-control help-block" ng-model=folder_name placeholder=文件夹名 wt-focus required></div><div class=popbox-footer><button w5c-form-submit="js_change_name(edit_folder_form, folder_name)" data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_save_ing>确&nbsp; 定</button> <button ng-click=js_close(result) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></form></li><li ng-switch-when=2 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>删除文件夹</h3></div><div class=popbox-body><span>文件夹及其文件删除后会放在回收站，可以在回收站<br>选择恢复或者彻底删除。</span></div><div class=popbox-footer><button ng-click=js_del_folder() class="btn btn-danger">确定删除</button></div></li><li ng-switch-when=3 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>设置图标</h3></div><div class=popbox-bodywrapper><div class=popbox-body><div class=part-loading ng-show=prj_files_loading></div><ul class=popbox-menu><li ng-repeat="folder_icon in folder_icons" ng-click=js_set_folder_icon(folder_icon)><a class=folder-item-li-menu href=javascript:;><img ng-src="{{folder_icon.path | wtBox}}"> <span class="text-muted small-tip" ng-if="folder_icon.ext == folder.ext"><i class="color_gray icon-ok"></i></span></a></li></ul></div></div></li><li ng-switch-when=4 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>移动文件到</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu"><wt-folder-tree></wt-folder-tree></ul></div></div><div class="popbox-footer top-divider"><a class=action-item href=javascript:; ng-click=move()><span class="ml_20 pl_10">移动到文件夹</span></a></div></li></ul>'),a.put("/tpl/project/file/pop_move_file.html",'<ul class=popbox-step><li class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>移动文件到</h3></div><div class=part-loading ng-show=folder_structure_loading></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu"><wt-folder-tree></wt-folder-tree></ul></div></div><div class="popbox-footer top-divider"><button class="btn btn-success mt_10 mb_sub10 w_120" ng-click=move()>确定</button></div></li></ul>'),a.put("/tpl/project/file/pop_show_versions.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>历史版本</h3></div><div class="popbox-bodywrapper w_300" wt-scroll><div class=popbox-body><div class=part-loading ng-hide=file_version_loaded></div><ul class=popbox-menu><li ng-repeat="version in versions" class=file-version-item><span class=file-item-version>#{{version.version}}</span> <span class=file-item-owner>{{version.owner.display_name}}</span> <span class=file-item-date><span class=color-text-grayer>上传于</span> {{version.create_date | fromNow}}</span> <a class="file-item-li-menu file-picfile ellipsis" ng-href="{{version | wtBoxDownload}}" target=_blank><img ng-src="{{version.icon | wtBox}}" alt="{{ version.name }}"> <span class=file-name>{{version.name}}</span></a><hr ng-if=!$last class="mt_10 mb_0"></li></ul></div></div>'),a.put("/tpl/project/file/pop_watch_file.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>添加关注</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><input type=text autofocus="" ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br><ul class=popbox-menu><li class=member-item ng-repeat="member in members | filterMembers:search_user_input"><a href=javascript:; tabindex=-1 ng-click=js_toggle_watch(member)><i ng-class="{0: \'icon-xx\', 1: \'icon-ok\'}[member.is_watch]" class=color_gray></i><wt-avatar member=member faceclass=plr_5 name=true size=30></wt-avatar></a></li><li class=divider></li><li><a href=javascript:; ng-click=js_watch_all()><i class=icon-xx></i> <span ng-bind="{true:\'添加全部成员\',false:\'所有成员已关注\'}[file.watchers.length < members.length]"></span> ({{ file.watchers.length }}/{{ members.length }})</a></li></ul></div></div>'),a.put("/tpl/project/file/toolbar.html",'<div class=sub_toolbar><div class="btn-group js-popbox" ng-if="$root.global.prj_module.crud | permission:project.permission"><button class="btn btn-success btn--fancy" ngf-multiple=true ngf-select ngf-change=vm.file_select($files) title=添加文件>添加文件</button> <button type=button class="btn btn-success dropdown-toggle mr_5 btn--fancy" data-toggle=dropdown><i class=icon-caret-down></i></button><ul class="dropdown-menu pull-right"><li><a href=javascript:; ng-click=vm.js_trigger_upload($event)><i class=icon-xx></i> 本地上传文件</a></li><li><a href=javascript:; ng-click=vm.show_add_folder_pop($event)><i class=icon-xx></i> 新建文件夹</a></li></ul></div><div class=btn-group><a href=javascript:; class="btn btn--fancy dropdown-toggle" data-toggle=dropdown><span class=plr_10>{{{0:\'&nbsp;全部&nbsp;\',1:\'我上传的\',2:\'我关注的\'}[vm.files_filter.filter_type] }}</span><i class=icon-caret-down></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; ng-click=vm.set_filter_type(0)><i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[vm.files_filter.filter_type == 0]}}"></i> 全部</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(1)><i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[vm.files_filter.filter_type == 1]}}"></i> 我上传的</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(2)><i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[vm.files_filter.filter_type == 2]}}"></i> 我关注的</a></li></ul></div></div>'),a.put("/tpl/project/graph/graphs.html",'<div class="graphs-panel-wrap height-nonav" wt-scroll><div ng-if=!vm.part_loading_done class="part-loading h_38"></div><div class=graphs-panel ng-if=vm.part_loading_done><ul class=graphs-overview><li><wt-graph-gauge size=90 number=vm.overview_project_schedule color=#5DAC81 bgcolor=#FFB11B></wt-graph-gauge>项目进度</li><li><wt-graph-gauge size=90 number=vm.overview_delay_rate color=#DA4F4A bgcolor=#E8ECF4></wt-graph-gauge>延误率</li><li><div class=count title=未完成任务:&#10;{{vm.overview.uncompleted}}><span class="fs-55 color-label-yellow">{{vm.overview.uncompleted}}</span><br>未完成任务</div></li><li><div class=count title=已完成任务:&#10;{{vm.overview_completed}}><span class="fs-55 color-label-green">{{vm.overview_completed}}</span><br>已完成任务</div></li><li><div class=count title=过期任务:&#10;{{vm.overview.expired}}><span class="fs-55 color-text-act-red">{{vm.overview.expired}}</span><br>过期任务</div></li><li><div class=count title=总任务:&#10;{{vm.overview_all}}><span class=fs-55>{{vm.overview_all}}</span><br>总任务</div></li></ul><ul class=graphs-chart><li><dl class=chart><dt>任务阶段</dt><dd><wt-graph-column ng-if=vm.part_loading_done config=vm.columnConfig></wt-graph-column></dd></dl></li><li><dl class=chart><dt>任务标签</dt><dd><wt-graph-pie ng-if=vm.part_loading_done name=任务数 height=250 data=vm.labels></wt-graph-pie></dd></dl></li><li><dl class=chart><dt>项目趋势 <span class="pull-right text-nowrap mt_sub10"><ul class=list-inline><li><a title=上一周 href=javascript:; ng-click=vm.to_pulse_prev_week() class=help-inline>&nbsp;<i class="fa fa-angle-left"></i>&nbsp;</a> <span class=help-inline>{{vm.pulse_graph_date}}</span> <a title=下一周 href=javascript:; ng-disabled=vm.disable_pulse_next ng-click=vm.to_pulse_next_week() class=help-inline>&nbsp;<i class="fa fa-angle-right"></i>&nbsp;</a></li></ul></span></dt><dd><div id=pulse_weekly_graph></div></dd></dl></li><li><dl class=chart><dt>Top 5成员</dt><dd><wt-graph-bar ng-if=vm.part_loading_done config=vm.barConfig></wt-graph-bar></dd></dl></li></ul><dl class=graphs-today><i class="fa fa-flag color-text-act-red fs_20"></i> &nbsp; 今天完成了 <strong>{{vm.today.completed_tasks_count}} 个任务</strong>，新建了 <strong>{{vm.today.created_tasks_count}} 个任务</strong>、 <strong>{{vm.today.created_events_count}} 个日程</strong>、 <strong>{{vm.today.created_posts_count}} 个话题</strong>、 <strong>{{vm.today.created_pages_count}} 个文档</strong>， 上传了 <strong>{{vm.today.created_files_count}} 个文件</strong>。</dl></div></div>'),
a.put("/tpl/project/graph/toolbar.html",""),a.put("/tpl/project/member/pop_add_member_select_role.html",'<ul class=popbox-step><li class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>选择角色</h3></div><div class=popbox-body><ul class=popbox-menu><li><a ng-click=js_add_user_as_admin()><strong>负责人</strong><br><span class="text-muted pl_20">可以管理项目成员，对项目进行设置</span></a></li><li class=divider></li><li><a ng-click=js_add_user_as_member()><strong>成员</strong><br><span class="text-muted pl_20">通用性操作，如创建任务、上传文件等</span></a></li><li class=divider></li><li><a ng-click=js_add_user_as_guest()><strong>访客</strong><br><span class="text-muted pl_20">只能查看项目内容、发表评论、关注</span></a></li></ul></div></li></ul>'),a.put("/tpl/project/member/pop_add_prj_member.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>添加成员</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><input autofocus="" type=text class="form-control help-block" ng-model=search_user_input placeholder=搜索成员 ng-change="js_search_user(search_user_input)"><br><div class=part-loading wt-loading-done=members_loading_done></div><ul class=popbox-menu ng-show="show_members.length == 0"><li><div class=empty-menu-nomin-h>没有可以添加的成员</div></li></ul><ul class=popbox-menu><li class=member-item ng-repeat="member in show_members"><a href=javascript:; tabindex=-1 ng-click=js_add_prj_member(member)><wt-avatar member=member size=30 faceclass=plr_5 name=true atname=true></wt-avatar><span class="action color_gray" ng-click=js_go_to_set_role($event,member)><i class=icon-chevron-right></i></span></a></li></ul></div></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>选择角色</h3></div><div class=popbox-body><ul class=popbox-menu><li><a ng-click=js_add_user_as_admin()><strong>负责人</strong><br><span class="text-muted pl_20">可以管理项目成员，对项目进行设置</span></a></li><li class=divider></li><li><a ng-click=js_add_user_as_member()><strong>成员</strong><br><span class="text-muted pl_20">通用性操作，如创建任务、上传文件等</span></a></li><li class=divider></li><li><a ng-click=js_add_user_as_guest()><strong>访客</strong><br><span class="text-muted pl_20">只能查看项目内容、发表评论、关注</span></a></li></ul></div></li></ul>'),a.put("/tpl/project/page/add_or_edit_page.html",'<dl class=frame data-minheight=112 ng-if=!(global.prj_module.crud|permission:project.permission)><dd class=frame-dd><div class=error-panel><i class=icon-file-text-alt></i><br><span>你没有权限添加编辑该项目的文档</span><br><a class="btn btn-danger" href=/project/{{project.pid}}/page>查看文档列表</a></div></dd></dl><div class="container-fluid height-nonav page-edit" wt-scroll={&quot;advanced&quot;:{&quot;autoScrollOnFocus&quot;:false}} ng-if=global.prj_module.crud|permission:project.permission><dl class=frame data-minheight=112><div class=page-edit-container ng-if=vm.page data-minheight=420 wt-ctrl-enter=vm.js_save_page(page_form,true)><form name=page_form class=wt-form w5c-form-validate="" novalidate=""><wt-new-editor ng-class="{\'wt-new-ediror--haslock\':!vm.is_add&&vm.page.locked==1&&(vm.page.locked_by.uid!=global.me.uid)}" edit-title=vm.page.name edit-content=vm.page.content pid=vm.pid entity-id=vm.page.page_id entity-type=vm.page message=vm.page.message parent-id=vm.page.parent_id is-notify=vm.page.is_notify><wt-autosave ng-if=vm.autosave_init_done key=vm.autosave_key content=vm.page.content control=.wnd-content-textarea></wt-autosave></wt-new-editor><div class=edit-footer ng-if=vm.page><div class="alert alert-danger wt-alert" ng-if="!vm.is_add&&vm.page.locked==1&&(vm.page.locked_by.uid!=global.me.uid)"><i class=icon-info-sign></i> 文档正在被 <strong>{{vm.page.locked_by.display_name}}</strong> 锁定编辑中，你无法编辑该文档</div><div class=edit-footer-form><div class=edit-footer-left ng-if=!vm.page.has_children><select class="form-control select--fancy" ng-model=vm.page.parent_id name=page_parent_id ng-options="rootpage.page_id as rootpage.name for rootpage in vm.root_pages"><option value="">选择主文档：</option></select></div><div ng-class="{\'edit-footer-right\':!vm.page.has_children}"><input type=text name=page_message ng-model=vm.page.message class="form-control help-block input--fancy" placeholder={{vm.page.placeholder}}></div></div><div class="page-edit-action mt_10"><button class="btn btn-success mr_15" w5c-form-submit=vm.js_save_page(page_form,true) data-loading-text=保存中... wt-loading-status=vm.is_saving ng-disabled="vm.page.locked==1 && (vm.page.locked_by.uid != global.me.uid)">保存</button> <button class="btn btn-default mr_15" w5c-form-submit=vm.js_save_page(page_form,false) data-loading-text=保存中... ng-hide=vm.is_saving ng-disabled="vm.page.locked==1 && (vm.page.locked_by.uid != global.me.uid)">保存并退出</button> <button class="btn btn-cancel btn-link" ng-show=global.loading_done ng-hide=vm.is_saving ng-click=vm.js_cancel_edit()>取 &nbsp;消</button></div></div></form></div></dl></div>'),a.put("/tpl/project/page/add_toolbar.html",'<div class=sub_toolbar><button ng-show=page.detail.page_id wt-page-delete=deletePageSuccess() pid={{project.pid}} page-id={{page.detail.page_id}} class="btn btn--fancy js-popbox" data-placement=bottom data-align=right>删除</button></div>'),a.put("/tpl/project/page/detail_toolbar.html",'<div class=sub_toolbar><span ng-if=page.detail.is_deleted class="entity-warning mr_15">文档已经于 {{page.detail.update_date | timeFormatZHCN}} 删除了</span> <button class="btn btn--fancy" wt-go-to="/project/{{ project.pid }}/page"><i class=icon-chevron-left></i> 返回</button> <button class="btn btn-success btn--fancy" ng-show="!page.detail.is_deleted && (global.prj_module.crud | permission:page.detail.permission)" wt-go-to=/project/{{project.pid}}/page/{{page.detail.page_id}}/edit><i class=icon-pencil></i> 编辑</button> <button class="btn btn--fancy" ng-show="!page.detail.is_deleted && (global.prj_module.crud | permission:page.detail.permission) && page.detail.parent_id == \'\'" wt-go-to=/project/{{project.pid}}/page/add/{{page.detail.page_id}}><i class=icon-plus></i> 添加子文档</button><div class="btn-group js-popbox" data-placement=bottom ng-show="!page.detail.is_deleted && (global.prj_module.view | permission:page.detail.permission)"><button class="btn btn--fancy dropdown-toggle" data-toggle=dropdown>更多 <i class=icon-caret-down></i></button><ul class="dropdown-menu pull-right" role=menu><li ng-show="global.prj_module.crud | permission:page.detail.permission"><a href=javascript:; wt-page-delete=deletePageSuccess() pid={{project.pid}} page-id={{page.detail.page_id}}><i class=icon-trash></i>删除</a></li><li ng-show="global.prj_module.crud | permission:page.detail.permission" class=divider></li><li><a href=javascript:; wt-entity-share="[\'\',project.pid,\'pages\',page]"><i class=icon-share></i>共享</a></li><li><a href=javascript:; wt-detail-print=""><i class=icon-print></i>打印</a></li><li ng-show="global.prj_module.crud | permission:page.detail.permission"><a href=/project/{{project.pid}}/page/{{page.detail.page_id}}/versions><i class=icon-time></i>历史版本</a></li></ul></div></div>'),a.put("/tpl/project/page/page.html",""),a.put("/tpl/project/page/pages.html","<div class=height-nonav wt-scroll><dl class=\"frame frame--pages\" data-minheight=112 ng-show=global.loading_done><dt class=frame-dt><span class=\"title title--breadcrumb\"><div class=help-inlineblock><a ng-href=/project/{{vm.pid}}/page>文档</a></div></span><div class=pull-right><a href=javascript:; tooltip=分级展示 tooltip-placement=bottom ng-click=\"vm.set_view_type('tree')\"><i class=\"fa icon-indent-right\" ng-class=\"{'color-text-lightgray':vm.pages_filter.view_type!='tree'}\"></i></a> &nbsp; &nbsp; <a href=javascript:; tooltip=平级展示 tooltip-placement=bottom ng-click=\"vm.set_view_type('list')\"><i class=\"fa icon-list\" ng-class=\"{'color-text-lightgray':vm.pages_filter.view_type!='list'}\"></i></a> <span class=\"color-text-lightgray plr_10\">|</span><div class=\"btn-group btn-group-link\"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown><span>{{ {'default':'按文档名称','create_date':'按创建时间','update_date':'按更新时间'}[vm.pages_filter.sort] }}</span> &nbsp;<i class=\"fa fa-caret-down\"></i></a><ul class=\"dropdown-menu pull-right\"><li><a href=javascript:; ng-click=\"vm.set_sort('default')\"><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.pages_filter.sort == 'default']}}\"></i>按文档名称</a></li><li><a href=javascript:; ng-click=\"vm.set_sort('create_date')\"><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.pages_filter.sort == 'create_date']}}\"></i>按创建时间</a></li><li><a href=javascript:; ng-click=\"vm.set_sort('update_date')\"><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.pages_filter.sort == 'update_date']}}\"></i>按更新时间</a></li></ul></div></div></dt><dd class=frame-dd><div class=part-loading ng-hide=vm.part_loading_done></div><div class=empty-panel ng-if=\"vm.part_loading_done && (vm.pages.length == 0 || (vm.pages | filter:{is_hide:'!true'}).length == 0)\"><i class=icon-file-text-alt></i><br><span>没有任何文档</span></div><div><div class=\"page-list mt_sub1\" ng-if=\"vm.pages.length > 0\"><wt-page-item ng-repeat=\"page in vm.pages\" change-route=true view-type=vm.pages_filter.view_type></wt-page-item></div></div></dd><ui-view></ui-view></dl></div>"),a.put("/tpl/project/page/pop_delete_page.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>删除文档</h3></div><div class=popbox-body><span>文档删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。</span></div><div class=popbox-footer><button wt-loading-status=deleting data-loading-text=删除中... ng-click=js_delete() class="btn btn-danger">确定删除</button></div>'),a.put("/tpl/project/page/pop_page_action.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>文档选项</h3></div><div class=popbox-body><ul class=popbox-menu ng-if="(global.prj_module.crud | permission:project.permission)"><li ng-show=show_sub_menu><a href=/project/{{pid}}/page/add/{{page.page_id}}><i class=icon-file-text-alt></i> 添加子文档</a></li><li><a ng-click=js_step(1) href=javascript:;><i class=icon-eye-open></i> 添加关注</a></li><li class=divider></li><li><a ng-href="/project/{{ pid }}/page/{{ page.page_id }}/edit"><i class=icon-pencil></i> 编辑</a></li><li><a ng-click=js_step(2) href=javascript:;><i class=icon-trash></i> 删除</a></li></ul><ul class=popbox-menu ng-if="!(global.prj_module.crud | permission:project.permission)"><li><a ng-click=js_toggle_watch($event,global.me,page) href=javascript:;><i class=icon-xx></i> 关注 <span class="text-muted small-tip ng-scope" ng-if=global.me.watched><i class="color_gray icon-ok"></i></span></a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><wt-toggle-members toggle-click="js_toggle_watch($event, member, xEntity)" pid=pid type=watch entity=page all-member-click="js_watch_all($event, members, xEntity)"></li><li ng-switch-when=2 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>删除</h3></div><div class=popbox-body><span>文档删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。<br></span></div><div class=popbox-footer><button ng-click=js_delete_page(page) class="btn btn-danger" data-loading-text=删除中... wt-loading-status=is_deleting>确定删除</button></div></li></ul>'),a.put("/tpl/project/page/pop_parents_page.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>选择父文档</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><ul class=popbox-menu><li ng-repeat="page in vm.pages"><a href="/project/{{ vm.pid }}/page/add/{{page.page_id}}"><i class=icon-file-text-alt></i> {{page.name}}</a></li></ul><div class="mt_20 pb_20 fs_12 color-text-gray" ng-if="vm.pages.length == 0">还没有创建任何文档。</div></div></div>'),a.put("/tpl/project/page/toolbar.html",'<div class=sub_toolbar><div class="btn-group js-popbox mr_5" data-placement=bottom data-align=right ng-if="global.prj_module.crud | permission:project.permission"><button class="btn btn-success btn--fancy" wt-go-to="/project/{{ project.pid }}/page/add">新建文档</button> <a class="btn btn-success btn--fancy dropdown-toggle" data-toggle=dropdown><i class=icon-caret-down></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; wt-go-to="/project/{{ project.pid }}/page/add"><i class=icon-xx></i> 新建文档</a></li><li><a href=javascript:; ng-click=vm.show_add_subpage_pop($event)><i class=icon-xx></i> 新建子文档</a></li></ul></div><div class=btn-group><a href=javascript:; type=button class="btn btn--fancy dropdown-toggle" data-toggle=dropdown><sapn class=plr_10>{{{0:\'&nbsp;全部&nbsp;\',1:\'我创建的\',2:\'我关注的\'}[vm.pages_filter.filter_type]}}</sapn><i class=icon-caret-down></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; ng-click=vm.set_filter_type(0)>全部</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(1)>我创建的</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(2)>我关注的</a></li></ul></div></div>'),a.put("/tpl/project/page/version_diff.html",'<div class=height-nonav wt-scroll><dl class=frame data-minheight=112 ng-show=global.loading_done><dt class=frame-dt><span class="title title--breadcrumb"><div class=help-inlineblock><a href=/project/{{vm.pid}}/page>文档</a></div><div class=help-inlineblock ng-repeat="bc in vm.breadcrumbs"><i class="icon-angle-right ml_10 mr_10"></i><div class=help-inlineblock ng-bind-html=bc ng-click=vm.child_event_handler($event)>{{bc}}</div></div></span> <button class="btn ml_15 pull-right mb_sub10 mt_sub13" ng-click=vm.show_diff() ng-disabled="vm.checked_versions.length<2" ng-hide=vm.show_compare_result>比对</button></dt><dd class=frame-dd><div class="page-panel mt_sub1"><div class=page-list ng-hide=vm.show_compare_result><div class="wt-row page-version-row" ng-repeat="version in vm.page_vers" page-id={{version.page_id}} ng-click=vm.toggle_sel_version($event,version) ng-class="{true:\'not-allowed\',false:\'clickable\'}[vm.checked_versions.length==2 && !version.selected]"><div class="column checkbox-version"><div class="checkbox ml_5"><label class=w_100p><input type=checkbox class=mr_10 ng-click=vm.preventDefault($event)> #{{version.version}}</label></div></div><div class="column message"><span>{{version.message}}</span></div><div class="column owner"><wt-avatar member=version.owner name=true size=30></wt-avatar></div><div class="column date"><span class=date>{{version.create_date | fromNow}}&nbsp;</span></div></div></div><div class=page-list ng-show=vm.show_compare_result><div id=diff_output_div ng-bind-html=diff_result_html></div></div></div></dd></dl></div>'),a.put("/tpl/project/pop_project_info.html","<div class=popbox-header><button class=\"cancel icon-remove\" ng-click=js_close()></button><h3>项目信息</h3></div><div class=popbox-bodywrapper wt-scroll><div class=\"popbox-body w_300\"><ul class=popbox-menu><li ng-class=\"{'disabled': project.curr_role == 4}\"><a href=javascript:; ng-click=js_goto_prj_setting($event)><i class=icon-cog></i> 项目设置</a></li><li class=divider></li><li ng-if=\"project.team_id && project.team_id != '-1'\"><a href=/teams/{{project.team_id}}><i class=icon-sitemap></i> 所属团队<br><span class=\"color_gray pl_20\">{{project.team.name}}</span></a></li><li ng-if=\"project.team_id && project.team_id != '-1'\" class=divider></li><li><a href=javascript:;><i class=icon-user></i> 项目角色<br><span class=\"color_gray pl_20\">{{ {1:'负责人', 2:'成员', 3:'访客',4:'访客' }[project.curr_role] }}</span></a></li><li class=divider></li><li><a href=javascript:;><i class=icon-info-sign></i> 项目描述<br><span class=\"color_gray pl_20\">{{ {true:'项目没有描述', false: project.desc }[project.desc==''] }}</span></a></li></ul></div></div>"),a.put("/tpl/project/pop_project_more.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>更多选项</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><ul class=popbox-menu><li><a ng-href=/project/{{project.pid}}/archive>查看归档任务</a></li><li><a ng-href=/project/{{project.pid}}/activity>项目活动记录</a></li><li ng-if="$root.global.prj_module.crud | permission:project.permission"><a href=/project/{{project.pid}}/trash>项目回收站</a></li></ul></div></div>'),a.put("/tpl/project/post/add_or_edit_post.html",'<dl class=add_edit_panel><div class=post-edit-container><form name=post_form class=wt-form w5c-form-validate="" novalidate=""><div class=add-post-edit-inner wt-ctrl-enter=js_save_post(post_form)><wt-new-editor edit-title=edit_post.name edit-content=edit_post.content pid=project.pid entity-type=vm.post entity-id=edit_post.post_id watchers=edit_post.watchers></wt-new-editor></div><div class=post_watch_bar><div class=post_watch_bar_addmember><h4>添加关注者</h4><ul class=avatars><li ng-repeat="member in edit_post.watchers"><wt-avatar member=member class=js-popbox pop-member=member wt-pop-member=pop_watcher_options size=42></wt-avatar></li><li class=clickable><a class="avatar-add js-popbox" data-placement=top data-align=right wt-pop-toggle-members="js_toggle_watch($event, member, xEntity)" pid=vm.pid type=watch entity=edit_post all-member-click="js_watch_all($event, members, xEntity)"><span class=o>＋</span></a></li></ul></div><button class="btn btn-success mr_20" w5c-form-submit=js_save_post(post_form) data-loading-text=保存中... wt-loading-status=is_saving>新 &nbsp;建</button> <button class="btn btn-cancel btn-link" ng-click=js_cancel_edit_post()>取 &nbsp;消</button></div></form></div></dl>'),a.put("/tpl/project/post/pop_delete_post.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>删除话题</h3></div><div class=popbox-body><span>话题删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。</span></div><div class=popbox-footer><button ng-click=js_del_post() class="btn btn-danger">确定删除</button></div>'),a.put("/tpl/project/post/pop_post_action.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>话题选项</h3></div><div class=popbox-body><ul class=popbox-menu><li ng-if="(global.prj_module.crud | permission:project.permission)"><a ng-click=js_step(1)><i class=icon-eye-open></i> 添加关注</a></li><li ng-if="(global.prj_module.crud | permission:project.permission)"><a ng-click=js_step(2)><i class=icon-trash></i> 删除</a></li><li ng-if="!(global.prj_module.crud | permission:project.permission)"><a ng-click=js_toggle_watch($event,global.me,edit_post) href=javascript:;><i class=icon-xx></i> 关注 <span class="text-muted small-tip ng-scope" ng-if=global.me.watched><i class="color_gray icon-ok"></i></span></a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><wt-toggle-members toggle-click="js_toggle_watch($event, member, xEntity)" pid=pid type=watch entity=edit_post all-member-click="js_watch_all($event, members, xEntity)"></li><li ng-switch-when=2 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>删除</h3></div><div class=popbox-body><span>话题删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。<br></span></div><div class=popbox-footer><button ng-click=js_delete_post(edit_post) class="btn btn-danger" data-loading-text=删除中... wt-loading-status=is_deleting>确定删除</button></div></li></ul>'),a.put("/tpl/project/post/posts.html",'<div class=height-nonav wt-scroll><dl class="frame frame--posts-add" ng-if=vm.show_add_post><dd class=frame-dd><ng-include src="\'/tpl/project/post/add_or_edit_post.html\'"></ng-include></dd></dl><dl class="frame frame--posts" data-minheight=112 ng-if=global.loading_done><dt class=frame-dt><span class="title title--breadcrumb"><div class=help-inlineblock><a ng-href=/project/{{vm.pid}}/post>话题</a></div></span><div class=pull-right><div class="btn-group btn-group-link"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown><span>{{ {\'create_date\':\'按发布时间\',\'last_reply_date\':\'按回复时间\'}[vm.posts_filter.sort] }}</span> &nbsp;<i class="fa fa-caret-down"></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; ng-click="vm.set_sort(\'create_date\')"><i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[vm.posts_filter.sort == \'create_date\']}}"></i> 按发布时间</a></li><li><a href=javascript:; ng-click="vm.set_sort(\'last_reply_date\')"><i class="{{ {true:\'color_gray icon-ok\',false:\'icon-xx\'}[vm.posts_filter.sort == \'last_reply_date\']}}"></i> 按回复时间</a></li></ul></div></div></dt><dd class=frame-dd><div class=empty-panel ng-if="vm.part_loading_done && vm.posts != null && vm.posts.length == 0 && !show_add_post_empty"><i class=icon-list-alt></i><br><span>还没有任何话题</span></div><div><div class="post-list mt_sub1"><wt-post-item ng-repeat="post in vm.posts" ng-click="show_post_entity(post.pid, post.post_id, false)"></wt-post-item></div><div class=loading-more-panel><div class=part-loading ng-hide=vm.part_loading_done></div><button class=btn ng-if="vm.has_more && vm.part_loading_done" ng-click=js_load_more($event);>加载更多</button></div></div></dd></dl></div><ui-view></ui-view>'),a.put("/tpl/project/post/toolbar.html","<div class=sub_toolbar><button class=\"btn btn-success btn--fancy mr_5\" ng-click=vm.show_add_post() type=button ng-if=\"global.prj_module.crud | permission:project.permission\">新建话题</button><div class=btn-group><a class=\"btn btn--fancy dropdown-toggle\" data-toggle=dropdown href=javascript:;><span class=plr_10>{{{0:'&nbsp;全部&nbsp;',1:'我发起的',2:'我关注的'}[vm.posts_filter.filter_type]}}</span><i class=icon-caret-down></i></a><ul class=\"dropdown-menu pull-right\"><li><a href=javascript:; ng-click=vm.set_filter_type(0)><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.posts_filter.filter_type == 0]}}\"></i>全部</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(1)><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.posts_filter.filter_type == 1]}}\"></i>我发起的</a></li><li><a href=javascript:; ng-click=vm.set_filter_type(2)><i class=\"{{ {true:'color_gray icon-ok',false:'icon-xx'}[vm.posts_filter.filter_type == 2]}}\"></i>我关注的</a></li></ul></div></div>"),a.put("/tpl/project/prj_not_found.html",'<div class=layout_content><div class="layout_content_main no_sidebar"><dl class=frame data-minheight=28><dt><span class=title>出错啦</span></dt><dd><div class=error-panel><i class=icon-inbox></i><br><span>项目不存在或者你没有权限访问当前项目</span><br></div></dd></dl></div></div>'),a.put("/tpl/project/project.html",'<div class=layout_content><div class=layout_content_main><div class=mod-navbar><div class=main><div class=title ng-controller=projectInfoCtrl><h3><a href=javascript:; class="js-popbox prj_icon" data-placement=bottom data-align=left tooltip-placement=bottom ng-if="(global.prj_module.setting | permission:project.permission)" tooltip=设置标识 ng-click="sidebar.change_status(\'setting\',\'base_info\')"><i class={{project.pic}} ng-style={color:project.bg}></i></a> <a href=javascript:; class="prj_icon prj_icon--nosetting" ng-if="!(global.prj_module.setting | permission:project.permission)"><i class={{project.pic}} ng-style={color:project.bg}></i></a> <a href=javascript:; class="js-popbox prj_name" data-placement=bottom data-align=left ng-click=js_view_prj_info($event) ng-bind=[project.name,30]|cutstr></a></h3><a href=javascript:; ng-if="project.is_star != -1" tooltip-placement=bottom ng-click=js_star_toggle($event,project) tooltip="{{{1:\'取消常用项目\',0:\'设置为常用项目\'}[project.is_star]}}"><i ng-class="{1: \'icon-star\', 0: \'icon-star-empty\'}[project.is_star]"></i></a> <a href=javascript:; ng-if="project.curr_role == 4" tooltip-placement=bottom ng-click=js_favorite_toggle($event,project) tooltip="{{{1:\'取消收藏\',0:\'收藏\'}[project.is_favorite]}}"><i class=fa ng-class="{1: \'fa-heart\', 0: \'fa-heart-o\'}[project.is_favorite]"></i></a> <a href=javascript:; tooltip-placement=bottom tooltip="{{project.visibility | projectVisibility}}" show-project-visibility-options ng-click=show($event)><i ng-class="{1:\'icon-private\',2:\'icon-protected\',3:\'icon-public\'}[project.visibility]"></i></a></div><div class=main_toolbar><a class=prj_top_icon href=javascript:; ng-click="sidebar.change_status(\'members\',\'\')" ng-class="{\'active\':sidebar.status == \'members\' || sidebar.status == \'add_member\'}" tooltip-placement=bottom tooltip=成员><i class="icon icon-user"></i></a> <a class=prj_top_icon href=javascript:; ng-click="sidebar.change_status(\'setting\',\'\')" ng-class="{\'active\':sidebar.status==\'setting\'}" tooltip-placement=bottom tooltip=设置><i class="icon icon-cog"></i></a> <a class="prj_top_icon js-popbox" ng-controller=projectPopMoreCtrl href=javascript:; ng-click=vm.js_pop_more($event) data-align=right tooltip-placement=bottom tooltip=更多><i class="fa fa-ellipsis-v"></i></a></div></div><div class=sub><ui-view ng-show=$root.global.loading_done name=toolbar></ui-view><ul class=mod_subnav><li ng-repeat="nav in project.navigations"><a ng-href=/project/{{project.pid}}/{{nav.name}} ng-class="{\'active\':$root.global.project_iconmenu==nav.name}" title="{{nav.title + nav.shortcuts}}">{{nav.title}}</a></li></ul></div></div><ui-view></ui-view></div><div class="layout_right_sidebar layout_right_sidebar--project"><ng-include src="\'/tpl/project/sidebar/sidebar.html\'"></ng-include></div></div><div class=stamp-project ng-cloak ng-if=project.archived></div>'),a.put("/tpl/project/sidebar/add_member.html",'<div class=sidebar_main ng-controller=sidebarAddMemberCtrl><div class=sidebar_header><a href=javascript:; ng-click=vm.to_members()><button class="cancel wtfont wtf-close"></button><h3>添加项目成员</h3></a></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><h3 class=sidebar_body_header>通过邮件添加</h3><br><div class=plr_10><form w5c-form-validate="" name=inviteForm novalidate=""><div class="input-group mb_10"><input type=email name=add_member_email ng-model=invite_email class=form-control placeholder=请输入邮箱地址 required ng-focus=clear_alert() ng-change="clear_alert()"> <a href=javascript:; class="input-group-addon plr_10" w5c-form-submit=js_invite_member(invite_email)><img src=/img/return_key.png alt="return key" class=w_12></a></div><div class="part-loading mt_20" ng-show=member_inviting></div></form></div><h3 class=sidebar_body_header>通过链接邀请</h3><br><div class=plr_10><div class=mb_10><div ng-show=!project.link_join_code><span class=tips>把链接通过QQ、微信、邮件组等方式分享给团队成员，他们即可点击链接直接加入项目。</span><br><a href=javascript:; class=color-text-act-blue ng-click=toggle_join_project_link()>开启链接</a></div><div ng-show=project.link_join_code><input type=text title={{link_to_join}} ng-model=link_to_join class="form-control help-block" wt-click-select readonly="readonly"> <span class=tips>成员加入后，为了防止链接泄漏可以选择</span> <a href=javascript:; class=color-text-act-blue ng-click=toggle_join_project_link()>关闭链接</a></div></div></div><div class=add_member ng-if="project.team_id != -1"><div class="part-loading mt_20" ng-show=loading_team_members></div><div ng-hide=loading_team_members><h3 class=sidebar_body_header ng-hide="unassigned_team_members.length == 0">从团队成员添加</h3><br><ul class=avatars ng-hide="loading_team_members || unassigned_team_members.length == 0"><li class=avatars-empty ng-if="unassigned_team_members.length == 0"><i class="icon-user icon-3x"></i><br>还没有团队成员</li><li ng-repeat="member in unassigned_team_members"><div ng-click=js_add_user_as_member(member) class="js-popbox member" data-placement=left ng-class="{true: \'member-pendding\'}[[(member.status==2 || member.status==3)]]" title="{{ {2:\'成员还未接受邀请\', 3: \'成员已经退出团队\'}[member.status] }}"><wt-avatar member=member name="[member.display_name,22] | cutstr" size=30></wt-avatar></div></li></ul><h3 class=sidebar_body_header ng-hide="unassigned_team_visitors.length == 0">从团队访客添加</h3><ul class=avatars ng-hide="unassigned_team_visitors.length == 0"><li class=avatars-empty ng-if="unassigned_team_visitors.length == 0"><i class="icon-user icon-3x"></i><br>还没有团队访客</li><li ng-repeat="member in unassigned_team_visitors"><div ng-click=js_add_user_as_member(member) class="js-popbox member" data-placement=left ng-class="{true: \'member-pendding\'}[[(member.status==2 || member.status==3)]]" title="{{ {2:\'成员还未接受邀请\', 3: \'成员已经退出团队\'}[member.status] }}"><wt-avatar member=member name="[member.display_name,22] | cutstr" size=30></wt-avatar></div></li></ul></div></div></div></div></div>'),a.put("/tpl/project/sidebar/create_by_mail.html",'<div class=sidebar_main><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>通过邮件创建任务</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><h3 class=sidebar_body_header>发送邮件到以下地址</h3><div class=p_10><textarea class="form-control help-block textarea-noresize color-text-act-blue" rows=3 wt-click-select readonly=readonly>{{project.pid+vm.mail_domain}}</textarea></div><h3 class=sidebar_body_header>查看详细的帮助</h3><ul class=sidebar_menu><li><a href=/guide/task/create#bymail target=_blank><i class=icon-check></i> 创建任务</a></li><li><a href=/guide/post/create#by-email target=_blank><i class=icon-list-alt></i> 创建话题</a></li><li><a href=/guide/page/create#by-mail target=_blank><i class=icon-file-text-alt></i> 创建文档</a></li></ul></div></div></div>'),a.put("/tpl/project/sidebar/export_data.html",'<div class=sidebar_main ng-controller=sidebarExportDataCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>数据导出</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body ng-init="="><p class="color-text-grayer mt_28">选择要导出的格式及内容</p><div class="radio p_5 ml_15"><label ng-class="{\'color-text-act-blue\':vm.export_type==\'json\'}"><input type=radio ng-model=vm.export_type value=json> JSON 格式</label></div><div class="radio p_5 ml_15"><label ng-class="{\'color-text-act-blue\':vm.export_type==\'csv\'}"><input type=radio ng-model=vm.export_type value=csv> CSV 格式</label></div><hr><ul class=ul-horiz-2><li><a href="/api/projects/{{project.pid}}/tasks/exports?format={{vm.export_type}}" target=_blank><i class="fa fa-check-square-o"></i><br>任务</a></li><li><a href="/api/projects/{{project.pid}}/files/exports?format={{vm.export_type}}" target=_blank><i class="fa fa-file"></i><br>文件</a></li><li><a href="/api/projects/{{project.pid}}/posts/exports?format={{vm.export_type}}" target=_blank><i class="fa fa-list-alt"></i><br>话题</a></li><li><a href="/api/projects/{{project.pid}}/pages/exports?format={{vm.export_type}}" target=_blank><i class="fa fa-file-text-o"></i><br>文档</a></li></ul></div></div></div>'),a.put("/tpl/project/sidebar/filter_tasks.html",'<div class=sidebar_main ng-controller=sidebarFilterTasksCtrl><div class=sidebar_header><a href=javascript:; ng-click=vm.close_sidebar()><button class="cancel wtfont wtf-close"></button><h3>筛选任务</h3></a></div><div class=sidebar_body_scroll wt-scroll ng-class="{\'sidebar_body_scroll--clearfilter\':task_filters.turn_on}"><div class=sidebar_body><form class=sidebar_search_form role=search><i class=icon-search></i> <input type=text class=form-control wt-autofocus="" ng-model=task_filter_text ng-change=vm.js_filter_text() placeholder="输入任务名称"> <a ng-if=task_filter_text class=clear title=清除查询条件 href=javascript:; ng-click=vm.clear_text()><i class="fa fa-times-circle-o"></i></a></form><dl class=prj_sidebar_dl ng-if="labels.length > 0"><dt>按标签筛选</dt><dd><ul class="checkable checkable-taskfilter"><li class=label-item ng-repeat="label in labels" ng-class="{\'selected\':vm.label_is_filter(label.name)}"><a href=javascript:; class=js-toggle-label-filter ng-click=vm.js_filter_label(label)><span class="task-label {{label.name}}-label ml_15"></span> <span class="label-name help-inline ml_10">{{label.desc}}</span></a></li></ul></dd></dl><dl class=prj_sidebar_dl><dt>按成员筛选</dt><dd><ul class="avatars checkable checkable-taskfilter"><li ng-repeat="member in members" ng-click=vm.js_filter_member(member) ng-class="{\'checkable-taskfilter-userban\':member.uid == -1,\'selected\':vm.member_is_filter(member.uid)}"><wt-avatar member=member class=ml_10 size=30 ng-if="member.uid != -1" name="[member.display_name,18] | cutstr" nameclass=ml_10></wt-avatar><a class="avatar avatar-ban ml_10" href=javascript:; ng-if="member.uid == -1"><i class="wtfont wtf-ban"></i> <span class="avatar-name ml_10">尚未分配</span></a></li></ul></dd></dl><dl class=prj_sidebar_dl><dt>按截止日期筛选</dt><dd><ul class="checkable checkable-taskfilter"><li ng-class="{\'selected\':task_filters.date == \'today\'}"><a ng-click="vm.js_filter_date(\'today\')"><span class=ml_53>今　天</span></a></li><li ng-class="{\'selected\':task_filters.date == \'tomorrow\'}"><a ng-click="vm.js_filter_date(\'tomorrow\')"><span class=ml_53>明　天</span></a></li><li ng-class="{\'selected\':task_filters.date == \'week\'}"><a ng-click="vm.js_filter_date(\'week\')"><span class=ml_53>本　周</span></a></li><li ng-class="{\'selected\':task_filters.date == \'nextweek\'}"><a ng-click="vm.js_filter_date(\'nextweek\')"><span class=ml_53>下　周</span></a></li><li ng-class="{\'selected\':task_filters.date == \'month\'}"><a ng-click="vm.js_filter_date(\'month\')"><span class=ml_53>本　月</span></a></li><li ng-class="{\'selected\':task_filters.date == \'due\'}"><a ng-click="vm.js_filter_date(\'due\')"><span class=ml_53>已过期</span></a></li><li ng-class="{\'selected\':task_filters.date == \'noset\'}"><a ng-click="vm.js_filter_date(\'noset\')"><span class=ml_53>未设置截止时间</span></a></li></ul></dd></dl><dl class=prj_sidebar_dl><dt>更多筛选</dt><dd><ul class="checkable checkable-taskfilter"><li ng-class="{\'selected\':task_filters.hide_completed}"><a class=text-center ng-click=vm.toggle_hide_completed()><span>隐藏已完成的任务</span></a></li></ul></dd></dl></div></div><div class=sidebar_footer_clearfilter ng-if=task_filters.turn_on><button class="btn btn-block" ng-click=vm.clear_task_filters()>清除筛选</button></div></div>'),
a.put("/tpl/project/sidebar/project_copy.html",'<div class=sidbar_main ng-controller=sidebarProjectCopyCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>拷贝项目</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><form name=prj_copy_form w5c-form-validate="" class="wt-form mt_28" role=form novalidate><div><div class=form-group><div><input type=text ng-model=prj_copy.name placeholder=项目名称 name=prj_name autofocus class=form-control required></div></div><div class=form-group><div><select class=form-control ng-model=prj_copy.dest_team ng-change=vm.js_target_team_change(prj_copy.dest_team) ng-options="team.name for team in prj_copy.teams" required name=dest_team><option value="" selected=selected disabled=disabled>请选择目标团队：</option></select></div></div><div class=form-group><div><select class=form-control ng-model=prj_copy.selected_visibility ng-options="visibility.name for visibility in prj_copy.visibility_options" required name=visibility><option value="" selected=selected disabled=disabled>请选择公开性：</option></select></div></div></div><div><br><div class=color-text-grayer>选择同时拷贝的内容</div><div class=plr_10><ul class=sidebar-list><li ng-class="{\'selected\':prj_copy.keepTasks}"><a href=javascript:; ng-click="prj_copy.keepTasks=!prj_copy.keepTasks"><span>任&nbsp; 务</span> <ins>提供看板式任务管理功能，通过拖拽来分配任务或者在不同列表间移动任务</ins></a></li><li ng-class="{\'selected\':prj_copy.keepFiles}"><a href=javascript:; ng-click="prj_copy.keepFiles=!prj_copy.keepFiles"><span>文&nbsp; 件</span> <ins>与团队成员共享文件资源，支持文件在线预览，支持文件历史版本管理</ins></a></li><li ng-class="{\'selected\':prj_copy.keepPosts}"><a href=javascript:; ng-click="prj_copy.keepPosts=!prj_copy.keepPosts"><span>话&nbsp; 题</span> <ins>通过话题随时随地与团队成员发起讨论，打造属于团队内部的讨论组</ins></a></li><li ng-class="{\'selected\':prj_copy.keepPages}"><a href=javascript:; ng-click="prj_copy.keepPages=!prj_copy.keepPages"><span>文&nbsp; 档</span> <ins>在线编写文档，形成团队知识库，支持文档历史版本管理和比对功能</ins></a></li></ul></div><div class="text-center pb_20"><button w5c-form-submit=js_prj_copy(prj_copy_form) data-loading-text=拷贝中... class="btn btn-success mr_15" wt-loading-status=vm.is_prj_copying>拷&nbsp; 贝</button></div></div></form></div></div></div>'),a.put("/tpl/project/sidebar/project_members.html",'<div ng-controller=sidebarMembersCtrl class=sidebar_member><h3 class=sidebar_header>成 员</h3><div class=member_list data-height=80 wt-scroll ng-show=project.members><ul class=avatars><li ng-if="$root.global.loading_done && ($root.global.prj_module.setting | permission:project.permission)"><div class="js-popbox member text-center" ng-click=vm.to_add_member() tooltip=添加成员 tooltip-placement=bottom><a class=avatar-add href=javascript:;><span class=o>＋</span></a></div></li><li ng-repeat="member in project.members | filter:isMemberFilter()"><div class="js-popbox member" wt-member-control member=member project=project data-placement=left ng-class="{true: \'member-pendding\'}[member.status==3]" title="{{{3: \'成员已经退出团队\'}[member.status]}}"><wt-avatar member=member status=true class=text-center namebr=true role=member.role drag="{true: $parent.draggable_options,false:\'\'}[member.status==1 && member.role != 3 && project.curr_role!=3]"></wt-avatar></div></li></ul><div ng-if="((project.members | filter:isGuestFilter()).length > 0)"><h4>访　客</h4><ul class=avatars><li ng-repeat="member in project.members | filter:isGuestFilter()"><div class="js-popbox member" wt-member-control member=member project=project data-placement=left><wt-avatar member=member status=true class=text-center namebr=true></wt-avatar></div></li></ul></div><div ng-if="((project.members | filter:{status:2}).length > 0)"><h4>邀请中</h4><ul class=avatars><li ng-repeat="member in project.members | filter:isStatusPendingFilter()"><div class="js-popbox member member-pendding" title=成员还未接受邀请 wt-member-control member=member project=project data-placement=left><wt-avatar member=member status=true class=text-center namebr=true role=member.role></wt-avatar></div></li></ul></div></div><div class=sidebar_members_footer ng-if=project.members><i class=icon-user></i> <strong>{{(project.members| filter:isOnlineFilter()).length}}</strong>/{{project.members.length}}</div></div>'),a.put("/tpl/project/sidebar/project_setting_activate.html",'<div class=sidebar_main ng-controller=sidebarSettingActiveCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>归档项目</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><span class=tips>该项目当前状态为已归档，你可以选择激活。激活项目后，项目成员可以正常访问和操作项目内容<br><br></span> <button ng-click=js_prj_unarchive() data-loading-text=激活中... wt-loading-status=is_unarchiving class="btn btn-success">确定激活</button></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_archive.html",'<div class=sidebar_main ng-controller=sidebarSettingArchiveCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>归档项目</h3></div><div class=sidebar_body_scroll><div class=sidebar_body><span class=tips>项目归档后，项目内容将成只读，不能被更新。选择重新激活后，项目将恢复正常。<br><br></span><div class=text-center><button ng-click=js_prj_archive() data-loading-text=归档中... wt-loading-status=is_archiving class="btn btn-success">确定归档</button></div></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_baseinfo.html",'<div class=sidebar_main ng-controller=sidebarSettingBaseInfoCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>基本信息设置</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body style=min-height:600px><h3 class=sidebar_body_header>设置基本项目信息</h3><br><form name=prj_update_form w5c-form-validate="" class=wt-form role=form novalidate><div class=form-group><label class=sr-only>项目名称：</label><div><input type=text ng-model=temp_prj.name placeholder=项目名称 name=prj_name autofocus required class="form-control"></div></div><div class=form-group><label class=sr-only>项目公开性：</label><div><select class=form-control ng-model=temp_prj.visibility ng-options="visibility.id as visibility.name for visibility in visibilities"><option value="" selected=selected disabled=disabled>请选择公开性：</option></select></div></div><div class=form-group><label class=sr-only>项目标识</label><div class=clearfix><div class="btn-group btn-group-colors" dropdown><button type=button class="btn btn-color"><span class=prj_color style=background-color:{{project.bg}} ng-style={backgroundColor:temp_prj.bg}></span></button> <button type=button class="btn dropdown-toggle" dropdown-toggle><span class=caret></span> <span class=sr-only>Split button!</span></button><ul class="dropdown-menu prj-colors" role=menu><li ng-repeat="prj_color in prj_colors"><span ng-click=js_color_select(prj_color) class=prj_color ng-style={backgroundColor:prj_color}></span></li></ul></div><div class="btn-group btn-group-icons pull-right" dropdown><button type=button class="btn btn-icons"><i ng-style={color:temp_prj.bg} class={{project.pic}} ng-class=temp_prj.pic></i></button> <button type=button class="btn dropdown-toggle" dropdown-toggle><span class=caret></span> <span class=sr-only>Split button!</span></button><ul class="dropdown-menu prj-icons" role=menu><li ng-repeat="prj_icon in prj_icons" class=text-center><span ng-click=js_icon_select(prj_icon) class=prj_icon ng-style={color:temp_prj.bg}><i class={{prj_icon}}></i></span></li></ul></div></div></div><div class=form-group><label class=sr-only>项目描述：</label><div><textarea wt-ctrl-enter=js_prj_update(prj_update_form) ng-model=temp_prj.desc placeholder=为项目添加简短描述（可选） name=prj_desc rows=4 class=form-control>\n\n                        </textarea></div></div><div class="text-center mt_28"><button w5c-form-submit=js_prj_update(prj_update_form) data-loading-text=保存中... class="btn btn-success btn--big mr_15" wt-loading-status=is_prj_saveing>保&nbsp; 存</button></div></form></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_del.html",'<div class=sidebar_main ng-controller=sidebarSettingDelCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>删除项目</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><span class=tips>删除项目后，所有的内容都将被删除，并且不能恢复。<br><br>请输入项目的完整名称，确认要删除该项目：<br><br></span> <input type=text class=form-control ng-model=prj_name wt-enter=js_prj_del(prj_name) placeholder=项目名称><br><button ng-click=js_prj_del(prj_name) ng-disabled="prj_name != project.name" class="btn btn-danger" data-loading-text=删除中... wt-loading-status=is_deleting>确认并删除</button></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_menu.html",'<div class=sidebar_header><a href=javascript:; ng-click=sidebar.close()><button class="cancel wtfont wtf-close"></button><h3>项目设置</h3></a></div><div class=sidebar_body_scroll wt-scroll><div data-minheight=162><ul class=sidebar_menu><li ng-if="$root.global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click=to_step(steps.setting_base_info)>基本信息设置</a></li><li ng-if="$root.global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click=to_step(steps.setting_preferences)>应用偏好设置</a></li><li ng-if="$root.global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click=to_step(steps.setting_webhook)>Webhook 设置</a></li><li ng-if="$root.global.prj_module.crud | permission:project.permission"><a href=javascript:; ng-click=to_step(steps.setting_label)>任务标签</a></li><li ng-if="$root.global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click=to_step(steps.setting_timing_tasks)>循环任务</a></li><li class=divider></li><li><a href=javascript:; ng-click=to_step(steps.project_copy)>拷贝项目</a></li><li ng-if="project.curr_role == 1 && !project.archived"><a href=javascript:; ng-click=to_step(steps.setting_transfer)>移动项目</a></li><li><a href=javascript:; ng-click=to_step(steps.export_data)>数据导出</a></li><li ng-if="($root.global.prj_module.setting | permission:project.permission) && !project.archived"><a href=javascript:; ng-click=to_step(steps.setting_archive)>归档项目</a></li><li ng-if="project.curr_role==1&&project.archived==1"><a href=javascript:; ng-click=to_step(steps.setting_activate)>激活项目</a></li><li><a href=javascript:; ng-click=to_step(steps.create_by_mail)>通过邮件创建内容</a></li><li ng-if="!project.archived && global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click=to_step(steps.setting_notify)>邮件通知</a></li></ul></div><ul class=ul-horiz-2><li ng-if="project.permission == vm.prj_permission_admin || project.permission == vm.prj_permission_member"><a href=javascript:; ng-click=to_step(steps.setting_quit)><i class="wtfont wtf-exit"></i><br>退出项目</a></li><li ng-if="global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click=to_step(steps.setting_del)><i class="wtfont wtf-trash"></i><br>删除项目</a></li></ul></div>'),a.put("/tpl/project/sidebar/project_setting_nav.html",""),a.put("/tpl/project/sidebar/project_setting_notify.html",'<div class=sidebar_main ng-controller=sidebarSettingNotifyCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>邮件通知</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><div ng-if="project.is_notify==1&&project.archived==0"><span class=tips>当前邮件通知开启，您将收到关于该项目的所有邮件通知。可以选择关闭邮件通知，您将不会收到邮件通知。</span><br><br><div class=text-center><button class="btn btn-danger" ng-click=toggle_email_notify()><i class=icon-off></i> 关闭邮件通知</button></div></div><div ng-if="project.is_notify==0&&project.archived==0"><span class=tips>当前邮件通知关闭，您将不会收到关于该项目的所有邮件通知。可以选择再次启用邮件通知。</span><br><br><div class=text-center><button class="btn btn-success" ng-click=toggle_email_notify()><i class=icon-bell></i> 打开邮件通知</button></div></div></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_preferences.html",'<div class=sidebar_main ng-controller=sidebarSettingPreferencesCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>应用偏好设置</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><h3 class=sidebar_body_header>应用设置</h3><div class=sidebar_body_header_desc>点击开启/关闭应用，可拖拽排序</div><ul class="js_sortable sidebar_prj_navigations" ui-sortable=nav_sortable_options ng-model=prj_navigations><li ng-click=js_toggle_nav(nav) ng-repeat="nav in prj_navigations" nav-id={{nav.id}}><i class="pull-right icon-ok color-text-act-green" ng-show=js_nav_is_enabled(nav.id)></i> <a href=javascript:;><span class=title ng-bind=nav.title></span> <span class=desc ng-bind=nav.desc></span></a></li><li ng-click=js_toggle_nav(nav) ng-repeat="nav in un_prj_navigations" class=disable wt-disable-drag=""><a href=javascript:;><span class=title ng-bind=nav.title></span> <span class=desc ng-bind=nav.desc></span></a></li></ul><h3 class=sidebar_body_header>偏好设置</h3><div class=sidebar_body_header_desc>点击开启/关闭</div><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_autoarchive() ng-class="{\'fa-toggle-on\':project.auto_archived, \'fa-toggle-off\': !project.auto_archived}"></a> <span>任务完成自动归档</span><br><ins ng-class="{1:\'on\',0:\'off\'}[(project.auto_archived||0)]" ng-bind="{1:\'已开启\',0:\'已关闭\'}[(project.auto_archived||0)]"></ins></div><div class=radio--fancy><a href=javascript:; class=fa ng-click=js_toggle_show_done_task_in_event() ng-class="{\'fa-toggle-on\':project.show_completed, \'fa-toggle-off\': !project.show_completed}"></a> <span>在日历中显示已完成任务</span><br><ins ng-class="{1:\'on\',0:\'off\'}[(project.show_completed||0)]" ng-bind="{1:\'已开启\',0:\'已关闭\'}[(project.show_completed||0)]"></ins></div></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_quit.html",'<div class=sidebar_main ng-controller=sidebarSettingQuiteCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>退出项目</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><div ng-hide="project.curr_role == 1 && !has_other_admin"><span class=tips>退出项目后，你将无法再访问该项目内容，但相关的数据不会被删除。<br>请输入项目的完整名称，确认要退出该项目：<br><br></span> <input type=text class=form-control ng-model=prj_name placeholder=项目名称><br></div><span class=tips ng-show="project.curr_role==1 && !has_other_admin">您是项目唯一负责人，因此不能退出项目。<br><br></span> <button ng-click=js_prj_quit(prj_name) ng-disabled="prj_name != project.name" class="btn btn-danger" data-loading-text=退出中... wt-loading-status=is_quiting>确定退出</button></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_timing_tasks.html",'<div ng-controller=sidebarTimingTaskctrl><div class=sidebar_main ng-if=is_edit><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_timingtask_list()></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>循环任务变更</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><form name=timingtask_form w5c-form-validate={blurTrig:false,showMsg:false} class=wt-form role=form novalidate><div class=form-group><label class=control-label>循环任务名称：</label><div><input type=text ng-model=temp_timingtask.name placeholder="循环任务 名称" name=timingtask_name wt-autofocus required class="form-control"></div></div><div class=form-group><label class=control-label>任务创建周期：</label><div><select ng-model=temp_timingtask.recurrence class=form-control><option value=0>每日</option><option value=1>每周</option><option value=2>每月</option></select></div></div><div class=form-group><label class=control-label>选择任务列表：</label><div><select ng-model=temp_timingtask.entry_id class=form-control ng-options="entry.entry_id as entry.name for entry in entries"></select></div></div><div class=form-group><button w5c-form-submit=update_timingtask(temp_timingtask) data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_prj_saveing>确定</button> <button class="btn btn--warning js-popbox" ng-click="js_timingtask_del($event, temp_timingtask)">删除</button></div></form></div></div></div><div class=sidebar_main ng-if=!is_edit><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>循环任务</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><h3 class=sidebar_body_header ng-if="prj_webhooks.length!=0">已添加的循环任务</h3><ul class=sidebar-list><li ng-if=loading_prj_timingtasks><div class=part-loading></div></li><li ng-if="prj_timingtasks.length==0" class=noresult>还没有任何 循环任务 记录</li><li ng-if=!loading_prj_timingtasks ng-repeat="timingtask in prj_timingtasks" ng-click=to_edit_mode(timingtask)><span>{{timingtask.name}}</span> <ins class="text-muted fs_12">{{ {0:\'每日\',1:\'每周\',2:\'每月\'}[timingtask.recurrence]}}</ins> <i class="fa fa-pencil"></i></li></ul><div class="text-center fs_12 text-muted"><i class=icon-info-sign></i> 请在任务更多菜单中添加循环任务。</div></div></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_transfer.html",'<div class=sidebar_main ng-controller=sidebarSettingTransferCtrl><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>移动项目</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><p class="color-text-grayer mt_28">选择项目归属</p><ul class=checkable><li ng-repeat="team in teams" ng-click=set_transfer_to(team.team_id) class=ptb_2 ng-class="{\'selected\':to_team_id == team.team_id}"><a href=javascript:;><div class="help-inlineblock m_5"><i class=pl_10 ng-class="{true:\'icon-user\', false: \'icon-sitemap\'}[team.team_id == -1]"></i></div><span class=ml_10>{{team.name}}</span></a></li></ul><div class="text-center mt_28"><button ng-click=transfer() data-loading-text=移动中... wt-loading-status=is_transfering class="btn btn-success" ng-class="{true:\'disabled\'}[to_team_id == project.team_id]">确定移动</button></div></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_webhook.html",'<div ng-controller=sidebarSettingWebhookCtrl><div class=sidebar_main ng-if=vm.is_add><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click="vm.is_add = false"></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>添加 Webhook</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><form name=webhook_form w5c-form-validate={blurTrig:false,showMsg:false} class=wt-form role=form novalidate><div class=form-group><label class=control-label>Webhook 名称：</label><div><input type=text ng-model=edit_webhook.name placeholder="Webhook 名称" name=webhook_name wt-autofocus required class="form-control"></div></div><div class=form-group><label class=control-label>通知 URL：</label><div><input type=text ng-model=edit_webhook.web_hook_url placeholder=https://example.com/postreceive name=webhook_url required wt-regex="^(https?|s):\\/\\/(((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-zA-Z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-zA-Z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-fA-F]{2})|[!\\$&\'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$" class="form-control"></div></div><div class=form-group><label class=control-label>URL 密钥：</label><div><input type=text ng-model=edit_webhook.secret placeholder=(选填) name=webhook_secret class="form-control"></div></div><div class=form-group><label class=control-label>通知内容：</label><select ng-model=edit_webhook.is_every class=form-control><option value=1>全部事件</option><option value=0>自定义事件</option></select><div ng-if="edit_webhook.is_every==0"><div class=checkbox ng-repeat="item in webhook_action"><label><input type=checkbox name=webhook_actions ng-model=edit_webhook.actions[$index] ng-true-value={{item.action}} ng-false-value=""> {{item.desc}}</label></div></div></div><div class=form-group><div><button w5c-form-submit=js_webhook_add_edit(webhook_form) data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_prj_saveing>保 存</button> <a ng-if=!edit_webhook.wid class="btn btn-link btn-cancel" ng-click=cancel_edit()>取 消</a> <button ng-if=edit_webhook.wid class="btn btn--warning js-popbox" ng-click=js_webhook_del($event,edit_webhook)>删 除</button></div></div></form></div></div></div><div class=sidebar_main ng-if=!vm.is_add><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=to_step(steps.setting)></button> <button ng-click=sidebar.close() class="cancel wtfont wtf-close"></button><h3>Webhooks 设置</h3></div><div class=sidebar_body_scroll wt-scroll><div class=sidebar_body><h3 class=sidebar_body_header>已添加的 Webhook</h3><ul class=sidebar-list><li ng-if=!vm.part_loading_done><div class=part-loading></div></li><li ng-if="prj_webhooks.length==0 && vm.part_loading_done" class=noresult>还没有任何 Webhook 记录</li><li ng-if=vm.part_loading_done ng-repeat="webhook in prj_webhooks" ng-click=to_edit_webhook(webhook)><span>{{webhook.name}}</span> <ins>{{ {true:\'全部\',false:(webhook.actionsStr)}[webhook.is_every==1]}}</ins> <i class="fa fa-pencil"></i></li></ul><div class=text-center><button class="btn btn-success btn--big" ng-click=to_add_webhook()>添 &nbsp; 加</button></div></div></div></div></div>'),a.put("/tpl/project/sidebar/project_setting_webhook_add_edit.html",""),a.put("/tpl/project/sidebar/setting_label.html","<wt-set-project-labels type=project project=project backfn=to_step(steps.setting) closefn=sidebar.close() isheader=false islabelcheck=false></wt-set-project-labels>"),a.put("/tpl/project/sidebar/sidebar.html",'<dl class="prj_sidebar h_100p" wt-sidebar-toggle=sidebar.status ng-controller=prjSidebarCtrl><dd ng-switch on=vm.step><div ng-switch-default>默认</div><div ng-switch-when=1><ng-include src="\'/tpl/project/sidebar/project_members.html\'"></ng-include></div><div ng-switch-when=2 type=setting><ng-include src="\'/tpl/project/sidebar/project_setting_menu.html\'"></ng-include></div><div ng-switch-when=3 type=add_member><ng-include src="\'/tpl/project/sidebar/add_member.html\'"></ng-include></div><div ng-switch-when=4 type=filter_tasks><ng-include src="\'/tpl/project/sidebar/filter_tasks.html\'"></ng-include></div><div ng-switch-when=5 type=setting_base_info><ng-include src="\'/tpl/project/sidebar/project_setting_baseinfo.html\'"></ng-include></div><div ng-switch-when=6 type=setting_preferences><ng-include src="\'/tpl/project/sidebar/project_setting_preferences.html\'"></ng-include></div><div ng-switch-when=7 type=setting_webhook><ng-include src="\'/tpl/project/sidebar/project_setting_webhook.html\'"></ng-include></div><div ng-switch-when=8 type=setting_notify><ng-include src="\'/tpl/project/sidebar/project_setting_notify.html\'"></ng-include></div><div ng-switch-when=9 type=setting_archive><ng-include src="\'/tpl/project/sidebar/project_setting_archive.html\'"></ng-include></div><div ng-switch-when=10 type=setting_activate><ng-include src="\'/tpl/project/sidebar/project_setting_activate.html\'"></ng-include></div><div ng-switch-when=11 type=setting_del><ng-include src="\'/tpl/project/sidebar/project_setting_del.html\'"></ng-include></div><div ng-switch-when=12 type=setting_quit><ng-include src="\'/tpl/project/sidebar/project_setting_quit.html\'"></ng-include></div><div ng-switch-when=13 type=setting_transfer><ng-include src="\'/tpl/project/sidebar/project_setting_transfer.html\'"></ng-include></div><div ng-switch-when=20 type=export_data><ng-include src="\'/tpl/project/sidebar/export_data.html\'"></ng-include></div><div ng-switch-when=21 type=create_by_mail><ng-include src="\'/tpl/project/sidebar/create_by_mail.html\'"></ng-include></div><div ng-switch-when=22 type=project_copy><ng-include src="\'/tpl/project/sidebar/project_copy.html\'"></ng-include></div><div ng-switch-when=23 type=setting_timing_tasks><ng-include src="\'/tpl/project/sidebar/project_setting_timing_tasks.html\'"></ng-include></div><div ng-switch-when=24 type=setting_label><ng-include src="\'/tpl/project/sidebar/setting_label.html\'"></ng-include></div></dd></dl>'),a.put("/tpl/project/task/pop_add_entry.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>新建列表</h3></div><form name=add_entry_form w5c-form-validate="" class=wt-form novalidate><div class="popbox-body w_300"><input name=entry_name ng-model=name placeholder=列表名 type=text class="form-control w_260" required wt-autofocus=""></div><div class=popbox-footer><button w5c-form-submit="vm.js_add_entry(add_entry_form, name)" data-loading-text=保存中... class="btn btn-success btn--big mr_15" wt-loading-status=is_save_ing>保&nbsp; 存</button> <button ng-click=vm.js_close(result) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></form>'),a.put("/tpl/project/task/pop_add_task_entry.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>新建任务</h3></div><form name=add_task_form w5c-form-validate="" class=wt-form novalidate role=form><div class="popbox-body w_300 pb_0" ng-if="entries.length > 0"><div class=form-group><div><textarea class="js-task-name form-control ng-pristine ng-valid" placeholder="请输入任务内容（按 Enter 键直接保存）" required name=task_name ng-model=new_task.name wt-enter="js_add_task(add_task_form, new_task)" wt-focus>\n                        </textarea></div></div><div class=form-group><label>列表：</label><div><select class=form-control name=entry_select ng-model=new_task.entry required="" ng-options="entry as entry.name for entry in entries"></select></div></div><div class=form-group><label>截止日期：</label><div><input type=text class=form-control required="" ng-model=new_task.expire_date readonly=readonly ng-click=js_step(1)></div></div><div class=form-group ng-show="add_task_form.$errors.length > 0"><div><div class="alert alert-danger"><i class=icon-remove-sign></i> {{add_task_form.$errors[0]}}</div></div></div><div class=form-group><div><button w5c-form-submit="js_add_task(add_task_form, new_task)" data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_saving_task>保&nbsp; 存</button> <button ng-click=js_close(result) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></div></div><div class="popbox-body w_300 part-loading" ng-if=loading_entries></div><div class="popbox-body w_300 pb_0" ng-if="entries.length == 0"><div ng-show="entries.length == 0"><p class="alert alert-info">必须创建列表后才可以创建任务哦！</p></div></div></form></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>设置截止日期</h3></div><div class=popbox-body><ul class="list-inline text-center m_0"><li><a href=javascript:; ng-click="js_set_expire_date(\'today\')">今天</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'tomorrow\')">明天</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'week\')">本周</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'next_week\')">下周</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'month\')">本月</a></li></ul><div wt-datepicker=new_task.expire_date select=js_step(0)></div></div></li></ul>'),a.put("/tpl/project/task/pop_archive_entry_menu.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>列表选项</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click=js_unarchive_entry()><i class=icon-xx></i>重新激活列表</a></li></ul></div></li></ul>'),a.put("/tpl/project/task/pop_assign_label.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>设置标签</h3></div><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu"><li class=label-item ng-repeat="label in labels" ng-class="{\'selected\':label.assigned}"><a href=javascript:; class=js-toggle-label-filter ng-click=js_toggle_label(label)><span class="task-label {{label.name}}-label text-center"></span> <span class="label-name pl_10" title={{label.desc}}>{{[label.desc,30 ]| cutstr}}</span></a></li><li ng-show="labels==0"><div class=empty-menu>还未定义标签</div></li><li class=divider></li><li><a ng-click=js_step(1)><i class=icon-tags></i> 定义标签</a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(2)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>定义标签</h3></div><wt-set-project-labels project=project success=set_labels_success()></wt-set-project-labels></li></ul>'),a.put("/tpl/project/task/pop_batch_assignee.html",'<ul class=popbox-step><li class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>分配任务</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><input type=text autofocus ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br><ul class="popbox-menu checkable checkable--popboxmenu"><li class=member-item ng-repeat="member in members | filterMembers:search_user_input" ng-class="{\'selected\':member.assigned_all==1}"><wt-avatar member=member tabindex=-1 ng-click=js_toggle_member(member) name=true atname=true faceclass=plr_5 size=30></wt-avatar></li></ul></div></div></li></ul>'),a.put("/tpl/project/task/pop_batch_set_expiredate.html",'<ul class=popbox-step><li class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>设置截止日期</h3></div><div class=popbox-body><input ng-model=task.expire_date type="hidden"><ul class="list-inline text-center m_0"><li><a href=javascript:; ng-click="vm.js_set_expire_date(\'today\')">今天</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_expire_date(\'tomorrow\')">明天</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_expire_date(\'week\')">本周</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_expire_date(\'next_week\')">下周</a></li><li>|</li><li><a href=javascript:; ng-click="vm.js_set_expire_date(\'month\')">本月</a></li></ul><div wt-datepicker=vm.expire_date class=mt_10></div></div><div class=popbox-footer><a class="btn btn-success mr_15" ng-click=vm.js_set_expire(vm.expire_date)>确定</a> <a class=btn ng-if=vm.has_set_expire_task ng-click=vm.js_cancel_expire()>取消截止时间</a><div class="text-muted mt_13">设置了截止日期的任务将在分配者的日程中<br>显示</div></div></li></ul>'),
a.put("/tpl/project/task/pop_copy_task.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>拷贝任务</h3></div><form class=w5c-form role=form name=formPopCopyTask novalidate="" w5c-form-validate=""><div class="popbox-body w_300"><div class=form-group><div><textarea class="js-task-name form-control ng-pristine ng-valid" placeholder=输入任务内容 required ng-model=new_task.name wt-enter="js_copy_task(add_task_form, new_task)"></textarea></div></div><div ng-if=new_task.show_keeps>保留...<br></div><div class=checkbox ng-if="new_task.label_count > 0"><label><input type=checkbox ng-model=new_task.keep_labels> 标签 ({{new_task.label_count}})</label></div><div class=checkbox ng-if="new_task.member_count > 0"><label><input type=checkbox ng-model=new_task.keep_members> 成员 ({{new_task.member_count}})</label></div><div class=checkbox ng-if="new_task.watcher_count > 0"><label><input type=checkbox ng-model=new_task.keep_watchers> 关注 ({{new_task.watcher_count}})</label></div><div class=checkbox ng-if="new_task.todo_count > 0"><label><input type=checkbox ng-model=new_task.keep_todos> 检查项 ({{new_task.todo_count}})</label></div><div class=checkbox ng-if="new_task.file_count > 0"><label><input type=checkbox ng-model=new_task.keep_attachments> 附件 ({{new_task.file_count}})</label></div><div class=checkbox ng-if="new_task.comment_count > 0"><label><input type=checkbox ng-model=new_task.keep_comments> 评论 ({{new_task.comment_count}})</label></div></div><div class=popbox-footer><button w5c-form-submit=js_copy_task(new_task) data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_copying>保&nbsp; 存</button> <button ng-click=js_close() class="btn btn-link btn-cancel">取&nbsp; 消</button></div></form>'),a.put("/tpl/project/task/pop_delete_task.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>删除任务</h3></div><div class=popbox-body><span>任务删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。</span></div><div class=popbox-footer><button ng-click=js_delete_task() class="btn btn-danger">确定删除</button></div>'),a.put("/tpl/project/task/pop_entry_menu.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>列表选项</h3></div><div class=popbox-body><ul class=popbox-menu ng-if="(global.prj_module.crud | permission:project.permission)"><li><a href=javascript:; ng-click=vm.js_top_open_add_task_composer($event)>新建任务</a></li><li><a ng-click=vm.js_show_batch_action()>批量操作任务</a></li><li><a ng-click=vm.js_archived_all()>归档完成任务</a></li><li class=divider></li><li><a href=javascript:; ng-click=js_step(1)>重命名</a></li><li><a ng-click=vm.js_watcher_entry_toggle() href=javascript:;>关注 <span class="text-muted small-tip ng-scope" ng-if=entry.watched><i class="color_gray fa fa-eye"></i></span></a></li><li class=divider></li><li><a href=javascript:; ng-click=js_step(11)>更多操作</a></li></ul><ul class=popbox-menu ng-if="!(global.prj_module.crud | permission:project.permission)"><li><a ng-click=vm.js_watcher_entry_toggle() href=javascript:;>关注 <span class="text-muted small-tip ng-scope" ng-if=entry.watched><i class="color_gray icon-ok"></i></span></a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>重命名列表</h3></div><form name=edit_entry_form w5c-form-validate="" class=wt-form novalidate><div class=popbox-body><input name=entry_name type=text ng-model=entry_name placeholder=列表名 class="w_260 form-control" required wt-focus></div><div class=popbox-footer><button w5c-form-submit="vm.js_change_name(edit_entry_form, entry_name)" data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_save_ing>保 存</button> <button ng-click=js_close(result) class="btn btn-link btn-cancel">取 消</button></div></form></li><li ng-switch-when=4 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(11)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>归档列表</h3></div><div class=popbox-body><span>列表归档后任务不能再被修改，<br>可以在归档项中重新打开</span></div><div class=popbox-footer><button ng-click=vm.js_archive_entry() class="btn btn-success">确定归档</button></div></li><li ng-switch-when=5 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(11)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>删除列表</h3></div><div class=popbox-body><span>列表删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。</span></div><div class=popbox-footer><button ng-click=vm.js_del_entry() class="btn btn-danger">确定删除</button></div></li><li ng-switch-when=11 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>更多操作</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click=vm.js_to_move_entry()>移动至其他项目</a></li><li><a href=javascript:; ng-click=vm.js_to_copy_entry()>拷贝任务列表</a></li><li class=divider></li><li><a href=javascript:; ng-click=js_step(4)>归档任务列表</a></li><li><a ng-click=js_step(5) href=javascript:;>删除任务列表</a></li></ul></div></li><li ng-switch-when=13 class="popbox-step-li w_355"><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(11)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>移动至其他项目</h3></div><div class=popbox-body><div class=form-group><label class=form-label>选择项目</label><ui-select ng-model=entry_move.dest_project theme=select2 append-to-body=false><ui-select-match placeholder=请选择项目：>{{$select.selected.name}}</ui-select-match><ui-select-choices group-by="\'team_name\'" repeat="project in entry_move_to_prjs | propsFilter: {name: $select.search}"><div class=text-overflow ng-bind-html="project.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class=form-group><button class="btn btn-success mr_15" ng-click=vm.js_move_entry()>移 动</button> <button class="btn btn-link" ng-click=vm.js_move_entry_cancel()>取 消</button></div></div></li><li ng-switch-when=12 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(11)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>拷贝列表</h3></div><div class="popbox-body w_300"><input name=entry_name wt-enter=vm.js_copy_entry(new_entry) ng-model=new_entry.name placeholder=列表名 type=text class="form-control w_260" required autofocus></div><div class=popbox-footer><a class="btn btn-success mr_15" ng-click=vm.js_copy_entry(new_entry) data-loading-text=正在创建... wt-loading-status=is_copying>确 定</a> <a class="btn btn-link btn-cancel" ng-click=js_step(11)>取 消</a></div></li></ul>'),a.put("/tpl/project/task/pop_move_task.html",'<li class="popbox-step-li w_355"><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>移动任务到</h3></div><div class=popbox-body><form name=task_move_form w5c-form-validate="" class=wt-form role=form novalidate><div>选择项目</div><div class=form-group><ui-select ng-change=handle_move_to_prj_change() ng-model=task_move.move_to_prj theme=select2 append-to-body=false><ui-select-match placeholder=请选择项目：>{{$select.selected.name}}</ui-select-match><ui-select-choices group-by="\'team_name\'" repeat="project in task_move.projects | propsFilter: {name: $select.search}"><div class=text-overflow ng-bind-html="project.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div>选择列表</div><div class=form-group><select ng-model=task_move.move_to_entry class=form-control ng-options="entry.name for entry in task_move.entries" required></select></div><div class=form-group><button w5c-form-submit=move_task(task_move_form) data-loading-text=移动中... class="btn btn-success mr_15" wt-loading-status=is_task_moving>移 动</button> <button class="btn btn-link btn-cancel" ng-click=js_close()>取 消</button></div></form></div></li>'),a.put("/tpl/project/task/pop_task_menu.html",'<ul class=popbox-step ng-switch on=vm.step wt-stop-propagation="" ng-if="global.prj_module.crud | permission:project.permission"><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>任务选项</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click=js_step(2)>设置标签</a></li><li><a href=javascript:; ng-click=js_step(1)>分配任务</a></li><li ng-hide=is_add_task><a href=javascript:; ng-click=js_step(4)>添加关注</a></li><li><a ng-click=js_step(3)>设置截止日期</a></li><li ng-hide=is_add_task class=divider></li><li ng-hide=is_add_task><a ng-click=js_step(40)>添加附件</a></li><li ng-hide=is_add_task ng-if="global.prj_module.setting | permission:project.permission"><a ng-click=js_step(50)>设为循环任务</a></li><li ng-hide=is_add_task class=divider></li><li ng-hide=is_add_task><a ng-click=vm.js_archive_task()>归档</a></li><li ng-hide=is_add_task><a ng-click=js_step(30)>更多操作</a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><wt-toggle-members toggle-click="vm.js_toggle_member($event, member, xEntity)" pid=vm.pid type=member entity="task"></li><li ng-switch-when=2 class=popbox-step-li><wt-set-task-labels type=task task=task project=project backfn=js_step(0)></wt-set-task-labels></li><li ng-switch-when=3 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>设置截止日期</h3></div><div class=popbox-body><input ng-model=task.expire_date type="hidden"><ul class="list-inline text-center m_0"><li><a href=javascript:; ng-click=vm.js_today()>今天</a></li><li>|</li><li><a href=javascript:; ng-click=vm.js_tomorrow()>明天</a></li><li>|</li><li><a href=javascript:; ng-click=vm.js_week()>本周</a></li><li>|</li><li><a href=javascript:; ng-click=vm.js_next_week()>下周</a></li><li>|</li><li><a href=javascript:; ng-click=vm.js_month()>本月</a></li></ul><div wt-datepicker=task.expire_date_temp class=mt_10></div></div><div class=popbox-footer><a class="btn btn-success mr_15" ng-click=vm.js_set_expire(task.expire_date_temp)>&nbsp;&nbsp;确 定&nbsp;&nbsp;</a> <a class="btn btn--warning" ng-if="task.expire_date!=0" ng-click=vm.js_cancel_expire()>移除截止日期</a><div class="text-muted mt_13">设置了截止日期的任务将在分配者的日程中<br>显示</div></div></li><li ng-switch-when=4 class=popbox-step-li><wt-toggle-members toggle-click="vm.js_toggle_watch($event, member, xEntity)" pid=vm.pid type=watch entity=task all-member-click="vm.js_watch_all($event, members, xEntity)"></wt-toggle-members></li><li ng-switch-when=5 class="popbox-step-li w_355"><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(30)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>移动任务到</h3></div><div class=popbox-body><form name=task_move_form w5c-form-validate="" class=wt-form role=form novalidate><div>选择项目</div><div class=form-group><ui-select ng-change=vm.js_change_project() ng-model=task_move.project theme=select2 append-to-body=false><ui-select-match placeholder=请选择项目：>{{$select.selected.name}}</ui-select-match><ui-select-choices group-by="\'team_name\'" repeat="project in task_move.projects | propsFilter: {name: $select.search}"><div class=text-overflow ng-bind-html="project.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div>选择列表</div><div class=form-group><select ng-model=task_move.entry class=form-control ng-options="entry.name for entry in task_move.entries" required></select></div><div class=form-group><button w5c-form-submit=vm.move_task(task_move_form) data-loading-text=移动中... class="btn btn-success mr_15" wt-loading-status=is_task_moving>移&nbsp; 动</button> <button class="btn btn-link btn-cancel" ng-click=js_close()>取&nbsp; 消</button></div></form></div></li><li ng-switch-when=6 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(30)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>删除</h3></div><div class=popbox-body><span>任务删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。</span></div><div class=popbox-footer><button ng-click=vm.js_del_task() class="btn btn-danger">确定删除</button></div></li><li ng-switch-when=30 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>更多操作</h3></div><div class=popbox-body><ul class=popbox-menu><li ng-hide=is_add_task><a ng-click=vm.js_show_task_move()><i class=icon-share-alt></i> 移动</a></li><li ng-hide=is_add_task><a ng-click=vm.js_to_copy_task()><i class=icon-copy></i> 拷贝</a></li><li ng-hide=is_add_task><a ng-click=js_step(6) href=javascript:;><i class=icon-trash></i> 删除</a></li></ul></div></li><li ng-switch-when=31 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(30)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>拷贝任务</h3></div><form name=copy_task_form w5c-form-validate="" class=wt-form novalidate role=form><div class="popbox-body w_300"><div class=form-group></div><div><textarea wt-autofocus="" class="js-task-name form-control ng-pristine ng-valid" placeholder=输入任务内容 required ng-model=vm.new_task.name wt-enter="vm.js_copy_task(add_task_form, vm.new_task)"></textarea></div><div ng-if=vm.new_task.show_keeps class="pt_20 color-text-gray">保留以下信息...</div><div class=checkbox ng-if="vm.new_task.label_count > 0"><label><input type=checkbox ng-model=vm.new_task.keep_labels>标签 ({{vm.new_task.label_count}})</label></div><div class=checkbox ng-if="vm.new_task.member_count > 0"><label><input type=checkbox ng-model=vm.new_task.keep_members>成员 ({{vm.new_task.member_count}})</label></div><div class=checkbox ng-if="vm.new_task.watcher_count > 0"><label><input type=checkbox ng-model=vm.new_task.keep_watchers>关注 ({{vm.new_task.watcher_count}})</label></div><div class=checkbox ng-if="vm.new_task.todo_count > 0"><label><input type=checkbox ng-model=vm.new_task.keep_todos>检查项 ({{vm.new_task.todo_count}})</label></div><div class=checkbox ng-if="vm.new_task.file_count > 0"><label><input type=checkbox ng-model=vm.new_task.keep_attachments>附件 ({{vm.new_task.file_count}})</label></div><div class=checkbox ng-if="vm.new_task.comment_count > 0"><label><input type=checkbox ng-model=vm.new_task.keep_comments>评论 ({{vm.new_task.comment_count}})</label></div></div><div class=popbox-footer><button w5c-form-submit="vm.js_copy_task(copy_task_form, vm.new_task)" data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_copying>保&nbsp; 存</button> <button ng-click=js_close(result) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></form></li><li ng-switch-when=40 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>添加附件</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ngf-multiple=true ngf-select ngf-change=vm.js_files_select($files)><i class="fa fa-desktop"></i>本地上传</a></li><li><a href=javascript:; ng-click=js_step(42)>从项目文件选择</a></li><li class=divider></li><li><div class="part-loading mt_12" ng-if=vm.js_uploadbylink_uploading></div><form class="form-inline text-nowarp" role=form ng-show=!vm.js_uploadbylink_uploading><input type=text ng-model=$parent.$parent.vm.uploadlink_url class="form-control input-md" placeholder=粘贴下载链接 wt-autofocus> <button class="btn btn-default plr_10" type=button ng-click=vm.js_uploadbylink($event)>添加</button></form></li></ul></div></li><li ng-switch-when=50 class=popbox-step-li><wt-add-timingtask back=js_step(0) close=js_close() entries=entries task=task></wt-add-timingtask></li><li ng-switch-when=42 class=popbox-step-li><wt-add-attachment-from-file entity=task go-back-further=js_step(40)></wt-add-attachment-from-file></li></ul><div ng-if="!(global.prj_module.crud | permission:project.permission)"><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>任务选项</h3></div><div class=popbox-body><ul class=popbox-menu><li><a ng-click=vm.js_toggle_watch($event,global.me,task) href=javascript:;>关注 <span class="text-muted small-tip ng-scope" ng-if=global.me.watched><i class="color_gray icon-ok"></i></span></a></li></ul></div></div>'),a.put("/tpl/project/task/pop_unarchive_task.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>激活任务</h3></div><div class=popbox-bodywrapper wt-scroll><div class="popbox-body w_260"><div class=part-loading ng-if="vm.part_loading_done==false"></div><ul class=popbox-menu ng-if=vm.part_loading_done><li class=empty-menu ng-if="vm.entries.length==0">当前没有可用的任务列表</li><li ng-repeat="entry in vm.entries"><a href=javascript:; ng-click=vm.js_unarchive_task(entry)><i ng-class="{true:\'icon-ok\',false:\'icon-columns\'}[entry.selected == 1]" class=color_gray></i> <span>{{entry.name}}</span></a></li></ul></div></div>'),a.put("/tpl/project/task/project_archive_tasks.html",'<div class="height-nonav archive-list--area" wt-scroll><dl class=frame data-minheight=116><dd class=frame-dd><div class=archived_entries_panel ng-if="vm.archived_view == \'entry\'"><div class=frame-dt><span class=title>归档列表</span> <a class=pull-right href=javascript:; ng-class="{true: \'active\'}[vm.archived_view==\'task\']" ng-click="vm.js_archive_view_toggle(\'task\')">归档任务</a></div><div ng-if="vm.entries.length > 0"><wt-archive-entry-item ng-repeat="entry in vm.entries"></wt-archive-entry-item></div></div><div class=task-list-panel ng-if="vm.archived_view == \'task\'"><div class=frame-dt><span class=title>归档任务</span> <a class=pull-right href=javascript:; ng-class="{true: \'active\'}[vm.archived_view==\'entry\']" ng-click="vm.js_archive_view_toggle(\'entry\')">归档列表</a></div><div ng-if="vm.tasks.length > 0"><div class=group-list ng-if="vm.tasks.length > 0"><div ng-repeat="task in vm.tasks" class="list_item clearfix"><a class="js-popbox active_botton mt_7" href=javascript:; ng-click="vm.js_show_entry_menu($event, task)" data-placement=left ng-if="global.prj_module.crud | permission:project.permission" tooltip=激活 tooltip-placement=bottom><i class=icon-mail-reply></i></a><wt-task view-type=item show-project=false class=slide-trigger hide_action=true ng-class="mr_55 " ng-click="locator.openTask(task.pid, task.tid)"></wt-task></div></div><div class=part-loading ng-if=!vm.part_loading_done></div><div class=loading-more-panel><button ng-if="!has_no_more && vm.part_loading_done" class=btn ng-click=vm.load_archived_tasks_more() data-loading-text=加载中... wt-loading-status=loading_notice>加载更多...</button></div></div></div><div class=empty-panel ng-if="vm.archived_view == \'task\' && vm.tasks.length == 0 && vm.part_loading_done"><i class=icon-check></i><br><span>还没有归档任务</span></div><div class=empty-panel ng-if="vm.archived_view == \'entry\' && vm.entries.length == 0 && vm.part_loading_done"><i class=icon-columns></i><br><br><span>没有归档的任务列表</span></div></dd></dl></div>'),a.put("/tpl/project/task/tasks.html",'<div ng-if=vm.part_loading_done class="entries_panel js-sortable layout_content_main_nonav" ng-mouseover=vm.js_mouseover_entries_panel($event) ng-mousemove=vm.js_mousemove_entries_panel($event) wt-mousedown-move wt-scroll={&quot;horizontalScroll&quot;:true,&quot;keyboard&quot;:{&quot;enable&quot;:false},&quot;advanced&quot;:{&quot;autoExpandHorizontalScroll&quot;:true,&quot;updateOnContentResize&quot;:false}}><div class=entries_panel_sortarea sortable=vm.entries_sort_options><div id="entry_main_{{ entry.entry_id }}" class="entry wt-scroll-update-trigger" ng-class="{\'entry-selected\':entry.selected == true}" ng-repeat="entry in vm.entries track by entry.entry_id" entry-id={{entry.entry_id}} pos="{{ entry.pos }}"><div class=entry_header ng-class="{\'entry_header_archived\':vm.project_archived}"><i class="wtfont wtf-entryhover" ng-if=!vm.project_archived></i><div class=entry_header_title><h2><span ng-if=!entry.batch_action_flag title={{entry.name}} ng-bind=entry.name></span> <span ng-if=entry.batch_action_flag>批量操作任务</span> <i ng-class="{true:\'icon-eye-open\',false:\'\'}[entry.watched]"></i></h2></div><a href=javascript:; class="js-popbox entry_header_menu" ng-if="(global.prj_module.watch | permission:project.permission)&& (!entry.batch_action_flag)" ng-click=vm.js_show_entry_menu($event,entry) data-placement=bottom data-align=left><i class=icon-play-circle></i></a> <a href=javascript:; class="js-popbox entry_header_menu no_rotate" ng-if=entry.batch_action_flag ng-click="vm.js_batch_close_action($event, entry)" data-placement=bottom data-align=left>取消</a></div><div class=entry-batch-panel ng-if=entry.batch_action_flag><div class=entry-batch-paenl-info><a href=javascript:; ng-click="vm.js_batch_select_all($event, entry)">全选</a> | <a href=javascript:; ng-click="vm.js_batch_select_reverse($event, entry)">反选</a> <span>已选择<strong>{{entry.selected_tasks.length}}</strong>个任务</span></div><hr><ul class=list-col-4><li class="text-center p_5"><button class="btn btn-sm btn-block btn--batch js-popbox" ng-disabled="entry.selected_tasks.length==0" data-placement=bottom ng-click="vm.js_batch_set_expiredate($event, entry)">日&nbsp;期</button></li><li class="text-center p_5"><button class="btn btn-sm btn-block btn--batch js-popbox" ng-disabled="entry.selected_tasks.length==0" data-placement=bottom ng-click="vm.js_batch_set_assignee($event, entry)">分&nbsp;配</button></li><li class="text-center p_5"><button class="btn btn-sm btn-block btn--batch js-popbox" ng-disabled="entry.selected_tasks.length==0" data-placement=bottom ng-click=vm.js_batch_set_labels($event,entry)>标&nbsp;签</button></li><li class="text-center p_5"><button class="btn btn-sm btn-block btn--batch js-popbox" ng-disabled="entry.selected_tasks.length==0" data-placement=bottom ng-click="vm.js_batch_move_task($event, entry)">移&nbsp;动</button></li></ul></div><div class=entry-task-panel id="entry_{{ entry.entry_id }}_scroll" wt-scroll={&quot;axis&quot;:&quot;y&quot;,&quot;mouseWheel&quot;:{&quot;preventDefault&quot;:true},&quot;keyboard&quot;:{&quot;enable&quot;:false},&quot;advanced&quot;:{&quot;updateOnContentResize&quot;:false}} data-maxheight={{vm.entry_maxheight}}><wt-task-composer class=entry-add-top-composer entry=entry new_task=vm.new_task save="vm.js_add_task($event, new_task, entry, isTop);" cancel=vm.js_cancel_composer($event,entry,new_task) show_more=vm.js_show_task_menu($event,entry,new_task) position=top ng-if=entry.task_top_enabled></wt-task-composer><div class="entry-tasks js-sortable" sortable=vm.tasks_sort_options><wt-task ng-repeat="task in entry.tasks track by task.tid" task=task ng-hide=task.is_filter class="right_click_trigger slide-trigger js-popbox wt-scroll-update-trigger" data-placement=bottom data-align=left ng-mouseleave=vm.js_mouseleave_task($event,task,entry) ng-class="{\'task-selected\':(task.selected || locator.xid == task.tid),\'task-selected--batch\':task.selected_batch,\'task-first\':$first,\'task-last\':$last,\'task-last-nocomposer\':($last&&!(global.prj_module.crud | permission:project.permission)) }" droppable=vm.member_drop_options task-entry-id={{task.entry_id}} task-pos={{task.pos}} ng-click=vm.js_open_task_detail($event,task,entry)></wt-task></div><wt-task-composer class="entry-add-bottom-composer wt-scroll-update-trigger" trigger-type=remove trigger-elm="#entry_{{ entry.entry_id }}_scroll" entry=entry new_task=vm.new_task save="vm.js_add_task($event, new_task, entry, isTop);" cancel=vm.js_cancel_composer($event,entry,new_task) show_more=vm.js_show_task_menu($event,entry,new_task) position=bottom ng-if=entry.task_bottom_enabled></wt-task-composer></div><div class=entry-task-footer ng-if="entry.batch_action_flag!=1 && global.prj_module.crud | permission:project.permission"><a href=javascript:; class=js-add-task-composer ng-click="vm.js_open_add_task_composer($event, entry)" ng-if=!entry.task_bottom_enabled><i class="fa fa-plus-circle"></i> 新建任务</a></div></div></div><div class=entry-new ng-show="global.loading_done && (global.prj_module.crud | permission:project.permission)" ng-class="{true:\'entry-add\'}[vm.is_show_add_entry]"><a href=javascript:; ng-show=!vm.is_show_add_entry ng-click="vm.is_show_add_entry = !vm.is_show_add_entry" ng-class="{true:\'entry-add\'}[!vm.is_show_add_entry]"><i class="fa fa-plus-circle"></i> 新建任务列表</a><div ng-show=vm.is_show_add_entry wt-show-edit=vm.is_show_add_entry><div class=form-group><input name=entry_name ng-model=vm.entry_name placeholder=列表名 wt-enter=vm.js_add_entry(vm.entry_name) type=text class=form-control required wt-focus="vm.entry_input_focus"></div><div class=form-group><button ng-click=vm.js_add_entry(vm.entry_name) data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=vm.is_adding_entry>保 存</button> <button ng-click="vm.is_show_add_entry = false" class="btn btn-link btn-cancel">取 消</button></div></div></div></div><div ng-hide=vm.part_loading_done class="part-loading mt_20"></div><ui-view></ui-view>'),a.put("/tpl/project/task/toolbar.html",'<div class=sub_toolbar><div class="btn-group js-popbox mr_5" data-placement=bottom data-align=right ng-if="global.prj_module.crud | permission:project.permission"><button class="btn btn-success btn--fancy" add-entry=vm.trigger_add_entry_pop() pop-new-tasks=vm.add_tasks_success(tasks) pid=project.pid>新建任务</button> <a class="btn btn-success btn--fancy dropdown-toggle" data-toggle=dropdown><i class=icon-caret-down></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; id=btn_new_task add-entry=vm.trigger_add_entry_pop() pop-new-tasks=vm.add_tasks_success(tasks) pid=project.pid><i class=icon-xx></i> 新建任务</a></li><li><a href=javascript:; id=btn_new_entry wt-click=vm.show_add_entry_pop($event)><i class=icon-xx></i> 新建列表</a></li></ul></div><div class="btn-group js-popbox"><a href=javascript:; class="btn btn--fancy" ng-click=vm.show_tasks_filter_detail($event)><span class=color_main ng-if=task_filters.turn_on>开启</span> <span ng-if=!task_filters.turn_on>筛选</span></a> <a class="btn btn--fancy dropdown-toggle" href=javascript:; data-toggle=dropdown><i class=icon-caret-down></i></a><ul class="dropdown-menu pull-right"><li><a href=javascript:; ng-click=vm.filter_tasks_assign_me()><i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[task_filters.type == \'assign_me\']"></i> 分配给我的任务</a></li><li><a href=javascript:; ng-click=vm.filter_tasks_my_watch()><i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[task_filters.type == \'my_watch\']"></i> 我关注的任务</a></li><li><a href=javascript:; ng-click=vm.filter_tasks_my_create()><i ng-class="{true:\'icon-ok\',false:\'icon-xx\'}[task_filters.type == \'my_create\']"></i> 我创建的任务</a></li><li class=divider></li><li><a href=javascript:; ng-click=vm.show_tasks_filter_detail($event)><i class=icon-xx></i> 任务筛选</a></li></ul></div></div>'),a.put("/tpl/project/trash/pop_empty_trash.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=pm.js_close()></button><h3>清空回收站</h3></div><div class=popbox-body><span>回收站里的数据将会永久删除，并且无法恢复。<br>确认要清空回收站？</span></div><div class=popbox-footer><button ng-click=pm.js_empty_trash() class="btn btn-danger">确定清空</button></div>'),a.put("/tpl/project/trash/pop_trash_menu.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=pm.js_close()></button><h3>选项</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click=pm.js_restore() ng-if="entity.etype != \'task\'"><i class="fa fa-undo"></i> 恢复</a></li><li><a href=javascript:; ng-click=pm.js_step(1) ng-if="entity.etype == \'task\'"><i class="fa fa-undo"></i> 恢复</a></li><li ng-if="global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click=pm.js_destory()><i class=icon-trash></i> 彻底删除</a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=pm.js_step(0)></button> <button class="cancel icon-remove" ng-click=pm.js_close()></button><h3>恢复任务到</h3></div><div class=popbox-body><ul class=popbox-menu><li ng-repeat="entry in entries"><a href=javascript:; ng-click=pm.js_restore_task(entry)><span class=fa ng-class="{true:\'fa-check\',false:\'\'}[entry.selected == 1]"></span> <span>{{entry.name}}</span></a></li></ul></div></li></ul>'),a.put("/tpl/project/trash/project_trash.html",'<div class="height-nonav project_trash" wt-scroll><dl class=frame data-minheight=112><dd class=frame-dd><div class=frame-lr-right ng-if="vm.cached_wtobjs.length > 0"><ng-include src="\'/tpl/project/trash/trash_filter.html\'"></ng-include></div><div class=frame-lr-left><div class=frame-dt><span class=title>项目回收站</span></div><div class="empty-panel ml_220" ng-if="vm.wtobjs != null && vm.wtobjs.length == 0 && part_loading_done"><i class="fa fa-trash-o"></i><br><span>还没有任何垃圾</span></div><div class=trash-panel><div class=prj-trash ng-if="vm.wtobjs.length > 0"><div class="wt-row x-item-mark js-popbox right_click_trigger slide-trigger" ng-repeat="wtobj in vm.wtobjs" x-id={{wtobj.entity.eid}}><div class="column column-icon" ng-click="locator.openEntity(project.pid, wtobj.entity);"><i ng-class="{\n'+"                                'task': 'icon-check',\n                                'entry': 'icon-columns',\n                                'file': 'icon-file',\n                                'folder': 'icon-folder-close',\n                                'page': 'icon-file-text',\n                                'event': 'icon-calendar',\n                                'post': 'icon-list-alt'\n                                }[wtobj.entity.etype]\"></i></div><div class=\"column column-name\" ng-click=\"locator.openEntity(project.pid, wtobj.entity);\"><span class=name>{{wtobj.entity.name}}</span></div><div class=\"column column-date\" ng-click=\"locator.openEntity(project.pid, wtobj.entity);\"><span>{{wtobj.actor.name}} 删除于 {{wtobj.delete_date | timeFormatZHCN}}</span></div><div class=\"column column-menu\"><a href=javascript:; class=\"js-popbox trash-item-menu\" ng-if=\"global.prj_module.crud | permission:project.permission\" ng-click=\"vm.js_show_trash_menu($event, wtobj)\"><i class=icon-play-circle></i></a></div></div></div></div></div></dd></dl></div>"),a.put("/tpl/project/trash/trash_filter.html",'<dl class=dl-filter><div class=plr_20 ng-if="global.prj_module.setting | permission:project.permission"><button class="btn w_100p mt_20" ng-click=vm.js_clear_trash($event)><i class="fa fa-recycle"></i> 清空回收站</button><hr></div><dt><span class=title>按类型筛选</span></dt><dd><ul class=checkable><li ng-class="{true: \'selected\'}[filter_type ==0]" ng-click=vm.js_filter(0)><a href=javascript:;>全部</a></li><li ng-class="{true: \'selected\'}[filter_type ==1]" ng-click=vm.js_filter(1)><a href=javascript:;>任务</a></li><li ng-class="{true: \'selected\'}[filter_type ==2]" ng-click=vm.js_filter(2)><a href=javascript:;>话题</a></li><li ng-class="{true: \'selected\'}[filter_type ==3]" ng-click=vm.js_filter(3)><a href=javascript:;>文件</a></li><li ng-class="{true: \'selected\'}[filter_type ==4]" ng-click=vm.js_filter(4)><a href=javascript:;>文档</a></li></ul></dd></dl>'),a.put("/tpl/single_page/share.html",'<div class=single-panel wt-scroll data-maxheight=0><div class=share-panel><br><br><h3 class=mb_100>推荐 <span>Worktile</span> 给你的小伙伴们</h3><div id=share-wohoo></div><div class="share-section share-desc"><ol><li><span class=list-number>1</span>复制此链接：<br><input class=recommend_url type=text ng-model=vm.recommend_url wt-click-select readonly="readonly"></li><li><span class=list-number>2</span>通过QQ，微博，Email等方式将以上链接分享给您的小伙伴，邀请他们加入 Worktile</li><li><span class=list-number>3</span>或者扫一扫下面的二维码，通过微信邀请您的小伙伴加入 Worktile</li></ol></div><div class="share-section share-result"><p ng-if="vm.my_referrals.length==0" class=text-center><i class=icon-info-sign></i> &nbsp; 您还没有成功邀请小伙伴加入，快去邀请吧！</p><fieldset ng-if="vm.my_referrals.length>0"><legend>已接受邀请的朋友 <em>（{{vm.my_referrals.length}}个）</em></legend><wt-avatar member=user size=50 ng-repeat="user in vm.my_referrals"></wt-avatar></fieldset></div><div class="share-section weixin-share"><h4>微信分享</h4><div><p>用微信扫描右侧二维码<br>分享到朋友圈</p><p class=qrcode wt-disable-drag="" ng-bind-html=vm.qrcode></p></div></div><div class="share-section social-share"><h4>微博分享</h4><div><a target=_blank class="btn btn-danger btn-lg" href="http://v.t.sina.com.cn/share/share.php?appkey=worktile-appkey&title=Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。了解更多请点击  {{vm.recommend_url}} @Worktile&pic=http://wt-all.oss-cn-hangzhou.aliyuncs.com/blog/worktile.jpg"><i class=icon-weibo></i> 新浪微博</a> &nbsp; 　　&nbsp; <a target=_blank class="btn btn-primary btn-lg" href="http://share.v.t.qq.com/index.php?c=share&a=index&url=http://worktile.com&pic=http://wt-all.oss-cn-hangzhou.aliyuncs.com/blog/worktile.jpg&appkey=801421649&title=Worktile是一款简单好用的团队协同、项目管理工具，为团队协同而打造，使用它可以方便的进行项目管理，提高团队工作效率，团队成员之间无缝沟通，更有文件共享和在线文档协作。了解更多请点击 {{vm.recommend_url}}  @Worktile"><img src=/img/share/share-qqweibo-logo.png width=25 height="25"> 腾讯微博</a></div></div><div class="share-section mail-share"><h4>发送邮件给你的小伙伴</h4><div class="pt_45 clearfix"><form class="form-horizontal wt-form" role=form name=share_friend_form novalidate w5c-form-validate="" wt-enter=js_invite_enter($event,invite_member_form)><div class=form-group><div class=col-xs-8><input type=email required="" class="form-control col-xs-3" placeholder=输入邮箱地址 ng-model=share_email name=share_email type=email></div><div class=col-xs-4><button w5c-form-submit=js_send_share_email(share_friend_form) type=button class="btn btn-success mr_15" data-loading-text=发送中... wt-loading-status=is_sending>发送邀请</button></div></div><dl><dt>邮件预览</dt><dd><div class="col-xs-8 pl_0"><textarea required="" class="message form-control help-block" rows=4 ng-model=share_desc name=share_desc>\n                                </textarea></div></dd><dd><div class="col-xs-8 pl_0"><div class="alert alert-danger mt_12" ng-show="share_friend_form.$errors.length > 0"><i class=icon-remove-sign></i> <span ng-bind=share_friend_form.$errors[0]></span></div></div></dd></dl></form></div></div></div></div>'),
a.put("/tpl/team/dialog_team_invite_contact.html",'<div class="dialog dialog-team-invite-contact"><header class="dialog-head border-bottom"><span class=dialog-close><i class="wtfont wtf-close" ng-click=js_close()></i></span><div class=dialog-title>邀请联系人加入团队</div></header><div class=dialog-body><div class=part-loading ng-hide=vm.part_loading_done></div><div ng-show=vm.part_loading_done><div class=contact_member_select_area><div class=contact_member_search><span><i class="wtfont wtf-search"></i><input ng-model=search_user_input type=text placeholder="输入名字查找"></span></div><div class=contact_member><ul class=clearfix ng-hide="contact_members_filtered_results.length==0"><li class=flex_row ng-class="{\'selected\':member.selected}" ng-repeat="member in contact_members_filtered_results = ( vm.contact_members | filterMembers:search_user_input)" ng-click=vm.js_contact_selected_toggle(member.uid)><wt-avatar member=member size=40 class=member_pic></wt-avatar><span class="member_name flex_se1">{{[member.display_name,10]|cutstr}}</span> <i class="fa fa-check-circle-o"></i></li></ul><div class="empty-panel pt_20 pb_20" ng-show="contact_members_filtered_results.length==0"><span>未找到符合条件的联系人</span></div></div></div><div class="mt_10 mb_10 color-text-gray">您已选择了 {{vm.contact_members_selected.length}} 个联系人</div><div class=al_c><button class="btn btn-success" ng-click=vm.js_send_invite() wt-loading-status=vm.saving data-loading-text=邀请中...>发送邀请</button> <button class="btn btn-link btn-cancel w_120" ng-click=js_close()>取消</button></div></div></div></div>'),a.put("/tpl/team/free_apply.html",'<div class=mod-navbar><div class=main><div class=title><h3><i class="icon-heart mr_10"></i>申请公益版</h3></div></div></div><div class="common-content-panel feedback-panel height-nonav" wt-scroll><div class=content-container><div class=content><div class=content-wrapper><div class=content-title>申请公益版</div><div ng-hide="apply_success || !global.loading_done" class=mt_12><form class="form-horizontal wt-form" w5c-form-validate="" name=free_apply_form novalidate><div class=form-group><label class="col-xs-2 control-label">团队类型：</label><div class=col-xs-10><div class="radio radio-inline"><label><input type=radio name=team_type ng-model=team_type value=1 checked=checked>公益组织</label></div><div class="radio radio-inline"><label><input type=radio name=team_type ng-model=team_type value=2>学生社团</label></div><div class="radio radio-inline"><label><input type=radio name=team_type ng-model=team_type value=3>开源项目团队</label></div></div></div><div class=form-group><label class="col-xs-2 control-label">申请团队：</label><div class=col-xs-10><select name=selected_team class=form-control required="" ng-model=selected_team ng-options="t.name for t in owner_teams"><option value="">-- 选择团队 --</option></select><p class="alert alert-info mb_0 mt_12" ng-show="owner_teams && owner_teams.length == 0"><i class="icon icon-info-sign mr_5"></i>你还没有自己的团队，立即 <a href=/teams/add>创建团队吧</a>！</p></div></div><div class=form-group><label class="col-xs-2 control-label">简单描述：</label><div class=col-xs-10><textarea name=apply_team_desc ng-model=team_desc class=form-control required="" placeholder=为你的团队做个简单的介绍，最好提供团队的官方微博或网站。 rows=5></textarea></div></div><div class=form-group ng-show="free_apply_form.$errors.length > 0"><div class=col-xs-2></div><div class=col-xs-10><div class="alert alert-danger mb_0"><i class=icon-remove-sign></i> {{free_apply_form.$errors[0]}}</div></div></div><div class=form-group><div class=col-xs-2></div><div class=col-xs-10><button type=button w5c-form-submit=js_free_apply(free_apply_form) data-loading-text=申请中... wt-loading-status=is_applying class="btn btn-success btn-sure">立即申请</button></div></div></form></div><div class=success-panel ng-show=apply_success><i class=imgicon-success></i><br><br><span>非常感谢你对Worktile的关注，你的公益版申请已经收到，我们会尽快审核</span></div></div></div><div class=sidebar><div class=sidebar-widget><h4>常见问题</h4><ul><li>1. 公益版免费期限1年，到期后需要重新提交申请</li><li>2. 公益版的团队成员人数上限是100人</li><li>3. 公益版目前支持学生社团、公益组织和开源团队</li><li>4. 请尽量提供官方微博或官方网站</li></ul></div><div class=sidebar-widget><h4>支持</h4><ul><li><i class=icon-weibo></i> <a href=http://weibo.com/worktile>微博：@Worktile</a></li><li><i class=icon-envelope-alt></i> <a href=mailto:support@worktile.com>邮箱：support@worktile.com</a></li><li><i class=icon-phone></i> <a href=javascript:;>电话：400-805-6966</a></li><li><i class=icon-linux></i> <a href=javascript:;>QQ群：110257147</a></li></ul></div></div></div></div>'),a.put("/tpl/team/pop_add_team_stats.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>添加项目统计</h3></div><form name=add_project_form w5c-form-validate="" class=w5c-form novalidate="" role=form><div class="popbox-body w_300"><div class=form-group><label>选择项目：</label><ui-select name=projectTeam ng-model=vm.project_select theme=select2 append-to-body=false ng-change=vm.js_select_project() ng-click=vm.js_select_click() class="{{vm.project_not_select?\'error\':\'\'}}"><ui-select-match placeholder=请选择添加项目：>{{$select.selected.name}}</ui-select-match><ui-select-choices group-by="\'team_name\'" repeat="project.pid as project in vm.projects | propsFilter: {name: $select.search}"><div class=text-overflow ng-bind="project.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div><label>统计类型：</label><ul class=checkable--box><li ng-repeat="stats_type in vm.stats_type" class=w_50p ng-class="{\'selected\':([vm.stats_type_select,$index+1]|indexOf),\'disable\':stats_type.disable}"><a href=javascript:; ng-click=vm.js_select_stats($event,$index+1)><i class=wtfont ng-class=stats_type.icon></i><br>{{stats_type.desc}}</a></li></ul></div></div><div class=popbox-footer ng-if="vm.projects.length > 0"><button class="btn btn-success btn-block" wt-loading-status=vm.pop_add_loading data-loading-text=添加中... w5c-form-submit=vm.js_add_stats()>添 &nbsp;加</button></div></form>'),a.put("/tpl/team/pop_new_project.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>创建项目</h3></div><div class="popbox-body w_300"><div><form name=add_project_form w5c-form-validate="" class=w5c-form novalidate="" role=form><div class=form-group><div><input name=projectName ng-model=new.name wt-autofocus="" placeholder=请输入项目名称 class=form-control type=text required></div></div><div class=form-group><select ng-change=get_now_visibilities() name=projectTeam class=form-control ng-model=new.team_id required="" ng-disabled=teamAddObj.isTeamDisabled ng-options="team.team_id as team.name for team in teams"><option value="" selected=selected>请选择所属团队</option></select></div><div class=form-group><select class=form-control name=projectVisibility ng-model=new.visibility required="" ng-options="item.id as item.name for item in visibilities"><option value="" selected=selected>请选择公开性</option></select></div><div class=form-group><button wt-loading-status=new.is_loading data-loading-text=创建中... w5c-form-submit=js_do_new_project() href=javascript:; class="btn btn-success w_120">创&nbsp; 建</button> <a ng-click=js_close() class="btn btn-link btn-cancel">取 &nbsp;消</a></div></form><div class=divider></div><a class="create-prj-footer fs_12" href=https://worktile.com/template target=_blank><i class="fa fa-info-circle"></i> 如何规划项目？前往项目模板仓库查看</a></div></div>'),a.put("/tpl/team/pop_new_team.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>创建团队</h3></div><div class="popbox-body w_360"><form name=add_team_form w5c-form-validate="" class=wt-form novalidate><div class=form-group><label class=control-label>团队名称：</label><div><input name=team_name ng-model=new.name placeholder=团队名称 class=form-control type=text wt-focus=should_focus required></div></div><div class=form-group><label for=new-team-industry class=control-label>所属行业：</label><div><select class=form-control name=team_industry id=new-team-industry ng-model=new.industry ng-options="key as industries[key] for key in industry_keys" required=""><option value="">请选择所属行业</option></select></div></div><div class=form-group><label class=control-label>团队描述：</label><div><textarea name=team_description ng-model=new.description placeholder=为团队添加简短描述（可选） rows=4 class=form-control></textarea></div></div><div class=form-group ng-if="add_team_form.$errors.length > 0"><div class="alert alert-danger"><i class=icon-remove-sign></i> {{add_team_form.$errors[0]}}</div></div><div><button w5c-form-submit=js_do_new_team(add_team_form) class="btn btn-success mr_15" data-loading-text=保存中... wt-loading-status=new.is_loading>创建</button> <button ng-click=js_close() class=btn>取消</button></div></form></div>'),a.put("/tpl/team/pop_team_info.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>团队信息</h3></div><div class=popbox-bodywrapper wt-scroll><div class="popbox-body w_300"><ul class=popbox-menu><li><a href=javascript:;><i class=icon-sitemap></i> 所属行业<br><span class="color_gray pl_20">{{team.industry | teamIndustries}}</span></a></li><li class=divider></li><li><a href=javascript:;><i class="fa fa-clock-o"></i> 创建时间<br><span class="color_gray pl_20">{{team.create_date|dateFormatZHCN}}</span></a></li><li class=divider></li><li><a href=javascript:;><i class=icon-info-sign></i> 团队描述<br><span class="color_gray pl_20">{{ {true:\'团队没有描述\', false: team.desc }[team.desc==\'\'] }}</span></a></li></ul></div></div>'),a.put("/tpl/team/pop_team_invite_qr_code.html",'<div class="pop_team_invite_qr_code p_15"><img width=100 src={{url}} alt="团队邀请二维码"></div>'),a.put("/tpl/team/pop_team_list.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>我的团队</h3></div><div class=popbox-avatar><div class="avatar-body w_300"><ul class=popbox-menu><li ng-repeat="team in teams"><a href=/teams/{{team.team_id}}>{{team.name}} <span class="edition in-list" ng-class="{1:\'edition-free\', 2:\'edition-business\', 3:\'edition-nonprofit\'}[team.edition]">{{team.edition | teamEdition }}</span></a></li></ul></div><div class=avatar-footer><a href=/account/teams><i class="icon-sitemap mr_5"></i>团队管理</a></div></div>'),a.put("/tpl/team/pop_team_project_setting.html",'<ul class=popbox-step ng-switch on=vm.step><li ng-switch-default class=popbox-step-li><div class="popbox-header popbox-header--project"><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3><i class={{vm.project.pic}} ng-style={color:vm.project.bg}></i> <span ng-bind=[vm.project.name,18]|cutstr></span> <i ng-class="{1:\'icon-private\',2:\'icon-protected\',3:\'icon-public\'}[vm.project.visibility]"></i></h3><p class=color_gray ng-bind="{true:\'项目没有描述\',false:vm.project.desc}[vm.project.desc==\'\']"></p></div><div class=avatar-footer><ul class="ul-vertical ul-vertical--small"><li><a class=item href=javascript:; ng-click=vm.js_step(1)><i class="fa fa-wrench"></i> 设置项目负责人</a><hr class="popbox-hr"></li><li><a class=item href=javascript:; ng-click=vm.js_step(2);><i class="fa fa-user-plus"></i> 添加成员</a></li></ul></div></li><li ng-switch-when=1><div class=popbox-header><button class="back icon-chevron-left" ng-click=vm.js_step(0)></button> <button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>设置项目负责人</h3></div><div class=popbox-bodywrapper wt-scroll><div ng-if=!vm.loading_project_members_done class="part-loading mt_12"></div><div ng-if=vm.loading_project_members_done class=popbox-body><div class=empty-menu ng-if="vm.project_members.length==0">没有能添加为负责人的成员</div><div ng-show="vm.project_members.length>0"><input type=text wt-focus=2500 name=search_user_input ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br></div><ul class="popbox-menu checkable checkable--popboxmenu" ng-if="vm.project_members.length>0"><li class=member-item ng-repeat="member in vm.project_members|filterMembers:search_user_input" ng-class="{\'selected\':(!!member.checked)}"><wt-avatar member=member name=[member.display_name,16]|cutstr faceclass=plr_5 ng-click=vm.js_toggle_project_member(member) atname=true size=28></wt-avatar></li></ul></div></div><div class=popbox-footer ng-if="vm.loading_project_members_done&&vm.project_members.length>0"><div class=pt_20><button class="btn btn-block" ng-click=vm.set_project_admin()>添 &nbsp;加</button></div></div></li><li ng-switch-when=2><div class=popbox-header><button class="back icon-chevron-left" ng-click=vm.js_step(0)></button> <button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>添加成员</h3></div><div class=popbox-bodywrapper wt-scroll><div ng-if=!vm.loading_team_members_done class="part-loading mt_12"></div><div ng-if=vm.loading_team_members_done class=popbox-body><div class=empty-menu ng-if="vm.unassigned_team_members.length==0&&vm.unassigned_team_visitors.length==0">没有能添加为项目成员的团队成员</div><div ng-show="vm.unassigned_team_members.length>0||vm.unassigned_team_visitors.length>0"><input type=text wt-focus=2500 name=search_user_input ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br></div><ul class="popbox-menu checkable checkable--popboxmenu" ng-if="vm.unassigned_team_members.length>0||vm.unassigned_team_visitors.length>0"><li class=member-item ng-repeat="member in vm.unassigned_team_members|filterMembers:search_user_input" ng-class="{\'selected\':(!!member.checked)}"><wt-avatar member=member name=[member.display_name,16]|cutstr faceclass=plr_5 ng-click=vm.js_toggle_project_member(member) atname=true size=28></wt-avatar></li><li class=member-item ng-repeat="member in vm.unassigned_team_visitors|filterMembers:search_user_input" ng-class="{\'selected\':(!!member.checked)}"><wt-avatar member=member name=[member.display_name,16]|cutstr faceclass=plr_5 ng-click=vm.js_toggle_project_member(member) atname=true size=28></wt-avatar></li></ul></div></div><div class=popbox-footer ng-if="vm.unassigned_team_members.length>0||vm.unassigned_team_visitors.length>0"><div class=pt_20><button class="btn btn-block" ng-click=vm.add_project_members()>添 &nbsp;加</button></div></div></li></ul>'),a.put("/tpl/team/pop_transfer_team.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>选择转让的成员</h3></div><div class=popbox-body><input type=text autofocus="" ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br><div class=part-loading wt-loading-done=members_loading_done></div><ul class="popbox-menu max-h300" wt-scroll=""><li class=member-item ng-repeat="member in team_members | filterMembers:search_user_input"><a href=javascript:; tabindex=-1 ng-click=js_to_transfer_confirm(member)><wt-avatar member=member name=true atname=true size=30 faceclass=plr_5></wt-avatar></a></li><li class=empty-menu-nomin-h ng-show="members_loading_done && (team_members | isNullOrEmpty)">没有可以转让的团队成员</li></ul></div></li></ul>'),a.put("/tpl/team/team.html",'<div class=layout_content><div class=layout_content_main><div class=mod-navbar ng-if="vm.public_team!=null"><div class=main><div class=title><h3><i class="wtfont wtf-team"></i> <span ng-bind=[vm.public_team.info.name,40]|cutstr></span></h3><a href=javascript:; class=ml_15 tooltip-placement=bottom tooltip="{{vm.public_team.info.visibility | teamVisibility}}" show-team-visibility-options ng-click=show($event)><i ng-class="{\'icon-private\':vm.public_team.info.visibility==1,\'icon-public\':vm.public_team.info.visibility==2}"></i></a></div></div></div><div class=mod-navbar ng-if="team!=null"><div class=main><div class=title ng-if=!vm.display_team_setting><h3><i class="wtfont wtf-team"></i> <a href=javascript:; class="js-popbox team_name" data-placement=bottom data-align=left ng-click=vm.js_view_team_info($event); ng-bind=[team.name,40]|cutstr></a></h3><a href=javascript:; class=ml_15 tooltip-placement=bottom tooltip="{{team.visibility | teamVisibility}}" show-team-visibility-options ng-click=show($event)><i ng-class="{\'icon-private\':team.visibility == 1,\'icon-public\':team.visibility == 2}"></i></a></div><div class=title ng-if=vm.display_team_setting><h3><i class="wtfont wtf-team"></i>团队设置</h3></div><div class=main_toolbar><a href=javascript:; ng-if="!vm.user_is_team_admin && !vm.display_team_setting" ng-click=vm.js_toggle_filter(null) ui-sref=team.setting ui-sref-active=active><i class="fa fa-cog fs_18"></i>&nbsp; <span class=fs-16>设&nbsp;置</span></a> <a href=javascript:; ng-if="vm.user_is_team_admin && !vm.display_team_setting" ng-click="vm.js_toggle_filter(null);vm.display_team_setting = true" ui-sref=team.admin ui-sref-active=active><i class="fa fa-cog fs_18"></i>&nbsp; <span class=fs-16>设&nbsp;置</span></a> <a href=javascript:; class=fs-16 ng-if=vm.display_team_setting ng-click="vm.display_team_setting = false" ui-sref=team.dashboard ui-sref-active=active>返回团队</a></div></div><div class=sub ng-if=!vm.display_team_setting><ul class=mod_subnav><li ng-if="global.team_module.view_base | permission:team.permission"><a ui-sref=team.dashboard ui-sref-active=active ng-click=vm.js_toggle_filter(null)>主页</a></li><li ng-if="global.team_module.view_base | permission:team.permission"><a ui-sref=team.members ui-sref-active=active ng-click=vm.js_toggle_filter(null)>成员</a></li><li ng-if="global.team_module.view_base | permission:team.permission"><a ui-sref=team.projects ui-sref-active=active ng-click=vm.js_toggle_filter(null)>项目</a></li><li ng-if="global.team_module.view | permission:team.permission"><a ui-sref=team.tasks ui-sref-active=active ng-click=vm.js_toggle_filter(null)>任务</a></li><li ng-if="global.team_module.view | permission:team.permission"><a ui-sref=team.calendar ui-sref-active=active ng-click=vm.js_toggle_filter(null)>日历</a></li></ul><div class=sub_toolbar><div class=mr_5><a href=javascript:; class="btn btn--fancy" ng-if="vm.state.current.name==\'team.calendar\'" ng-click=vm.js_toggle_team_filter()>筛选</a></div></div></div><div class=sub ng-if="vm.display_team_setting && vm.user_is_team_admin"><ul class=mod_subnav><li ng-if=vm.user_is_team_owner><a ui-sref=team.admin.basic ui-sref-active=active>基本设置</a></li><li ng-if=vm.user_is_team_owner><a ui-sref=team.admin.custom ui-sref-active=active>个性化</a></li><li><a ui-sref=team.admin.members ui-sref-active=active>成员管理</a></li><li ng-if=vm.user_is_team_owner><a ui-sref=team.admin.projects ui-sref-active=active>项目管理</a></li><li ng-if=vm.user_is_team_owner><a ui-sref=team.admin.security ui-sref-active=active>安全日志</a></li><li ng-if=!vm.user_is_team_owner><a ui-sref=team.setting ui-sref-active=active>退出团队</a></li></ul></div><div class=sub ng-if="vm.display_team_setting && !vm.user_is_team_admin"><ul class=mod_subnav><li><a ui-sref=team.setting ui-sref-active=active>退出团队</a></li></ul></div></div><div class=height-nonav ng-class="{\'height-nonav--notab\':vm.public_team}" wt-scroll><ui-view></ui-view></div></div><ui-view name=sidebar wt-sidebar-toggle=vm.teamCalendarFilterData.team_calendar_filter_status></ui-view></div>'),a.put("/tpl/team/team_admin.html","<dl class=frame data-minheight=112><dd class=frame-dd><ui-view></ui-view></dd></dl>"),a.put("/tpl/team/team_admin_basic.html",'<div class="part-loading mt_20" ng-hide=part_loading_done></div><div ng-show=part_loading_done><div class="fs_17 pb_14">基本设置</div><div><dl class=dl-form><dt>团队信息 <span class=dl-form-desc>可以修改团队名称、团队描述和所属行业；团队信息会在团队列表和团队主页中显示。</span></dt><dd><div class=settings><ul class=dl-form-ul ng-hide=editing_team_info><li><span class=dl-form-li-title>团队名称</span> <span ng-bind=team.name></span></li><li><span class=dl-form-li-title>行&nbsp;业</span> <span ng-bind="industries[team.industry]||\'(尚未填写)\'"></span></li><li><span class=dl-form-li-title>创建时间</span> <span ng-bind=team.create_date|dateFormatZHCN></span></li><li><span class=dl-form-li-title>描&nbsp;述</span> <span ng-bind=team.desc></span></li></ul><button ng-hide=editing_team_info class="btn mt_28" ng-click=js_toggle_edit_team_info()>修改团队信息</button><form name=team_set_form ng-if=editing_team_info w5c-form-validate="" class="form wt-form form-horizontal w_660" novalidate><div class=form-group><label class=sr-only>团队名称</label><div class=col-xs-10><input name=team_name type=text ng-model=vm.name placeholder=团队名称 class=form-control required autofocus></div></div><div class=form-group><label for=team-industry class=sr-only>行业</label><div class=col-xs-10><select class=form-control name=team_industry id=team-industry ng-model=vm.industry ng-options="key as industries[key] for key in industry_keys" required=""><option value="" selected=selected disabled=disabled>请选择所属行业：</option></select></div></div><div class=form-group><label class=sr-only>团队描述</label><div class=col-xs-10><textarea rows=4 ng-model=vm.desc class=form-control placeholder=为团队添加简短描述（可选）></textarea></div></div><div class=mt_28><button data-loading-text=保存中... w5c-form-submit="js_set_team(team_set_form, name, desc, url)" class="btn btn-success" wt-loading-status=is_team_saveing>确&nbsp; 定</button> <button class="btn btn-link btn-cancel" ng-click=js_toggle_edit_team_info()>取&nbsp; 消</button></div></form></div></dd></dl><dl class=dl-form><dt>团队公开性 <span class=dl-form-desc>私有团队只有成员可以访问；<br>公开团队可让所有注册用户访问。</span></dt><dd><ul class=dl-form-ul ng-hide=editing_visibility><li><span class=dl-form-li-title>当前状态</span> <span class=text><span ng-bind=team.visibility|teamVisibility></span> <i ng-class="{\'icon-private\':team.visibility == 1,\'icon-public\':team.visibility == 2}"></i></span></li></ul><button ng-hide=editing_visibility class="btn mt_28" ng-click=js_toggle_edit_visibility()>编辑公开性</button><div ng-switch=visibility_step ng-if=editing_visibility><div ng-switch-when=1><div class=form-group><label class=sr-only for=team_visibility>团队公开性</label><select id=team_visibility class="form-control ng-valid-required w_360" ng-model=vm.visibility ng-options="p.value as p.description for p in visibilities"></select></div><div class=mt_28><button class="btn btn-danger" ng-click=js_visibility_step(2)>更&nbsp; 改</button> <button class="btn btn-link btn-cancel" ng-click=js_visibility_cancel()>取&nbsp; 消</button></div></div><div ng-switch-when=2><div class=title><h4>输入帐户密码</h4></div><wt-confirm-password class=w_360 confirm-cancel=js_visibility_step(1) confirm-success=js_visibility_step(3)></wt-confirm-password></div><div ng-switch-when=3><div class=title><h4>确认更改团队公开性</h4></div><div class="alert alert-info w_660"><span><i class="icon icon-info-sign mr_5"></i> <span>确认要把当前团队改成</span> <strong ng-bind=vm.visibility|teamVisibility></strong>么？</span></div><div class=mt_28><button class="btn btn-danger" data-loading-text=正在变更中... wt-loading-status=saving_visibility ng-click=js_update_visibility()>确&nbsp; 认</button> <button class="btn btn-link btn-cancel" ng-click=js_visibility_step(1)>取&nbsp; 消</button></div></div></div></dd></dl><dl class=dl-form><dt>转让团队 <span class=dl-form-desc>转让其他成员后，将无法再管理当前团队。该操作无法撤消。</span></dt><dd><ul class=dl-form-ul ng-hide="transfer_step>1"><li><span class=dl-form-li-title>所有者</span><wt-avatar member=team.owner name=true atname=true size=30 faceclass=plr_5></wt-avatar></li></ul><button ng-hide="transfer_step>1" class="btn mt_28 js-popbox" data-placement=right data-align=bottom ng-click=js_transfer_pop($event)>转让团队</button><div ng-switch=transfer_step ng-if="transfer_step>1"><div ng-switch-when=2><div class=title><h4>输入帐户密码</h4></div><wt-confirm-password class=w_360 confirm-cancel=js_transfer_step(1) confirm-success=js_transfer_step(3)></wt-confirm-password></div><div ng-switch-when=3><div class=title><h4>确认转让当前团队</h4></div><div class="alert alert-info w_660"><span><i class="icon icon-info-sign mr_5"></i> 确认要把当前团队转让给 {{ selected_member.display_name }} 么？</span></div><div class=form-group><button class="btn btn-danger" data-loading-text=正在转让中... wt-loading-status=is_transferring ng-click=js_transfer()>确认转让</button> <button class="btn btn-link" ng-click=js_transfer_step(1)>取消</button></div></div></div></dd></dl><dl class="dl-form team_admin_dismiss_wrap"><dt>解散团队 <span class=dl-form-desc>解散后所有数据都将被彻底删除，此操作无法撤消，请谨慎。</span></dt><dd><button ng-hide="dismiss_step>1" class="btn btn-danger" data-placement=right data-align=top ng-click=js_dismiss_step(2) wt-scroll-foucs=.team_admin_dismiss_wrap>解散当前团队</button><div ng-if="dismiss_step>1" ng-switch=dismiss_step><div class=panel-section ng-switch-when=2><div class=title><h4>输入帐户密码</h4></div><wt-confirm-password class=w_360 confirm-cancel=js_dismiss_step(1) confirm-success=js_dismiss_step(3)></wt-confirm-password></div><div class=panel-section ng-switch-when=3><div class=title><h4>确认解散当前团队</h4></div><div class="alert alert-info w_660"><span><i class="icon icon-info-sign mr_5"></i>解散团队后，团队成员将不能访问该团队的一切数据。确认解散当前团队吗？</span></div><div class=form-group><button class="btn btn-danger" data-loading-text=正在解散中... wt-loading-status=is_dismissing ng-click=js_dismiss()>确认解散</button> <button class="btn btn-link" ng-click=js_dismiss_step(1)>取消</button></div></div></div></dd></dl></div></div>'),a.put("/tpl/team/team_admin_billing.html",'<div class=layout_content><div class=layout_content_sidebar><ng-include src="\'/tpl/team/team_admin_sidebar.html\'"></ng-include></div><div class=layout_content_main wt-scroll><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class=center-panel-container ng-show=global.loading_done><div class=panel-section><h4>账单记录</h4><div class=option-block><div class="account-info mr_15">累计扣费：<span class=number>￥{{sub.fee}}</span></div></div></div><div class="panel-section table-list"><table class="table table-hover table-bordered"><thead><tr><th>日期</th><th>账单号</th><th>成员人数</th><th>价格</th><th>金额</th></tr></thead><tbody><tr ng-repeat="billing in billings"><td>{{billing.transaction_date | timeFormatZHCN}}</td><td>{{billing.billing_no}}</td><td>{{billing.quantily}}</td><td>{{billing.price | currency:"￥"}}</td><td>{{billing.amount | currency:"￥"}}</td></tr><tr ng-show="billings.length == 0"><td colspan=5>还没有账单记录</td></tr></tbody></table></div></div></div></div>'),a.put("/tpl/team/team_admin_billing_details.html",""),a.put("/tpl/team/team_admin_change_quota.html",'<div class=layout_content><div class="layout_content_main no_sidebar"><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class=center-panel-container><dl class=frame data-minheight=112><dt class=frame-dt><ng-include src="\'/tpl/team/team_admin_tabs.html\'"></ng-include></dt><dd class=frame-dd><div class="part-loading mt_20" ng-hide=part_loading_done></div><div class=panel-section ng-show=part_loading_done><div class="center-box normal-box"><i class="center-box-icon icon-group"></i><h5>修改团队成员配额</h5><input wt-enter=js_change_team_quota() wt-focus-event=js_team_quota_focus() ng-model=team_quota type=text class=form-control placeholder="请输入团队配额人数"><p class="alert alert-danger" ng-show="change_quota_error.length > 0"><i class=icon-remove-sign></i> {{change_quota_error}}</p><button class="btn btn-success btn-upgrade btn-block" ng-click=js_change_team_quota() data-loading-text=修改... wt-loading-status=is_changing>修改配额</button> <span class=tips>如需帮助，请拨打 010-84787492 联系我们</span></div></div></dd></dl></div></div></div>'),a.put("/tpl/team/team_admin_consultant.html",'<div class=layout_content><div class="layout_content_main no_sidebar"><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class="center-panel-container height-nonav" ng-show=global.loading_done wt-scroll><dl class=frame data-minheight=112><dt class=frame-dl><ng-include src="\'/tpl/team/team_admin_tabs.html\'"></ng-include></dt><dd class=frame-dd><div class="part-loading mt_20" ng-hide=part_loading_done></div><ng-include src="\'/tpl/team/team_mask_panel.html\'"></ng-include><div class=panel-section ng-show="part_loading_done && team.edition==2"><table class="table table-striped table-bordered"><tbody><tr><td>客服号</td><td><span class=em>{{sub.support_no}}号</span></td></tr><tr><td>QQ号</td><td>{{sub.support_qq}}</td></tr><tr><td>电话</td><td>010-84787492</td></tr><tr><td>邮箱</td><td><a href=mailto:wow@worktile.com>wow@worktile.com</a></td></tr><tr><td>微信客服</td><td><img ng-src=/img/index/contact-code.png alt=getworktile><br><br>扫描上面的二维码或搜索微信号：<span class=em>getworktile</span></td></tr></tbody></table></div></dd></dl></div></div></div>'),a.put("/tpl/team/team_admin_custom.html",'<div class="part-loading mt_20" ng-hide=part_loading_done></div><div ng-show=part_loading_done class=team_admin_custom_area><div class="fs_17 pb_14">个性化</div><div><dl class="dl-form custom_task_label_area"><dt><strong>团队项目的任务标签</strong> <span class=dl-form-desc>设置团队项目中默认的任务标签，有新项目创建时自动获取他们。</span></dt><dd><div class=settings><div class=custom-container><header ng-hide=is_set_team_tag><div ng-if="vm.labels.length>0">当前标签<div class="clear_fix mt_10"><label ng-repeat="label in vm.labels"><span class=team_label ng-class="label.name+\'-label\'" ng-bind="label.desc||\'&nbsp;\'"></span></label></div></div><div ng-hide="vm.labels.length>0" class=color-text-light>当前无设置</div></header><button class="btn mt_28" ng-hide=is_set_team_tag ng-click=js_toggle_team_tag()>设&nbsp; 置</button><div class="form-group border-all" ng-if=is_set_team_tag><wt-team-labels type=team team=team isheader=false></wt-team-labels></div><footer class=footer-wrap ng-hide=!is_set_team_tag><button class="btn btn-success" ng-click="js_toggle_team_tag(\'save\')">保&nbsp; 存</button> <a href=javascript:; class="cancel btn btn-link btn-cancel ml_35" ng-click="js_toggle_team_tag(\'cancel\');is_set_team_tag=false">取&nbsp; 消</a></footer></div></div></dd></dl><dl class="dl-form custom_default_project_area"><dt><strong>成员加入的默认项目</strong> <span class=dl-form-desc>可以设置当团队有新成员加入时，自动加入到这里的项目。</span></dt><dd><div class=settings><div class=custom-container><header ng-hide=is_set_team_project><div ng-if="vm.defaultProjects.length>0">默认加入项目<div class="clear_fix mt_10"><label class=deft-project ng-repeat="pro in vm.defaultProjects"><i ng-class=pro.pic ng-style={color:pro.bg}></i>{{[pro.name,40]|cutstr}}</label></div></div><div ng-hide="vm.defaultProjects.length>0" class=color-text-light>当前无设置</div></header><button class="btn mt_28" ng-hide=is_set_team_project ng-click=js_toggle_team_project() wt-scroll-foucs=.custom_default_project_area>设&nbsp; 置</button><div class=form-group ng-if=is_set_team_project><ul class="deft-set-project m_0"><li class=label-list ng-repeat="pro in vm.projects"><label class=label-i><input type=checkbox class=label-check ng-model=pro.checked><i ng-class=pro.pic ng-style={color:pro.bg}></i>{{[pro.name,40]|cutstr}}</label><div class=line></div></li><li class="label-list list_botton"><a class="js-popbox btn btn-link form-control" data-placement=bottom data-align=right ng-click=js_toggle_team_project_create($event)>创建新项目</a></li></ul><footer class=footer-wrap><button class="btn btn-success" ng-click=save_project()>保&nbsp; 存</button> <a href=javascript:; class="cancel btn btn-link btn-cancel ml_35" ng-click=js_toggle_team_project()>取&nbsp; 消</a></footer></div></div></div></dd></dl><dl class="dl-form custom_task_list_area"><dt><strong>默认的任务列表</strong> <span class=dl-form-desc>创建新项目时自动生成此列表。</span></dt><dd><div class=settings><header class=show_area ng-hide=is_set_team_template><div class=clear_fix ng-if=vm.defaultTpl.name>当前模版:<span class=ml_10>{{vm.defaultTpl.name}}</span><ul class=list_area><li ng-repeat="enty in vm.defaultTpl.entries"><span class=title>{{[enty.name, 16] | cutstr}}</span><div class=line></div></li></ul></div><div ng-hide=vm.defaultTpl.name class=color-text-light>当前无设置</div></header><div class="editor_area custom-container custom-width-auto clearfix"><button class="btn mt_28" ng-hide=is_set_team_template ng-click=js_toggle_team_template() wt-scroll-foucs=.custom_task_list_area>设&nbsp; 置</button><div class=form-group ng-if=is_set_team_template><ul class="deft-set-temp m_0"><li class=label-list ng-repeat="tpl in vm.templates"><label class=label-i><p class=flex-row><input type=radio ng-change=setDefaultTemplat() name=defaultTemplate ng-value=tpl.template_id ng-model=vm.defaultTplId class=label-check> <span class="flex-se1 label-name">{{tpl.name}}</span> <i ng-click=js_edit_team_template(tpl.template_id,$event) data-placement=bottom data-align=right class="js-popbox fa fa-pencil remove_tpl"></i></p><p class=tpl-entries><span class=tpl-name ng-repeat="ety in tpl.entries">{{ety.name}}&nbsp;<span class=default-tpl-lable-hr ng-if="tpl.entries.length > 1 && ($middle || $first)">-</span></span></p></label><div class=line></div></li><li class="label-list list_botton"><a class="js-popbox btn btn-link form-control" data-placement=bottom data-align=right ng-click=js_toggle_team_template_create($event)>定义新模版</a></li></ul><footer class=footer-wrap><button class="btn btn-success" ng-click=save_templates()>保&nbsp; 存</button> <a href=javascript:; class="cancel btn btn-link btn-cancel ml_35" ng-click=js_toggle_team_template()>取&nbsp; 消</a></footer></div></div></div></dd></dl></div></div>'),
a.put("/tpl/team/team_admin_custom_add_template.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=pm.js_close()></button><h3>定义新模版</h3></div><div class="popbox-bodywrapper max-h400" wt-scroll><div class="popbox-body w_340"><div class=pop-custom><form name=add_template_form w5c-form-validate="" class=w5c-form novalidate="" role=form><div class=form-group><label>模版名称</label><input type=text ng-model=newTpl.name name=teplateName required wt-autofocus="" class="form-control pop-custom-input mt_10" placeholder=请输入模版名称></div><div class=form-group><label class=mt_10>任务列表名称</label><div class="clearfix mb_10" ng-repeat="tpl in newTpl.entries"><input type=text class="form-control pop-custom-input" required wt-validator-name="\'entry_name\'+$index" ng-model=tpl.name placeholder=请输入任务列表名称> <i class="fa fa-close pop-custom-input-remove" ng-if="newTpl.entries.length > 1" ng-click=js_remove_a_template($index)></i></div></div><div class=form-group><label><a ng-click=js_add_more_template()>+添加任务列表</a></label></div><div class=form-group><label><input type=checkbox class=pop-custom-check ng-model="newTpl.is_default">选择成为默认模版</label></div><div class=form-group><button wt-loading-status=pm.is_loading data-loading-text=创建中... w5c-form-submit=js_do_new_template() href=javascript:; class="btn btn-success">保&nbsp; &nbsp;存</button> <button ng-click=pm.js_close() href=javascript:; class="btn btn-link btn-cancel">取&nbsp; &nbsp;消</button></div></form><div class=divider></div></div></div></div>'),a.put("/tpl/team/team_admin_custom_edite_template.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=pm.js_close()></button><h3>编辑模版</h3></div><div class="popbox-bodywrapper max-h400" wt-scroll><div class="popbox-body w_350"><div class=pop-custom><form name=edit_template_form w5c-form-validate="" class=w5c-form novalidate="" role=form><div class=form-group><label>模版名称</label><input type=text name=teplateName ng-model=pm.tpl.name required wt-autofocus="" class="form-control pop-custom-input mt_10" placeholder=请输入模版名称></div><div class=form-group><label class=mt_10>任务列表名称</label><div class="clearfix mb_10" ng-repeat="enty in pm.tpl.entries"><input type=text class="form-control pop-custom-input" ng-model=enty.name wt-validator-name="\'entry_name\'+$index" required="" placeholder=请输入任务列表名称> <i class="fa fa-close pop-custom-input-remove" ng-if="pm.tpl.entries.length > 1" ng-click=js_remove_a_template($index)></i></div></div><div class=form-group><label><a ng-click=js_add_more_template()>+添加任务列表</a></label></div><div class=form-group><button wt-loading-status=new.is_loading data-loading-text=创建中... w5c-form-submit=js_do_save_template() href=javascript:; class="btn btn-success">保&nbsp; &nbsp;存</button> <button wt-loading-status=new.is_loading data-loading-text=创建中... w5c-form-submit=js_do_del_template() ng-if="pm.vm.templates.length>1" href=javascript:; class="btn btn-link btn-cancel">删&nbsp; &nbsp;除</button></div></form><div class=divider></div></div></div></div>'),a.put("/tpl/team/team_admin_degrade.html",'<div class=layout_content><div class="layout_content_main no_sidebar"><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class=center-panel-container><dl class=frame data-minheight=112><dt class=frame-dt><ng-include src="\'/tpl/team/team_admin_tabs.html\'"></ng-include></dt><dd class=frame-dd><div class="part-loading mt_20" ng-hide=part_loading_done></div><div class=panel-section ng-show=part_loading_done><div class="center-box normal-box"><i class="center-box-icon icon-sitemap"></i><h5>降级到免费版</h5><p class="alert alert-danger" ng-show="degrade_error.length > 0"><i class=icon-remove-sign></i> {{degrade_error}}</p><button ng-disabled=degrade_disabled class="btn btn-success btn-block" ng-click=js_degrade_team() data-loading-text=正在降级... wt-loading-status=is_degrading>确认降级到免费版</button> <span class=tips>如需帮助，请拨打 400-805-6966 联系我们</span></div></div></dd></dl></div></div></div>'),a.put("/tpl/team/team_admin_export.html",'<div class=layout_content><div class=layout_content_sidebar><ng-include src="\'/tpl/team/team_admin_sidebar.html\'"></ng-include></div><div class=layout_content_main><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right><button ng-click=js_export_data() class="btn btn-danger" data-loading-text=提交中... wt-loading-status=bulk_exporting ng-show="global.loading_done && team.edition==2">导出数据</button></div></div></div><ng-include src="\'/tpl/team/team_mask_panel.html\'"></ng-include><div class="center-panel-container height-nonav" ng-show="global.loading_done && team.edition==2" wt-scroll><div class=panel-section><h4>数据导出</h4><div class="option-block meta-desc"><i class="icon-info-sign mr_5"></i>数据导出需要先提交，准备就绪后才可以下载。</div></div><div class="panel-section inner"><table class="table table-hover table-bordered"><thead><tr><th>请求时间</th><th>格式</th><th>状态</th><th>操作</th></tr></thead><tbody><tr ng-repeat="export in bulkexports"><td>{{export.request_date | timeFormatZHCN}}</td><td>{{{1:\'JSON\'}[export.download_format]}}</td><td>{{export.status | exportStatus}}</td><td>无</td></tr><tr ng-show="bulkexports.length == 0"><td colspan=4>还没有数据导出记录</td></tr><tr ng-show=!loading_export_done><td colspan=4 align=center><div class="part-loading mb_0"></div></td></tr></tbody></table><div class=pull-right wt-pagination=exports_pagination_opts></div></div></div></div></div>'),a.put("/tpl/team/team_admin_left_nav.html","<dl data-minheight=112 class=frame><ul class=\"nav nav-pills nav-stacked\"><li ng-class=\"{true:'active'}[active_team_admin_nav_tab=='member']\"><a ng-href=/teams/{{team_id}}><i class=icon-user></i><br>成员</a></li><li ng-class=\"{true:'active'}[active_team_admin_nav_tab=='projects']\"><a ng-href=/teams/{{team_id}}/projects><i class=icon-inbox></i><br>项目</a></li><li ng-class=\"{true:'active'}[active_team_admin_nav_tab=='admin']\" ng-if=\"global.team_module.view | permission:current_team.permission\"><a ng-href=\"{{'/teams/'+current_team.team_id+{true:'/admin',false:'/setting'}[current_team.owner.uid == global.me.uid]}}\"><i class=icon-cog></i><br>设置</a></li></ul></dl>"),a.put("/tpl/team/team_admin_members.html",'<div class="part-loading mt_20" ng-hide=part_loading_done></div><div ng-show=part_loading_done><div class="panel-section table-list"><div class=fs_17>成员管理</div><hr><table class="table table--fancy"><thead><tr><th>成员</th><th>邮箱</th><th>加入日期</th><th>角色</th><th>状态</th><th>设置</th></tr></thead><tbody><tr ng-repeat="member in account_members"><td><wt-avatar member=member name=true size=30></wt-avatar></td><td>{{member.email}}</td><td>{{member.join_date | timeFormatZHCN}}</td><td><span ng-if="member.uid==current_team.owner.uid">团队所有者</span> <span ng-if="member.uid!=current_team.owner.uid">{{member.role | role}}</span></td><td>{{member.status | memberStatus}}</td><td><a class="js-popbox btn" href=javascript:; data-placement=left data-align=middle wt-member-control member=member team=team show-team-setting=true>设&nbsp; 置</a></td></tr><tr ng-if="account_members.length == 0"><td colspan=7>还没有团队成员</td></tr><tr ng-show=!account_members><td colspan=7 align=center></td></tr></tbody></table></div></div>'),a.put("/tpl/team/team_admin_pay_coupon.html",'<div class=layout_content><div class=layout_content_sidebar><ng-include src="\'/tpl/team/team_admin_sidebar.html\'"></ng-include></div><div class=layout_content_main><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class=center-panel-container ng-show=team><div class=panel-section><div class="center-box normal-box"><i class="center-box-icon icon-gift"></i><h5>使用代金券充值</h5><input wt-enter=js_redeem_coupon() wt-focus-event=js_redeem_coupon_focus() ng-model=coupon_code type=text class=form-control placeholder="请输入代金券序列号"><p class="alert alert-danger" ng-show="redeem_coupon_error.length > 0"><i class=icon-remove-sign></i> {{redeem_coupon_error}}</p><button class="btn btn-success btn-block" ng-click=js_redeem_coupon() data-loading-text=正在充值... wt-loading-status=is_redeeming>确认充值</button> <span class=tips>如需帮助，请拨打 010-84787492 联系我们</span></div></div></div></div></div>'),a.put("/tpl/team/team_admin_pay_online.html",'<div class=layout_content><div class=layout_content_sidebar><ng-include src="\'/tpl/team/team_admin_sidebar.html\'"></ng-include></div><div class=layout_content_main><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class=center-panel-container ng-show=team><div class=panel-section><h4>在线充值</h4><ul class=pay-online><li><span class=pay-number>1</span> 购买人数: <span class=pay-people><i class=icon-ex-users></i> {{sub.quota}} 个人</span> <span class="pay-people-tooltip text-muted">(￥10月/人)</span></li><li class=pay-amount-list><span class=pay-number>2</span> 充值金额:<br><div class=pay-amount ng-class="{true:\'active\'}[selected_amount.month_count == pay_amount.month_count]" ng-click=js_selected_amount(pay_amount,pay_form) ng-repeat="pay_amount in pay_amounts"><span class=pay-amount-time>{{pay_amount.display_time}}</span> <span class=pay-amount-number>￥ <b>{{pay_amount.amount}}</b></span> <span class=icon-ok-sign ng-show="{true:\'active\'}[selected_amount.month_count == pay_amount.month_count]"></span> <span class=pay-amount-send ng-show="pay_amount.presentation > 0"><i class=icon-gift></i> 送：￥{{pay_amount.presentation}}</span></div></li><li><span class=pay-number>3</span> 支付方式：<br><div class=radio><label><input type=radio name=pay_type value=1 checked="checked"> <img ng-src=/img/alipay.png width=135 height="45"></label></div></li><li><p class="alert alert-info">购买人数：{{sub.quota}}人<br>充值金额：￥{{selected_amount.amount || 0}}<br>支付方式：支付宝<br></p></li><li ng-show="pay_form.$errors.length > 0"><p class="alert alert-danger"><i class=icon-remove-sign></i> {{pay_form.$errors[0]}}</p></li><li><form name=pay_form action=/pay/online/alipay method=post target=_blank><input hidden="" name=payment_no ng-model=payment_no> <input hidden="" name=amount ng-model=selected_amount.amount> <input hidden="" name=team_id ng-model=team_id> <button class="btn btn-success" type=submit ng-click=js_pay(pay_form)>支付</button></form></li></ul></div></div></div></div>'),a.put("/tpl/team/team_admin_payment.html",'<div class=layout_content><div class=layout_content_sidebar><ng-include src="\'/tpl/team/team_admin_sidebar.html\'"></ng-include></div><div class=layout_content_main wt-scroll><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class=center-panel-container ng-show=global.loading_done><div class=panel-section><h4>付费管理</h4><div class=option-block><div class="account-info mr_15">账户余额：<span class=number>￥{{sub.balance}}</span></div><a href=/teams/{{team_id}}/pay class="btn btn-danger mr_15">在线充值</a> <a href=/teams/{{team_id}}/pay_coupon class=btn>代金券充值</a></div></div><div class="panel-section table-list"><table class="table table-hover table-bordered"><thead><tr><th>日期</th><th>充值方式</th><th>金额</th><th>状态</th><th>操作</th></tr></thead><tbody><tr ng-repeat="payment in payments"><td>{{payment.transaction_date | timeFormatZHCN}}</td><td>{{payment.type | payType}}</td><td ng-class="{1:\'pay-unpaid\',2:\'pay-success\',3:\'pay-failed\'}[payment.status]">￥{{payment.amount}}</td><td>{{payment.status | payStatus}}</td><td><div ng-hide="(payment.status | payStatusIsSuccess)"><a href="/pay/online/alipay?team_id={{team_id}}&payment_no={{payment.payment_no}}" target=_blank>继续支付</a> | <a href=javascript:; ng-click=js_cancel_payment(payment)>取消支付</a></div><div ng-show="(payment.status | payStatusIsSuccess)">无</div></td></tr><tr ng-show="payments.length == 0"><td colspan=5>还没有付费记录</td></tr></tbody></table><div class=pull-right wt-pagination=payments_pagination_opts></div></div></div></div></div>'),a.put("/tpl/team/team_admin_projects.html",'<div class="part-loading mt_20" ng-hide=part_loading_done></div><div ng-show=part_loading_done><div class="panel-section table-list"><div class=fs_17>项目管理</div><hr><table class="table table--fancy"><thead><tr><th>项目名称</th><th>负责人</th><th>成员人数</th><th>状态</th><th>创建时间</th><th>设置</th></tr></thead><tbody><tr ng-repeat="project in account_projects"><td><a ng-href=/project/{{project.pid}} class=color-text-dark ng-bind=[project.name,40]|cutstr></a></td><td><wt-avatar ng-repeat="admin in project.admins" member=admin name=true size=30 class=mr_15></wt-avatar></td><td>{{project.member_count}}</td><td>{{project.archived | projectStatus}}</td><td>{{project.create_date | timeFormatZHCN}}</td><td><a class="js-popbox btn" href=javascript:; ng-if=project.is_teamOwnerHandler ng-click=vm.js_pop_project_setting($event,project) data-placement=left data-align=middle>设&nbsp; 置</a></td></tr><tr ng-if="account_projects.length == 0"><td colspan=6>还没有任何项目</td></tr><tr ng-show=!account_projects><td colspan=6 align=center></td></tr></tbody></table></div></div>'),a.put("/tpl/team/team_admin_security.html",'<div class="part-loading mt_20" ng-hide="part_loading_done && loading_histories_done"></div><div class="panel-section inner" ng-show="part_loading_done && loading_histories_done"><div class=fs_17>安全设置</div><hr><table class="table table--fancy"><thead><tr><th>操作人</th><th>行为</th><th>IP地址</th><th>时间</th></tr></thead><tbody><tr ng-repeat="history in histories"><td><wt-avatar member=history.actor name=true size=30></wt-avatar></td><td style="width: 40%"><span ng-bind=history.verb_display></span><wt-avatar member=history.member name=true size=30></wt-avatar></td><td>{{history.location + \'（\'+ history.ipaddress + \'）\'}}</td><td>{{history.published|timeFormatZHCN}}</td></tr><tr ng-show="histories.length == 0"><td colspan=4>还没有安全日志</td></tr></tbody></table><div class=pull-right wt-pagination=security_pagination_opts></div></div>'),a.put("/tpl/team/team_admin_sidebar.html","<div wt-scroll={&quot;scrollButtons&quot;:{&quot;enable&quot;:true}} data-maxheight=160><ul class=list-unstyled><li class=menu ng-class=\"{true: 'active'}[current_menu == 'basic']\"><a href=/teams/{{team_id}}/admin/basic><i class=\"icon-cog mr_5\"></i>基本设置</a></li><li class=menu ng-class=\"{true: 'active'}[current_menu == 'members']\"><a href=/teams/{{team_id}}/admin/members><i class=\"icon-user mr_5\"></i>成员管理</a></li><li class=menu ng-class=\"{true: 'active'}[current_menu == 'projects']\"><a href=/teams/{{team_id}}/admin/projects><i class=\"icon-inbox mr_5\"></i>项目管理</a></li><li class=menu ng-class=\"{true: 'active'}[current_menu == 'security']\"><a href=/teams/{{team_id}}/admin/security><i class=\"icon-shield mr_5\"></i>安全日志</a></li><li class=menu ng-class=\"{true: 'active'}[current_menu == 'consultant']\"><a href=/teams/{{team_id}}/admin/consultant><i class=\"icon-female mr_5\"></i>专属顾问</a></li></ul></div>"),a.put("/tpl/team/team_admin_summary.html",'<div class="part-loading mt_20" ng-hide=part_loading_done></div><div ng-show=part_loading_done><div class=panel-section><h4>团队信息</h4></div><div class=panel-section><table summary class="table table-striped table-bordered"><tbody><tr><td>团队名称</td><td>{{team.name}}</td></tr><tr><td>创建时间</td><td>{{team.create_date | dateFormatZHCN}}</td></tr><tr><td>团队描述</td><td>{{team.desc}}</td></tr></tbody></table></div><div class=panel-section><h4>项目与成员</h4></div><div class=panel-section><table summary class="table table-bordered"><tbody><tr><td>团队成员</td><td><div class=progress-warp><progress><bar ng-repeat="bar in member_stacked track by $index" value=bar.value type={{bar.type}}><span></span></bar></progress></div><ul class="inline-items clearfix"><li><span class="number member-count"></span> <span class=text>{{team.member_count}} 位活动成员</span></li><li><span class="number invite-count"></span> <span class=text>发送 {{team.invite_count}} 个邀请</span></li></ul></td></tr><tr><td>团队可见</td><td><div class=progress-warp><progress><bar ng-repeat="bar in project_stacked track by $index" value=bar.value type={{bar.type}}><span></span></bar></progress></div><ul class="inline-items clearfix"><li><span class="number active-count"></span> <span class=text>{{team.active_count}} 个活动项目</span></li><li><span class="number archived-count"></span> <span class=text>{{team.archived_count}} 个归档项目</span></li></ul></td></tr></tbody></table></div></div>'),a.put("/tpl/team/team_admin_tabs.html","<ul class=tabs><li><a ng-class=\"{true: 'active'}[current_menu == 'summary']\" href=/teams/{{team_id}}/admin/summary>摘要</a></li><li><a ng-class=\"{true: 'active'}[current_menu == 'basic']\" href=/teams/{{team_id}}/admin/basic>基本设置</a></li><li><a ng-class=\"{true: 'active'}[current_menu == 'members']\" href=/teams/{{team_id}}/admin/members>成员管理</a></li><li><a ng-class=\"{true: 'active'}[current_menu == 'projects']\" href=/teams/{{team_id}}/admin/projects>项目管理</a></li><li><a ng-class=\"{true: 'active'}[current_menu == 'security']\" href=/teams/{{team_id}}/admin/security>安全日志</a></li></ul>"),a.put("/tpl/team/team_admin_task_stats_widget.html",'<div class="box-panel my-tasks-overview"><div ng-class="{true:\'box-panel-header\'}[!!(global.team_module.view | permission:current_team.permission)]" class=hello-body><div class="hello-right pb_10"><h4>{{current_team.name}}</h4><br ng-if="current_team.desc !=\'\'"><span>{{current_team.desc}}</span><br><span>创建于{{current_team.create_date | dateFormatZHCN}}</span></div></div><div class=box-panel-body ng-if="global.team_module.view | permission:current_team.permission"><ul><li class=tasks-uncompleted><a href=javascript:; ng-click="go_to_team_task_sub_tab(\'uncompleted\')"><span class=count ng-show=!loading_overview_done><i class=icon-refresh></i></span> <span class=count ng-show=loading_overview_done>{{team_tasks_overview.uncompleted}}</span> <span class=text>待完成任务</span></a></li><li class=tasks-expired><a href=javascript:; ng-click="go_to_team_task_sub_tab(\'expired\')"><span class=count ng-show=!loading_overview_done><i class=icon-refresh></i></span> <span class=count ng-show=loading_overview_done>{{team_tasks_overview.expired}}</span> <span class=text>过期任务</span></a></li><li class="tasks-completed noborder"><a href=javascript:; ng-click="go_to_team_task_sub_tab(\'completed\')"><span class=count ng-show=!loading_overview_done><i class=icon-refresh></i></span> <span class=count ng-show=loading_overview_done>{{team_tasks_overview.completed}}</span> <span class=text>已完成任务</span></a></li></ul></div></div>'),a.put("/tpl/team/team_admin_top_tab.html","<ul class=tabs><li><a ng-href=/teams/{{team_id}} ng-class=\"{true:'active'}[active_team_admin_nav_tab=='member']\">成员</a></li><li><a ng-href=/teams/{{team_id}}/projects ng-class=\"{true: 'active'}[active_team_admin_nav_tab=='projects']\">项目</a></li><li ng-if=\"global.team_module.view | permission:current_team.permission\"><a ng-href=/teams/{{team_id}}/tasks ng-class=\"{true: 'active'}[active_team_admin_nav_tab=='tasks']\">任务</a></li><li ng-if=\"global.team_module.view | permission:current_team.permission\"><a ng-href=\"{{'/teams/'+current_team.team_id+{true:'/admin',false:'/setting'}[current_team.owner.uid == global.me.uid]}}\" ng-class=\"{true:'active'}[active_team_admin_nav_tab=='admin']\">设置</a></li></ul>"),a.put("/tpl/team/team_admin_upgrade.html",'<div class=layout_content><div class="layout_content_main no_sidebar" wt-scroll><div class=mod-navbar><div class=main><div class=title><h3><i class="icon-cogs mr_10"></i>团队设置</h3><span class="color_gray ml_15">{{team.name}}</span></div><div class=pull-right></div></div></div><div class=center-panel-container><dl class=frame data-minheight=112><dt class=frame-dt><ng-include src="\'/tpl/team/team_admin_tabs.html\'"></ng-include></dt><dd class=frame-dd><div class="part-loading mt_20" ng-hide=part_loading_done></div><div class=panel-section ng-show=part_loading_done><div class="center-box normal-box"><i class="center-box-icon icon-briefcase"></i><h5>升级团队到商业版</h5><input wt-enter=js_upgrade_team() wt-focus-event=js_team_quota_focus() ng-model=team_quota type=text class=form-control placeholder="输入团队成员人数"><p class="alert alert-danger" ng-show="upgrade_error.length > 0"><i class=icon-remove-sign></i> {{upgrade_error}}</p><button class="btn btn-success btn-block" ng-click=js_upgrade_team() data-loading-text=正在升级... wt-loading-status=is_upgrading>马上升级</button> <span class=tips>如需帮助，请拨打 400-805-6966 联系我们</span></div></div></dd></dl></div></div></div>'),a.put("/tpl/team/team_calendar.html",'<dl class=margin_inner><div class=calendar-command-panel><div class=command-penal><div id=calendar-range-wrapper><a href=javascript:; ng-click=prev()><i class="fa fa-angle-left"></i></a><h4 id=calendar_title class=range-text></h4><a href=javascript:; ng-click=next()><i class="fa fa-angle-right"></i></a> <button id=calendar_today class="btn btn-today" ng-click=today()>今天</button></div><div class=month-week-wrapper><button class="btn month-btn" ng-class="{true: \'active\'}[vm.calendar_view==\'month\']" ng-click="changeView(\'month\')">月</button> <button class="btn week-btn" ng-class="{true: \'active\'}[vm.calendar_view==\'agendaWeek\']" ng-click="changeView(\'agendaWeek\')">周</button></div><div class=about-me-wrapper></div></div><div class=calendar-panel ng-class="{\'agendaWeek\': \'week\'}[vm.calendar_view]"><div id=calendar calendar=myCalendar ui-calendar=vm.calendarConfig ng-model=vm.calendarEventSources></div></div></div></dl>'),a.put("/tpl/team/team_calendar_filter.html",""),a.put("/tpl/team/team_calendar_sidebar.html",'<div class="layout_right_sidebar layout_right_sidebar--team"><dl class="prj_sidebar h_100p"><dd><div class=sidebar_header><a href=javascript:; ng-click=vm.js_close_filter()><button class="cancel wtfont wtf-close"></button><h3>日历筛选</h3></a></div><div class=sidebar_body_scroll wt-scroll ng-mouseenter="vm.is_filter_action=true" ng-mouseleave="vm.is_filter_action=false"><div class=sidebar_body><h3 class=sidebar_body_header>按类型筛选<a href=javascript:; class=filter_clear_btn ng-show=vm.is_filter_action ng-click=vm.js_clear_filter()>清除筛选</a></h3><ul class=filter_type_list_area><li ng-click=vm.js_filter_type() ng-class="{\'selected\':vm.teamCalendarFilterData.filter_only_schedule==false&&vm.teamCalendarFilterData.filter_only_task==false}">全部</li><li ng-click="vm.js_filter_type(\'schedule\')" ng-class="{\'selected\':vm.teamCalendarFilterData.filter_only_schedule==true}">只显示日程</li><li ng-click="vm.js_filter_type(\'task\')" ng-class="{\'selected\':vm.teamCalendarFilterData.filter_only_task==true}">只显示任务</li></ul><hr><h3 class=sidebar_body_header>按项目筛选</h3><ul class=project_list_area><li class=item ng-repeat="project in vm.teamCalendarFilterData.team_all_projects" ng-click=vm.js_calendar_filter_project_toggle(project)><div class=checkbox_area><i class=icon-check-sign ng-class="{false: \'icon-check-empty\', true: \'icon-check-sign\'}[project.is_checked]"></i></div><a href=javascript:;><span class="project-icon {{project.pic}} mr_14 fs_18" ng-style="{\'color\':project.bg}"></span> <span ng-bind=[project.name,15]|cutstr></span></a></li></ul><hr><h3 class=sidebar_body_header>按成员筛选</h3><ul class="member_list_area checkable"><li ng-repeat="member in vm.teamCalendarFilterData.team_all_member" ng-class="{\'selected\':member.is_checked}" ng-click=vm.js_calendar_filter_member_toggle(member)><wt-avatar member=member size=30 name="[member.display_name,10] | cutstr"></wt-avatar></li></ul></div></div></dd></dl></div>'),a.put("/tpl/team/team_dashboard.html",'<div class=team-dashboard data-minheight=112><div ng-if="parent_vm.public_team!=null" class=team-public-dashboard><div class=team-public-dashboard-right><dl class=frame><dt>{{parent_vm.public_team.info.name}}</dt><dd class=text-muted><div class="p_5 pt-10">所属行业：&nbsp; {{parent_vm.public_team.info.industry | teamIndustries}}</div><div class=p_5>{{parent_vm.public_team.info.desc==\'\'?\'没有团队描述。\':parent_vm.public_team.info.desc}}</div><div class=p_5>创建于：{{parent_vm.public_team.info.create_date|dateFormatZHCN}}</div></dd></dl><dl class=frame><dt>成&nbsp;员</dt><dd><ul class=checkable><li ng-repeat="member in parent_vm.public_team.members"><wt-avatar member=member name=true></wt-avatar></li></ul></dd></dl></div><dl class="frame team_project" data-minheight=82><dt class=frame-dt><span class=title>项&nbsp;目</span></dt><div class=empty-panel ng-if="parent_vm.public_team.projects.length==0"><i class="wtfont wtf-project"></i><br><span>暂无任何团队公开项目</span></div><dd class=frame-dd ng-if="parent_vm.public_team.projects.length>0"><ul class=team_project_list><wt-project-grid-item ng-repeat="project in parent_vm.public_team.projects" project=project like=star></wt-project-grid-item></ul></dd></dl></div><div ng-if="team!=null"><wt-team-dashboard-overview team-id=team.team_id data=vm.overview></wt-team-dashboard-overview><ul class="portlet ui-sortable" sortable=vm.stats_sort_options><li ng-repeat="stats in vm.stats_list" class=portlet-item><wt-dashboard-stats stats=stats></wt-dashboard-stats></li><li></li></ul><a class="team-dashboard-add js-popbox" data-align=left data-placement=top ng-click=vm.js_pop_add_stats($event)><i class="wtfont wtf-add"></i><p>添加你关心的项目信息到这里</p></a></div></div>'),a.put("/tpl/team/team_list.html",""),a.put("/tpl/team/team_mask_panel.html",'<div class=mask-panel ng-show="team.edition==1 || team.edition==3" ng-cloak><i class=icon-briefcase></i><br><span>商业版团队才可享受此功能</span><br><br><a href=/teams/{{team_id}}/upgrade class="btn btn-danger btn-lg">升级到商业版</a></div>'),a.put("/tpl/team/team_member_invite.html",'<div class=layout_content ng-if="(global.team_module.add_member | permission:current_team.permission)"><div class="layout_content_main no_sidebar"><div class=mod-navbar><div class=main><div class=title><ng-include src="\'/tpl/team/team_title.html\'"></ng-include></div><div class=pull-right><ng-include src="\'/tpl/team/team_admin_top_tab.html\'"></ng-include></div></div></div><div class="main-content height-nonav" wt-scroll><div class=center-right-panel><div class=center-panel><div class=center-panel-inner><dl class=frame data-minheight=112><div class=box-panel-body><dt class=frame-dt><span class=title>邀请成员</span></dt><dd class=frame-dd><form class=form-horizontal role=form name=invite_member_form novalidate w5c-form-validate="" wt-enter=js_invite_enter($event,invite_member_form)><div class=panel-section><div class=section-header><h4>输入成员邮箱</h4></div><div class="section-body pl_20"><div ng-repeat="member in invite_members"><div class=form-group><div class=col-xs-10><span ng-show=false>{{member.index = $index}}</span><div class=input-group><input type=email class="form-control col-xs-3" ui-event="{ focus : \'js_email_focus(invite_member_form)\' }" placeholder=输入邮箱地址 ng-model=member.email name=member_email type=email tabindex={{$index+1}}><div class=input-group-btn><button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown>{{member.role | role}} <span class=caret></span></button><ul class="dropdown-menu pull-right" role=menu><li ng-repeat="r in invite_member_roles"><a href=javascript:; ng-click="member.role = r.role">{{r.name}}</a></li></ul></div></div></div><span ng-show="invite_members.length > 1" class="delete col-xs-2" style=line-height:33px><a href=javascript:; ng-click=js_delete_member($event,member)>删除</a></span></div></div><a href=javascript:; class=btn ng-click=js_add_invite_member()>再添加一个</a><br><br></div></div><div class=panel-section><div class=section-header><h4>说点什么</h4></div><div class="clearfix ml_15"><div class="col-xs-10 pl_0"><textarea class="message form-control help-block" rows=4 ng-init="invite_message=\'Worktile是一个简单好用的团队协作工具，我们团队使用它来跟踪任务进展情况，讨论问题，共享文件和文档，安排团队的日程，大家赶快加入吧。\'" ng-model=invite_message tabindex={{invite_members.length+1}}>\n                                                    </textarea></div></div><div class="alert alert-danger ml_15 mt_12 mb_0 w_678" ng-show="invite_member_form.$errors.length > 0"><i class=icon-remove-sign></i> <span ng-bind-html-unsafe=invite_member_form.$errors[0]></span></div></div><div class="panel-section ml_15"><div class=section-body><button ng-click=js_invite_members(invite_member_form) type=button class="btn btn-success mr_15" data-loading-text=发送中... wt-loading-status=is_sending>发送邀请</button> <button ng-click=js_cancel_invite() class="btn btn-cancel">取消</button></div></div></form></dd></div></dl></div></div><div class=right-panel><div class="box-panel today-event"><div class=box-panel-header><h4><i class="icon-user mr_10"></i>角色说明</h4></div><div class=box-panel-body><ul><li><span>管理员</span> <a href=javascript:;>可以创建项目和邀请团队成员</a></li><li><span>成员</span> <a href=javascript:;>只能看到自己参与的项目和团队可见项目</a></li></ul></div></div><widget-add-team-member-by-link current-team=current_team></widget-add-team-member-by-link></div></div></div></div></div><ng-include src="\'/tpl/team/team_not_found.html\'"></ng-include>'),a.put("/tpl/team/team_member_list_widget.html",' 0<div class="box-panel my-tasks-overview"><div class=box-panel-header><h4>成员</h4></div><div class=box-panel-body><div ng-repeat="member in members | filter:teamMembersFilter() | filter:isStatusOkFilter()"><wt-avatar member=member name=member.display_name size=30 class=m_15 data-placement=right></wt-avatar></div></div></div>'),a.put("/tpl/team/team_members.html",'<dl class="frame team_members" data-minheight=112><dd class=frame-dd><div class=frame-lr-right><dl class=dl-filter><div class=admin_btn_area ng-if=parent_vm.user_is_team_admin><button class="btn w_100p btn-success btn--fancy" ui-sref=team.members_invite ui-sref-active=active ng-click=vm.js_add_member()>邀请成员</button> <button class="btn w_100p mt_10" ui-sref=team.admin.members ui-sref-active=active>成员管理</button><hr></div><dt class=mt_10><span class=title>类型筛选</span></dt><dd><ul class=checkable><li ng-class="{\'selected\': filter_type==\'normals\'}" ng-click="js_reset_filter_type(\'normals\')"><a href=javascript:;>团队成员</a></li><li ng-class="{\'selected\': filter_type==\'guests\'}" ng-click="js_reset_filter_type(\'guests\')"><a href=javascript:;>访客</a></li></ul></dd></dl></div><div class=frame-lr-left><div class=empty-panel ng-if="members.normals.length==0 && members.inviteds.length==0 && filter_type==\'normals\'"><i class="wtfont wtf-user"></i><br><span>暂无任何团队成员</span></div><div class=empty-panel ng-if="members.guests.length==0 && filter_type==\'guests\'"><i class="wtfont wtf-user"></i><br><span>暂无任何访客</span></div><div class="part-loading mt_20" ng-hide=part_loading_done></div><div ng-if="part_loading_done && filter_type==\'normals\'"><div class=frame-dt><span class=title>成&nbsp;员</span></div><div class=frame-dd><ul class=team_members_list><li class="item flex_row" ng-repeat="member in members.normals"><span class="item_avatar flex_se1"><wt-avatar member=member size=42 status=true class=js-popbox wt-member-control team=team data-align=left></wt-avatar><span class=name>{{[member.display_name,10] | cutstr}}</span></span> <span class=flex_se1>{{member.email}}</span> <span class="members_project_status flex_row w_252 mr_20"><span class="pending {{member.overview.uncompleted==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=待完成>{{member.overview.uncompleted}}</span> <span class="expired {{member.overview.expired==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=过期>{{member.overview.expired}}</span> <span class="complete {{member.overview.completed==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=完成>{{member.overview.completed}}</span></span></li></ul></div></div><div ng-if="part_loading_done && members.inviteds.length>0 && filter_type==\'normals\'" class=mt_30><div class=frame-dt><span class=title>邀请中</span></div><div class=frame-dd><ul class="clearfix ml_20"><li class="pull-left mt_30 mr_45 al_c" ng-repeat="member in members.inviteds"><wt-avatar member=member size=42 status=true class=js-popbox wt-member-control data-align=left></wt-avatar><div class="text-overflow w_76 mt_5">{{member.display_name}}</div></li></ul></div></div><div ng-if="part_loading_done && (members.guests.length>0 && filter_type==\'guests\')"><div class=frame-dt><span class=title>成&nbsp;员</span></div><div class=frame-dd><ul class=team_members_list><li class="item flex_row" ng-repeat="member in members.guests"><span class="item_avatar flex_se1"><wt-avatar member=member size=42 status=true class=js-popbox wt-member-control data-align=left></wt-avatar><span class=name>{{[member.display_name,10] | cutstr}}</span></span> <span class=flex_se1>{{member.email}}</span> <span class="members_project_status flex_row w_252 mr_20"><span class="pending {{member.overview.uncompleted==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=待完成>{{member.overview.uncompleted}}</span> <span class="expired {{member.overview.expired==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=过期>{{member.overview.expired}}</span> <span class="complete {{member.overview.completed==0?\'empty\':\'\'}} flex_se1" tooltip-placement=top tooltip=完成>{{member.overview.completed}}</span></span></li></ul></div></div></div></dd></dl>'),
a.put("/tpl/team/team_members_invite.html",'<dl class="frame team_members_invite" data-minheight=112><dd class=frame-dd><div class=frame-dt><span class=title>邀请成员加入团队</span></div><div class=frame-lr-right><div class=invite_contant_area><div class=pb_20><img src=/img/links/team_invite_contact.png alt=""></div><div><button class="btn btn-penetrate btn_group_open" ng-click=vm.js_invite_contact_modal()>通过联系人添加</button></div><div class="pt_20 pb_20 fs_12">联系人由你所在团队或项目的成员组成，从中添加成员可以快速组建新的团队。</div></div><div class=invite_link_area><div class=pb_20><img src=/img/links/team_invite_share.png alt=""></div><div><button class="btn btn-penetrate btn_group_open" ng-click=vm.js_invite_link_open() ng-show=!vm.invite_link_open>开启链接</button></div><div ng-if=!vm.invite_link_open class="pt_20 fs_12">开启链接并复制，通过QQ、微信、邮件等方式分享给团队成员，实现快速邀请。</div><div ng-if=vm.invite_link_open class=invite_link_open_area><div class=form-group><input class=form-control ng-model=vm.invite_link type=text wt-click-select=""></div><div class=flex_row><div class=flex_se1><button class="btn btn-penetrate btn_qq" ng-click=vm.js_invite_share_qq()>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QQ发送邀请链接</button></div><div class=w_25></div><div class=flex_se1><button class="btn btn-penetrate btn_weixin" ng-click=vm.js_invite_share_weixin($event)>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;微信二维码分享</button></div></div><div class=info>成员加入团队后，为了防止链接泄露可以选择<button class="btn btn-penetrate btn_close" ng-click=vm.js_invite_link_close()>关闭链接</button></div></div></div></div><div class=frame-lr-left><div><add-team-member-by-email team=team></add-team-member-by-email></div></div></dd></dl>'),a.put("/tpl/team/team_not_found.html",'<div class=layout_content ng-if="part_loading_done && (!team || !(global.team_module.view_base | permission:team.permission))"><div class="layout_content_main no_sidebar"><dl class=frame data-minheight=90><dt class=frame-dt><span class=title>出错啦</span></dt><dd class=frame-dd><div class=error-panel><i class=icon-sitemap></i><br><span>团队不存在或者你不是当前团队成员</span><br><a class="btn btn-danger" href=/account/teams>管理我的团队</a></div></dd></dl></div></div>'),a.put("/tpl/team/team_projects.html",'<dl class="frame team_project" data-minheight=112><dd class=frame-dd><div class=frame-lr-right><dl class=dl-filter><div class=admin_btn_area ng-if=parent_vm.user_is_team_admin><button class="btn w_100p btn-success btn--fancy js-popbox" ng-click=vm.js_new_project($event)>新建项目</button> <button class="btn w_100p mt_10" ui-sref=team.admin.projects ui-sref-active=active ng-if=parent_vm.user_is_team_owner>项目管理</button><hr></div><dt><span class=title>类型筛选</span></dt><dd><ul class=checkable><li ng-class="{\'selected\': vm.filter_type==\'me\'}" ng-click="vm.js_reset_filter_type(\'me\')"><a href=javascript:;>我参与的</a></li><li ng-class="{\'selected\': vm.filter_type==\'team\'}" ng-click="vm.js_reset_filter_type(\'team\')"><a href=javascript:;>团队可见</a></li></ul></dd></dl></div><div class=frame-lr-left><div class=empty-panel ng-if="vm.projects.participateds.length==0&&vm.filter_type==\'me\'"><i class="wtfont wtf-project"></i><br><span>暂无任何我参与的项目</span></div><div class=empty-panel ng-if="vm.projects.teampublics.length==0&&vm.filter_type==\'team\'"><i class="wtfont wtf-project"></i><br><span>暂无任何团队可见项目</span></div><div class="part-loading mt_20" ng-hide=vm.part_loading_done></div><div ng-if="vm.projects.participateds.length>0 && vm.filter_type==\'me\'"><div class=frame-dt><span class=title>项&nbsp;目</span></div><div class=frame-dd ng-if="vm.projects.participateds.length>0 && vm.filter_type==\'me\'"><ul class=team_project_list><wt-project-grid-item ng-repeat="project in vm.projects.participateds" project=project like=star></wt-project-grid-item></ul></div></div><div ng-if="vm.projects.teampublics.length>0 && vm.filter_type==\'team\'"><div class=frame-dt><span class=title>项&nbsp;目</span></div><div class=frame-dd><ul class=team_project_list><wt-project-grid-item ng-repeat="project in vm.projects.teampublics" project=project like=favorite></wt-project-grid-item></ul></div></div></div></dd></dl>'),a.put("/tpl/team/team_projects_pop.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>新建任务</h3></div><form name=add_project_form w5c-form-validate="" class=w5c-form novalidate="" role=form><div class=form-group><div><input name=projectName ng-model=vm.new_project.name wt-autofocus="" placeholder=请输入项目名称 class=form-control type=text required></div></div><div class=form-group><select ng-change=vm.change_project_team() name=projectTeam class=form-control ng-model=vm.new_project.team_id required="" ng-options="team.team_id as team.name for team in teams"><option value="" selected=selected disabled=disabled>请选择所有者：</option></select></div><div class=form-group><select class=form-control name=projectVisibility ng-model=vm.new_project.visibility required="" ng-options="item.id as item.name for item in vm.visibilities"><option value="" selected=selected disabled=disabled>请选择公开性：</option></select></div><div class=form-group><button wt-loading-status=vm.saving data-loading-text=创建中... w5c-form-submit=vm.create_project() href=javascript:; class="btn btn-success">创&nbsp; 建</button> <button class="btn btn-link btn-cancel" ng-click="vm.to_step(\'default\')">取&nbsp; 消</button></div></form>'),a.put("/tpl/team/team_projects_toolbar.html",'<button class="btn btn-success btn--fancy" ng-click=js_new_project($event)>创建项目</button>'),a.put("/tpl/team/team_setting.html",'<dl class=frame data-minheight=112><dd class=frame-dd><div class="part-loading mt_20" ng-hide=part_loading_done></div><div ng-show=part_loading_done><div class=fs_17>退出团队</div><hr class="mt_10"><div class=single-panel-section><div class=single-panel-section-content><div ng-switch=quit_team_step><div class=pt_15 ng-switch-when=1><div class="w_660 pb_20"><i class="icon icon-info-sign mr_5 color-text-grayer"></i> <span class=color-text-grayer>该操作不可撤销，退出团队后，您将不能访问该团队的一切数据，请谨慎操作。</span></div><div class=form-group><button class="btn btn--warning-border" data-placement=right data-align=top ng-click=js_quit_team_step(2)>退出当前团队</button></div></div><div ng-switch-when=2><wt-confirm-password class=w_360 confirm-cancel=js_quit_team_step(1) confirm-success=js_quit_team_step(3)></wt-confirm-password></div><div ng-switch-when=3><div class="alert alert-warning w_660" ng-show="!(unique_admin_prjs.length > 0)"><span><i class="icon icon-info-sign mr_5"></i>该操作不可撤销，退出团队后，您将不能访问该团队的一切数据，是否继续？</span></div><div class="alert alert-warning w_660" ng-show="unique_admin_prjs.length > 0"><span><i class="icon icon-info-sign mr_5"></i>您在当前团队中有{{unique_admin_prjs.length}}个项目是唯一负责人，如果您退出当前团队，这些项目将无法添加新成员，请谨慎操作。</span></div><div class=form-group><button class="btn btn-danger mr_15" data-loading-text=正在退出中... wt-loading-status=is_quiting ng-click=js_quit_team()>确认退出</button> <button class="btn btn-link" ng-click=js_quit_team_step(1)>取消</button></div></div></div></div></div></div></dd></dl>'),a.put("/tpl/team/team_tasks.html",'<dl class="frame team_tasks" data-minheight=112><dd class=frame-dd><div class=frame-lr-right><dl class=dl-filter><dt><span class=title>类型筛选</span></dt><dd><ul class=checkable><li ng-class="{\'selected\': vm.filter_type_reg==\'uncompleted\'}" ng-click="js_reset_filter_type(\'uncompleted\')"><a href=javascript:;>待完成</a></li><li ng-class="{\'selected\': vm.filter_type_reg==\'expired\'}" ng-click="js_reset_filter_type(\'expired\')"><a href=javascript:;>已过期</a></li><li ng-class="{\'selected\': vm.filter_type_reg==\'completed\'}" ng-click="js_reset_filter_type(\'completed\')"><a href=javascript:;>已完成</a></li></ul></dd><hr><dt><span class=title>成员筛选</span></dt><dd><ul class=checkable><li ng-class="{\'selected\': vm.filter_user_reg==member.uid}" ng-repeat="member in team.members" ng-click=js_toggle_filter_user(member.uid)><wt-avatar member=member size=30 name="[member.display_name,10] | cutstr"></wt-avatar></li><li ng-class="{\'selected\': vm.filter_user_reg==\'none\'}" ng-click="js_toggle_filter_user(\'none\')"><a class="avatar avatar-ban" href=javascript:;><i class="wtfont wtf-ban"></i> <span class=avatar-name>尚未分配</span></a></li></ul></dd></dl></div><div class=frame-lr-left><div class=frame-dt><span class=title>任&nbsp;务</span></div><div class=empty-panel ng-show="tasks.length == 0 && !loading_tasks"><i class=icon-check></i><br><span>没有符合条件的任务</span></div><div class=slide-trigger><wt-task view-type=item show-project=true ng-repeat="task in tasks" ng-click=locator.openTask(task.pid,task.tid)></wt-task></div><div class=loading-more-panel><div class=part-loading ng-if=loading_tasks></div><button class=btn ng-if="!loading_tasks && vm.is_has_more_task" ng-click=load_tasks()>加载更多...</button></div></div></dd></dl>'),a.put("/tpl/team/team_title.html",'<h3><i class="icon-sitemap mr_10"></i> {{current_team.name}}</h3><a href=javascript:; class=ml_15 tooltip-placement=bottom tooltip="{{current_team.visibility | teamVisibility}}" show-team-visibility-options ng-click=show($event)><i ng-class="{\'icon-private\':current_team.visibility == 1,\'icon-public\':current_team.visibility == 2}"></i></a>'),a.put("/tpl/user/help.html",'<div class=mod-navbar><div class=main><div class=title><h3><i class="fa fa-question-circle mr_10"></i>帮助中心</h3></div></div></div><div class="common-content-panel help-panel height-nonav" wt-scroll><div class=content-container><div class=content><div class=content-wrapper><div class=manual-list><div class=manual-item><a href=/guide target=_blank><i class=icon-book></i><h4>用户指南</h4><span>什么是团队？如何邀请成员？权限如何控制？一切问题都能在这里找到答案。</span></a></div><div class=manual-item><a href=/shortcuts target=_blank><i class=icon-keyboard></i><h4>键盘快捷键</h4><span>高效的工作，从使用快捷键开始。在任何页面，您只要按？键即可打开快捷键列表。</span></a></div><div class=manual-item><a href=/videos target=_blank><i class=icon-facetime-video></i><h4>帮助视频</h4><span>通过视频快速了解如何使用Worktile，包括快速入门以及Worktile的进阶技巧</span></a></div><div class=manual-item><a href=/blog target=_blank><i class=icon-rss></i><h4>官方博客</h4><span>在这里你可以找到产品更新日志，使用技巧，用户故事等等，看看同行们如何通过Worktile提升工作效率。</span></a></div><div class=manual-item><a href=/mobile target=_blank><i class="icon-mobile-phone icon-large"></i><h4>移动版</h4><span>同时支持iPhone版和Android版，让协同无处不在，随时随地与团队一起工作。</span></a></div><div class=manual-item><a href=/feedback target=_blank><i class=icon-comment></i><h4>在线反馈</h4><span>有则改之，无则加勉，欢迎您通过左侧的联系方式或在线反馈与我们联系。</span></a></div></div></div></div><div class=sidebar><div class=sidebar-widget><h4>微信客服</h4><div class=contact-code><img src="/img/index/contact-code.png?ver=<%-config.version%>"></div></div><div class=sidebar-widget><h4>支持</h4><ul><li><i class=icon-weibo></i> <a href=http://weibo.com/worktile>微博：@Worktile</a></li><li><i class=icon-envelope-alt></i> <a href=mailto:support@worktile.com>邮箱：support@worktile.com</a></li><li><i class=icon-phone></i> <a href=javascript:;>电话：400-805-6966</a></li><li><i class=icon-linux></i> <a href=javascript:;>QQ群：371897560</a></li></ul></div></div></div></div>'),a.put("/tpl/user/pop_user_setting.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>帐户信息</h3></div><div class=popbox-avatar><div class="avatar-body avatar-body-self"><div class="clearfix mb_15 ml_20 mr_20"><wt-avatar member=global.me size=62 wt-disable-drag></wt-avatar><div class=avatar-right><h4 class="avatar-heading help-inline"><strong>{{global.me.display_name}}</strong></h4><span class="help-inline color-text-grayer fw_200 ml_10">@{{global.me.name}}</span><p><span class="help-inline color-text-grayer fw_200">{{global.me.email}}</span></p></div></div><hr class="popbox-hr"><ul class=ul-vertical><li><a class=item ui-sref=account.settings ui-sref-opts={reload:true}><i class="fa fa-cog"></i> 帐户设置</a><hr class="popbox-hr"></li><li><a class=item ui-sref=share><i class="fa fa-thumbs-o-up"></i> 推荐给好友</a><hr class="popbox-hr"></li><li><a class=item href=/version/switch target=_self><i class="wtfont wtf-switch"></i> 退级至旧版</a></li></ul><hr class="popbox-hr"><div class=p_20><button class="btn btn-block btn--warning-border" ng-click=js_user_logout()>退 &nbsp; 出</button></div></div></div>'),a.put("/tpl/user/user_profile.html",""),a.put("/ycjs/directive/archive/archiveentry_item.html",'<div class="wt-row archiveentry-item"><div class="column column-name"><i class="icon-columns mr_20"></i>{{entry.name}}</div><div class="column column-date">{{\'列表于 \'+ (entry.update_date | timeFormatZHCN) +\' 归档\'}}</div><div class="column column-action"><a href=javascript:; ng-click="js_unarchive_entry($event, entry.entry_id)" ng-if="global.prj_module.crud | permission:project.permission" title=激活列表 tooltip=激活列表 tooltip-placement=bottom><i class=icon-mail-reply></i></a></div></div>'),a.put("/ycjs/directive/attachment/attachment.html",'<div class=attachment title=vm.file.name><a class="file-picfile {{[vm.file.ext,\'fancybox-file\'] | ifImgExtSetClass}}" ng-href="{{ {0:\'#\',2:\'/files/\'+vm.file.fid+\'/preview\'}[(vm.file | isPreviewFile)] }}" target=_blank data-fancybox-group=filegroup-attachment data-fancybox-href="{{vm.file | wtBoxView}}" data-fancybox-type=image title="{{ vm.file.name }}"><span ng-if=vm.file.error><span class="label label-danger">{{ vm.file.error | fileuploadErrorInfo }}</span></span> <img ng-if=!vm.file.preview ng-src="{{vm.file.icon | wtBox}}" alt="{{ vm.file.name }}"><div ng-if=vm.file.preview class=preview data-file-upload-preview=vm.file></div></a> <small class=file-type ng-if=vm.file.type|isFile>{{vm.file|fileExt}}文件</small> <a class=file-name href=javascript:; ng-click=vm.parse_gofile() title={{vm.file.name}}>{{vm.file.name}}</a> <span class=file-size>{{vm.file.size | fileSize}}</span> <span class=file-action><a ng-if="(vm.file | isPreviewFile)==2" class=file-preview target=_blank href=/files/{{vm.file.fid}}/preview><i class=icon-cancel></i>预览</a> <a class=file-cancel href=javascript:; ng-click=vm.file.$cancel() ng-hide=!vm.file.$cancel><i class=icon-cancel></i>取消</a> <a class=file-down ng-href="{{vm.file | wtBoxDownload}}" target=_blank ng-if=!vm.file.$progress()>下载</a> <a class=file-del href=javascript:; ng-if=vm.has_del ng-click=vm.parse_del()>{{vm.parse_del}}删除</a></span><div ng-if=!vm.file.error class="pull-left mr_15 progress progress-striped active" data-ng-class="{pending: \'in\'}[vm.file.$state()]" data-file-upload-progress=vm.file.$progress()><div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div></div></div>'),a.put("/ycjs/directive/autosave/autosave.html",'<div class=autosave ng-show=vm.show_tip><a href=javascript:; ng-click=vm.revert_save()>恢复至上次未保存版本({{vm.save_time}})</a> <button class="cancel wtfont wtf-close" ng-click=vm.cancel_save()></button></div>'),a.put("/ycjs/directive/avatar/avatar.html",'<a class="avatar wt-scroll-update-trigger"><span class=avatar-face></span></a>'),a.put("/ycjs/directive/badges/badges.html",'<div class=task-badges><span class="task-badge icon icon-time wt-scroll-update-trigger {{vm.timeClass}}" title={{vm.timeTitle}} ng-if=task.expire_date>{{vm.timeText}}</span> <span class="task-badge icon icon-list wt-scroll-update-trigger {{vm.todoClass}}" title={{vm.todoTitle}} ng-if=vm.todoText>{{vm.todoText}}</span> <span class="task-badge icon icon-comment-alt wt-scroll-update-trigger" title={{vm.commentTitle}} ng-if=vm.commentText>{{vm.commentText}}</span> <span class="task-badge icon icon-paper-clip wt-scroll-update-trigger" title={{vm.fileTitle}} ng-if=vm.fileTitle>{{vm.fileCount}}</span> <span class="task-badge icon icon-align-left wt-scroll-update-trigger" title={{vm.descTitle}} ng-if=task.desc></span> <span class="seperator seperator-project wt-scroll-update-trigger" ng-if=(vm.descTitle||vm.fileTitle||vm.commentTitle||vm.todoTitle||vm.timeTitle)&&vm.projectName></span> <span class="task-badge icon icon-project-name {{vm.projectIcon}}" title={{vm.projectName}} ng-if=vm.taskShowProject ng-bind=[vm.projectName,20]|cutstr></span> <span class="task-badge task-label wt-scroll-update-trigger {{label.name}}-label" ng-if=vm.taskShowLabels ng-repeat="label in task.labels" title={{label.desc}} ng-bind=[label.desc,10]|cutstr></span></div>'),a.put("/ycjs/directive/comment/comment_list.html",'<div class=comment-list><div class="part-loading pt_20" ng-if=!vm.comments_loading_done></div><ul class=comments><li class=comment-item bindonce="" ng-repeat="comment in vm.comments" repeat-done=vm.js_repeat_done()><wt-avatar member=comment.owner size=40 class=comment-avatar></wt-avatar><div class=comment><a href=javascript:; class=comment-name ng-bind=comment.owner.display_name></a> <span class=comment-time bo-class="{true:\'date\',false:\'\'}[comment.type==1]" ng-bind="comment.create_date | fromNow"></span> <span class=comment-meta ng-if=!vm.isArchived><a href=javascript:; ng-click=vm.js_reply_comment(comment) class=comment-action bo-if="comment.type==1 && (global.prj_module.comment | permission:project.permission)">回复</a> <a href=javascript:; ng-click=vm.js_pop_delete_comment($event,comment) class="comment-action js-popbox" bo-if="comment.owner.uid == global.me.uid && comment.type == 1 && (global.prj_module.comment | permission:project.permission)">删除</a></span><div class=current-comment-wrap ng-class="{\'current-comment-wrap--border\':comment.files}"><div class=current-comment wt-markdown=comment.message></div><div class=comment-attachments><wt-attachment ng-repeat="file in comment.files" file=file></wt-attachment></div></div><div class="edit-controls clearfix" id="div_comment_{{ comment.cid }}" bo-show=comment.is_edit wt-show-edit=comment.is_edit></div></div></li></ul><div class=new-comment ng-if=!vm.isArchived ng-show="global.prj_module.comment | permission:permission"><hr ng-if="vm.comments.length >0"><wt-new-comment new_comment=vm.new_comment at_members=vm.at_members pid=vm.pid xid=vm.xid save=vm.js_save_comment(vm.new_comment)></wt-new-comment></div></div>'),a.put("/ycjs/directive/comment/new_comment.html",'<div class=new-comment-edit><textarea wt-ctrl-enter=vm.parse_save(vmNewComment) atwho-members=vmAtMembers wt-atwho="" placeholder="说点什么(按Ctrl + 回车键提交)" wt-paste-file=vm.js_files_select($files) ng-model=vmNewComment.message>\n    </textarea><div class=comment-upload-queue><div class=comment-attachments><wt-attachment ng-repeat="file in vmNewComment.files | filter:{pid:project.pid}" file=file del="vm.js_del_attachment_comment($event, file)"></wt-attachment></div><div class=comment-upload-item ng-repeat="file in vmNewComment.uploading_files"><div class=file-name title={{file.original.name}}>{{file.original.name}}</div><span class=error ng-if=file.error><span class="label label-danger">{{file.error}}-{{ file.error | fileuploadErrorInfo }}</span><br></span><div ng-if=!file.success class="progress progress-striped active in"><div class="progress-bar progress-bar-success" ng-style="{width: file.percent + \'%\'}"></div></div><span href=javascript:; class=cancel ng-click=file.cancel() ng-hide=!file.cancel>取消</span></div></div><div class=add-controls><ul class="nav nav-pills"><li class="btn-group js-popbox dropup mr_5" data-placement=left data-align=bottom><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=添加附件><i class="fa fa-paperclip"></i></a><ul class=dropdown-menu><li><a href=javascript:; ngf-multiple=true ngf-select ngf-change=vm.js_files_select($files)><i class="fa fa-desktop"></i>本地上传</a></li><li><a data-placement=top href=javascript:; add-file-from-project=vmPid><i class="fa fa-file"></i> 从项目文件选择</a></li></ul></li><li class=divider-v></li><li class="js-popbox mr_10"><a ng-click=vm.js_pop_emojis($event) data-placement=right data-align=top href=javascript:;><i class="fa fa-smile-o"></i></a></li><li><a ng-click=vm.js_metion_member($event) class=js-popbox data-placement=right data-align=top href=javascript:;><i class="fa fa-at"></i></a></li></ul><button class="btn btn-success pull-right" data-loading-text=保存中... wt-loading-status=vmNewComment.is_saving ng-click=vm.parse_save(vmNewComment) data-ng-disabled="vmNewComment.uploading_files.length > 0">{{ {true:\'文件上传中...\',false:\'发表评论\'}[vmNewComment.uploading_files.length > 0] }}</button></div></div>'),a.put("/ycjs/directive/dropwindow/dropwindow.html","<div id=dropwindow><wt-notice-list ng-if=\"$root.global.leftmenu_current_expand=='notice'\"></wt-notice-list></div>"),a.put("/ycjs/directive/entity/entity.html",'<div class=slide-content wt-dragfile=dragfile_option wt-dragfile-enable="(global.prj_module.crud | permission:project.permission)"><div class="entity-well {{\'entity-well--\'+locator.xtype }}"><div class="part-loading mt_60" ng-if=!entity.loading_done></div><wt-entity-deny></wt-entity-deny><ng-include ng-if="locator.xtype == \'tasks\'" src="\'/ycjs/directive/entity/task.html\'"></ng-include><ng-include ng-if="locator.xtype == \'files\'" src="\'/ycjs/directive/entity/file.html\'"></ng-include><ng-include ng-if="locator.xtype == \'pages\'" src="\'/ycjs/directive/entity/page.html\'"></ng-include><ng-include ng-if="locator.xtype == \'posts\'" src="\'/ycjs/directive/entity/post.html\'"></ng-include><ng-include ng-if="locator.xtype == \'events\'" src="\'/ycjs/directive/entity/event.html\'"></ng-include><ng-include ng-if="locator.xtype == \'emails\'" src="\'/ycjs/directive/entity/mail.html\'"></ng-include></div></div>'),a.put("/ycjs/directive/entity/event.html",'<div ng-controller=entityEventCtrl wt-dragfile=vm.js_files_select($files) class=h_100p wt-dragfile-enable="(global.prj_module.crud | permission:project.permission)"><div class=entity-well-header ng-show="entity.loading_done && (global.prj_module.view | permission:entity.permission)"><ul class="entity-well-header-nav nav nav-pills"><li ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click=vm.js_show_editor(event) title=编辑 ng-class="{true:\'disabled\'}[vm.tempEvent.is_edit]"><i class=icon-pencil></i> 编辑</a></li><li class=js-popbox ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=添加附件><i class=icon-paper-clip></i> 附件</a><ul class="dropdown-menu dropdown-menu-left"><li><a href=javascript:; ngf-multiple=true ngf-select ngf-change=vm.js_files_select($files)><i class="fa fa-desktop"></i> 本地上传</a></li><li><a href=javascript:; data-placement=bottom wt-pop-add-attachment-from-file=vm.event><i class=icon-file></i>从项目文件选择</a></li><li class=divider></li><li wt-stop-propagation=click><div class="part-loading mt_20" ng-if=vm.js_uploadbylink_uploading></div><form class="form-inline text-nowarp" role=form ng-show=!vm.js_uploadbylink_uploading><input type=text ng-model=vm.uploadlink_url class="form-control input-sm" placeholder=粘贴下载链接> <button class="btn btn-default plr_10" type=button ng-click=vm.js_uploadbylink($event)>添加</button></form></li></ul></li><li class=divider-v ng-if="global.prj_module.crud | permission:entity.permission"></li><li class=js-popbox ng-if="!vm.event.is_deleted && (global.prj_module.crud | permission:entity.permission)"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=更多 aria-expanded=true><i class="fa fa-chevron-down"></i> 更多</a><ul class=dropdown-menu><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_show_trash($event, vm.event)"><i class=icon-trash></i> 删除</a></li><li><a href=javascript:; wt-entity-share="[\'\',project.pid,\'events\',vm.event]"><i class=icon-share></i> 共享</a></li><li><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul></li><li ng-if="!vm.event.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-share="[\'\',project.pid,\'events\',vm.event]"><i class=icon-share></i> 共享</a></li><li ng-if="!vm.event.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul><div class="pull-left color-text-act-red mt_10" ng-if=vm.event.is_deleted>日程已经于 {{vm.event.update_date | timeFormatZHCN}} 删除了</div><div class=entity-well-header-right><a href=javascript:; ng-click=locator.close()><i class="wtfont wtf-close"></i></a></div></div><div class="entity-well-scroll height-nonav height-nonav--notab" ng-show="entity.loading_done && (global.prj_module.view | permission:entity.permission)" wt-scroll=""><div class=entity-well-content><div ng-hide=vm.tempEvent.is_edit><ul class=entity-subtitle><li><a href=javascript:; ng-click="locator.toPath(\'/project/\'+project.pid+\'/event\')" ng-bind=vm.event.project.name></a></li></ul><div class=entity-title><h2 ng-click=vm.js_show_editor(vm.tempEvent) ng-bind=vm.event.name></h2></div><table class=table--event><tr><td class=item>开始时间</td><td class=time>{{vm.event.show_start_date}}</td></tr><tr><td class=item>结束时间</td><td class=time>{{vm.event.show_end_date}}</td></tr><tr ng-if="vm.event.location.length > 0"><td class=item>地&nbsp; 点</td><td ng-bind="vm.event.location||\'无\'"></td></tr><tr ng-hide="vm.event.recurrence == 0 "><td class=item>重&nbsp; 复</td><td><div class=time>{{vm.new_repeat_interval.desc}}</div></td></tr><tr ng-if="vm.event.summary.length > 0"><td class=item>日程描述</td><td><div class="event-summary-text markdown" wt-markdown=vm.event.summary></div></td></tr></table></div><div class="edit-section edit-section--event" ng-if=vm.tempEvent.is_edit><div><div class=input-section><input type=text ng-model=vm.tempEvent.name wt-enter="vm.js_set_update($event,vm.event, vm.tempEvent)" class="form-control help-block" placeholder=日程名称 required wt-focus=vm.eventTitleInputFocus></div><div class=input-section><span class=input-label>开始：</span> <input wt-pop-full-datepicker=vm.start_date_options type=text ng-model=vm.tempEvent.start_date class="form-control date js-popbox" data-placement=bottom readonly=readonly required><select ng-model=vm.tempEvent.start_hour ng-options="time for time in vm.start_hour_sections" class="form-control hour"></select><span class=separation>:</span><select ng-model=vm.tempEvent.start_minute ng-options="time for time in vm.start_minute_sections" class="form-control minute"></select></div><div class=input-section><span class=input-label>结束：</span> <input type=text ng-model=vm.tempEvent.end_date wt-pop-full-datepicker=vm.end_date_options class="form-control date js-popbox" data-placement=bottom readonly=readonly required><select ng-model=vm.tempEvent.end_hour ng-options="time for time in vm.end_hour_sections" class="form-control hour"></select><span class=separation>:</span><select ng-model=vm.tempEvent.end_minute ng-options="time for time in vm.end_minute_sections" class="form-control minute"></select></div><div class=input-section><span class=input-label>位置：</span> <input type=text ng-model=vm.tempEvent.location class="form-control location" placeholder=位置(可选)></div><div class=input-section><span class=input-label>重复：</span> <span>{{vm.new_repeat_interval.desc}}</span></div><div class=input-section ng-if=vm.event.recurrence_id><span class=input-label>修改：</span><select class="form-control location" ng-model=vm.update.option ng-options="update_option.desc for update_option in vm.update.options_for_recurring_event"></select></div><wt-editor pid=vm.pid><textarea ng-model=vm.tempEvent.summary type=text wt-ctrl-enter="vm.js_set_update($event, vm.event,vm.tempEvent)" placeholder="添加日程描述(按Ctrl + 回车键提交)"></textarea></wt-editor></div><div class=form-group><button ng-click="vm.js_set_update($event, vm.event,vm.tempEvent)" data-loading-text=保存中... wt-loading-status=vm.event.is_saving class="btn btn-success mr_15">保存</button> <button ng-click=vm.js_cancel_editor(vm.event) class="btn btn-link btn-cancel">取 消</button></div></div><div class=entity-members><dl class="entity-members-assign entity-members-assign--nowatch"><dt>参与者</dt><dd><ul class=avatars><li ng-repeat="attendee in vm.event.attendees"><wt-avatar member=attendee class=js-popbox pop-member=attendee wt-pop-member=vm.pop_attendee_options data-placement=left></wt-avatar></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a class="avatar-add js-popbox" href=javascript:; data-placement=right data-align=center all-member-click="vm.js_attendee_all($event, members, xEntity)" wt-pop-toggle-members="vm.js_toggle_member($event, member, xEntity)" pid=vm.pid type=attendee entity=vm.event><span class=o><i class=icon-plus></i></span></a></li></ul></dd></dl></div><hr class=entity-hr ng-if="vm.event.files.length > 0"><div class=entity-well-content-module><dl class="module-attachment dragfile-hover-show" ng-if="vm.event.files.length==0 || vm.event.files == null"><dt><i class="fa fa-paperclip"></i> 附 件</dt><dd><div class=dragfile-hover-placeholder><span class=name><i class=icon-upload-alt></i>松开上传文件</span></div></dd></dl><dl class=module-attachment ng-if="vm.event.files.length > 0"><dt><i class="fa fa-paperclip"></i> 附 件</dt><dd><wt-attachment ng-repeat="file in vm.event.files" file=file fancygroup=filegroup-task gofile="vm.js_go_to_file(vm.pid, file.fid)" del="vm.js_del_attachment($event, file)" del-permission="global.prj_module.crud | permission:entity.permission"></wt-attachment><div class=task-attachment-add ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ngf-multiple=true ngf-select ngf-change=vm.js_files_select($files)>＋ 添加附件</a></div><div class=dragfile-hover-placeholder><span class=name><i class=icon-upload-alt></i>松开上传文件</span></div></dd></dl></div><hr class="entity-hr"><div class=entity-content-footer>{{vm.event.creator.display_name}}&nbsp; {{vm.event.create_date | datetimeAutoFormatZH}}，创建了日程</div></div><div class=entity-tabs><wt-item-comment-activity></wt-item-comment-activity></div></div></div>'),a.put("/ycjs/directive/entity/file.html",'<div ng-controller=entityFileCtrl wt-dragfile=vm.js_files_select($files) class=h_100p wt-dragfile-enable="(global.prj_module.crud | permission:project.permission)"><div class=entity-well-header ng-show="entity.loading_done && (global.prj_module.view | permission:entity.permission)"><ul class="entity-well-header-nav nav nav-pills"><li ng-if=vm.file.is_deleted class=entity-warning>文件已经于 {{vm.file.update_date | timeFormatZHCN}} 删除了</li><li ng-if="(vm.file | isPreviewFile)==2"><a href=javascript:; target=_blank ng-href="{{\'/files/\'+vm.file.fid+\'/preview\'}}"><i class="fa fa-eye"></i> 预览</a></li><li ng-if="vm.file.is_img && vm.file.path.length>0"><a class=fancybox-file href=javascript:; data-fancybox-group=file-detail-headerbtn data-fancybox-href="{{vm.file | wtBoxView}}" data-fancybox-type=image><i class="fa fa-eye"></i> 预览</a></li><li><a ng-href="{{vm.file | wtBoxDownload}}" target=_blank title=下载><i class="fa fa-download"></i> 下载</a></li><li class=divider-v ng-if="global.prj_module.crud | permission:entity.permission"></li><li ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ngf-multiple=false ngf-select ngf-change=vm.js_files_select($files) title=更新><i class="fa fa-refresh"></i> 更新</a></li><li class=js-popbox data-placement=bottom ng-show="!vm.file.is_deleted && (global.prj_module.crud | permission:entity.permission)"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=更多><i class="fa fa-chevron-down"></i> 更多</a><ul class="dropdown-menu pull-right"><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-class="{true:\'disabled\'}[vm.file.in_edit]" ng-click=vm.js_show_editor(vm.file) title=编辑><i class="fa fa-pencil"></i> 编辑</a></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_show_move_to_dialog($event, vm.file)"><i class="fa fa-share"></i> 移动</a></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_show_trash_dialog($event, vm.file)"><i class="fa fa-trash-o"></i> 删除</a></li><li ng-show="global.prj_module.crud | permission:entity.permission" class=divider></li><li><a href=javascript:; wt-entity-share="[\'\',project.pid,\'files\',vm.file]"><i class="fa fa-share-square-o"></i> 共享</a></li><li><a href=javascript:; wt-entity-print=""><i class="fa fa-print"></i> 打印</a></li><li><a href=javascript:; ng-click="vm.js_show_versions($event, vm.file)"><i class="fa fa-clock-o"></i> 历史版本</a></li></ul></li><li ng-if="!vm.file.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; ng-click="vm.js_show_versions($event, vm.file)"><i class=icon-print></i> 历史版本</a></li><li class=divider-v ng-if="!vm.file.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"></li><li ng-if="!vm.file.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-share="[\'\',project.pid,\'files\',vm.file]"><i class=icon-share></i> 共享</a></li><li ng-if="!vm.file.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul><div class=entity-well-header-right><a href=javascript:; ng-click=locator.close() title=关闭><i class="wtfont wtf-close"></i></a></div></div><div class="entity-well-scroll height-nonav height-nonav--notab" wt-scroll="" ng-show="entity.loading_done && (global.prj_module.view | permission:entity.permission) && vm.file.fid"><div class=entity-well-content><div ng-if=!vm.file.in_edit><ul class=entity-subtitle><li><a href=javascript:; class=name ng-click=vm.to_project(project.pid) ng-bind=project.name></a></li></ul><div class=entity-title><h2 ng-click=vm.js_show_editor(vm.file) ng-bind-html=vm.file.name></h2></div></div><div class=edit-section ng-if=vm.file.in_edit><input type=text wt-enter="vm.js_set_update($event, vm.file)" ng-model=vm.tmpFile.name class="form-control help-block" placeholder=文件名称 required wt-focus=vm.fileNameInputFocus><wt-editor pid=vm.pid><textarea ng-model=vm.tmpFile.desc type=text wt-ctrl-enter="vm.js_set_update($event, vm.file)" placeholder=添加文件描述></textarea></wt-editor><div class=form-group><button ng-click="vm.js_set_update($event, vm.file)" data-loading-text=保存中... class="btn btn-success mr_15">保&nbsp; 存</button> <button ng-click=vm.js_cancel_editor(vm.file) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></div><div class="entity-drag-drop dragfile-hover-placeholder"><span class=name><i class=icon-upload-alt></i>松开上传文件</span></div><div class="file-section dragfile-hover-hide" ng-hide=vm.file.in_edit ng-class="{true:\'file-section--onlyicon\'}[!vm.file.is_img]"><div class=file-icon ng-hide="vm.file.path.length==0" ng-class="{true:\'fancybox-file\',false:\'file-onlyicon\'}[vm.file.is_img]" data-fancybox-group=file-detail href="{{vm.file | wtBoxView}}" data-fancybox-type=image><img ng-if="(vm.file | isPreviewFile)==2" ng-src="{{vm.file | wtBoxView}}" alt="{{ vm.file.name }}"> <img ng-if="(vm.file | isPreviewFile)!=2" ng-src="{{vm.file | wtBoxView}}" alt="{{ vm.file.name }}"></div><div class=file-section-meta><span class=file-meta><span class=file-ext ng-bind=vm.file|fileExt|uppercase></span>文件 &nbsp; &nbsp; &nbsp; <span class=file-size ng-bind=vm.file.size|fileSize></span></span> &nbsp; &nbsp; &nbsp; <span class=file-meta-creater>{{vm.file.update_user.display_name}}&nbsp;上传于 <span class=datetime ng-bind="vm.file.update_date | datetimeAutoFormatZH"></span></span> <a ng-if="(vm.file | isPreviewFile)==2" ng-href="{{\'/files/\'+vm.file.fid+\'/preview\'}}" target=_blank class="btn file-meta-priviewbtn">在线预览</a></div></div><a class=entity-desc-edit ng-if="(!vm.file.desc || vm.file.desc.length == 0) && !vm.file.in_edit && (global.prj_module.crud | permission:entity.permission)" href=javascript:; ng-click=vm.js_show_editor(vm.file)>添加文件描述</a><div ng-if="!vm.file.in_edit && (vm.file.desc || vm.file.desc.length != 0)" class="entity-desc markdown" wt-markdown=vm.file.desc></div><div class=entity-members><dl class="entity-members-watchs entity-members-watchs--noassign"><dt>关注的人</dt><dd><ul class=avatars><li ng-repeat="member in vm.file.watchers"><wt-avatar member=member class=js-popbox pop-member=member wt-pop-member=vm.pop_watcher_options data-placement=left></wt-avatar></li><li ng-show="global.prj_module.crud | permission:entity.permission"><div class="js-popbox text-center"><a class=avatar-add href=javascript:; data-placement=right data-align=center wt-pop-toggle-members="vm.js_toggle_watch($event, member, xEntity)" pid=vm.pid type=watch entity=vm.file all-member-click="vm.js_watch_all($event, members, xEntity)"><span class=o><i class=icon-plus></i></span></a></div></li><li ng-show="(project.curr_role | is_guest) && (global.prj_module.watch | permission:entity.permission)"><div class="js-popbox text-center" ng-click="vm.js_toggle_watch($event, global.me, vm.file)"><a class=avatar-add href=javascript:; title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" data-placement=left data-align=center><span class=o><i class="{{{true:\'icon-minus\',false:\'icon-plus\'}[global.me.watched]}}"></i></span></a></div></li></ul></dd></dl></div><hr class=entity-hr ng-if="vm.file.link_count > 0"><div class=entity-well-content-module ng-if="vm.file.link_count > 0"><dl class=module-links><dt><i class="fa fa-link"></i> 相关链接</dt><dd><dl class=entity-links><dt ng-if="vm.file.tasks.length>0">任&nbsp;务</dt><dd ng-if="vm.file.tasks.length>0"><ul><li class=link-item ng-repeat="task in vm.file.tasks"><a href=javascript:; ng-click="locator.openTask(vm.file.pid, task.tid)" ng-bind=task.name></a></li></ul></dd><dt ng-if="vm.file.posts.length>0">话&nbsp;题</dt><dd ng-if="vm.file.posts.length>0"><ul><li class=link-item ng-repeat="post in vm.file.posts"><a href=javascript:; ng-click="locator.openPost(vm.file.pid, post.post_id)" ng-bind=post.name></a></li></ul></dd><dt ng-if="vm.file.events.length>0">日&nbsp;程</dt><dd ng-if="vm.file.events.length>0"><ul><li class=link-item ng-repeat="event in vm.file.events"><a href=javascript:; ng-click="locator.openEvent(vm.file.pid, event.event_id)" ng-bind=event.name></a></li></ul></dd></dl></dd></dl></div><hr class=entity-hr></div><div class=entity-tabs><wt-item-comment-activity></wt-item-comment-activity></div></div></div>'),
a.put("/ycjs/directive/entity/mail.html",'<div ng-controller=entityMailCtrl><div class=entity-well-header ng-show=entity.loading_done><ul class="entity-well-header-nav nav nav-pills"><li><a href=javascript:; ng-click="vm.js_pop_move($event, vm.mail)" title=转化为话题><i class=icon-share-alt></i> 转化为话题</a></li><li class=divider-v></li><li class=js-popbox><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=更多 aria-expanded=true><i class="fa fa-chevron-down"></i> 更多</a><ul class=dropdown-menu><li><a href=javascript:; ng-click="vm.js_pop_trash($event, vm.mail)"><i class=icon-trash></i> 删除</a></li><li><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul></li></ul><div class=entity-well-header-right><a href=javascript:; ng-click=locator.close()><i class="wtfont wtf-close"></i></a></div></div><div class="entity-well-scroll height-nonav height-nonav--notab" ng-show="entity.loading_done " wt-scroll=""><div class=entity-well-content><div class=entity-title><h2>{{vm.mail.subject}}</h2></div><div class=entity-subtitle><ul class=entity-subtitle><li><span>&nbsp;{{vm.mail.create_date | fromNow}}</span> | <span>{{vm.mail.from}}</span></li></ul></div><div class=email-content><div class=markdown wt-markdown=vm.mail.body_html></div></div></div></div></div>'),a.put("/ycjs/directive/entity/page.html",'<div ng-controller=entityPageCtrl><div class=entity-well-header ng-class="{\'entity-well-header--page-fullscreen\':vm.is_fullscreen}" ng-if="entity.loading_done && (global.prj_module.view | permission:entity.permission)"><ul class="entity-well-header-nav nav nav-pills"><li ng-if=page.is_deleted class=entity-warning>文档已经于 {{page.update_date | timeFormatZHCN}} 删除了</li><li ng-if=!page.is_deleted><a href=javascript:; ng-click=vm.js_toggle_fullscreen($event)><i class="fa fa-arrows-alt"></i> {{ {false:\'全屏\',true:\'退出全屏\'}[vm.is_fullscreen] }}</a></li><li ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="locator.toPath(\'/project/\'+page.pid+\'/page/\'+page.page_id+\'/edit\')" title=编辑><i class="fa fa-pencil"></i> 编辑</a></li><li ng-if="!(page.parent_id) && (global.prj_module.crud | permission:entity.permission)"><a href=javascript:; ng-click="locator.toPath(\'/project/\'+page.pid+\'/page/add/\'+page.page_id)" title=添加子文档><i class="fa fa-file-text-o"></i> 添加子文档</a></li><li class=divider-v ng-if="global.prj_module.crud | permission:entity.permission"></li><li class=js-popbox ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown><i class="fa fa-chevron-down"></i> 更多</a><ul class="dropdown-menu pull-right"><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click=vm.js_show_trash($event)><i class=icon-trash></i> 删除</a></li><li ng-show="global.prj_module.crud | permission:entity.permission" class=divider></li><li><a href=javascript:; wt-entity-share="[\'\',project.pid,\'pages\',page]"><i class=icon-share></i> 共享</a></li><li><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li><li ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="locator.toPath(\'/project/\'+page.pid+\'/page/\'+page.page_id+\'/versions\')"><i class=icon-time></i> 历史版本</a></li></ul></li><li ng-if="!page.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-share="[\'\',project.pid,\'pages\',page]"><i class=icon-share></i> 共享</a></li><li ng-if="!page.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul><div class=entity-well-header-right><a href=javascript:; ng-click=locator.close()><i class="wtfont wtf-close"></i></a></div></div><div class="entity-well-scroll height-nonav height-nonav--notab" ng-class="{\'entity-well-scroll--page-fullscreen\':vm.is_fullscreen}" wt-scroll="" ng-show="entity.loading_done && page.page_id"><div class=entity-well-content><div ng-hide=page.in_edit><ul class=entity-subtitle><li><a href=javascript:; ng-click=vm.js_go_to_pages() ng-bind=project.name></a></li><li ng-if=page.parent_id ng-bind-html=page.parent_name></li></ul><div class=entity-title><h2><span ng-bind-html=page.name></span></h2></div><div class="entity-desc markdown" wt-markdown=page.content></div></div><div class=entity-members><dl class="entity-members-watchs entity-members-watchs--noassign"><dt>关注的人</dt><dd><ul class=avatars><li ng-repeat="member in page.watchers"><wt-avatar member=member class=js-popbox pop-member=member wt-pop-member=pop_watcher_options data-placement=bottom data-align=left></wt-avatar></li><li ng-show="global.prj_module.crud | permission:entity.permission"><div class="js-popbox text-center"><a class=avatar-add href=javascript:; data-placement=right data-align=center data-auto-adapt=true wt-pop-toggle-members="vm.js_toggle_watch($event, member, xEntity)" pid=vm.pid type=watch entity=page all-member-click="vm.js_watch_all($event, members, xEntity)"><span class=o><i class=icon-plus></i></span></a></div></li><li ng-show="(project.curr_role | is_guest) && (global.prj_module.watch | permission:entity.permission)"><div class="js-popbox text-center"><a class=avatar-add href=javascript:; title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" ng-click="vm.js_toggle_watch($event, global.me, page)" data-placement=left data-align=center><span class=o><i class="{{{true:\'icon-minus\',false:\'icon-plus\'}[global.me.watched]}}"></i></span></a></div></li></ul></dd></dl></div><hr class=entity-hr ng-if="page.sub_pages.length>0 || page.parent_name"><div class=entity-well-content-module ng-if="page.sub_pages.length>0"><dl class=module-sub-pages><dt><i class="fa fa-file-text-o"></i> 子文档</dt><dd><ul><li ng-repeat="sub in page.sub_pages"><a href=javascript:; ng-click="vm.is_fullscreen=false;locator.openPage(page.pid,sub.page_id)"><span ng-bind=sub.name></span></a></li></ul></dd></dl></div><div class=entity-well-content-module ng-if=page.parent_name><dl class=module-sub-pages><dt><i class="fa fa-file-text-o"></i> 主文档</dt><dd><ul><li><a href=javascript:; ng-click="vm.is_fullscreen=false;locator.openPage(page.pid,page.parent_id)"><span ng-bind=page.parent_name></span></a></li></ul></dd></dl></div><hr class=entity-hr><div class=entity-content-footer>{{page.last_updator.display_name}} 最后保存于{{page.update_date | fromNow}} 当前版本：#{{page.version}}</div></div><div class=entity-tabs ng-class="{\'entity-tabs--page-fullscreen\':vm.is_fullscreen}"><wt-item-comment-activity></wt-item-comment-activity></div></div></div>'),a.put("/ycjs/directive/entity/pop_share_entity.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-when=select_share_method class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>选择共享{{entity}}方式</h3></div><div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click="js_step(\'share_by_email\')" class=w_280>发送到邮箱</a></li><li><a href=javascript:; ng-click="js_step(\'share_by_link\')">发送共享链接</a></li></ul></div></li><li ng-switch-when=share_by_email class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button> <button class="back icon-chevron-left" ng-click="js_step(\'select_share_method\')"></button><h3>通过邮件共享{{entity}}</h3></div><form name=share_entity_form w5c-form-validate="" class=wt-form novalidate role=form data-ng-hide=send_success><div class=popbox-body><input name=email_address ng-model=share.email_address placeholder=邮箱地址(多个以分号隔开) type=text wt-multiple-email class="form-control w_260" required autofocus></div><div class=popbox-footer><button w5c-form-submit="js_share_entity(share_entity_form, share.email_address)" data-loading-text=发送中... class="btn btn-success mr_15" wt-loading-status=is_sharing>发&nbsp; 送</button> <button ng-click=js_close(result) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></form><div class=popbox-body data-ng-show=send_success><p class="alert alert-success">共享{{entity}}成功！</p></div></li><li ng-switch-when=share_by_link class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button> <button class="back icon-chevron-left" ng-click="js_step(\'select_share_method\')"></button><h3>通过链接共享{{entity}}</h3></div><div class=popbox-body><dd ng-if="showing_link === false" class=w_260><span>生成共享链接，通过QQ、邮箱等方式发送给相关成员，他们即可直接通过链接访问当前{{entity}}。</span><br><br><a href=javascript:; ng-click=toggle_share_link()>生成链接</a></dd><dd ng-if="showing_link === true" class=w_260><input type=text ng-model=share_link wt-focus=input_link_focus class="form-control help-block" readonly=readonly wt-auto-click-select><br><a href=javascript:; ng-click=toggle_share_link()>关闭链接</a></dd></div></li></ul>'),a.put("/ycjs/directive/entity/post.html",'<div ng-controller=entityPostCtrl wt-dragfile=vm.js_files_select($files) class=h_100p wt-dragfile-enable="(global.prj_module.crud | permission:project.permission)"><div class=entity-well-header ng-show="entity.loading_done && (global.prj_module.view | permission:entity.permission)"><ul class="entity-well-header-nav nav nav-pills"><li ng-if=vm.post.is_deleted class=entity-warning>话题已经于 {{vm.post.update_date | timeFormatZHCN}} 删除了</li><li ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click=vm.js_show_editor()><i class="fa fa-pencil"></i> 编辑</a></li><li class=js-popbox ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=添加附件><i class="fa fa-paperclip"></i> 附件</a><ul class=dropdown-menu><li><a href=javascript:; ngf-multiple=true ngf-select ngf-change=vm.js_files_select($files)><i class="fa fa-desktop"></i> 本地上传</a></li><li><a href=javascript:; data-placement=bottom wt-pop-add-attachment-from-file=vm.post><i class="fa fa-file"></i> 从项目文件选择</a></li><li class=divider></li><li wt-stop-propagation=click><div class="part-loading mt_20" ng-if=vm.js_uploadbylink_uploading></div><form class="form-inline text-nowarp" role=form ng-show=!js_uploadbylink_uploading><input type=text ng-model=vm.uploadlink_url class="form-control input-sm" placeholder=粘贴下载链接> <button class="btn btn-default plr_10" type=button ng-click=vm.js_uploadbylink($event)>添加</button></form></li></ul></li><li class=divider-v ng-if="!vm.post.is_deleted && (global.prj_module.crud | permission:entity.permission)"></li><li class=js-popbox ng-if="!vm.post.is_deleted && (global.prj_module.crud | permission:entity.permission)"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=更多><i class="fa fa-chevron-down"></i> 更多</a><ul class=dropdown-menu><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_trash($event, vm.post)"><i class=icon-trash></i> 删除</a></li><li><a href=javascript:; wt-entity-share="[\'\',project.pid,\'posts\',vm.post]"><i class=icon-share></i> 共享</a></li><li><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul></li><li ng-if="!vm.post.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-share="[\'\',project.pid,\'posts\',vm.post]"><i class=icon-share></i> 共享</a></li><li ng-if="!vm.post.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul><div class=entity-well-header-right><a href=javascript:; ng-click=locator.close()><i class="wtfont wtf-close"></i></a></div></div><div class="entity-well-scroll height-nonav height-nonav--notab" wt-scroll="" ng-show="entity.loading_done && (global.prj_module.view | permission:entity.permission)"><div class=entity-well-content><div ng-if=!vm.temp.is_edit><ul class=entity-subtitle><li><a href=javascript:; ng-click=vm.js_go_to_posts() ng-bind=project.name></a></li></ul><div class=entity-title><span class="comment_count_style pull-right" title=话题有{{vm.post.comment_count}}个评论>{{vm.post.comment_count}}</span><h2 ng-click=vm.js_show_editor()><span ng-bind-html=vm.post.name></span></h2></div><div class=entity-meta><span class=ml_5>{{vm.post.owner.display_name}}&nbsp;发起于 {{vm.post.create_date | fromNow}}</span></div><div class="entity-desc markdown" wt-markdown=vm.post.content></div></div><div class=edit-section ng-if=vm.temp.is_edit wt-ctrl-enter=vm.js_update_post(vm.post)><div class=entity-mkd-editor-wrapper><wt-new-editor edit-title=vm.temp.name edit-content=vm.temp.content pid=vm.post.pid entity-id=vm.post.post_id entity-type=vm.post></wt-new-editor></div><div class=form-group><button ng-click=vm.js_update_post(vm.post) data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_setting_content>保&nbsp; 存</button> <button ng-click=vm.js_cancel_editor() class="btn btn-link btn-cancel">取&nbsp; 消</button></div></div><div class=entity-members><dl class="entity-members-watchs entity-members-watchs--noassign"><dt>关注的人</dt><dd><ul class=avatars><li ng-repeat="member in vm.post.watchers"><wt-avatar member=member class=js-popbox pop-member=member wt-pop-member=vm.pop_watcher_options data-placement=left></wt-avatar></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a class="avatar-add js-popbox" href=javascript:; data-placement=right data-align=center wt-pop-toggle-members="vm.js_toggle_watch($event, member, xEntity)" pid=vm.pid type=watch entity=vm.post all-member-click="vm.js_watch_all($event, members, xEntity)"><span class=o>＋</span></a></li><li ng-show="(project.curr_role | is_guest) && (global.prj_module.watch | permission:entity.permission)"><div class="js-popbox text-center" ng-click="vm.js_toggle_watch($event, global.me, vm.post)" data-placement=left data-align=center><a title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" class=avatar-add href=javascript:;><span class=o>{{{true:\'－\',false:\'＋\'}[global.me.watched]}}</span></a></div></li></ul></dd></dl></div><div class=entity-well-content-module><dl class="module-attachment dragfile-hover-show" ng-if="vm.post.files.length==0 || vm.post.files == null"><dt><i class="fa fa-paperclip"></i> 附 件</dt><dd><div class=dragfile-hover-placeholder><span class=name><i class=icon-upload-alt></i>松开上传文件</span></div></dd></dl><dl class=module-attachment ng-if="vm.post.files.length > 0"><dt><i class="fa fa-paperclip"></i> 附件</dt><dd><wt-attachment ng-repeat="file in vm.post.files" file=file gofile="vm.js_go_to_file(vm.pid, file.fid)" fancygroup=filegroup-task del="vm.js_del_attachment($event, file)" del-permission="global.prj_module.crud | permission:entity.permission"></wt-attachment><div class=dragfile-hover-placeholder><span class=name><i class=icon-upload-alt></i>松开上传文件</span></div></dd></dl></div></div><div class=entity-tabs><wt-item-comment-activity></wt-item-comment-activity></div></div></div>'),a.put("/ycjs/directive/entity/task.html",'<div wt-dragfile=vm.js_files_select($files) ng-controller=entityTaskCtrl class=h_100p wt-dragfile-enable="(global.prj_module.crud | permission:project.permission)"><div class=entity-well-header ng-show="entity.loading_done && (global.prj_module.view | permission:entity.permission)"><ul class="entity-well-header-nav nav nav-pills"><li ng-if=vm.task.is_deleted class=entity-warning>任务已经于 {{vm.task.update_date | timeFormatZHCN}} 删除了</li><li ng-if=vm.task.archived class=entity-info>任务已经于 {{vm.task.update_date | timeFormatZHCN}} 归档了</li><li ng-if=vm.task.archived class=divider-v></li><li ng-if=vm.task.archived><a href=javascript:; ng-click="vm.js_show_entry_menu($event, vm.task)" title=激活><i class=icon-undo></i>激活</a></li><li class=js-popbox ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_show_datepicker($event, vm.task)" title=截止日期><i class="fa fa-clock-o"></i> 日期</a></li><li class=js-popbox ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_assign_label($event, vm.task)"><i class="fa fa-tag"></i> 标签</a></li><li ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click=vm.js_show_todo(vm.task) title=添加检查项><i class="fa fa-th-list"></i> 检查项</a></li><li class=js-popbox ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=添加附件><i class="fa fa-paperclip"></i> 附件</a><ul class=dropdown-menu><li><a href=javascript:; ngf-multiple=true ngf-select ngf-change=vm.js_files_select($files)><i class="fa fa-desktop"></i>本地上传</a></li><li><a href=javascript:; data-placement=bottom wt-pop-add-attachment-from-file=vm.task><i class="fa fa-file"></i> 从项目文件选择</a></li><li class=divider></li><li wt-stop-propagation=click><div class="part-loading mt_20" ng-if=vm.js_uploadbylink_uploading></div><form class="form-inline text-nowarp" role=form ng-show=!vm.js_uploadbylink_uploading><input type=text ng-model=vm.uploadlink_url class="form-control input-sm fs_14" placeholder=粘贴下载链接> <button class="btn btn-default plr_10" type=button ng-click=vm.js_uploadbylink($event)>添加</button></form></li></ul></li><li class=divider-v ng-if="!vm.task.is_deleted && (global.prj_module.crud | permission:entity.permission)"></li><li class=js-popbox ng-if="!vm.task.is_deleted && (global.prj_module.crud | permission:entity.permission)"><a href=javascript:; class=dropdown-toggle data-toggle=dropdown title=更多><i class="fa fa-chevron-down"></i> 更多</a><ul class=dropdown-menu><li ng-show="global.prj_module.setting | permission:project.permission"><a href=javascript:; ng-click="vm.js_timingtask($event, vm.task)"><i class=icon-repeat></i> 设为循环任务</a></li><li ng-show="global.prj_module.crud | permission:entity.permission" class=js-popbox><a href=javascript:; ng-click="vm.js_archive($event, vm.task)"><i class=icon-archive></i> 归档</a></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click=vm.js_show_editor(vm.task) ng-class="{true:\'disabled\'}[vm.temp.is_edit]"><i class=icon-pencil></i> 编辑</a></li><li ng-show="global.prj_module.crud | permission:entity.permission" class=divider></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.show_task_move_dialog($event, vm.task)"><i class=icon-share-alt></i> 移动</a></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_show_copy($event, vm.task)"><i class=icon-copy></i> 拷贝</a></li><li ng-show="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click="vm.js_trash($event, vm.task)"><i class=icon-trash></i> 删除</a></li><li ng-show="global.prj_module.crud | permission:entity.permission" class=divider></li><li><a href=javascript:; wt-entity-share="[\'\',project.pid,\'tasks\',vm.task]"><i class=icon-share></i> 共享</a></li><li><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul></li><li ng-if="!vm.task.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-share="[\'\',project.pid,\'tasks\',vm.task]"><i class=icon-share></i> 共享</a></li><li ng-if="!vm.task.is_deleted && ( (global.prj_module.view | permission:entity.permission) && !(global.prj_module.crud | permission:entity.permission) )"><a href=javascript:; wt-entity-print=""><i class=icon-print></i> 打印</a></li></ul><div class=entity-well-header-right><a href=javascript:; ng-click=locator.close()><i class="wtfont wtf-close"></i></a></div></div><div class="entity-well-scroll height-nonav height-nonav--notab" ng-if="entity.loading_done && (global.prj_module.view | permission:entity.permission)" wt-scroll><div class=entity-well-content><div ng-if=!vm.temp.is_edit><ul class=entity-subtitle><li><a href=javascript:; ng-click=vm.js_go_to_tasks() ng-bind=[project.name,20]|cutstr></a></li><li ng-bind-html=vm.task.entry_name></li></ul><div class=entity-title><a href=javascript:; ng-click=vm.js_complete_task(vm.task)><i class="{{vm.task.completed ? \'icon-check-sign\' : \'icon-check-empty\'}}"></i></a><h2 ng-click=vm.js_show_editor(vm.task)><span ng-class="{\'task-completed-style\':vm.task.completed}" ng-bind-html=vm.task.name></span></h2></div><a class=entity-desc-edit ng-if="!vm.task.desc && (global.prj_module.crud | permission:entity.permission)" href=javascript:; ng-click=vm.js_show_editor(vm.task)>添加任务描述</a><div class="entity-desc markdown" ng-if=vm.task.desc wt-markdown=vm.task.desc></div></div><div class=edit-section ng-if=vm.temp.is_edit><div><input type=text ng-model=vm.temp.name wt-enter="vm.js_set_update($event, vm.task)" class="form-control help-block" placeholder=任务名称 required><wt-editor pid=vm.pid><textarea ng-model=vm.temp.desc type=text wt-ctrl-enter="vm.js_set_update($event, vm.task)" placeholder="添加任务描述(按Ctrl + 回车键提交)" wt-focus=""></textarea></wt-editor></div><div class=form-group><button ng-click="vm.js_set_update($event, vm.task)" data-loading-text=保存中... wt-loading-status=vm.task.is_saving class="btn btn-success mr_15">保&nbsp; 存</button> <button ng-click=vm.js_cancel_editor(vm.task) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></div><div class=entity-members><dl class=entity-members-assign ng-if="vm.task.members.length > 0 || (global.prj_module.crud | permission:entity.permission)"><dt>分配任务给</dt><dd><ul class=avatars><li ng-repeat="member in vm.task.members"><wt-avatar member=member class=js-popbox pop-member=member wt-pop-member=pop_member_options data-placement=left></wt-avatar></li><li ng-if="global.prj_module.crud | permission:entity.permission"><div class="js-popbox text-center" data-placement=left data-align=center wt-pop-toggle-members="vm.js_toggle_member($event, member, xEntity)" pid=vm.pid type=member entity=vm.task><a class=avatar-add href=javascript:;><span class=o>＋</span></a></div></li></ul></dd></dl><dl class=entity-members-watchs ng-if="vm.task.watchers.length > 0 || (global.prj_module.crud | permission:entity.permission)"><dt>关注的人</dt><dd><ul class=avatars><li ng-repeat="watcher in vm.task.watchers"><wt-avatar member=watcher class=js-popbox pop-member=watcher wt-pop-member=pop_watcher_options data-placement=left></wt-avatar></li><li ng-show="global.prj_module.crud | permission:entity.permission"><div class="js-popbox text-center" wt-pop-toggle-members="vm.js_toggle_watch($event, member, xEntity)" pid=vm.pid type=watch entity=vm.task all-member-click="vm.js_watch_all($event, members, xEntity)" data-placement=left data-align=center><a class=avatar-add href=javascript:;><span class=o>＋</span></a></div></li><li ng-show="(project.curr_role | is_guest) && (global.prj_module.watch | permission:entity.permission)"><div class="js-popbox text-center" ng-click="vm.js_toggle_watch($event, global.me, vm.task)" data-placement=left data-align=center><a title="{{{true:\'取消关注\',false:\'关注\'}[global.me.watched]}}" class=avatar-add href=javascript:;><span class=o>{{{true:\'－\',false:\'＋\'}[global.me.watched]}}</span></a></div></li></ul></dd></dl></div><hr class=entity-hr ng-if="vm.task.is_todo_edit || vm.task.todos.length > 0 || vm.task.expire_date || vm.task.labels.length > 0 || vm.task.files.length > 0"><div class=entity-well-content-module><dl class=module-expire-date ng-if=vm.task.expire_date><dt><i class="fa fa-clock-o"></i> 截止日期</dt><dd class=js_popbox><a href=javascript:; data-placement=right ng-click="vm.js_show_datepicker($event, vm.task)">{{vm.task.expire_date | dateAutoFormatZH}}</a></dd></dl><dl class=module-label ng-if="vm.task.labels.length > 0"><dt><i class="fa fa-tag"></i> 标 签</dt><dd><ul><li class="task-label {{label.name}}-label" title={{label.desc}} ng-repeat="label in vm.task.labels"><span ng-bind-html=[label.desc,12]|cutstr></span> <a class="icon-action edit icon-remove" ng-show="(global.prj_module.crud | permission:entity.permission)" href=javascript:; ng-click=vm.js_remove_label(label) title=移除该标签></a></li><li class=task-label-add><a ng-if="global.prj_module.crud | permission:entity.permission" href=javascript:; class=js-popbox ng-click="vm.js_assign_label($event, vm.task)" data-placement=left>＋ 添加标签</a></li></ul></dd></dl><dl class=module-todo ng-if="vm.task.is_todo_edit || vm.task.todos.length > 0"><dt><i class="fa fa-th-list"></i> 检查项</dt><dd><div class=progress-warp><span ng-bind="vm.task.percentage+\'%\'"></span><progressbar value=vm.task.percentage type=success></progressbar></div><div class=task-todos><ul class=sortable sortable=todo_sort_options><li class=todo-item ng-repeat="todo in vm.task.todos" pos={{todo.pos}} ng-class="{\'todo-item-done\':todo.checked!=0}" todo-id={{todo.todo_id}}><a class=todo-item-check ng-click="vm.js_complete_todo(vm.task, todo)"><i ng-class="{0: \'icon-check-empty\', 1: \'icon-check-sign\'}[todo.checked]"></i></a><div class="todo-item-edit editable"><p ng-hide=todo.is_todo_edit ng-click=vm.js_show_todo_editor(todo) ng-bind-html=todo.name></p><div class=edit ng-show=todo.is_todo_edit wt-show-edit=todo.is_todo_edit><div class=todo-edit-control><textarea ng-model=todo.name type=text class=form-control ui-keydown="{\'enter esc\':\'vm.js_keydown_edit_todo($event,vm.task,todo)\'}" atwho-members=vm.todo_atwho_members wt-atwho={emojis:false}></textarea></div><div class=mb_10><button ng-click=vm.js_save_todo($event,todo) data-loading-text=保存 wt-loading-status=todo.is_saving class="btn btn-success mr_15">保存</button> <button class="btn btn--warning" ng-click="vm.js_del_todo(vm.task, todo)">删除</button></div></div></div></li></ul></div><div class=new-todo ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ng-click=vm.js_show_add_todo_editor(vm.task) ng-if=!vm.task.is_add_todo_edit>＋ 添加检查项</a><div class=new-todo-control ng-if=vm.task.is_add_todo_edit wt-show-edit=vm.task.is_add_todo_edit><div style="width:100%; display:block"><textarea type=text atwho-members=vm.todo_atwho_members wt-atwho={emojis:false} ui-keydown="{\'enter esc\':\'vm.js_keydown_add_todo($event,vm.task,vm.new_todo)\'}" class="new-todo-text form-control" ng-model=vm.new_todo.temp_name placeholder=输入检查项内容></textarea></div><div><button class="btn btn-success mr_15" data-loading-text=添加中... wt-loading-status=vm.new_todo.is_saving ng-click="vm.js_add_todo(vm.task, vm.new_todo)">添&nbsp; 加</button> <button class="btn btn-link btn-cancel" ng-click=vm.js_cancel_add_todo_editor(vm.task)>取&nbsp; 消</button></div></div></div></dd></dl><dl class="module-attachment dragfile-hover-show" ng-if="vm.task.files == null"><dt><i class="fa fa-paperclip"></i> 附 件</dt><dd><div class=dragfile-hover-placeholder><span class=name><i class=icon-upload-alt></i>松开上传文件</span></div></dd></dl><dl class=module-attachment ng-if="vm.task.files.length > 0"><dt><i class="fa fa-paperclip"></i> 附 件</dt><dd><wt-attachment ng-repeat="file in vm.task.files" fancygroup=filegroup-task file=file gofile="vm.js_go_to_file(vm.pid, file.fid)" del="vm.js_del_attachment($event, file)" del-permission="global.prj_module.crud | permission:entity.permission"></wt-attachment><div class=task-attachment-add ng-if="global.prj_module.crud | permission:entity.permission"><a href=javascript:; ngf-multiple=true ngf-select ngf-change=vm.js_files_select($files)>＋ 添加附件</a></div><div class=dragfile-hover-placeholder><span class=name><i class=icon-upload-alt></i>松开上传文件</span></div></dd></dl></div><hr class="entity-hr"><div class=entity-content-footer><div ng-if=vm.task.creator>{{vm.task.creator.display_name}}&nbsp; {{vm.task.create_date | datetimeAutoFormatZH}}，创建了任务</div><div ng-if=vm.task.completer class=mt_10>{{vm.task.completer.display_name}}&nbsp; {{vm.task.completed_at | datetimeAutoFormatZH}}，完成了任务</div></div></div><div class=entity-tabs><wt-item-comment-activity></wt-item-comment-activity></div></div></div>'),a.put("/ycjs/directive/event/pop_add_event.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>新建日程</h3></div><div class=popbox-body ng-if="selected_projects.length == 0 && show_project_select"><div class="alert alert-warning">你还没有可以新建日程的项目。</div></div><div ng-class="{true:\'max-h445\',false:\'max-h400\'}[show_project_select]" wt-scroll><form ng-if="selected_projects.length > 0 || !show_project_select" name=new_event_form w5c-form-validate="" class=wt-form novalidate role=form><div class="popbox-body pop-add-event"><textarea wt-enter=js_save_event(new_event_form) name=event_name ng-model=new_event.name placeholder=请输入日程内容 class=form-control required wt-focus></textarea><div class=section-group ng-if=show_project_select><lable>项目：</lable><ui-select ng-change=js_change_project() ng-if=!is_team_calendar ng-model=new_event.pid theme=select2 append-to-body=false class=project-select><ui-select-match placeholder=请选择项目：>{{$select.selected.name}}</ui-select-match><ui-select-choices group-by="\'team_name\'" repeat="project.pid as project in selected_projects | propsFilter: {name: $select.search}"><div class=text-overflow ng-bind-html="project.name | highlight: $select.search"></div></ui-select-choices></ui-select><ui-select ng-change=js_change_project() ng-if=is_team_calendar ng-model=new_event.pid theme=select2 append-to-body=true class=project-select><ui-select-match placeholder=请选择项目：>{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="project.pid as project in selected_projects | propsFilter: {name: $select.search}"><div class=text-overflow ng-bind-html="project.name | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class=section-group><lable>开始：</lable><input name=start_date ng-model=new_event.start_date placeholder="" type=text class="form-control control-first" ng-click="js_to_set_date(\'start_date\')" readonly=readonly required><select ng-model=new_event.start_hour ng-options="time for time in start_hour_sections" class="form-control hour-select"></select><span class=separation>:</span><select ng-model=new_event.start_minute ng-options="time as time for time in start_minute_sections" class="form-control minute-select"></select></div><div class=section-group><lable>结束：</lable><input name=end_date ng-model=new_event.end_date placeholder="" type=text class="form-control control-first" ng-click="js_to_set_date(\'end_date\')" readonly=readonly required><select ng-model=new_event.end_hour class="form-control hour-select" ng-change=js_change_end_hour()><option ng-repeat="v in end_hour_sections" ng-selected="new_event.end_hour == v" value={{v}}>{{v}}</option></select><span class=separation>:</span><select ng-model=new_event.end_minute class="form-control minute-select"><option ng-repeat="v in end_minute_sections" ng-selected="new_event.end_minute == v" value={{v}}>{{v}}</option></select></div><div class=section-group><lable>位置：</lable><input name=event_location ng-model=new_event.location placeholder=位置(可选) type=text class="form-control location-input"></div><div class=section-group><lable>重复：</lable><select ng-model=new_event.repeat_interval ng-options="interval.desc for interval in repeat_intervals" class="form-control location-input"></select></div><div class=section-group><lable>参与人：</lable><ul class=entity-members><li data-ng-repeat="member in new_event.attendees"><a href=javascript:;><wt-avatar member=member faceclass=plr_5 size=40></wt-avatar></a></li><li><a class="avatar-add js-popbox" href=javascript:; ng-click=js_to_attendee($event) data-placement=left><span class=o><i class=icon-plus></i></span></a></li></ul></div><div class=section-group><button w5c-form-submit=js_save_event(new_event_form) data-loading-text=保存中... class="btn btn-success btn--big mr_15" wt-loading-status=new_event.is_saving>保&nbsp; 存</button> <button ng-click=js_close() class="btn btn-link btn-cancel">取&nbsp; 消</button></div></div></form></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>{{set_date_title}}</h3></div><div class=popbox-body><wt-full-datepicker default-date=current_date set-date=js_set_date(date) min-date=min_date></wt-full-datepicker></div></li><li ng-switch-when=2 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>参与人</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><input type=text ng-model=search_user_input placeholder=搜索成员 class="form-control help-block"><br><div class=part-loading ng-show=loading_members></div><ul class="popbox-menu checkable checkable--popboxmenu" data-ng-hide=loading_members><li class=member-item ng-repeat="member in members | filterMembers:search_user_input" ng-class="{\'selected\':member.assigned==1}"><wt-avatar member=member tabindex=-1 ng-click=js_toggle_member(member) name=true faceclass=plr_5 atname=true size=30></wt-avatar></li></ul></div></div><div class=hr ng-show=!loading_members></div><div class="popbox-footer popbox-footer-splite" ng-show=!loading_members><a class="action-item popbox-footer-splite-left" href=javascript:; ng-click=js_add_all(0)><span>全部添加</span></a> <a class="action-item popbox-footer-splite-right" href=javascript:; ng-click=js_step(0)><span>确定</span>({{ new_event.attendees.length }}/{{ members.length }})</a></div></li></ul>'),
a.put("/ycjs/directive/event/start_end_datatime.html",'<div class=start-end-datatime-warper ng-class="{\'flex-row\':vm.displayMode==\'row\',\'flex-col\':vm.displayMode==\'col\'}"><div class="start-warper flex-se1"><span class=title>开始：</span> <span class="datatime flex-row"><input name=start_date ng-change=vm.changeDatetime() ng-model=startDate placeholder="" type=text class="form-control flex-se3 date-select js-popbox" wt-pop-full-datepicker=vm.startDateOptions data-placement=bottom readonly=readonly required><select ng-model=vm.startHour class="form-control flex-se1 hour-select" ng-change=vm.changeDatetime({isChangeStartDate:true})><option ng-repeat="v in vm.allHourSections" value={{v}} ng-selected="v == vm.startHour">{{v}}</option></select><span class=separation>:</span><select ng-model=vm.startMinute class="form-control flex-se1 minute-select" ng-change=vm.changeDatetime({isChangeStartDate:true})><option ng-repeat="v in vm.allMinuteSections" value={{v}} ng-selected="v == vm.startMinute">{{v}}</option></select></span></div><div class="end-warper flex-se1"><span class=title>结束：</span> <span class="datatime flex-row"><input name=end_date ng-model=endDate placeholder="" type=text class="form-control flex-se3 date-select js-popbox" wt-pop-full-datepicker=vm.endDateOptions data-placement=bottom readonly=readonly required><select ng-model=vm.endHour class="form-control flex-se1 hour-select" ng-change=vm.changeDatetime()><option ng-repeat="v in vm.endHourSections" value={{v}} ng-selected="v == vm.endHour">{{v}}</option></select><span class=separation>:</span><select ng-model=vm.endMinute class="form-control flex-se1 minute-select" ng-change=vm.changeDatetime()><option ng-repeat="v in vm.endMinuteSections" value={{v}} ng-selected="v == vm.endMinute">{{v}}</option></select></span></div></div>'),a.put("/ycjs/directive/file/file_delete.html",'<div><div class=popbox-header><button ng-if=vm.has_back class="back icon-chevron-left" ng-click=vm.parse_back()></button> <button ng-if=vm.has_close class="cancel icon-remove" ng-click=vm.parse_close()></button><h3>删除文件</h3></div><div class=popbox-body><span>文件删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。</span></div><div class=popbox-footer><button ng-click=vm.js_del_file(vm.file) class="btn btn-danger" data-loading-text=删除中... wt-loading-status=vm.is_deleting>确定删除</button></div></div>'),a.put("/ycjs/directive/file/uploadFileProcess.html",'<div class=file-upload-process ng-if="$wtUpload.uploadQueueFiles.length > 0"><div class="alert-inner dropdown"><a href=javascript:; class=dropdown-toggle dropdown-toggle data-toggle=dropdown>正在上传文件，还有 {{$wtUpload.uploadQueueFiles.length}} 个文件 <i class="fa fa-caret-down pull-right"></i></a><ul class="dropdown-menu dropdown-menu-mw240 dropdown-menu-right" role=menu stop-propagation=click><li ng-repeat="file in $wtUpload.uploadQueueFiles"><a href=javascript:;><span>{{file.name || file.original.name}}</span> <small>({{file.percent}}%)</small> <span ng-if=file.error>{{file.error}}</span> <span ng-click=cancelUpload(file) class="fa fa-close" title=取消></span></a></li></ul></div></div>'),a.put("/ycjs/directive/leftmenu/leftmenu.html","<div id=leftmenu ng-if=!isFullscreen><div id=leftmenu_tab><div class=leftmenu_avatar><wt-avatar member=global.me size=40 status=true class=js-popbox ng-click=\"vm.expand_item('me')\" data-align=left></wt-avatar></div><div class=leftmenu_tab_wrap wt-scroll={&quot;advanced&quot;:{&quot;updateOnContentResize&quot;:false}}><ul id=leftmenu_current class=leftmenu_module><li><a wt-track=LeftMenu|Dashboard href=javascript:; tooltip-placement=right tooltip-animation=false tooltip=\"{{{true:'工作台'}[!$root.global.leftmenu_current_expand]}}\" ng-class=\"{'active':$root.global.header_menu=='dashboard'&&$root.global.leftmenu_current_expand==''}\" ng-click=vm.goto_dashboard()><i class=\"wtfont wtf-dashboard\"></i></a></li><li><a href=javascript:; tooltip-placement=right tooltip-animation=false tooltip=\"{{{true:'搜索'}[!$root.global.leftmenu_current_expand]}}\" ng-class=\"{'active':($root.global.header_menu=='search'&&$root.global.leftmenu_current_expand=='')||$root.global.leftmenu_current_expand=='search'}\" ng-click=vm.goto_search()><i class=\"wtfont wtf-search\"></i></a></li><li><a href=javascript:; class=notice-menu tooltip-placement=right tooltip-animation=false tooltip=\"{{{true:'消息'}[!$root.global.leftmenu_current_expand]}}\" ng-class=\"{'active':$root.global.leftmenu_current_expand=='notice'}\" ng-click=\"vm.expand_item('notice')\"><i class=\"wtfont wtf-notice\"></i> <span class=\"label label-default label-danger\" ng-if=\"global.unread_count>0\">{{global.unread_count}}</span></a></li></ul><ul class=leftmenu_module><li><a href=javascript:; tooltip-placement=right tooltip-animation=false tooltip=\"{{{true:'团队'}[!$root.global.leftmenu_current_expand]}}\" ng-class=\"{'active':($root.global.header_menu=='team'&&$root.global.leftmenu_current_expand=='')||$root.global.leftmenu_current_expand=='teams'}\" ng-click=\"vm.expand_item('teams')\"><i class=\"wtfont wtf-team\"></i></a></li><li><a wt-track=LeftMenu|Projects href=javascript:; tooltip-placement=right tooltip-animation=false tooltip=\"{{{true:'项目'}[!$root.global.leftmenu_current_expand]}}\" ng-class=\"{'active':($root.global.header_menu=='project'&&$root.global.leftmenu_current_expand=='')||$root.global.leftmenu_current_expand=='project'}\" ng-click=\"vm.expand_item('project')\"><i class=\"wtfont wtf-project\"></i></a></li></ul></div><div class=leftmenu_footer><div class=\"js-popbox clickable\" tooltip-placement=right tooltip-animation=false tooltip=\"{{{true:'快速新建'}[!$root.global.leftmenu_current_expand]}}\" data-placement=right data-align=bottom ng-class=\"{'active':$root.global.leftmenu_current_expand=='create'}\" ng-click=vm.show_create($event) id=shortcut_create_btn><i class=\"wtfont wtf-create\"></i></div></div></div><div id=leftmenu_content ng-show=\"$root.global.leftmenu_current_expand && $root.global.leftmenu_current_expand!='notice' && $root.global.leftmenu_current_expand!='create'\" ng-style=$root.global.leftmenu_current_expand_style><wt-me-menu ng-if=\"$root.global.leftmenu_current_expand=='me'\"></wt-me-menu><wt-teams-menu ng-if=\"$root.global.leftmenu_current_expand=='teams'\"></wt-teams-menu><wt-projects-menu ng-if=\"$root.global.leftmenu_current_expand=='project'\"></wt-projects-menu></div><div id=leftmenu_backdrop ng-click=vm.js_leftmenu_collapsed($event) ng-if=\"$root.global.leftmenu_current_expand && $root.global.leftmenu_current_expand!='notice' && $root.global.leftmenu_current_expand!='create'\"></div></div>"),a.put("/ycjs/directive/leftmenu/leftmenu_help_pop_weixin_qrcode.html",'<div class=p_15><img width=100 src="https://dn-wtbox.qbox.me/img/index/contact-code.png?ver=3.3.21" alt="Worktile官方微信"></div>'),a.put("/ycjs/directive/leftmenu/leftmenu_me.html",'<div class="flex-col leftmenu-me"><div class="leftmenu-me-head flex-row"><div class="flex-se1 flex-row"><div class="w-90 pl-20 pt-15"><wt-avatar member=global.me class=left size=56 not-in-scroll=true></wt-avatar></div><div title="{{global.me.display_name+\'  @\'+global.me.name +\'&#10;\'+global.me.email}}"><div class="w-185 mt-20 fs-16 text-overflow"><span class=color-text-dark>{{global.me.display_name}}</span> <span class="mr-10 color-text-graylight">{{\'&nbsp; @\' + global.me.name}}</span></div><div class="w-185 mt-7 color-text-graylight text-overflow">{{global.me.email}}</div></div></div><div class="w-100 pt-20 pr-15"><div class=al-r><a class=color-text-graylight ui-sref=account.settings ui-sref-opts={reload:true} href=/account/settings><i class="fa fa-cog fs-18 vl-b"></i> 帐户设置</a></div><div class="mt-10 al-r"><a class=color-text-graylight href=javascript:; ng-click=$root.logout()><i class="fa fa-sign-out fs-18 vl-b"></i> 退出登录</a></div></div></div><div class="flex-se1 fixed-flex-scroll" wt-scroll><div class="pb-20 pl-20 pr-20"><div class=item-wrapper><div class=title><i class="wtfont wtf-worktile"></i>&nbsp; 官方资源</div><div class="flex-row leftmenu-me-link plr-10 mt-20"><div class=flex-se1><a href=https://worktile.com/help target=_blank><i class="fa fa-question-circle"></i><br>帮助</a></div><div class=flex-se1><a href=https://worktile.com/club target=_blank><i class="fa fa-comments"></i><br>社区</a></div><div class=flex-se1><a href=https://worktile.com/blog target=_blank><i class="fa fa-pencil"></i><br>博客</a></div><div class=flex-se1><a href=https://worktile.com/videos target=_blank><i class="fa fa-play-circle-o"></i><br>视频</a></div></div></div><div class=item-wrapper><div class=title><i class="fa fa-bullhorn"></i>&nbsp; 广播</div><div class="mt-20 al-c"><a ng-href={{vm.broadcast_msg.url}} target=_blank><img ng-src={{vm.broadcast_msg.cover}} alt=""></a></div></div><div class=item-wrapper><div class=title><a href=/share><i class="fa fa-thumbs-o-up"></i>&nbsp; 邀请朋友使用 Worktile</a></div></div><div class=item-wrapper><div class=title><span class=clickable ng-mouseenter=vm.js_pop_app_download_open($event) ng-mouseleave=vm.js_pop_app_download_close()><i class="fa fa-arrow-circle-o-down"></i>&nbsp; Worktile 客户端</span></div></div><div class=item-wrapper><div class=title><a class=color-text-dark href=javascript:; ng-click=vm.switch()><i class="fa fa-undo"></i>&nbsp; 返回旧版本</a></div></div><div class=item-wrapper><div class=title><i class="fa fa-envelope-o"></i>&nbsp; 联系我们</div><div class="plr-10 mt-20"><table><tr><td class="pb-5 color-text-graylight">QQ群：</td><td class=pb-5><a href="http://shang.qq.com/wpa/qunwpa?idkey=5a6ecf81ec03fae964ff77d4aefa7b8e8644cbaf8cfa1b9977623e051954aa1e" target=_blank class=color-text-dark>325482073</a></td></tr><tr><td class="pb-5 color-text-graylight">电&nbsp; 话：</td><td class="pb-5 color-text-dark">400-805-6966</td></tr><tr><td class="pb-5 color-text-graylight">邮&nbsp; 箱：</td><td class=pb-5><a href=mailto:support@worktile.com class=color-text-dark>support@worktile.com</a></td></tr><tr><td class="pb-5 color-text-graylight">微&nbsp; 博：</td><td class=pb-5><a href=http://weibo.com/worktile target=_blank class=color-text-dark>@Worktile</a></td></tr><tr><td class="pb-5 color-text-graylight">微&nbsp; 信：</td><td class="pb-5 color-text-dark">搜索"getworktile" 或 <u class="clickable color-text-act-red" ng-mouseenter=vm.js_pop_weixin_qrcode($event) ng-mouseleave=vm.popbox_obj.close()>扫描二维码</u></td></tr></table><div class="mt-15 al-c"><a href="https://worktile.com/feedback?from=v4" target=_blank><button class="btn btn--fancy w-200">在线反馈</button></a></div></div></div></div></div></div>'),a.put("/ycjs/directive/leftmenu/leftmenu_me_pop_app_download.html",'<div class=p_15><img src=/img/moblie/mobile_download_qrcode.png alt="扫描二维码下载"></div>'),a.put("/ycjs/directive/leftmenu/leftmenu_pop_teams_add_choice.html","<div class=leftmenu_team_pop_add_choice><ul><li><a ng-click=pm.js_create_team()>创建团队</a></li></ul></div>"),a.put("/ycjs/directive/leftmenu/leftmenu_projects.html",'<dl class=leftmenu_projects><dt>项&nbsp;目 <a href=javascript:; class=pull-right ng-click=vm.add_project()><i class="wtfont wtf-add"></i></a></dt><dd class=leftmenu_projects_search_form><form role=search><i class=icon-search></i> <input type=text trigger-keydown="" ng-change=vm.change_query() placeholder=快速查找项目 wt-autofocus="" class=form-control ng-model="vm.query"></form><div class=leftmenu_projects_more><a href=/projects>全部项目</a></div></dd><div class=height-nonav wt-scroll><dd class=leftmenu_projects_dd ng-if=vm.is_empty><div class="empty-panel empty-panel-small"><i class="fa fa-clock-o"></i><br><span>没有项目结果</span></div></dd><dd class=leftmenu_projects_dd ng-if="vm.star_projects.length > 0" ng-hide=!!vm.query><h3><i class="mr_10 fa fa-star-o"></i>常用项目</h3><ul><li ng-repeat="project in vm.star_projects" pid={{project.pid}}><a ng-class="{\'active\':vm.selected_pid == project.pid, \'current\':vm.current_pid == project.pid && vm.current_star_project == true}" href=javascript:; ng-click=vm.to_project(project) title={{project.name}}><i class=mr_10 ng-class=project.pic ng-style="{color: project.bg}"></i> <span ng-bind=project.name></span></a></li></ul></dd><dd class=leftmenu_projects_dd ng-repeat="team in vm.teams" ng-if="team.show_projects.length > 0"><h3 ng-if="team.team_id == -1"><i class="mr_10 wtfont wtf-user"></i><span class=team_name ng-bind=team.name></span></h3><h3 ng-if="team.team_id != -1"><a href=javascript:; ng-click=vm.js_goto_team(team,$event)><i class="mr_10 wtfont wtf-team"></i><span class=team_name ng-bind=team.name></span></a></h3><ul><li pid={{project.pid}} ng-repeat="project in team.show_projects"><a href=javascript:; ng-click=vm.to_project(project) ng-class="{\'active\':vm.selected_pid == project.pid, \'current\':vm.current_pid == project.pid && vm.current_star_project == false}" title={{project.name}}><i ng-class=project.pic ng-style="{color: project.bg}"></i> <span ng-bind=project.name></span></a></li></ul></dd></div></dl>'),a.put("/ycjs/directive/leftmenu/leftmenu_teams.html",'<dl class=leftmenu_teams><dt ng-if=!vm.is_team_create>团&nbsp;队 <a href=javascript:; class=pull-right ng-click="vm.js_pop_teams_add_choice($event, this)"><i class="wtfont wtf-add"></i></a></dt><dd class="height-nonav height-nonav--notab" wt-scroll ng-if=!vm.is_team_create><ul class=leftmenu_teams ng-if="teams.length>0"><li ng-repeat="team in teams"><a href=javascript:; ui-sref="team.dashboard({team_id: team.team_id})" ui-sref-opts="{reload: true}"><img src=/img/leftmenu/team_default_pic.png alt=""><h5><span ng-bind-html=team.name></span></h5><small><span><i class="fa fa-user"></i> {{team.member_count||0}}人</span> <span><i ng-class="{1:\'icon-private\', 2:\'icon-public\'}[team.visibility]"></i> {{ {1:\'私有\', 2:\'公开\'}[team.visibility] }}</span></small></a></li></ul><div ng-if="teams.length==0" class=p_20><h4 class=mt_10>你还没有加入任何团队 : (</h4><div class="mt_10 color-text-grayer">可以新建一个团队，或者加入已有团队</div><div class="al_c mt_30"><button class="btn btn-lg w_100p" ng-click=vm.js_pop_teams_add_choice()>新建团队</button></div></div></dd></dl>'),a.put("/ycjs/directive/leftmenu/leftmenu_teams_pop_add.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>新建团队</h3></div><form name=add_team_form class="w_355 plr_20 pt_20" w5c-form-validate="" novalidate="" role=form><div class=form-group><label class=control-label>团队名称：</label><div><input name=team_name ng-model=vm.team_name placeholder=团队名称 class="form-control ng-pristine ng-invalid ng-invalid-required valid" type=text wt-focus=teamNameInputFocus required=""></div></div><div class=form-group><label class=control-label>团队描述：</label><div><textarea ng-model=vm.team_desc placeholder=为团队添加简短描述（可选） rows=4 class="form-control ng-pristine ng-valid"></textarea></div></div><div class=form-group><button class="btn btn-success w_165" wt-loading-status=vm.saving data-loading-text=新建中... w5c-form-submit=vm.js_add_team()>创&nbsp; 建</button> <button class="btn btn-link btn-cancel w_120" ng-click=js_close()>取&nbsp; 消</button></div></form>'),a.put("/ycjs/directive/leftmenu/shortcut_create.html",'<div class=popbox-body><ul class=popbox-menu><li><a href=javascript:; ng-click=vm.add_team()><i class="fa fa-group fa-fw"></i> 团队</a></li><li><a href=javascript:; ng-click=vm.add_project()><i class="fa fa-inbox fa-fw"></i> 项目</a></li><li class=divider></li><li><a href=javascript:; ng-click=vm.add_task()><i class="fa fa-tasks fa-fw"></i> 任务</a></li><li><a href=javascript:; ng-click=vm.add_event()><i class="fa fa-calendar-o fa-fw"></i> 日程</a></li><li><a href=javascript:; ng-click=vm.add_file()><i class="fa fa-file fa-fw"></i> 文件</a></li></ul></div>'),a.put("/ycjs/directive/member_control/member_control.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-avatar ng-if="mood==\'team\'"><div class=avatar-body ng-class="{true: \'member-pendding\'}[[(selected_member.status==2 || selected_member.status==3)]]"><button class="cancel icon-remove" ng-click=js_close()></button><wt-avatar member=selected_member size=56></wt-avatar><div class=avatar-right><h4 class="avatar-heading help-inline">{{selected_member.display_name}}</h4><span class="text-muted pl_15"><span ng-if="selected_member.uid == current_team.owner.uid">团队所有者</span> <span ng-if="selected_member.uid != current_team.owner.uid">{{selected_member.role | role}}</span></span><p><span class=help-inline>@{{selected_member.name}}</span></p><div class=member_desc title="{{ selected_member.desc || \'他很懒，还没有个人说明\' }}"><span class=text-muted ng-bind="selected_member.desc||\'他很懒，还没有个人说明\'"></span></div></div></div><div class=avatar-footer ng-if=vm.showTeamSetting ng-hide="!current_team.is_owner && !(current_team.curr_role | is_admin) && selected_member.uid != current_team.owner.uid"><section ng-hide="!(current_team.curr_role | is_admin)" class="m_sub15 mt_sub14"><ul class="ul-vertical ul-vertical--small"><li ng-if="(current_team.curr_role | is_admin) && selected_member.status | is_pending"><a class=item href=javascript:; ng-click=js_view_invite_code()><i class="fa fa-link"></i> 发送邀请链接</a><hr class="popbox-hr"></li><li ng-if="selected_member.uid!=current_team.owner.uid && (current_team.curr_role | is_admin) && !(selected_member.status | is_pending)"><a class=item href=javascript:; ng-click=js_step(5)><i class="fa fa-wrench"></i> 设置权限</a><hr class="popbox-hr"></li><li ng-if="current_team.owner.uid == $root.global.me.uid"><a class=item href=javascript:; ng-click=js_step(8)><i class="wtfont wtf-project"></i> 添加到团队项目</a></li></ul><hr class=popbox-hr ng-if="selected_member.uid!=$root.global.me.uid && current_team.owner.uid == $root.global.me.uid"><div class=p_20 ng-if="selected_member.uid!=$root.global.me.uid && selected_member.uid!=current_team.owner.uid"><button ng-if="(current_team.curr_role | is_admin) && selected_member.status | is_pending" class="btn btn-block btn--warning-border" ng-click=js_step(4)>取消邀请</button> <button ng-if="(current_team.curr_role | is_admin) && !(selected_member.status | is_pending)" class="btn btn-block btn--warning-border" ng-click=js_step(2)>移除成员</button></div></section></div></div><div class=popbox-avatar ng-if="mood==\'project\'"><div class=avatar-body ng-class="{true: \'member-pendding\'}[[(selected_member.status==2 || selected_member.status==3)]]"><button class="cancel icon-remove" ng-click=js_close()></button><wt-avatar member=selected_member size=56></wt-avatar><div class=avatar-right><h4 class="avatar-heading help-inline">{{selected_member.display_name}}</h4><span class="text-muted pl_15">{{selected_member.role | prj_role}}</span><p><span class=help-inline>@{{selected_member.name}}</span></p><div class=member_desc><span class=text-muted ng-bind="selected_member.desc||\'这家伙很懒，还没有个人说明\'"></span></div></div></div><div class=avatar-footer ng-if="global.prj_module.setting | permission:project.permission"><div class="pull-left color_gray mr_15">{{ {2:\'成员还未接受邀请\', 3: \'成员已经退出团队\'}[selected_member.status] }}</div><div ng-if=can_change><button ng-click=js_step(91) class="btn btn--big mr_15" ng-show="selected_member.status==1">设置权限</button> <button ng-click=js_step(92) class="btn btn--warning">移除</button></div><div ng-show=!can_change class=text-left><div><span class=text-muted>你不能修改当前成员权限，每个项目至少需要一名负责人</span></div></div></div></div></li><li ng-switch-when=10 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>成员设置</h3></div><div class=popbox-body><ul class=popbox-menu><li ng-hide="selected_member.uid == team.owner.uid" class=mr_15><a ng-click=js_step(5);><i class=icon-xx></i> 设置权限</a></li><li ng-show="(!(selected_member.status | is_pending)) && (selected_member.uid != team.owner.uid)"><a ng-click=js_step(2)><i class=icon-trash></i> 从团队移除</a></li><li ng-show="(selected_member.status | is_pending)" class=divider></li><li ng-show="(selected_member.status | is_pending)"><a ng-click=js_view_invite_code()><i class=icon-xx></i>发送邀请链接</a></li><li ng-show="(selected_member.status | is_pending)"><a ng-click=js_step(4)><i class=icon-xx></i> 取消邀请</a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>设置分组</h3></div><div class=popbox-body><ul class=popbox-menu><li ng-repeat="group in team.groups"><a href=javascript:; tabindex=-1 ng-click="js_set_group(selected_member, group)"><i ng-class="{false: \'icon-xx\', true: \'icon-ok\'}[selected_member.group_id==group.group_id]" class=color_gray></i> <span class=pl_5>{{group.name}}</span></a></li><li ng-show="team.groups==0"><div class=empty-menu>还未新建分组</div></li></ul></div></li><li ng-switch-when=2 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>移除成员</h3></div><div class=popbox-body><div class=part-loading data-ng-hide=loading_unique_admin_prjs_done></div><div class="alert alert-info" data-ng-show="loading_unique_admin_prjs_done && unique_admin_prjs.length == 0">被移除的成员，将不能再访问该团队的任何信息，但相关的数据不会被删除。</div><div class="alert alert-warning" data-ng-show="loading_unique_admin_prjs_done && unique_admin_prjs.length > 0">该成员在当前团队中有{{unique_admin_prjs.length}}个项目是唯一负责人，删除后，这些项目将无法添加新成员，请谨慎操作。</div><button data-ng-show=loading_unique_admin_prjs_done ng-click=js_delete_member(selected_member) class="btn btn-danger" data-loading-text=删除中... wt-loading-status=is_deleting_member>确定移除</button></div></li><li ng-switch-when=3 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>{{selected_member.display_name}}</h3></div><div class=popbox-body wt-scroll><ul class=popbox-menu><li ng-repeat="member_project in member_projects_auth"><a href=javascript:;><span class="pull-left text-muted">{{member_project.name}}</span> <span class=pull-right>{{member_project.curr_role | role}}</span></a></li></ul><span ng-show="member_projects_auth != null && member_projects_auth.length == 0">没有参与的项目</span></div></li><li ng-switch-when=4 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>取消邀请</h3></div><div class=popbox-body><div class="alert alert-info">取消邀请后，发送给该成员的邀请链接将会失效，成员加入该团队需要你再次发送邀请。</div><button class="btn btn-danger" ng-click=js_cancel_invite(selected_member) data-loading-text=取消中... wt-loading-status=is_canceling_invite>取消邀请</button></div></li><li ng-switch-when=5 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>设置权限</h3></div><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu"><li ng-class="{\'selected\':(selected_member.role | is_admin)}"><a ng-click=js_set_user_as_admin()><strong>管理员</strong><br><span class=text-muted>可以创建项目，邀请成员加入团队</span></a></li><li class=divider></li><li ng-class="{\'selected\':(selected_member.role | is_member)}"><a ng-click=js_set_user_as_member()><strong>成员</strong><br><span class=text-muted>访问和操作自己参与的项目</span></a></li><li class=divider></li><li ng-class="{\'selected\':(selected_member.role | is_guest)}"><a ng-click=js_set_user_as_guest()><strong>访客</strong><br><span class=text-muted>不是团队成员，只能访问和操作自己参与的项目</span></a></li></ul></div></li><li ng-switch-when=6 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>发送邀请链接</h3></div><div class=popbox-body><div class="alert alert-info">如果 <strong>{{ selected_member.display_name }}</strong> 没有收到邀请邮件，可以把下面的邀请链接直接发给他：</div><input class="input form-control help-block" wt-click-select type=text ng-model=selected_member.invite_url readonly=readonly></div></li><li ng-switch-when=91 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>设置权限</h3></div><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu"><li ng-class="{true:\'selected\',false:\'\'}[selected_member.role==1]"><a href=javascript:; ng-click=js_set_user_as_admin()><strong>负责人</strong><br><span class=text-muted>可以管理项目成员，对项目进行设置</span></a></li><li class=divider></li><li ng-class="{true:\'selected\',false:\'\'}[selected_member.role==2]"><a href=javascript:; ng-click=js_set_user_as_member()><strong>成员</strong><br><span class=text-muted>通用性操作，如创建任务、上传文件等</span></a></li><li class=divider></li><li ng-class="{true:\'selected\',false:\'\'}[selected_member.role==3]"><a href=javascript:; ng-click=js_set_user_as_guest()><strong>访客</strong><br><span class=text-muted>只能查看项目内容、发表评论、关注</span></a></li></ul></div></li><li ng-switch-when=92 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>移除成员</h3></div><div class=popbox-body><span>被移除的成员，将不能再访问该项目的信息，但<br>相关的数据不会被删除。</span></div><div class=popbox-footer><button wt-loading-status=is_deleting data-loading-text=删除中... ng-click=js_delete_member(selected_member) class="btn btn-danger">确定移除</button></div></li><li ng-switch-when=8 class=popbox-step-li><div class=popbox-header><button class="back icon-chevron-left" ng-click=js_step(0)></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>添加到团队项目</h3></div><div class=popbox-bodywrapper wt-scroll><div ng-show=!vm.loading_team_projects_done class="part-loading mt_12"></div><div class=popbox-body ng-if=vm.loading_team_projects_done><div class=empty-menu ng-if="vm.team_projects.length==0">没有未加入的团队项目</div><div ng-show="vm.team_projects.length>0"><input type=text wt-focus=2500 name=search_project_input ng-model=search_project_input placeholder=搜索项目 class="form-control help-block"><br></div><ul class="ul-vertical checkable checkable--popboxmenu" ng-if="vm.team_projects.length>0"><li ng-class="{\'selected\':project.checked}" ng-repeat="project in vm.team_projects | filterProjects:search_project_input"><a ng-click=vm.js_toggle_join(project) class=item><i class={{project.pic}} ng-style={color:project.bg}></i> {{project.name}}</a></li></ul></div></div><div ng-if="vm.team_projects.length != 0"><hr class="popbox-hr"><div class=p_20><button class="btn btn-block" ng-click=vm.add_member2projects()>添 &nbsp;加</button></div></div></li></ul>'),a.put("/ycjs/directive/notice/notice_item.html",'<div class="notice-item-inner slide-trigger" ng-click=js_click_notice()><div class="column column-read"><a ng-if="vm.tab == \'unread\'" href=javascript:; ng-show=!notice.is_read class="icon-envelope mr_15" tooltip=标为已读 ng-click=js_set_notice_read($event,notice)></a> <a href=javascript:; ng-click=js_toggle_notice_pending($event,notice) ng-if=!notice.is_pending class=icon-flag-alt tooltip=标为待处理></a> <a href=javascript:; ng-click=js_toggle_notice_pending($event,notice) ng-if=notice.is_pending class=icon-flag tooltip=标为已处理></a></div><div class="column column-sender"><wt-avatar member=notice.sender name=true size=30></wt-avatar></div><div class="column column-action"><h4 bo-text=action></h4><span class=entity><i bo-class=type_icon.icon></i> <span bo-html=display_entity.name></span></span></div><div class="column column-datetime"><span bo-text="notice.published | fromNow"></span></div></div>'),a.put("/ycjs/directive/notice/notice_list.html",'<div class=layout_content><div class=layout_content_main id=notice_list><div class=mod-navbar><div class="main main-clickable" ng-click="$root.global.leftmenu_current_expand=\'\'"><div class=title><h3><i class="wtfont wtf-notice"></i>消息中心</h3></div><div class=main_toolbar><span class=main-clickable-text>关&nbsp;&nbsp;闭</span></div></div><div class=sub><ul class=mod_subnav><li><a ng-class="{\'active\':vm.tab == \'unread\'}" href=javascript:; ng-click="vm.js_switch_tab(\'unread\')">未读</a></li><li><a ng-class="{\'active\':vm.tab == \'pending\'}" href=javascript:; ng-click="vm.js_switch_tab(\'pending\')">待处理</a></li><li><a ng-class="{\'active\':vm.tab == \'read\'}" href=javascript:; ng-click="vm.js_switch_tab(\'read\')">已读</a></li></ul></div></div><div class="height-nonav notice-list-panel" wt-scroll><dl class=frame data-minheight=112><div class="load-more part-loading" ng-hide=vm.part_first_loading_done></div><dd class="frame-dd notice-list" ng-show=vm.part_first_loading_done><div class=frame-lr-right ng-if="(vm.tab == \'unread\' && (vm.unread_notices.length > 0)) ||\n                (vm.tab == \'pending\' && (vm.pending_notices.length > 0)) || (vm.tab == \'read\')"><button ng-if="vm.tab == \'unread\'" class="btn mt_10" ng-click=js_set_all_notice_read()><i class=icon-check></i>&nbsp; 全部标为已读</button> <button ng-if="vm.tab == \'pending\'" class="btn mt_10" ng-click=js_handle_all_notice()><i class=icon-check></i>&nbsp; 全部标为已处理</button><dl class=dl-filter ng-if="vm.tab == \'read\'"><dt><span class=title>按类型筛选</span></dt><dd><ul class=checkable><li ng-class="{all:\'selected\'}[vm.type]" ng-click="vm.setType(\'all\')"><a href=javascript:;>全部</a></li><li ng-class="{assign:\'selected\'}[vm.type]" ng-click="vm.setType(\'assign\')"><a href=javascript:;>分配给我</a></li><li ng-class="{watch:\'selected\'}[vm.type]" ng-click="vm.setType(\'watch\')"><a href=javascript:;>提醒关注</a></li><li ng-class="{metion:\'selected\'}[vm.type]" ng-click="vm.setType(\'metion\')"><a href=javascript:;>@ 我</a></li><li ng-class="{comment:\'selected\'}[vm.type]" ng-click="vm.setType(\'comment\')"><a href=javascript:;>评论</a></li></ul></dd></dl></div><div class=frame-lr-left><div ng-show="vm.tab == \'read\'"><div class="notice-item wt-row" bindonce="" ng-repeat="notice in vm.read_notices"><wt-notice-item notice-click=js_show_slide_detail($eType,notice,$entity)></wt-notice-item></div><div class="empty-panel text-center ml_220" ng-show="vm.read_notices.length == 0 && vm.part_loading_done"><i class=icon-bell-alt></i><br><br><span>没有已读消息</span></div><div class=part-loading ng-show=!vm.part_loading_done></div><div class=loading-more-panel ng-show="!vm.has_no_more && vm.part_loading_done"><button class=btn ng-click=vm.js_load_more_notice()>加载更多...</button></div></div><div ng-show="vm.tab == \'unread\'"><div class="notice-item wt-row" bindonce="" ng-repeat="notice in vm.unread_notices"><wt-notice-item notice-click=js_show_slide_detail($eType,notice,$entity)></wt-notice-item></div><div class="empty-panel text-center ml_220" ng-show="vm.unread_notices.length == 0 && vm.part_loading_done"><i class=icon-bell-alt></i><br><br><span>没有未读消息</span></div></div><div ng-show="vm.tab == \'pending\'"><div class="notice-item wt-row" bindonce="" ng-repeat="notice in vm.pending_notices"><wt-notice-item></wt-notice-item></div><div class="empty-panel text-center ml_220" ng-show="vm.pending_notices.length == 0 && vm.part_loading_done"><i class=icon-bell-alt></i><br><br><span>没有待处理的消息</span></div></div></div></dd></dl></div></div></div>'),a.put("/ycjs/directive/notice_panel/notice_panel.html","<div class=notice-panel><ul><li class=flex_row><span class=notice-panel-checkbox ng-click=\"vm.js_toggle_checkbox_item('task')\"><i ng-class=\"{0: 'icon-check-empty', 1: 'icon-check-sign'}[vm.check_list.is_check_task]\"></i></span><div class=flex_se1><p><a href=javascript:; ng-click=\"vm.js_toggle_checkbox_item('task')\" class=color-text-dark>分配任务</a></p><p class=notice-panel-desc>(分配给我新的任务)</p></div></li><li class=flex_row><span class=notice-panel-checkbox ng-click=\"vm.js_toggle_checkbox_item('at')\"><i ng-class=\"{0: 'icon-check-empty', 1: 'icon-check-sign'}[vm.check_list.is_check_at]\"></i></span><div class=flex_se1><p><a href=javascript:; ng-click=\"vm.js_toggle_checkbox_item('at')\" class=color-text-dark>@ 我</a></p><p class=notice-panel-desc>(评论提到我的/回复我的评论)</p></div></li><li class=flex_row><span class=notice-panel-checkbox ng-click=\"vm.js_toggle_checkbox_item('calendar')\"><i ng-class=\"{0: 'icon-check-empty', 1: 'icon-check-sign'}[vm.check_list.is_check_calendar]\"></i></span><div class=flex_se1><p><a href=javascript:; ng-click=\"vm.js_toggle_checkbox_item('calendar')\" class=color-text-dark>邀请参与日程</a></p><p class=notice-panel-desc>(邀请我参与日程)</p></div></li><li class=flex_row><span class=notice-panel-checkbox ng-click=\"vm.js_toggle_checkbox_item('watcher')\"><i ng-class=\"{0: 'icon-check-empty', 1: 'icon-check-sign'}[vm.check_list.is_check_watcher]\"></i></span><div class=flex_se1><p><a href=javascript:; ng-click=\"vm.js_toggle_checkbox_item('watcher')\" class=color-text-dark>提醒关注</a></p><p class=\"fs-12 color-text-gray\">(提醒我关注任务，文件，话题，文档/文件上传新版本/完成任务/关注的任务列表更新)</p></div></li><li class=flex_row><span class=notice-panel-checkbox ng-click=\"vm.js_toggle_checkbox_item('comment')\"><i ng-class=\"{0: 'icon-check-empty', 1: 'icon-check-sign'}[vm.check_list.is_check_comment]\"></i></span><div class=flex_se1><p><a href=javascript:; ng-click=\"vm.js_toggle_checkbox_item('comment')\" class=color-text-dark>评论消息</a></p><p class=notice-panel-desc>(评论任务，日程，文件，话题，文档/回复评论)</p></div></li><li class=flex_row><span class=notice-panel-checkbox ng-click=\"vm.js_toggle_checkbox_item('other')\"><i ng-class=\"{0: 'icon-check-empty', 1: 'icon-check-sign'}[vm.check_list.is_check_other]\"></i></span><div class=flex_se1><p><a href=javascript:; ng-click=\"vm.js_toggle_checkbox_item('other')\" class=color-text-dark>其他消息</a></p><p class=notice-panel-desc>(加入或移除项目/加入或移除团队/归档项目/删除项目/设置你成为项目负责人/解散团队)</p></div></li></ul><div class=al_c><button class=\"btn btn-success\" ng-click=vm.js_save()>保&nbsp; 存</button> <button class=\"btn btn-cancel btn-link ml-10\" ng-click=vm.js_cancel()>取&nbsp; 消</button></div></div>"),
a.put("/ycjs/directive/page/pop_delete_page.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>删除文档</h3></div><div class=popbox-body><span>文档删除后会放在回收站，可以在回收站选择<br>恢复或者彻底删除。</span></div><div class=popbox-footer><button wt-loading-status=deleting data-loading-text=删除中... ng-click=js_delete() class="btn btn-danger">确定删除</button></div>'),a.put("/ycjs/directive/project/set_labels_add.html",'<div class=label-setter><ul class=popbox-step ng-switch on=vm.step_setlables><li ng-switch-default class=popbox-step-li><div class=popbox-header ng-if="vm.isNewHeader && vm.type != \'project\'"><button ng-if=vm.isBack class="back icon-chevron-left" ng-click=vm.js_back()></button> <button ng-if=vm.isClose class="cancel icon-remove" ng-click=vm.js_close()></button><h3>设置标签</h3></div><div class=sidebar_header ng-show="vm.type === \'project\'"><button class="back wtfont wtf-angleleft" ng-click=vm.js_back()></button> <button ng-click=vm.js_close() class="cancel wtfont wtf-close"></button><h3>设置标签</h3></div><div class=popbox-body ng-if="vm.labels.length === 0">您已设置完全部的标签!</div><div class=popbox-body ng-if="vm.labels.length > 0"><form role=form wt-enter=js_set_lables()><div class=form-group><label>标签名称</label><input type=text ng-model=vm.newLabel.desc wt-autofocus="" class=form-control placeholder="标签名称"></div><div class=form-group><label>标签颜色</label></div><div class="form-group max-w280"><span ng-if=vm.isEdit class="task-label-lg {{vm.newLabel.name}}-label text-center"><i class="fa fa-check selected"></i></span> <span ng-if=!vm.isEdit ng-repeat="label in vm.labels" ng-click=vm.js_select_color(label.name) class="task-label-lg {{label.name}}-label text-center mb_7"><i ng-class="{\'selected\':vm.newLabel.name === label.name}" class="fa fa-check"></i></span></div></form></div><div class=popbox-footer ng-if="vm.labels.length > 0"><button ng-click=vm.js_save_label() class="btn btn-success" data-loading-text=保存中... wt-loading-status=is_saving>确 &nbsp;定</button> <button ng-if="vm.isEdit && vm.type != \'project\'" ng-click=vm.js_step(1) class="btn btn-link btn-cancel">删 &nbsp;除</button> <button ng-if="vm.isEdit && vm.type == \'project\'" ng-click=vm.pop_del_label($event) class="btn btn-link btn-cancel js-popbox">删 &nbsp;除</button></div></li><li ng-switch-when=1><div class=popbox-header ng-if=vm.isNewHeader><button ng-if=vm.isBack class="back icon-chevron-left" ng-click=vm.js_step(0)></button> <button ng-if=vm.isClose class="cancel icon-remove" ng-click=vm.closeFn()></button><h3>删除标签</h3></div><div class=popbox-body><span>确定要删除标签吗?</span></div><div class=popbox-footer><button ng-click=vm.js_del_label() class="btn btn-danger">确定删除</button></div></li></ul></div>'),a.put("/ycjs/directive/project/set_project_labels.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=sidebar_header><button class="back wtfont wtf-angleleft" ng-click=backfn()></button> <button ng-click=closefn() class="cancel wtfont wtf-close"></button><h3>设置标签</h3></div><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu checkable--project"><li class=label-item ng-repeat="label in task_labels" ng-class="{\'selected\':(label.assigned && !vm.nocheck)}"><a href=javascript:; class="js-toggle-label-filter {{label.name}}-label" ng-click=js_toggle_label(label)><span class="task-label label-name pl_10" title={{label.desc}} ng-bind="[label.desc,15 ]|cutstr"></span> <i ng-click=js_edit_label(label.name,label.desc,1) class="fa fa-pencil pull-right edit"></i></a></li><li ng-show="task_labels==0"><div class=empty-menu style="margin: 0">还未定义标签</div></li><li class=divider ng-show="task_labels.length<16"></li></ul></div><div class=popbox-footer ng-show="task_labels.length<16"><ul class="popbox-menu checkable checkable--popboxmenu mt_0"><li><a ng-click=js_new_label(1) class=create-label><i class=icon-tags></i> 定义新标签</a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><wt-set-labels-add type=project project=project isnewpopup=false isnewheader=true currentlabel=vm.currentLabel isback=true isclose=true closefn=closefn() backfn=js_step(0)></wt-set-labels-add></li></ul>'),a.put("/ycjs/directive/project/set_task_labels.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header ng-if=vm.isHeader><button ng-show=vm.isBack class="back icon-chevron-left" ng-click=backfn()></button> <button class="cancel icon-remove" ng-click=js_close()></button><h3>设置标签</h3></div><div class="popbox-bodywrapper max-h300" wt-scroll><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu"><li class=label-item ng-repeat="label in task_labels" ng-class="{\'selected\':(label.assigned && !vm.nocheck)}"><a href=javascript:; class="js-toggle-label-filter {{label.name}}-label" ng-click=js_toggle_label(label)><span class="label-name pl_10" title={{label.desc}} ng-bind="[label.desc,30 ]|cutstr"></span> <i ng-click=js_edit_label(label.name,label.desc,1) class="fa fa-pencil pull-right edit"></i></a></li><li ng-show="task_labels.length==0"><div class=empty-menu>还未定义标签</div></li></ul></div></div><div class=popbox-footer><ul class="popbox-menu checkable checkable--popboxmenu mt_10"><li><a ng-click=js_new_label(1) class=create-label><i class=icon-tags></i> 定义新标签</a></li></ul></div></li><li ng-switch-when=1 class=popbox-step-li><wt-set-labels-add type=task project=project task=task isnewpopup=false isnewheader=true currentlabel=vm.currentLabel isback=true isclose=true closefn=closefn() backfn=js_step(0)></wt-set-labels-add></li></ul>'),a.put("/ycjs/directive/project/set_team_labels.html",'<div class=popbox-header ng-if=vm.isHeader><button ng-show=vm.isBack class="back icon-chevron-left" ng-click=vm.js_back()></button> <button class="cancel icon-remove" ng-click=vm.js_close()></button><h3>设置标签</h3></div><div class=popbox-body><ul class="popbox-menu checkable checkable--popboxmenu clearfix" ng-if="vm.labels.length>0"><li class="label-item pull-left" ng-repeat="label in vm.labels" ng-class="{\'selected\':(label.assigned && !vm.isCheck)}"><a href=javascript:; style="padding-left: 10px" class="js-toggle-label-filter {{label.name}}-label" ng-click=vm.js_toggle_label(label)><span class="label-name pl_10" title={{label.desc}} ng-bind="[label.desc,30 ]|cutstr"></span> <i ng-click=vm.js_popup_true($event,label.name,label.desc) data-placement=bottom data-align=right class="js-popbox fa fa-pencil pull-right edit"></i></a></li></ul><div ng-if="vm.labels.length>0"><br><br></div><ul class="popbox-menu checkable checkable--popboxmenu checkable_botton mt_20 clearfix"><li ng-show="vm.labels.length==0"><div class=empty-menu>还未定义标签</div></li><li class="divider clearBoth"></li><li><a class="js-popbox btn btn-link form-control label_add_btn" ng-click=vm.js_popup_true($event,null,null)>定义新标签</a></li></ul></div>'),a.put("/ycjs/directive/search/search_panel.html",'<div class=layout_content><div class=layout_content_main id=search_panel><div class=mod-navbar><div class=main ng-click="$root.global.leftmenu_current_expand=\'\'"><div class=title><h3><i class="wtfont wtf-search"></i>搜&nbsp;&nbsp;索</h3></div></div></div><div class="height-nonav height-nonav--notab search-panel"><div class=search-input ng-class="{\'smaller\': vm.mood!=\'input\'}"><div class=input-box><input id=the-search-input type=text wt-autofocus autocomplete=off ng-model=vm.keywords wt-enter=vm.js_trigger_search() ng-change="vm.typing = true" ng-blur="vm.typing = false" ng-focus="vm.typing = true" class="form-control input-tag" placeholder=输入要搜索的内容> <i class="fa fa-search" ng-click=js_search() ng-show="vm.last_searched!==vm.keywords"></i> <i class="fa fa-times-circle-o" ng-click=js_revoke_search() ng-show="vm.last_searched===vm.keywords"></i></div><div class="search-constraint search_range"><span class=title>搜索范围：</span> <span class=select ng-click="vm.js_select_range($event, \'noapply\')"><span ng-bind="vm.team_id_name_map[vm.results.all.filter_params.team_id] || \'未知项目\'"></span> <i class="fa fa-angle-down"></i></span></div><div class="search-constraint search_pattern"><span class=title>搜索模式：</span> <span class=select ng-click="vm.js_select_pattern($event, \'noapply\')"><span ng-bind=vm.qpattern_id_name_map[vm.results.all.filter_params.qpattern]></span> <i class="fa fa-angle-down"></i></span></div></div><div class=search-assistant ng-hide="vm.mood===\'results\' && !vm.typing && !vm.using_assistant" ng-mouseenter="vm.using_assistant = true" ng-mouseleave="vm.using_assistant = false"><div class=assistants ng-class="{dropdown: vm.mood === \'results\' && vm.part_loading_done}"><div class="assistant search-history animate-hide animate-hide--y" ng-class="{\'sp-hide\': vm.history.length === 0}"><div class=title><i class="left-icon fa fa-history"></i> <span>搜索历史</span> <a href=javascript:; class=right-button ng-click=vm.js_purge_history()>清&nbsp;空</a></div><ul class=list><li ng-repeat="record in vm.history"><a class=link href=javascript:; ng-click=vm.js_trigger_search(record)><span ng-bind=[record,30]|cutstr></span></a> <a class=right-button href=javascript:; ng-click=vm.js_drop_history(record)><i class="fa fa-times"></i></a></li></ul></div><div class="assistant search-express"><div class=title><i class="left-icon fa fa-compass"></i> <span>常用搜索</span></div><ul class=list><li><a class=link href=javascript:; ng-click="vm.js_express_search(\'_分配给我的\')">分配给我的任务</a> <a class=right-button href=javascript:; ng-click="vm.js_express_search(\'_分配给我的\')"><i class="fa fa-angle-right"></i></a></li><li><a class=link href=javascript:; ng-click="vm.js_express_search(\'_我创建的\')">我创建的</a> <a class=right-button href=javascript:; ng-click="vm.js_express_search(\'_我创建的\')"><i class="fa fa-angle-right"></i></a></li><li><a class=link href=javascript:; ng-click="vm.js_express_search(\'_我关注的\')">我关注的</a> <a class=right-button href=javascript:; ng-click="vm.js_express_search(\'_我关注的\')"><i class="fa fa-angle-right"></i></a></li><li><a class=link href=javascript:; ng-click="vm.js_express_search(\'_最近修改的\')">最近修改的</a> <a class=right-button href=javascript:; ng-click="vm.js_express_search(\'_最近修改的\')"><i class="fa fa-angle-right"></i></a></li></ul></div></div></div><div class=search-navtab ng-show="vm.mood===\'results\'"><span class=title>搜索结果：</span><ul class=navtabs><li class=tab ng-class="{active: vm.current_tab === \'all\'}" ng-hide="vm.should_tag_lable_hidden(\'all\')" ng-click="vm.js_select_tab(\'all\')"><span>全部 (<span ng-bind="vm.results.all.total || 0"></span>)</span></li><li class=tab ng-class="{active: vm.current_tab === \'tasks\'}" ng-hide="vm.should_tag_lable_hidden(\'tasks\')" ng-click="vm.js_select_tab(\'tasks\')"><span>任务 (<span ng-bind="vm.results.tasks.total || 0"></span>)</span></li><li class=tab ng-class="{active: vm.current_tab === \'files\'}" ng-hide="vm.should_tag_lable_hidden(\'files\')" ng-click="vm.js_select_tab(\'files\')"><span>文件 (<span ng-bind="vm.results.files.total || 0"></span>)</span></li><li class=tab ng-class="{active: vm.current_tab === \'events\'}" ng-hide="vm.should_tag_lable_hidden(\'events\')" ng-click="vm.js_select_tab(\'events\')"><span>日程 (<span ng-bind="vm.results.events.total || 0"></span>)</span></li><li class=tab ng-class="{active: vm.current_tab === \'pages\'}" ng-hide="vm.should_tag_lable_hidden(\'pages\')" ng-click="vm.js_select_tab(\'pages\')"><span>文档 (<span ng-bind="vm.results.pages.total || 0"></span>)</span></li><li class=tab ng-class="{active: vm.current_tab === \'posts\'}" ng-hide="vm.should_tag_lable_hidden(\'posts\')" ng-click="vm.js_select_tab(\'posts\')"><span>话题 (<span ng-bind="vm.results.posts.total || 0"></span>)</span></li><li class=tab ng-class="{active: vm.current_tab === \'mails\'}" ng-hide="vm.should_tag_lable_hidden(\'mails\')" ng-click="vm.js_select_tab(\'mails\')"><span>邮件 (<span ng-bind="vm.results.mails.total || 0"></span>)</span></li></ul></div><div class=frame-warp id=the-search-result-frame ng-hide="vm.mood!==\'results\'" max-height-to-bottom wt-scroll={alwaysShowScrollbar:1}><dl class="search-result frame" min-height-to-bottom=-14><dd class="fram-dd search-result-panel"><div class="frame-lr-right search-result-filter"><dl><dd class="search-constraint search_range"><span class=title>搜索范围：</span> <span class=select ng-click=vm.js_select_range($event)><span ng-bind="vm.team_id_name_map[vm.results[vm.current_tab].filter_params.team_id] || \'未知项目\'"></span> <i class="fa fa-angle-down"></i></span></dd><dd class="search-constraint search_pattern"><span class=title>搜索模式：</span> <span class=select ng-click=vm.js_select_pattern($event)><span ng-bind=vm.qpattern_id_name_map[vm.results[vm.current_tab].filter_params.qpattern]></span> <i class="fa fa-angle-down"></i></span></dd><dt class=search-filter>按条件筛选</dt><dd class=search-filter><ul class=checkable><li ng-class="{\'selected\': vm.results[vm.current_tab].filter_params.assigned}" ng-hide="vm.current_tab !== \'tasks\'" ng-click="vm.toggle_filter(\'assigned\')"><a href=javascript:;>分配给我的</a></li><li ng-class="{\'selected\': vm.results[vm.current_tab].filter_params.attend }" ng-hide="vm.current_tab !== \'events\'" ng-click="vm.toggle_filter(\'attend\')"><a href=javascript:;>我参与的</a></li><li ng-class="{\'selected\': vm.results[vm.current_tab].filter_params.authored}" ng-click="vm.toggle_filter(\'authored\')"><a href=javascript:;>我创建的</a></li><li ng-class="{\'selected\': vm.results[vm.current_tab].filter_params.watching}" ng-click="vm.toggle_filter(\'watching\')"><a href=javascript:;>我关注的</a></li><li ng-class="{\'selected\': vm.results[vm.current_tab].filter_params.eafter}" ng-click="vm.toggle_filter_value(\'eafter\', vm.last_month)"><a href=javascript:;>最近修改的</a></li><li ng-class="{\'selected\': vm.results[vm.current_tab].filter_params.unarchived}" ng-click="vm.toggle_filter(\'unarchived\')"><a href=javascript:;>尚未归档的</a></li></ul></dd></dl></div><div class=frame-lr-left><div class=empty-panel ng-if="vm.part_loading_done && vm.results[vm.current_tab].results.length === 0"><i class="fa fa-times"></i><br><span>没有搜索到符合条件的结果</span></div><wt-search-result-list ng-if="vm.current_tab === \'all\'" entities=vm.results.all.results projects=projects highlight=vm.tokens_re></wt-search-result-list><wt-search-result-list ng-if="vm.current_tab === \'tasks\'" entities=vm.results.tasks.results projects=projects highlight=vm.tokens_re></wt-search-result-list><wt-search-result-list ng-if="vm.current_tab === \'files\'" entities=vm.results.files.results projects=projects highlight=vm.tokens_re></wt-search-result-list><wt-search-result-list ng-if="vm.current_tab === \'events\'" entities=vm.results.events.results projects=projects highlight=vm.tokens_re></wt-search-result-list><wt-search-result-list ng-if="vm.current_tab === \'pages\'" entities=vm.results.pages.results projects=projects highlight=vm.tokens_re></wt-search-result-list><wt-search-result-list ng-if="vm.current_tab === \'posts\'" entities=vm.results.posts.results projects=projects highlight=vm.tokens_re></wt-search-result-list><wt-search-result-list ng-if="vm.current_tab === \'mails\'" entities=vm.results.mails.results projects=projects highlight=vm.tokens_re></wt-search-result-list><div class=loading-more-panel ng-if="!vm.part_loading_done || vm.current_tab === \'all\' || vm.results[vm.current_tab].has_more || vm.results[vm.current_tab].curPage >= 50"><div class="load-more part-loading" ng-hide=vm.part_loading_done></div><button ng-show="vm.current_tab !== \'all\' && vm.results[vm.current_tab].has_more && vm.part_loading_done" class=btn ng-click=vm.js_load_more() ng-disabled="vm.results[vm.current_tab].curPage >= 50" data-loading-text=加载中... wt-loading-status=!vm.part_loading_done>加载更多...</button> <span class=end-of-search ng-if="vm.part_loading_done && vm.current_tab === \'all\' && vm.results.all.has_more"><small>“全部” 结果的排序在翻页后会有较大变化，不具有跨页连续浏览的意义。<br>请在具体类型标签下加载更多数据： <a href=javascript:; ng-click="vm.js_select_tab(\'tasks\', \'bottom\')" ng-if=vm.results.tasks.has_more>任务</a> <a href=javascript:; ng-click="vm.js_select_tab(\'files\', \'bottom\')" ng-if=vm.results.files.has_more>文件</a> <a href=javascript:; ng-click="vm.js_select_tab(\'events\', \'bottom\')" ng-if=vm.results.events.has_more>日程</a> <a href=javascript:; ng-click="vm.js_select_tab(\'pages\', \'bottom\')" ng-if=vm.results.pages.has_more>文档</a> <a href=javascript:; ng-click="vm.js_select_tab(\'posts\', \'bottom\')" ng-if=vm.results.posts.has_more>话题</a> <a href=javascript:; ng-click="vm.js_select_tab(\'mails\', \'bottom\')" ng-if=vm.results.mails.has_more>邮件</a> 。</small></span> <span class=end-of-search ng-if="vm.results[vm.current_tab].curPage >= 50"><small>对不起，出于公平考虑，对于每种类型的数据我们只能向用户提供前50页 (约1000条) 的搜索结果。 请您更换关键词后再进行搜索。</small></span></div></div></dd></dl></div></div></div></div>'),a.put("/ycjs/directive/search/search_pattern_pop.html","<div class=popbox-header><button class=\"cancel icon-remove\" ng-click=js_close()></button><h3>选择模式</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><ul class=\"popbox-menu checkable checkable--popboxmenu\"><li ng-class=\"{'selected':solve_current_pattern()==='simple'}\"><a ng-click=\"js_select_pattern('simple')\"><strong>全文匹配</strong><br><span class=text-muted>全文搜索，按照综合相关度排序</span></a></li><li class=divider></li><li ng-class=\"{'selected':solve_current_pattern()==='complex'}\"><a ng-click=\"js_select_pattern('complex')\"><strong>高级匹配</strong><br><span class=text-muted>在全文搜索基础上，允许附加逻辑条件</span></a></li><li class=divider></li><li ng-class=\"{'selected':solve_current_pattern()==='ridiculous'}\"><a ng-click=\"js_select_pattern('ridiculous')\"><strong>字母片段</strong><br><span class=text-muted>适用于搜索连续出现的字母、数字</span></a></li></ul></div></div>"),a.put("/ycjs/directive/search/search_range_pop.html",'<div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>选择团队</h3></div><div class=popbox-bodywrapper wt-scroll><div class=popbox-body><ul class=popbox-menu><li ng-repeat="teamv in teams"><a href=javascript:; ng-click="js_select_team(teamv[0], teamv[1])" ng-bind=teamv[1]></a></li></ul></div></div>'),a.put("/ycjs/directive/search/search_result_list.html",'<ul class=search-result-list><li class="result-item slide-trigger" ng-repeat="entity in entities" ng-click=open_entity(entity)><div class=left-col><i ng-class=solve_entity_icon(entity)></i></div><div class=mid-col><span class=entity-name ng-bind-html=entity_title(entity)></span></div><div class=right-col><span class=host-project><i class=project-icon ng-class=projects[entity.pid].pic ng-style="{color: projects[entity.pid].bg}"></i> <span class=project-name ng-bind=projects[entity.pid].name></span></span></div></li></ul>'),a.put("/ycjs/directive/task/add_timingtask.html",'<div><div class=popbox-header><button class="back icon-chevron-left" ng-if=vm.isBack ng-click=vm.parse_back()></button> <button class="cancel icon-remove" ng-click=vm.parse_close()></button><h3>设为循环任务</h3></div><div class=popbox-body><form name=timingtask_form w5c-form-validate="" class=wt-form role=form novalidate><div class=form-group><label class=sr-only>循环创建名称：</label><div><input type=text ng-model=vm.timingtask.name placeholder=循环任务名称 name=timingtask_name wt-autofocus required class="form-control"></div></div><div class=form-group><label class=sr-only>创建周期：</label><div><select ng-model=vm.timingtask.recurrence class=form-control name=timingtask_recurrence required><option value="" selected=selected disabled=disabled>请选择创建周期：</option><option value=0>每日重复创建</option><option value=1>每周重复创建</option><option value=2>每月重复创建</option></select></div></div><div class=form-group><label class=sr-only>选择任务列表：</label><div><select ng-model=vm.timingtask.entry_id class=form-control name=timingtask_entry_id ng-options="entry.entry_id as entry.name for entry in vm.entries" required><option value="" selected=selected disabled=disabled>请选择任务列表：</option></select></div></div><div class=form-group><div><button w5c-form-submit=vm.js_timingtask_add(timingtask_form) data-loading-text=保存中... class="btn btn-success mr_15" wt-loading-status=is_prj_saveing>确&nbsp; 定</button> <button class="btn btn-link btn-cancel" ng-click=vm.parse_close()>取&nbsp; 消</button></div></div></form></div></div>'),a.put("/ycjs/directive/task/pop_add_task.html",'<ul class=popbox-step ng-switch on=step><li ng-switch-default class=popbox-step-li><div class=popbox-header><button class="cancel icon-remove" ng-click=js_close()></button><h3>新建任务</h3></div><form name=add_task_form w5c-form-validate="" novalidate role=form><div class="popbox-body w_300 pb_0" ng-show="entries.length > 0"><div class=form-group><div><textarea class="js-task-name form-control ng-pristine ng-valid" placeholder=请输入任务内容 required name=task_name ng-model=new_task.name wt-enter="js_add_task(add_task_form, new_task)" wt-enter-not-shift wt-focus>\n                        </textarea></div></div><div class=form-group><label>列表：</label><div><select class=form-control name=entry_select ng-model=new_task.entry required="" ng-options="entry as entry.name for entry in entries"></select></div></div><div class=form-group ng-show=hasExpireDate><label>截止日期：</label><div><input type=text class=form-control ng-model=new_task.expire_date readonly=readonly ng-click=js_step(1)></div></div><div class=form-group><div><button w5c-form-submit="js_add_task(add_task_form, new_task)" data-loading-text=保存中... class="btn btn-success mr_15 btn--big" wt-loading-status=saving>保&nbsp; 存</button> <button ng-click=js_close(result) class="btn btn-link btn-cancel">取&nbsp; 消</button></div></div></div><div class="popbox-body w_300 part-loading" data-ng-if=loading_entries></div><div class="popbox-body w_300 pb_0" data-ng-if="entries.length == 0"><p class="alert alert-info">必须创建列表后才可以创建任务哦！</p><button href=javascript:; ng-if=isAddEntry class="btn btn-success mb_15" ng-click=js_to_add_entry_pop()>开始添加列表</button></div></form></li><li ng-switch-when=1 class=popbox-step-li><wt-set-task-expire-date task=new_task success=js_step(0) back=js_step(0) close="js_close()"></li></ul>'),a.put("/ycjs/directive/task/pop_set_expire_date.html",'<div class=popbox-header><button class="back icon-chevron-left" ng-if=has_back ng-click=back()></button> <button class="cancel icon-remove" ng-if=has_close ng-click=close()></button><h3>设置截止日期</h3></div><div class=popbox-body><input ng-model=task.expire_date type="hidden"><ul class="list-inline text-center m_0"><li><a href=javascript:; ng-click="js_set_expire_date(\'today\')">今天</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'tomorrow\')">明天</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'week\')">本周</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'next_week\')">下周</a></li><li>|</li><li><a href=javascript:; ng-click="js_set_expire_date(\'month\')">本月</a></li></ul><div wt-datepicker=expire_date select=js_set_expire_date()></div><div class="text-muted mt_13">设置了截止日期的任务将在分配者的日程中<br>显示</div></div><div class=popbox-footer ng-if=task.tid><a class="btn btn-success mr_15" ng-click=js_set_expire(expire_date)>确定</a> <a class=btn ng-if="task.expire_date > 0" ng-click=js_cancel_expire()>取消截止时间</a></div>'),a.put("/ycjs/directive/team/team_dashboard_overview.html",'<div class=team-dashboard-overview><dl><dt>团队任务</dt><dd><ul class=numbers wt-go-to=/teams/{{vm.team_id}}/tasks><li title=已完成任务:&#10;{{data.completed}}><span class="fs-45 color_label_green">{{data.completed | number2K}}</span><br>已完成</li><li title=待完成任务:&#10;{{data.uncompleted}}><span class="fs-45 color_label_yellow">{{data.uncompleted | number2K}}</span><br>待完成</li><li title=已过期任务:&#10;{{data.expired}}><span class="fs-45 color-text-act-red">{{data.expired | number2K}}</span><br>已过期</li></ul><ul class=gauges><li><span>完成率</span><wt-graph-gauge size=90 number=vm.percent_complete color=#5DAC81 bgcolor=#FFB11B></wt-graph-gauge></li><li><span>延误率</span><wt-graph-gauge size=90 number=vm.percent_delay color=#DA4F4A bgcolor=#E8ECF4></wt-graph-gauge></li></ul></dd></dl></div>'),a.put("/ycjs/directive/team/team_dashboard_stats.html",'<dl class=team-dashboard-stats><dt><i ng-class=stats.pic ng-style={color:stats.bg}></i><h3><a ng-href=/project/{{stats.pid}}>{{stats.name}}</a></h3><span class=stats-type>{{stats.type| teamStatsType}}</span> <button class="wtfont wtf-close" ng-click=vm.js_remove_stats(stats)></button></dt><dd ng-switch=stats.type><wt-dashboard-stats-overview ng-switch-when=1 data=stats.data></wt-dashboard-stats-overview><wt-dashboard-stats-entry ng-switch-when=2 data=stats.data></wt-dashboard-stats-entry><wt-dashboard-stats-member ng-switch-when=3 data=stats.data></wt-dashboard-stats-member><wt-dashboard-stats-5day ng-switch-when=4 data=stats.data></wt-dashboard-stats-5day></dd></dl>'),a.put("/ycjs/directive/team/team_dashboard_stats_5day.html","<wt-graph-line ng-if=vm.part_loading_done config=vm.config></wt-graph-line>"),a.put("/ycjs/directive/team/team_dashboard_stats_entry.html","<wt-graph-column ng-if=vm.part_loading_done config=vm.config></wt-graph-column>"),a.put("/ycjs/directive/team/team_dashboard_stats_member.html","<wt-graph-bar ng-if=vm.part_loading_done config=vm.config></wt-graph-bar>"),a.put("/ycjs/directive/team/team_dashboard_stats_overview.html","<div class=team-dashboard-stats-overview><div class=left-pie><div class=left-pie-chart></div>任务分布</div><div class=right-number><ul class=gauge><li><wt-graph-gauge size=90 number=vm.percent_complete color=#5DAC81 bgcolor=#FFB11B></wt-graph-gauge>完成率</li><li><wt-graph-gauge size=90 number=vm.percent_delay color=#DA4F4A bgcolor=#E8ECF4></wt-graph-gauge>延误率</li></ul><ul class=numbers><li><span class=color_label_green title=已完成任务:&#10;{{data.completed}}>{{data.completed|number2K}}</span><br>已完成</li><li><span class=color_label_yellow title=未完成任务:&#10;{{data.uncompleted}}>{{data.uncompleted|number2K}}</span><br>待完成</li><li><span class=color-text-act-red title=已过期任务:&#10;{{data.expired}}>{{data.expired|number2K}}</span><br>已过期</li></ul></div></div>"),a.put("/ycjs/directive/team/team_member_add_by_email.html",'<dl class=team-member-addby-email ng-if="$root.global.team_module.add_member | permission:team.permission"><dt><h4 class=color-text-dark>通过邮件邀请</h4></dt><dd><form class=form-horizontal role=form name=invite_member_form novalidate w5c-form-validate=""><div class=inivte_email ng-if="vm.invite_type==0"><h5 class=color-text-dark>添加成员邮箱</h5><div ng-repeat="member in invite_members"><div class=form-group><div class=input_area><span ng-show=false>{{member.index = $index}}</span><div class=input-group><input type=email class=form-control ui-event="{ focus : \'js_email_focus(invite_member_form)\' }" placeholder=输入邮箱 ng-model=member.email name=member_email type=email tabindex={{$index+1}}><div class=input-group-btn><button type=button class="btn btn-default plr_20 dropdown-toggle" data-toggle=dropdown><span class="help-inlineblock text-left w_55">{{member.role | role}}</span><span class=caret></span></button><ul class="dropdown-menu pull-right" role=menu><li ng-repeat="r in invite_member_roles"><a href=javascript:; ng-click="member.role = r.role">{{r.name}}</a></li></ul></div></div></div><div class=btn_area ng-if="invite_members.length > 3"><a class=btn-delete href=javascript:; ng-click=js_delete_member($event,member)><i class="fa fa-times-circle-o"></i></a></div></div></div><div class=clearfix><span class="pull-left mt_sub2">&nbsp;&nbsp;&nbsp;<button class="btn btn-link-fancy" ng-click=js_add_invite_member()>继续添加</button></span> <span class="pull-right fs_12">管理员：可以创建项目和邀请团队成员；成员：只能看到自己参与的项目和团队可见的项目</span></div><div><h5 class="color-text-dark mt_20">邀请信内容</h5><textarea class="message form-control help-block" rows=5 ng-model=vm.invite_message tabindex={{invite_members.length+1}}>\n                    </textarea></div><div class="alert alert-danger mr_55" ng-show="invite_member_form.$errors.length > 0"><i class=icon-remove-sign></i> <span ng-bind-html-unsafe=invite_member_form.$errors[0]></span></div><div class=mr_55><br><button ng-click=js_invite_members(invite_member_form) type=button class="btn btn--big" data-loading-text=发送中... wt-loading-status=is_sending>发送邀请</button><div class=mt_20><span class=vl_m>你也可以尝试</span> <button class="btn btn-link-fancy" ng-click="vm.invite_type=1">批量粘贴邮件地址</button></div></div></div><div class=invite_email_batch ng-if="vm.invite_type==1"><h5 class=color-text-dark>添加成员邮箱</h5><div><textarea class="form-control help-block" rows=5 ng-model=vm.invite_email_batch ng-click="vm.invite_email_batch_error=\'\'" placeholder=粘贴邮箱地址，每行一个，回车换行></textarea></div><div><h5 class="color-text-dark mt_20">邀请信内容</h5><textarea class="message form-control help-block" rows=5 ng-model=vm.invite_message tabindex={{invite_members.length+1}}>\n                    </textarea></div><div class="alert alert-danger mr_55" ng-if="vm.invite_email_batch_error!=\'\'"><i class=icon-remove-sign></i>{{vm.invite_email_batch_error}}</div><div><button ng-click=vm.js_invite_email_batch() type=button class="btn btn--big" data-loading-text=发送中... wt-loading-status=is_sending>发送邀请</button><div class=mt_20><span class=vl_m>你也可以尝试</span> <button class="btn btn-link-fancy" ng-click="vm.invite_type=0">单个邮件地址</button></div></div></div></form></dd></dl>'),a.put("/ycjs/directive/team/team_member_add_by_link.html",'<dl class=team-member-addby-link ng-if="$root.global.team_module.add_member | permission:team.permission"><dt><h4>方式2：通过链接邀请</h4></dt><dd ng-if=!team.link_join_code><span class=tips>把链接通过 QQ、微信、邮件 等方式，分享给团队成员，他们即可点击链接直接加入当前团队。</span><br><br><div class=mr_55><button class="btn btn--big" ng-click=dm.toggle_join_team_link()>开启链接</button></div></dd><dd ng-if=team.link_join_code><input type=text ng-model=dm.join_team_link class="form-control help-block" wt-click-select readonly="readonly"> <span class=tips>成员加入团队后，为了防止链接泄漏可以选择关闭。</span><div class=mr_55><br><button class="btn btn--big" ng-click=dm.toggle_join_team_link()>关闭链接</button></div></dd></dl>')}]);